package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol95")]
   public dynamic class Button_disabledSkin extends MovieClip
   {
      
      public function Button_disabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol97")]
   public dynamic class Button_downSkin extends MovieClip
   {
      
      public function Button_downSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol99")]
   public dynamic class Button_emphasizedSkin extends MovieClip
   {
      
      public function Button_emphasizedSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol101")]
   public dynamic class Button_overSkin extends MovieClip
   {
      
      public function Button_overSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol103")]
   public dynamic class Button_selectedDisabledSkin extends MovieClip
   {
      
      public function Button_selectedDisabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol105")]
   public dynamic class Button_selectedDownSkin extends MovieClip
   {
      
      public function Button_selectedDownSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol107")]
   public dynamic class Button_selectedOverSkin extends MovieClip
   {
      
      public function Button_selectedOverSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol109")]
   public dynamic class Button_selectedUpSkin extends MovieClip
   {
      
      public function Button_selectedUpSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol111")]
   public dynamic class Button_upSkin extends MovieClip
   {
      
      public function Button_upSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol126")]
   public dynamic class CellRenderer_disabledSkin extends MovieClip
   {
      
      public function CellRenderer_disabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol128")]
   public dynamic class CellRenderer_downSkin extends MovieClip
   {
      
      public function CellRenderer_downSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol130")]
   public dynamic class CellRenderer_overSkin extends MovieClip
   {
      
      public function CellRenderer_overSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol132")]
   public dynamic class CellRenderer_selectedDisabledSkin extends MovieClip
   {
      
      public function CellRenderer_selectedDisabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol134")]
   public dynamic class CellRenderer_selectedDownSkin extends MovieClip
   {
      
      public function CellRenderer_selectedDownSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol136")]
   public dynamic class CellRenderer_selectedOverSkin extends MovieClip
   {
      
      public function CellRenderer_selectedOverSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol138")]
   public dynamic class CellRenderer_selectedUpSkin extends MovieClip
   {
      
      public function CellRenderer_selectedUpSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol124")]
   public dynamic class CellRenderer_upSkin extends MovieClip
   {
      
      public function CellRenderer_upSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol116")]
   public dynamic class ComboBox_disabledSkin extends MovieClip
   {
      
      public function ComboBox_disabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol120")]
   public dynamic class ComboBox_downSkin extends MovieClip
   {
      
      public function ComboBox_downSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol118")]
   public dynamic class ComboBox_overSkin extends MovieClip
   {
      
      public function ComboBox_overSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol114")]
   public dynamic class ComboBox_upSkin extends MovieClip
   {
      
      public function ComboBox_upSkin()
      {
         super();
      }
   }
}

package
{
   import mx.resources.ResourceBundle;
   
   public class en_US$controls_properties extends ResourceBundle
   {
      
      public function en_US$controls_properties()
      {
         super("en_US","controls");
      }
      
      override protected function getContent() : Object
      {
         return {
            "undefinedParameter":"CuePoint parameter undefined.",
            "nullURL":"Null URL sent to VideoPlayer.load.",
            "incorrectType":"Type must be 0, 1 or 2.",
            "okLabel":"OK",
            "noLabel":"No",
            "wrongNumParams":"Num params must be number.",
            "wrongDisabled":"Disabled must be number.",
            "wrongTime":"Time must be number.",
            "dayNamesShortest":"S,M,T,W,T,F,S",
            "wrongType":"Type must be number.",
            "firstDayOfWeek":"0",
            "requiredField":"Required Field",
            "rootNotSMIL":"URL: \'{0}\' Root node not smil: \'{1}\'.",
            "errorMessages":"Unable to make connection to server or to find FLV on server.,No matching cue point found.,Illegal cue point.,Invalid seek.,Invalid contentPath.,Invalid XML.,No bitrate match; must be no default FLV.,Cannot delete default VideoPlayer.",
            "unexpectedEnd":"Unexpected end of cuePoint param string.",
            "rootNotFound":"URL: \'{0}\' No root node found; if file is an flv, it must have a .flv extension.",
            "errWrongContainer":"ERROR: The dataProvider of \'{0}\' must not contain objects of type flash.display.DisplayObject.",
            "invalidCall":"Cannot call reconnect on an http connection.",
            "cancelLabel":"Cancel",
            "errWrongType":"ERROR: The dataProvider of \'{0}\' must be String, ViewStack, Array, or IList.",
            "badArgs":"Bad args to _play.",
            "missingRoot":"URL: \'{0}\' No root node found; if URL is for an FLV, it must have a .flv extension and take no parameters.",
            "notLoadable":"Unable to load \'{0}\'.",
            "wrongName":"Name cannot be undefined or null.",
            "wrongTimeName":"Time must be number and/or name must not be undefined or null.",
            "yesLabel":"Yes",
            "undefinedArray":"CuePoint.array undefined.",
            "missingProxy":"URL: \'{0}\' fpad xml requires proxy tag.",
            "unknownInput":"Unknown inputType \'{0}\'.",
            "missingAttributeSrc":"URL: \'{0}\' Attribute src is required in \'{1}\' tag.",
            "yearSymbol":"",
            "wrongIndex":"CuePoint.index must be number between -1 and cuePoint.array.length.",
            "notImplemented":"\'{0}\' not implemented yet.",
            "label":"LOADING %3%%",
            "wrongFormat":"Unexpected cuePoint parameter format.",
            "tagNotFound":"URL: \'{0}\' At least one video of ref tag is required.",
            "unsupportedMode":"IMEMode \'{0}\' not supported.",
            "cannotDisable":"Cannot disable actionscript cue points.",
            "missingAttributes":"URL: \'{0}\' Tag \'{1}\' requires attributes id, width, and height. Width and height must be numbers greater than or equal to 0.",
            "notfpad":"URL: \'{0}\' Root node not fpad."
         };
      }
   }
}

package
{
   import mx.resources.ResourceBundle;
   
   public class en_US$core_properties extends ResourceBundle
   {
      
      public function en_US$core_properties()
      {
         super("en_US","core");
      }
      
      override protected function getContent() : Object
      {
         return {
            "multipleChildSets_ClassAndInstance":"Multiple sets of visual children have been specified for this component (component definition and component instance).",
            "truncationIndicator":"...",
            "notExecuting":"Repeater is not executing.",
            "nullParameter":"Parameter {0} must be non-null.",
            "versionAlreadyRead":"Compatibility version has already been read.",
            "multipleChildSets_ClassAndSubclass":"Multiple sets of visual children have been specified for this component (base component definition and derived component definition).",
            "fontIncompatible":"warning: incompatible embedded font \'{0}\' specified for {1}. This component requires that the embedded font be declared with embedAsCff={2}.",
            "badParameter":"Parameter {0} must be one of the accepted values.",
            "notImplementedInFTETextField":"\'{0}\' is not implemented in FTETextField.",
            "viewSource":"View Source",
            "unsupportedTypeInFTETextField":"FTETextField does not support setting type to \"input\".",
            "badFile":"File does not exist.",
            "stateUndefined":"Undefined state \'{0}\'.",
            "badIndex":"The supplied index is out of bounds.",
            "versionAlreadySet":"Compatibility version has already been set."
         };
      }
   }
}

package
{
   import mx.resources.ResourceBundle;
   
   public class en_US$effects_properties extends ResourceBundle
   {
      
      public function en_US$effects_properties()
      {
         super("en_US","effects");
      }
      
      override protected function getContent() : Object
      {
         return {
            "incorrectTrigger":"The Zoom effect can not be triggered by a moveEffect trigger.",
            "incorrectSource":"Source property must be a Class or String."
         };
      }
   }
}

package
{
   import mx.resources.ResourceBundle;
   
   public class en_US$formatters_properties extends ResourceBundle
   {
      
      public function en_US$formatters_properties()
      {
         super("en_US","formatters");
      }
      
      override protected function getContent() : Object
      {
         return {
            "zipCodeFormat":"#####",
            "useNegativeSignInCurrency":"true",
            "useNegativeSignInNumber":"true",
            "defaultInvalidFormatError":"Invalid format",
            "pm":"PM",
            "useThousandsSeparator":"true",
            "am":"AM",
            "areaCode":"-1",
            "validPatternChars":"+()#- .",
            "phoneNumberFormat":"(###) ###-####",
            "defaultInvalidValueError":"Invalid value",
            "areaCodeFormat":"(###)",
            "monthNamesShort":"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",
            "numberFormatterPrecision":"-1",
            "dayNamesShort":"Sun,Mon,Tue,Wed,Thu,Fri,Sat",
            "rounding":"none",
            "currencyFormatterPrecision":"-1"
         };
      }
   }
}

package
{
   import mx.resources.ResourceBundle;
   
   public class en_US$logging_properties extends ResourceBundle
   {
      
      public function en_US$logging_properties()
      {
         super("en_US","logging");
      }
      
      override protected function getContent() : Object
      {
         return {
            "invalidTarget":"Invalid target specified.",
            "charsInvalid":"Error for filter \'{0}\': The following characters are not valid: []~$^&/(){}<>+=_-`!@#%?,:;\'\".",
            "charPlacement":"Error for filter \'{0}\': \'*\' must be the right most character.",
            "levelLimit":"Logging level cannot be set to LogEventLevel.ALL.",
            "invalidChars":"Categories can not contain any of the following characters: []`~,!@#$%*^&()]{}+=|\';?><./\".",
            "invalidLen":"Categories must be at least one character in length."
         };
      }
   }
}

package
{
   import mx.resources.ResourceBundle;
   
   public class en_US$SharedResources_properties extends ResourceBundle
   {
      
      public function en_US$SharedResources_properties()
      {
         super("en_US","SharedResources");
      }
      
      override protected function getContent() : Object
      {
         return {
            "dateFormat":"MM/DD/YYYY",
            "dayNames":"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",
            "thousandsSeparatorFrom":",",
            "monthNames":"January,February,March,April,May,June,July,August,September,October,November,December",
            "decimalSeparatorFrom":".",
            "currencySymbol":"$",
            "decimalSeparatorTo":".",
            "thousandsSeparatorTo":",",
            "monthSymbol":"",
            "alignSymbol":"left"
         };
      }
   }
}

package
{
   import mx.resources.ResourceBundle;
   
   public class en_US$skins_properties extends ResourceBundle
   {
      
      public function en_US$skins_properties()
      {
         super("en_US","skins");
      }
      
      override protected function getContent() : Object
      {
         return {"notLoaded":"Unable to load \'{0}\'."};
      }
   }
}

package
{
   import mx.resources.ResourceBundle;
   
   public class en_US$styles_properties extends ResourceBundle
   {
      
      public function en_US$styles_properties()
      {
         super("en_US","styles");
      }
      
      override protected function getContent() : Object
      {
         return {"unableToLoad":"Unable to load style({0}): {1}."};
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol78")]
   public dynamic class focusRectSkin extends MovieClip
   {
      
      public function focusRectSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol122")]
   public dynamic class List_skin extends MovieClip
   {
      
      public function List_skin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol33")]
   public dynamic class ScrollArrowDown_disabledSkin extends MovieClip
   {
      
      public function ScrollArrowDown_disabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol18")]
   public dynamic class ScrollArrowDown_downSkin extends MovieClip
   {
      
      public function ScrollArrowDown_downSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol22")]
   public dynamic class ScrollArrowDown_overSkin extends MovieClip
   {
      
      public function ScrollArrowDown_overSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol31")]
   public dynamic class ScrollArrowDown_upSkin extends MovieClip
   {
      
      public function ScrollArrowDown_upSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol35")]
   public dynamic class ScrollArrowUp_disabledSkin extends MovieClip
   {
      
      public function ScrollArrowUp_disabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol16")]
   public dynamic class ScrollArrowUp_downSkin extends MovieClip
   {
      
      public function ScrollArrowUp_downSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol26")]
   public dynamic class ScrollArrowUp_overSkin extends MovieClip
   {
      
      public function ScrollArrowUp_overSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol28")]
   public dynamic class ScrollArrowUp_upSkin extends MovieClip
   {
      
      public function ScrollArrowUp_upSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol37")]
   public dynamic class ScrollBar_thumbIcon extends MovieClip
   {
      
      public function ScrollBar_thumbIcon()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol6")]
   public dynamic class ScrollPane_disabledSkin extends MovieClip
   {
      
      public function ScrollPane_disabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol8")]
   public dynamic class ScrollPane_upSkin extends MovieClip
   {
      
      public function ScrollPane_upSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol20")]
   public dynamic class ScrollThumb_downSkin extends MovieClip
   {
      
      public function ScrollThumb_downSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol24")]
   public dynamic class ScrollThumb_overSkin extends MovieClip
   {
      
      public function ScrollThumb_overSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol30")]
   public dynamic class ScrollThumb_upSkin extends MovieClip
   {
      
      public function ScrollThumb_upSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol10")]
   public dynamic class ScrollTrack_skin extends MovieClip
   {
      
      public function ScrollTrack_skin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol86")]
   public dynamic class SliderThumb_disabledSkin extends MovieClip
   {
      
      public function SliderThumb_disabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol84")]
   public dynamic class SliderThumb_downSkin extends MovieClip
   {
      
      public function SliderThumb_downSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol82")]
   public dynamic class SliderThumb_overSkin extends MovieClip
   {
      
      public function SliderThumb_overSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol80")]
   public dynamic class SliderThumb_upSkin extends MovieClip
   {
      
      public function SliderThumb_upSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol90")]
   public dynamic class SliderTick_skin extends MovieClip
   {
      
      public function SliderTick_skin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol92")]
   public dynamic class SliderTrack_disabledSkin extends MovieClip
   {
      
      public function SliderTrack_disabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol88")]
   public dynamic class SliderTrack_skin extends MovieClip
   {
      
      public function SliderTrack_skin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol41")]
   public dynamic class TextArea_disabledSkin extends MovieClip
   {
      
      public function TextArea_disabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol42")]
   public dynamic class TextArea_upSkin extends MovieClip
   {
      
      public function TextArea_upSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol73")]
   public dynamic class TextInput_disabledSkin extends MovieClip
   {
      
      public function TextInput_disabledSkin()
      {
         super();
      }
   }
}

package
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol75")]
   public dynamic class TextInput_upSkin extends MovieClip
   {
      
      public function TextInput_upSkin()
      {
         super();
      }
   }
}

package
{
   public class _CompiledResourceBundleInfo
   {
      
      public function _CompiledResourceBundleInfo()
      {
         super();
      }
      
      public static function get compiledLocales() : Array
      {
         return ["en_US"];
      }
      
      public static function get compiledResourceBundleNames() : Array
      {
         return ["SharedResources","controls","core","effects","formatters","logging","skins","styles"];
      }
   }
}

package com.bigpoint.filecollection
{
   import com.bigpoint.filecollection.event.FileCollectionEvent;
   import com.bigpoint.filecollection.event.FileCollectionFileLoadEvent;
   import com.bigpoint.filecollection.event.FileCollectionFinishEvent;
   import com.bigpoint.filecollection.finish.FileCollectionFinisher;
   import com.bigpoint.filecollection.finish.ImageFinisher;
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.filecollection.finish.XMLFinisher;
   import com.bigpoint.filecollection.vo.FileVO;
   import com.bigpoint.filecollection.vo.LoadVO;
   import com.bigpoint.filecollection.vo.LocationVO;
   import com.greensock.TweenMax;
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.events.HTTPStatusEvent;
   import flash.events.IOErrorEvent;
   import flash.events.SecurityErrorEvent;
   import flash.net.URLLoader;
   import flash.net.URLLoaderDataFormat;
   import flash.net.URLRequest;
   import flash.utils.getDefinitionByName;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   
   public class FileCollection extends EventDispatcher
   {
      
      private static const logger:ILogger = Log.getLogger("FileCollection");
      
      public static var logging:Boolean = false;
      
      private var xmlLoader:URLLoader;
      
      private var xml:XML;
      
      private var paramKeyList:Object;
      
      private var locationList:Object;
      
      private var fileList:Object;
      
      private var queueSize:int;
      
      private var finisherClassList:Object;
      
      private var finisherList:Object;
      
      private var fileLoaderList:Object;
      
      private var _numOfFiles:int;
      
      private var _numOfFilesLoaded:int;
      
      private var _filePrefix:String = "";
      
      private var _linearLoadList:Array = [];
      
      private var _currentLinearLoad:LoadVO;
      
      private var useHash:Boolean = false;
      
      public function FileCollection(param1:Boolean = false)
      {
         super();
         this.useHash = param1;
         this.paramKeyList = new Object();
         this.locationList = new Object();
         this.fileList = new Object();
         this.fileLoaderList = new Object();
         this.finisherList = new Object();
         this.finisherClassList = new Object();
         this.queueSize = 0;
         this._numOfFilesLoaded = 0;
         this._numOfFiles = 0;
         this.addDefaultFinisherClasses();
      }
      
      private function addDefaultFinisherClasses() : void
      {
         this.addFinisherClass("swf",SWFFinisher);
         this.addFinisherClass("xml",XMLFinisher);
         this.addFinisherClass("png",ImageFinisher);
      }
      
      public function addFinisherClass(param1:String, param2:Class) : void
      {
         this.finisherClassList[param1] = param2;
      }
      
      public function loadResourceFile(param1:String) : void
      {
         this.xmlLoader = new URLLoader();
         this.xmlLoader.addEventListener(IOErrorEvent.IO_ERROR,this.handleIOError);
         this.xmlLoader.addEventListener(Event.COMPLETE,this.handleXMLLoad);
         this.xmlLoader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.handleXMLSecurityError);
         this.xmlLoader.dataFormat = URLLoaderDataFormat.BINARY;
         this.xmlLoader.load(new URLRequest(param1));
      }
      
      private function handleXMLLoad(param1:Event) : void
      {
         var event:Event = param1;
         try
         {
            this.xml = new XML(this.preParseXML(event.target.data));
            this.extractLocationsFromXML();
            this.extractFilesFromXML();
            this.xml = undefined;
         }
         catch(e:TypeError)
         {
            dispatchEvent(new FileCollectionEvent(FileCollectionEvent.RESOURCE_FILE_FORMAT_ERROR));
            return;
         }
         dispatchEvent(new FileCollectionEvent(FileCollectionEvent.RESOURCE_FILE_LOADED));
      }
      
      private function extractLocationsFromXML() : void
      {
         var _loc1_:XML = null;
         for each(_loc1_ in this.xml.location)
         {
            this.locationList[_loc1_.@id] = new LocationVO(_loc1_.@id,this._filePrefix + _loc1_.@path);
            if(logging)
            {
            }
         }
      }
      
      private function extractFilesFromXML() : void
      {
         var _loc1_:FileVO = null;
         var _loc2_:XML = null;
         for each(_loc2_ in this.xml.file)
         {
            ++this._numOfFiles;
            _loc1_ = new FileVO(_loc2_.@id,this.locationList[_loc2_.@location],_loc2_.@name,_loc2_.@type,_loc2_);
            _loc1_.hash = _loc2_.@hash;
            this.fileList[_loc2_.@id] = _loc1_;
            if(logging)
            {
            }
         }
      }
      
      private function preParseXML(param1:String) : String
      {
         var _loc3_:String = null;
         var _loc4_:RegExp = null;
         var _loc2_:String = param1;
         for(_loc3_ in this.paramKeyList)
         {
            if(logging)
            {
            }
            _loc4_ = new RegExp("%" + _loc3_ + "%","sg");
            _loc2_ = _loc2_.replace(_loc4_,this.paramKeyList[_loc3_]);
         }
         return _loc2_;
      }
      
      private function handleIOError(param1:IOErrorEvent) : void
      {
         dispatchEvent(new FileCollectionEvent(FileCollectionEvent.RESOURCE_FILE_NOT_FOUND));
      }
      
      private function handleXMLSecurityError(param1:SecurityErrorEvent) : void
      {
         dispatchEvent(new FileCollectionEvent(FileCollectionEvent.RESOURCE_FILE_SECURITY_BREACH));
      }
      
      public function clearCollection() : void
      {
         if(logging)
         {
         }
         this.fileList = new Object();
         this.locationList = new Object();
         this.paramKeyList = new Object();
         this.queueSize = 0;
         this.xml = undefined;
      }
      
      public function load(param1:String = null, param2:Function = null, param3:Function = null) : void
      {
         var fileNode:FileVO = null;
         var fileLoader:FileCollectionLoader = null;
         var key:String = param1;
         var callbackComplete:Function = param2;
         var callbackError:Function = param3;
         try
         {
            if(key == null)
            {
               return;
            }
            fileNode = this.fileList[key];
            if(fileNode == null)
            {
               if(logging)
               {
               }
               throw new Error("filecollection filenode not found " + key);
            }
            if(this.finisherList[key] != null && FileCollectionFinisher(this.finisherList[key]).isFinished == true)
            {
               if(logging)
               {
               }
               if(callbackComplete != null)
               {
                  callbackComplete(this.finisherList[key]);
               }
               return;
            }
            fileNode.callbackComplete = callbackComplete;
            fileNode.callbackError = callbackError;
            if(this.fileLoaderList[key] != null)
            {
               FileCollectionLoader(this.fileLoaderList[key]).loadFile();
               return;
            }
            if(logging)
            {
            }
            fileLoader = new FileCollectionLoader(fileNode,this.useHash);
            fileLoader.addEventListener(Event.COMPLETE,this.handleFileLoad);
            fileLoader.addEventListener(HTTPStatusEvent.HTTP_STATUS,this.httpStatusHandler);
            fileLoader.addEventListener(IOErrorEvent.IO_ERROR,this.handleFileLoadError);
            fileLoader.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.securityErrorHandler);
            fileLoader.dataFormat = URLLoaderDataFormat.BINARY;
            this.fileLoaderList[key] = fileLoader;
            fileLoader.loadFile();
            ++this.queueSize;
         }
         catch(e:Error)
         {
            logger.error("ERROR LOAD - " + key);
         }
      }
      
      private function httpStatusHandler(param1:HTTPStatusEvent) : void
      {
         var _loc2_:FileVO = FileCollectionLoader(param1.target).getFileVO();
         if(param1.status == 404)
         {
            Main.fatalError("HTTP_ERROR_404:" + _loc2_.getFileName());
         }
      }
      
      private function securityErrorHandler(param1:SecurityErrorEvent) : void
      {
      }
      
      private function handleFileLoad(param1:Event) : void
      {
         var _loc3_:FileCollectionFinisher = null;
         if(logging)
         {
         }
         var _loc2_:FileVO = FileCollectionLoader(param1.target).getFileVO();
         _loc2_.data = FileCollectionLoader(param1.target).data;
         _loc3_ = new this.finisherClassList[_loc2_.type]();
         this.addFinisher(_loc2_.id,_loc3_);
         _loc3_.addEventListener(FileCollectionFinishEvent.FILE_FINISH,this.handleFileFinish);
         _loc3_.start(_loc2_);
      }
      
      private function handleFileFinish(param1:FileCollectionFinishEvent) : void
      {
         var _loc2_:FileVO = param1.finisher.fileVO;
         _loc2_.loaded = true;
         param1.finisher.isFinished = true;
         ++this._numOfFilesLoaded;
         dispatchEvent(new FileCollectionFileLoadEvent(FileCollectionFileLoadEvent.FILE_LOADED,_loc2_));
         if(_loc2_.callbackComplete != null)
         {
            _loc2_.callbackComplete(param1.finisher);
         }
         this._currentLinearLoad = null;
         if(--this.queueSize <= 0)
         {
            if(this._linearLoadList.length == 0)
            {
               dispatchEvent(new FileCollectionEvent(FileCollectionEvent.ALL_FILES_LOADED));
            }
            else
            {
               this.load();
            }
         }
      }
      
      private function addFinisher(param1:String, param2:FileCollectionFinisher) : void
      {
         this.finisherList[param1] = param2;
      }
      
      private function handleFileLoadError(param1:IOErrorEvent) : void
      {
         if(logging)
         {
         }
         var _loc2_:FileVO = FileCollectionLoader(param1.target).getFileVO();
         ++_loc2_.retries;
         if(_loc2_.retries < Main.MAX_LOADING_RETRIES)
         {
            TweenMax.delayedCall(4,this.load,[_loc2_.id,_loc2_.callbackComplete,_loc2_.callbackError]);
         }
         else
         {
            Main.fatalError("HTTP_ERROR:" + _loc2_.getFileName());
         }
      }
      
      public function loadAll() : void
      {
         var _loc1_:String = null;
         for(_loc1_ in this.fileList)
         {
            this.load(FileVO(this.fileList[_loc1_]).id);
         }
      }
      
      public function setParam(param1:String, param2:String) : void
      {
         if(logging)
         {
         }
         this.paramKeyList[param1] = param2;
      }
      
      public function isLoaded(param1:String) : Boolean
      {
         var result:Boolean = false;
         var id:String = param1;
         try
         {
            result = FileCollectionFinisher(this.finisherList[id]).isFinished;
         }
         catch(e:Error)
         {
            return false;
         }
         return result;
      }
      
      public function getFinisher(param1:String) : FileCollectionFinisher
      {
         return this.finisherList[param1];
      }
      
      public function get numOfFiles() : int
      {
         return this._numOfFiles;
      }
      
      public function get numOfFilesLoaded() : int
      {
         return this._numOfFilesLoaded;
      }
      
      public function get filePrefix() : String
      {
         return this._filePrefix;
      }
      
      public function set filePrefix(param1:String) : void
      {
         this._filePrefix = param1;
      }
      
      public function get byteLoaded() : int
      {
         var _loc2_:FileCollectionLoader = null;
         var _loc1_:int = 0;
         for each(_loc2_ in this.fileLoaderList)
         {
            _loc1_ += _loc2_.bytesLoaded;
         }
         return _loc1_;
      }
   }
}

package com.bigpoint.filecollection
{
   import com.bigpoint.filecollection.vo.FileVO;
   import flash.net.URLLoader;
   import flash.net.URLRequest;
   
   public class FileCollectionLoader extends URLLoader
   {
      
      private var fileVO:FileVO;
      
      private var useHash:Boolean = false;
      
      public function FileCollectionLoader(param1:FileVO, param2:Boolean = false)
      {
         this.useHash = param2;
         this.fileVO = param1;
         super(null);
      }
      
      public function loadFile() : void
      {
         var _loc1_:URLRequest = new URLRequest(this.fileVO.getFileName(this.useHash));
         if(FileCollection.logging)
         {
         }
         load(_loc1_);
      }
      
      public function getFileVO() : FileVO
      {
         return this.fileVO;
      }
   }
}

package com.bigpoint.filecollection
{
   import flash.display.LoaderInfo;
   
   public function getDefinitionNames(param1:LoaderInfo) : Array
   {
      var _loc2_:uint = param1.bytes.position;
      var _loc3_:Finder = new Finder(param1.bytes);
      param1.bytes.position = _loc2_;
      return _loc3_.getDefinitionNames();
   }
}

import flash.errors.EOFError;
import flash.geom.Rectangle;
import flash.utils.ByteArray;
import flash.utils.Endian;

class Finder
{
   
   private var _data:SWFByteArray;
   
   private var _stringTable:Array;
   
   private var _namespaceTable:Array;
   
   private var _multinameTable:Array;
   
   public function Finder(param1:ByteArray)
   {
      super();
      this._data = new SWFByteArray(param1);
   }
   
   public function getDefinitionNames() : Array
   {
      var _loc3_:uint = 0;
      var _loc1_:Array = [];
      var _loc2_:uint = uint(this.findTag());
      while(_loc2_)
      {
         _loc3_ = uint(this._data.position);
         _loc1_.push.apply(_loc1_,this.getDefinitionNamesInTag());
         this._data.position = _loc3_ + _loc2_;
         _loc2_ = uint(this.findTag());
      }
      return _loc1_;
   }
   
   private function findTag() : uint
   {
      var tag:uint = 0;
      var id:uint = 0;
      var length:uint = 0;
      var minorVersion:uint = 0;
      var majorVersion:uint = 0;
      loop0:
      while(true)
      {
         if(!this._data.bytesAvailable)
         {
            return 0;
         }
         try
         {
            tag = uint(this._data.readUnsignedShort());
         }
         catch(e:EOFError)
         {
            return null;
         }
         id = uint(tag >> 6);
         length = uint(tag & 0x3F);
         length = length == 63 ? uint(this._data.readUnsignedInt()) : length;
         switch(id)
         {
            case 72:
            case 82:
               if(id == 82)
               {
                  this._data.position += 4;
                  this._data.readString();
               }
               minorVersion = uint(this._data.readUnsignedShort());
               majorVersion = uint(this._data.readUnsignedShort());
               if(minorVersion == 16 && majorVersion == 46)
               {
                  break loop0;
               }
               this._data.position += length;
               break;
            default:
               this._data.position += length;
         }
      }
      return length;
   }
   
   private function getDefinitionNamesInTag() : Array
   {
      var _loc1_:int = 0;
      var _loc2_:uint = 0;
      var _loc3_:uint = 0;
      var _loc4_:uint = 0;
      var _loc5_:uint = 0;
      var _loc6_:uint = 0;
      var _loc8_:uint = 0;
      var _loc9_:int = 0;
      var _loc10_:uint = 0;
      var _loc11_:String = null;
      var _loc12_:uint = 0;
      var _loc13_:uint = 0;
      var _loc7_:Array = [];
      this._stringTable = [];
      this._namespaceTable = [];
      this._multinameTable = [];
      _loc1_ = this._data.readASInt() - 1;
      while(_loc1_ > 0 && Boolean(_loc1_--))
      {
         this._data.readASInt();
      }
      _loc1_ = this._data.readASInt() - 1;
      while(_loc1_ > 0 && Boolean(_loc1_--))
      {
         this._data.readASInt();
      }
      _loc1_ = this._data.readASInt() - 1;
      while(_loc1_ > 0 && Boolean(_loc1_--))
      {
         this._data.readDouble();
      }
      _loc1_ = this._data.readASInt() - 1;
      _loc3_ = 1;
      while(_loc1_ > 0 && Boolean(_loc1_--))
      {
         this._stringTable[_loc3_] = this._data.readUTFBytes(this._data.readASInt());
         _loc3_++;
      }
      _loc1_ = this._data.readASInt() - 1;
      _loc3_ = 1;
      while(_loc1_ > 0 && Boolean(_loc1_--))
      {
         this._data.readUnsignedByte();
         this._namespaceTable[_loc3_] = this._data.readASInt();
         _loc3_++;
      }
      _loc1_ = this._data.readASInt() - 1;
      while(_loc1_ > 0 && Boolean(_loc1_--))
      {
         _loc5_ = uint(this._data.readUnsignedByte());
         while(_loc5_--)
         {
            this._data.readASInt();
         }
      }
      _loc1_ = this._data.readASInt() - 1;
      _loc3_ = 1;
      while(_loc1_ > 0 && Boolean(_loc1_--))
      {
         _loc2_ = uint(this._data.readASInt());
         switch(_loc2_)
         {
            case 7:
            case 13:
               _loc6_ = uint(this._data.readASInt());
               this._multinameTable[_loc3_] = [_loc6_,this._data.readASInt()];
               break;
            case 15:
            case 16:
               this._multinameTable[_loc3_] = [0,this._stringTable[this._data.readASInt()]];
               break;
            case 17:
            case 18:
               break;
            case 9:
            case 14:
               this._multinameTable[_loc3_] = [0,this._stringTable[this._data.readASInt()]];
               this._data.readASInt();
               break;
            case 27:
            case 28:
               this._data.readASInt();
         }
         _loc3_++;
      }
      _loc1_ = int(this._data.readASInt());
      while(_loc1_ > 0 && Boolean(_loc1_--))
      {
         _loc5_ = uint(_loc9_ = int(this._data.readASInt()));
         this._data.readASInt();
         while(_loc5_--)
         {
            this._data.readASInt();
         }
         this._data.readASInt();
         _loc4_ = uint(this._data.readUnsignedByte());
         if(_loc4_ & 8)
         {
            _loc5_ = uint(this._data.readASInt());
            while(_loc5_--)
            {
               this._data.readASInt();
               this._data.readASInt();
            }
         }
         if(_loc4_ & 0x80)
         {
            _loc5_ = uint(_loc9_);
            while(_loc5_--)
            {
               this._data.readASInt();
            }
         }
      }
      _loc1_ = int(this._data.readASInt());
      while(_loc1_ > 0 && Boolean(_loc1_--))
      {
         this._data.readASInt();
         _loc5_ = uint(this._data.readASInt());
         while(_loc5_--)
         {
            this._data.readASInt();
            this._data.readASInt();
         }
      }
      _loc1_ = int(this._data.readASInt());
      while(_loc1_ > 0 && Boolean(_loc1_--))
      {
         _loc3_ = uint(this._data.readASInt());
         this._data.readASInt();
         _loc4_ = uint(this._data.readUnsignedByte());
         if(_loc4_ & 8)
         {
            _loc8_ = uint(this._data.readASInt());
         }
         _loc5_ = uint(this._data.readASInt());
         while(_loc5_--)
         {
            this._data.readASInt();
         }
         this._data.readASInt();
         _loc10_ = uint(this._data.readASInt());
         while(_loc10_--)
         {
            this._data.readASInt();
            _loc2_ = uint(this._data.readUnsignedByte());
            _loc12_ = uint(_loc2_ >> 4);
            _loc13_ = uint(_loc2_ & 0x0F);
            switch(_loc13_)
            {
               case 0:
               case 6:
                  this._data.readASInt();
                  this._data.readASInt();
                  if(this._data.readASInt())
                  {
                     this._data.readUnsignedByte();
                  }
                  break;
               default:
                  this._data.readASInt();
                  this._data.readASInt();
            }
            if(_loc12_ & 4)
            {
               _loc5_ = uint(this._data.readASInt());
               while(_loc5_--)
               {
                  this._data.readASInt();
               }
            }
         }
         _loc6_ = uint(this._multinameTable[_loc3_][0]);
         _loc11_ = this._stringTable[this._namespaceTable[_loc6_]] || "";
         if(_loc11_.indexOf(".as$") < 0)
         {
            _loc7_.push((_loc11_ ? _loc11_ + "::" : "") + this._stringTable[this._multinameTable[_loc3_][1]]);
         }
      }
      return _loc7_;
   }
}

class SWFByteArray extends ByteArray
{
   
   private static const TAG_SWF:String = "FWS";
   
   private static const TAG_SWF_COMPRESSED:String = "CWS";
   
   private var _bitIndex:uint;
   
   private var _version:uint;
   
   private var _frameRate:Number;
   
   private var _rect:Rectangle;
   
   public function SWFByteArray(param1:ByteArray = null)
   {
      var _loc2_:String = null;
      var _loc3_:String = null;
      super();
      super.endian = Endian.LITTLE_ENDIAN;
      if(param1)
      {
         _loc2_ = param1.endian;
         param1.endian = Endian.LITTLE_ENDIAN;
         if(param1.bytesAvailable > 26)
         {
            _loc3_ = param1.readUTFBytes(3);
            if(!(_loc3_ == SWFByteArray.TAG_SWF || _loc3_ == SWFByteArray.TAG_SWF_COMPRESSED))
            {
               throw new ArgumentError("Error #2124: Loaded file is an unknown type.");
            }
            this._version = param1.readUnsignedByte();
            param1.readUnsignedInt();
            param1.readBytes(this);
            if(_loc3_ == SWFByteArray.TAG_SWF_COMPRESSED)
            {
               super.uncompress();
            }
            this.readHeader();
         }
         param1.endian = _loc2_;
      }
   }
   
   public function get version() : uint
   {
      return this._version;
   }
   
   public function get frameRate() : Number
   {
      return this._frameRate;
   }
   
   public function get rect() : Rectangle
   {
      return this._rect;
   }
   
   public function writeBytesFromString(param1:String) : void
   {
      var _loc4_:String = null;
      var _loc5_:uint = 0;
      var _loc2_:uint = uint(param1.length);
      var _loc3_:uint = 0;
      while(_loc3_ < _loc2_)
      {
         _loc4_ = param1.substr(_loc3_,2);
         _loc5_ = parseInt(_loc4_,16);
         writeByte(_loc5_);
         _loc3_ += 2;
      }
   }
   
   public function readRect() : Rectangle
   {
      var _loc1_:uint = uint(super.position);
      var _loc2_:uint = uint(this[_loc1_]);
      var _loc3_:uint = uint(_loc2_ >> 3);
      var _loc4_:Number = this.readBits(_loc3_,5) / 20;
      var _loc5_:Number = this.readBits(_loc3_) / 20;
      var _loc6_:Number = this.readBits(_loc3_) / 20;
      var _loc7_:Number = this.readBits(_loc3_) / 20;
      super.position = _loc1_ + Math.ceil((_loc3_ * 4 - 3) / 8) + 1;
      return new Rectangle(_loc4_,_loc6_,_loc5_ - _loc4_,_loc7_ - _loc6_);
   }
   
   public function readBits(param1:uint, param2:int = -1) : Number
   {
      if(param2 < 0)
      {
         param2 = int(this._bitIndex);
      }
      this._bitIndex = param2;
      var _loc3_:uint = uint(this[super.position]);
      var _loc4_:Number = 0;
      var _loc5_:uint = uint(8 - param2);
      var _loc6_:Number = param1 - _loc5_;
      if(_loc6_ > 0)
      {
         var _loc7_:* = this;
         var _loc8_:* = _loc7_.super.position + 1;
         _loc7_.super.position = _loc8_;
         _loc4_ = this.readBits(_loc6_,0) | (_loc3_ & (1 << _loc5_) - 1) << _loc6_;
      }
      else
      {
         _loc4_ = _loc3_ >> 8 - param1 - param2 & (1 << param1) - 1;
         this._bitIndex = (param2 + param1) % 8;
         if(param2 + param1 > 7)
         {
            _loc7_ = this;
            _loc8_ = _loc7_.super.position + 1;
            _loc7_.super.position = _loc8_;
         }
      }
      return _loc4_;
   }
   
   public function readASInt() : int
   {
      var _loc3_:uint = 0;
      var _loc1_:uint = 0;
      var _loc2_:uint = 0;
      do
      {
         _loc3_ = super.readUnsignedByte();
         _loc1_ |= (_loc3_ & 0x7F) << _loc2_ * 7;
         _loc2_ += 1;
      }
      while(_loc3_ & 1 << 7);
      
      return _loc1_;
   }
   
   public function readString() : String
   {
      var _loc1_:uint = uint(super.position);
      while(true)
      {
         _loc1_ = uint(_loc1_ + 1);
         if(!(Boolean(this[_loc1_]) && (Boolean(_loc1_))))
         {
            break;
         }
      }
      var _loc2_:String = super.readUTFBytes(_loc1_ - super.position);
      super.position = _loc1_ + 1;
      return _loc2_;
   }
   
   public function traceArray(param1:ByteArray) : String
   {
      var _loc4_:String = null;
      var _loc2_:String = "";
      var _loc3_:uint = param1.position;
      param1.position = 0;
      while(param1.bytesAvailable)
      {
         _loc4_ = param1.readUnsignedByte().toString(16).toUpperCase();
         _loc4_ = _loc4_.length < 2 ? "0" + _loc4_ : _loc4_;
         _loc2_ += _loc4_ + " ";
      }
      param1.position = _loc3_;
      return _loc2_;
   }
   
   private function readFrameRate() : void
   {
      var _loc1_:Number = NaN;
      if(this._version < 8)
      {
         this._frameRate = super.readUnsignedShort();
      }
      else
      {
         _loc1_ = super.readUnsignedByte() / 255;
         this._frameRate = super.readUnsignedByte() + _loc1_;
      }
   }
   
   private function readHeader() : void
   {
      this._rect = this.readRect();
      this.readFrameRate();
      super.readShort();
   }
}
package com.bigpoint.filecollection.event
{
   import flash.events.Event;
   
   public class FileCollectionEvent extends Event
   {
      
      public static const RESOURCE_FILE_LOADED:String = "FileCollectionEvent.RESOURCE_FILE_LOADED";
      
      public static const RESOURCE_FILE_NOT_FOUND:String = "FileCollectionEvent.RESOURCE_FILE_NOT_FOUND";
      
      public static const RESOURCE_FILE_SECURITY_BREACH:String = "FileCollectionEvent.RESOURCE_FILE_SECURITY_BREACH";
      
      public static const RESOURCE_FILE_FORMAT_ERROR:String = "FileCollectionEvent.RESOURCE_FILE_SECURITY_BREACH";
      
      public static const ALL_FILES_LOADED:String = "FileCollectionEvent.ALL_FILES_LOADED";
      
      public function FileCollectionEvent(param1:String, param2:Boolean = false, param3:Boolean = false)
      {
         super(param1,param2,param3);
      }
   }
}

package com.bigpoint.filecollection.event
{
   import com.bigpoint.filecollection.vo.FileVO;
   import flash.events.Event;
   
   public class FileCollectionFileLoadEvent extends Event
   {
      
      public static const FILE_LOADED:String = "FileCollectionFileLoadEvent.FILE_LOADED";
      
      public static const FILE_LOAD_ERROR:String = "FileCollectionFileLoadEvent.FILE_LOAD_ERROR";
      
      public var fileVO:FileVO;
      
      public function FileCollectionFileLoadEvent(param1:String, param2:FileVO, param3:Boolean = false, param4:Boolean = false)
      {
         this.fileVO = param2;
         super(param1,param3,param4);
      }
   }
}

package com.bigpoint.filecollection.event
{
   import com.bigpoint.filecollection.finish.FileCollectionFinisher;
   import flash.events.Event;
   
   public class FileCollectionFinishEvent extends Event
   {
      
      public static const FILE_FINISH:String = "FileCollectionFinishEvent.FILE_FINISH";
      
      public var finisher:FileCollectionFinisher;
      
      public function FileCollectionFinishEvent(param1:String, param2:FileCollectionFinisher)
      {
         this.finisher = param2;
         super(param1,false,false);
      }
   }
}

package com.bigpoint.filecollection.finish
{
   import com.bigpoint.filecollection.event.FileCollectionFinishEvent;
   import com.bigpoint.filecollection.vo.FileVO;
   import flash.events.EventDispatcher;
   
   public class FileCollectionFinisher extends EventDispatcher
   {
      
      public var fileVO:FileVO;
      
      public var isFinished:Boolean = false;
      
      public function FileCollectionFinisher()
      {
         super();
      }
      
      public function start(param1:FileVO) : void
      {
         this.fileVO = param1;
      }
      
      public function clear() : void
      {
         this.fileVO.data = null;
         this.fileVO.loaded = false;
         this.isFinished = false;
      }
      
      public function finish() : void
      {
         dispatchEvent(new FileCollectionFinishEvent(FileCollectionFinishEvent.FILE_FINISH,this));
      }
   }
}

package com.bigpoint.filecollection.finish
{
   import com.bigpoint.filecollection.vo.FileVO;
   import flash.display.Bitmap;
   import flash.display.Loader;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   
   public class ImageFinisher extends FileCollectionFinisher
   {
      
      private var loader:Loader;
      
      public function ImageFinisher()
      {
         super();
      }
      
      public function getBitmap() : Bitmap
      {
         return Bitmap(this.loader.content);
      }
      
      override public function start(param1:FileVO) : void
      {
         var fileVO:FileVO = param1;
         super.start(fileVO);
         try
         {
            this.loader = new Loader();
            this.loader.contentLoaderInfo.addEventListener(Event.INIT,this.handleLoaderInit);
            this.loader.contentLoaderInfo.addEventListener(Event.COMPLETE,this.handleLoadComplete);
            this.loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR,this.handleLoaderError);
            this.loader.loadBytes(fileVO.data);
         }
         catch(e:Error)
         {
         }
      }
      
      override public function clear() : void
      {
         super.clear();
         this.loader.contentLoaderInfo.removeEventListener(Event.INIT,this.handleLoaderInit);
         this.loader.contentLoaderInfo.removeEventListener(Event.COMPLETE,this.handleLoadComplete);
         this.loader.contentLoaderInfo.removeEventListener(IOErrorEvent.IO_ERROR,this.handleLoaderError);
         this.loader = null;
      }
      
      private function handleLoaderInit(param1:Event) : void
      {
      }
      
      private function handleLoaderError(param1:IOErrorEvent) : void
      {
      }
      
      protected function handleLoadComplete(param1:Event) : void
      {
         fileVO.data = null;
         finish();
      }
   }
}

package com.bigpoint.filecollection.finish
{
   import com.bigpoint.filecollection.getDefinitionNames;
   import com.bigpoint.filecollection.vo.FileVO;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.display.Loader;
   import flash.display.MovieClip;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.media.Sound;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.utils.Dictionary;
   
   public class SWFFinisher extends FileCollectionFinisher
   {
      
      protected var loader:Loader;
      
      private var readOnlyObjectCache:Dictionary = new Dictionary();
      
      public function SWFFinisher()
      {
         super();
      }
      
      override public function start(param1:FileVO) : void
      {
         var fileVO:FileVO = param1;
         super.start(fileVO);
         try
         {
            this.loader = new Loader();
            this.loader.contentLoaderInfo.addEventListener(Event.INIT,this.onInit);
            this.loader.contentLoaderInfo.addEventListener(Event.COMPLETE,this.handleLoadComplete);
            this.loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR,this.onError);
            this.loader.loadBytes(fileVO.data);
         }
         catch(e:Error)
         {
         }
      }
      
      override public function clear() : void
      {
         super.clear();
         this.loader = null;
      }
      
      private function onInit(param1:Event) : void
      {
      }
      
      private function onError(param1:IOErrorEvent) : void
      {
      }
      
      protected function handleLoadComplete(param1:Event) : void
      {
         if(fileVO.fileNode.@debugView == "true")
         {
            this.createDebugView(this.loader.content);
         }
         fileVO.data = null;
         finish();
      }
      
      public function getDefinitions() : Array
      {
         return getDefinitionNames(this.loader.contentLoaderInfo);
      }
      
      public function getEmbededMovieClip(param1:String, param2:Boolean = false) : MovieClip
      {
         return this.getEmbededObject(param1,param2) as MovieClip;
      }
      
      public function hasEmbeddedObject(param1:String) : Boolean
      {
         var classRef:Class = null;
         var id:String = param1;
         try
         {
            classRef = this.loader.contentLoaderInfo.applicationDomain.getDefinition(id) as Class;
         }
         catch(error:Error)
         {
            return false;
         }
         return true;
      }
      
      public function getEmbededObject(param1:String, param2:Boolean = false) : Object
      {
         var cachedReadonlyObject:Object = null;
         var classRef:Class = null;
         var id:String = param1;
         var readOnly:Boolean = param2;
         if(readOnly)
         {
            cachedReadonlyObject = this.readOnlyObjectCache[id];
            if(cachedReadonlyObject != null)
            {
               return cachedReadonlyObject;
            }
         }
         try
         {
            classRef = this.loader.contentLoaderInfo.applicationDomain.getDefinition(id) as Class;
         }
         catch(error:Error)
         {
            throw new Error("embeded object \'" + id + "\' not found in \'" + fileVO.id + "\'");
         }
         if(readOnly)
         {
            cachedReadonlyObject = new classRef() as Object;
            this.readOnlyObjectCache[id] = cachedReadonlyObject;
         }
         else
         {
            cachedReadonlyObject = new classRef() as Object;
         }
         return cachedReadonlyObject;
      }
      
      public function getEmbededBitmapData(param1:String, param2:Boolean = false) : BitmapData
      {
         var cachedReadonlyObject:Object = null;
         var classRef:Class = null;
         var id:String = param1;
         var readOnly:Boolean = param2;
         if(readOnly)
         {
            cachedReadonlyObject = this.readOnlyObjectCache[id];
            if(cachedReadonlyObject != null)
            {
               return BitmapData(cachedReadonlyObject);
            }
         }
         try
         {
            classRef = this.loader.contentLoaderInfo.applicationDomain.getDefinition(id) as Class;
         }
         catch(error:Error)
         {
            throw new Error("embeded object \'" + id + "\' not found in \'" + fileVO.id + "\'");
         }
         if(readOnly)
         {
            cachedReadonlyObject = new classRef(0,0);
            this.readOnlyObjectCache[id] = cachedReadonlyObject;
         }
         else
         {
            cachedReadonlyObject = new classRef(0,0);
         }
         return BitmapData(cachedReadonlyObject);
      }
      
      public function getEmbededSound(param1:String) : Sound
      {
         var classRef:Class = null;
         var id:String = param1;
         try
         {
            classRef = this.loader.contentLoaderInfo.applicationDomain.getDefinition(id) as Class;
         }
         catch(error:Error)
         {
            throw new Error("embedded object \'" + id + "\' not found in \'" + fileVO.id + "\'");
         }
         return new classRef();
      }
      
      public function getAsDisplayObject() : DisplayObject
      {
         return this.loader.content;
      }
      
      public function getEmbededBitmap(param1:String, param2:Boolean = false) : Bitmap
      {
         return new Bitmap(this.getEmbededBitmapData(param1,param2));
      }
      
      private function createDebugView(param1:DisplayObject) : void
      {
         var _loc2_:TextField = new TextField();
         _loc2_.selectable = false;
         _loc2_.background = true;
         _loc2_.backgroundColor = 7829367;
         _loc2_.autoSize = TextFieldAutoSize.LEFT;
         _loc2_.multiline = false;
         _loc2_.text = fileVO.id + ":" + fileVO.hash;
         _loc2_.setTextFormat(new TextFormat("Verdana",10,16777215,true));
         _loc2_.y = DisplayObjectContainer(param1).height;
         DisplayObjectContainer(param1).addChild(_loc2_);
      }
   }
}

package com.bigpoint.filecollection.finish
{
   import com.bigpoint.filecollection.vo.FileVO;
   
   public class XMLFinisher extends FileCollectionFinisher
   {
      
      public function XMLFinisher()
      {
         super();
      }
      
      override public function start(param1:FileVO) : void
      {
         super.start(param1);
         finish();
      }
      
      public function getXML() : XML
      {
         return new XML(fileVO.data);
      }
   }
}

package com.bigpoint.filecollection.vo
{
   public class FileVO
   {
      
      public var id:String;
      
      public var location:LocationVO;
      
      public var name:String;
      
      public var type:String;
      
      public var hash:String;
      
      public var loaded:Boolean;
      
      public var data:*;
      
      public var fileNode:XML;
      
      public var callbackComplete:Function;
      
      public var callbackError:Function;
      
      public var params:Object;
      
      public var retries:uint = 0;
      
      public function FileVO(param1:String, param2:LocationVO, param3:String, param4:String, param5:XML)
      {
         super();
         this.loaded = false;
         this.id = param1;
         this.location = param2;
         this.name = param3;
         this.type = param4;
         this.fileNode = param5;
         this.extractParams();
      }
      
      public function getFileName(param1:Boolean = false) : String
      {
         return this.location.path + this.name + "." + this.type + "?__cv=" + this.hash;
      }
      
      private function extractParams() : void
      {
         var _loc1_:XML = null;
         this.params = new Object();
         for each(_loc1_ in this.fileNode.param)
         {
            this.params[_loc1_.@name] = _loc1_.@value;
         }
      }
   }
}

package com.bigpoint.filecollection.vo
{
   public class LoadVO
   {
      
      public var key:String;
      
      public var callbackComplete:Function = null;
      
      public var callbackError:Function = null;
      
      public function LoadVO()
      {
         super();
      }
   }
}

package com.bigpoint.filecollection.vo
{
   public class LocationVO
   {
      
      public var id:String;
      
      public var path:String;
      
      public function LocationVO(param1:String, param2:String)
      {
         super();
         this.id = param1;
         this.path = param2;
      }
   }
}

package com.bigpoint.utils
{
   import flash.events.*;
   import flash.net.*;
   import flash.text.TextField;
   import flash.text.TextFormat;
   import flash.utils.Dictionary;
   import mx.formatters.NumberBaseRoundType;
   import mx.formatters.NumberFormatter;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   
   public class BPLocale
   {
      
      private static var _language:String;
      
      private static var _host:String;
      
      private static var _path:String;
      
      private static var _ed:EventDispatcher;
      
      public static var THOUSANDS_SEPARATOR:String;
      
      public static var DECIMALS_SEPARATOR:String;
      
      private static var intFormatter:NumberFormatter;
      
      private static var floatFormatter:NumberFormatter;
      
      private static const logger:ILogger = Log.getLogger("BPLocale");
      
      private static var _textMap:Array = [];
      
      public function BPLocale()
      {
         super();
      }
      
      public static function load(param1:int = 1) : void
      {
         loadLanguage(_host + _path.replace(/%LANG%/,_language),param1);
      }
      
      public static function addEventListener(param1:String, param2:Function, param3:Boolean = false, param4:int = 0, param5:Boolean = false) : void
      {
         if(_ed == null)
         {
            _ed = new EventDispatcher();
         }
         _ed.addEventListener(param1,param2,param3,param4,param5);
      }
      
      public static function dispatchEvent(param1:Event) : void
      {
         if(_ed == null)
         {
            _ed = new EventDispatcher();
         }
         _ed.dispatchEvent(param1);
      }
      
      private static function loadLanguage(param1:String, param2:int = 1) : void
      {
         var _loc3_:URLRequest = null;
         var _loc4_:String = "lang_dev.xml";
         var _loc5_:URLLoader = new URLLoader();
         _loc5_.addEventListener(Event.COMPLETE,languageLoaded);
         _loc5_.addEventListener(IOErrorEvent.IO_ERROR,errorLoadingLanguage);
         if(param2 == Main.ENV_LOCAL_SERVER)
         {
            _loc3_ = new URLRequest("xml/" + _loc4_);
         }
         else
         {
            _loc3_ = new URLRequest(param1);
         }
         _loc5_.load(_loc3_);
         setNumberSeparators();
      }
      
      private static function setNumberSeparators() : void
      {
         setText("thousands_separator",",");
         setText("decimal_separator",".");
         updateNumberSeparators();
      }
      
      private static function updateNumberSeparators() : void
      {
         if(getText("decimal_separator") != " " && getText("thousands_separator") != " " && getText("thousands_separator") != getText("decimal_separator"))
         {
            THOUSANDS_SEPARATOR = getText("thousands_separator");
            DECIMALS_SEPARATOR = getText("decimal_separator");
            intFormatter = new NumberFormatter();
            intFormatter.thousandsSeparatorTo = THOUSANDS_SEPARATOR;
            intFormatter.decimalSeparatorTo = DECIMALS_SEPARATOR;
            intFormatter.rounding = NumberBaseRoundType.NEAREST;
            floatFormatter = new NumberFormatter();
            floatFormatter.thousandsSeparatorTo = THOUSANDS_SEPARATOR;
            floatFormatter.decimalSeparatorTo = DECIMALS_SEPARATOR;
            floatFormatter.rounding = NumberBaseRoundType.NEAREST;
         }
      }
      
      private static function errorLoadingLanguage(param1:IOErrorEvent) : void
      {
         _ed.dispatchEvent(new BPLocaleEvent(BPLocaleEvent.LANGUAGE_LOADING_ERROR));
         logger.info("lang load error");
      }
      
      public static function replaceWithFormattedPrice(param1:Number, param2:String, param3:RegExp, param4:String) : String
      {
         return PriceFormatter.instance.format(param1,param2,param3,param4);
      }
      
      private static function languageLoaded(param1:Event) : void
      {
         var _loc2_:XML = null;
         var _loc3_:XML = null;
         _loc2_ = new XML(param1.target.data);
         for each(_loc3_ in _loc2_.item)
         {
            setText(_loc3_.@id,_loc3_.valueOf());
         }
         updateNumberSeparators();
         dispatchEvent(new BPLocaleEvent(BPLocaleEvent.LANGUAGELOADED));
      }
      
      public static function initProxy(param1:Dictionary) : void
      {
         var _loc2_:Object = null;
         for(_loc2_ in param1)
         {
            setText(String(_loc2_),String(param1[_loc2_]));
         }
      }
      
      public static function getText(param1:String) : String
      {
         var _loc2_:Object = _textMap[param1];
         if(_loc2_ != null)
         {
            return String(_loc2_);
         }
         return "";
      }
      
      private static function setText(param1:String, param2:String) : void
      {
         _textMap[param1] = param2;
      }
      
      public static function setEntry(param1:String, param2:String) : void
      {
         _textMap[param1] = param2;
      }
      
      public static function get language() : String
      {
         return _language;
      }
      
      public static function set language(param1:String) : void
      {
         _language = param1;
      }
      
      public static function get host() : String
      {
         return _host;
      }
      
      public static function set host(param1:String) : void
      {
         _host = param1;
      }
      
      public static function get path() : String
      {
         return _path;
      }
      
      public static function set path(param1:String) : void
      {
         _path = param1;
      }
      
      public static function round(param1:Number, param2:int = 0) : String
      {
         floatFormatter.precision = param2;
         return floatFormatter.format(param1);
      }
      
      public static function roundInteger(param1:Number) : String
      {
         return intFormatter.format(param1);
      }
      
      public static function distillAndWrite(param1:String, param2:TextField, param3:String = "left", param4:TextFormat = null) : Boolean
      {
         var _loc7_:int = 0;
         var _loc5_:Number = param2.width;
         param2.autoSize = param3;
         param2.text = param1;
         if(param4 != null)
         {
            param2.defaultTextFormat = param4;
         }
         if(param2.width <= _loc5_)
         {
            return false;
         }
         var _loc6_:* = param1;
         while(param2.width > _loc5_)
         {
            _loc7_ = _loc6_.length;
            _loc6_ = _loc6_.substring(0,_loc7_ - 3) + " ";
            param2.text = _loc6_;
         }
         return true;
      }
   }
}

package com.bigpoint.utils
{
   import flash.events.Event;
   
   public class BPLocaleEvent extends Event
   {
      
      public static const LANGUAGELOADED:String = "BPLocaleEvent.onLanguageLoaded";
      
      public static const LANGUAGE_LOADING_ERROR:String = "BPLocaleEvent.onLanguageLoadingError";
      
      public static const LANGUAGE_PARSING_ERROR:String = "BPLocaleEvent.onLanguageParsingError";
      
      public static const LANGUAGE_TRANSLATION_MISSING:String = "BPLocaleEvent.onLanguageTranslationMissing";
      
      public function BPLocaleEvent(param1:String, param2:Boolean = false, param3:Boolean = false)
      {
         super(param1,param2,param3);
      }
   }
}

package com.bigpoint.utils
{
   import mx.logging.ILogger;
   import mx.logging.Log;
   
   public class PriceFormatter
   {
      
      private static var _instance:PriceFormatter;
      
      public static const logger:ILogger = Log.getLogger("PriceFormatter");
      
      private var price:Number;
      
      private var currency:String;
      
      public function PriceFormatter(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("PriceFormatter is a Singleton and can only be accessed through priceFormatter.getInstance()");
         }
      }
      
      private static function hidden() : void
      {
      }
      
      public static function get instance() : PriceFormatter
      {
         if(_instance == null)
         {
            _instance = new PriceFormatter(hidden);
         }
         return _instance;
      }
      
      public function format(param1:Number, param2:String, param3:RegExp, param4:String) : String
      {
         this.price = param1;
         this.currency = param2;
         return param4.replace(param3,this.replaceWithPrice);
      }
      
      private function replaceWithPrice() : String
      {
         var _loc2_:String = null;
         var _loc8_:Boolean = false;
         var _loc3_:* = "isoprice";
         var _loc4_:String = "%CODE%";
         var _loc5_:* = "isocode";
         var _loc6_:String = "";
         var _loc7_:String = arguments[1];
         if(_loc7_.length > 0)
         {
            if(_loc7_.charAt(0) == "|")
            {
               _loc7_ = _loc7_.substring(1,_loc7_.length);
            }
            _loc6_ = _loc7_;
            if(_loc6_.search(/WORD/) > -1)
            {
               _loc3_ = "price_word";
               _loc4_ = "%WORD%";
               _loc5_ = "word";
               if(_loc6_.search(/CAPS/) > -1)
               {
                  _loc8_ = true;
               }
            }
            else if(_loc6_.search(/ISO/) > -1)
            {
               _loc3_ = "isoprice";
               _loc4_ = "%CODE%";
               _loc5_ = "isocode";
            }
            else if(_loc6_.search(/SYMBOL/) > -1)
            {
               _loc3_ = "pricetag_symbol";
               _loc4_ = "%SYMBOL%";
               _loc5_ = "symbol";
            }
         }
         if(this.price < 1 && _loc4_ != "%CODE%")
         {
            _loc3_ += "_sub";
            _loc5_ += "sub";
         }
         if(_loc8_)
         {
            _loc5_ += "caps";
         }
         _loc2_ = BPLocale.getText(_loc3_);
         var _loc9_:String = "currency_" + _loc5_ + "_" + this.currency;
         _loc2_ = _loc2_.replace(_loc4_,BPLocale.getText(_loc9_));
         _loc2_ = _loc2_.replace(/%FULL%/,BPLocale.roundInteger(Math.floor(this.price)));
         var _loc10_:String = this.price.toFixed(2);
         return _loc2_.replace(/%SUB%/,_loc10_.substring(_loc10_.indexOf(".") + 1,_loc10_.length));
      }
   }
}

package com.bigpoint.utils
{
   public class TextReplacement
   {
      
      public static const TYPE_PLAIN:int = 0;
      
      public static const TYPE_NUMBER:int = 1;
      
      public static const TYPE_KEY:int = 2;
      
      public static const TYPE_TIME:int = 3;
      
      public var value:String;
      
      public var type:int;
      
      public var wildcard:String;
      
      public var precision:int = 0;
      
      public function TextReplacement(param1:String = "%!", param2:int = 0, param3:String = "")
      {
         super();
         this.wildcard = param1;
         this.type = param2;
         this.value = param3;
      }
   }
}

package com.bigpoint.utils
{
   import mx.utils.StringUtil;
   
   public class TextReplacementList
   {
      
      public var textReplacements:Array = [];
      
      public function TextReplacementList()
      {
         super();
      }
      
      public static function parseRawTextReplacement(param1:String) : TextReplacementList
      {
         var _loc3_:Array = null;
         var _loc4_:TextReplacement = null;
         var _loc5_:Array = null;
         var _loc6_:Array = null;
         var _loc8_:int = 0;
         var _loc2_:TextReplacementList = new TextReplacementList();
         param1 = StringUtil.trim(param1);
         if(param1.charAt(0) == "[")
         {
            param1 = param1.substring(1,param1.length - 1);
         }
         if(param1.charAt(param1.length - 1) == "]")
         {
            param1.substring(0,param1.length - 2);
         }
         if(param1.charAt(0) == "{")
         {
            param1 = param1.substring(1,param1.length - 1);
         }
         if(param1.charAt(param1.length - 1) == "}")
         {
            param1.substring(0,param1.length - 2);
         }
         if(param1.indexOf("},{") > 0)
         {
            _loc3_ = param1.split("},{");
         }
         else
         {
            _loc3_ = [param1];
         }
         var _loc7_:int = 0;
         while(_loc7_ < _loc3_.length)
         {
            _loc4_ = new TextReplacement();
            _loc5_ = (_loc3_[_loc7_] as String).split(",");
            _loc8_ = 0;
            while(_loc8_ < _loc5_.length)
            {
               _loc6_ = (_loc5_[_loc8_] as String).split(":");
               _loc6_[0] = StringUtil.trim(_loc6_[0]);
               _loc6_[1] = StringUtil.trim(_loc6_[1]);
               switch(_loc6_[0])
               {
                  case "w":
                     _loc4_.wildcard = _loc6_[1];
                     break;
                  case "t":
                     _loc4_.type = int(_loc6_[1]);
                     break;
                  case "v":
                     _loc4_.value = _loc6_[1];
                     break;
                  case "p":
                     _loc4_.precision = int(_loc6_[1]);
               }
               _loc8_++;
            }
            _loc2_.textReplacements.push(_loc4_);
            _loc7_++;
         }
         return _loc2_;
      }
      
      public function replace(param1:String) : String
      {
         var _loc3_:TextReplacement = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.textReplacements.length)
         {
            _loc3_ = this.textReplacements[_loc2_];
            switch(_loc3_.type)
            {
               case TextReplacement.TYPE_PLAIN:
                  param1 = param1.replace(_loc3_.wildcard,_loc3_.value);
                  break;
               case TextReplacement.TYPE_NUMBER:
                  param1 = param1.replace(_loc3_.wildcard,BPLocale.round(int(_loc3_.value),_loc3_.precision));
                  break;
               case TextReplacement.TYPE_KEY:
                  param1 = param1.replace(_loc3_.wildcard,BPLocale.getText(_loc3_.value));
                  break;
               case TextReplacement.TYPE_TIME:
                  param1 = param1.replace(_loc3_.wildcard,TimeFormatter.formatTime(int(_loc3_.value)));
            }
            _loc2_++;
         }
         return param1;
      }
   }
}

package com.bigpoint.utils
{
   public class TimeFormatter
   {
      
      private static var _delimiter:String = ":";
      
      public function TimeFormatter()
      {
         super();
      }
      
      public static function formatTime(param1:int) : String
      {
         var _loc2_:* = "";
         var _loc3_:int = Math.floor(param1 / 3600);
         if(_loc3_ > 0)
         {
            _loc2_ += _loc3_ + _delimiter;
         }
         param1 -= _loc3_ * 3600;
         var _loc4_:int = Math.floor(param1 / 60);
         if(_loc3_ > 0 && _loc4_ < 10)
         {
            _loc2_ += "0";
         }
         _loc2_ += _loc4_ + _delimiter;
         param1 -= _loc4_ * 60;
         if(param1 < 10)
         {
            _loc2_ += "0";
         }
         return _loc2_ + String(param1);
      }
   }
}

package com.bigpoint.utils.ui.tooltip
{
   import flash.display.DisplayObject;
   import flash.events.TimerEvent;
   import flash.geom.Rectangle;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import net.bigpoint.darkorbit.Styles;
   
   public class StickyToolTipHook
   {
      
      private static const SHOW_DELAY:int = 500;
      
      private static const HIDE_DELAY:int = 100;
      
      private var targetObject:DisplayObject;
      
      private var text:String;
      
      public var toolTipVisible:Boolean;
      
      private var MAX_TOOLTIP_WIDTH:int = 220;
      
      private var tooltipText:TextField;
      
      private var bounds:Rectangle;
      
      private var xGap:Number = 0;
      
      private var yGap:Number = 0;
      
      public function StickyToolTipHook(param1:DisplayObject, param2:String, param3:int, param4:int, param5:int)
      {
         super();
         this.targetObject = param1;
         this.text = param2;
         this.xGap = param3;
         this.yGap = param4;
         this.MAX_TOOLTIP_WIDTH = param5;
         this.createToolTipTextField();
      }
      
      public function updateText(param1:String) : void
      {
         this.text = param1;
         this.tooltipText.text = param1;
      }
      
      public function setBounds(param1:Rectangle) : void
      {
         this.bounds = param1;
      }
      
      public function showTooltip() : void
      {
         this.tooltipText.x = this.targetObject.x + this.xGap + this.targetObject.stage.x;
         this.tooltipText.y = this.targetObject.y + this.yGap + this.targetObject.stage.y;
         try
         {
            this.targetObject.stage.addChild(this.tooltipText);
         }
         catch(e:Error)
         {
         }
         this.toolTipVisible = true;
      }
      
      public function showTooltip2() : void
      {
         this.tooltipText.x = this.targetObject.x;
         this.tooltipText.y = this.targetObject.y;
         try
         {
            this.targetObject.parent.addChild(this.tooltipText);
         }
         catch(e:Error)
         {
         }
         this.toolTipVisible = true;
      }
      
      public function hideTooltip(param1:TimerEvent = null) : void
      {
         var event:TimerEvent = param1;
         try
         {
            this.targetObject.stage.removeChild(this.tooltipText);
         }
         catch(e:Error)
         {
         }
         this.toolTipVisible = false;
      }
      
      public function hideTooltip2() : void
      {
         try
         {
            this.targetObject.parent.removeChild(this.tooltipText);
         }
         catch(e:Error)
         {
         }
         this.toolTipVisible = false;
      }
      
      public function getTargetObject() : DisplayObject
      {
         return this.targetObject;
      }
      
      public function suicide() : void
      {
         try
         {
            this.hideTooltip(null);
         }
         catch(e:Error)
         {
         }
      }
      
      private function createToolTipTextField() : DisplayObject
      {
         this.tooltipText = new TextField();
         this.tooltipText.multiline = true;
         this.tooltipText.defaultTextFormat = Styles.tooltipFmt;
         this.tooltipText.embedFonts = Styles.tooltipEmbed;
         this.tooltipText.autoSize = TextFieldAutoSize.LEFT;
         this.tooltipText.textColor = 13421772;
         this.tooltipText.backgroundColor = 0;
         this.tooltipText.background = true;
         this.tooltipText.antiAliasType = AntiAliasType.ADVANCED;
         this.tooltipText.selectable = false;
         this.tooltipText.text = this.text;
         this.tooltipText.mouseEnabled = false;
         if(this.tooltipText.width > this.MAX_TOOLTIP_WIDTH)
         {
            this.tooltipText.width = this.MAX_TOOLTIP_WIDTH;
            this.tooltipText.wordWrap = true;
         }
         return this.tooltipText;
      }
   }
}

package com.bigpoint.utils.ui.tooltip
{
   import flash.display.DisplayObject;
   import flash.display.InteractiveObject;
   import flash.events.Event;
   import flash.events.TimerEvent;
   import flash.geom.Rectangle;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   
   public class TooltipControl
   {
      
      private static var _instance:TooltipControl;
      
      private var toolTipsList:Array;
      
      private var stickyToolTipsList:Array;
      
      private var stickyToolTipFlag:Boolean;
      
      private var bounds:Rectangle;
      
      private var scaleFactor:Number;
      
      private var t:Timer;
      
      public function TooltipControl(param1:Function)
      {
         var _loc2_:String = null;
         super();
         if(param1 !== hidden)
         {
            _loc2_ = "TooltipControl is a Singleton and can only be accessed through TooltipControl.getInstance()";
            throw new Error(_loc2_);
         }
         this.init();
      }
      
      private static function hidden() : void
      {
      }
      
      public static function getInstance() : TooltipControl
      {
         if(_instance == null)
         {
            _instance = new TooltipControl(hidden);
         }
         return _instance;
      }
      
      private function init() : void
      {
         this.toolTipsList = [];
         this.stickyToolTipsList = [];
      }
      
      public function addToolTip(param1:InteractiveObject, param2:String) : ToolTipHook
      {
         if(param2.length < 1)
         {
            return null;
         }
         var _loc3_:ToolTipHook = new ToolTipHook(param1,param2);
         _loc3_.setBounds(this.bounds);
         this.toolTipsList.push(_loc3_);
         return _loc3_;
      }
      
      public function addStickyToolTip(param1:DisplayObject, param2:String, param3:int, param4:int, param5:int = 220) : StickyToolTipHook
      {
         if(param2.length < 1)
         {
            return null;
         }
         var _loc6_:StickyToolTipHook = new StickyToolTipHook(param1,param2,param3,param4,param5);
         _loc6_.setBounds(this.bounds);
         this.stickyToolTipsList.push(_loc6_);
         return _loc6_;
      }
      
      public function setBounds(param1:Rectangle) : void
      {
         this.bounds = param1;
      }
      
      public function setScaleFactor(param1:Number) : void
      {
         this.scaleFactor = param1;
      }
      
      public function removeToolTip(param1:InteractiveObject) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this.toolTipsList.length)
         {
            if(ToolTipHook(this.toolTipsList[_loc2_]).getTargetObject() == param1)
            {
               ToolTipHook(this.toolTipsList[_loc2_]).suicide();
               this.toolTipsList.splice(_loc2_,1);
            }
            _loc2_++;
         }
      }
      
      public function hideAllToolTips() : void
      {
         var _loc1_:int = 0;
         while(_loc1_ < this.toolTipsList.length)
         {
            if(this.toolTipsList[_loc1_] != undefined && this.toolTipsList[_loc1_] != null)
            {
               ToolTipHook(this.toolTipsList[_loc1_]).hideTooltip();
            }
            _loc1_++;
         }
      }
      
      public function showAllStickyToolTips() : void
      {
         this.t = new Timer(1000,1);
         this.t.addEventListener(TimerEvent.TIMER_COMPLETE,this.showAllStickyToolTips2);
         this.t.start();
      }
      
      public function showAllStickyToolTips2(param1:Event = null) : void
      {
         var _loc3_:StickyToolTipHook = null;
         var _loc4_:DisplayObject = null;
         var _loc5_:SimpleWindow = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.stickyToolTipsList.length)
         {
            _loc3_ = StickyToolTipHook(this.stickyToolTipsList[_loc2_]);
            _loc4_ = _loc3_.getTargetObject();
            if(_loc4_ is SimpleWindow)
            {
               _loc5_ = SimpleWindow(_loc4_);
               if(_loc5_.isMaximized())
               {
                  StickyToolTipHook(this.stickyToolTipsList[_loc2_]).showTooltip();
               }
            }
            else
            {
               StickyToolTipHook(this.stickyToolTipsList[_loc2_]).showTooltip();
            }
            _loc2_++;
         }
         this.removeTimer();
      }
      
      private function removeTimer() : void
      {
         if(this.t != null)
         {
            this.t.stop();
            this.t.removeEventListener(TimerEvent.TIMER_COMPLETE,this.showAllStickyToolTips2);
            this.t = null;
         }
      }
      
      public function hideAllStickyToolTips() : void
      {
         var _loc1_:int = 0;
         while(_loc1_ < this.stickyToolTipsList.length)
         {
            StickyToolTipHook(this.stickyToolTipsList[_loc1_]).hideTooltip();
            _loc1_++;
         }
      }
      
      public function toggleStickyToolTips() : void
      {
         if(!this.stickyToolTipFlag)
         {
            this.showAllStickyToolTips();
            this.stickyToolTipFlag = true;
         }
         else
         {
            this.hideAllStickyToolTips();
            this.stickyToolTipFlag = false;
            this.removeTimer();
         }
      }
      
      public function getScaleFactor() : Number
      {
         return this.scaleFactor;
      }
   }
}

package com.bigpoint.utils.ui.tooltip
{
   import flash.display.DisplayObject;
   import flash.display.InteractiveObject;
   import flash.events.MouseEvent;
   import flash.events.TimerEvent;
   import flash.geom.Rectangle;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.Styles;
   
   public class ToolTipHook
   {
      
      private static var tooltipText:TextField;
      
      private static const MAX_TOOLTIP_WIDTH:int = 300;
      
      private static const SHOW_DELAY:int = 500;
      
      private static const HIDE_DELAY:int = 100;
      
      private var targetObject:InteractiveObject;
      
      private var text:String;
      
      private var t:Timer;
      
      private var toolTipVisible:Boolean;
      
      private var bounds:Rectangle;
      
      public var showImmediately:Boolean = false;
      
      public function ToolTipHook(param1:InteractiveObject, param2:String)
      {
         super();
         this.targetObject = param1;
         this.text = param2;
         this.targetObject.addEventListener(MouseEvent.ROLL_OVER,this.onRollOver);
         this.targetObject.addEventListener(MouseEvent.ROLL_OUT,this.onRollOut);
         this.targetObject.addEventListener(MouseEvent.MOUSE_DOWN,this.onRollOut);
      }
      
      public function updateText(param1:String) : void
      {
         this.text = param1;
         if(this.toolTipVisible && tooltipText != null)
         {
            tooltipText.text = param1;
         }
      }
      
      private function onRollOver(param1:MouseEvent) : void
      {
         if(this.showImmediately)
         {
            this.showTooltip();
         }
         else
         {
            this.t = new Timer(SHOW_DELAY,1);
            this.t.addEventListener(TimerEvent.TIMER_COMPLETE,this.showTooltip);
            this.t.start();
         }
      }
      
      private function onRollOut(param1:MouseEvent = null) : void
      {
         if(this.t != null)
         {
            this.t.removeEventListener(TimerEvent.TIMER_COMPLETE,this.showTooltip);
            this.t.stop();
            this.t = null;
         }
         if(this.toolTipVisible)
         {
            this.t = new Timer(HIDE_DELAY,1);
            this.t.addEventListener(TimerEvent.TIMER_COMPLETE,this.hideTooltip);
            this.t.start();
         }
      }
      
      public function setBounds(param1:Rectangle) : void
      {
         this.bounds = param1;
      }
      
      private function showTooltip(param1:TimerEvent = null) : void
      {
         var event:TimerEvent = param1;
         if(tooltipText == null)
         {
            this.createToolTipTextField();
         }
         tooltipText.text = this.text;
         this.updateTextFieldWidth();
         tooltipText.x = this.targetObject.stage.mouseX + 10;
         tooltipText.y = this.targetObject.stage.mouseY - tooltipText.height - 10;
         if(tooltipText.x + tooltipText.width > this.bounds.width)
         {
            tooltipText.x = this.targetObject.stage.mouseX - tooltipText.width - 10;
         }
         if(tooltipText.y - tooltipText.height < this.bounds.height)
         {
            tooltipText.y = this.targetObject.stage.mouseY + 10;
         }
         try
         {
            this.targetObject.stage.addChild(tooltipText);
         }
         catch(e:Error)
         {
         }
         this.toolTipVisible = true;
      }
      
      public function hideTooltip(param1:TimerEvent = null) : void
      {
         var event:TimerEvent = param1;
         if(this.t != null)
         {
            this.t.stop();
            this.t.removeEventListener(TimerEvent.TIMER_COMPLETE,this.hideTooltip);
            this.t.removeEventListener(TimerEvent.TIMER_COMPLETE,this.showTooltip);
            this.t = null;
         }
         try
         {
            this.targetObject.stage.removeChild(tooltipText);
         }
         catch(e:Error)
         {
         }
         this.toolTipVisible = false;
      }
      
      public function hide2() : void
      {
         try
         {
            this.targetObject.stage.removeChild(tooltipText);
         }
         catch(e:Error)
         {
         }
         this.toolTipVisible = false;
      }
      
      public function getTargetObject() : InteractiveObject
      {
         return this.targetObject;
      }
      
      internal function suicide() : void
      {
         try
         {
            this.targetObject.removeEventListener(MouseEvent.ROLL_OVER,this.onRollOver);
            this.targetObject.removeEventListener(MouseEvent.ROLL_OVER,this.onRollOut);
            this.targetObject.removeEventListener(MouseEvent.MOUSE_DOWN,this.onRollOut);
            this.hideTooltip(null);
         }
         catch(e:Error)
         {
         }
      }
      
      private function createToolTipTextField() : DisplayObject
      {
         tooltipText = new TextField();
         tooltipText.defaultTextFormat = Styles.tooltipFmt;
         tooltipText.embedFonts = Styles.tooltipEmbed;
         tooltipText.autoSize = TextFieldAutoSize.LEFT;
         tooltipText.textColor = 13421772;
         tooltipText.backgroundColor = 0;
         tooltipText.background = true;
         tooltipText.antiAliasType = AntiAliasType.ADVANCED;
         tooltipText.selectable = false;
         tooltipText.text = this.text;
         tooltipText.mouseEnabled = false;
         return tooltipText;
      }
      
      private function updateTextFieldWidth() : void
      {
         tooltipText.wordWrap = false;
         tooltipText.multiline = false;
         tooltipText.autoSize = TextFieldAutoSize.LEFT;
         if(tooltipText.width > MAX_TOOLTIP_WIDTH)
         {
            tooltipText.width = MAX_TOOLTIP_WIDTH;
            tooltipText.wordWrap = true;
            tooltipText.multiline = true;
         }
      }
      
      public function getText() : String
      {
         return tooltipText.text;
      }
   }
}

package com.greensock
{
   import com.greensock.core.*;
   import flash.errors.*;
   import flash.utils.*;
   
   public class OverwriteManager
   {
      
      public static var mode:int;
      
      public static var enabled:Boolean;
      
      public static const version:Number = 6.02;
      
      public static const NONE:int = 0;
      
      public static const ALL_IMMEDIATE:int = 1;
      
      public static const AUTO:int = 2;
      
      public static const CONCURRENT:int = 3;
      
      public static const ALL_ONSTART:int = 4;
      
      public static const PREEXISTING:int = 5;
      
      public function OverwriteManager()
      {
         super();
      }
      
      public static function init(param1:int = 2) : int
      {
         if(TweenLite.version < 11.1)
         {
            throw new Error("Warning: Your TweenLite class needs to be updated to work with OverwriteManager (or you may need to clear your ASO files). Please download and install the latest version from http://www.tweenlite.com.");
         }
         TweenLite.overwriteManager = OverwriteManager;
         mode = param1;
         enabled = true;
         return mode;
      }
      
      public static function manageOverwrites(param1:TweenLite, param2:Object, param3:Array, param4:uint) : Boolean
      {
         var _loc5_:int = 0;
         var _loc6_:Boolean = false;
         var _loc7_:TweenLite = null;
         var _loc13_:uint = 0;
         var _loc14_:Number = NaN;
         var _loc15_:Number = NaN;
         var _loc16_:TweenCore = null;
         var _loc17_:Number = NaN;
         var _loc18_:SimpleTimeline = null;
         if(param4 >= 4)
         {
            _loc13_ = param3.length;
            _loc5_ = 0;
            while(_loc5_ < _loc13_)
            {
               _loc7_ = param3[_loc5_];
               if(_loc7_ != param1)
               {
                  if(_loc7_.setEnabled(false,false))
                  {
                     _loc6_ = true;
                  }
               }
               else if(param4 == 5)
               {
                  break;
               }
               _loc5_++;
            }
            return _loc6_;
         }
         var _loc8_:Number = param1.cachedStartTime + 1e-10;
         var _loc9_:Array = [];
         var _loc10_:Array = [];
         var _loc11_:uint = 0;
         var _loc12_:uint = 0;
         _loc5_ = int(param3.length);
         while(--_loc5_ > -1)
         {
            _loc7_ = param3[_loc5_];
            if(!(_loc7_ == param1 || _loc7_.gc))
            {
               if(_loc7_.timeline != param1.timeline)
               {
                  if(!getGlobalPaused(_loc7_))
                  {
                     var _loc19_:*;
                     _loc10_[_loc19_ = _loc11_++] = _loc7_;
                  }
               }
               else if(_loc7_.cachedStartTime <= _loc8_ && _loc7_.cachedStartTime + _loc7_.totalDuration + 1e-10 > _loc8_ && !getGlobalPaused(_loc7_))
               {
                  _loc9_[_loc19_ = _loc12_++] = _loc7_;
               }
            }
         }
         if(_loc11_ != 0)
         {
            _loc14_ = param1.cachedTimeScale;
            _loc15_ = _loc8_;
            _loc18_ = param1.timeline;
            while(_loc18_)
            {
               _loc14_ *= _loc18_.cachedTimeScale;
               _loc15_ += _loc18_.cachedStartTime;
               _loc18_ = _loc18_.timeline;
            }
            _loc8_ = _loc14_ * _loc15_;
            _loc5_ = int(_loc11_);
            while(--_loc5_ > -1)
            {
               _loc16_ = _loc10_[_loc5_];
               _loc14_ = _loc16_.cachedTimeScale;
               _loc15_ = _loc16_.cachedStartTime;
               _loc18_ = _loc16_.timeline;
               while(_loc18_)
               {
                  _loc14_ *= _loc18_.cachedTimeScale;
                  _loc15_ += _loc18_.cachedStartTime;
                  _loc18_ = _loc18_.timeline;
               }
               _loc17_ = _loc14_ * _loc15_;
               if(_loc17_ <= _loc8_ && (_loc17_ + _loc16_.totalDuration * _loc14_ + 1e-10 > _loc8_ || _loc16_.cachedDuration == 0))
               {
                  _loc9_[_loc19_ = _loc12_++] = _loc16_;
               }
            }
         }
         if(_loc12_ == 0)
         {
            return _loc6_;
         }
         _loc5_ = int(_loc12_);
         if(param4 == 2)
         {
            while(--_loc5_ > -1)
            {
               _loc7_ = _loc9_[_loc5_];
               if(_loc7_.killVars(param2))
               {
                  _loc6_ = true;
               }
               if(_loc7_.cachedPT1 == null && _loc7_.initted)
               {
                  _loc7_.setEnabled(false,false);
               }
            }
         }
         else
         {
            while(--_loc5_ > -1)
            {
               if(TweenLite(_loc9_[_loc5_]).setEnabled(false,false))
               {
                  _loc6_ = true;
               }
            }
         }
         return _loc6_;
      }
      
      public static function getGlobalPaused(param1:TweenCore) : Boolean
      {
         while(param1)
         {
            if(param1.cachedPaused)
            {
               return true;
            }
            param1 = param1.timeline;
         }
         return false;
      }
   }
}

package com.greensock
{
   import com.greensock.core.*;
   import com.greensock.plugins.*;
   import flash.display.*;
   import flash.events.*;
   import flash.utils.*;
   
   public class TweenLite extends TweenCore
   {
      
      public static var onPluginEvent:Function;
      
      public static var overwriteManager:Object;
      
      public static var rootFrame:Number;
      
      public static var rootTimeline:SimpleTimeline;
      
      public static var rootFramesTimeline:SimpleTimeline;
      
      public static const version:Number = 11.36;
      
      public static var plugins:Object = {};
      
      public static var fastEaseLookup:Dictionary = new Dictionary(false);
      
      public static var killDelayedCallsTo:Function = TweenLite.killTweensOf;
      
      public static var defaultEase:Function = TweenLite.easeOut;
      
      public static var masterList:Dictionary = new Dictionary(false);
      
      private static var _shape:Shape = new Shape();
      
      protected static var _reservedProps:Object = {
         "ease":1,
         "delay":1,
         "overwrite":1,
         "onComplete":1,
         "onCompleteParams":1,
         "useFrames":1,
         "runBackwards":1,
         "startAt":1,
         "onUpdate":1,
         "onUpdateParams":1,
         "roundProps":1,
         "onStart":1,
         "onStartParams":1,
         "onInit":1,
         "onInitParams":1,
         "onReverseComplete":1,
         "onReverseCompleteParams":1,
         "onRepeat":1,
         "onRepeatParams":1,
         "proxiedEase":1,
         "easeParams":1,
         "yoyo":1,
         "onCompleteListener":1,
         "onUpdateListener":1,
         "onStartListener":1,
         "onReverseCompleteListener":1,
         "onRepeatListener":1,
         "orientToBezier":1,
         "timeScale":1,
         "immediateRender":1,
         "repeat":1,
         "repeatDelay":1,
         "timeline":1,
         "data":1,
         "paused":1
      };
      
      public var target:Object;
      
      public var propTweenLookup:Object;
      
      public var ratio:Number = 0;
      
      public var cachedPT1:PropTween;
      
      protected var _ease:Function;
      
      protected var _overwrite:uint;
      
      protected var _overwrittenProps:Object;
      
      protected var _hasPlugins:Boolean;
      
      protected var _notifyPluginsOfEnabled:Boolean;
      
      public function TweenLite(param1:Object, param2:Number, param3:Object)
      {
         var _loc5_:TweenLite = null;
         super(param2,param3);
         this.target = param1;
         if(this.target is TweenCore && Boolean(this.vars.timeScale))
         {
            this.cachedTimeScale = 1;
         }
         this.propTweenLookup = {};
         this._ease = defaultEase;
         this._overwrite = Number(param3.overwrite) <= -1 || !overwriteManager.enabled && param3.overwrite > 1 ? uint(overwriteManager.mode) : uint(int(param3.overwrite));
         var _loc4_:Array = masterList[param1];
         if(!_loc4_)
         {
            masterList[param1] = [this];
         }
         else if(this._overwrite == 1)
         {
            for each(_loc5_ in _loc4_)
            {
               if(!_loc5_.gc)
               {
                  _loc5_.setEnabled(false,false);
               }
            }
            masterList[param1] = [this];
         }
         else
         {
            _loc4_[_loc4_.length] = this;
         }
         if(this.active || Boolean(this.vars.immediateRender))
         {
            this.renderTime(0,false,true);
         }
      }
      
      public static function initClass() : void
      {
         rootFrame = 0;
         rootTimeline = new SimpleTimeline(null);
         rootFramesTimeline = new SimpleTimeline(null);
         rootTimeline.cachedStartTime = getTimer() * 0.001;
         rootFramesTimeline.cachedStartTime = rootFrame;
         rootTimeline.autoRemoveChildren = true;
         rootFramesTimeline.autoRemoveChildren = true;
         _shape.addEventListener(Event.ENTER_FRAME,updateAll,false,0,true);
         if(overwriteManager == null)
         {
            overwriteManager = {
               "mode":1,
               "enabled":false
            };
         }
      }
      
      public static function to(param1:Object, param2:Number, param3:Object) : TweenLite
      {
         return new TweenLite(param1,param2,param3);
      }
      
      public static function from(param1:Object, param2:Number, param3:Object) : TweenLite
      {
         param3.runBackwards = true;
         if(!("immediateRender" in param3))
         {
            param3.immediateRender = true;
         }
         return new TweenLite(param1,param2,param3);
      }
      
      public static function delayedCall(param1:Number, param2:Function, param3:Array = null, param4:Boolean = false) : TweenLite
      {
         return new TweenLite(param2,0,{
            "delay":param1,
            "onComplete":param2,
            "onCompleteParams":param3,
            "immediateRender":false,
            "useFrames":param4,
            "overwrite":0
         });
      }
      
      protected static function updateAll(param1:Event = null) : void
      {
         var _loc2_:Dictionary = null;
         var _loc3_:Object = null;
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         rootTimeline.renderTime((getTimer() * 0.001 - rootTimeline.cachedStartTime) * rootTimeline.cachedTimeScale,false,false);
         ++rootFrame;
         rootFramesTimeline.renderTime((rootFrame - rootFramesTimeline.cachedStartTime) * rootFramesTimeline.cachedTimeScale,false,false);
         if(!(rootFrame % 60))
         {
            _loc2_ = masterList;
            for(_loc3_ in _loc2_)
            {
               _loc4_ = _loc2_[_loc3_];
               _loc5_ = int(_loc4_.length);
               while(--_loc5_ > -1)
               {
                  if(TweenLite(_loc4_[_loc5_]).gc)
                  {
                     _loc4_.splice(_loc5_,1);
                  }
               }
               if(_loc4_.length == 0)
               {
                  delete _loc2_[_loc3_];
               }
            }
         }
      }
      
      public static function killTweensOf(param1:Object, param2:Boolean = false, param3:Object = null) : void
      {
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc6_:TweenLite = null;
         if(param1 in masterList)
         {
            _loc4_ = masterList[param1];
            _loc5_ = int(_loc4_.length);
            while(--_loc5_ > -1)
            {
               _loc6_ = _loc4_[_loc5_];
               if(!_loc6_.gc)
               {
                  if(param2)
                  {
                     _loc6_.complete(false,false);
                  }
                  if(param3 != null)
                  {
                     _loc6_.killVars(param3);
                  }
                  if(param3 == null || _loc6_.cachedPT1 == null && _loc6_.initted)
                  {
                     _loc6_.setEnabled(false,false);
                  }
               }
            }
            if(param3 == null)
            {
               delete masterList[param1];
            }
         }
      }
      
      protected static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return 1 - (param1 = 1 - param1 / param4) * param1;
      }
      
      protected function init() : void
      {
         var _loc1_:String = null;
         var _loc2_:int = 0;
         var _loc3_:* = undefined;
         var _loc4_:Boolean = false;
         var _loc5_:Array = null;
         var _loc6_:PropTween = null;
         if(this.vars.onInit)
         {
            this.vars.onInit.apply(null,this.vars.onInitParams);
         }
         if(typeof this.vars.ease == "function")
         {
            this._ease = this.vars.ease;
         }
         if(this.vars.easeParams)
         {
            this.vars.proxiedEase = this._ease;
            this._ease = this.easeProxy;
         }
         this.cachedPT1 = null;
         this.propTweenLookup = {};
         for(_loc1_ in this.vars)
         {
            if(!(_loc1_ in _reservedProps && !(_loc1_ == "timeScale" && this.target is TweenCore)))
            {
               if(_loc1_ in plugins && Boolean((_loc3_ = new (plugins[_loc1_] as Class)()).onInitTween(this.target,this.vars[_loc1_],this)))
               {
                  this.cachedPT1 = new PropTween(_loc3_,"changeFactor",0,1,_loc3_.overwriteProps.length == 1 ? _loc3_.overwriteProps[0] : "_MULTIPLE_",true,this.cachedPT1);
                  if(this.cachedPT1.name == "_MULTIPLE_")
                  {
                     _loc2_ = int(_loc3_.overwriteProps.length);
                     while(--_loc2_ > -1)
                     {
                        this.propTweenLookup[_loc3_.overwriteProps[_loc2_]] = this.cachedPT1;
                     }
                  }
                  else
                  {
                     this.propTweenLookup[this.cachedPT1.name] = this.cachedPT1;
                  }
                  if(_loc3_.priority)
                  {
                     this.cachedPT1.priority = _loc3_.priority;
                     _loc4_ = true;
                  }
                  if(Boolean(_loc3_.onDisable) || Boolean(_loc3_.onEnable))
                  {
                     this._notifyPluginsOfEnabled = true;
                  }
                  this._hasPlugins = true;
               }
               else
               {
                  this.cachedPT1 = new PropTween(this.target,_loc1_,Number(this.target[_loc1_]),typeof this.vars[_loc1_] == "number" ? Number(this.vars[_loc1_]) - this.target[_loc1_] : Number(this.vars[_loc1_]),_loc1_,false,this.cachedPT1);
                  this.propTweenLookup[_loc1_] = this.cachedPT1;
               }
            }
         }
         if(_loc4_)
         {
            onPluginEvent("onInit",this);
         }
         if(this.vars.runBackwards)
         {
            _loc6_ = this.cachedPT1;
            while(_loc6_)
            {
               _loc6_.start += _loc6_.change;
               _loc6_.change = -_loc6_.change;
               _loc6_ = _loc6_.nextNode;
            }
         }
         _hasUpdate = Boolean(this.vars.onUpdate != null);
         if(this._overwrittenProps)
         {
            this.killVars(this._overwrittenProps);
            if(this.cachedPT1 == null)
            {
               this.setEnabled(false,false);
            }
         }
         if(this._overwrite > 1 && this.cachedPT1 && (_loc5_ = masterList[this.target]) && _loc5_.length > 1)
         {
            if(overwriteManager.manageOverwrites(this,this.propTweenLookup,_loc5_,this._overwrite))
            {
               this.init();
            }
         }
         this.initted = true;
      }
      
      override public function renderTime(param1:Number, param2:Boolean = false, param3:Boolean = false) : void
      {
         var _loc4_:Boolean = false;
         var _loc5_:Number = this.cachedTime;
         if(param1 >= this.cachedDuration)
         {
            this.cachedTotalTime = this.cachedTime = this.cachedDuration;
            this.ratio = 1;
            _loc4_ = true;
            if(this.cachedDuration == 0)
            {
               if((param1 == 0 || _rawPrevTime < 0) && _rawPrevTime != param1)
               {
                  param3 = true;
               }
               _rawPrevTime = param1;
            }
         }
         else if(param1 <= 0)
         {
            this.cachedTotalTime = this.cachedTime = this.ratio = 0;
            if(param1 < 0)
            {
               this.active = false;
               if(this.cachedDuration == 0)
               {
                  if(_rawPrevTime > 0)
                  {
                     param3 = true;
                     _loc4_ = true;
                  }
                  _rawPrevTime = param1;
               }
            }
            if(this.cachedReversed && _loc5_ != 0)
            {
               _loc4_ = true;
            }
         }
         else
         {
            this.cachedTotalTime = this.cachedTime = param1;
            this.ratio = this._ease(param1,0,1,this.cachedDuration);
         }
         if(this.cachedTime == _loc5_ && !param3)
         {
            return;
         }
         if(!this.initted)
         {
            this.init();
            if(!_loc4_ && Boolean(this.cachedTime))
            {
               this.ratio = this._ease(this.cachedTime,0,1,this.cachedDuration);
            }
         }
         if(!this.active && !this.cachedPaused)
         {
            this.active = true;
         }
         if(_loc5_ == 0 && this.vars.onStart && this.cachedTime != 0 && !param2)
         {
            this.vars.onStart.apply(null,this.vars.onStartParams);
         }
         var _loc6_:PropTween = this.cachedPT1;
         while(_loc6_)
         {
            _loc6_.target[_loc6_.property] = _loc6_.start + this.ratio * _loc6_.change;
            _loc6_ = _loc6_.nextNode;
         }
         if(_hasUpdate && !param2)
         {
            this.vars.onUpdate.apply(null,this.vars.onUpdateParams);
         }
         if(_loc4_)
         {
            if(this._hasPlugins && Boolean(this.cachedPT1))
            {
               onPluginEvent("onComplete",this);
            }
            complete(true,param2);
         }
      }
      
      public function killVars(param1:Object, param2:Boolean = true) : Boolean
      {
         var _loc3_:String = null;
         var _loc4_:PropTween = null;
         var _loc5_:Boolean = false;
         if(this._overwrittenProps == null)
         {
            this._overwrittenProps = {};
         }
         for(_loc3_ in param1)
         {
            if(_loc3_ in this.propTweenLookup)
            {
               _loc4_ = this.propTweenLookup[_loc3_];
               if(_loc4_.isPlugin && _loc4_.name == "_MULTIPLE_")
               {
                  _loc4_.target.killProps(param1);
                  if(_loc4_.target.overwriteProps.length == 0)
                  {
                     _loc4_.name = "";
                  }
               }
               if(_loc4_.name != "_MULTIPLE_")
               {
                  if(_loc4_.nextNode)
                  {
                     _loc4_.nextNode.prevNode = _loc4_.prevNode;
                  }
                  if(_loc4_.prevNode)
                  {
                     _loc4_.prevNode.nextNode = _loc4_.nextNode;
                  }
                  else if(this.cachedPT1 == _loc4_)
                  {
                     this.cachedPT1 = _loc4_.nextNode;
                  }
                  if(_loc4_.isPlugin && Boolean(_loc4_.target.onDisable))
                  {
                     _loc4_.target.onDisable();
                     if(_loc4_.target.activeDisable)
                     {
                        _loc5_ = true;
                     }
                  }
                  delete this.propTweenLookup[_loc3_];
               }
            }
            if(param2 && param1 != this._overwrittenProps)
            {
               this._overwrittenProps[_loc3_] = 1;
            }
         }
         return _loc5_;
      }
      
      override public function invalidate() : void
      {
         if(this._notifyPluginsOfEnabled && Boolean(this.cachedPT1))
         {
            onPluginEvent("onDisable",this);
         }
         this.cachedPT1 = null;
         this._overwrittenProps = null;
         _hasUpdate = this.initted = this.active = this._notifyPluginsOfEnabled = false;
         this.propTweenLookup = {};
      }
      
      override public function setEnabled(param1:Boolean, param2:Boolean = false) : Boolean
      {
         var _loc3_:Array = null;
         if(param1)
         {
            _loc3_ = TweenLite.masterList[this.target];
            if(!_loc3_)
            {
               TweenLite.masterList[this.target] = [this];
            }
            else
            {
               _loc3_[_loc3_.length] = this;
            }
         }
         super.setEnabled(param1,param2);
         if(this._notifyPluginsOfEnabled && Boolean(this.cachedPT1))
         {
            return onPluginEvent(param1 ? "onEnable" : "onDisable",this);
         }
         return false;
      }
      
      protected function easeProxy(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return this.vars.proxiedEase.apply(null,arguments.concat(this.vars.easeParams));
      }
   }
}

package com.greensock
{
   import com.greensock.core.*;
   import com.greensock.events.TweenEvent;
   import com.greensock.plugins.*;
   import flash.display.*;
   import flash.events.*;
   import flash.utils.*;
   
   public class TweenMax extends TweenLite implements IEventDispatcher
   {
      
      public static const version:Number = 11.36;
      
      private static var _overwriteMode:int = OverwriteManager.enabled ? OverwriteManager.mode : OverwriteManager.init(2);
      
      public static var killTweensOf:Function = TweenLite.killTweensOf;
      
      public static var killDelayedCallsTo:Function = TweenLite.killTweensOf;
      
      TweenPlugin.activate([EndArrayPlugin,FramePlugin,RemoveTintPlugin,TintPlugin,VisiblePlugin,VolumePlugin,BevelFilterPlugin,BezierPlugin,BezierThroughPlugin,BlurFilterPlugin,ColorMatrixFilterPlugin,ColorTransformPlugin,DropShadowFilterPlugin,FrameLabelPlugin,GlowFilterPlugin,HexColorsPlugin,RoundPropsPlugin,ShortRotationPlugin,{}]);
      
      protected var _dispatcher:EventDispatcher;
      
      protected var _hasUpdateListener:Boolean;
      
      protected var _repeat:int = 0;
      
      protected var _repeatDelay:Number = 0;
      
      protected var _cyclesComplete:uint = 0;
      
      protected var _easePower:uint;
      
      protected var _easeType:uint;
      
      public var yoyo:Boolean;
      
      public function TweenMax(param1:Object, param2:Number, param3:Object)
      {
         super(param1,param2,param3);
         if(TweenLite.version < 11.2)
         {
            throw new Error("TweenMax error! Please update your TweenLite class or try deleting your ASO files. TweenMax requires a more recent version. Download updates at http://www.TweenMax.com.");
         }
         this.yoyo = Boolean(this.vars.yoyo);
         this._repeat = this.vars.repeat ? int(this.vars.repeat) : 0;
         this._repeatDelay = this.vars.repeatDelay ? Number(this.vars.repeatDelay) : 0;
         this.cacheIsDirty = true;
         if(Boolean(this.vars.onCompleteListener) || Boolean(this.vars.onInitListener) || Boolean(this.vars.onUpdateListener) || Boolean(this.vars.onStartListener) || Boolean(this.vars.onRepeatListener) || Boolean(this.vars.onReverseCompleteListener))
         {
            this.initDispatcher();
            if(param2 == 0 && _delay == 0)
            {
               this._dispatcher.dispatchEvent(new TweenEvent(TweenEvent.UPDATE));
               this._dispatcher.dispatchEvent(new TweenEvent(TweenEvent.COMPLETE));
            }
         }
         if(Boolean(this.vars.timeScale) && !(this.target is TweenCore))
         {
            this.cachedTimeScale = this.vars.timeScale;
         }
      }
      
      public static function to(param1:Object, param2:Number, param3:Object) : TweenMax
      {
         return new TweenMax(param1,param2,param3);
      }
      
      public static function from(param1:Object, param2:Number, param3:Object) : TweenMax
      {
         param3.runBackwards = true;
         if(!("immediateRender" in param3))
         {
            param3.immediateRender = true;
         }
         return new TweenMax(param1,param2,param3);
      }
      
      public static function fromTo(param1:Object, param2:Number, param3:Object, param4:Object) : TweenMax
      {
         param4.startAt = param3;
         if(param3.immediateRender)
         {
            param4.immediateRender = true;
         }
         return new TweenMax(param1,param2,param4);
      }
      
      public static function allTo(param1:Array, param2:Number, param3:Object, param4:Number = 0, param5:Function = null, param6:Array = null) : Array
      {
         var i:int = 0;
         var varsDup:Object = null;
         var p:String = null;
         var onCompleteProxy:Function = null;
         var onCompleteParamsProxy:Array = null;
         var targets:Array = param1;
         var duration:Number = param2;
         var vars:Object = param3;
         var stagger:Number = param4;
         var onCompleteAll:Function = param5;
         var onCompleteAllParams:Array = param6;
         var l:uint = targets.length;
         var a:Array = [];
         var curDelay:Number = "delay" in vars ? Number(vars.delay) : 0;
         onCompleteProxy = vars.onComplete;
         onCompleteParamsProxy = vars.onCompleteParams;
         var lastIndex:int = stagger <= 0 ? 0 : int(l - 1);
         i = 0;
         while(i < l)
         {
            varsDup = {};
            for(p in vars)
            {
               varsDup[p] = vars[p];
            }
            varsDup.delay = curDelay;
            if(i == lastIndex && onCompleteAll != null)
            {
               varsDup.onComplete = function():void
               {
                  if(onCompleteProxy != null)
                  {
                     onCompleteProxy.apply(null,onCompleteParamsProxy);
                  }
                  onCompleteAll.apply(null,onCompleteAllParams);
               };
            }
            a[a.length] = new TweenMax(targets[i],duration,varsDup);
            curDelay += stagger;
            i++;
         }
         return a;
      }
      
      public static function allFrom(param1:Array, param2:Number, param3:Object, param4:Number = 0, param5:Function = null, param6:Array = null) : Array
      {
         param3.runBackwards = true;
         if(!("immediateRender" in param3))
         {
            param3.immediateRender = true;
         }
         return allTo(param1,param2,param3,param4,param5,param6);
      }
      
      public static function allFromTo(param1:Array, param2:Number, param3:Object, param4:Object, param5:Number = 0, param6:Function = null, param7:Array = null) : Array
      {
         param4.startAt = param3;
         if(param3.immediateRender)
         {
            param4.immediateRender = true;
         }
         return allTo(param1,param2,param4,param5,param6,param7);
      }
      
      public static function delayedCall(param1:Number, param2:Function, param3:Array = null, param4:Boolean = false) : TweenMax
      {
         return new TweenMax(param2,0,{
            "delay":param1,
            "onComplete":param2,
            "onCompleteParams":param3,
            "immediateRender":false,
            "useFrames":param4,
            "overwrite":0
         });
      }
      
      public static function getTweensOf(param1:Object) : Array
      {
         var _loc4_:int = 0;
         var _loc5_:uint = 0;
         var _loc2_:Array = masterList[param1];
         var _loc3_:Array = [];
         if(_loc2_)
         {
            _loc4_ = int(_loc2_.length);
            _loc5_ = 0;
            while(--_loc4_ > -1)
            {
               if(!_loc2_[_loc4_].gc)
               {
                  var _loc6_:*;
                  _loc3_[_loc6_ = _loc5_++] = _loc2_[_loc4_];
               }
            }
         }
         return _loc3_;
      }
      
      public static function isTweening(param1:Object) : Boolean
      {
         var _loc4_:TweenLite = null;
         var _loc2_:Array = getTweensOf(param1);
         var _loc3_:int = int(_loc2_.length);
         while(--_loc3_ > -1)
         {
            _loc4_ = _loc2_[_loc3_];
            if(_loc4_.active || _loc4_.cachedStartTime == _loc4_.timeline.cachedTime && _loc4_.timeline.active)
            {
               return true;
            }
         }
         return false;
      }
      
      public static function getAllTweens() : Array
      {
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc1_:Dictionary = masterList;
         var _loc2_:uint = 0;
         var _loc3_:Array = [];
         for each(_loc4_ in _loc1_)
         {
            _loc5_ = int(_loc4_.length);
            while(--_loc5_ > -1)
            {
               if(!TweenLite(_loc4_[_loc5_]).gc)
               {
                  var _loc8_:*;
                  _loc3_[_loc8_ = _loc2_++] = _loc4_[_loc5_];
               }
            }
         }
         return _loc3_;
      }
      
      public static function killAll(param1:Boolean = false, param2:Boolean = true, param3:Boolean = true) : void
      {
         var _loc5_:* = false;
         var _loc4_:Array = getAllTweens();
         var _loc6_:int = int(_loc4_.length);
         while(--_loc6_ > -1)
         {
            _loc5_ = _loc4_[_loc6_].target == _loc4_[_loc6_].vars.onComplete;
            if(_loc5_ == param3 || _loc5_ != param2)
            {
               if(param1)
               {
                  _loc4_[_loc6_].complete(false);
               }
               else
               {
                  _loc4_[_loc6_].setEnabled(false,false);
               }
            }
         }
      }
      
      public static function killChildTweensOf(param1:DisplayObjectContainer, param2:Boolean = false) : void
      {
         var _loc4_:Object = null;
         var _loc5_:DisplayObjectContainer = null;
         var _loc3_:Array = getAllTweens();
         var _loc6_:int = int(_loc3_.length);
         while(--_loc6_ > -1)
         {
            _loc4_ = _loc3_[_loc6_].target;
            if(_loc4_ is DisplayObject)
            {
               _loc5_ = _loc4_.parent;
               while(_loc5_)
               {
                  if(_loc5_ == param1)
                  {
                     if(param2)
                     {
                        _loc3_[_loc6_].complete(false);
                     }
                     else
                     {
                        _loc3_[_loc6_].setEnabled(false,false);
                     }
                  }
                  _loc5_ = _loc5_.parent;
               }
            }
         }
      }
      
      public static function pauseAll(param1:Boolean = true, param2:Boolean = true) : void
      {
         changePause(true,param1,param2);
      }
      
      public static function resumeAll(param1:Boolean = true, param2:Boolean = true) : void
      {
         changePause(false,param1,param2);
      }
      
      private static function changePause(param1:Boolean, param2:Boolean = true, param3:Boolean = false) : void
      {
         var _loc5_:* = false;
         var _loc4_:Array = getAllTweens();
         var _loc6_:int = int(_loc4_.length);
         while(--_loc6_ > -1)
         {
            _loc5_ = TweenLite(_loc4_[_loc6_]).target == TweenLite(_loc4_[_loc6_]).vars.onComplete;
            if(_loc5_ == param3 || _loc5_ != param2)
            {
               TweenCore(_loc4_[_loc6_]).paused = param1;
            }
         }
      }
      
      public static function get globalTimeScale() : Number
      {
         return TweenLite.rootTimeline == null ? 1 : TweenLite.rootTimeline.cachedTimeScale;
      }
      
      public static function set globalTimeScale(param1:Number) : void
      {
         if(param1 == 0)
         {
            param1 = 0.0001;
         }
         if(TweenLite.rootTimeline == null)
         {
            TweenLite.to({},0,{});
         }
         var _loc2_:SimpleTimeline = TweenLite.rootTimeline;
         var _loc3_:Number = getTimer() * 0.001;
         _loc2_.cachedStartTime = _loc3_ - (_loc3_ - _loc2_.cachedStartTime) * _loc2_.cachedTimeScale / param1;
         _loc2_ = TweenLite.rootFramesTimeline;
         _loc3_ = TweenLite.rootFrame;
         _loc2_.cachedStartTime = _loc3_ - (_loc3_ - _loc2_.cachedStartTime) * _loc2_.cachedTimeScale / param1;
         TweenLite.rootFramesTimeline.cachedTimeScale = TweenLite.rootTimeline.cachedTimeScale = param1;
      }
      
      override protected function init() : void
      {
         var _loc1_:TweenMax = null;
         var _loc2_:int = 0;
         var _loc3_:String = null;
         var _loc4_:* = null;
         var _loc5_:Array = null;
         var _loc6_:Object = null;
         var _loc7_:PropTween = null;
         var _loc8_:PropTween = null;
         var _loc9_:int = 0;
         if(this.vars.startAt)
         {
            this.vars.startAt.overwrite = 0;
            this.vars.startAt.immediateRender = true;
            _loc1_ = new TweenMax(this.target,0,this.vars.startAt);
         }
         if(this._dispatcher)
         {
            this._dispatcher.dispatchEvent(new TweenEvent(TweenEvent.INIT));
         }
         super.init();
         if(_ease in fastEaseLookup)
         {
            this._easeType = fastEaseLookup[_ease][0];
            this._easePower = fastEaseLookup[_ease][1];
         }
         if(this.vars.roundProps != null && "roundProps" in TweenLite.plugins)
         {
            _loc5_ = this.vars.roundProps;
            _loc9_ = int(_loc5_.length);
            while(--_loc9_ > -1)
            {
               _loc3_ = _loc5_[_loc9_];
               _loc8_ = this.cachedPT1;
               while(_loc8_)
               {
                  if(_loc8_.name == _loc3_)
                  {
                     if(_loc8_.isPlugin)
                     {
                        _loc8_.target.round = true;
                     }
                     else
                     {
                        if(_loc6_ == null)
                        {
                           _loc6_ = new TweenLite.plugins.roundProps();
                           _loc6_.add(_loc8_.target,_loc3_,_loc8_.start,_loc8_.change);
                           _hasPlugins = true;
                           this.cachedPT1 = _loc7_ = this.insertPropTween(_loc6_,"changeFactor",0,1,"_MULTIPLE_",true,this.cachedPT1);
                        }
                        else
                        {
                           _loc6_.add(_loc8_.target,_loc3_,_loc8_.start,_loc8_.change);
                        }
                        this.removePropTween(_loc8_);
                        this.propTweenLookup[_loc3_] = _loc7_;
                     }
                  }
                  else if(_loc8_.isPlugin && _loc8_.name == "_MULTIPLE_" && !_loc8_.target.round)
                  {
                     _loc4_ = " " + _loc8_.target.overwriteProps.join(" ") + " ";
                     if(_loc4_.indexOf(" " + _loc3_ + " ") != -1)
                     {
                        _loc8_.target.round = true;
                     }
                  }
                  _loc8_ = _loc8_.nextNode;
               }
            }
         }
      }
      
      protected function insertPropTween(param1:Object, param2:String, param3:Number, param4:*, param5:String, param6:Boolean, param7:PropTween) : PropTween
      {
         var _loc9_:Array = null;
         var _loc10_:int = 0;
         var _loc8_:PropTween = new PropTween(param1,param2,param3,typeof param4 == "number" ? param4 - param3 : Number(param4),param5,param6,param7);
         if(param6 && param5 == "_MULTIPLE_")
         {
            _loc9_ = param1.overwriteProps;
            _loc10_ = int(_loc9_.length);
            while(--_loc10_ > -1)
            {
               this.propTweenLookup[_loc9_[_loc10_]] = _loc8_;
            }
         }
         else
         {
            this.propTweenLookup[param5] = _loc8_;
         }
         return _loc8_;
      }
      
      protected function removePropTween(param1:PropTween) : Boolean
      {
         if(param1.nextNode)
         {
            param1.nextNode.prevNode = param1.prevNode;
         }
         if(param1.prevNode)
         {
            param1.prevNode.nextNode = param1.nextNode;
         }
         else if(this.cachedPT1 == param1)
         {
            this.cachedPT1 = param1.nextNode;
         }
         if(param1.isPlugin && Boolean(param1.target.onDisable))
         {
            param1.target.onDisable();
            if(param1.target.activeDisable)
            {
               return true;
            }
         }
         return false;
      }
      
      override public function invalidate() : void
      {
         this.yoyo = Boolean(this.vars.yoyo == true);
         this._repeat = this.vars.repeat ? int(Number(this.vars.repeat)) : 0;
         this._repeatDelay = this.vars.repeatDelay ? Number(this.vars.repeatDelay) : 0;
         this._hasUpdateListener = false;
         if(this.vars.onCompleteListener != null || this.vars.onUpdateListener != null || this.vars.onStartListener != null)
         {
            this.initDispatcher();
         }
         setDirtyCache(true);
         super.invalidate();
      }
      
      public function updateTo(param1:Object, param2:Boolean = false) : void
      {
         var _loc4_:String = null;
         var _loc5_:Number = NaN;
         var _loc6_:PropTween = null;
         var _loc7_:Number = NaN;
         var _loc3_:Number = this.ratio;
         if(param2 && this.timeline != null && this.cachedStartTime < this.timeline.cachedTime)
         {
            this.cachedStartTime = this.timeline.cachedTime;
            this.setDirtyCache(false);
            if(this.gc)
            {
               this.setEnabled(true,false);
            }
            else
            {
               this.timeline.addChild(this);
            }
         }
         for(_loc4_ in param1)
         {
            this.vars[_loc4_] = param1[_loc4_];
         }
         if(this.initted)
         {
            this.initted = false;
            if(!param2)
            {
               this.init();
               if(!param2 && this.cachedTime > 0 && this.cachedTime < this.cachedDuration)
               {
                  _loc5_ = 1 / (1 - _loc3_);
                  _loc6_ = this.cachedPT1;
                  while(_loc6_)
                  {
                     _loc7_ = _loc6_.start + _loc6_.change;
                     _loc6_.change *= _loc5_;
                     _loc6_.start = _loc7_ - _loc6_.change;
                     _loc6_ = _loc6_.nextNode;
                  }
               }
            }
         }
      }
      
      public function setDestination(param1:String, param2:*, param3:Boolean = true) : void
      {
         var _loc4_:Object = {};
         _loc4_[param1] = param2;
         this.updateTo(_loc4_,!param3);
      }
      
      public function killProperties(param1:Array) : void
      {
         var _loc2_:Object = {};
         var _loc3_:int = int(param1.length);
         while(--_loc3_ > -1)
         {
            _loc2_[param1[_loc3_]] = true;
         }
         killVars(_loc2_);
      }
      
      override public function renderTime(param1:Number, param2:Boolean = false, param3:Boolean = false) : void
      {
         var _loc6_:Boolean = false;
         var _loc7_:Boolean = false;
         var _loc8_:Boolean = false;
         var _loc10_:Number = NaN;
         var _loc11_:int = 0;
         var _loc12_:Number = NaN;
         var _loc4_:Number = this.cacheIsDirty ? this.totalDuration : this.cachedTotalDuration;
         var _loc5_:Number = this.cachedTime;
         if(param1 >= _loc4_)
         {
            this.cachedTotalTime = _loc4_;
            this.cachedTime = this.cachedDuration;
            this.ratio = 1;
            _loc6_ = true;
            if(this.cachedDuration == 0)
            {
               if((param1 == 0 || _rawPrevTime < 0) && _rawPrevTime != param1)
               {
                  param3 = true;
               }
               _rawPrevTime = param1;
            }
         }
         else if(param1 <= 0)
         {
            if(param1 < 0)
            {
               this.active = false;
               if(this.cachedDuration == 0)
               {
                  if(_rawPrevTime > 0)
                  {
                     param3 = true;
                     _loc6_ = true;
                  }
                  _rawPrevTime = param1;
               }
            }
            this.cachedTotalTime = this.cachedTime = this.ratio = 0;
            if(this.cachedReversed && _loc5_ != 0)
            {
               _loc6_ = true;
            }
         }
         else
         {
            this.cachedTotalTime = this.cachedTime = param1;
            _loc8_ = true;
         }
         if(this._repeat != 0)
         {
            _loc10_ = this.cachedDuration + this._repeatDelay;
            if(_loc6_)
            {
               if(this.yoyo && Boolean(this._repeat % 2))
               {
                  this.cachedTime = this.ratio = 0;
               }
            }
            else if(param1 > 0)
            {
               if(this._cyclesComplete != (this._cyclesComplete = int(this.cachedTotalTime / _loc10_)))
               {
                  _loc7_ = true;
               }
               this.cachedTime = (this.cachedTotalTime / _loc10_ - this._cyclesComplete) * _loc10_;
               if(this.yoyo && Boolean(this._cyclesComplete % 2))
               {
                  this.cachedTime = this.cachedDuration - this.cachedTime;
               }
               else if(this.cachedTime >= this.cachedDuration)
               {
                  this.cachedTime = this.cachedDuration;
                  this.ratio = 1;
                  _loc8_ = false;
               }
               if(this.cachedTime <= 0)
               {
                  this.cachedTime = this.ratio = 0;
                  _loc8_ = false;
               }
            }
         }
         if(_loc5_ == this.cachedTime && !param3)
         {
            return;
         }
         if(!this.initted)
         {
            this.init();
         }
         if(!this.active && !this.cachedPaused)
         {
            this.active = true;
         }
         if(_loc8_)
         {
            if(this._easeType)
            {
               _loc11_ = int(this._easePower);
               _loc12_ = this.cachedTime / this.cachedDuration;
               if(this._easeType == 2)
               {
                  this.ratio = _loc12_ = 1 - _loc12_;
                  while(--_loc11_ > -1)
                  {
                     this.ratio = _loc12_ * this.ratio;
                  }
                  this.ratio = 1 - this.ratio;
               }
               else if(this._easeType == 1)
               {
                  this.ratio = _loc12_;
                  while(--_loc11_ > -1)
                  {
                     this.ratio = _loc12_ * this.ratio;
                  }
               }
               else if(_loc12_ < 0.5)
               {
                  this.ratio = _loc12_ = _loc12_ * 2;
                  while(--_loc11_ > -1)
                  {
                     this.ratio = _loc12_ * this.ratio;
                  }
                  this.ratio *= 0.5;
               }
               else
               {
                  this.ratio = _loc12_ = (1 - _loc12_) * 2;
                  while(--_loc11_ > -1)
                  {
                     this.ratio = _loc12_ * this.ratio;
                  }
                  this.ratio = 1 - 0.5 * this.ratio;
               }
            }
            else
            {
               this.ratio = _ease(this.cachedTime,0,1,this.cachedDuration);
            }
         }
         if(_loc5_ == 0 && this.cachedTotalTime != 0 && !param2)
         {
            if(this.vars.onStart)
            {
               this.vars.onStart.apply(null,this.vars.onStartParams);
            }
            if(this._dispatcher)
            {
               this._dispatcher.dispatchEvent(new TweenEvent(TweenEvent.START));
            }
         }
         var _loc9_:PropTween = this.cachedPT1;
         while(_loc9_)
         {
            _loc9_.target[_loc9_.property] = _loc9_.start + this.ratio * _loc9_.change;
            _loc9_ = _loc9_.nextNode;
         }
         if(_hasUpdate && !param2)
         {
            this.vars.onUpdate.apply(null,this.vars.onUpdateParams);
         }
         if(this._hasUpdateListener && !param2)
         {
            this._dispatcher.dispatchEvent(new TweenEvent(TweenEvent.UPDATE));
         }
         if(_loc6_)
         {
            if(_hasPlugins && Boolean(this.cachedPT1))
            {
               onPluginEvent("onComplete",this);
            }
            this.complete(true,param2);
         }
         else if(_loc7_ && !param2)
         {
            if(this.vars.onRepeat)
            {
               this.vars.onRepeat.apply(null,this.vars.onRepeatParams);
            }
            if(this._dispatcher)
            {
               this._dispatcher.dispatchEvent(new TweenEvent(TweenEvent.REPEAT));
            }
         }
      }
      
      override public function complete(param1:Boolean = false, param2:Boolean = false) : void
      {
         super.complete(param1,param2);
         if(!param2 && Boolean(this._dispatcher))
         {
            if(this.cachedTotalTime == this.cachedTotalDuration && !this.cachedReversed)
            {
               this._dispatcher.dispatchEvent(new TweenEvent(TweenEvent.COMPLETE));
            }
            else if(this.cachedReversed && this.cachedTotalTime == 0)
            {
               this._dispatcher.dispatchEvent(new TweenEvent(TweenEvent.REVERSE_COMPLETE));
            }
         }
      }
      
      protected function initDispatcher() : void
      {
         if(this._dispatcher == null)
         {
            this._dispatcher = new EventDispatcher(this);
         }
         if(this.vars.onInitListener is Function)
         {
            this._dispatcher.addEventListener(TweenEvent.INIT,this.vars.onInitListener,false,0,true);
         }
         if(this.vars.onStartListener is Function)
         {
            this._dispatcher.addEventListener(TweenEvent.START,this.vars.onStartListener,false,0,true);
         }
         if(this.vars.onUpdateListener is Function)
         {
            this._dispatcher.addEventListener(TweenEvent.UPDATE,this.vars.onUpdateListener,false,0,true);
            this._hasUpdateListener = true;
         }
         if(this.vars.onCompleteListener is Function)
         {
            this._dispatcher.addEventListener(TweenEvent.COMPLETE,this.vars.onCompleteListener,false,0,true);
         }
         if(this.vars.onRepeatListener is Function)
         {
            this._dispatcher.addEventListener(TweenEvent.REPEAT,this.vars.onRepeatListener,false,0,true);
         }
         if(this.vars.onReverseCompleteListener is Function)
         {
            this._dispatcher.addEventListener(TweenEvent.REVERSE_COMPLETE,this.vars.onReverseCompleteListener,false,0,true);
         }
      }
      
      public function addEventListener(param1:String, param2:Function, param3:Boolean = false, param4:int = 0, param5:Boolean = false) : void
      {
         if(this._dispatcher == null)
         {
            this.initDispatcher();
         }
         if(param1 == TweenEvent.UPDATE)
         {
            this._hasUpdateListener = true;
         }
         this._dispatcher.addEventListener(param1,param2,param3,param4,param5);
      }
      
      public function removeEventListener(param1:String, param2:Function, param3:Boolean = false) : void
      {
         if(this._dispatcher)
         {
            this._dispatcher.removeEventListener(param1,param2,param3);
         }
      }
      
      public function hasEventListener(param1:String) : Boolean
      {
         return this._dispatcher == null ? false : this._dispatcher.hasEventListener(param1);
      }
      
      public function willTrigger(param1:String) : Boolean
      {
         return this._dispatcher == null ? false : this._dispatcher.willTrigger(param1);
      }
      
      public function dispatchEvent(param1:Event) : Boolean
      {
         return this._dispatcher == null ? false : this._dispatcher.dispatchEvent(param1);
      }
      
      public function get currentProgress() : Number
      {
         return this.cachedTime / this.duration;
      }
      
      public function set currentProgress(param1:Number) : void
      {
         if(this._cyclesComplete == 0)
         {
            setTotalTime(this.duration * param1,false);
         }
         else
         {
            setTotalTime(this.duration * param1 + this._cyclesComplete * this.cachedDuration,false);
         }
      }
      
      public function get totalProgress() : Number
      {
         return this.cachedTotalTime / this.totalDuration;
      }
      
      public function set totalProgress(param1:Number) : void
      {
         setTotalTime(this.totalDuration * param1,false);
      }
      
      override public function set currentTime(param1:Number) : void
      {
         if(this._cyclesComplete != 0)
         {
            if(this.yoyo && this._cyclesComplete % 2 == 1)
            {
               param1 = this.duration - param1 + this._cyclesComplete * (this.cachedDuration + this._repeatDelay);
            }
            else
            {
               param1 += this._cyclesComplete * (this.duration + this._repeatDelay);
            }
         }
         setTotalTime(param1,false);
      }
      
      override public function get totalDuration() : Number
      {
         if(this.cacheIsDirty)
         {
            this.cachedTotalDuration = this._repeat == -1 ? 999999999999 : this.cachedDuration * (this._repeat + 1) + this._repeatDelay * this._repeat;
            this.cacheIsDirty = false;
         }
         return this.cachedTotalDuration;
      }
      
      override public function set totalDuration(param1:Number) : void
      {
         if(this._repeat == -1)
         {
            return;
         }
         this.duration = (param1 - this._repeat * this._repeatDelay) / (this._repeat + 1);
      }
      
      public function get timeScale() : Number
      {
         return this.cachedTimeScale;
      }
      
      public function set timeScale(param1:Number) : void
      {
         if(param1 == 0)
         {
            param1 = 0.0001;
         }
         var _loc2_:Number = Boolean(_pauseTime) || _pauseTime == 0 ? _pauseTime : this.timeline.cachedTotalTime;
         this.cachedStartTime = _loc2_ - (_loc2_ - this.cachedStartTime) * this.cachedTimeScale / param1;
         this.cachedTimeScale = param1;
         setDirtyCache(false);
      }
      
      public function get repeat() : int
      {
         return this._repeat;
      }
      
      public function set repeat(param1:int) : void
      {
         this._repeat = param1;
         setDirtyCache(true);
      }
      
      public function get repeatDelay() : Number
      {
         return this._repeatDelay;
      }
      
      public function set repeatDelay(param1:Number) : void
      {
         this._repeatDelay = param1;
         setDirtyCache(true);
      }
   }
}

package com.greensock.core
{
   public class PropTween
   {
      
      public var target:Object;
      
      public var property:String;
      
      public var start:Number;
      
      public var change:Number;
      
      public var name:String;
      
      public var priority:int;
      
      public var isPlugin:Boolean;
      
      public var nextNode:PropTween;
      
      public var prevNode:PropTween;
      
      public function PropTween(param1:Object, param2:String, param3:Number, param4:Number, param5:String, param6:Boolean, param7:PropTween = null, param8:int = 0)
      {
         super();
         this.target = param1;
         this.property = param2;
         this.start = param3;
         this.change = param4;
         this.name = param5;
         this.isPlugin = param6;
         if(param7)
         {
            param7.prevNode = this;
            this.nextNode = param7;
         }
         this.priority = param8;
      }
   }
}

package com.greensock.core
{
   public class SimpleTimeline extends TweenCore
   {
      
      protected var _firstChild:TweenCore;
      
      protected var _lastChild:TweenCore;
      
      public var autoRemoveChildren:Boolean;
      
      public function SimpleTimeline(param1:Object = null)
      {
         super(0,param1);
      }
      
      public function addChild(param1:TweenCore) : void
      {
         if(!param1.gc && Boolean(param1.timeline))
         {
            param1.timeline.remove(param1,true);
         }
         param1.timeline = this;
         if(param1.gc)
         {
            param1.setEnabled(true,true);
         }
         if(this._firstChild)
         {
            this._firstChild.prevNode = param1;
         }
         param1.nextNode = this._firstChild;
         this._firstChild = param1;
         param1.prevNode = null;
      }
      
      public function remove(param1:TweenCore, param2:Boolean = false) : void
      {
         if(param1.gc)
         {
            return;
         }
         if(!param2)
         {
            param1.setEnabled(false,true);
         }
         if(param1.nextNode)
         {
            param1.nextNode.prevNode = param1.prevNode;
         }
         else if(this._lastChild == param1)
         {
            this._lastChild = param1.prevNode;
         }
         if(param1.prevNode)
         {
            param1.prevNode.nextNode = param1.nextNode;
         }
         else if(this._firstChild == param1)
         {
            this._firstChild = param1.nextNode;
         }
      }
      
      override public function renderTime(param1:Number, param2:Boolean = false, param3:Boolean = false) : void
      {
         var _loc5_:Number = NaN;
         var _loc6_:TweenCore = null;
         var _loc4_:TweenCore = this._firstChild;
         this.cachedTotalTime = param1;
         this.cachedTime = param1;
         while(_loc4_)
         {
            _loc6_ = _loc4_.nextNode;
            if(_loc4_.active || param1 >= _loc4_.cachedStartTime && !_loc4_.cachedPaused && !_loc4_.gc)
            {
               if(!_loc4_.cachedReversed)
               {
                  _loc4_.renderTime((param1 - _loc4_.cachedStartTime) * _loc4_.cachedTimeScale,param2,false);
               }
               else
               {
                  _loc5_ = _loc4_.cacheIsDirty ? _loc4_.totalDuration : _loc4_.cachedTotalDuration;
                  _loc4_.renderTime(_loc5_ - (param1 - _loc4_.cachedStartTime) * _loc4_.cachedTimeScale,param2,false);
               }
            }
            _loc4_ = _loc6_;
         }
      }
      
      public function get rawTime() : Number
      {
         return this.cachedTotalTime;
      }
   }
}

package com.greensock.core
{
   import com.greensock.*;
   
   public class TweenCore
   {
      
      protected static var _classInitted:Boolean;
      
      public static const version:Number = 1.361;
      
      protected var _delay:Number;
      
      protected var _hasUpdate:Boolean;
      
      protected var _rawPrevTime:Number = -1;
      
      protected var _pauseTime:Number;
      
      public var vars:Object;
      
      public var active:Boolean;
      
      public var gc:Boolean;
      
      public var initted:Boolean;
      
      public var timeline:SimpleTimeline;
      
      public var cachedStartTime:Number;
      
      public var cachedTime:Number;
      
      public var cachedTotalTime:Number;
      
      public var cachedDuration:Number;
      
      public var cachedTotalDuration:Number;
      
      public var cachedTimeScale:Number;
      
      public var cachedReversed:Boolean;
      
      public var nextNode:TweenCore;
      
      public var prevNode:TweenCore;
      
      public var cacheIsDirty:Boolean;
      
      public var cachedPaused:Boolean;
      
      public var data:*;
      
      public function TweenCore(param1:Number = 0, param2:Object = null)
      {
         super();
         this.vars = param2 != null ? param2 : {};
         this.cachedDuration = this.cachedTotalDuration = param1;
         this._delay = this.vars.delay ? Number(this.vars.delay) : 0;
         this.cachedTimeScale = this.vars.timeScale ? Number(this.vars.timeScale) : 1;
         this.active = Boolean(param1 == 0 && this._delay == 0 && this.vars.immediateRender != false);
         this.cachedTotalTime = this.cachedTime = 0;
         this.data = this.vars.data;
         if(!_classInitted)
         {
            if(!isNaN(TweenLite.rootFrame))
            {
               return;
            }
            TweenLite.initClass();
            _classInitted = true;
         }
         var _loc3_:SimpleTimeline = this.vars.timeline is SimpleTimeline ? this.vars.timeline : (this.vars.useFrames ? TweenLite.rootFramesTimeline : TweenLite.rootTimeline);
         this.cachedStartTime = _loc3_.cachedTotalTime + this._delay;
         _loc3_.addChild(this);
         if(this.vars.reversed)
         {
            this.cachedReversed = true;
         }
         if(this.vars.paused)
         {
            this.paused = true;
         }
      }
      
      public function play() : void
      {
         this.reversed = false;
         this.paused = false;
      }
      
      public function pause() : void
      {
         this.paused = true;
      }
      
      public function resume() : void
      {
         this.paused = false;
      }
      
      public function restart(param1:Boolean = false, param2:Boolean = true) : void
      {
         this.reversed = false;
         this.paused = false;
         this.setTotalTime(param1 ? -this._delay : 0,param2);
      }
      
      public function reverse(param1:Boolean = true) : void
      {
         this.reversed = true;
         if(param1)
         {
            this.paused = false;
         }
         else if(this.gc)
         {
            this.setEnabled(true,false);
         }
      }
      
      public function renderTime(param1:Number, param2:Boolean = false, param3:Boolean = false) : void
      {
      }
      
      public function complete(param1:Boolean = false, param2:Boolean = false) : void
      {
         if(!param1)
         {
            this.renderTime(this.totalDuration,param2,false);
            return;
         }
         if(this.timeline.autoRemoveChildren)
         {
            this.setEnabled(false,false);
         }
         else
         {
            this.active = false;
         }
         if(!param2)
         {
            if(this.vars.onComplete && this.cachedTotalTime == this.cachedTotalDuration && !this.cachedReversed)
            {
               this.vars.onComplete.apply(null,this.vars.onCompleteParams);
            }
            else if(this.cachedReversed && this.cachedTotalTime == 0 && Boolean(this.vars.onReverseComplete))
            {
               this.vars.onReverseComplete.apply(null,this.vars.onReverseCompleteParams);
            }
         }
      }
      
      public function invalidate() : void
      {
      }
      
      public function setEnabled(param1:Boolean, param2:Boolean = false) : Boolean
      {
         if(param1)
         {
            this.active = Boolean(!this.cachedPaused && this.cachedTotalTime > 0 && this.cachedTotalTime < this.cachedTotalDuration);
            if(!param2 && this.gc)
            {
               this.timeline.addChild(this);
            }
         }
         else
         {
            this.active = false;
            if(!param2)
            {
               this.timeline.remove(this,true);
            }
         }
         this.gc = !param1;
         return false;
      }
      
      public function kill() : void
      {
         this.setEnabled(false,false);
      }
      
      protected function setDirtyCache(param1:Boolean = true) : void
      {
         var _loc2_:TweenCore = param1 ? this : this.timeline;
         while(_loc2_)
         {
            _loc2_.cacheIsDirty = true;
            _loc2_ = _loc2_.timeline;
         }
      }
      
      protected function setTotalTime(param1:Number, param2:Boolean = false) : void
      {
         var _loc3_:Number = NaN;
         var _loc4_:Number = NaN;
         if(this.timeline)
         {
            _loc3_ = Boolean(this._pauseTime) || this._pauseTime == 0 ? this._pauseTime : this.timeline.cachedTotalTime;
            if(this.cachedReversed)
            {
               _loc4_ = this.cacheIsDirty ? this.totalDuration : this.cachedTotalDuration;
               this.cachedStartTime = _loc3_ - (_loc4_ - param1) / this.cachedTimeScale;
            }
            else
            {
               this.cachedStartTime = _loc3_ - param1 / this.cachedTimeScale;
            }
            if(!this.timeline.cacheIsDirty)
            {
               this.setDirtyCache(false);
            }
            if(this.cachedTotalTime != param1)
            {
               this.renderTime(param1,param2,false);
            }
         }
      }
      
      public function get delay() : Number
      {
         return this._delay;
      }
      
      public function set delay(param1:Number) : void
      {
         this.startTime += param1 - this._delay;
         this._delay = param1;
      }
      
      public function get duration() : Number
      {
         return this.cachedDuration;
      }
      
      public function set duration(param1:Number) : void
      {
         this.cachedDuration = this.cachedTotalDuration = param1;
         this.setDirtyCache(false);
      }
      
      public function get totalDuration() : Number
      {
         return this.cachedTotalDuration;
      }
      
      public function set totalDuration(param1:Number) : void
      {
         this.duration = param1;
      }
      
      public function get currentTime() : Number
      {
         return this.cachedTime;
      }
      
      public function set currentTime(param1:Number) : void
      {
         this.setTotalTime(param1,false);
      }
      
      public function get totalTime() : Number
      {
         return this.cachedTotalTime;
      }
      
      public function set totalTime(param1:Number) : void
      {
         this.setTotalTime(param1,false);
      }
      
      public function get startTime() : Number
      {
         return this.cachedStartTime;
      }
      
      public function set startTime(param1:Number) : void
      {
         var _loc2_:Boolean = Boolean(this.timeline != null && (param1 != this.cachedStartTime || this.gc));
         this.cachedStartTime = param1;
         if(_loc2_)
         {
            this.timeline.addChild(this);
         }
      }
      
      public function get reversed() : Boolean
      {
         return this.cachedReversed;
      }
      
      public function set reversed(param1:Boolean) : void
      {
         if(param1 != this.cachedReversed)
         {
            this.cachedReversed = param1;
            this.setTotalTime(this.cachedTotalTime,true);
         }
      }
      
      public function get paused() : Boolean
      {
         return this.cachedPaused;
      }
      
      public function set paused(param1:Boolean) : void
      {
         if(param1 != this.cachedPaused && Boolean(this.timeline))
         {
            if(param1)
            {
               this._pauseTime = this.timeline.rawTime;
            }
            else
            {
               this.cachedStartTime += this.timeline.rawTime - this._pauseTime;
               this._pauseTime = NaN;
               this.setDirtyCache(false);
            }
            this.cachedPaused = param1;
            this.active = Boolean(!this.cachedPaused && this.cachedTotalTime > 0 && this.cachedTotalTime < this.cachedTotalDuration);
         }
         if(!param1 && this.gc)
         {
            this.setTotalTime(this.cachedTotalTime,false);
            this.setEnabled(true,false);
         }
      }
   }
}

package com.greensock.easing
{
   public class Back
   {
      
      public function Back()
      {
         super();
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number = 1.70158) : Number
      {
         return param3 * (param1 = param1 / param4) * param1 * ((param5 + 1) * param1 - param5) + param2;
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number = 1.70158) : Number
      {
         return param3 * ((param1 = param1 / param4 - 1) * param1 * ((param5 + 1) * param1 + param5) + 1) + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number = 1.70158) : Number
      {
         param1 = param1 / (param4 * 0.5);
         if(param1 < 1)
         {
            return param3 * 0.5 * (param1 * param1 * (((param5 = param5 * 1.525) + 1) * param1 - param5)) + param2;
         }
         return param3 / 2 * ((param1 = param1 - 2) * param1 * (((param5 = param5 * 1.525) + 1) * param1 + param5) + 2) + param2;
      }
   }
}

package com.greensock.easing
{
   public class Bounce
   {
      
      public function Bounce()
      {
         super();
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         param1 = param1 / param4;
         if(param1 < 1 / 2.75)
         {
            return param3 * (7.5625 * param1 * param1) + param2;
         }
         if(param1 < 2 / 2.75)
         {
            return param3 * (7.5625 * (param1 = param1 - 1.5 / 2.75) * param1 + 0.75) + param2;
         }
         if(param1 < 2.5 / 2.75)
         {
            return param3 * (7.5625 * (param1 = param1 - 2.25 / 2.75) * param1 + 0.9375) + param2;
         }
         return param3 * (7.5625 * (param1 = param1 - 2.625 / 2.75) * param1 + 0.984375) + param2;
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 - easeOut(param4 - param1,0,param3,param4) + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         if(param1 < param4 * 0.5)
         {
            return easeIn(param1 * 2,0,param3,param4) * 0.5 + param2;
         }
         return easeOut(param1 * 2 - param4,0,param3,param4) * 0.5 + param3 * 0.5 + param2;
      }
   }
}

package com.greensock.easing
{
   public class Cubic
   {
      
      public static const power:uint = 2;
      
      public function Cubic()
      {
         super();
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * (param1 = param1 / param4) * param1 * param1 + param2;
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * ((param1 = param1 / param4 - 1) * param1 * param1 + 1) + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         param1 = param1 / (param4 * 0.5);
         if(param1 < 1)
         {
            return param3 * 0.5 * param1 * param1 * param1 + param2;
         }
         return param3 * 0.5 * ((param1 = param1 - 2) * param1 * param1 + 2) + param2;
      }
   }
}

package com.greensock.easing
{
   public class Elastic
   {
      
      private static const _2PI:Number = Math.PI * 2;
      
      public function Elastic()
      {
         super();
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number = 0, param6:Number = 0) : Number
      {
         var _loc7_:Number = NaN;
         if(param1 == 0)
         {
            return param2;
         }
         param1 = param1 / param4;
         if(param1 == 1)
         {
            return param2 + param3;
         }
         if(!param6)
         {
            param6 = param4 * 0.3;
         }
         if(!param5 || param3 > 0 && param5 < param3 || param3 < 0 && param5 < -param3)
         {
            param5 = param3;
            _loc7_ = param6 / 4;
         }
         else
         {
            _loc7_ = param6 / _2PI * Math.asin(param3 / param5);
         }
         return -(param5 * Math.pow(2,10 * (param1 = param1 - 1)) * Math.sin((param1 * param4 - _loc7_) * _2PI / param6)) + param2;
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number = 0, param6:Number = 0) : Number
      {
         var _loc7_:Number = NaN;
         if(param1 == 0)
         {
            return param2;
         }
         param1 = param1 / param4;
         if(param1 == 1)
         {
            return param2 + param3;
         }
         if(!param6)
         {
            param6 = param4 * 0.3;
         }
         if(!param5 || param3 > 0 && param5 < param3 || param3 < 0 && param5 < -param3)
         {
            param5 = param3;
            _loc7_ = param6 / 4;
         }
         else
         {
            _loc7_ = param6 / _2PI * Math.asin(param3 / param5);
         }
         return param5 * Math.pow(2,-10 * param1) * Math.sin((param1 * param4 - _loc7_) * _2PI / param6) + param3 + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number = 0, param6:Number = 0) : Number
      {
         var _loc7_:Number = NaN;
         if(param1 == 0)
         {
            return param2;
         }
         param1 = param1 / (param4 * 0.5);
         if(param1 == 2)
         {
            return param2 + param3;
         }
         if(!param6)
         {
            param6 = param4 * (0.3 * 1.5);
         }
         if(!param5 || param3 > 0 && param5 < param3 || param3 < 0 && param5 < -param3)
         {
            param5 = param3;
            _loc7_ = param6 / 4;
         }
         else
         {
            _loc7_ = param6 / _2PI * Math.asin(param3 / param5);
         }
         if(param1 < 1)
         {
            return -0.5 * (param5 * Math.pow(2,10 * (param1 = param1 - 1)) * Math.sin((param1 * param4 - _loc7_) * _2PI / param6)) + param2;
         }
         return param5 * Math.pow(2,-10 * (param1 = param1 - 1)) * Math.sin((param1 * param4 - _loc7_) * _2PI / param6) * 0.5 + param3 + param2;
      }
   }
}

package com.greensock.easing
{
   public class Expo
   {
      
      public function Expo()
      {
         super();
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param1 == 0 ? param2 : param3 * Math.pow(2,10 * (param1 / param4 - 1)) + param2 - param3 * 0.001;
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param1 == param4 ? param2 + param3 : param3 * (-Math.pow(2,-10 * param1 / param4) + 1) + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         if(param1 == 0)
         {
            return param2;
         }
         if(param1 == param4)
         {
            return param2 + param3;
         }
         param1 = param1 / (param4 * 0.5);
         if(param1 < 1)
         {
            return param3 * 0.5 * Math.pow(2,10 * (param1 - 1)) + param2;
         }
         return param3 * 0.5 * (-Math.pow(2,-10 * --param1) + 2) + param2;
      }
   }
}

package com.greensock.easing
{
   public class Linear
   {
      
      public static const power:uint = 0;
      
      public function Linear()
      {
         super();
      }
      
      public static function easeNone(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * param1 / param4 + param2;
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * param1 / param4 + param2;
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * param1 / param4 + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * param1 / param4 + param2;
      }
   }
}

package com.greensock.easing
{
   public class Quad
   {
      
      public static const power:uint = 1;
      
      public function Quad()
      {
         super();
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * (param1 = param1 / param4) * param1 + param2;
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return -param3 * (param1 = param1 / param4) * (param1 - 2) + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         param1 = param1 / (param4 * 0.5);
         if(param1 < 1)
         {
            return param3 * 0.5 * param1 * param1 + param2;
         }
         return -param3 * 0.5 * (--param1 * (param1 - 2) - 1) + param2;
      }
   }
}

package com.greensock.easing
{
   public class Quart
   {
      
      public static const power:uint = 3;
      
      public function Quart()
      {
         super();
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * (param1 = param1 / param4) * param1 * param1 * param1 + param2;
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return -param3 * ((param1 = param1 / param4 - 1) * param1 * param1 * param1 - 1) + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         param1 = param1 / (param4 * 0.5);
         if(param1 < 1)
         {
            return param3 * 0.5 * param1 * param1 * param1 * param1 + param2;
         }
         return -param3 * 0.5 * ((param1 = param1 - 2) * param1 * param1 * param1 - 2) + param2;
      }
   }
}

package com.greensock.easing
{
   public class Quint
   {
      
      public static const power:uint = 4;
      
      public function Quint()
      {
         super();
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * (param1 = param1 / param4) * param1 * param1 * param1 * param1 + param2;
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * ((param1 = param1 / param4 - 1) * param1 * param1 * param1 * param1 + 1) + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         param1 = param1 / (param4 * 0.5);
         if(param1 < 1)
         {
            return param3 * 0.5 * param1 * param1 * param1 * param1 * param1 + param2;
         }
         return param3 * 0.5 * ((param1 = param1 - 2) * param1 * param1 * param1 * param1 + 2) + param2;
      }
   }
}

package com.greensock.easing
{
   public class Sine
   {
      
      private static const _HALF_PI:Number = Math.PI * 0.5;
      
      public function Sine()
      {
         super();
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return -param3 * Math.cos(param1 / param4 * _HALF_PI) + param3 + param2;
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * Math.sin(param1 / param4 * _HALF_PI) + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return -param3 * 0.5 * (Math.cos(Math.PI * param1 / param4) - 1) + param2;
      }
   }
}

package com.greensock.easing
{
   public class Strong
   {
      
      public static const power:uint = 4;
      
      public function Strong()
      {
         super();
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * (param1 = param1 / param4) * param1 * param1 * param1 * param1 + param2;
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * ((param1 = param1 / param4 - 1) * param1 * param1 * param1 * param1 + 1) + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         param1 = param1 / (param4 * 0.5);
         if(param1 < 1)
         {
            return param3 * 0.5 * param1 * param1 * param1 * param1 * param1 + param2;
         }
         return param3 * 0.5 * ((param1 = param1 - 2) * param1 * param1 * param1 * param1 + 2) + param2;
      }
   }
}

package com.greensock.events
{
   import flash.events.Event;
   
   public class TweenEvent extends Event
   {
      
      public static const VERSION:Number = 1.1;
      
      public static const START:String = "start";
      
      public static const UPDATE:String = "change";
      
      public static const COMPLETE:String = "complete";
      
      public static const REVERSE_COMPLETE:String = "reverseComplete";
      
      public static const REPEAT:String = "repeat";
      
      public static const INIT:String = "init";
      
      public function TweenEvent(param1:String, param2:Boolean = false, param3:Boolean = false)
      {
         super(param1,param2,param3);
      }
      
      override public function clone() : Event
      {
         return new TweenEvent(this.type,this.bubbles,this.cancelable);
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   import flash.filters.*;
   
   public class BevelFilterPlugin extends FilterPlugin
   {
      
      public static const API:Number = 1;
      
      private static var _propNames:Array = ["distance","angle","highlightColor","highlightAlpha","shadowColor","shadowAlpha","blurX","blurY","strength","quality"];
      
      public function BevelFilterPlugin()
      {
         super();
         this.propName = "bevelFilter";
         this.overwriteProps = ["bevelFilter"];
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         _target = param1;
         _type = BevelFilter;
         initFilter(param2,new BevelFilter(0,0,16777215,0.5,0,0.5,2,2,0,int(param2.quality) || 2),_propNames);
         return true;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import com.greensock.core.*;
   
   public class BezierPlugin extends TweenPlugin
   {
      
      public static const API:Number = 1;
      
      protected static const _RAD2DEG:Number = 180 / Math.PI;
      
      protected var _target:Object;
      
      protected var _orientData:Array;
      
      protected var _orient:Boolean;
      
      protected var _future:Object = {};
      
      protected var _beziers:Object;
      
      public function BezierPlugin()
      {
         super();
         this.propName = "bezier";
         this.overwriteProps = [];
      }
      
      public static function parseBeziers(param1:Object, param2:Boolean = false) : Object
      {
         var _loc3_:int = 0;
         var _loc4_:Array = null;
         var _loc5_:Object = null;
         var _loc6_:String = null;
         var _loc7_:Object = {};
         if(param2)
         {
            for(_loc6_ in param1)
            {
               _loc4_ = param1[_loc6_];
               _loc7_[_loc6_] = _loc5_ = [];
               if(_loc4_.length > 2)
               {
                  _loc5_[_loc5_.length] = [_loc4_[0],_loc4_[1] - (_loc4_[2] - _loc4_[0]) / 4,_loc4_[1]];
                  _loc3_ = 1;
                  while(_loc3_ < _loc4_.length - 1)
                  {
                     _loc5_[_loc5_.length] = [_loc4_[_loc3_],_loc4_[_loc3_] + (_loc4_[_loc3_] - _loc5_[_loc3_ - 1][1]),_loc4_[_loc3_ + 1]];
                     _loc3_++;
                  }
               }
               else
               {
                  _loc5_[_loc5_.length] = [_loc4_[0],(_loc4_[0] + _loc4_[1]) / 2,_loc4_[1]];
               }
            }
         }
         else
         {
            for(_loc6_ in param1)
            {
               _loc4_ = param1[_loc6_];
               _loc7_[_loc6_] = _loc5_ = [];
               if(_loc4_.length > 3)
               {
                  _loc5_[_loc5_.length] = [_loc4_[0],_loc4_[1],(_loc4_[1] + _loc4_[2]) / 2];
                  _loc3_ = 2;
                  while(_loc3_ < _loc4_.length - 2)
                  {
                     _loc5_[_loc5_.length] = [_loc5_[_loc3_ - 2][2],_loc4_[_loc3_],(_loc4_[_loc3_] + _loc4_[_loc3_ + 1]) / 2];
                     _loc3_++;
                  }
                  _loc5_[_loc5_.length] = [_loc5_[_loc5_.length - 1][2],_loc4_[_loc4_.length - 2],_loc4_[_loc4_.length - 1]];
               }
               else if(_loc4_.length == 3)
               {
                  _loc5_[_loc5_.length] = [_loc4_[0],_loc4_[1],_loc4_[2]];
               }
               else if(_loc4_.length == 2)
               {
                  _loc5_[_loc5_.length] = [_loc4_[0],(_loc4_[0] + _loc4_[1]) / 2,_loc4_[1]];
               }
            }
         }
         return _loc7_;
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         if(!(param2 is Array))
         {
            return false;
         }
         this.init(param3,param2 as Array,false);
         return true;
      }
      
      protected function init(param1:TweenLite, param2:Array, param3:Boolean) : void
      {
         var _loc6_:int = 0;
         var _loc7_:String = null;
         var _loc8_:Object = null;
         this._target = param1.target;
         var _loc4_:Object = param1.vars.isTV == true ? param1.vars.exposedVars : param1.vars;
         if(_loc4_.orientToBezier == true)
         {
            this._orientData = [["x","y","rotation",0,0.01]];
            this._orient = true;
         }
         else if(_loc4_.orientToBezier is Array)
         {
            this._orientData = _loc4_.orientToBezier;
            this._orient = true;
         }
         var _loc5_:Object = {};
         _loc6_ = 0;
         while(_loc6_ < param2.length)
         {
            for(_loc7_ in param2[_loc6_])
            {
               if(_loc5_[_loc7_] == undefined)
               {
                  _loc5_[_loc7_] = [param1.target[_loc7_]];
               }
               if(typeof param2[_loc6_][_loc7_] == "number")
               {
                  _loc5_[_loc7_].push(param2[_loc6_][_loc7_]);
               }
               else
               {
                  _loc5_[_loc7_].push(param1.target[_loc7_] + Number(param2[_loc6_][_loc7_]));
               }
            }
            _loc6_++;
         }
         for(_loc7_ in _loc5_)
         {
            this.overwriteProps[this.overwriteProps.length] = _loc7_;
            if(_loc4_[_loc7_] != undefined)
            {
               if(typeof _loc4_[_loc7_] == "number")
               {
                  _loc5_[_loc7_].push(_loc4_[_loc7_]);
               }
               else
               {
                  _loc5_[_loc7_].push(param1.target[_loc7_] + Number(_loc4_[_loc7_]));
               }
               _loc8_ = {};
               _loc8_[_loc7_] = true;
               param1.killVars(_loc8_,false);
               delete _loc4_[_loc7_];
            }
         }
         this._beziers = parseBeziers(_loc5_,param3);
      }
      
      override public function killProps(param1:Object) : void
      {
         var _loc2_:String = null;
         for(_loc2_ in this._beziers)
         {
            if(_loc2_ in param1)
            {
               delete this._beziers[_loc2_];
            }
         }
         super.killProps(param1);
      }
      
      override public function set changeFactor(param1:Number) : void
      {
         var _loc2_:int = 0;
         var _loc3_:String = null;
         var _loc4_:Object = null;
         var _loc5_:Number = NaN;
         var _loc6_:uint = 0;
         var _loc7_:Number = NaN;
         var _loc8_:Object = null;
         var _loc9_:Number = NaN;
         var _loc10_:Number = NaN;
         var _loc11_:Array = null;
         var _loc12_:Number = NaN;
         var _loc13_:Object = null;
         var _loc14_:Boolean = false;
         if(param1 == 1)
         {
            for(_loc3_ in this._beziers)
            {
               _loc2_ = this._beziers[_loc3_].length - 1;
               this._target[_loc3_] = this._beziers[_loc3_][_loc2_][2];
            }
         }
         else
         {
            for(_loc3_ in this._beziers)
            {
               _loc6_ = uint(this._beziers[_loc3_].length);
               if(param1 < 0)
               {
                  _loc2_ = 0;
               }
               else if(param1 >= 1)
               {
                  _loc2_ = int(_loc6_ - 1);
               }
               else
               {
                  _loc2_ = int(_loc6_ * param1);
               }
               _loc5_ = (param1 - _loc2_ * (1 / _loc6_)) * _loc6_;
               _loc4_ = this._beziers[_loc3_][_loc2_];
               if(this.round)
               {
                  _loc7_ = _loc4_[0] + _loc5_ * (2 * (1 - _loc5_) * (_loc4_[1] - _loc4_[0]) + _loc5_ * (_loc4_[2] - _loc4_[0]));
                  this._target[_loc3_] = _loc7_ > 0 ? int(_loc7_ + 0.5) : int(_loc7_ - 0.5);
               }
               else
               {
                  this._target[_loc3_] = _loc4_[0] + _loc5_ * (2 * (1 - _loc5_) * (_loc4_[1] - _loc4_[0]) + _loc5_ * (_loc4_[2] - _loc4_[0]));
               }
            }
         }
         if(this._orient)
         {
            _loc2_ = int(this._orientData.length);
            _loc8_ = {};
            while(_loc2_--)
            {
               _loc11_ = this._orientData[_loc2_];
               _loc8_[_loc11_[0]] = this._target[_loc11_[0]];
               _loc8_[_loc11_[1]] = this._target[_loc11_[1]];
            }
            _loc13_ = this._target;
            _loc14_ = this.round;
            this._target = this._future;
            this.round = false;
            this._orient = false;
            _loc2_ = int(this._orientData.length);
            while(_loc2_--)
            {
               _loc11_ = this._orientData[_loc2_];
               this.changeFactor = param1 + (_loc11_[4] || 0.01);
               _loc12_ = Number(Number(_loc11_[3]) || 0);
               _loc9_ = this._future[_loc11_[0]] - _loc8_[_loc11_[0]];
               _loc10_ = this._future[_loc11_[1]] - _loc8_[_loc11_[1]];
               _loc13_[_loc11_[2]] = Math.atan2(_loc10_,_loc9_) * _RAD2DEG + _loc12_;
            }
            this._target = _loc13_;
            this.round = _loc14_;
            this._orient = true;
         }
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.TweenLite;
   
   public class BezierThroughPlugin extends BezierPlugin
   {
      
      public static const API:Number = 1;
      
      public function BezierThroughPlugin()
      {
         super();
         this.propName = "bezierThrough";
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         if(!(param2 is Array))
         {
            return false;
         }
         init(param3,param2 as Array,true);
         return true;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   import flash.filters.*;
   
   public class BlurFilterPlugin extends FilterPlugin
   {
      
      public static const API:Number = 1;
      
      private static var _propNames:Array = ["blurX","blurY","quality"];
      
      public function BlurFilterPlugin()
      {
         super();
         this.propName = "blurFilter";
         this.overwriteProps = ["blurFilter"];
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         _target = param1;
         _type = BlurFilter;
         initFilter(param2,new BlurFilter(0,0,int(param2.quality) || 2),_propNames);
         return true;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   import flash.filters.*;
   
   public class ColorMatrixFilterPlugin extends FilterPlugin
   {
      
      public static const API:Number = 1;
      
      private static var _propNames:Array = [];
      
      protected static var _idMatrix:Array = [1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];
      
      protected static var _lumR:Number = 0.212671;
      
      protected static var _lumG:Number = 0.71516;
      
      protected static var _lumB:Number = 0.072169;
      
      protected var _matrix:Array;
      
      protected var _matrixTween:EndArrayPlugin;
      
      public function ColorMatrixFilterPlugin()
      {
         super();
         this.propName = "colorMatrixFilter";
         this.overwriteProps = ["colorMatrixFilter"];
      }
      
      public static function colorize(param1:Array, param2:Number, param3:Number = 1) : Array
      {
         if(isNaN(param2))
         {
            return param1;
         }
         if(isNaN(param3))
         {
            param3 = 1;
         }
         var _loc4_:Number = (param2 >> 16 & 0xFF) / 255;
         var _loc5_:Number = (param2 >> 8 & 0xFF) / 255;
         var _loc6_:Number = (param2 & 0xFF) / 255;
         var _loc7_:Number = 1 - param3;
         var _loc8_:Array = [_loc7_ + param3 * _loc4_ * _lumR,param3 * _loc4_ * _lumG,param3 * _loc4_ * _lumB,0,0,param3 * _loc5_ * _lumR,_loc7_ + param3 * _loc5_ * _lumG,param3 * _loc5_ * _lumB,0,0,param3 * _loc6_ * _lumR,param3 * _loc6_ * _lumG,_loc7_ + param3 * _loc6_ * _lumB,0,0,0,0,0,1,0];
         return applyMatrix(_loc8_,param1);
      }
      
      public static function setThreshold(param1:Array, param2:Number) : Array
      {
         if(isNaN(param2))
         {
            return param1;
         }
         var _loc3_:Array = [_lumR * 256,_lumG * 256,_lumB * 256,0,-256 * param2,_lumR * 256,_lumG * 256,_lumB * 256,0,-256 * param2,_lumR * 256,_lumG * 256,_lumB * 256,0,-256 * param2,0,0,0,1,0];
         return applyMatrix(_loc3_,param1);
      }
      
      public static function setHue(param1:Array, param2:Number) : Array
      {
         if(isNaN(param2))
         {
            return param1;
         }
         param2 *= Math.PI / 180;
         var _loc3_:Number = Math.cos(param2);
         var _loc4_:Number = Math.sin(param2);
         var _loc5_:Array = [_lumR + _loc3_ * (1 - _lumR) + _loc4_ * -_lumR,_lumG + _loc3_ * -_lumG + _loc4_ * -_lumG,_lumB + _loc3_ * -_lumB + _loc4_ * (1 - _lumB),0,0,_lumR + _loc3_ * -_lumR + _loc4_ * 0.143,_lumG + _loc3_ * (1 - _lumG) + _loc4_ * 0.14,_lumB + _loc3_ * -_lumB + _loc4_ * -0.283,0,0,_lumR + _loc3_ * -_lumR + _loc4_ * -(1 - _lumR),_lumG + _loc3_ * -_lumG + _loc4_ * _lumG,_lumB + _loc3_ * (1 - _lumB) + _loc4_ * _lumB,0,0,0,0,0,1,0,0,0,0,0,1];
         return applyMatrix(_loc5_,param1);
      }
      
      public static function setBrightness(param1:Array, param2:Number) : Array
      {
         if(isNaN(param2))
         {
            return param1;
         }
         param2 = param2 * 100 - 100;
         return applyMatrix([1,0,0,0,param2,0,1,0,0,param2,0,0,1,0,param2,0,0,0,1,0,0,0,0,0,1],param1);
      }
      
      public static function setSaturation(param1:Array, param2:Number) : Array
      {
         if(isNaN(param2))
         {
            return param1;
         }
         var _loc3_:Number = 1 - param2;
         var _loc4_:Number = _loc3_ * _lumR;
         var _loc5_:Number = _loc3_ * _lumG;
         var _loc6_:Number = _loc3_ * _lumB;
         var _loc7_:Array = [_loc4_ + param2,_loc5_,_loc6_,0,0,_loc4_,_loc5_ + param2,_loc6_,0,0,_loc4_,_loc5_,_loc6_ + param2,0,0,0,0,0,1,0];
         return applyMatrix(_loc7_,param1);
      }
      
      public static function setContrast(param1:Array, param2:Number) : Array
      {
         if(isNaN(param2))
         {
            return param1;
         }
         param2 += 0.01;
         var _loc3_:Array = [param2,0,0,0,128 * (1 - param2),0,param2,0,0,128 * (1 - param2),0,0,param2,0,128 * (1 - param2),0,0,0,1,0];
         return applyMatrix(_loc3_,param1);
      }
      
      public static function applyMatrix(param1:Array, param2:Array) : Array
      {
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         if(!(param1 is Array) || !(param2 is Array))
         {
            return param2;
         }
         var _loc3_:Array = [];
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         _loc6_ = 0;
         while(_loc6_ < 4)
         {
            _loc7_ = 0;
            while(_loc7_ < 5)
            {
               if(_loc7_ == 4)
               {
                  _loc5_ = int(param1[_loc4_ + 4]);
               }
               else
               {
                  _loc5_ = 0;
               }
               _loc3_[_loc4_ + _loc7_] = param1[_loc4_] * param2[_loc7_] + param1[_loc4_ + 1] * param2[_loc7_ + 5] + param1[_loc4_ + 2] * param2[_loc7_ + 10] + param1[_loc4_ + 3] * param2[_loc7_ + 15] + _loc5_;
               _loc7_++;
            }
            _loc4_ += 5;
            _loc6_++;
         }
         return _loc3_;
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         _target = param1;
         _type = ColorMatrixFilter;
         var _loc4_:Object = param2;
         initFilter({
            "remove":param2.remove,
            "index":param2.index,
            "addFilter":param2.addFilter
         },new ColorMatrixFilter(_idMatrix.slice()),_propNames);
         this._matrix = ColorMatrixFilter(_filter).matrix;
         var _loc5_:Array = [];
         if(_loc4_.matrix != null && _loc4_.matrix is Array)
         {
            _loc5_ = _loc4_.matrix;
         }
         else
         {
            if(_loc4_.relative == true)
            {
               _loc5_ = this._matrix.slice();
            }
            else
            {
               _loc5_ = _idMatrix.slice();
            }
            _loc5_ = setBrightness(_loc5_,_loc4_.brightness);
            _loc5_ = setContrast(_loc5_,_loc4_.contrast);
            _loc5_ = setHue(_loc5_,_loc4_.hue);
            _loc5_ = setSaturation(_loc5_,_loc4_.saturation);
            _loc5_ = setThreshold(_loc5_,_loc4_.threshold);
            if(!isNaN(_loc4_.colorize))
            {
               _loc5_ = colorize(_loc5_,_loc4_.colorize,_loc4_.amount);
            }
         }
         this._matrixTween = new EndArrayPlugin();
         this._matrixTween.init(this._matrix,_loc5_);
         return true;
      }
      
      override public function set changeFactor(param1:Number) : void
      {
         this._matrixTween.changeFactor = param1;
         ColorMatrixFilter(_filter).matrix = this._matrix;
         super.changeFactor = param1;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   import flash.geom.ColorTransform;
   
   public class ColorTransformPlugin extends TintPlugin
   {
      
      public static const API:Number = 1;
      
      public function ColorTransformPlugin()
      {
         super();
         this.propName = "colorTransform";
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         var _loc5_:String = null;
         var _loc6_:Number = NaN;
         if(!(param1 is DisplayObject))
         {
            return false;
         }
         var _loc4_:ColorTransform = param1.transform.colorTransform;
         for(_loc5_ in param2)
         {
            if(_loc5_ == "tint" || _loc5_ == "color")
            {
               if(param2[_loc5_] != null)
               {
                  _loc4_.color = int(param2[_loc5_]);
               }
            }
            else if(!(_loc5_ == "tintAmount" || _loc5_ == "exposure" || _loc5_ == "brightness"))
            {
               _loc4_[_loc5_] = param2[_loc5_];
            }
         }
         if(!isNaN(param2.tintAmount))
         {
            _loc6_ = param2.tintAmount / (1 - (_loc4_.redMultiplier + _loc4_.greenMultiplier + _loc4_.blueMultiplier) / 3);
            _loc4_.redOffset *= _loc6_;
            _loc4_.greenOffset *= _loc6_;
            _loc4_.blueOffset *= _loc6_;
            _loc4_.redMultiplier = _loc4_.greenMultiplier = _loc4_.blueMultiplier = 1 - param2.tintAmount;
         }
         else if(!isNaN(param2.exposure))
         {
            _loc4_.redOffset = _loc4_.greenOffset = _loc4_.blueOffset = 255 * (param2.exposure - 1);
            _loc4_.redMultiplier = _loc4_.greenMultiplier = _loc4_.blueMultiplier = 1;
         }
         else if(!isNaN(param2.brightness))
         {
            _loc4_.redOffset = _loc4_.greenOffset = _loc4_.blueOffset = Math.max(0,(param2.brightness - 1) * 255);
            _loc4_.redMultiplier = _loc4_.greenMultiplier = _loc4_.blueMultiplier = 1 - Math.abs(param2.brightness - 1);
         }
         _ignoreAlpha = Boolean(param3.vars.alpha != undefined && param2.alphaMultiplier == undefined);
         init(param1 as DisplayObject,_loc4_);
         return true;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   import flash.filters.*;
   
   public class DropShadowFilterPlugin extends FilterPlugin
   {
      
      public static const API:Number = 1;
      
      private static var _propNames:Array = ["distance","angle","color","alpha","blurX","blurY","strength","quality","inner","knockout","hideObject"];
      
      public function DropShadowFilterPlugin()
      {
         super();
         this.propName = "dropShadowFilter";
         this.overwriteProps = ["dropShadowFilter"];
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         _target = param1;
         _type = DropShadowFilter;
         initFilter(param2,new DropShadowFilter(0,45,0,0,0,0,1,int(param2.quality) || 2,param2.inner,param2.knockout,param2.hideObject),_propNames);
         return true;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import com.greensock.core.*;
   
   public class DynamicPropsPlugin extends TweenPlugin
   {
      
      public static const API:Number = 1;
      
      protected var _tween:TweenLite;
      
      protected var _target:Object;
      
      protected var _props:Array;
      
      protected var _prevFactor:Number;
      
      protected var _prevTime:Number;
      
      public function DynamicPropsPlugin()
      {
         super();
         this.propName = "dynamicProps";
         this.overwriteProps = [];
         this._props = [];
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         var _loc5_:String = null;
         this._target = param3.target;
         this._tween = param3;
         var _loc4_:Object = param2.params || {};
         this._prevFactor = 0;
         this._prevTime = 0;
         for(_loc5_ in param2)
         {
            if(_loc5_ != "params")
            {
               this._props[this._props.length] = new DynamicProperty(this._target[_loc5_],_loc5_,param2[_loc5_] as Function,_loc4_[_loc5_]);
               this.overwriteProps[this.overwriteProps.length] = _loc5_;
            }
         }
         return true;
      }
      
      override public function killProps(param1:Object) : void
      {
         var _loc2_:int = int(this._props.length);
         while(_loc2_--)
         {
            if(this._props[_loc2_].name in param1)
            {
               this._props.splice(_loc2_,1);
            }
         }
         super.killProps(param1);
      }
      
      override public function set changeFactor(param1:Number) : void
      {
         var _loc2_:int = 0;
         var _loc3_:DynamicProperty = null;
         var _loc4_:Number = NaN;
         var _loc5_:Number = NaN;
         if(param1 != this._prevFactor)
         {
            _loc2_ = int(this._props.length);
            if(this._tween.cachedTime > this._prevTime)
            {
               _loc5_ = param1 == 1 || this._prevFactor == 1 ? 0 : 1 - (param1 - this._prevFactor) / (1 - this._prevFactor);
               while(_loc2_--)
               {
                  _loc3_ = this._props[_loc2_];
                  _loc4_ = _loc3_.params ? Number(_loc3_.getter.apply(null,_loc3_.params)) : _loc3_.getter();
                  this._target[_loc3_.name] = _loc4_ - (_loc4_ - this._target[_loc3_.name]) * _loc5_;
               }
            }
            else
            {
               _loc5_ = param1 == 0 || this._prevFactor == 0 ? 0 : 1 - (param1 - this._prevFactor) / -this._prevFactor;
               while(_loc2_--)
               {
                  _loc3_ = this._props[_loc2_];
                  this._target[_loc3_.name] = _loc3_.start + (this._target[_loc3_.name] - _loc3_.start) * _loc5_;
               }
            }
            this._prevFactor = param1;
         }
         this._prevTime = this._tween.cachedTime;
      }
   }
}

class DynamicProperty
{
   
   public var start:Number;
   
   public var name:String;
   
   public var getter:Function;
   
   public var params:Array;
   
   public function DynamicProperty(param1:Number, param2:String, param3:Function, param4:Array)
   {
      super();
      this.start = param1;
      this.name = param2;
      this.getter = param3;
      this.params = param4;
   }
}
package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   
   public class EndArrayPlugin extends TweenPlugin
   {
      
      public static const API:Number = 1;
      
      protected var _a:Array;
      
      protected var _info:Array = [];
      
      public function EndArrayPlugin()
      {
         super();
         this.propName = "endArray";
         this.overwriteProps = ["endArray"];
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         if(!(param1 is Array) || !(param2 is Array))
         {
            return false;
         }
         this.init(param1 as Array,param2);
         return true;
      }
      
      public function init(param1:Array, param2:Array) : void
      {
         this._a = param1;
         var _loc3_:int = int(param2.length);
         while(_loc3_--)
         {
            if(param1[_loc3_] != param2[_loc3_] && param1[_loc3_] != null)
            {
               this._info[this._info.length] = new ArrayTweenInfo(_loc3_,this._a[_loc3_],param2[_loc3_] - this._a[_loc3_]);
            }
         }
      }
      
      override public function set changeFactor(param1:Number) : void
      {
         var _loc3_:ArrayTweenInfo = null;
         var _loc4_:Number = NaN;
         var _loc2_:int = int(this._info.length);
         if(this.round)
         {
            while(_loc2_--)
            {
               _loc3_ = this._info[_loc2_];
               _loc4_ = _loc3_.start + _loc3_.change * param1;
               this._a[_loc3_.index] = _loc4_ > 0 ? int(_loc4_ + 0.5) : int(_loc4_ - 0.5);
            }
         }
         else
         {
            while(_loc2_--)
            {
               _loc3_ = this._info[_loc2_];
               this._a[_loc3_.index] = _loc3_.start + _loc3_.change * param1;
            }
         }
      }
   }
}

class ArrayTweenInfo
{
   
   public var index:uint;
   
   public var start:Number;
   
   public var change:Number;
   
   public function ArrayTweenInfo(param1:uint, param2:Number, param3:Number)
   {
      super();
      this.index = param1;
      this.start = param2;
      this.change = param3;
   }
}
package com.greensock.plugins
{
   import com.greensock.*;
   import com.greensock.core.*;
   import flash.display.*;
   import flash.filters.*;
   
   public class FilterPlugin extends TweenPlugin
   {
      
      public static const VERSION:Number = 2.03;
      
      public static const API:Number = 1;
      
      protected var _target:Object;
      
      protected var _type:Class;
      
      protected var _filter:BitmapFilter;
      
      protected var _index:int;
      
      protected var _remove:Boolean;
      
      public function FilterPlugin()
      {
         super();
      }
      
      protected function initFilter(param1:Object, param2:BitmapFilter, param3:Array) : void
      {
         var _loc5_:String = null;
         var _loc6_:int = 0;
         var _loc7_:HexColorsPlugin = null;
         var _loc4_:Array = this._target.filters;
         var _loc8_:Object = param1 is BitmapFilter ? {} : param1;
         this._index = -1;
         if(_loc8_.index != null)
         {
            this._index = _loc8_.index;
         }
         else
         {
            _loc6_ = int(_loc4_.length);
            while(_loc6_--)
            {
               if(_loc4_[_loc6_] is this._type)
               {
                  this._index = _loc6_;
                  break;
               }
            }
         }
         if(this._index == -1 || _loc4_[this._index] == null || _loc8_.addFilter == true)
         {
            this._index = _loc8_.index != null ? int(_loc8_.index) : int(_loc4_.length);
            _loc4_[this._index] = param2;
            this._target.filters = _loc4_;
         }
         this._filter = _loc4_[this._index];
         if(_loc8_.remove == true)
         {
            this._remove = true;
            this.onComplete = this.onCompleteTween;
         }
         _loc6_ = int(param3.length);
         while(_loc6_--)
         {
            _loc5_ = param3[_loc6_];
            if(_loc5_ in param1 && this._filter[_loc5_] != param1[_loc5_])
            {
               if(_loc5_ == "color" || _loc5_ == "highlightColor" || _loc5_ == "shadowColor")
               {
                  _loc7_ = new HexColorsPlugin();
                  _loc7_.initColor(this._filter,_loc5_,this._filter[_loc5_],param1[_loc5_]);
                  _tweens[_tweens.length] = new PropTween(_loc7_,"changeFactor",0,1,_loc5_,false);
               }
               else if(_loc5_ == "quality" || _loc5_ == "inner" || _loc5_ == "knockout" || _loc5_ == "hideObject")
               {
                  this._filter[_loc5_] = param1[_loc5_];
               }
               else
               {
                  addTween(this._filter,_loc5_,this._filter[_loc5_],param1[_loc5_],_loc5_);
               }
            }
         }
      }
      
      public function onCompleteTween() : void
      {
         var _loc1_:Array = null;
         var _loc2_:int = 0;
         if(this._remove)
         {
            _loc1_ = this._target.filters;
            if(!(_loc1_[this._index] is this._type))
            {
               _loc2_ = int(_loc1_.length);
               while(_loc2_--)
               {
                  if(_loc1_[_loc2_] is this._type)
                  {
                     _loc1_.splice(_loc2_,1);
                     break;
                  }
               }
            }
            else
            {
               _loc1_.splice(this._index,1);
            }
            this._target.filters = _loc1_;
         }
      }
      
      override public function set changeFactor(param1:Number) : void
      {
         var _loc3_:PropTween = null;
         var _loc2_:int = int(_tweens.length);
         var _loc4_:Array = this._target.filters;
         while(_loc2_--)
         {
            _loc3_ = _tweens[_loc2_];
            _loc3_.target[_loc3_.property] = _loc3_.start + _loc3_.change * param1;
         }
         if(!(_loc4_[this._index] is this._type))
         {
            _loc2_ = this._index = _loc4_.length;
            while(_loc2_--)
            {
               if(_loc4_[_loc2_] is this._type)
               {
                  this._index = _loc2_;
                  break;
               }
            }
         }
         _loc4_[this._index] = this._filter;
         this._target.filters = _loc4_;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   
   public class FrameLabelPlugin extends FramePlugin
   {
      
      public static const API:Number = 1;
      
      public function FrameLabelPlugin()
      {
         super();
         this.propName = "frameLabel";
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         if(!param3.target is MovieClip)
         {
            return false;
         }
         _target = param1 as MovieClip;
         this.frame = _target.currentFrame;
         var _loc4_:Array = _target.currentLabels;
         var _loc5_:String = param2;
         var _loc6_:int = _target.currentFrame;
         var _loc7_:int = int(_loc4_.length);
         while(_loc7_--)
         {
            if(_loc4_[_loc7_].name == _loc5_)
            {
               _loc6_ = int(_loc4_[_loc7_].frame);
               break;
            }
         }
         if(this.frame != _loc6_)
         {
            addTween(this,"frame",this.frame,_loc6_,"frame");
         }
         return true;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.TweenLite;
   import flash.display.MovieClip;
   
   public class FramePlugin extends TweenPlugin
   {
      
      public static const API:Number = 1;
      
      public var frame:int;
      
      protected var _target:MovieClip;
      
      public function FramePlugin()
      {
         super();
         this.propName = "frame";
         this.overwriteProps = ["frame","frameLabel"];
         this.round = true;
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         if(!(param1 is MovieClip) || isNaN(param2))
         {
            return false;
         }
         this._target = param1 as MovieClip;
         this.frame = this._target.currentFrame;
         addTween(this,"frame",this.frame,param2,"frame");
         return true;
      }
      
      override public function set changeFactor(param1:Number) : void
      {
         updateTweens(param1);
         this._target.gotoAndStop(this.frame);
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   import flash.filters.*;
   
   public class GlowFilterPlugin extends FilterPlugin
   {
      
      public static const API:Number = 1;
      
      private static var _propNames:Array = ["color","alpha","blurX","blurY","strength","quality","inner","knockout"];
      
      public function GlowFilterPlugin()
      {
         super();
         this.propName = "glowFilter";
         this.overwriteProps = ["glowFilter"];
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         _target = param1;
         _type = GlowFilter;
         initFilter(param2,new GlowFilter(16777215,0,0,0,Number(param2.strength) || 1,int(param2.quality) || 2,param2.inner,param2.knockout),_propNames);
         return true;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   
   public class HexColorsPlugin extends TweenPlugin
   {
      
      public static const API:Number = 1;
      
      protected var _colors:Array;
      
      public function HexColorsPlugin()
      {
         super();
         this.propName = "hexColors";
         this.overwriteProps = [];
         this._colors = [];
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         var _loc4_:String = null;
         for(_loc4_ in param2)
         {
            this.initColor(param1,_loc4_,uint(param1[_loc4_]),uint(param2[_loc4_]));
         }
         return true;
      }
      
      public function initColor(param1:Object, param2:String, param3:uint, param4:uint) : void
      {
         var _loc5_:Number = NaN;
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         if(param3 != param4)
         {
            _loc5_ = param3 >> 16;
            _loc6_ = param3 >> 8 & 0xFF;
            _loc7_ = param3 & 0xFF;
            this._colors[this._colors.length] = [param1,param2,_loc5_,(param4 >> 16) - _loc5_,_loc6_,(param4 >> 8 & 0xFF) - _loc6_,_loc7_,(param4 & 0xFF) - _loc7_];
            this.overwriteProps[this.overwriteProps.length] = param2;
         }
      }
      
      override public function killProps(param1:Object) : void
      {
         var _loc2_:int = int(this._colors.length - 1);
         while(_loc2_ > -1)
         {
            if(param1[this._colors[_loc2_][1]] != undefined)
            {
               this._colors.splice(_loc2_,1);
            }
            _loc2_--;
         }
         super.killProps(param1);
      }
      
      override public function set changeFactor(param1:Number) : void
      {
         var _loc2_:int = 0;
         var _loc3_:Array = null;
         _loc2_ = int(this._colors.length - 1);
         while(_loc2_ > -1)
         {
            _loc3_ = this._colors[_loc2_];
            _loc3_[0][_loc3_[1]] = _loc3_[2] + param1 * _loc3_[3] << 16 | _loc3_[4] + param1 * _loc3_[5] << 8 | _loc3_[6] + param1 * _loc3_[7];
            _loc2_--;
         }
      }
   }
}

package com.greensock.plugins
{
   public class RemoveTintPlugin extends TintPlugin
   {
      
      public static const API:Number = 1;
      
      public function RemoveTintPlugin()
      {
         super();
         this.propName = "removeTint";
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   
   public class RoundPropsPlugin extends TweenPlugin
   {
      
      public static const API:Number = 1;
      
      public function RoundPropsPlugin()
      {
         super();
         this.propName = "roundProps";
         this.overwriteProps = [];
         this.round = true;
      }
      
      public function add(param1:Object, param2:String, param3:Number, param4:Number) : void
      {
         addTween(param1,param2,param3,param3 + param4,param2);
         this.overwriteProps[this.overwriteProps.length] = param2;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   
   public class ShortRotationPlugin extends TweenPlugin
   {
      
      public static const API:Number = 1;
      
      public function ShortRotationPlugin()
      {
         super();
         this.propName = "shortRotation";
         this.overwriteProps = [];
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         var _loc4_:String = null;
         if(typeof param2 == "number")
         {
            return false;
         }
         for(_loc4_ in param2)
         {
            this.initRotation(param1,_loc4_,param1[_loc4_],typeof param2[_loc4_] == "number" ? Number(param2[_loc4_]) : param1[_loc4_] + Number(param2[_loc4_]));
         }
         return true;
      }
      
      public function initRotation(param1:Object, param2:String, param3:Number, param4:Number) : void
      {
         var _loc5_:Number = (param4 - param3) % 360;
         if(_loc5_ != _loc5_ % 180)
         {
            _loc5_ = _loc5_ < 0 ? _loc5_ + 360 : _loc5_ - 360;
         }
         addTween(param1,param2,param3,param3 + _loc5_,param2);
         this.overwriteProps[this.overwriteProps.length] = param2;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import com.greensock.core.*;
   import flash.display.*;
   import flash.geom.ColorTransform;
   import flash.geom.Transform;
   
   public class TintPlugin extends TweenPlugin
   {
      
      public static const API:Number = 1;
      
      protected static var _props:Array = ["redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset"];
      
      protected var _transform:Transform;
      
      protected var _ct:ColorTransform;
      
      protected var _ignoreAlpha:Boolean;
      
      public function TintPlugin()
      {
         super();
         this.propName = "tint";
         this.overwriteProps = ["tint"];
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         if(!(param1 is DisplayObject))
         {
            return false;
         }
         var _loc4_:ColorTransform = new ColorTransform();
         if(param2 != null && param3.vars.removeTint != true)
         {
            _loc4_.color = uint(param2);
         }
         this._ignoreAlpha = true;
         this.init(param1 as DisplayObject,_loc4_);
         return true;
      }
      
      public function init(param1:DisplayObject, param2:ColorTransform) : void
      {
         var _loc4_:String = null;
         this._transform = param1.transform;
         this._ct = this._transform.colorTransform;
         var _loc3_:int = int(_props.length);
         while(_loc3_--)
         {
            _loc4_ = _props[_loc3_];
            if(this._ct[_loc4_] != param2[_loc4_])
            {
               _tweens[_tweens.length] = new PropTween(this._ct,_loc4_,this._ct[_loc4_],param2[_loc4_] - this._ct[_loc4_],"tint",false);
            }
         }
      }
      
      override public function set changeFactor(param1:Number) : void
      {
         var _loc2_:ColorTransform = null;
         updateTweens(param1);
         if(this._ignoreAlpha)
         {
            _loc2_ = this._transform.colorTransform;
            this._ct.alphaMultiplier = _loc2_.alphaMultiplier;
            this._ct.alphaOffset = _loc2_.alphaOffset;
         }
         this._transform.colorTransform = this._ct;
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import com.greensock.core.*;
   
   public class TweenPlugin
   {
      
      public static const VERSION:Number = 1.31;
      
      public static const API:Number = 1;
      
      public var propName:String;
      
      public var overwriteProps:Array;
      
      public var round:Boolean;
      
      public var priority:int = 0;
      
      public var activeDisable:Boolean;
      
      public var onComplete:Function;
      
      public var onEnable:Function;
      
      public var onDisable:Function;
      
      protected var _tweens:Array = [];
      
      protected var _changeFactor:Number = 0;
      
      public function TweenPlugin()
      {
         super();
      }
      
      private static function onTweenEvent(param1:String, param2:TweenLite) : Boolean
      {
         var _loc4_:Boolean = false;
         var _loc5_:Array = null;
         var _loc6_:int = 0;
         var _loc3_:PropTween = param2.cachedPT1;
         if(param1 == "onInit")
         {
            _loc5_ = [];
            while(_loc3_)
            {
               _loc5_[_loc5_.length] = _loc3_;
               _loc3_ = _loc3_.nextNode;
            }
            _loc5_.sortOn("priority",Array.NUMERIC | Array.DESCENDING);
            _loc6_ = int(_loc5_.length);
            while(_loc6_--)
            {
               PropTween(_loc5_[_loc6_]).nextNode = _loc5_[_loc6_ + 1];
               PropTween(_loc5_[_loc6_]).prevNode = _loc5_[_loc6_ - 1];
            }
            param2.cachedPT1 = _loc5_[0];
         }
         else
         {
            while(_loc3_)
            {
               if(_loc3_.isPlugin && Boolean(_loc3_.target[param1]))
               {
                  if(_loc3_.target.activeDisable)
                  {
                     _loc4_ = true;
                  }
                  _loc3_.target[param1]();
               }
               _loc3_ = _loc3_.nextNode;
            }
         }
         return _loc4_;
      }
      
      public static function activate(param1:Array) : Boolean
      {
         var _loc3_:Object = null;
         TweenLite.onPluginEvent = TweenPlugin.onTweenEvent;
         var _loc2_:int = int(param1.length);
         while(_loc2_--)
         {
            if(param1[_loc2_].hasOwnProperty("API"))
            {
               _loc3_ = new (param1[_loc2_] as Class)();
               TweenLite.plugins[_loc3_.propName] = param1[_loc2_];
            }
         }
         return true;
      }
      
      public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         this.addTween(param1,this.propName,param1[this.propName],param2,this.propName);
         return true;
      }
      
      protected function addTween(param1:Object, param2:String, param3:Number, param4:*, param5:String = null) : void
      {
         var _loc6_:Number = NaN;
         if(param4 != null)
         {
            _loc6_ = typeof param4 == "number" ? Number(param4) - param3 : Number(param4);
            if(_loc6_ != 0)
            {
               this._tweens[this._tweens.length] = new PropTween(param1,param2,param3,_loc6_,param5 || param2,false);
            }
         }
      }
      
      protected function updateTweens(param1:Number) : void
      {
         var _loc3_:PropTween = null;
         var _loc4_:Number = NaN;
         var _loc2_:int = int(this._tweens.length);
         if(this.round)
         {
            while(_loc2_--)
            {
               _loc3_ = this._tweens[_loc2_];
               _loc4_ = _loc3_.start + _loc3_.change * param1;
               _loc3_.target[_loc3_.property] = _loc4_ > 0 ? int(_loc4_ + 0.5) : int(_loc4_ - 0.5);
            }
         }
         else
         {
            while(_loc2_--)
            {
               _loc3_ = this._tweens[_loc2_];
               _loc3_.target[_loc3_.property] = _loc3_.start + _loc3_.change * param1;
            }
         }
      }
      
      public function set changeFactor(param1:Number) : void
      {
         this.updateTweens(param1);
         this._changeFactor = param1;
      }
      
      public function get changeFactor() : Number
      {
         return this._changeFactor;
      }
      
      public function killProps(param1:Object) : void
      {
         var _loc2_:int = int(this.overwriteProps.length);
         while(_loc2_--)
         {
            if(this.overwriteProps[_loc2_] in param1)
            {
               this.overwriteProps.splice(_loc2_,1);
            }
         }
         _loc2_ = int(this._tweens.length);
         while(_loc2_--)
         {
            if(PropTween(this._tweens[_loc2_]).name in param1)
            {
               this._tweens.splice(_loc2_,1);
            }
         }
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   
   public class VisiblePlugin extends TweenPlugin
   {
      
      public static const API:Number = 1;
      
      protected var _target:Object;
      
      protected var _tween:TweenLite;
      
      protected var _visible:Boolean;
      
      protected var _initVal:Boolean;
      
      public function VisiblePlugin()
      {
         super();
         this.propName = "visible";
         this.overwriteProps = ["visible"];
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         this._target = param1;
         this._tween = param3;
         this._initVal = this._target.visible;
         this._visible = Boolean(param2);
         return true;
      }
      
      override public function set changeFactor(param1:Number) : void
      {
         if(param1 == 1 && (this._tween.cachedDuration == this._tween.cachedTime || this._tween.cachedTime == 0))
         {
            this._target.visible = this._visible;
         }
         else
         {
            this._target.visible = this._initVal;
         }
      }
   }
}

package com.greensock.plugins
{
   import com.greensock.*;
   import flash.display.*;
   import flash.media.SoundTransform;
   
   public class VolumePlugin extends TweenPlugin
   {
      
      public static const API:Number = 1;
      
      protected var _target:Object;
      
      protected var _st:SoundTransform;
      
      public function VolumePlugin()
      {
         super();
         this.propName = "volume";
         this.overwriteProps = ["volume"];
      }
      
      override public function onInitTween(param1:Object, param2:*, param3:TweenLite) : Boolean
      {
         if(isNaN(param2) || !param1.hasOwnProperty("soundTransform"))
         {
            return false;
         }
         this._target = param1;
         this._st = this._target.soundTransform;
         addTween(this._st,"volume",this._st.volume,param2,"volume");
         return true;
      }
      
      override public function set changeFactor(param1:Number) : void
      {
         updateTweens(param1);
         this._target.soundTransform = this._st;
      }
   }
}

package com.pixelwelders.fx
{
   import flash.display.DisplayObject;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   
   public class Earthquake
   {
      
      private static const FRAME_RATE:int = 25;
      
      private var timer:Timer;
      
      private var object:DisplayObject;
      
      private var originalX:int;
      
      private var originalY:int;
      
      private var intensity:int;
      
      private var intensityOffset:int;
      
      public function Earthquake(param1:DisplayObject, param2:Number = 10, param3:Number = -1)
      {
         super();
         if(this.timer)
         {
            this.timer.stop();
         }
         this.object = param1;
         this.originalX = this.object.x;
         this.originalY = this.object.y;
         this.intensity = param2;
         this.intensityOffset = param2 / 2;
         var _loc4_:int = int(1000 / FRAME_RATE);
         var _loc5_:int = 0;
         if(param3 != -1)
         {
            _loc5_ = int(param3 * 1000 / _loc4_);
         }
         this.timer = new Timer(_loc4_,_loc5_);
         this.timer.addEventListener(TimerEvent.TIMER,this.quake);
         this.timer.addEventListener(TimerEvent.TIMER_COMPLETE,this.resetImage);
         this.timer.start();
      }
      
      public function killQuake() : void
      {
         this.timer.removeEventListener(TimerEvent.TIMER,this.quake);
         this.timer.removeEventListener(TimerEvent.TIMER_COMPLETE,this.resetImage);
         this.timer.stop();
         this.resetImage();
      }
      
      private function quake(param1:TimerEvent) : void
      {
         var _loc2_:int = this.originalX + Math.random() * this.intensity - this.intensityOffset;
         var _loc3_:int = this.originalY + Math.random() * this.intensity - this.intensityOffset;
         this.object.x = _loc2_;
         this.object.y = _loc3_;
      }
      
      private function resetImage(param1:TimerEvent = null) : void
      {
         this.object.x = this.originalX;
         this.object.y = this.originalY;
         this.cleanup();
      }
      
      private function cleanup() : void
      {
         this.timer = null;
         this.object = null;
      }
   }
}

package com.pixelwelders.fx
{
   import flash.display.DisplayObject;
   import flash.utils.Dictionary;
   
   public class EarthquakeManager
   {
      
      private static var _instance:EarthquakeManager;
      
      private var activeEarthquakes:Dictionary = new Dictionary();
      
      private var rotationQuivers:Dictionary = new Dictionary();
      
      public function EarthquakeManager(param1:Function)
      {
         super();
         if(param1 != hidden)
         {
            throw new Error("EarthquakeManager is a Singleton and can only be accessed through EarthquakeManager.getInstance()");
         }
      }
      
      public static function getInstance() : EarthquakeManager
      {
         if(_instance == null)
         {
            _instance = new EarthquakeManager(hidden);
         }
         return _instance;
      }
      
      private static function hidden() : void
      {
      }
      
      public function addQuake(param1:DisplayObject, param2:Number = 10, param3:Number = -1) : void
      {
         var _loc4_:Earthquake = null;
         if(this.activeEarthquakes[param1] == null)
         {
            _loc4_ = new Earthquake(param1,param2,param3);
            this.activeEarthquakes[param1] = _loc4_;
         }
      }
      
      public function killQuake(param1:DisplayObject) : void
      {
         var _loc2_:Earthquake = this.activeEarthquakes[param1];
         if(_loc2_ != null)
         {
            _loc2_.killQuake();
         }
         delete this.activeEarthquakes[param1];
         _loc2_ = null;
      }
      
      public function addRotationQuiver(param1:DisplayObject, param2:Number = 10) : void
      {
         var _loc3_:RotationQuiver = null;
         if(this.rotationQuivers[param1] == null)
         {
            _loc3_ = new RotationQuiver(param1,param2);
            this.rotationQuivers[param1] = _loc3_;
         }
      }
      
      public function killQuiver(param1:DisplayObject) : void
      {
         var _loc2_:RotationQuiver = this.rotationQuivers[param1];
         if(_loc2_ != null)
         {
            _loc2_.killQuiver();
         }
         delete this.rotationQuivers[param1];
         _loc2_ = null;
      }
   }
}

package com.pixelwelders.fx
{
   import flash.display.DisplayObject;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   
   public class RotationQuiver
   {
      
      private static const FRAME_RATE:int = 4;
      
      private var timer:Timer;
      
      private var object:DisplayObject;
      
      private var quiverIntensity:int;
      
      private var intensityOffset:int;
      
      private var originalRotation:Number;
      
      private var upperQuiverLimit:Number;
      
      private var lowerQuiverLimit:Number;
      
      public function RotationQuiver(param1:DisplayObject, param2:Number = 10)
      {
         super();
         if(this.timer)
         {
            this.timer.stop();
         }
         this.object = param1;
         this.originalRotation = this.object.rotation;
         this.quiverIntensity = param2;
         this.upperQuiverLimit = this.originalRotation + this.quiverIntensity;
         this.lowerQuiverLimit = this.originalRotation - this.quiverIntensity;
         this.intensityOffset = param2 / 2;
         var _loc3_:int = int(1000 / FRAME_RATE);
         var _loc4_:int = 0;
         this.timer = new Timer(_loc3_,_loc4_);
         this.timer.addEventListener(TimerEvent.TIMER,this.quiver);
         this.timer.addEventListener(TimerEvent.TIMER_COMPLETE,this.resetImage);
         this.timer.start();
      }
      
      public function killQuiver() : void
      {
         this.timer.removeEventListener(TimerEvent.TIMER,this.quiver);
         this.timer.removeEventListener(TimerEvent.TIMER_COMPLETE,this.resetImage);
         this.timer.stop();
         this.resetImage();
      }
      
      private function quiver(param1:TimerEvent) : void
      {
         this.upperQuiverLimit = this.object.rotation + this.quiverIntensity;
         this.lowerQuiverLimit = this.object.rotation - this.quiverIntensity;
         var _loc2_:Number = Math.random() * (this.upperQuiverLimit - this.lowerQuiverLimit + 1) + this.lowerQuiverLimit;
         this.object.rotation = _loc2_;
      }
      
      private function resetImage(param1:TimerEvent = null) : void
      {
         this.object.rotation = this.originalRotation;
         this.cleanup();
      }
      
      private function cleanup() : void
      {
         this.timer = null;
         this.object = null;
      }
   }
}

package com.soenkerohde.logging
{
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.SecurityErrorEvent;
   import flash.net.XMLSocket;
   import mx.core.mx_internal;
   import mx.logging.ILogger;
   import mx.logging.LogEvent;
   import mx.logging.LogEventLevel;
   import mx.logging.targets.LineFormattedTarget;
   
   use namespace mx_internal;
   
   public class SOSLoggingTarget extends LineFormattedTarget
   {
      
      private var socket:XMLSocket;
      
      private var history:Array;
      
      public var server:String = "localhost";
      
      public function SOSLoggingTarget()
      {
         super();
         this.socket = new XMLSocket();
         this.history = new Array();
      }
      
      override public function logEvent(param1:LogEvent) : void
      {
         var _loc3_:Date = null;
         var _loc2_:Object = {"message":param1.message};
         if(includeDate || includeTime)
         {
            _loc3_ = new Date();
            if(includeDate)
            {
               _loc2_.date = Number(_loc3_.getMonth() + 1).toString() + "/" + _loc3_.getDate().toString() + "/" + _loc3_.getFullYear();
            }
            if(includeTime)
            {
               _loc2_.time = this.padTime(_loc3_.getHours()) + ":" + this.padTime(_loc3_.getMinutes()) + ":" + this.padTime(_loc3_.getSeconds()) + "." + this.padTime(_loc3_.getMilliseconds(),true);
            }
         }
         if(includeLevel)
         {
            _loc2_.level = param1.level;
         }
         _loc2_.category = includeCategory ? ILogger(param1.target).category : "";
         if(this.socket.connected)
         {
            this.send(_loc2_);
         }
         else
         {
            if(!this.socket.hasEventListener("connect"))
            {
               this.socket.addEventListener(IOErrorEvent.IO_ERROR,this.onIOError);
               this.socket.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.onSecurityError);
               this.socket.addEventListener(Event.CONNECT,this.onConnect);
            }
            this.socket.connect(this.server,4444);
            this.history.push(_loc2_);
         }
      }
      
      private function onIOError(param1:IOErrorEvent) : void
      {
      }
      
      private function onSecurityError(param1:SecurityErrorEvent) : void
      {
      }
      
      private function onConnect(param1:Event) : void
      {
         var _loc2_:Object = null;
         for each(_loc2_ in this.history)
         {
            this.send(_loc2_);
         }
      }
      
      private function send(param1:Object) : void
      {
         var _loc7_:String = null;
         var _loc2_:String = param1.message;
         var _loc3_:Array = _loc2_.split("\n");
         var _loc4_:String = _loc3_.length == 1 ? "showMessage" : "showFoldMessage";
         var _loc5_:String = this.getTypeByLogLevel(param1.level);
         var _loc6_:XML = <{_loc4_} key={_loc5_}/>;
         if(_loc3_.length > 1)
         {
            _loc6_.title = _loc3_[0];
            _loc6_.message = _loc2_.substr(_loc2_.indexOf("\n") + 1,_loc2_.length);
            if(param1.date == null)
            {
               _loc6_.data = param1.data;
            }
            if(param1.time == null)
            {
               _loc6_.time = param1.time;
            }
            if(param1.category == null)
            {
               _loc6_.category = param1.category;
            }
         }
         else
         {
            _loc7_ = "";
            if(param1.date != null)
            {
               _loc7_ += param1.date + fieldSeparator;
            }
            if(param1.time != null)
            {
               _loc7_ += param1.time + fieldSeparator;
            }
            if(param1.category != null)
            {
               _loc7_ += param1.category + fieldSeparator;
            }
            _loc6_.appendChild(_loc7_ + _loc2_);
         }
         this.socket.send("!SOS" + _loc6_.toXMLString() + "\n");
      }
      
      private function getTypeByLogLevel(param1:int) : String
      {
         switch(param1)
         {
            case LogEventLevel.DEBUG:
               return "DEBUG";
            case LogEventLevel.INFO:
               return "INFO";
            case LogEventLevel.WARN:
               return "WARN";
            case LogEventLevel.ERROR:
               return "ERROR";
            case LogEventLevel.FATAL:
               return "FATAL";
            default:
               return "INFO";
         }
      }
      
      private function padTime(param1:Number, param2:Boolean = false) : String
      {
         if(param2)
         {
            if(param1 < 10)
            {
               return "00" + param1.toString();
            }
            if(param1 < 100)
            {
               return "0" + param1.toString();
            }
            return param1.toString();
         }
         return param1 > 9 ? param1.toString() : "0" + param1.toString();
      }
      
      override mx_internal function internalLog(param1:String) : void
      {
      }
   }
}

package fl.containers
{
   import fl.controls.ScrollBar;
   import fl.controls.ScrollBarDirection;
   import fl.controls.ScrollPolicy;
   import fl.core.InvalidationType;
   import fl.core.UIComponent;
   import fl.events.ScrollEvent;
   import flash.display.DisplayObject;
   import flash.display.Graphics;
   import flash.display.Shape;
   import flash.events.MouseEvent;
   import flash.geom.Rectangle;
   
   public class BaseScrollPane extends UIComponent
   {
      
      private static var defaultStyles:Object = {
         "repeatDelay":500,
         "repeatInterval":35,
         "skin":"ScrollPane_upSkin",
         "contentPadding":0,
         "disabledAlpha":0.5
      };
      
      protected static const SCROLL_BAR_STYLES:Object = {
         "upArrowDisabledSkin":"upArrowDisabledSkin",
         "upArrowDownSkin":"upArrowDownSkin",
         "upArrowOverSkin":"upArrowOverSkin",
         "upArrowUpSkin":"upArrowUpSkin",
         "downArrowDisabledSkin":"downArrowDisabledSkin",
         "downArrowDownSkin":"downArrowDownSkin",
         "downArrowOverSkin":"downArrowOverSkin",
         "downArrowUpSkin":"downArrowUpSkin",
         "thumbDisabledSkin":"thumbDisabledSkin",
         "thumbDownSkin":"thumbDownSkin",
         "thumbOverSkin":"thumbOverSkin",
         "thumbUpSkin":"thumbUpSkin",
         "thumbIcon":"thumbIcon",
         "trackDisabledSkin":"trackDisabledSkin",
         "trackDownSkin":"trackDownSkin",
         "trackOverSkin":"trackOverSkin",
         "trackUpSkin":"trackUpSkin",
         "repeatDelay":"repeatDelay",
         "repeatInterval":"repeatInterval"
      };
      
      protected var contentHeight:Number = 0;
      
      protected var _horizontalScrollBar:ScrollBar;
      
      protected var _horizontalPageScrollSize:Number = 0;
      
      protected var _verticalPageScrollSize:Number = 0;
      
      protected var _maxHorizontalScrollPosition:Number = 0;
      
      protected var defaultLineScrollSize:Number = 4;
      
      protected var vOffset:Number = 0;
      
      protected var contentScrollRect:Rectangle;
      
      protected var background:DisplayObject;
      
      protected var _verticalScrollBar:ScrollBar;
      
      protected var disabledOverlay:Shape;
      
      protected var vScrollBar:Boolean;
      
      protected var _horizontalScrollPolicy:String;
      
      protected var useFixedHorizontalScrolling:Boolean = false;
      
      protected var contentWidth:Number = 0;
      
      protected var availableHeight:Number;
      
      protected var _verticalScrollPolicy:String;
      
      protected var contentPadding:Number = 0;
      
      protected var _useBitmpScrolling:Boolean = false;
      
      protected var availableWidth:Number;
      
      protected var hScrollBar:Boolean;
      
      public function BaseScrollPane()
      {
         super();
      }
      
      public static function getStyleDefinition() : Object
      {
         return mergeStyles(defaultStyles,ScrollBar.getStyleDefinition());
      }
      
      override public function set enabled(param1:Boolean) : void
      {
         if(enabled == param1)
         {
            return;
         }
         _verticalScrollBar.enabled = param1;
         _horizontalScrollBar.enabled = param1;
         super.enabled = param1;
      }
      
      public function set useBitmapScrolling(param1:Boolean) : void
      {
         _useBitmpScrolling = param1;
         invalidate(InvalidationType.STATE);
      }
      
      public function set horizontalLineScrollSize(param1:Number) : void
      {
         _horizontalScrollBar.lineScrollSize = param1;
      }
      
      protected function drawLayout() : void
      {
         calculateAvailableSize();
         calculateContentWidth();
         background.width = width;
         background.height = height;
         if(vScrollBar)
         {
            _verticalScrollBar.visible = true;
            _verticalScrollBar.x = width - ScrollBar.WIDTH - contentPadding;
            _verticalScrollBar.y = contentPadding;
            _verticalScrollBar.height = availableHeight;
         }
         else
         {
            _verticalScrollBar.visible = false;
         }
         _verticalScrollBar.setScrollProperties(availableHeight,0,contentHeight - availableHeight,verticalPageScrollSize);
         setVerticalScrollPosition(_verticalScrollBar.scrollPosition,false);
         if(hScrollBar)
         {
            _horizontalScrollBar.visible = true;
            _horizontalScrollBar.x = contentPadding;
            _horizontalScrollBar.y = height - ScrollBar.WIDTH - contentPadding;
            _horizontalScrollBar.width = availableWidth;
         }
         else
         {
            _horizontalScrollBar.visible = false;
         }
         _horizontalScrollBar.setScrollProperties(availableWidth,0,useFixedHorizontalScrolling ? _maxHorizontalScrollPosition : contentWidth - availableWidth,horizontalPageScrollSize);
         setHorizontalScrollPosition(_horizontalScrollBar.scrollPosition,false);
         drawDisabledOverlay();
      }
      
      protected function handleWheel(param1:MouseEvent) : void
      {
         if(!enabled || !_verticalScrollBar.visible || contentHeight <= availableHeight)
         {
            return;
         }
         _verticalScrollBar.scrollPosition -= param1.delta * verticalLineScrollSize;
         setVerticalScrollPosition(_verticalScrollBar.scrollPosition);
         dispatchEvent(new ScrollEvent(ScrollBarDirection.VERTICAL,param1.delta,horizontalScrollPosition));
      }
      
      protected function handleScroll(param1:ScrollEvent) : void
      {
         if(param1.target == _verticalScrollBar)
         {
            setVerticalScrollPosition(param1.position);
         }
         else
         {
            setHorizontalScrollPosition(param1.position);
         }
      }
      
      public function get verticalLineScrollSize() : Number
      {
         return _verticalScrollBar.lineScrollSize;
      }
      
      protected function drawBackground() : void
      {
         var _loc1_:DisplayObject = background;
         background = getDisplayObjectInstance(getStyleValue("skin"));
         background.width = width;
         background.height = height;
         addChildAt(background,0);
         if(_loc1_ != null && _loc1_ != background)
         {
            removeChild(_loc1_);
         }
      }
      
      protected function calculateAvailableSize() : void
      {
         var _loc1_:Number = ScrollBar.WIDTH;
         var _loc2_:Number = contentPadding = Number(getStyleValue("contentPadding"));
         var _loc3_:Number = height - 2 * _loc2_ - vOffset;
         vScrollBar = _verticalScrollPolicy == ScrollPolicy.ON || _verticalScrollPolicy == ScrollPolicy.AUTO && contentHeight > _loc3_;
         var _loc4_:Number = width - (vScrollBar ? _loc1_ : 0) - 2 * _loc2_;
         var _loc5_:Number = useFixedHorizontalScrolling ? _maxHorizontalScrollPosition : contentWidth - _loc4_;
         hScrollBar = _horizontalScrollPolicy == ScrollPolicy.ON || _horizontalScrollPolicy == ScrollPolicy.AUTO && _loc5_ > 0;
         if(hScrollBar)
         {
            _loc3_ -= _loc1_;
         }
         if(hScrollBar && !vScrollBar && _verticalScrollPolicy == ScrollPolicy.AUTO && contentHeight > _loc3_)
         {
            vScrollBar = true;
            _loc4_ -= _loc1_;
         }
         availableHeight = _loc3_ + vOffset;
         availableWidth = _loc4_;
      }
      
      public function get verticalScrollPosition() : Number
      {
         return _verticalScrollBar.scrollPosition;
      }
      
      public function get horizontalScrollPolicy() : String
      {
         return _horizontalScrollPolicy;
      }
      
      protected function setVerticalScrollPosition(param1:Number, param2:Boolean = false) : void
      {
      }
      
      public function get horizontalPageScrollSize() : Number
      {
         if(isNaN(availableWidth))
         {
            drawNow();
         }
         return _horizontalPageScrollSize == 0 && !isNaN(availableWidth) ? availableWidth : _horizontalPageScrollSize;
      }
      
      public function set horizontalScrollPosition(param1:Number) : void
      {
         drawNow();
         _horizontalScrollBar.scrollPosition = param1;
         setHorizontalScrollPosition(_horizontalScrollBar.scrollPosition,false);
      }
      
      public function set verticalLineScrollSize(param1:Number) : void
      {
         _verticalScrollBar.lineScrollSize = param1;
      }
      
      public function get maxVerticalScrollPosition() : Number
      {
         drawNow();
         return Math.max(0,contentHeight - availableHeight);
      }
      
      public function set horizontalPageScrollSize(param1:Number) : void
      {
         _horizontalPageScrollSize = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      override protected function draw() : void
      {
         if(isInvalid(InvalidationType.STYLES))
         {
            setStyles();
            drawBackground();
            if(contentPadding != getStyleValue("contentPadding"))
            {
               invalidate(InvalidationType.SIZE,false);
            }
         }
         if(isInvalid(InvalidationType.SIZE,InvalidationType.STATE))
         {
            drawLayout();
         }
         updateChildren();
         super.draw();
      }
      
      public function get horizontalScrollBar() : ScrollBar
      {
         return _horizontalScrollBar;
      }
      
      protected function calculateContentWidth() : void
      {
      }
      
      public function set horizontalScrollPolicy(param1:String) : void
      {
         _horizontalScrollPolicy = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      override protected function configUI() : void
      {
         super.configUI();
         contentScrollRect = new Rectangle(0,0,85,85);
         _verticalScrollBar = new ScrollBar();
         _verticalScrollBar.addEventListener(ScrollEvent.SCROLL,handleScroll,false,0,true);
         _verticalScrollBar.visible = false;
         _verticalScrollBar.lineScrollSize = defaultLineScrollSize;
         addChild(_verticalScrollBar);
         copyStylesToChild(_verticalScrollBar,SCROLL_BAR_STYLES);
         _horizontalScrollBar = new ScrollBar();
         _horizontalScrollBar.direction = ScrollBarDirection.HORIZONTAL;
         _horizontalScrollBar.addEventListener(ScrollEvent.SCROLL,handleScroll,false,0,true);
         _horizontalScrollBar.visible = false;
         _horizontalScrollBar.lineScrollSize = defaultLineScrollSize;
         addChild(_horizontalScrollBar);
         copyStylesToChild(_horizontalScrollBar,SCROLL_BAR_STYLES);
         disabledOverlay = new Shape();
         var _loc1_:Graphics = disabledOverlay.graphics;
         _loc1_.beginFill(16777215);
         _loc1_.drawRect(0,0,width,height);
         _loc1_.endFill();
         addEventListener(MouseEvent.MOUSE_WHEEL,handleWheel,false,0,true);
      }
      
      protected function drawDisabledOverlay() : void
      {
         if(enabled)
         {
            if(contains(disabledOverlay))
            {
               removeChild(disabledOverlay);
            }
         }
         else
         {
            disabledOverlay.x = disabledOverlay.y = contentPadding;
            disabledOverlay.width = availableWidth;
            disabledOverlay.height = availableHeight;
            disabledOverlay.alpha = getStyleValue("disabledAlpha") as Number;
            addChild(disabledOverlay);
         }
      }
      
      public function get horizontalScrollPosition() : Number
      {
         return _horizontalScrollBar.scrollPosition;
      }
      
      public function get verticalScrollBar() : ScrollBar
      {
         return _verticalScrollBar;
      }
      
      public function get horizontalLineScrollSize() : Number
      {
         return _horizontalScrollBar.lineScrollSize;
      }
      
      public function set verticalScrollPosition(param1:Number) : void
      {
         drawNow();
         _verticalScrollBar.scrollPosition = param1;
         setVerticalScrollPosition(_verticalScrollBar.scrollPosition,false);
      }
      
      protected function setHorizontalScrollPosition(param1:Number, param2:Boolean = false) : void
      {
      }
      
      protected function setStyles() : void
      {
         copyStylesToChild(_verticalScrollBar,SCROLL_BAR_STYLES);
         copyStylesToChild(_horizontalScrollBar,SCROLL_BAR_STYLES);
      }
      
      public function set verticalPageScrollSize(param1:Number) : void
      {
         _verticalPageScrollSize = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      protected function setContentSize(param1:Number, param2:Number) : void
      {
         if((contentWidth == param1 || useFixedHorizontalScrolling) && contentHeight == param2)
         {
            return;
         }
         contentWidth = param1;
         contentHeight = param2;
         invalidate(InvalidationType.SIZE);
      }
      
      public function set verticalScrollPolicy(param1:String) : void
      {
         _verticalScrollPolicy = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      public function get maxHorizontalScrollPosition() : Number
      {
         drawNow();
         return Math.max(0,contentWidth - availableWidth);
      }
      
      protected function updateChildren() : void
      {
         _verticalScrollBar.enabled = _horizontalScrollBar.enabled = enabled;
         _verticalScrollBar.drawNow();
         _horizontalScrollBar.drawNow();
      }
      
      public function get verticalPageScrollSize() : Number
      {
         if(isNaN(availableHeight))
         {
            drawNow();
         }
         return _verticalPageScrollSize == 0 && !isNaN(availableHeight) ? availableHeight : _verticalPageScrollSize;
      }
      
      public function get verticalScrollPolicy() : String
      {
         return _verticalScrollPolicy;
      }
      
      public function get useBitmapScrolling() : Boolean
      {
         return _useBitmpScrolling;
      }
   }
}

package fl.containers
{
   import fl.controls.ScrollPolicy;
   import fl.core.InvalidationType;
   import fl.events.ScrollEvent;
   import fl.managers.IFocusManagerComponent;
   import flash.display.DisplayObject;
   import flash.display.Loader;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.HTTPStatusEvent;
   import flash.events.IOErrorEvent;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.events.ProgressEvent;
   import flash.events.SecurityErrorEvent;
   import flash.net.URLRequest;
   import flash.system.ApplicationDomain;
   import flash.system.LoaderContext;
   import flash.ui.Keyboard;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol39")]
   public class ScrollPane extends BaseScrollPane implements IFocusManagerComponent
   {
      
      private static var defaultStyles:Object = {
         "upSkin":"ScrollPane_upSkin",
         "disabledSkin":"ScrollPane_disabledSkin",
         "focusRectSkin":null,
         "focusRectPadding":null,
         "contentPadding":0
      };
      
      protected var scrollDragHPos:Number;
      
      protected var loader:Loader;
      
      protected var xOffset:Number;
      
      protected var _source:Object = "";
      
      protected var scrollDragVPos:Number;
      
      protected var _scrollDrag:Boolean = false;
      
      protected var currentContent:Object;
      
      protected var contentClip:Sprite;
      
      protected var yOffset:Number;
      
      public function ScrollPane()
      {
         super();
      }
      
      public static function getStyleDefinition() : Object
      {
         return mergeStyles(defaultStyles,BaseScrollPane.getStyleDefinition());
      }
      
      protected function clearContent() : void
      {
         if(contentClip.numChildren == 0)
         {
            return;
         }
         contentClip.removeChildAt(0);
         currentContent = null;
         if(loader != null)
         {
            try
            {
               loader.close();
            }
            catch(e:*)
            {
            }
            try
            {
               loader.unload();
            }
            catch(e:*)
            {
            }
            loader = null;
         }
      }
      
      protected function passEvent(param1:Event) : void
      {
         dispatchEvent(param1);
      }
      
      protected function calculateAvailableHeight() : Number
      {
         var _loc1_:Number = Number(getStyleValue("contentPadding"));
         return height - _loc1_ * 2 - (_horizontalScrollPolicy == ScrollPolicy.ON || _horizontalScrollPolicy == ScrollPolicy.AUTO && _maxHorizontalScrollPosition > 0 ? 15 : 0);
      }
      
      override protected function drawLayout() : void
      {
         super.drawLayout();
         contentScrollRect = contentClip.scrollRect;
         contentScrollRect.width = availableWidth;
         contentScrollRect.height = availableHeight;
         contentClip.cacheAsBitmap = useBitmapScrolling;
         contentClip.scrollRect = contentScrollRect;
         contentClip.x = contentClip.y = contentPadding;
      }
      
      public function get bytesTotal() : Number
      {
         return loader == null || loader.contentLoaderInfo == null ? 0 : loader.contentLoaderInfo.bytesTotal;
      }
      
      public function get source() : Object
      {
         return _source;
      }
      
      override protected function handleScroll(param1:ScrollEvent) : void
      {
         passEvent(param1);
         super.handleScroll(param1);
      }
      
      protected function onContentLoad(param1:Event) : void
      {
         update();
         var _loc2_:* = calculateAvailableHeight();
         calculateAvailableSize();
         horizontalScrollBar.setScrollProperties(availableWidth,0,useFixedHorizontalScrolling ? _maxHorizontalScrollPosition : contentWidth - availableWidth,availableWidth);
         verticalScrollBar.setScrollProperties(_loc2_,0,contentHeight - _loc2_,_loc2_);
         passEvent(param1);
      }
      
      public function get scrollDrag() : Boolean
      {
         return _scrollDrag;
      }
      
      protected function setScrollDrag() : void
      {
         if(_scrollDrag)
         {
            contentClip.addEventListener(MouseEvent.MOUSE_DOWN,doStartDrag,false,0,true);
            stage.addEventListener(MouseEvent.MOUSE_UP,endDrag,false,0,true);
         }
         else
         {
            contentClip.removeEventListener(MouseEvent.MOUSE_DOWN,doStartDrag);
            stage.removeEventListener(MouseEvent.MOUSE_UP,endDrag);
            removeEventListener(MouseEvent.MOUSE_MOVE,doDrag);
         }
         contentClip.buttonMode = _scrollDrag;
      }
      
      public function get percentLoaded() : Number
      {
         if(loader != null)
         {
            return Math.round(bytesLoaded / bytesTotal * 100);
         }
         return 0;
      }
      
      override protected function setVerticalScrollPosition(param1:Number, param2:Boolean = false) : void
      {
         var _loc3_:* = contentClip.scrollRect;
         _loc3_.y = param1;
         contentClip.scrollRect = _loc3_;
      }
      
      protected function endDrag(param1:MouseEvent) : void
      {
         stage.removeEventListener(MouseEvent.MOUSE_MOVE,doDrag);
      }
      
      override protected function drawBackground() : void
      {
         var _loc1_:DisplayObject = background;
         background = getDisplayObjectInstance(getStyleValue(enabled ? "upSkin" : "disabledSkin"));
         background.width = width;
         background.height = height;
         addChildAt(background,0);
         if(_loc1_ != null && _loc1_ != background)
         {
            removeChild(_loc1_);
         }
      }
      
      public function set source(param1:Object) : void
      {
         var _loc2_:* = undefined;
         clearContent();
         if(isLivePreview)
         {
            return;
         }
         _source = param1;
         if(_source == "" || _source == null)
         {
            return;
         }
         currentContent = getDisplayObjectInstance(param1);
         if(currentContent != null)
         {
            _loc2_ = contentClip.addChild(currentContent as DisplayObject);
            dispatchEvent(new Event(Event.INIT));
            update();
         }
         else
         {
            load(new URLRequest(_source.toString()));
         }
      }
      
      public function set scrollDrag(param1:Boolean) : void
      {
         _scrollDrag = param1;
         invalidate(InvalidationType.STATE);
      }
      
      protected function initLoader() : void
      {
         loader = new Loader();
         loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR,handleError,false,0,true);
         loader.contentLoaderInfo.addEventListener(SecurityErrorEvent.SECURITY_ERROR,handleError,false,0,true);
         loader.contentLoaderInfo.addEventListener(Event.OPEN,passEvent,false,0,true);
         loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS,passEvent,false,0,true);
         loader.contentLoaderInfo.addEventListener(Event.COMPLETE,onContentLoad,false,0,true);
         loader.contentLoaderInfo.addEventListener(Event.INIT,passEvent,false,0,true);
         loader.contentLoaderInfo.addEventListener(HTTPStatusEvent.HTTP_STATUS,passEvent,false,0,true);
         contentClip.addChild(loader);
      }
      
      override protected function draw() : void
      {
         if(isInvalid(InvalidationType.STYLES))
         {
            drawBackground();
         }
         if(isInvalid(InvalidationType.STATE))
         {
            setScrollDrag();
         }
         super.draw();
      }
      
      protected function clearLoadEvents() : void
      {
         loader.contentLoaderInfo.removeEventListener(IOErrorEvent.IO_ERROR,handleError);
         loader.contentLoaderInfo.removeEventListener(SecurityErrorEvent.SECURITY_ERROR,handleError);
         loader.contentLoaderInfo.removeEventListener(Event.OPEN,passEvent);
         loader.contentLoaderInfo.removeEventListener(ProgressEvent.PROGRESS,passEvent);
         loader.contentLoaderInfo.removeEventListener(HTTPStatusEvent.HTTP_STATUS,passEvent);
         loader.contentLoaderInfo.removeEventListener(Event.COMPLETE,onContentLoad);
      }
      
      protected function handleError(param1:Event) : void
      {
         passEvent(param1);
         clearLoadEvents();
         loader.contentLoaderInfo.removeEventListener(Event.INIT,handleInit);
      }
      
      public function get bytesLoaded() : Number
      {
         return loader == null || loader.contentLoaderInfo == null ? 0 : loader.contentLoaderInfo.bytesLoaded;
      }
      
      override protected function setHorizontalScrollPosition(param1:Number, param2:Boolean = false) : void
      {
         var _loc3_:* = contentClip.scrollRect;
         _loc3_.x = param1;
         contentClip.scrollRect = _loc3_;
      }
      
      override protected function configUI() : void
      {
         super.configUI();
         contentClip = new Sprite();
         addChild(contentClip);
         contentClip.scrollRect = contentScrollRect;
         _horizontalScrollPolicy = ScrollPolicy.AUTO;
         _verticalScrollPolicy = ScrollPolicy.AUTO;
      }
      
      protected function handleInit(param1:Event) : void
      {
         loader.contentLoaderInfo.removeEventListener(Event.INIT,handleInit);
         passEvent(param1);
         invalidate(InvalidationType.SIZE);
      }
      
      public function update() : void
      {
         var _loc1_:DisplayObject = contentClip.getChildAt(0);
         setContentSize(_loc1_.width,_loc1_.height);
      }
      
      public function refreshPane() : void
      {
         if(_source is URLRequest)
         {
            _source = _source.url;
         }
         source = _source;
      }
      
      public function load(param1:URLRequest, param2:LoaderContext = null) : void
      {
         if(param2 == null)
         {
            param2 = new LoaderContext(false,ApplicationDomain.currentDomain);
         }
         clearContent();
         initLoader();
         currentContent = _source = param1;
         loader.load(param1,param2);
      }
      
      protected function doStartDrag(param1:MouseEvent) : void
      {
         if(!enabled)
         {
            return;
         }
         xOffset = mouseX;
         yOffset = mouseY;
         scrollDragHPos = horizontalScrollPosition;
         scrollDragVPos = verticalScrollPosition;
         stage.addEventListener(MouseEvent.MOUSE_MOVE,doDrag,false,0,true);
      }
      
      protected function doDrag(param1:MouseEvent) : void
      {
         var _loc2_:* = scrollDragVPos - (mouseY - yOffset);
         _verticalScrollBar.setScrollPosition(_loc2_);
         setVerticalScrollPosition(_verticalScrollBar.scrollPosition,true);
         var _loc3_:* = scrollDragHPos - (mouseX - xOffset);
         _horizontalScrollBar.setScrollPosition(_loc3_);
         setHorizontalScrollPosition(_horizontalScrollBar.scrollPosition,true);
      }
      
      override protected function keyDownHandler(param1:KeyboardEvent) : void
      {
         var _loc2_:int = calculateAvailableHeight();
         switch(param1.keyCode)
         {
            case Keyboard.DOWN:
               ++verticalScrollPosition;
               break;
            case Keyboard.UP:
               --verticalScrollPosition;
               break;
            case Keyboard.RIGHT:
               ++horizontalScrollPosition;
               break;
            case Keyboard.LEFT:
               --horizontalScrollPosition;
               break;
            case Keyboard.END:
               verticalScrollPosition = maxVerticalScrollPosition;
               break;
            case Keyboard.HOME:
               verticalScrollPosition = 0;
               break;
            case Keyboard.PAGE_UP:
               verticalScrollPosition -= _loc2_;
               break;
            case Keyboard.PAGE_DOWN:
               verticalScrollPosition += _loc2_;
         }
      }
      
      public function get content() : DisplayObject
      {
         var _loc1_:Object = currentContent;
         if(_loc1_ is URLRequest)
         {
            _loc1_ = loader.content;
         }
         return _loc1_ as DisplayObject;
      }
   }
}

package fl.controls
{
   import fl.core.InvalidationType;
   import fl.core.UIComponent;
   import fl.events.ComponentEvent;
   import flash.display.DisplayObject;
   import flash.events.MouseEvent;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   
   public class BaseButton extends UIComponent
   {
      
      private static var defaultStyles:Object = {
         "upSkin":"Button_upSkin",
         "downSkin":"Button_downSkin",
         "overSkin":"Button_overSkin",
         "disabledSkin":"Button_disabledSkin",
         "selectedDisabledSkin":"Button_selectedDisabledSkin",
         "selectedUpSkin":"Button_selectedUpSkin",
         "selectedDownSkin":"Button_selectedDownSkin",
         "selectedOverSkin":"Button_selectedOverSkin",
         "focusRectSkin":null,
         "focusRectPadding":null,
         "repeatDelay":500,
         "repeatInterval":35
      };
      
      protected var background:DisplayObject;
      
      protected var mouseState:String;
      
      protected var _selected:Boolean = false;
      
      protected var _autoRepeat:Boolean = false;
      
      protected var pressTimer:Timer;
      
      private var _mouseStateLocked:Boolean = false;
      
      private var unlockedMouseState:String;
      
      public function BaseButton()
      {
         super();
         buttonMode = true;
         mouseChildren = false;
         useHandCursor = false;
         setupMouseEvents();
         setMouseState("up");
         pressTimer = new Timer(1,0);
         pressTimer.addEventListener(TimerEvent.TIMER,buttonDown,false,0,true);
      }
      
      public static function getStyleDefinition() : Object
      {
         return defaultStyles;
      }
      
      override public function get enabled() : Boolean
      {
         return super.enabled;
      }
      
      override public function set enabled(param1:Boolean) : void
      {
         super.enabled = param1;
         mouseEnabled = param1;
      }
      
      public function get selected() : Boolean
      {
         return _selected;
      }
      
      public function set selected(param1:Boolean) : void
      {
         if(_selected == param1)
         {
            return;
         }
         _selected = param1;
         invalidate(InvalidationType.STATE);
      }
      
      public function get autoRepeat() : Boolean
      {
         return _autoRepeat;
      }
      
      public function set autoRepeat(param1:Boolean) : void
      {
         _autoRepeat = param1;
      }
      
      public function set mouseStateLocked(param1:Boolean) : void
      {
         _mouseStateLocked = param1;
         if(param1 == false)
         {
            setMouseState(unlockedMouseState);
         }
         else
         {
            unlockedMouseState = mouseState;
         }
      }
      
      public function setMouseState(param1:String) : void
      {
         if(_mouseStateLocked)
         {
            unlockedMouseState = param1;
            return;
         }
         if(mouseState == param1)
         {
            return;
         }
         mouseState = param1;
         invalidate(InvalidationType.STATE);
      }
      
      protected function setupMouseEvents() : void
      {
         addEventListener(MouseEvent.ROLL_OVER,mouseEventHandler,false,0,true);
         addEventListener(MouseEvent.MOUSE_DOWN,mouseEventHandler,false,0,true);
         addEventListener(MouseEvent.MOUSE_UP,mouseEventHandler,false,0,true);
         addEventListener(MouseEvent.ROLL_OUT,mouseEventHandler,false,0,true);
      }
      
      protected function mouseEventHandler(param1:MouseEvent) : void
      {
         if(param1.type == MouseEvent.MOUSE_DOWN)
         {
            setMouseState("down");
            startPress();
         }
         else if(param1.type == MouseEvent.ROLL_OVER || param1.type == MouseEvent.MOUSE_UP)
         {
            setMouseState("over");
            endPress();
         }
         else if(param1.type == MouseEvent.ROLL_OUT)
         {
            setMouseState("up");
            endPress();
         }
      }
      
      protected function startPress() : void
      {
         if(_autoRepeat)
         {
            pressTimer.delay = Number(getStyleValue("repeatDelay"));
            pressTimer.start();
         }
         dispatchEvent(new ComponentEvent(ComponentEvent.BUTTON_DOWN,true));
      }
      
      protected function buttonDown(param1:TimerEvent) : void
      {
         if(!_autoRepeat)
         {
            endPress();
            return;
         }
         if(pressTimer.currentCount == 1)
         {
            pressTimer.delay = Number(getStyleValue("repeatInterval"));
         }
         dispatchEvent(new ComponentEvent(ComponentEvent.BUTTON_DOWN,true));
      }
      
      protected function endPress() : void
      {
         pressTimer.reset();
      }
      
      override protected function draw() : void
      {
         if(isInvalid(InvalidationType.STYLES,InvalidationType.STATE))
         {
            drawBackground();
            invalidate(InvalidationType.SIZE,false);
         }
         if(isInvalid(InvalidationType.SIZE))
         {
            drawLayout();
         }
         super.draw();
      }
      
      protected function drawBackground() : void
      {
         var _loc1_:* = enabled ? mouseState : "disabled";
         if(selected)
         {
            _loc1_ = "selected" + _loc1_.substr(0,1).toUpperCase() + _loc1_.substr(1);
         }
         _loc1_ += "Skin";
         var _loc2_:DisplayObject = background;
         background = getDisplayObjectInstance(getStyleValue(_loc1_));
         addChildAt(background,0);
         if(_loc2_ != null && _loc2_ != background)
         {
            removeChild(_loc2_);
         }
      }
      
      protected function drawLayout() : void
      {
         background.width = width;
         background.height = height;
      }
   }
}

package fl.controls
{
   import fl.core.InvalidationType;
   import fl.core.UIComponent;
   import fl.managers.IFocusManagerComponent;
   import flash.display.DisplayObject;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol112")]
   public class Button extends LabelButton implements IFocusManagerComponent
   {
      
      public static var createAccessibilityImplementation:Function;
      
      private static var defaultStyles:Object = {
         "emphasizedSkin":"Button_emphasizedSkin",
         "emphasizedPadding":2
      };
      
      protected var _emphasized:Boolean = false;
      
      protected var emphasizedBorder:DisplayObject;
      
      public function Button()
      {
         super();
      }
      
      public static function getStyleDefinition() : Object
      {
         return UIComponent.mergeStyles(LabelButton.getStyleDefinition(),defaultStyles);
      }
      
      public function set emphasized(param1:Boolean) : void
      {
         _emphasized = param1;
         invalidate(InvalidationType.STYLES);
      }
      
      override protected function initializeAccessibility() : void
      {
         if(Button.createAccessibilityImplementation != null)
         {
            Button.createAccessibilityImplementation(this);
         }
      }
      
      protected function drawEmphasized() : void
      {
         var _loc2_:Number = NaN;
         if(emphasizedBorder != null)
         {
            removeChild(emphasizedBorder);
         }
         emphasizedBorder = null;
         if(!_emphasized)
         {
            return;
         }
         var _loc1_:Object = getStyleValue("emphasizedSkin");
         if(_loc1_ != null)
         {
            emphasizedBorder = getDisplayObjectInstance(_loc1_);
         }
         if(emphasizedBorder != null)
         {
            addChildAt(emphasizedBorder,0);
            _loc2_ = Number(getStyleValue("emphasizedPadding"));
            emphasizedBorder.x = emphasizedBorder.y = -_loc2_;
            emphasizedBorder.width = width + _loc2_ * 2;
            emphasizedBorder.height = height + _loc2_ * 2;
         }
      }
      
      public function get emphasized() : Boolean
      {
         return _emphasized;
      }
      
      override protected function draw() : void
      {
         if(isInvalid(InvalidationType.STYLES) || isInvalid(InvalidationType.SIZE))
         {
            drawEmphasized();
         }
         super.draw();
         if(emphasizedBorder != null)
         {
            setChildIndex(emphasizedBorder,numChildren - 1);
         }
      }
      
      override public function drawFocus(param1:Boolean) : void
      {
         var _loc2_:Number = NaN;
         var _loc3_:* = undefined;
         super.drawFocus(param1);
         if(param1)
         {
            _loc2_ = Number(getStyleValue("emphasizedPadding"));
            if(_loc2_ < 0 || !_emphasized)
            {
               _loc2_ = 0;
            }
            _loc3_ = getStyleValue("focusRectPadding");
            _loc3_ = _loc3_ == null ? 2 : _loc3_;
            _loc3_ += _loc2_;
            uiFocusRect.x = -_loc3_;
            uiFocusRect.y = -_loc3_;
            uiFocusRect.width = width + _loc3_ * 2;
            uiFocusRect.height = height + _loc3_ * 2;
         }
      }
   }
}

package fl.controls
{
   public class ButtonLabelPlacement
   {
      
      public static const BOTTOM:String = "bottom";
      
      public static const TOP:String = "top";
      
      public static const LEFT:String = "left";
      
      public static const RIGHT:String = "right";
      
      public function ButtonLabelPlacement()
      {
         super();
      }
   }
}

package fl.controls
{
   import fl.controls.listClasses.ICellRenderer;
   import fl.core.InvalidationType;
   import fl.core.UIComponent;
   import fl.data.DataProvider;
   import fl.data.SimpleCollectionItem;
   import fl.events.ComponentEvent;
   import fl.events.DataChangeEvent;
   import fl.events.ListEvent;
   import fl.managers.IFocusManagerComponent;
   import flash.display.DisplayObject;
   import flash.events.Event;
   import flash.events.FocusEvent;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.geom.Point;
   import flash.text.TextFormat;
   import flash.ui.Keyboard;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol142")]
   public class ComboBox extends UIComponent implements IFocusManagerComponent
   {
      
      public static var createAccessibilityImplementation:Function;
      
      private static var defaultStyles:Object = {
         "upSkin":"ComboBox_upSkin",
         "downSkin":"ComboBox_downSkin",
         "overSkin":"ComboBox_overSkin",
         "disabledSkin":"ComboBox_disabledSkin",
         "focusRectSkin":null,
         "focusRectPadding":null,
         "textFormat":null,
         "disabledTextFormat":null,
         "textPadding":3,
         "buttonWidth":24,
         "disabledAlpha":null,
         "listSkin":null
      };
      
      protected static const LIST_STYLES:Object = {
         "upSkin":"comboListUpSkin",
         "overSkin":"comboListOverSkin",
         "downSkin":"comobListDownSkin",
         "disabledSkin":"comboListDisabledSkin",
         "downArrowDisabledSkin":"downArrowDisabledSkin",
         "downArrowDownSkin":"downArrowDownSkin",
         "downArrowOverSkin":"downArrowOverSkin",
         "downArrowUpSkin":"downArrowUpSkin",
         "upArrowDisabledSkin":"upArrowDisabledSkin",
         "upArrowDownSkin":"upArrowDownSkin",
         "upArrowOverSkin":"upArrowOverSkin",
         "upArrowUpSkin":"upArrowUpSkin",
         "thumbDisabledSkin":"thumbDisabledSkin",
         "thumbDownSkin":"thumbDownSkin",
         "thumbOverSkin":"thumbOverSkin",
         "thumbUpSkin":"thumbUpSkin",
         "thumbIcon":"thumbIcon",
         "trackDisabledSkin":"trackDisabledSkin",
         "trackDownSkin":"trackDownSkin",
         "trackOverSkin":"trackOverSkin",
         "trackUpSkin":"trackUpSkin",
         "repeatDelay":"repeatDelay",
         "repeatInterval":"repeatInterval",
         "textFormat":"textFormat",
         "disabledAlpha":"disabledAlpha",
         "skin":"listSkin"
      };
      
      protected static const BACKGROUND_STYLES:Object = {
         "overSkin":"overSkin",
         "downSkin":"downSkin",
         "upSkin":"upSkin",
         "disabledSkin":"disabledSkin",
         "repeatInterval":"repeatInterval"
      };
      
      protected var isKeyDown:Boolean = false;
      
      protected var _labels:Array;
      
      protected var background:BaseButton;
      
      protected var _dropdownWidth:Number;
      
      protected var inputField:TextInput;
      
      protected var highlightedCell:int = -1;
      
      protected var listOverIndex:uint;
      
      protected var editableValue:String;
      
      protected var _prompt:String;
      
      protected var isOpen:Boolean = false;
      
      protected var list:List;
      
      protected var _rowCount:uint = 5;
      
      protected var _editable:Boolean = false;
      
      private var collectionItemImport:SimpleCollectionItem;
      
      protected var currentIndex:int;
      
      public function ComboBox()
      {
         super();
      }
      
      public static function getStyleDefinition() : Object
      {
         return mergeStyles(defaultStyles,List.getStyleDefinition());
      }
      
      protected function drawList() : void
      {
         list.rowCount = Math.max(0,Math.min(_rowCount,list.dataProvider.length));
      }
      
      public function get imeMode() : String
      {
         return inputField.imeMode;
      }
      
      protected function onInputFieldFocusOut(param1:FocusEvent) : void
      {
         inputField.removeEventListener(ComponentEvent.ENTER,onEnter);
         selectedIndex = selectedIndex;
      }
      
      public function set imeMode(param1:String) : void
      {
         inputField.imeMode = param1;
      }
      
      protected function passEvent(param1:Event) : void
      {
         dispatchEvent(param1);
      }
      
      protected function calculateAvailableHeight() : Number
      {
         var _loc1_:Number = Number(getStyleValue("contentPadding"));
         return list.height - _loc1_ * 2;
      }
      
      public function get dropdown() : List
      {
         return list;
      }
      
      override protected function focusOutHandler(param1:FocusEvent) : void
      {
         isKeyDown = false;
         if(isOpen)
         {
            if(!param1.relatedObject || !list.contains(param1.relatedObject))
            {
               if(highlightedCell != -1 && highlightedCell != selectedIndex)
               {
                  selectedIndex = highlightedCell;
                  dispatchEvent(new Event(Event.CHANGE));
               }
               close();
            }
         }
         super.focusOutHandler(param1);
      }
      
      public function get selectedLabel() : String
      {
         if(editableValue != null)
         {
            return editableValue;
         }
         if(selectedIndex == -1)
         {
            return null;
         }
         return itemToLabel(selectedItem);
      }
      
      protected function onListChange(param1:Event) : void
      {
         editableValue = null;
         dispatchEvent(param1);
         invalidate(InvalidationType.SELECTED);
         if(isKeyDown)
         {
            return;
         }
         close();
      }
      
      public function get text() : String
      {
         return inputField.text;
      }
      
      protected function onEnter(param1:ComponentEvent) : void
      {
         param1.stopPropagation();
      }
      
      public function sortItemsOn(param1:String, param2:Object = null) : *
      {
         return list.sortItemsOn(param1,param2);
      }
      
      protected function handleDataChange(param1:DataChangeEvent) : void
      {
         invalidate(InvalidationType.DATA);
      }
      
      protected function onToggleListVisibility(param1:MouseEvent) : void
      {
         param1.stopPropagation();
         dispatchEvent(param1);
         if(isOpen)
         {
            close();
         }
         else
         {
            open();
            stage.addEventListener(MouseEvent.MOUSE_UP,onListItemUp,false,0,true);
         }
      }
      
      public function get dropdownWidth() : Number
      {
         return list.width;
      }
      
      protected function highlightCell(param1:int = -1) : void
      {
         var _loc2_:ICellRenderer = null;
         if(highlightedCell > -1)
         {
            _loc2_ = list.itemToCellRenderer(getItemAt(highlightedCell));
            if(_loc2_ != null)
            {
               _loc2_.setMouseState("up");
            }
         }
         if(param1 == -1)
         {
            return;
         }
         list.scrollToIndex(param1);
         list.drawNow();
         _loc2_ = list.itemToCellRenderer(getItemAt(param1));
         if(_loc2_ != null)
         {
            _loc2_.setMouseState("over");
            highlightedCell = param1;
         }
      }
      
      public function removeItemAt(param1:uint) : void
      {
         list.removeItemAt(param1);
         invalidate(InvalidationType.DATA);
      }
      
      override protected function draw() : void
      {
         var _loc1_:* = selectedIndex;
         if(_loc1_ == -1 && (prompt != null || editable || length == 0))
         {
            _loc1_ = Math.max(-1,Math.min(_loc1_,length - 1));
         }
         else
         {
            editableValue = null;
            _loc1_ = Math.max(0,Math.min(_loc1_,length - 1));
         }
         if(list.selectedIndex != _loc1_)
         {
            list.selectedIndex = _loc1_;
            invalidate(InvalidationType.SELECTED,false);
         }
         if(isInvalid(InvalidationType.STYLES))
         {
            setStyles();
            setEmbedFonts();
            invalidate(InvalidationType.SIZE,false);
         }
         if(isInvalid(InvalidationType.SIZE,InvalidationType.DATA,InvalidationType.STATE))
         {
            drawTextFormat();
            drawLayout();
            invalidate(InvalidationType.DATA);
         }
         if(isInvalid(InvalidationType.DATA))
         {
            drawList();
            invalidate(InvalidationType.SELECTED,true);
         }
         if(isInvalid(InvalidationType.SELECTED))
         {
            if(_loc1_ == -1 && editableValue != null)
            {
               inputField.text = editableValue;
            }
            else if(_loc1_ > -1)
            {
               if(length > 0)
               {
                  inputField.horizontalScrollPosition = 0;
                  inputField.text = itemToLabel(list.selectedItem);
               }
            }
            else if(_loc1_ == -1 && _prompt != null)
            {
               showPrompt();
            }
            else
            {
               inputField.text = "";
            }
            if(editable && selectedIndex > -1 && stage.focus == inputField.textField)
            {
               inputField.setSelection(0,inputField.length);
            }
         }
         drawTextField();
         super.draw();
      }
      
      public function get selectedItem() : Object
      {
         return list.selectedItem;
      }
      
      public function open() : void
      {
         currentIndex = selectedIndex;
         if(isOpen || length == 0)
         {
            return;
         }
         dispatchEvent(new Event(Event.OPEN));
         isOpen = true;
         addEventListener(Event.ENTER_FRAME,addCloseListener,false,0,true);
         positionList();
         list.scrollToSelected();
         stage.addChild(list);
      }
      
      override protected function configUI() : void
      {
         super.configUI();
         background = new BaseButton();
         background.focusEnabled = false;
         copyStylesToChild(background,BACKGROUND_STYLES);
         background.addEventListener(MouseEvent.MOUSE_DOWN,onToggleListVisibility,false,0,true);
         addChild(background);
         inputField = new TextInput();
         inputField.focusTarget = this as IFocusManagerComponent;
         inputField.focusEnabled = false;
         inputField.addEventListener(Event.CHANGE,onTextInput,false,0,true);
         addChild(inputField);
         list = new List();
         list.focusEnabled = false;
         copyStylesToChild(list,LIST_STYLES);
         list.addEventListener(Event.CHANGE,onListChange,false,0,true);
         list.addEventListener(ListEvent.ITEM_CLICK,onListChange,false,0,true);
         list.addEventListener(ListEvent.ITEM_ROLL_OUT,passEvent,false,0,true);
         list.addEventListener(ListEvent.ITEM_ROLL_OVER,passEvent,false,0,true);
         list.verticalScrollBar.addEventListener(Event.SCROLL,passEvent,false,0,true);
      }
      
      public function set text(param1:String) : void
      {
         if(!editable)
         {
            return;
         }
         inputField.text = param1;
      }
      
      public function addItem(param1:Object) : void
      {
         list.addItem(param1);
         invalidate(InvalidationType.DATA);
      }
      
      public function get editable() : Boolean
      {
         return _editable;
      }
      
      public function get labelField() : String
      {
         return list.labelField;
      }
      
      protected function positionList() : void
      {
         var _loc1_:Point = localToGlobal(new Point(0,0));
         list.x = _loc1_.x;
         if(_loc1_.y + height + list.height > stage.stageHeight)
         {
            list.y = _loc1_.y - list.height;
         }
         else
         {
            list.y = _loc1_.y + height;
         }
      }
      
      protected function onStageClick(param1:MouseEvent) : void
      {
         if(!isOpen)
         {
            return;
         }
         if(!contains(param1.target as DisplayObject) && !list.contains(param1.target as DisplayObject))
         {
            if(highlightedCell != -1)
            {
               selectedIndex = highlightedCell;
               dispatchEvent(new Event(Event.CHANGE));
            }
            close();
         }
      }
      
      public function set dropdownWidth(param1:Number) : void
      {
         _dropdownWidth = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      public function get prompt() : String
      {
         return _prompt;
      }
      
      override protected function keyDownHandler(param1:KeyboardEvent) : void
      {
         isKeyDown = true;
         if(param1.ctrlKey)
         {
            switch(param1.keyCode)
            {
               case Keyboard.UP:
                  if(highlightedCell > -1)
                  {
                     selectedIndex = highlightedCell;
                     dispatchEvent(new Event(Event.CHANGE));
                  }
                  close();
                  break;
               case Keyboard.DOWN:
                  open();
            }
            return;
         }
         param1.stopPropagation();
         var _loc2_:int = Math.max(calculateAvailableHeight() / list.rowHeight << 0,1);
         var _loc3_:uint = uint(selectedIndex);
         var _loc4_:Number = highlightedCell == -1 ? selectedIndex : highlightedCell;
         var _loc5_:int = -1;
         switch(param1.keyCode)
         {
            case Keyboard.SPACE:
               if(isOpen)
               {
                  close();
               }
               else
               {
                  open();
               }
               return;
            case Keyboard.ESCAPE:
               if(isOpen)
               {
                  if(highlightedCell > -1)
                  {
                     selectedIndex = selectedIndex;
                  }
                  close();
               }
               return;
            case Keyboard.UP:
               _loc5_ = Math.max(0,_loc4_ - 1);
               break;
            case Keyboard.DOWN:
               _loc5_ = Math.min(length - 1,_loc4_ + 1);
               break;
            case Keyboard.PAGE_UP:
               _loc5_ = Math.max(_loc4_ - _loc2_,0);
               break;
            case Keyboard.PAGE_DOWN:
               _loc5_ = Math.min(_loc4_ + _loc2_,length - 1);
               break;
            case Keyboard.HOME:
               _loc5_ = 0;
               break;
            case Keyboard.END:
               _loc5_ = length - 1;
               break;
            case Keyboard.ENTER:
               if(_editable && highlightedCell == -1)
               {
                  editableValue = inputField.text;
                  selectedIndex = -1;
               }
               else if(isOpen && highlightedCell > -1)
               {
                  editableValue = null;
                  selectedIndex = highlightedCell;
                  dispatchEvent(new Event(Event.CHANGE));
               }
               dispatchEvent(new ComponentEvent(ComponentEvent.ENTER));
               close();
               return;
            default:
               if(editable)
               {
                  break;
               }
               _loc5_ = list.getNextIndexAtLetter(String.fromCharCode(param1.keyCode),_loc4_);
         }
         if(_loc5_ > -1)
         {
            if(isOpen)
            {
               highlightCell(_loc5_);
               inputField.text = list.itemToLabel(getItemAt(_loc5_));
            }
            else
            {
               highlightCell();
               selectedIndex = _loc5_;
               dispatchEvent(new Event(Event.CHANGE));
            }
         }
      }
      
      public function get value() : String
      {
         var _loc1_:Object = null;
         if(editableValue != null)
         {
            return editableValue;
         }
         _loc1_ = selectedItem;
         if(!_editable && _loc1_.data != null)
         {
            return _loc1_.data;
         }
         return itemToLabel(_loc1_);
      }
      
      override protected function focusInHandler(param1:FocusEvent) : void
      {
         super.focusInHandler(param1);
         if(editable)
         {
            stage.focus = inputField.textField;
         }
      }
      
      public function set dataProvider(param1:DataProvider) : void
      {
         param1.addEventListener(DataChangeEvent.DATA_CHANGE,handleDataChange,false,0,true);
         list.dataProvider = param1;
         invalidate(InvalidationType.DATA);
      }
      
      public function get rowCount() : uint
      {
         return _rowCount;
      }
      
      public function set restrict(param1:String) : void
      {
         if(componentInspectorSetting && param1 == "")
         {
            param1 = null;
         }
         if(!_editable)
         {
            return;
         }
         inputField.restrict = param1;
      }
      
      public function replaceItemAt(param1:Object, param2:uint) : Object
      {
         return list.replaceItemAt(param1,param2);
      }
      
      public function removeAll() : void
      {
         list.removeAll();
         inputField.text = "";
         invalidate(InvalidationType.DATA);
      }
      
      protected function onTextInput(param1:Event) : void
      {
         param1.stopPropagation();
         if(!_editable)
         {
            return;
         }
         editableValue = inputField.text;
         selectedIndex = -1;
         dispatchEvent(new Event(Event.CHANGE));
      }
      
      protected function onInputFieldFocus(param1:FocusEvent) : void
      {
         inputField.addEventListener(ComponentEvent.ENTER,onEnter,false,0,true);
         close();
      }
      
      protected function onListItemUp(param1:MouseEvent) : void
      {
         stage.removeEventListener(MouseEvent.MOUSE_UP,onListItemUp);
         if(!(param1.target is ICellRenderer) || !list.contains(param1.target as DisplayObject))
         {
            return;
         }
         editableValue = null;
         var _loc2_:* = selectedIndex;
         selectedIndex = param1.target.listData.index;
         if(_loc2_ != selectedIndex)
         {
            dispatchEvent(new Event(Event.CHANGE));
         }
         close();
      }
      
      override protected function keyUpHandler(param1:KeyboardEvent) : void
      {
         isKeyDown = false;
      }
      
      protected function drawLayout() : void
      {
         var _loc1_:Number = getStyleValue("buttonWidth") as Number;
         var _loc2_:Number = getStyleValue("textPadding") as Number;
         background.setSize(width,height);
         inputField.x = inputField.y = _loc2_;
         inputField.setSize(width - _loc1_ - _loc2_,height - _loc2_);
         list.width = isNaN(_dropdownWidth) ? width : _dropdownWidth;
         background.enabled = enabled;
         background.drawNow();
      }
      
      public function set selectedItem(param1:Object) : void
      {
         list.selectedItem = param1;
         invalidate(InvalidationType.SELECTED);
      }
      
      public function getItemAt(param1:uint) : Object
      {
         return list.getItemAt(param1);
      }
      
      override protected function initializeAccessibility() : void
      {
         if(ComboBox.createAccessibilityImplementation != null)
         {
            ComboBox.createAccessibilityImplementation(this);
         }
      }
      
      public function itemToLabel(param1:Object) : String
      {
         if(param1 == null)
         {
            return "";
         }
         return list.itemToLabel(param1);
      }
      
      public function addItemAt(param1:Object, param2:uint) : void
      {
         list.addItemAt(param1,param2);
         invalidate(InvalidationType.DATA);
      }
      
      private function addCloseListener(param1:Event) : *
      {
         removeEventListener(Event.ENTER_FRAME,addCloseListener);
         if(!isOpen)
         {
            return;
         }
         stage.addEventListener(MouseEvent.MOUSE_DOWN,onStageClick,false,0,true);
      }
      
      protected function setEmbedFonts() : void
      {
         var _loc1_:Object = getStyleValue("embedFonts");
         if(_loc1_ != null)
         {
            inputField.textField.embedFonts = _loc1_;
         }
      }
      
      public function set rowCount(param1:uint) : void
      {
         _rowCount = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      public function removeItem(param1:Object) : Object
      {
         return list.removeItem(param1);
      }
      
      public function get dataProvider() : DataProvider
      {
         return list.dataProvider;
      }
      
      public function get restrict() : String
      {
         return inputField.restrict;
      }
      
      protected function showPrompt() : void
      {
         inputField.text = _prompt;
      }
      
      public function sortItems(... rest) : *
      {
         return list.sortItems.apply(list,rest);
      }
      
      public function set editable(param1:Boolean) : void
      {
         _editable = param1;
         drawTextField();
      }
      
      public function set labelField(param1:String) : void
      {
         list.labelField = param1;
         invalidate(InvalidationType.DATA);
      }
      
      public function get textField() : TextInput
      {
         return inputField;
      }
      
      public function set prompt(param1:String) : void
      {
         if(param1 == "")
         {
            _prompt = null;
         }
         else
         {
            _prompt = param1;
         }
         invalidate(InvalidationType.STATE);
      }
      
      public function set labelFunction(param1:Function) : void
      {
         list.labelFunction = param1;
         invalidate(InvalidationType.DATA);
      }
      
      protected function setStyles() : void
      {
         copyStylesToChild(background,BACKGROUND_STYLES);
         copyStylesToChild(list,LIST_STYLES);
      }
      
      public function get length() : int
      {
         return list.length;
      }
      
      protected function drawTextFormat() : void
      {
         var _loc1_:TextFormat = getStyleValue(_enabled ? "textFormat" : "disabledTextFormat") as TextFormat;
         if(_loc1_ == null)
         {
            _loc1_ = new TextFormat();
         }
         inputField.textField.defaultTextFormat = _loc1_;
         inputField.textField.setTextFormat(_loc1_);
         setEmbedFonts();
      }
      
      protected function drawTextField() : void
      {
         inputField.setStyle("upSkin","");
         inputField.setStyle("disabledSkin","");
         inputField.enabled = enabled;
         inputField.editable = _editable;
         inputField.textField.selectable = enabled && _editable;
         inputField.mouseEnabled = inputField.mouseChildren = enabled && _editable;
         inputField.focusEnabled = false;
         if(_editable)
         {
            inputField.addEventListener(FocusEvent.FOCUS_IN,onInputFieldFocus,false,0,true);
            inputField.addEventListener(FocusEvent.FOCUS_OUT,onInputFieldFocusOut,false,0,true);
         }
         else
         {
            inputField.removeEventListener(FocusEvent.FOCUS_IN,onInputFieldFocus);
            inputField.removeEventListener(FocusEvent.FOCUS_OUT,onInputFieldFocusOut);
         }
      }
      
      public function get labelFunction() : Function
      {
         return list.labelFunction;
      }
      
      public function set selectedIndex(param1:int) : void
      {
         list.selectedIndex = param1;
         highlightCell();
         invalidate(InvalidationType.SELECTED);
      }
      
      public function get selectedIndex() : int
      {
         return list.selectedIndex;
      }
      
      public function close() : void
      {
         highlightCell();
         highlightedCell = -1;
         if(!isOpen)
         {
            return;
         }
         dispatchEvent(new Event(Event.CLOSE));
         stage.removeEventListener(MouseEvent.MOUSE_DOWN,onStageClick);
         isOpen = false;
         stage.removeChild(list);
      }
   }
}

package fl.controls
{
   import fl.core.InvalidationType;
   import fl.core.UIComponent;
   import fl.events.ComponentEvent;
   import fl.managers.IFocusManagerComponent;
   import flash.display.DisplayObject;
   import flash.events.Event;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.text.TextField;
   import flash.text.TextFieldType;
   import flash.text.TextFormat;
   import flash.ui.Keyboard;
   
   public class LabelButton extends BaseButton implements IFocusManagerComponent
   {
      
      public static var createAccessibilityImplementation:Function;
      
      private static var defaultStyles:Object = {
         "icon":null,
         "upIcon":null,
         "downIcon":null,
         "overIcon":null,
         "disabledIcon":null,
         "selectedDisabledIcon":null,
         "selectedUpIcon":null,
         "selectedDownIcon":null,
         "selectedOverIcon":null,
         "textFormat":null,
         "disabledTextFormat":null,
         "textPadding":5,
         "embedFonts":false
      };
      
      public var textField:TextField;
      
      protected var _labelPlacement:String = "right";
      
      protected var _toggle:Boolean = false;
      
      protected var icon:DisplayObject;
      
      protected var oldMouseState:String;
      
      protected var _label:String = "Label";
      
      protected var mode:String = "center";
      
      public function LabelButton()
      {
         super();
      }
      
      public static function getStyleDefinition() : Object
      {
         return mergeStyles(defaultStyles,BaseButton.getStyleDefinition());
      }
      
      public function get label() : String
      {
         return _label;
      }
      
      public function set label(param1:String) : void
      {
         _label = param1;
         if(textField.text != _label)
         {
            textField.text = _label;
            dispatchEvent(new ComponentEvent(ComponentEvent.LABEL_CHANGE));
         }
         invalidate(InvalidationType.SIZE);
         invalidate(InvalidationType.STYLES);
      }
      
      public function get labelPlacement() : String
      {
         return _labelPlacement;
      }
      
      public function set labelPlacement(param1:String) : void
      {
         _labelPlacement = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      public function get toggle() : Boolean
      {
         return _toggle;
      }
      
      public function set toggle(param1:Boolean) : void
      {
         if(!param1 && super.selected)
         {
            selected = false;
         }
         _toggle = param1;
         if(_toggle)
         {
            addEventListener(MouseEvent.CLICK,toggleSelected,false,0,true);
         }
         else
         {
            removeEventListener(MouseEvent.CLICK,toggleSelected);
         }
         invalidate(InvalidationType.STATE);
      }
      
      protected function toggleSelected(param1:MouseEvent) : void
      {
         selected = !selected;
         dispatchEvent(new Event(Event.CHANGE,true));
      }
      
      override public function get selected() : Boolean
      {
         return _toggle ? _selected : false;
      }
      
      override public function set selected(param1:Boolean) : void
      {
         _selected = param1;
         if(_toggle)
         {
            invalidate(InvalidationType.STATE);
         }
      }
      
      override protected function configUI() : void
      {
         super.configUI();
         textField = new TextField();
         textField.type = TextFieldType.DYNAMIC;
         textField.selectable = false;
         addChild(textField);
      }
      
      override protected function draw() : void
      {
         if(textField.text != _label)
         {
            label = _label;
         }
         if(isInvalid(InvalidationType.STYLES,InvalidationType.STATE))
         {
            drawBackground();
            drawIcon();
            drawTextFormat();
            invalidate(InvalidationType.SIZE,false);
         }
         if(isInvalid(InvalidationType.SIZE))
         {
            drawLayout();
         }
         if(isInvalid(InvalidationType.SIZE,InvalidationType.STYLES))
         {
            if(isFocused && focusManager.showFocusIndicator)
            {
               drawFocus(true);
            }
         }
         validate();
      }
      
      protected function drawIcon() : void
      {
         var _loc1_:DisplayObject = icon;
         var _loc2_:* = enabled ? mouseState : "disabled";
         if(selected)
         {
            _loc2_ = "selected" + _loc2_.substr(0,1).toUpperCase() + _loc2_.substr(1);
         }
         _loc2_ += "Icon";
         var _loc3_:Object = getStyleValue(_loc2_);
         if(_loc3_ == null)
         {
            _loc3_ = getStyleValue("icon");
         }
         if(_loc3_ != null)
         {
            icon = getDisplayObjectInstance(_loc3_);
         }
         if(icon != null)
         {
            addChildAt(icon,1);
         }
         if(_loc1_ != null && _loc1_ != icon)
         {
            removeChild(_loc1_);
         }
      }
      
      protected function drawTextFormat() : void
      {
         var _loc1_:Object = UIComponent.getStyleDefinition();
         var _loc2_:TextFormat = enabled ? _loc1_.defaultTextFormat as TextFormat : _loc1_.defaultDisabledTextFormat as TextFormat;
         textField.setTextFormat(_loc2_);
         var _loc3_:TextFormat = getStyleValue(enabled ? "textFormat" : "disabledTextFormat") as TextFormat;
         if(_loc3_ != null)
         {
            textField.setTextFormat(_loc3_);
         }
         else
         {
            _loc3_ = _loc2_;
         }
         textField.defaultTextFormat = _loc3_;
         setEmbedFont();
      }
      
      protected function setEmbedFont() : *
      {
         var _loc1_:Object = getStyleValue("embedFonts");
         if(_loc1_ != null)
         {
            textField.embedFonts = _loc1_;
         }
      }
      
      override protected function drawLayout() : void
      {
         var _loc7_:Number = NaN;
         var _loc8_:Number = NaN;
         var _loc1_:Number = Number(getStyleValue("textPadding"));
         var _loc2_:String = icon == null && mode == "center" ? ButtonLabelPlacement.TOP : _labelPlacement;
         textField.height = textField.textHeight + 4;
         var _loc3_:Number = textField.textWidth + 4;
         var _loc4_:Number = textField.textHeight + 4;
         var _loc5_:Number = icon == null ? 0 : icon.width + _loc1_;
         var _loc6_:Number = icon == null ? 0 : icon.height + _loc1_;
         textField.visible = label.length > 0;
         if(icon != null)
         {
            icon.x = Math.round((width - icon.width) / 2);
            icon.y = Math.round((height - icon.height) / 2);
         }
         if(textField.visible == false)
         {
            textField.width = 0;
            textField.height = 0;
         }
         else if(_loc2_ == ButtonLabelPlacement.BOTTOM || _loc2_ == ButtonLabelPlacement.TOP)
         {
            _loc7_ = Math.max(0,Math.min(_loc3_,width - 2 * _loc1_));
            if(height - 2 > _loc4_)
            {
               _loc8_ = _loc4_;
            }
            else
            {
               _loc8_ = height - 2;
            }
            textField.width = _loc3_ = _loc7_;
            textField.height = _loc4_ = _loc8_;
            textField.x = Math.round((width - _loc3_) / 2);
            textField.y = Math.round((height - textField.height - _loc6_) / 2 + (_loc2_ == ButtonLabelPlacement.BOTTOM ? _loc6_ : 0));
            if(icon != null)
            {
               icon.y = Math.round(_loc2_ == ButtonLabelPlacement.BOTTOM ? textField.y - _loc6_ : textField.y + textField.height + _loc1_);
            }
         }
         else
         {
            _loc7_ = Math.max(0,Math.min(_loc3_,width - _loc5_ - 2 * _loc1_));
            textField.width = _loc3_ = _loc7_;
            textField.x = Math.round((width - _loc3_ - _loc5_) / 2 + (_loc2_ != ButtonLabelPlacement.LEFT ? _loc5_ : 0));
            textField.y = Math.round((height - textField.height) / 2);
            if(icon != null)
            {
               icon.x = Math.round(_loc2_ != ButtonLabelPlacement.LEFT ? textField.x - _loc5_ : textField.x + _loc3_ + _loc1_);
            }
         }
         super.drawLayout();
      }
      
      override protected function keyDownHandler(param1:KeyboardEvent) : void
      {
         if(!enabled)
         {
            return;
         }
         if(param1.keyCode == Keyboard.SPACE)
         {
            if(oldMouseState == null)
            {
               oldMouseState = mouseState;
            }
            setMouseState("down");
            startPress();
         }
      }
      
      override protected function keyUpHandler(param1:KeyboardEvent) : void
      {
         if(!enabled)
         {
            return;
         }
         if(param1.keyCode == Keyboard.SPACE)
         {
            setMouseState(oldMouseState);
            oldMouseState = null;
            endPress();
            dispatchEvent(new MouseEvent(MouseEvent.CLICK));
         }
      }
      
      override protected function initializeAccessibility() : void
      {
         if(LabelButton.createAccessibilityImplementation != null)
         {
            LabelButton.createAccessibilityImplementation(this);
         }
      }
   }
}

package fl.controls
{
   import fl.controls.listClasses.ICellRenderer;
   import fl.controls.listClasses.ListData;
   import fl.core.InvalidationType;
   import fl.core.UIComponent;
   import fl.managers.IFocusManagerComponent;
   import flash.display.DisplayObject;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.geom.Rectangle;
   import flash.ui.Keyboard;
   import flash.utils.Dictionary;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol141")]
   public class List extends SelectableList implements IFocusManagerComponent
   {
      
      public static var createAccessibilityImplementation:Function;
      
      private static var defaultStyles:Object = {
         "focusRectSkin":null,
         "focusRectPadding":null
      };
      
      protected var _iconField:String = "icon";
      
      protected var _labelField:String = "label";
      
      protected var _iconFunction:Function;
      
      protected var _rowHeight:Number = 20;
      
      protected var _cellRenderer:Object;
      
      protected var _labelFunction:Function;
      
      public function List()
      {
         super();
      }
      
      public static function getStyleDefinition() : Object
      {
         return mergeStyles(defaultStyles,SelectableList.getStyleDefinition());
      }
      
      public function get iconField() : String
      {
         return _iconField;
      }
      
      public function set iconField(param1:String) : void
      {
         if(param1 == _iconField)
         {
            return;
         }
         _iconField = param1;
         invalidate(InvalidationType.DATA);
      }
      
      public function set labelField(param1:String) : void
      {
         if(param1 == _labelField)
         {
            return;
         }
         _labelField = param1;
         invalidate(InvalidationType.DATA);
      }
      
      public function set rowHeight(param1:Number) : void
      {
         _rowHeight = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      override protected function draw() : void
      {
         var _loc1_:* = contentHeight != rowHeight * length;
         contentHeight = rowHeight * length;
         if(isInvalid(InvalidationType.STYLES))
         {
            setStyles();
            drawBackground();
            if(contentPadding != getStyleValue("contentPadding"))
            {
               invalidate(InvalidationType.SIZE,false);
            }
            if(_cellRenderer != getStyleValue("cellRenderer"))
            {
               _invalidateList();
               _cellRenderer = getStyleValue("cellRenderer");
            }
         }
         if(isInvalid(InvalidationType.SIZE,InvalidationType.STATE) || _loc1_)
         {
            drawLayout();
         }
         if(isInvalid(InvalidationType.RENDERER_STYLES))
         {
            updateRendererStyles();
         }
         if(isInvalid(InvalidationType.STYLES,InvalidationType.SIZE,InvalidationType.DATA,InvalidationType.SCROLL,InvalidationType.SELECTED))
         {
            drawList();
         }
         updateChildren();
         validate();
      }
      
      override public function get rowCount() : uint
      {
         return Math.ceil(calculateAvailableHeight() / rowHeight);
      }
      
      override protected function configUI() : void
      {
         useFixedHorizontalScrolling = true;
         _horizontalScrollPolicy = ScrollPolicy.AUTO;
         _verticalScrollPolicy = ScrollPolicy.AUTO;
         super.configUI();
      }
      
      public function set labelFunction(param1:Function) : void
      {
         if(_labelFunction == param1)
         {
            return;
         }
         _labelFunction = param1;
         invalidate(InvalidationType.DATA);
      }
      
      override public function scrollToIndex(param1:int) : void
      {
         drawNow();
         var _loc2_:uint = Math.floor((_verticalScrollPosition + availableHeight) / rowHeight) - 1;
         var _loc3_:uint = Math.ceil(_verticalScrollPosition / rowHeight);
         if(param1 < _loc3_)
         {
            verticalScrollPosition = param1 * rowHeight;
         }
         else if(param1 > _loc2_)
         {
            verticalScrollPosition = (param1 + 1) * rowHeight - availableHeight;
         }
      }
      
      override protected function moveSelectionHorizontally(param1:uint, param2:Boolean, param3:Boolean) : void
      {
      }
      
      override protected function setHorizontalScrollPosition(param1:Number, param2:Boolean = false) : void
      {
         list.x = -param1;
         super.setHorizontalScrollPosition(param1,true);
      }
      
      override protected function moveSelectionVertically(param1:uint, param2:Boolean, param3:Boolean) : void
      {
         var _loc4_:int = Math.max(Math.floor(calculateAvailableHeight() / rowHeight),1);
         var _loc5_:int = -1;
         var _loc6_:int = 0;
         switch(param1)
         {
            case Keyboard.UP:
               if(caretIndex > 0)
               {
                  _loc5_ = caretIndex - 1;
               }
               break;
            case Keyboard.DOWN:
               if(caretIndex < length - 1)
               {
                  _loc5_ = caretIndex + 1;
               }
               break;
            case Keyboard.PAGE_UP:
               if(caretIndex > 0)
               {
                  _loc5_ = Math.max(caretIndex - _loc4_,0);
               }
               break;
            case Keyboard.PAGE_DOWN:
               if(caretIndex < length - 1)
               {
                  _loc5_ = Math.min(caretIndex + _loc4_,length - 1);
               }
               break;
            case Keyboard.HOME:
               if(caretIndex > 0)
               {
                  _loc5_ = 0;
               }
               break;
            case Keyboard.END:
               if(caretIndex < length - 1)
               {
                  _loc5_ = int(length - 1);
               }
         }
         if(_loc5_ >= 0)
         {
            doKeySelection(_loc5_,param2,param3);
            scrollToSelected();
         }
      }
      
      protected function doKeySelection(param1:int, param2:Boolean, param3:Boolean) : void
      {
         var _loc5_:int = 0;
         var _loc6_:Array = null;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc4_:Boolean = false;
         if(param2)
         {
            _loc6_ = [];
            _loc7_ = lastCaretIndex;
            _loc8_ = param1;
            if(_loc7_ == -1)
            {
               _loc7_ = caretIndex != -1 ? caretIndex : param1;
            }
            if(_loc7_ > _loc8_)
            {
               _loc8_ = _loc7_;
               _loc7_ = param1;
            }
            _loc5_ = _loc7_;
            while(_loc5_ <= _loc8_)
            {
               _loc6_.push(_loc5_);
               _loc5_++;
            }
            selectedIndices = _loc6_;
            caretIndex = param1;
            _loc4_ = true;
         }
         else
         {
            selectedIndex = param1;
            caretIndex = lastCaretIndex = param1;
            _loc4_ = true;
         }
         if(_loc4_)
         {
            dispatchEvent(new Event(Event.CHANGE));
         }
         invalidate(InvalidationType.DATA);
      }
      
      public function get rowHeight() : Number
      {
         return _rowHeight;
      }
      
      override protected function initializeAccessibility() : void
      {
         if(List.createAccessibilityImplementation != null)
         {
            List.createAccessibilityImplementation(this);
         }
      }
      
      public function get labelField() : String
      {
         return _labelField;
      }
      
      public function set iconFunction(param1:Function) : void
      {
         if(_iconFunction == param1)
         {
            return;
         }
         _iconFunction = param1;
         invalidate(InvalidationType.DATA);
      }
      
      public function set rowCount(param1:uint) : void
      {
         var _loc2_:Number = Number(getStyleValue("contentPadding"));
         var _loc3_:Number = _horizontalScrollPolicy == ScrollPolicy.ON || _horizontalScrollPolicy == ScrollPolicy.AUTO && _maxHorizontalScrollPosition > 0 ? 15 : 0;
         height = rowHeight * param1 + 2 * _loc2_ + _loc3_;
      }
      
      public function get labelFunction() : Function
      {
         return _labelFunction;
      }
      
      override protected function setVerticalScrollPosition(param1:Number, param2:Boolean = false) : void
      {
         invalidate(InvalidationType.SCROLL);
         super.setVerticalScrollPosition(param1,true);
      }
      
      override protected function drawList() : void
      {
         var _loc4_:uint = 0;
         var _loc5_:Object = null;
         var _loc6_:ICellRenderer = null;
         var _loc9_:Boolean = false;
         var _loc10_:String = null;
         var _loc11_:Object = null;
         var _loc12_:Sprite = null;
         var _loc13_:String = null;
         listHolder.x = listHolder.y = contentPadding;
         var _loc1_:Rectangle = listHolder.scrollRect;
         _loc1_.x = _horizontalScrollPosition;
         _loc1_.y = Math.floor(_verticalScrollPosition) % rowHeight;
         listHolder.scrollRect = _loc1_;
         listHolder.cacheAsBitmap = useBitmapScrolling;
         var _loc2_:uint = Math.floor(_verticalScrollPosition / rowHeight);
         var _loc3_:uint = Math.min(length,_loc2_ + rowCount + 1);
         var _loc7_:Dictionary = renderedItems = new Dictionary(true);
         _loc4_ = _loc2_;
         while(_loc4_ < _loc3_)
         {
            _loc7_[_dataProvider.getItemAt(_loc4_)] = true;
            _loc4_++;
         }
         var _loc8_:Dictionary = new Dictionary(true);
         while(activeCellRenderers.length > 0)
         {
            _loc6_ = activeCellRenderers.pop() as ICellRenderer;
            _loc5_ = _loc6_.data;
            if(_loc7_[_loc5_] == null || invalidItems[_loc5_] == true)
            {
               availableCellRenderers.push(_loc6_);
            }
            else
            {
               _loc8_[_loc5_] = _loc6_;
               invalidItems[_loc5_] = true;
            }
            list.removeChild(_loc6_ as DisplayObject);
         }
         invalidItems = new Dictionary(true);
         _loc4_ = _loc2_;
         while(_loc4_ < _loc3_)
         {
            _loc9_ = false;
            _loc5_ = _dataProvider.getItemAt(_loc4_);
            if(_loc8_[_loc5_] != null)
            {
               _loc9_ = true;
               _loc6_ = _loc8_[_loc5_];
               delete _loc8_[_loc5_];
            }
            else if(availableCellRenderers.length > 0)
            {
               _loc6_ = availableCellRenderers.pop() as ICellRenderer;
            }
            else
            {
               _loc6_ = getDisplayObjectInstance(getStyleValue("cellRenderer")) as ICellRenderer;
               _loc12_ = _loc6_ as Sprite;
               if(_loc12_ != null)
               {
                  _loc12_.addEventListener(MouseEvent.CLICK,handleCellRendererClick,false,0,true);
                  _loc12_.addEventListener(MouseEvent.ROLL_OVER,handleCellRendererMouseEvent,false,0,true);
                  _loc12_.addEventListener(MouseEvent.ROLL_OUT,handleCellRendererMouseEvent,false,0,true);
                  _loc12_.addEventListener(Event.CHANGE,handleCellRendererChange,false,0,true);
                  _loc12_.doubleClickEnabled = true;
                  _loc12_.addEventListener(MouseEvent.DOUBLE_CLICK,handleCellRendererDoubleClick,false,0,true);
                  if(_loc12_.hasOwnProperty("setStyle"))
                  {
                     for(_loc13_ in rendererStyles)
                     {
                        _loc12_["setStyle"](_loc13_,rendererStyles[_loc13_]);
                     }
                  }
               }
            }
            list.addChild(_loc6_ as Sprite);
            activeCellRenderers.push(_loc6_);
            _loc6_.y = rowHeight * (_loc4_ - _loc2_);
            _loc6_.setSize(availableWidth + _maxHorizontalScrollPosition,rowHeight);
            _loc10_ = itemToLabel(_loc5_);
            _loc11_ = null;
            if(_iconFunction != null)
            {
               _loc11_ = _iconFunction(_loc5_);
            }
            else if(_iconField != null)
            {
               _loc11_ = _loc5_[_iconField];
            }
            if(!_loc9_)
            {
               _loc6_.data = _loc5_;
            }
            _loc6_.listData = new ListData(_loc10_,_loc11_,this,_loc4_,_loc4_,0);
            _loc6_.selected = _selectedIndices.indexOf(_loc4_) != -1;
            if(_loc6_ is UIComponent)
            {
               (_loc6_ as UIComponent).drawNow();
            }
            _loc4_++;
         }
      }
      
      override protected function keyDownHandler(param1:KeyboardEvent) : void
      {
         var _loc2_:int = 0;
         if(!selectable)
         {
            return;
         }
         switch(param1.keyCode)
         {
            case Keyboard.UP:
            case Keyboard.DOWN:
            case Keyboard.END:
            case Keyboard.HOME:
            case Keyboard.PAGE_UP:
            case Keyboard.PAGE_DOWN:
               moveSelectionVertically(param1.keyCode,param1.shiftKey && _allowMultipleSelection,param1.ctrlKey && _allowMultipleSelection);
               break;
            case Keyboard.LEFT:
            case Keyboard.RIGHT:
               moveSelectionHorizontally(param1.keyCode,param1.shiftKey && _allowMultipleSelection,param1.ctrlKey && _allowMultipleSelection);
               break;
            case Keyboard.SPACE:
               if(caretIndex == -1)
               {
                  caretIndex = 0;
               }
               doKeySelection(caretIndex,param1.shiftKey,param1.ctrlKey);
               scrollToSelected();
               break;
            default:
               _loc2_ = getNextIndexAtLetter(String.fromCharCode(param1.keyCode),selectedIndex);
               if(_loc2_ > -1)
               {
                  selectedIndex = _loc2_;
                  scrollToSelected();
               }
         }
         param1.stopPropagation();
      }
      
      public function get iconFunction() : Function
      {
         return _iconFunction;
      }
      
      override public function itemToLabel(param1:Object) : String
      {
         if(_labelFunction != null)
         {
            return String(_labelFunction(param1));
         }
         return param1[_labelField] != null ? String(param1[_labelField]) : "";
      }
      
      protected function calculateAvailableHeight() : Number
      {
         var _loc1_:Number = Number(getStyleValue("contentPadding"));
         return height - _loc1_ * 2 - (_horizontalScrollPolicy == ScrollPolicy.ON || _horizontalScrollPolicy == ScrollPolicy.AUTO && _maxHorizontalScrollPosition > 0 ? 15 : 0);
      }
   }
}

package fl.controls
{
   import fl.core.InvalidationType;
   import fl.core.UIComponent;
   import fl.events.ComponentEvent;
   import fl.events.ScrollEvent;
   import flash.events.MouseEvent;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol38")]
   public class ScrollBar extends UIComponent
   {
      
      public static const WIDTH:Number = 15;
      
      private static var defaultStyles:Object = {
         "downArrowDisabledSkin":"ScrollArrowDown_disabledSkin",
         "downArrowDownSkin":"ScrollArrowDown_downSkin",
         "downArrowOverSkin":"ScrollArrowDown_overSkin",
         "downArrowUpSkin":"ScrollArrowDown_upSkin",
         "thumbDisabledSkin":"ScrollThumb_upSkin",
         "thumbDownSkin":"ScrollThumb_downSkin",
         "thumbOverSkin":"ScrollThumb_overSkin",
         "thumbUpSkin":"ScrollThumb_upSkin",
         "trackDisabledSkin":"ScrollTrack_skin",
         "trackDownSkin":"ScrollTrack_skin",
         "trackOverSkin":"ScrollTrack_skin",
         "trackUpSkin":"ScrollTrack_skin",
         "upArrowDisabledSkin":"ScrollArrowUp_disabledSkin",
         "upArrowDownSkin":"ScrollArrowUp_downSkin",
         "upArrowOverSkin":"ScrollArrowUp_overSkin",
         "upArrowUpSkin":"ScrollArrowUp_upSkin",
         "thumbIcon":"ScrollBar_thumbIcon",
         "repeatDelay":500,
         "repeatInterval":35
      };
      
      protected static const DOWN_ARROW_STYLES:Object = {
         "disabledSkin":"downArrowDisabledSkin",
         "downSkin":"downArrowDownSkin",
         "overSkin":"downArrowOverSkin",
         "upSkin":"downArrowUpSkin",
         "repeatDelay":"repeatDelay",
         "repeatInterval":"repeatInterval"
      };
      
      protected static const THUMB_STYLES:Object = {
         "disabledSkin":"thumbDisabledSkin",
         "downSkin":"thumbDownSkin",
         "overSkin":"thumbOverSkin",
         "upSkin":"thumbUpSkin",
         "icon":"thumbIcon",
         "textPadding":0
      };
      
      protected static const TRACK_STYLES:Object = {
         "disabledSkin":"trackDisabledSkin",
         "downSkin":"trackDownSkin",
         "overSkin":"trackOverSkin",
         "upSkin":"trackUpSkin",
         "repeatDelay":"repeatDelay",
         "repeatInterval":"repeatInterval"
      };
      
      protected static const UP_ARROW_STYLES:Object = {
         "disabledSkin":"upArrowDisabledSkin",
         "downSkin":"upArrowDownSkin",
         "overSkin":"upArrowOverSkin",
         "upSkin":"upArrowUpSkin",
         "repeatDelay":"repeatDelay",
         "repeatInterval":"repeatInterval"
      };
      
      private var _direction:String = "vertical";
      
      private var _minScrollPosition:Number = 0;
      
      private var _pageSize:Number = 10;
      
      private var _maxScrollPosition:Number = 0;
      
      protected var downArrow:BaseButton;
      
      private var _lineScrollSize:Number = 1;
      
      protected var upArrow:BaseButton;
      
      private var _scrollPosition:Number = 0;
      
      private var thumbScrollOffset:Number;
      
      protected var track:BaseButton;
      
      protected var thumb:LabelButton;
      
      protected var inDrag:Boolean = false;
      
      private var _pageScrollSize:Number = 0;
      
      public function ScrollBar()
      {
         super();
         setStyles();
         focusEnabled = false;
      }
      
      public static function getStyleDefinition() : Object
      {
         return defaultStyles;
      }
      
      override public function set enabled(param1:Boolean) : void
      {
         super.enabled = param1;
         downArrow.enabled = track.enabled = thumb.enabled = upArrow.enabled = enabled && _maxScrollPosition > _minScrollPosition;
         updateThumb();
      }
      
      override public function setSize(param1:Number, param2:Number) : void
      {
         if(_direction == ScrollBarDirection.HORIZONTAL)
         {
            super.setSize(param2,param1);
         }
         else
         {
            super.setSize(param1,param2);
         }
      }
      
      public function set lineScrollSize(param1:Number) : void
      {
         if(param1 > 0)
         {
            _lineScrollSize = param1;
         }
      }
      
      public function get minScrollPosition() : Number
      {
         return _minScrollPosition;
      }
      
      protected function updateThumb() : void
      {
         var _loc1_:Number = _maxScrollPosition - _minScrollPosition + _pageSize;
         if(track.height <= 12 || _maxScrollPosition <= _minScrollPosition || (_loc1_ == 0 || isNaN(_loc1_)))
         {
            thumb.height = 12;
            thumb.visible = false;
         }
         else
         {
            thumb.height = Math.max(13,_pageSize / _loc1_ * track.height);
            thumb.y = track.y + (track.height - thumb.height) * ((_scrollPosition - _minScrollPosition) / (_maxScrollPosition - _minScrollPosition));
            thumb.visible = enabled;
         }
      }
      
      public function set minScrollPosition(param1:Number) : void
      {
         setScrollProperties(_pageSize,param1,_maxScrollPosition);
      }
      
      public function get lineScrollSize() : Number
      {
         return _lineScrollSize;
      }
      
      public function setScrollPosition(param1:Number, param2:Boolean = true) : void
      {
         var _loc3_:Number = scrollPosition;
         _scrollPosition = Math.max(_minScrollPosition,Math.min(_maxScrollPosition,param1));
         if(_loc3_ == _scrollPosition)
         {
            return;
         }
         if(param2)
         {
            dispatchEvent(new ScrollEvent(_direction,scrollPosition - _loc3_,scrollPosition));
         }
         updateThumb();
      }
      
      public function get maxScrollPosition() : Number
      {
         return _maxScrollPosition;
      }
      
      public function get scrollPosition() : Number
      {
         return _scrollPosition;
      }
      
      override public function get height() : Number
      {
         return _direction == ScrollBarDirection.HORIZONTAL ? super.width : super.height;
      }
      
      public function get pageSize() : Number
      {
         return _pageSize;
      }
      
      public function set maxScrollPosition(param1:Number) : void
      {
         setScrollProperties(_pageSize,_minScrollPosition,param1);
      }
      
      protected function thumbReleaseHandler(param1:MouseEvent) : void
      {
         inDrag = false;
         mouseChildren = true;
         thumb.mouseStateLocked = false;
         stage.removeEventListener(MouseEvent.MOUSE_MOVE,handleThumbDrag);
         stage.removeEventListener(MouseEvent.MOUSE_UP,thumbReleaseHandler);
      }
      
      public function set pageScrollSize(param1:Number) : void
      {
         if(param1 >= 0)
         {
            _pageScrollSize = param1;
         }
      }
      
      public function set scrollPosition(param1:Number) : void
      {
         setScrollPosition(param1,true);
      }
      
      override public function get enabled() : Boolean
      {
         return super.enabled;
      }
      
      override protected function draw() : void
      {
         var _loc1_:Number = NaN;
         if(isInvalid(InvalidationType.SIZE))
         {
            _loc1_ = super.height;
            downArrow.move(0,Math.max(upArrow.height,_loc1_ - downArrow.height));
            track.setSize(WIDTH,Math.max(0,_loc1_ - (downArrow.height + upArrow.height)));
            updateThumb();
         }
         if(isInvalid(InvalidationType.STYLES,InvalidationType.STATE))
         {
            setStyles();
         }
         downArrow.drawNow();
         upArrow.drawNow();
         track.drawNow();
         thumb.drawNow();
         validate();
      }
      
      override public function get width() : Number
      {
         return _direction == ScrollBarDirection.HORIZONTAL ? super.height : super.width;
      }
      
      override protected function configUI() : void
      {
         super.configUI();
         track = new BaseButton();
         track.move(0,14);
         track.useHandCursor = false;
         track.autoRepeat = true;
         track.focusEnabled = false;
         addChild(track);
         thumb = new LabelButton();
         thumb.label = "";
         thumb.setSize(WIDTH,15);
         thumb.move(0,15);
         thumb.focusEnabled = false;
         addChild(thumb);
         downArrow = new BaseButton();
         downArrow.setSize(WIDTH,14);
         downArrow.autoRepeat = true;
         downArrow.focusEnabled = false;
         addChild(downArrow);
         upArrow = new BaseButton();
         upArrow.setSize(WIDTH,14);
         upArrow.move(0,0);
         upArrow.autoRepeat = true;
         upArrow.focusEnabled = false;
         addChild(upArrow);
         upArrow.addEventListener(ComponentEvent.BUTTON_DOWN,scrollPressHandler,false,0,true);
         downArrow.addEventListener(ComponentEvent.BUTTON_DOWN,scrollPressHandler,false,0,true);
         track.addEventListener(ComponentEvent.BUTTON_DOWN,scrollPressHandler,false,0,true);
         thumb.addEventListener(MouseEvent.MOUSE_DOWN,thumbPressHandler,false,0,true);
         enabled = false;
      }
      
      public function set pageSize(param1:Number) : void
      {
         if(param1 > 0)
         {
            _pageSize = param1;
         }
      }
      
      public function setScrollProperties(param1:Number, param2:Number, param3:Number, param4:Number = 0) : void
      {
         this.pageSize = param1;
         _minScrollPosition = param2;
         _maxScrollPosition = param3;
         if(param4 >= 0)
         {
            _pageScrollSize = param4;
         }
         enabled = _maxScrollPosition > _minScrollPosition;
         setScrollPosition(_scrollPosition,false);
         updateThumb();
      }
      
      public function get pageScrollSize() : Number
      {
         return _pageScrollSize == 0 ? _pageSize : _pageScrollSize;
      }
      
      protected function handleThumbDrag(param1:MouseEvent) : void
      {
         var _loc2_:Number = Math.max(0,Math.min(track.height - thumb.height,mouseY - track.y - thumbScrollOffset));
         setScrollPosition(_loc2_ / (track.height - thumb.height) * (_maxScrollPosition - _minScrollPosition) + _minScrollPosition);
      }
      
      protected function setStyles() : void
      {
         copyStylesToChild(downArrow,DOWN_ARROW_STYLES);
         copyStylesToChild(thumb,THUMB_STYLES);
         copyStylesToChild(track,TRACK_STYLES);
         copyStylesToChild(upArrow,UP_ARROW_STYLES);
      }
      
      protected function scrollPressHandler(param1:ComponentEvent) : void
      {
         var _loc2_:Number = NaN;
         var _loc3_:Number = NaN;
         param1.stopImmediatePropagation();
         if(param1.currentTarget == upArrow)
         {
            setScrollPosition(_scrollPosition - _lineScrollSize);
         }
         else if(param1.currentTarget == downArrow)
         {
            setScrollPosition(_scrollPosition + _lineScrollSize);
         }
         else
         {
            _loc2_ = track.mouseY / track.height * (_maxScrollPosition - _minScrollPosition) + _minScrollPosition;
            _loc3_ = pageScrollSize == 0 ? pageSize : pageScrollSize;
            if(_scrollPosition < _loc2_)
            {
               setScrollPosition(Math.min(_loc2_,_scrollPosition + _loc3_));
            }
            else if(_scrollPosition > _loc2_)
            {
               setScrollPosition(Math.max(_loc2_,_scrollPosition - _loc3_));
            }
         }
      }
      
      protected function thumbPressHandler(param1:MouseEvent) : void
      {
         inDrag = true;
         thumbScrollOffset = mouseY - thumb.y;
         thumb.mouseStateLocked = true;
         mouseChildren = false;
         stage.addEventListener(MouseEvent.MOUSE_MOVE,handleThumbDrag,false,0,true);
         stage.addEventListener(MouseEvent.MOUSE_UP,thumbReleaseHandler,false,0,true);
      }
      
      public function set direction(param1:String) : void
      {
         if(_direction == param1)
         {
            return;
         }
         _direction = param1;
         if(isLivePreview)
         {
            return;
         }
         setScaleY(1);
         var _loc2_:* = _direction == ScrollBarDirection.HORIZONTAL;
         if(_loc2_ && componentInspectorSetting)
         {
            if(rotation == 90)
            {
               return;
            }
            setScaleX(-1);
            rotation = -90;
         }
         if(!componentInspectorSetting)
         {
            if(_loc2_ && rotation == 0)
            {
               rotation = -90;
               setScaleX(-1);
            }
            else if(!_loc2_ && rotation == -90)
            {
               rotation = 0;
               setScaleX(1);
            }
         }
         invalidate(InvalidationType.SIZE);
      }
      
      public function get direction() : String
      {
         return _direction;
      }
   }
}

package fl.controls
{
   public class ScrollBarDirection
   {
      
      public static const VERTICAL:String = "vertical";
      
      public static const HORIZONTAL:String = "horizontal";
      
      public function ScrollBarDirection()
      {
         super();
      }
   }
}

package fl.controls
{
   public class ScrollPolicy
   {
      
      public static const ON:String = "on";
      
      public static const AUTO:String = "auto";
      
      public static const OFF:String = "off";
      
      public function ScrollPolicy()
      {
         super();
      }
   }
}

package fl.controls
{
   import fl.containers.BaseScrollPane;
   import fl.controls.listClasses.CellRenderer;
   import fl.controls.listClasses.ICellRenderer;
   import fl.core.InvalidationType;
   import fl.data.DataProvider;
   import fl.data.SimpleCollectionItem;
   import fl.events.DataChangeEvent;
   import fl.events.DataChangeType;
   import fl.events.ListEvent;
   import fl.events.ScrollEvent;
   import fl.managers.IFocusManagerComponent;
   import flash.display.DisplayObject;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.ui.Keyboard;
   import flash.utils.Dictionary;
   
   public class SelectableList extends BaseScrollPane implements IFocusManagerComponent
   {
      
      public static var createAccessibilityImplementation:Function;
      
      private static var defaultStyles:Object = {
         "skin":"List_skin",
         "cellRenderer":CellRenderer,
         "contentPadding":null,
         "disabledAlpha":null
      };
      
      protected var invalidItems:Dictionary;
      
      protected var renderedItems:Dictionary;
      
      protected var caretIndex:int = -1;
      
      protected var updatedRendererStyles:Object;
      
      protected var _allowMultipleSelection:Boolean = false;
      
      protected var lastCaretIndex:int = -1;
      
      protected var _verticalScrollPosition:Number;
      
      protected var _selectedIndices:Array;
      
      protected var preChangeItems:Array;
      
      protected var activeCellRenderers:Array;
      
      protected var availableCellRenderers:Array;
      
      protected var rendererStyles:Object;
      
      protected var list:Sprite;
      
      protected var _dataProvider:DataProvider;
      
      protected var _horizontalScrollPosition:Number;
      
      private var collectionItemImport:SimpleCollectionItem;
      
      protected var listHolder:Sprite;
      
      protected var _selectable:Boolean = true;
      
      public function SelectableList()
      {
         super();
         activeCellRenderers = [];
         availableCellRenderers = [];
         invalidItems = new Dictionary(true);
         renderedItems = new Dictionary(true);
         _selectedIndices = [];
         if(dataProvider == null)
         {
            dataProvider = new DataProvider();
         }
         verticalScrollPolicy = ScrollPolicy.AUTO;
         rendererStyles = {};
         updatedRendererStyles = {};
      }
      
      public static function getStyleDefinition() : Object
      {
         return mergeStyles(defaultStyles,BaseScrollPane.getStyleDefinition());
      }
      
      protected function drawList() : void
      {
      }
      
      protected function moveSelectionHorizontally(param1:uint, param2:Boolean, param3:Boolean) : void
      {
      }
      
      public function get allowMultipleSelection() : Boolean
      {
         return _allowMultipleSelection;
      }
      
      protected function onPreChange(param1:DataChangeEvent) : void
      {
         switch(param1.changeType)
         {
            case DataChangeType.REMOVE:
            case DataChangeType.ADD:
            case DataChangeType.INVALIDATE:
            case DataChangeType.REMOVE_ALL:
            case DataChangeType.REPLACE:
            case DataChangeType.INVALIDATE_ALL:
               break;
            default:
               preChangeItems = selectedItems;
         }
      }
      
      public function set selectedIndices(param1:Array) : void
      {
         if(!_selectable)
         {
            return;
         }
         _selectedIndices = param1 == null ? [] : param1.concat();
         invalidate(InvalidationType.SELECTED);
      }
      
      public function isItemSelected(param1:Object) : Boolean
      {
         return selectedItems.indexOf(param1) > -1;
      }
      
      public function set allowMultipleSelection(param1:Boolean) : void
      {
         if(param1 == _allowMultipleSelection)
         {
            return;
         }
         _allowMultipleSelection = param1;
         if(!param1 && _selectedIndices.length > 1)
         {
            _selectedIndices = [_selectedIndices.pop()];
            invalidate(InvalidationType.DATA);
         }
      }
      
      override protected function setVerticalScrollPosition(param1:Number, param2:Boolean = false) : void
      {
         if(param1 == _verticalScrollPosition)
         {
            return;
         }
         var _loc3_:Number = param1 - _verticalScrollPosition;
         _verticalScrollPosition = param1;
         if(param2)
         {
            dispatchEvent(new ScrollEvent(ScrollBarDirection.VERTICAL,_loc3_,param1));
         }
      }
      
      public function sortItemsOn(param1:String, param2:Object = null) : *
      {
         return _dataProvider.sortOn(param1,param2);
      }
      
      public function getNextIndexAtLetter(param1:String, param2:int = -1) : int
      {
         var _loc5_:Number = NaN;
         var _loc6_:Object = null;
         var _loc7_:String = null;
         if(length == 0)
         {
            return -1;
         }
         param1 = param1.toUpperCase();
         var _loc3_:int = int(length - 1);
         var _loc4_:Number = 0;
         while(_loc4_ < _loc3_)
         {
            _loc5_ = param2 + 1 + _loc4_;
            if(_loc5_ > length - 1)
            {
               _loc5_ -= length;
            }
            _loc6_ = getItemAt(_loc5_);
            if(_loc6_ == null)
            {
               break;
            }
            _loc7_ = itemToLabel(_loc6_);
            if(_loc7_ != null)
            {
               if(_loc7_.charAt(0).toUpperCase() == param1)
               {
                  return _loc5_;
               }
            }
            _loc4_++;
         }
         return -1;
      }
      
      override protected function draw() : void
      {
         super.draw();
      }
      
      public function removeItemAt(param1:uint) : Object
      {
         return _dataProvider.removeItemAt(param1);
      }
      
      public function get selectedItem() : Object
      {
         return _selectedIndices.length == 0 ? null : _dataProvider.getItemAt(selectedIndex);
      }
      
      protected function handleDataChange(param1:DataChangeEvent) : void
      {
         var _loc5_:uint = 0;
         var _loc2_:int = int(param1.startIndex);
         var _loc3_:int = int(param1.endIndex);
         var _loc4_:String = param1.changeType;
         if(_loc4_ == DataChangeType.INVALIDATE_ALL)
         {
            clearSelection();
            invalidateList();
         }
         else if(_loc4_ == DataChangeType.INVALIDATE)
         {
            _loc5_ = 0;
            while(_loc5_ < param1.items.length)
            {
               invalidateItem(param1.items[_loc5_]);
               _loc5_++;
            }
         }
         else if(_loc4_ == DataChangeType.ADD)
         {
            _loc5_ = 0;
            while(_loc5_ < _selectedIndices.length)
            {
               if(_selectedIndices[_loc5_] >= _loc2_)
               {
                  _selectedIndices[_loc5_] += _loc2_ - _loc3_;
               }
               _loc5_++;
            }
         }
         else if(_loc4_ == DataChangeType.REMOVE)
         {
            _loc5_ = 0;
            while(_loc5_ < _selectedIndices.length)
            {
               if(_selectedIndices[_loc5_] >= _loc2_)
               {
                  if(_selectedIndices[_loc5_] <= _loc3_)
                  {
                     delete _selectedIndices[_loc5_];
                  }
                  else
                  {
                     _selectedIndices[_loc5_] -= _loc2_ - _loc3_ + 1;
                  }
               }
               _loc5_++;
            }
         }
         else if(_loc4_ == DataChangeType.REMOVE_ALL)
         {
            clearSelection();
         }
         else if(_loc4_ != DataChangeType.REPLACE)
         {
            selectedItems = preChangeItems;
            preChangeItems = null;
         }
         invalidate(InvalidationType.DATA);
      }
      
      public function itemToCellRenderer(param1:Object) : ICellRenderer
      {
         var _loc2_:* = undefined;
         var _loc3_:ICellRenderer = null;
         if(param1 != null)
         {
            for(_loc2_ in activeCellRenderers)
            {
               _loc3_ = activeCellRenderers[_loc2_] as ICellRenderer;
               if(_loc3_.data == param1)
               {
                  return _loc3_;
               }
            }
         }
         return null;
      }
      
      public function addItem(param1:Object) : void
      {
         _dataProvider.addItem(param1);
         invalidateList();
      }
      
      public function get rowCount() : uint
      {
         return 0;
      }
      
      override protected function configUI() : void
      {
         super.configUI();
         listHolder = new Sprite();
         addChild(listHolder);
         listHolder.scrollRect = contentScrollRect;
         list = new Sprite();
         listHolder.addChild(list);
      }
      
      public function get selectable() : Boolean
      {
         return _selectable;
      }
      
      public function clearRendererStyle(param1:String, param2:int = -1) : void
      {
         delete rendererStyles[param1];
         updatedRendererStyles[param1] = null;
         invalidate(InvalidationType.RENDERER_STYLES);
      }
      
      protected function handleCellRendererMouseEvent(param1:MouseEvent) : void
      {
         var _loc2_:ICellRenderer = param1.target as ICellRenderer;
         var _loc3_:String = param1.type == MouseEvent.ROLL_OVER ? ListEvent.ITEM_ROLL_OVER : ListEvent.ITEM_ROLL_OUT;
         dispatchEvent(new ListEvent(_loc3_,false,false,_loc2_.listData.column,_loc2_.listData.row,_loc2_.listData.index,_loc2_.data));
      }
      
      override protected function keyDownHandler(param1:KeyboardEvent) : void
      {
         if(!selectable)
         {
            return;
         }
         switch(param1.keyCode)
         {
            case Keyboard.UP:
            case Keyboard.DOWN:
            case Keyboard.END:
            case Keyboard.HOME:
            case Keyboard.PAGE_UP:
            case Keyboard.PAGE_DOWN:
               moveSelectionVertically(param1.keyCode,param1.shiftKey && _allowMultipleSelection,param1.ctrlKey && _allowMultipleSelection);
               param1.stopPropagation();
               break;
            case Keyboard.LEFT:
            case Keyboard.RIGHT:
               moveSelectionHorizontally(param1.keyCode,param1.shiftKey && _allowMultipleSelection,param1.ctrlKey && _allowMultipleSelection);
               param1.stopPropagation();
         }
      }
      
      protected function handleCellRendererDoubleClick(param1:MouseEvent) : void
      {
         if(!_enabled)
         {
            return;
         }
         var _loc2_:ICellRenderer = param1.currentTarget as ICellRenderer;
         var _loc3_:uint = _loc2_.listData.index;
         dispatchEvent(new ListEvent(ListEvent.ITEM_DOUBLE_CLICK,false,true,_loc2_.listData.column,_loc2_.listData.row,_loc3_,_loc2_.data));
      }
      
      public function setRendererStyle(param1:String, param2:Object, param3:uint = 0) : void
      {
         if(rendererStyles[param1] == param2)
         {
            return;
         }
         updatedRendererStyles[param1] = param2;
         rendererStyles[param1] = param2;
         invalidate(InvalidationType.RENDERER_STYLES);
      }
      
      public function set dataProvider(param1:DataProvider) : void
      {
         if(_dataProvider != null)
         {
            _dataProvider.removeEventListener(DataChangeEvent.DATA_CHANGE,handleDataChange);
            _dataProvider.removeEventListener(DataChangeEvent.PRE_DATA_CHANGE,onPreChange);
         }
         _dataProvider = param1;
         _dataProvider.addEventListener(DataChangeEvent.DATA_CHANGE,handleDataChange,false,0,true);
         _dataProvider.addEventListener(DataChangeEvent.PRE_DATA_CHANGE,onPreChange,false,0,true);
         clearSelection();
         invalidateList();
      }
      
      public function invalidateList() : void
      {
         _invalidateList();
         invalidate(InvalidationType.DATA);
      }
      
      public function replaceItemAt(param1:Object, param2:uint) : Object
      {
         return _dataProvider.replaceItemAt(param1,param2);
      }
      
      public function removeAll() : void
      {
         _dataProvider.removeAll();
      }
      
      override public function set enabled(param1:Boolean) : void
      {
         super.enabled = param1;
         list.mouseChildren = _enabled;
      }
      
      public function scrollToIndex(param1:int) : void
      {
      }
      
      public function get selectedIndices() : Array
      {
         return _selectedIndices.concat();
      }
      
      override protected function drawLayout() : void
      {
         super.drawLayout();
         contentScrollRect = listHolder.scrollRect;
         contentScrollRect.width = availableWidth;
         contentScrollRect.height = availableHeight;
         listHolder.scrollRect = contentScrollRect;
      }
      
      protected function _invalidateList() : void
      {
         availableCellRenderers = [];
         while(activeCellRenderers.length > 0)
         {
            list.removeChild(activeCellRenderers.pop() as DisplayObject);
         }
      }
      
      public function set selectedItem(param1:Object) : void
      {
         var _loc2_:int = _dataProvider.getItemIndex(param1);
         selectedIndex = _loc2_;
      }
      
      public function getItemAt(param1:uint) : Object
      {
         return _dataProvider.getItemAt(param1);
      }
      
      protected function handleCellRendererChange(param1:Event) : void
      {
         var _loc2_:ICellRenderer = param1.currentTarget as ICellRenderer;
         var _loc3_:uint = _loc2_.listData.index;
         _dataProvider.invalidateItemAt(_loc3_);
      }
      
      protected function moveSelectionVertically(param1:uint, param2:Boolean, param3:Boolean) : void
      {
      }
      
      public function itemToLabel(param1:Object) : String
      {
         return param1["label"];
      }
      
      public function addItemAt(param1:Object, param2:uint) : void
      {
         _dataProvider.addItemAt(param1,param2);
         invalidateList();
      }
      
      override protected function initializeAccessibility() : void
      {
         if(SelectableList.createAccessibilityImplementation != null)
         {
            SelectableList.createAccessibilityImplementation(this);
         }
      }
      
      protected function updateRendererStyles() : void
      {
         var _loc4_:String = null;
         var _loc1_:Array = availableCellRenderers.concat(activeCellRenderers);
         var _loc2_:uint = _loc1_.length;
         var _loc3_:uint = 0;
         while(_loc3_ < _loc2_)
         {
            if(_loc1_[_loc3_].setStyle != null)
            {
               for(_loc4_ in updatedRendererStyles)
               {
                  _loc1_[_loc3_].setStyle(_loc4_,updatedRendererStyles[_loc4_]);
               }
               _loc1_[_loc3_].drawNow();
            }
            _loc3_++;
         }
         updatedRendererStyles = {};
      }
      
      public function set selectable(param1:Boolean) : void
      {
         if(param1 == _selectable)
         {
            return;
         }
         if(!param1)
         {
            selectedIndices = [];
         }
         _selectable = param1;
      }
      
      public function removeItem(param1:Object) : Object
      {
         return _dataProvider.removeItem(param1);
      }
      
      public function get dataProvider() : DataProvider
      {
         return _dataProvider;
      }
      
      public function set maxHorizontalScrollPosition(param1:Number) : void
      {
         _maxHorizontalScrollPosition = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      public function clearSelection() : void
      {
         selectedIndex = -1;
      }
      
      public function invalidateItemAt(param1:uint) : void
      {
         var _loc2_:Object = _dataProvider.getItemAt(param1);
         if(_loc2_ != null)
         {
            invalidateItem(_loc2_);
         }
      }
      
      public function sortItems(... rest) : *
      {
         return _dataProvider.sort.apply(_dataProvider,rest);
      }
      
      public function set selectedItems(param1:Array) : void
      {
         var _loc4_:int = 0;
         if(param1 == null)
         {
            selectedIndices = null;
            return;
         }
         var _loc2_:Array = [];
         var _loc3_:uint = 0;
         while(_loc3_ < param1.length)
         {
            _loc4_ = _dataProvider.getItemIndex(param1[_loc3_]);
            if(_loc4_ != -1)
            {
               _loc2_.push(_loc4_);
            }
            _loc3_++;
         }
         selectedIndices = _loc2_;
      }
      
      override protected function setHorizontalScrollPosition(param1:Number, param2:Boolean = false) : void
      {
         if(param1 == _horizontalScrollPosition)
         {
            return;
         }
         var _loc3_:Number = param1 - _horizontalScrollPosition;
         _horizontalScrollPosition = param1;
         if(param2)
         {
            dispatchEvent(new ScrollEvent(ScrollBarDirection.HORIZONTAL,_loc3_,param1));
         }
      }
      
      override public function get maxHorizontalScrollPosition() : Number
      {
         return _maxHorizontalScrollPosition;
      }
      
      public function scrollToSelected() : void
      {
         scrollToIndex(selectedIndex);
      }
      
      public function get selectedItems() : Array
      {
         var _loc1_:Array = [];
         var _loc2_:uint = 0;
         while(_loc2_ < _selectedIndices.length)
         {
            _loc1_.push(_dataProvider.getItemAt(_selectedIndices[_loc2_]));
            _loc2_++;
         }
         return _loc1_;
      }
      
      public function get length() : uint
      {
         return _dataProvider.length;
      }
      
      public function invalidateItem(param1:Object) : void
      {
         if(renderedItems[param1] == null)
         {
            return;
         }
         invalidItems[param1] = true;
         invalidate(InvalidationType.DATA);
      }
      
      public function set selectedIndex(param1:int) : void
      {
         selectedIndices = param1 == -1 ? null : [param1];
      }
      
      public function get selectedIndex() : int
      {
         return _selectedIndices.length == 0 ? -1 : int(_selectedIndices[_selectedIndices.length - 1]);
      }
      
      public function getRendererStyle(param1:String, param2:int = -1) : Object
      {
         return rendererStyles[param1];
      }
      
      protected function handleCellRendererClick(param1:MouseEvent) : void
      {
         var _loc5_:int = 0;
         var _loc6_:uint = 0;
         if(!_enabled)
         {
            return;
         }
         var _loc2_:ICellRenderer = param1.currentTarget as ICellRenderer;
         var _loc3_:uint = _loc2_.listData.index;
         if(!dispatchEvent(new ListEvent(ListEvent.ITEM_CLICK,false,true,_loc2_.listData.column,_loc2_.listData.row,_loc3_,_loc2_.data)) || !_selectable)
         {
            return;
         }
         var _loc4_:int = int(selectedIndices.indexOf(_loc3_));
         if(!_allowMultipleSelection)
         {
            if(_loc4_ != -1)
            {
               return;
            }
            _loc2_.selected = true;
            _selectedIndices = [_loc3_];
            lastCaretIndex = caretIndex = _loc3_;
         }
         else if(param1.shiftKey)
         {
            _loc6_ = _selectedIndices.length > 0 ? uint(_selectedIndices[0]) : _loc3_;
            _selectedIndices = [];
            if(_loc6_ > _loc3_)
            {
               _loc5_ = int(_loc6_);
               while(_loc5_ >= _loc3_)
               {
                  _selectedIndices.push(_loc5_);
                  _loc5_--;
               }
            }
            else
            {
               _loc5_ = int(_loc6_);
               while(_loc5_ <= _loc3_)
               {
                  _selectedIndices.push(_loc5_);
                  _loc5_++;
               }
            }
            caretIndex = _loc3_;
         }
         else if(param1.ctrlKey)
         {
            if(_loc4_ != -1)
            {
               _loc2_.selected = false;
               _selectedIndices.splice(_loc4_,1);
            }
            else
            {
               _loc2_.selected = true;
               _selectedIndices.push(_loc3_);
            }
            caretIndex = _loc3_;
         }
         else
         {
            _selectedIndices = [_loc3_];
            lastCaretIndex = caretIndex = _loc3_;
         }
         dispatchEvent(new Event(Event.CHANGE));
         invalidate(InvalidationType.DATA);
      }
   }
}

package fl.controls
{
   import fl.core.InvalidationType;
   import fl.core.UIComponent;
   import fl.events.InteractionInputType;
   import fl.events.SliderEvent;
   import fl.events.SliderEventClickTarget;
   import fl.managers.IFocusManagerComponent;
   import flash.display.DisplayObject;
   import flash.display.Sprite;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.ui.Keyboard;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol93")]
   public class Slider extends UIComponent implements IFocusManagerComponent
   {
      
      protected static var defaultStyles:Object = {
         "thumbUpSkin":"SliderThumb_upSkin",
         "thumbOverSkin":"SliderThumb_overSkin",
         "thumbDownSkin":"SliderThumb_downSkin",
         "thumbDisabledSkin":"SliderThumb_disabledSkin",
         "sliderTrackSkin":"SliderTrack_skin",
         "sliderTrackDisabledSkin":"SliderTrack_disabledSkin",
         "tickSkin":"SliderTick_skin",
         "focusRectSkin":null,
         "focusRectPadding":null
      };
      
      protected static const TRACK_STYLES:Object = {
         "upSkin":"sliderTrackSkin",
         "overSkin":"sliderTrackSkin",
         "downSkin":"sliderTrackSkin",
         "disabledSkin":"sliderTrackDisabledSkin"
      };
      
      protected static const THUMB_STYLES:Object = {
         "upSkin":"thumbUpSkin",
         "overSkin":"thumbOverSkin",
         "downSkin":"thumbDownSkin",
         "disabledSkin":"thumbDisabledSkin"
      };
      
      protected static const TICK_STYLES:Object = {"upSkin":"tickSkin"};
      
      protected var _direction:String = SliderDirection.HORIZONTAL;
      
      protected var _minimum:Number = 0;
      
      protected var _maximum:Number = 10;
      
      protected var _value:Number = 0;
      
      protected var _tickInterval:Number = 0;
      
      protected var _snapInterval:Number = 0;
      
      protected var _liveDragging:Boolean = false;
      
      protected var tickContainer:Sprite;
      
      protected var thumb:BaseButton;
      
      protected var track:BaseButton;
      
      public function Slider()
      {
         super();
         setStyles();
      }
      
      public static function getStyleDefinition() : Object
      {
         return defaultStyles;
      }
      
      public function get direction() : String
      {
         return _direction;
      }
      
      public function set direction(param1:String) : void
      {
         _direction = param1;
         var _loc2_:* = _direction == SliderDirection.VERTICAL;
         if(isLivePreview)
         {
            if(_loc2_)
            {
               setScaleY(-1);
               y = track.height;
            }
            else
            {
               setScaleY(1);
               y = 0;
            }
            positionThumb();
            return;
         }
         if(_loc2_ && componentInspectorSetting)
         {
            if(rotation % 90 == 0)
            {
               setScaleY(-1);
            }
         }
         if(!componentInspectorSetting)
         {
            rotation = _loc2_ ? 90 : 0;
         }
      }
      
      public function get minimum() : Number
      {
         return _minimum;
      }
      
      public function set minimum(param1:Number) : void
      {
         _minimum = param1;
         this.value = Math.max(param1,this.value);
         invalidate(InvalidationType.DATA);
      }
      
      public function get maximum() : Number
      {
         return _maximum;
      }
      
      public function set maximum(param1:Number) : void
      {
         _maximum = param1;
         this.value = Math.min(param1,this.value);
         invalidate(InvalidationType.DATA);
      }
      
      public function get tickInterval() : Number
      {
         return _tickInterval;
      }
      
      public function set tickInterval(param1:Number) : void
      {
         _tickInterval = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      public function get snapInterval() : Number
      {
         return _snapInterval;
      }
      
      public function set snapInterval(param1:Number) : void
      {
         _snapInterval = param1;
      }
      
      public function set liveDragging(param1:Boolean) : void
      {
         _liveDragging = param1;
      }
      
      public function get liveDragging() : Boolean
      {
         return _liveDragging;
      }
      
      override public function get enabled() : Boolean
      {
         return super.enabled;
      }
      
      override public function set enabled(param1:Boolean) : void
      {
         if(enabled == param1)
         {
            return;
         }
         super.enabled = param1;
         track.enabled = thumb.enabled = param1;
      }
      
      override public function setSize(param1:Number, param2:Number) : void
      {
         if(_direction == SliderDirection.VERTICAL && !isLivePreview)
         {
            super.setSize(param2,param1);
         }
         else
         {
            super.setSize(param1,param2);
         }
         invalidate(InvalidationType.SIZE);
      }
      
      public function get value() : Number
      {
         return _value;
      }
      
      public function set value(param1:Number) : void
      {
         doSetValue(param1);
      }
      
      protected function doSetValue(param1:Number, param2:String = null, param3:String = null, param4:int = undefined) : void
      {
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         var _loc8_:Number = NaN;
         var _loc9_:Number = NaN;
         var _loc5_:Number = _value;
         if(_snapInterval != 0 && _snapInterval != 1)
         {
            _loc6_ = Math.pow(10,getPrecision(snapInterval));
            _loc7_ = _snapInterval * _loc6_;
            _loc8_ = Math.round(param1 * _loc6_);
            _loc9_ = Math.round(_loc8_ / _loc7_) * _loc7_;
            param1 = _loc9_ / _loc6_;
            _value = Math.max(minimum,Math.min(maximum,param1));
         }
         else
         {
            _value = Math.max(minimum,Math.min(maximum,Math.round(param1)));
         }
         if(_loc5_ != _value && (liveDragging && param3 != null || param2 == InteractionInputType.KEYBOARD))
         {
            dispatchEvent(new SliderEvent(SliderEvent.CHANGE,value,param3,param2,param4));
         }
         positionThumb();
      }
      
      protected function setStyles() : void
      {
         copyStylesToChild(thumb,THUMB_STYLES);
         copyStylesToChild(track,TRACK_STYLES);
      }
      
      override protected function draw() : void
      {
         if(isInvalid(InvalidationType.STYLES))
         {
            setStyles();
            invalidate(InvalidationType.SIZE,false);
         }
         if(isInvalid(InvalidationType.SIZE))
         {
            track.setSize(_width,track.height);
            track.drawNow();
            thumb.drawNow();
         }
         if(tickInterval > 0)
         {
            drawTicks();
         }
         else
         {
            clearTicks();
         }
         positionThumb();
         super.draw();
      }
      
      protected function positionThumb() : void
      {
         thumb.x = (_direction == SliderDirection.VERTICAL ? maximum - value : value - minimum) / (maximum - minimum) * _width;
      }
      
      protected function drawTicks() : void
      {
         var _loc5_:DisplayObject = null;
         clearTicks();
         tickContainer = new Sprite();
         var _loc1_:Number = maximum < 1 ? tickInterval / 100 : tickInterval;
         var _loc2_:Number = (maximum - minimum) / _loc1_;
         var _loc3_:Number = _width / _loc2_;
         var _loc4_:uint = 0;
         while(_loc4_ <= _loc2_)
         {
            _loc5_ = getDisplayObjectInstance(getStyleValue("tickSkin"));
            _loc5_.x = _loc3_ * _loc4_;
            _loc5_.y = track.y - _loc5_.height - 2;
            tickContainer.addChild(_loc5_);
            _loc4_++;
         }
         addChild(tickContainer);
      }
      
      protected function clearTicks() : void
      {
         if(!tickContainer || !tickContainer.parent)
         {
            return;
         }
         removeChild(tickContainer);
      }
      
      protected function calculateValue(param1:Number, param2:String, param3:String, param4:int = undefined) : void
      {
         var _loc5_:Number = param1 / _width * (maximum - minimum);
         if(_direction == SliderDirection.VERTICAL)
         {
            _loc5_ = maximum - _loc5_;
         }
         else
         {
            _loc5_ = minimum + _loc5_;
         }
         doSetValue(_loc5_,param2,param3,param4);
      }
      
      protected function doDrag(param1:MouseEvent) : void
      {
         var _loc2_:Number = _width / snapInterval;
         var _loc3_:Number = track.mouseX;
         calculateValue(_loc3_,InteractionInputType.MOUSE,SliderEventClickTarget.THUMB);
         dispatchEvent(new SliderEvent(SliderEvent.THUMB_DRAG,value,SliderEventClickTarget.THUMB,InteractionInputType.MOUSE));
      }
      
      protected function thumbPressHandler(param1:MouseEvent) : void
      {
         stage.addEventListener(MouseEvent.MOUSE_MOVE,doDrag,false,0,true);
         stage.addEventListener(MouseEvent.MOUSE_UP,thumbReleaseHandler,false,0,true);
         dispatchEvent(new SliderEvent(SliderEvent.THUMB_PRESS,value,SliderEventClickTarget.THUMB,InteractionInputType.MOUSE));
      }
      
      protected function thumbReleaseHandler(param1:MouseEvent) : void
      {
         stage.removeEventListener(MouseEvent.MOUSE_MOVE,doDrag);
         stage.removeEventListener(MouseEvent.MOUSE_UP,thumbReleaseHandler);
         dispatchEvent(new SliderEvent(SliderEvent.THUMB_RELEASE,value,SliderEventClickTarget.THUMB,InteractionInputType.MOUSE));
         dispatchEvent(new SliderEvent(SliderEvent.CHANGE,value,SliderEventClickTarget.THUMB,InteractionInputType.MOUSE));
      }
      
      protected function onTrackClick(param1:MouseEvent) : void
      {
         calculateValue(track.mouseX,InteractionInputType.MOUSE,SliderEventClickTarget.TRACK);
         if(!liveDragging)
         {
            dispatchEvent(new SliderEvent(SliderEvent.CHANGE,value,SliderEventClickTarget.TRACK,InteractionInputType.MOUSE));
         }
      }
      
      override protected function keyDownHandler(param1:KeyboardEvent) : void
      {
         var _loc3_:Number = NaN;
         if(!enabled)
         {
            return;
         }
         var _loc2_:Number = snapInterval > 0 ? snapInterval : 1;
         var _loc4_:* = direction == SliderDirection.HORIZONTAL;
         if(param1.keyCode == Keyboard.DOWN && !_loc4_ || param1.keyCode == Keyboard.LEFT && _loc4_)
         {
            _loc3_ = value - _loc2_;
         }
         else if(param1.keyCode == Keyboard.UP && !_loc4_ || param1.keyCode == Keyboard.RIGHT && _loc4_)
         {
            _loc3_ = value + _loc2_;
         }
         else if(param1.keyCode == Keyboard.PAGE_DOWN && !_loc4_ || param1.keyCode == Keyboard.HOME && _loc4_)
         {
            _loc3_ = minimum;
         }
         else if(param1.keyCode == Keyboard.PAGE_UP && !_loc4_ || param1.keyCode == Keyboard.END && _loc4_)
         {
            _loc3_ = maximum;
         }
         if(!isNaN(_loc3_))
         {
            param1.stopPropagation();
            doSetValue(_loc3_,InteractionInputType.KEYBOARD,null,param1.keyCode);
         }
      }
      
      override protected function configUI() : void
      {
         super.configUI();
         thumb = new BaseButton();
         thumb.setSize(13,13);
         thumb.autoRepeat = false;
         addChild(thumb);
         thumb.addEventListener(MouseEvent.MOUSE_DOWN,thumbPressHandler,false,0,true);
         track = new BaseButton();
         track.move(0,0);
         track.setSize(80,4);
         track.autoRepeat = false;
         track.useHandCursor = false;
         track.addEventListener(MouseEvent.CLICK,onTrackClick,false,0,true);
         addChildAt(track,0);
      }
      
      protected function getPrecision(param1:Number) : Number
      {
         var _loc2_:String = param1.toString();
         if(_loc2_.indexOf(".") == -1)
         {
            return 0;
         }
         return _loc2_.split(".").pop().length;
      }
   }
}

package fl.controls
{
   public class SliderDirection
   {
      
      public static var HORIZONTAL:String = "horizontal";
      
      public static var VERTICAL:String = "vertical";
      
      public function SliderDirection()
      {
         super();
      }
   }
}

package fl.controls
{
   import fl.core.InvalidationType;
   import fl.core.UIComponent;
   import fl.events.ComponentEvent;
   import fl.events.ScrollEvent;
   import fl.managers.IFocusManager;
   import fl.managers.IFocusManagerComponent;
   import flash.display.DisplayObject;
   import flash.events.Event;
   import flash.events.FocusEvent;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.events.TextEvent;
   import flash.system.IME;
   import flash.text.TextField;
   import flash.text.TextFieldType;
   import flash.text.TextFormat;
   import flash.text.TextLineMetrics;
   import flash.ui.Keyboard;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol72")]
   public class TextArea extends UIComponent implements IFocusManagerComponent
   {
      
      public static var createAccessibilityImplementation:Function;
      
      private static var defaultStyles:Object = {
         "upSkin":"TextArea_upSkin",
         "disabledSkin":"TextArea_disabledSkin",
         "focusRectSkin":null,
         "focusRectPadding":null,
         "textFormat":null,
         "disabledTextFormat":null,
         "textPadding":3,
         "embedFonts":false
      };
      
      protected static const SCROLL_BAR_STYLES:Object = {
         "downArrowDisabledSkin":"downArrowDisabledSkin",
         "downArrowDownSkin":"downArrowDownSkin",
         "downArrowOverSkin":"downArrowOverSkin",
         "downArrowUpSkin":"downArrowUpSkin",
         "upArrowDisabledSkin":"upArrowDisabledSkin",
         "upArrowDownSkin":"upArrowDownSkin",
         "upArrowOverSkin":"upArrowOverSkin",
         "upArrowUpSkin":"upArrowUpSkin",
         "thumbDisabledSkin":"thumbDisabledSkin",
         "thumbDownSkin":"thumbDownSkin",
         "thumbOverSkin":"thumbOverSkin",
         "thumbUpSkin":"thumbUpSkin",
         "thumbIcon":"thumbIcon",
         "trackDisabledSkin":"trackDisabledSkin",
         "trackDownSkin":"trackDownSkin",
         "trackOverSkin":"trackOverSkin",
         "trackUpSkin":"trackUpSkin",
         "repeatDelay":"repeatDelay",
         "repeatInterval":"repeatInterval"
      };
      
      protected var _horizontalScrollBar:UIScrollBar;
      
      protected var _html:Boolean = false;
      
      protected var background:DisplayObject;
      
      protected var _verticalScrollBar:UIScrollBar;
      
      protected var _savedHTML:String;
      
      protected var _horizontalScrollPolicy:String = "auto";
      
      protected var _editable:Boolean = true;
      
      protected var textHasChanged:Boolean = false;
      
      public var textField:TextField;
      
      protected var _wordWrap:Boolean = true;
      
      protected var _verticalScrollPolicy:String = "auto";
      
      public function TextArea()
      {
         super();
      }
      
      public static function getStyleDefinition() : Object
      {
         return UIComponent.mergeStyles(defaultStyles,ScrollBar.getStyleDefinition());
      }
      
      public function set alwaysShowSelection(param1:Boolean) : void
      {
         textField.alwaysShowSelection = param1;
      }
      
      override public function set enabled(param1:Boolean) : void
      {
         super.enabled = param1;
         mouseChildren = enabled;
         invalidate(InvalidationType.STATE);
      }
      
      override protected function focusInHandler(param1:FocusEvent) : void
      {
         setIMEMode(true);
         if(param1.target == this)
         {
            stage.focus = textField;
         }
         var _loc2_:IFocusManager = focusManager;
         if(_loc2_)
         {
            if(editable)
            {
               _loc2_.showFocusIndicator = true;
            }
            _loc2_.defaultButtonEnabled = false;
         }
         super.focusInHandler(param1);
         if(editable)
         {
            setIMEMode(true);
         }
      }
      
      protected function handleChange(param1:Event) : void
      {
         param1.stopPropagation();
         dispatchEvent(new Event(Event.CHANGE,true));
         invalidate(InvalidationType.DATA);
      }
      
      public function set imeMode(param1:String) : void
      {
         _imeMode = param1;
      }
      
      public function get imeMode() : String
      {
         return IME.conversionMode;
      }
      
      override public function drawFocus(param1:Boolean) : void
      {
         if(focusTarget != null)
         {
            focusTarget.drawFocus(param1);
            return;
         }
         super.drawFocus(param1);
      }
      
      protected function handleWheel(param1:MouseEvent) : void
      {
         if(!enabled || !_verticalScrollBar.visible)
         {
            return;
         }
         _verticalScrollBar.scrollPosition -= param1.delta * _verticalScrollBar.lineScrollSize;
         dispatchEvent(new ScrollEvent(ScrollBarDirection.VERTICAL,param1.delta * _verticalScrollBar.lineScrollSize,_verticalScrollBar.scrollPosition));
      }
      
      public function set condenseWhite(param1:Boolean) : void
      {
         textField.condenseWhite = param1;
         invalidate(InvalidationType.DATA);
      }
      
      public function get textWidth() : Number
      {
         drawNow();
         return textField.textWidth;
      }
      
      override protected function focusOutHandler(param1:FocusEvent) : void
      {
         var _loc2_:IFocusManager = focusManager;
         if(_loc2_)
         {
            _loc2_.defaultButtonEnabled = true;
         }
         setSelection(0,0);
         super.focusOutHandler(param1);
         if(editable)
         {
            setIMEMode(false);
         }
      }
      
      protected function handleScroll(param1:ScrollEvent) : void
      {
         dispatchEvent(param1);
      }
      
      protected function drawLayout() : void
      {
         var _loc1_:Number = Number(getStyleValue("textPadding"));
         textField.x = textField.y = _loc1_;
         background.width = width;
         background.height = height;
         var _loc2_:Number = height;
         var _loc3_:Boolean = needVScroll();
         var _loc4_:Number = width - (_loc3_ ? _verticalScrollBar.width : 0);
         var _loc5_:Boolean = needHScroll();
         if(_loc5_)
         {
            _loc2_ -= _horizontalScrollBar.height;
         }
         setTextSize(_loc4_,_loc2_,_loc1_);
         if(_loc5_ && !_loc3_ && needVScroll())
         {
            _loc3_ = true;
            _loc4_ -= _verticalScrollBar.width;
            setTextSize(_loc4_,_loc2_,_loc1_);
         }
         if(_loc3_)
         {
            _verticalScrollBar.visible = true;
            _verticalScrollBar.x = width - _verticalScrollBar.width;
            _verticalScrollBar.height = _loc2_;
            _verticalScrollBar.visible = true;
            _verticalScrollBar.enabled = enabled;
         }
         else
         {
            _verticalScrollBar.visible = false;
         }
         if(_loc5_)
         {
            _horizontalScrollBar.visible = true;
            _horizontalScrollBar.y = height - _horizontalScrollBar.height;
            _horizontalScrollBar.width = _loc4_;
            _horizontalScrollBar.visible = true;
            _horizontalScrollBar.enabled = enabled;
         }
         else
         {
            _horizontalScrollBar.visible = false;
         }
         updateScrollBars();
         addEventListener(Event.ENTER_FRAME,delayedLayoutUpdate,false,0,true);
      }
      
      public function set displayAsPassword(param1:Boolean) : void
      {
         textField.displayAsPassword = param1;
      }
      
      protected function drawBackground() : void
      {
         var _loc1_:DisplayObject = background;
         var _loc2_:String = enabled ? "upSkin" : "disabledSkin";
         background = getDisplayObjectInstance(getStyleValue(_loc2_));
         if(background != null)
         {
            addChildAt(background,0);
         }
         if(_loc1_ != null && _loc1_ != background && contains(_loc1_))
         {
            removeChild(_loc1_);
         }
      }
      
      public function get horizontalScrollPolicy() : String
      {
         return _horizontalScrollPolicy;
      }
      
      protected function delayedLayoutUpdate(param1:Event) : void
      {
         if(textHasChanged)
         {
            textHasChanged = false;
            drawLayout();
            return;
         }
         removeEventListener(Event.ENTER_FRAME,delayedLayoutUpdate);
      }
      
      public function get verticalScrollPosition() : Number
      {
         return textField.scrollV;
      }
      
      public function get text() : String
      {
         return textField.text;
      }
      
      public function get verticalScrollBar() : UIScrollBar
      {
         return _verticalScrollBar;
      }
      
      public function set maxChars(param1:int) : void
      {
         textField.maxChars = param1;
      }
      
      public function get textHeight() : Number
      {
         drawNow();
         return textField.textHeight;
      }
      
      override protected function isOurFocus(param1:DisplayObject) : Boolean
      {
         return param1 == textField || super.isOurFocus(param1);
      }
      
      public function get maxVerticalScrollPosition() : int
      {
         return textField.maxScrollV;
      }
      
      public function set horizontalScrollPosition(param1:Number) : void
      {
         drawNow();
         textField.scrollH = param1;
      }
      
      public function get restrict() : String
      {
         return textField.restrict;
      }
      
      protected function setEmbedFont() : *
      {
         var _loc1_:Object = getStyleValue("embedFonts");
         if(_loc1_ != null)
         {
            textField.embedFonts = _loc1_;
         }
      }
      
      public function get alwaysShowSelection() : Boolean
      {
         return textField.alwaysShowSelection;
      }
      
      override public function get enabled() : Boolean
      {
         return super.enabled;
      }
      
      override protected function draw() : void
      {
         if(isInvalid(InvalidationType.STATE))
         {
            updateTextFieldType();
         }
         if(isInvalid(InvalidationType.STYLES))
         {
            setStyles();
            setEmbedFont();
         }
         if(isInvalid(InvalidationType.STYLES,InvalidationType.STATE))
         {
            drawTextFormat();
            drawBackground();
            invalidate(InvalidationType.SIZE,false);
         }
         if(isInvalid(InvalidationType.SIZE,InvalidationType.DATA))
         {
            drawLayout();
         }
         super.draw();
      }
      
      public function set horizontalScrollPolicy(param1:String) : void
      {
         _horizontalScrollPolicy = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      public function set editable(param1:Boolean) : void
      {
         _editable = param1;
         invalidate(InvalidationType.STATE);
      }
      
      public function setSelection(param1:int, param2:int) : void
      {
         textField.setSelection(param1,param2);
      }
      
      public function get condenseWhite() : Boolean
      {
         return textField.condenseWhite;
      }
      
      public function get displayAsPassword() : Boolean
      {
         return textField.displayAsPassword;
      }
      
      protected function setTextSize(param1:Number, param2:Number, param3:Number) : void
      {
         var _loc4_:Number = param1 - param3 * 2;
         var _loc5_:Number = param2 - param3 * 2;
         if(_loc4_ != textField.width)
         {
            textField.width = _loc4_;
         }
         if(_loc5_ != textField.height)
         {
            textField.height = _loc5_;
         }
      }
      
      public function get horizontalScrollBar() : UIScrollBar
      {
         return _horizontalScrollBar;
      }
      
      public function get selectionBeginIndex() : int
      {
         return textField.selectionBeginIndex;
      }
      
      override protected function configUI() : void
      {
         super.configUI();
         tabChildren = true;
         textField = new TextField();
         addChild(textField);
         updateTextFieldType();
         _verticalScrollBar = new UIScrollBar();
         _verticalScrollBar.name = "V";
         _verticalScrollBar.visible = false;
         _verticalScrollBar.focusEnabled = false;
         copyStylesToChild(_verticalScrollBar,SCROLL_BAR_STYLES);
         _verticalScrollBar.addEventListener(ScrollEvent.SCROLL,handleScroll,false,0,true);
         addChild(_verticalScrollBar);
         _horizontalScrollBar = new UIScrollBar();
         _horizontalScrollBar.name = "H";
         _horizontalScrollBar.visible = false;
         _horizontalScrollBar.focusEnabled = false;
         _horizontalScrollBar.direction = ScrollBarDirection.HORIZONTAL;
         copyStylesToChild(_horizontalScrollBar,SCROLL_BAR_STYLES);
         _horizontalScrollBar.addEventListener(ScrollEvent.SCROLL,handleScroll,false,0,true);
         addChild(_horizontalScrollBar);
         textField.addEventListener(TextEvent.TEXT_INPUT,handleTextInput,false,0,true);
         textField.addEventListener(Event.CHANGE,handleChange,false,0,true);
         textField.addEventListener(KeyboardEvent.KEY_DOWN,handleKeyDown,false,0,true);
         _horizontalScrollBar.scrollTarget = textField;
         _verticalScrollBar.scrollTarget = textField;
         addEventListener(MouseEvent.MOUSE_WHEEL,handleWheel,false,0,true);
      }
      
      public function set verticalScrollPosition(param1:Number) : void
      {
         drawNow();
         textField.scrollV = param1;
      }
      
      public function get maxChars() : int
      {
         return textField.maxChars;
      }
      
      public function set text(param1:String) : void
      {
         if(componentInspectorSetting && param1 == "")
         {
            return;
         }
         textField.text = param1;
         _html = false;
         invalidate(InvalidationType.DATA);
         invalidate(InvalidationType.STYLES);
         textHasChanged = true;
      }
      
      protected function updateScrollBars() : *
      {
         _horizontalScrollBar.update();
         _verticalScrollBar.update();
         _verticalScrollBar.enabled = enabled;
         _horizontalScrollBar.enabled = enabled;
         _horizontalScrollBar.drawNow();
         _verticalScrollBar.drawNow();
      }
      
      public function get maxHorizontalScrollPosition() : int
      {
         return textField.maxScrollH;
      }
      
      protected function needHScroll() : Boolean
      {
         if(_horizontalScrollPolicy == ScrollPolicy.OFF)
         {
            return false;
         }
         if(_horizontalScrollPolicy == ScrollPolicy.ON)
         {
            return true;
         }
         return textField.maxScrollH > 0;
      }
      
      protected function handleKeyDown(param1:KeyboardEvent) : void
      {
         if(param1.keyCode == Keyboard.ENTER)
         {
            dispatchEvent(new ComponentEvent(ComponentEvent.ENTER,true));
         }
      }
      
      public function get horizontalScrollPosition() : Number
      {
         return textField.scrollH;
      }
      
      public function get selectionEndIndex() : int
      {
         return textField.selectionEndIndex;
      }
      
      public function get editable() : Boolean
      {
         return _editable;
      }
      
      protected function updateTextFieldType() : void
      {
         textField.type = enabled && _editable ? TextFieldType.INPUT : TextFieldType.DYNAMIC;
         textField.selectable = enabled;
         textField.wordWrap = _wordWrap;
         textField.multiline = true;
      }
      
      public function appendText(param1:String) : void
      {
         textField.appendText(param1);
         invalidate(InvalidationType.DATA);
      }
      
      public function set wordWrap(param1:Boolean) : void
      {
         _wordWrap = param1;
         invalidate(InvalidationType.STATE);
      }
      
      public function set verticalScrollPolicy(param1:String) : void
      {
         _verticalScrollPolicy = param1;
         invalidate(InvalidationType.SIZE);
      }
      
      protected function setStyles() : void
      {
         copyStylesToChild(_verticalScrollBar,SCROLL_BAR_STYLES);
         copyStylesToChild(_horizontalScrollBar,SCROLL_BAR_STYLES);
      }
      
      public function get length() : Number
      {
         return textField.text.length;
      }
      
      protected function drawTextFormat() : void
      {
         var _loc1_:Object = UIComponent.getStyleDefinition();
         var _loc2_:TextFormat = enabled ? _loc1_.defaultTextFormat as TextFormat : _loc1_.defaultDisabledTextFormat as TextFormat;
         textField.setTextFormat(_loc2_);
         var _loc3_:TextFormat = getStyleValue(enabled ? "textFormat" : "disabledTextFormat") as TextFormat;
         if(_loc3_ != null)
         {
            textField.setTextFormat(_loc3_);
         }
         else
         {
            _loc3_ = _loc2_;
         }
         textField.defaultTextFormat = _loc3_;
         setEmbedFont();
         if(_html)
         {
            textField.htmlText = _savedHTML;
         }
      }
      
      public function set htmlText(param1:String) : void
      {
         if(componentInspectorSetting && param1 == "")
         {
            return;
         }
         if(param1 == "")
         {
            text = "";
            return;
         }
         _html = true;
         _savedHTML = param1;
         textField.htmlText = param1;
         invalidate(InvalidationType.DATA);
         invalidate(InvalidationType.STYLES);
         textHasChanged = true;
      }
      
      public function get verticalScrollPolicy() : String
      {
         return _verticalScrollPolicy;
      }
      
      protected function handleTextInput(param1:TextEvent) : void
      {
         param1.stopPropagation();
         dispatchEvent(new TextEvent(TextEvent.TEXT_INPUT,true,false,param1.text));
      }
      
      public function get htmlText() : String
      {
         return textField.htmlText;
      }
      
      public function getLineMetrics(param1:int) : TextLineMetrics
      {
         return textField.getLineMetrics(param1);
      }
      
      public function get wordWrap() : Boolean
      {
         return _wordWrap;
      }
      
      protected function needVScroll() : Boolean
      {
         if(_verticalScrollPolicy == ScrollPolicy.OFF)
         {
            return false;
         }
         if(_verticalScrollPolicy == ScrollPolicy.ON)
         {
            return true;
         }
         return textField.maxScrollV > 1;
      }
      
      public function set restrict(param1:String) : void
      {
         if(componentInspectorSetting && param1 == "")
         {
            param1 = null;
         }
         textField.restrict = param1;
      }
   }
}

package fl.controls
{
   import fl.core.InvalidationType;
   import fl.core.UIComponent;
   import fl.events.ComponentEvent;
   import fl.managers.IFocusManager;
   import fl.managers.IFocusManagerComponent;
   import flash.display.DisplayObject;
   import flash.events.Event;
   import flash.events.FocusEvent;
   import flash.events.KeyboardEvent;
   import flash.events.TextEvent;
   import flash.text.TextField;
   import flash.text.TextFieldType;
   import flash.text.TextFormat;
   import flash.text.TextLineMetrics;
   import flash.ui.Keyboard;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol76")]
   public class TextInput extends UIComponent implements IFocusManagerComponent
   {
      
      public static var createAccessibilityImplementation:Function;
      
      private static var defaultStyles:Object = {
         "upSkin":"TextInput_upSkin",
         "disabledSkin":"TextInput_disabledSkin",
         "focusRectSkin":null,
         "focusRectPadding":null,
         "textFormat":null,
         "disabledTextFormat":null,
         "textPadding":0,
         "embedFonts":false
      };
      
      protected var _html:Boolean = false;
      
      protected var background:DisplayObject;
      
      protected var _savedHTML:String;
      
      protected var _editable:Boolean = true;
      
      public var textField:TextField;
      
      public function TextInput()
      {
         super();
      }
      
      public static function getStyleDefinition() : Object
      {
         return defaultStyles;
      }
      
      public function set alwaysShowSelection(param1:Boolean) : void
      {
         textField.alwaysShowSelection = param1;
      }
      
      override public function set enabled(param1:Boolean) : void
      {
         super.enabled = param1;
         updateTextFieldType();
      }
      
      public function get imeMode() : String
      {
         return _imeMode;
      }
      
      protected function handleChange(param1:Event) : void
      {
         param1.stopPropagation();
         dispatchEvent(new Event(Event.CHANGE,true));
      }
      
      public function set imeMode(param1:String) : void
      {
         _imeMode = param1;
      }
      
      protected function setEmbedFont() : *
      {
         var _loc1_:Object = getStyleValue("embedFonts");
         if(_loc1_ != null)
         {
            textField.embedFonts = _loc1_;
         }
      }
      
      protected function drawLayout() : void
      {
         var _loc1_:Number = Number(getStyleValue("textPadding"));
         if(background != null)
         {
            background.width = width;
            background.height = height;
         }
         textField.width = width - 2 * _loc1_;
         textField.height = height - 2 * _loc1_;
         textField.x = textField.y = _loc1_;
      }
      
      public function set condenseWhite(param1:Boolean) : void
      {
         textField.condenseWhite = param1;
      }
      
      public function get textWidth() : Number
      {
         return textField.textWidth;
      }
      
      override protected function focusOutHandler(param1:FocusEvent) : void
      {
         super.focusOutHandler(param1);
         if(editable)
         {
            setIMEMode(false);
         }
      }
      
      override public function setFocus() : void
      {
         stage.focus = textField;
      }
      
      public function set displayAsPassword(param1:Boolean) : void
      {
         textField.displayAsPassword = param1;
      }
      
      protected function drawBackground() : void
      {
         var _loc1_:DisplayObject = background;
         var _loc2_:String = enabled ? "upSkin" : "disabledSkin";
         background = getDisplayObjectInstance(getStyleValue(_loc2_));
         if(background == null)
         {
            return;
         }
         addChildAt(background,0);
         if(_loc1_ != null && _loc1_ != background && contains(_loc1_))
         {
            removeChild(_loc1_);
         }
      }
      
      public function get text() : String
      {
         return textField.text;
      }
      
      public function set maxChars(param1:int) : void
      {
         textField.maxChars = param1;
      }
      
      public function set horizontalScrollPosition(param1:int) : void
      {
         textField.scrollH = param1;
      }
      
      override protected function isOurFocus(param1:DisplayObject) : Boolean
      {
         return param1 == textField || super.isOurFocus(param1);
      }
      
      public function get textHeight() : Number
      {
         return textField.textHeight;
      }
      
      public function get restrict() : String
      {
         return textField.restrict;
      }
      
      public function get alwaysShowSelection() : Boolean
      {
         return textField.alwaysShowSelection;
      }
      
      override public function get enabled() : Boolean
      {
         return super.enabled;
      }
      
      override protected function draw() : void
      {
         var _loc1_:Object = null;
         if(isInvalid(InvalidationType.STYLES,InvalidationType.STATE))
         {
            drawTextFormat();
            drawBackground();
            _loc1_ = getStyleValue("embedFonts");
            if(_loc1_ != null)
            {
               textField.embedFonts = _loc1_;
            }
            invalidate(InvalidationType.SIZE,false);
         }
         if(isInvalid(InvalidationType.SIZE))
         {
            drawLayout();
         }
         super.draw();
      }
      
      public function set editable(param1:Boolean) : void
      {
         _editable = param1;
         updateTextFieldType();
      }
      
      public function setSelection(param1:int, param2:int) : void
      {
         textField.setSelection(param1,param2);
      }
      
      public function get condenseWhite() : Boolean
      {
         return textField.condenseWhite;
      }
      
      public function get displayAsPassword() : Boolean
      {
         return textField.displayAsPassword;
      }
      
      public function get selectionBeginIndex() : int
      {
         return textField.selectionBeginIndex;
      }
      
      override protected function configUI() : void
      {
         super.configUI();
         tabChildren = true;
         textField = new TextField();
         addChild(textField);
         updateTextFieldType();
         textField.addEventListener(TextEvent.TEXT_INPUT,handleTextInput,false,0,true);
         textField.addEventListener(Event.CHANGE,handleChange,false,0,true);
         textField.addEventListener(KeyboardEvent.KEY_DOWN,handleKeyDown,false,0,true);
      }
      
      public function get maxChars() : int
      {
         return textField.maxChars;
      }
      
      public function set text(param1:String) : void
      {
         textField.text = param1;
         _html = false;
         invalidate(InvalidationType.DATA);
         invalidate(InvalidationType.STYLES);
      }
      
      protected function updateTextFieldType() : void
      {
         textField.type = enabled && editable ? TextFieldType.INPUT : TextFieldType.DYNAMIC;
         textField.selectable = enabled;
      }
      
      protected function handleKeyDown(param1:KeyboardEvent) : void
      {
         if(param1.keyCode == Keyboard.ENTER)
         {
            dispatchEvent(new ComponentEvent(ComponentEvent.ENTER,true));
         }
      }
      
      public function get horizontalScrollPosition() : int
      {
         return textField.scrollH;
      }
      
      public function get selectionEndIndex() : int
      {
         return textField.selectionEndIndex;
      }
      
      public function get editable() : Boolean
      {
         return _editable;
      }
      
      public function get maxHorizontalScrollPosition() : int
      {
         return textField.maxScrollH;
      }
      
      public function appendText(param1:String) : void
      {
         textField.appendText(param1);
      }
      
      protected function drawTextFormat() : void
      {
         var _loc1_:Object = UIComponent.getStyleDefinition();
         var _loc2_:TextFormat = enabled ? _loc1_.defaultTextFormat as TextFormat : _loc1_.defaultDisabledTextFormat as TextFormat;
         textField.setTextFormat(_loc2_);
         var _loc3_:TextFormat = getStyleValue(enabled ? "textFormat" : "disabledTextFormat") as TextFormat;
         if(_loc3_ != null)
         {
            textField.setTextFormat(_loc3_);
         }
         else
         {
            _loc3_ = _loc2_;
         }
         textField.defaultTextFormat = _loc3_;
         setEmbedFont();
         if(_html)
         {
            textField.htmlText = _savedHTML;
         }
      }
      
      public function get length() : int
      {
         return textField.length;
      }
      
      public function set htmlText(param1:String) : void
      {
         if(param1 == "")
         {
            text = "";
            return;
         }
         _html = true;
         _savedHTML = param1;
         textField.htmlText = param1;
         invalidate(InvalidationType.DATA);
         invalidate(InvalidationType.STYLES);
      }
      
      protected function handleTextInput(param1:TextEvent) : void
      {
         param1.stopPropagation();
         dispatchEvent(new TextEvent(TextEvent.TEXT_INPUT,true,false,param1.text));
      }
      
      public function set restrict(param1:String) : void
      {
         if(componentInspectorSetting && param1 == "")
         {
            param1 = null;
         }
         textField.restrict = param1;
      }
      
      public function getLineMetrics(param1:int) : TextLineMetrics
      {
         return textField.getLineMetrics(param1);
      }
      
      override public function drawFocus(param1:Boolean) : void
      {
         if(focusTarget != null)
         {
            focusTarget.drawFocus(param1);
            return;
         }
         super.drawFocus(param1);
      }
      
      override protected function focusInHandler(param1:FocusEvent) : void
      {
         if(param1.target == this)
         {
            stage.focus = textField;
         }
         var _loc2_:IFocusManager = focusManager;
         if(editable && Boolean(_loc2_))
         {
            _loc2_.showFocusIndicator = true;
            if(textField.selectable && textField.selectionBeginIndex == textField.selectionBeginIndex)
            {
               setSelection(0,textField.length);
            }
         }
         super.focusInHandler(param1);
         if(editable)
         {
            setIMEMode(true);
         }
      }
      
      public function get htmlText() : String
      {
         return textField.htmlText;
      }
   }
}

package fl.controls
{
   import fl.core.InvalidationType;
   import fl.core.UIComponent;
   import fl.events.ScrollEvent;
   import flash.events.Event;
   import flash.events.TextEvent;
   import flash.text.TextField;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol71")]
   public class UIScrollBar extends ScrollBar
   {
      
      private static var defaultStyles:Object = {};
      
      protected var inEdit:Boolean = false;
      
      protected var inScroll:Boolean = false;
      
      protected var _scrollTarget:TextField;
      
      public function UIScrollBar()
      {
         super();
      }
      
      public static function getStyleDefinition() : Object
      {
         return UIComponent.mergeStyles(defaultStyles,ScrollBar.getStyleDefinition());
      }
      
      protected function updateScrollTargetProperties() : void
      {
         var _loc1_:* = false;
         var _loc2_:Number = NaN;
         if(_scrollTarget == null)
         {
            setScrollProperties(pageSize,minScrollPosition,maxScrollPosition,pageScrollSize);
            scrollPosition = 0;
         }
         else
         {
            _loc1_ = direction == ScrollBarDirection.HORIZONTAL;
            _loc2_ = _loc1_ ? _scrollTarget.width : 10;
            setScrollProperties(_loc2_,_loc1_ ? 0 : 1,_loc1_ ? _scrollTarget.maxScrollH : _scrollTarget.maxScrollV,pageScrollSize);
            scrollPosition = _loc1_ ? _scrollTarget.scrollH : _scrollTarget.scrollV;
         }
      }
      
      override public function setScrollProperties(param1:Number, param2:Number, param3:Number, param4:Number = 0) : void
      {
         var _loc5_:Number = param3;
         var _loc6_:Number = param2 < 0 ? 0 : param2;
         if(_scrollTarget != null)
         {
            if(direction == ScrollBarDirection.HORIZONTAL)
            {
               _loc5_ = param3 > _scrollTarget.maxScrollH ? _scrollTarget.maxScrollH : _loc5_;
            }
            else
            {
               _loc5_ = param3 > _scrollTarget.maxScrollV ? _scrollTarget.maxScrollV : _loc5_;
            }
         }
         super.setScrollProperties(param1,_loc6_,_loc5_,param4);
      }
      
      protected function handleTargetScroll(param1:Event) : void
      {
         if(inDrag)
         {
            return;
         }
         if(!enabled)
         {
            return;
         }
         inEdit = true;
         updateScrollTargetProperties();
         scrollPosition = direction == ScrollBarDirection.HORIZONTAL ? _scrollTarget.scrollH : _scrollTarget.scrollV;
         inEdit = false;
      }
      
      override public function setScrollPosition(param1:Number, param2:Boolean = true) : void
      {
         super.setScrollPosition(param1,param2);
         if(!_scrollTarget)
         {
            inScroll = false;
            return;
         }
         updateTargetScroll();
      }
      
      public function get scrollTargetName() : String
      {
         return _scrollTarget.name;
      }
      
      override protected function draw() : void
      {
         if(isInvalid(InvalidationType.DATA))
         {
            updateScrollTargetProperties();
         }
         super.draw();
      }
      
      override public function set direction(param1:String) : void
      {
         if(isLivePreview)
         {
            return;
         }
         super.direction = param1;
         updateScrollTargetProperties();
      }
      
      protected function updateTargetScroll(param1:ScrollEvent = null) : void
      {
         if(inEdit)
         {
            return;
         }
         if(direction == ScrollBarDirection.HORIZONTAL)
         {
            _scrollTarget.scrollH = scrollPosition;
         }
         else
         {
            _scrollTarget.scrollV = scrollPosition;
         }
      }
      
      override public function set minScrollPosition(param1:Number) : void
      {
         super.minScrollPosition = param1 < 0 ? 0 : param1;
      }
      
      override public function set maxScrollPosition(param1:Number) : void
      {
         var _loc2_:Number = param1;
         if(_scrollTarget != null)
         {
            if(direction == ScrollBarDirection.HORIZONTAL)
            {
               _loc2_ = _loc2_ > _scrollTarget.maxScrollH ? _scrollTarget.maxScrollH : _loc2_;
            }
            else
            {
               _loc2_ = _loc2_ > _scrollTarget.maxScrollV ? _scrollTarget.maxScrollV : _loc2_;
            }
         }
         super.maxScrollPosition = _loc2_;
      }
      
      protected function handleTargetChange(param1:Event) : void
      {
         inEdit = true;
         setScrollPosition(direction == ScrollBarDirection.HORIZONTAL ? _scrollTarget.scrollH : _scrollTarget.scrollV,true);
         updateScrollTargetProperties();
         inEdit = false;
      }
      
      public function update() : void
      {
         inEdit = true;
         updateScrollTargetProperties();
         inEdit = false;
      }
      
      public function set scrollTargetName(param1:String) : void
      {
         var target:String = param1;
         try
         {
            scrollTarget = parent.getChildByName(target) as TextField;
         }
         catch(error:Error)
         {
            throw new Error("ScrollTarget not found, or is not a TextField");
         }
      }
      
      public function set scrollTarget(param1:TextField) : void
      {
         if(_scrollTarget != null)
         {
            _scrollTarget.removeEventListener(Event.CHANGE,handleTargetChange,false);
            _scrollTarget.removeEventListener(TextEvent.TEXT_INPUT,handleTargetChange,false);
            _scrollTarget.removeEventListener(Event.SCROLL,handleTargetScroll,false);
            removeEventListener(ScrollEvent.SCROLL,updateTargetScroll,false);
         }
         _scrollTarget = param1;
         if(_scrollTarget != null)
         {
            _scrollTarget.addEventListener(Event.CHANGE,handleTargetChange,false,0,true);
            _scrollTarget.addEventListener(TextEvent.TEXT_INPUT,handleTargetChange,false,0,true);
            _scrollTarget.addEventListener(Event.SCROLL,handleTargetScroll,false,0,true);
            addEventListener(ScrollEvent.SCROLL,updateTargetScroll,false,0,true);
         }
         invalidate(InvalidationType.DATA);
      }
      
      public function get scrollTarget() : TextField
      {
         return _scrollTarget;
      }
      
      override public function get direction() : String
      {
         return super.direction;
      }
   }
}

package fl.controls.listClasses
{
   import fl.controls.LabelButton;
   import flash.events.MouseEvent;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol139")]
   public class CellRenderer extends LabelButton implements ICellRenderer
   {
      
      private static var defaultStyles:Object = {
         "upSkin":"CellRenderer_upSkin",
         "downSkin":"CellRenderer_downSkin",
         "overSkin":"CellRenderer_overSkin",
         "disabledSkin":"CellRenderer_disabledSkin",
         "selectedDisabledSkin":"CellRenderer_selectedDisabledSkin",
         "selectedUpSkin":"CellRenderer_selectedUpSkin",
         "selectedDownSkin":"CellRenderer_selectedDownSkin",
         "selectedOverSkin":"CellRenderer_selectedOverSkin",
         "textFormat":null,
         "disabledTextFormat":null,
         "embedFonts":null,
         "textPadding":5
      };
      
      protected var _listData:ListData;
      
      protected var _data:Object;
      
      public function CellRenderer()
      {
         super();
         toggle = true;
         focusEnabled = false;
      }
      
      public static function getStyleDefinition() : Object
      {
         return defaultStyles;
      }
      
      override public function set selected(param1:Boolean) : void
      {
         super.selected = param1;
      }
      
      override protected function drawLayout() : void
      {
         var _loc3_:Number = NaN;
         var _loc1_:Number = Number(getStyleValue("textPadding"));
         var _loc2_:Number = 0;
         if(icon != null)
         {
            icon.x = _loc1_;
            icon.y = Math.round(height - icon.height >> 1);
            _loc2_ = icon.width + _loc1_;
         }
         if(label.length > 0)
         {
            textField.visible = true;
            _loc3_ = Math.max(0,width - _loc2_ - _loc1_ * 2);
            textField.width = _loc3_;
            textField.height = textField.textHeight + 4;
            textField.x = _loc2_ + _loc1_;
            textField.y = Math.round(height - textField.height >> 1);
         }
         else
         {
            textField.visible = false;
         }
         background.width = width;
         background.height = height;
      }
      
      public function get listData() : ListData
      {
         return _listData;
      }
      
      override public function setSize(param1:Number, param2:Number) : void
      {
         super.setSize(param1,param2);
      }
      
      public function get data() : Object
      {
         return _data;
      }
      
      public function set data(param1:Object) : void
      {
         _data = param1;
      }
      
      public function set listData(param1:ListData) : void
      {
         _listData = param1;
         label = _listData.label;
         setStyle("icon",_listData.icon);
      }
      
      override public function get selected() : Boolean
      {
         return super.selected;
      }
      
      override protected function toggleSelected(param1:MouseEvent) : void
      {
      }
   }
}

package fl.controls.listClasses
{
   public interface ICellRenderer
   {
      
      function set x(param1:Number) : void;
      
      function set y(param1:Number) : void;
      
      function setSize(param1:Number, param2:Number) : void;
      
      function set data(param1:Object) : void;
      
      function set selected(param1:Boolean) : void;
      
      function set listData(param1:ListData) : void;
      
      function get listData() : ListData;
      
      function get data() : Object;
      
      function get selected() : Boolean;
      
      function setMouseState(param1:String) : void;
   }
}

package fl.controls.listClasses
{
   import fl.core.UIComponent;
   
   public class ListData
   {
      
      protected var _index:uint;
      
      protected var _owner:UIComponent;
      
      protected var _label:String;
      
      protected var _icon:Object = null;
      
      protected var _row:uint;
      
      protected var _column:uint;
      
      public function ListData(param1:String, param2:Object, param3:UIComponent, param4:uint, param5:uint, param6:uint = 0)
      {
         super();
         _label = param1;
         _icon = param2;
         _owner = param3;
         _index = param4;
         _row = param5;
         _column = param6;
      }
      
      public function get row() : uint
      {
         return _row;
      }
      
      public function get owner() : UIComponent
      {
         return _owner;
      }
      
      public function get label() : String
      {
         return _label;
      }
      
      public function get index() : uint
      {
         return _index;
      }
      
      public function get icon() : Object
      {
         return _icon;
      }
      
      public function get column() : uint
      {
         return _column;
      }
   }
}

package fl.core
{
   import flash.display.MovieClip;
   
   [Embed(source="/_assets/assets.swf", symbol="symbol5")]
   public dynamic class ComponentShim extends MovieClip
   {
      
      public function ComponentShim()
      {
         super();
      }
   }
}

package fl.core
{
   public class InvalidationType
   {
      
      public static const ALL:String = "all";
      
      public static const SIZE:String = "size";
      
      public static const STYLES:String = "styles";
      
      public static const RENDERER_STYLES:String = "rendererStyles";
      
      public static const STATE:String = "state";
      
      public static const DATA:String = "data";
      
      public static const SCROLL:String = "scroll";
      
      public static const SELECTED:String = "selected";
      
      public function InvalidationType()
      {
         super();
      }
   }
}

package fl.core
{
   import fl.events.ComponentEvent;
   import fl.managers.FocusManager;
   import fl.managers.IFocusManager;
   import fl.managers.IFocusManagerComponent;
   import fl.managers.StyleManager;
   import flash.display.DisplayObject;
   import flash.display.InteractiveObject;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.FocusEvent;
   import flash.events.KeyboardEvent;
   import flash.system.IME;
   import flash.system.IMEConversionMode;
   import flash.text.TextField;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import flash.utils.Dictionary;
   import flash.utils.getDefinitionByName;
   import flash.utils.getQualifiedClassName;
   
   public class UIComponent extends Sprite
   {
      
      public static var createAccessibilityImplementation:Function;
      
      public static var inCallLaterPhase:Boolean = false;
      
      private static var defaultStyles:Object = {
         "focusRectSkin":"focusRectSkin",
         "focusRectPadding":2,
         "textFormat":new TextFormat("_sans",11,0,false,false,false,"","",TextFormatAlign.LEFT,0,0,0,0),
         "disabledTextFormat":new TextFormat("_sans",11,10066329,false,false,false,"","",TextFormatAlign.LEFT,0,0,0,0),
         "defaultTextFormat":new TextFormat("_sans",11,0,false,false,false,"","",TextFormatAlign.LEFT,0,0,0,0),
         "defaultDisabledTextFormat":new TextFormat("_sans",11,10066329,false,false,false,"","",TextFormatAlign.LEFT,0,0,0,0)
      };
      
      private static var focusManagers:Dictionary = new Dictionary(true);
      
      private static var focusManagerUsers:Dictionary = new Dictionary(true);
      
      public const version:String = "3.0.2.3";
      
      public var focusTarget:IFocusManagerComponent;
      
      protected var isLivePreview:Boolean = false;
      
      private var tempText:TextField;
      
      protected var instanceStyles:Object;
      
      protected var sharedStyles:Object;
      
      protected var callLaterMethods:Dictionary;
      
      protected var invalidateFlag:Boolean = false;
      
      protected var _enabled:Boolean = true;
      
      protected var invalidHash:Object;
      
      protected var uiFocusRect:DisplayObject;
      
      protected var isFocused:Boolean = false;
      
      private var _focusEnabled:Boolean = true;
      
      private var _mouseFocusEnabled:Boolean = true;
      
      protected var _width:Number;
      
      protected var _height:Number;
      
      protected var _x:Number;
      
      protected var _y:Number;
      
      protected var startWidth:Number;
      
      protected var startHeight:Number;
      
      protected var _imeMode:String = null;
      
      protected var _oldIMEMode:String = null;
      
      protected var errorCaught:Boolean = false;
      
      protected var _inspector:Boolean = false;
      
      public function UIComponent()
      {
         super();
         instanceStyles = {};
         sharedStyles = {};
         invalidHash = {};
         callLaterMethods = new Dictionary();
         StyleManager.registerInstance(this);
         configUI();
         invalidate(InvalidationType.ALL);
         tabEnabled = this is IFocusManagerComponent;
         focusRect = false;
         if(tabEnabled)
         {
            addEventListener(FocusEvent.FOCUS_IN,focusInHandler);
            addEventListener(FocusEvent.FOCUS_OUT,focusOutHandler);
            addEventListener(KeyboardEvent.KEY_DOWN,keyDownHandler);
            addEventListener(KeyboardEvent.KEY_UP,keyUpHandler);
         }
         initializeFocusManager();
         addEventListener(Event.ENTER_FRAME,hookAccessibility,false,0,true);
      }
      
      public static function getStyleDefinition() : Object
      {
         return defaultStyles;
      }
      
      public static function mergeStyles(... rest) : Object
      {
         var _loc5_:Object = null;
         var _loc6_:String = null;
         var _loc2_:Object = {};
         var _loc3_:uint = uint(rest.length);
         var _loc4_:uint = 0;
         while(_loc4_ < _loc3_)
         {
            _loc5_ = rest[_loc4_];
            for(_loc6_ in _loc5_)
            {
               if(_loc2_[_loc6_] == null)
               {
                  _loc2_[_loc6_] = rest[_loc4_][_loc6_];
               }
            }
            _loc4_++;
         }
         return _loc2_;
      }
      
      public function get componentInspectorSetting() : Boolean
      {
         return _inspector;
      }
      
      public function set componentInspectorSetting(param1:Boolean) : void
      {
         _inspector = param1;
         if(_inspector)
         {
            beforeComponentParameters();
         }
         else
         {
            afterComponentParameters();
         }
      }
      
      protected function beforeComponentParameters() : void
      {
      }
      
      protected function afterComponentParameters() : void
      {
      }
      
      public function get enabled() : Boolean
      {
         return _enabled;
      }
      
      public function set enabled(param1:Boolean) : void
      {
         if(param1 == _enabled)
         {
            return;
         }
         _enabled = param1;
         invalidate(InvalidationType.STATE);
      }
      
      public function setSize(param1:Number, param2:Number) : void
      {
         _width = param1;
         _height = param2;
         invalidate(InvalidationType.SIZE);
         dispatchEvent(new ComponentEvent(ComponentEvent.RESIZE,false));
      }
      
      override public function get width() : Number
      {
         return _width;
      }
      
      override public function set width(param1:Number) : void
      {
         if(_width == param1)
         {
            return;
         }
         setSize(param1,height);
      }
      
      override public function get height() : Number
      {
         return _height;
      }
      
      override public function set height(param1:Number) : void
      {
         if(_height == param1)
         {
            return;
         }
         setSize(width,param1);
      }
      
      public function setStyle(param1:String, param2:Object) : void
      {
         if(instanceStyles[param1] === param2 && !(param2 is TextFormat))
         {
            return;
         }
         instanceStyles[param1] = param2;
         invalidate(InvalidationType.STYLES);
      }
      
      public function clearStyle(param1:String) : void
      {
         setStyle(param1,null);
      }
      
      public function getStyle(param1:String) : Object
      {
         return instanceStyles[param1];
      }
      
      public function move(param1:Number, param2:Number) : void
      {
         _x = param1;
         _y = param2;
         super.x = Math.round(param1);
         super.y = Math.round(param2);
         dispatchEvent(new ComponentEvent(ComponentEvent.MOVE));
      }
      
      override public function get x() : Number
      {
         return isNaN(_x) ? super.x : _x;
      }
      
      override public function set x(param1:Number) : void
      {
         move(param1,_y);
      }
      
      override public function get y() : Number
      {
         return isNaN(_y) ? super.y : _y;
      }
      
      override public function set y(param1:Number) : void
      {
         move(_x,param1);
      }
      
      override public function get scaleX() : Number
      {
         return width / startWidth;
      }
      
      override public function set scaleX(param1:Number) : void
      {
         setSize(startWidth * param1,height);
      }
      
      override public function get scaleY() : Number
      {
         return height / startHeight;
      }
      
      override public function set scaleY(param1:Number) : void
      {
         setSize(width,startHeight * param1);
      }
      
      protected function getScaleY() : Number
      {
         return super.scaleY;
      }
      
      protected function setScaleY(param1:Number) : void
      {
         super.scaleY = param1;
      }
      
      protected function getScaleX() : Number
      {
         return super.scaleX;
      }
      
      protected function setScaleX(param1:Number) : void
      {
         super.scaleX = param1;
      }
      
      override public function get visible() : Boolean
      {
         return super.visible;
      }
      
      override public function set visible(param1:Boolean) : void
      {
         if(super.visible == param1)
         {
            return;
         }
         super.visible = param1;
         var _loc2_:String = param1 ? ComponentEvent.SHOW : ComponentEvent.HIDE;
         dispatchEvent(new ComponentEvent(_loc2_,true));
      }
      
      public function validateNow() : void
      {
         invalidate(InvalidationType.ALL,false);
         draw();
      }
      
      public function invalidate(param1:String = "all", param2:Boolean = true) : void
      {
         invalidHash[param1] = true;
         if(param2)
         {
            this.callLater(draw);
         }
      }
      
      public function setSharedStyle(param1:String, param2:Object) : void
      {
         if(sharedStyles[param1] === param2 && !(param2 is TextFormat))
         {
            return;
         }
         sharedStyles[param1] = param2;
         if(instanceStyles[param1] == null)
         {
            invalidate(InvalidationType.STYLES);
         }
      }
      
      public function get focusEnabled() : Boolean
      {
         return _focusEnabled;
      }
      
      public function set focusEnabled(param1:Boolean) : void
      {
         _focusEnabled = param1;
      }
      
      public function get mouseFocusEnabled() : Boolean
      {
         return _mouseFocusEnabled;
      }
      
      public function set mouseFocusEnabled(param1:Boolean) : void
      {
         _mouseFocusEnabled = param1;
      }
      
      public function get focusManager() : IFocusManager
      {
         var _loc1_:DisplayObject = this;
         while(_loc1_)
         {
            if(UIComponent.focusManagers[_loc1_] != null)
            {
               return IFocusManager(UIComponent.focusManagers[_loc1_]);
            }
            _loc1_ = _loc1_.parent;
         }
         return null;
      }
      
      public function set focusManager(param1:IFocusManager) : void
      {
         UIComponent.focusManagers[this] = param1;
      }
      
      public function drawFocus(param1:Boolean) : void
      {
         var _loc2_:Number = NaN;
         isFocused = param1;
         if(uiFocusRect != null && contains(uiFocusRect))
         {
            removeChild(uiFocusRect);
            uiFocusRect = null;
         }
         if(param1)
         {
            uiFocusRect = getDisplayObjectInstance(getStyleValue("focusRectSkin")) as Sprite;
            if(uiFocusRect == null)
            {
               return;
            }
            _loc2_ = Number(getStyleValue("focusRectPadding"));
            uiFocusRect.x = -_loc2_;
            uiFocusRect.y = -_loc2_;
            uiFocusRect.width = width + _loc2_ * 2;
            uiFocusRect.height = height + _loc2_ * 2;
            addChildAt(uiFocusRect,0);
         }
      }
      
      public function setFocus() : void
      {
         if(stage)
         {
            stage.focus = this;
         }
      }
      
      public function getFocus() : InteractiveObject
      {
         if(stage)
         {
            return stage.focus;
         }
         return null;
      }
      
      protected function setIMEMode(param1:Boolean) : *
      {
         var enabled:Boolean = param1;
         if(_imeMode != null)
         {
            if(enabled)
            {
               IME.enabled = true;
               _oldIMEMode = IME.conversionMode;
               try
               {
                  if(!errorCaught && IME.conversionMode != IMEConversionMode.UNKNOWN)
                  {
                     IME.conversionMode = _imeMode;
                  }
                  errorCaught = false;
               }
               catch(e:Error)
               {
                  errorCaught = true;
                  throw new Error("IME mode not supported: " + _imeMode);
               }
            }
            else
            {
               if(IME.conversionMode != IMEConversionMode.UNKNOWN && _oldIMEMode != IMEConversionMode.UNKNOWN)
               {
                  IME.conversionMode = _oldIMEMode;
               }
               IME.enabled = false;
            }
         }
      }
      
      public function drawNow() : void
      {
         draw();
      }
      
      protected function configUI() : void
      {
         isLivePreview = checkLivePreview();
         var _loc1_:Number = rotation;
         rotation = 0;
         var _loc2_:Number = super.width;
         var _loc3_:Number = super.height;
         super.scaleX = super.scaleY = 1;
         setSize(_loc2_,_loc3_);
         move(super.x,super.y);
         rotation = _loc1_;
         startWidth = _loc2_;
         startHeight = _loc3_;
         if(numChildren > 0)
         {
            removeChildAt(0);
         }
      }
      
      protected function checkLivePreview() : Boolean
      {
         var className:String = null;
         if(parent == null)
         {
            return false;
         }
         try
         {
            className = getQualifiedClassName(parent);
         }
         catch(e:Error)
         {
         }
         return className == "fl.livepreview::LivePreviewParent";
      }
      
      protected function isInvalid(param1:String, ... rest) : Boolean
      {
         if(Boolean(invalidHash[param1]) || Boolean(invalidHash[InvalidationType.ALL]))
         {
            return true;
         }
         while(rest.length > 0)
         {
            if(invalidHash[rest.pop()])
            {
               return true;
            }
         }
         return false;
      }
      
      protected function validate() : void
      {
         invalidHash = {};
      }
      
      protected function draw() : void
      {
         if(isInvalid(InvalidationType.SIZE,InvalidationType.STYLES))
         {
            if(isFocused && focusManager.showFocusIndicator)
            {
               drawFocus(true);
            }
         }
         validate();
      }
      
      protected function getDisplayObjectInstance(param1:Object) : DisplayObject
      {
         var skin:Object = param1;
         var classDef:Object = null;
         if(skin is Class)
         {
            return new skin() as DisplayObject;
         }
         if(skin is DisplayObject)
         {
            (skin as DisplayObject).x = 0;
            (skin as DisplayObject).y = 0;
            return skin as DisplayObject;
         }
         try
         {
            classDef = getDefinitionByName(skin.toString());
         }
         catch(e:Error)
         {
            try
            {
               classDef = loaderInfo.applicationDomain.getDefinition(skin.toString()) as Object;
            }
            catch(e:Error)
            {
            }
         }
         if(classDef == null)
         {
            return null;
         }
         return new classDef() as DisplayObject;
      }
      
      protected function getStyleValue(param1:String) : Object
      {
         return instanceStyles[param1] == null ? sharedStyles[param1] : instanceStyles[param1];
      }
      
      protected function copyStylesToChild(param1:UIComponent, param2:Object) : void
      {
         var _loc3_:String = null;
         for(_loc3_ in param2)
         {
            param1.setStyle(_loc3_,getStyleValue(param2[_loc3_]));
         }
      }
      
      protected function callLater(param1:Function) : void
      {
         if(inCallLaterPhase)
         {
            return;
         }
         callLaterMethods[param1] = true;
         if(stage != null)
         {
            stage.addEventListener(Event.RENDER,callLaterDispatcher,false,0,true);
            stage.invalidate();
         }
         else
         {
            addEventListener(Event.ADDED_TO_STAGE,callLaterDispatcher,false,0,true);
         }
      }
      
      private function callLaterDispatcher(param1:Event) : void
      {
         var _loc3_:Object = null;
         if(param1.type == Event.ADDED_TO_STAGE)
         {
            removeEventListener(Event.ADDED_TO_STAGE,callLaterDispatcher);
            stage.addEventListener(Event.RENDER,callLaterDispatcher,false,0,true);
            stage.invalidate();
            return;
         }
         param1.target.removeEventListener(Event.RENDER,callLaterDispatcher);
         if(stage == null)
         {
            addEventListener(Event.ADDED_TO_STAGE,callLaterDispatcher,false,0,true);
            return;
         }
         inCallLaterPhase = true;
         var _loc2_:Dictionary = callLaterMethods;
         for(_loc3_ in _loc2_)
         {
            _loc3_();
            delete _loc2_[_loc3_];
         }
         inCallLaterPhase = false;
      }
      
      private function initializeFocusManager() : void
      {
         var _loc1_:IFocusManager = null;
         var _loc2_:Dictionary = null;
         if(stage == null)
         {
            addEventListener(Event.ADDED_TO_STAGE,addedHandler,false,0,true);
         }
         else
         {
            createFocusManager();
            _loc1_ = focusManager;
            if(_loc1_ != null)
            {
               _loc2_ = focusManagerUsers[_loc1_];
               if(_loc2_ == null)
               {
                  _loc2_ = new Dictionary(true);
                  focusManagerUsers[_loc1_] = _loc2_;
               }
               _loc2_[this] = true;
            }
         }
         addEventListener(Event.REMOVED_FROM_STAGE,removedHandler);
      }
      
      private function addedHandler(param1:Event) : void
      {
         removeEventListener(Event.ADDED_TO_STAGE,addedHandler);
         initializeFocusManager();
      }
      
      private function removedHandler(param1:Event) : void
      {
         var _loc3_:Dictionary = null;
         var _loc4_:Boolean = false;
         var _loc5_:* = undefined;
         var _loc6_:* = undefined;
         var _loc7_:IFocusManager = null;
         removeEventListener(Event.REMOVED_FROM_STAGE,removedHandler);
         addEventListener(Event.ADDED_TO_STAGE,addedHandler);
         var _loc2_:IFocusManager = focusManager;
         if(_loc2_ != null)
         {
            _loc3_ = focusManagerUsers[_loc2_];
            if(_loc3_ != null)
            {
               delete _loc3_[this];
               _loc4_ = true;
               var _loc8_:int = 0;
               var _loc9_:* = _loc3_;
               for(_loc5_ in _loc9_)
               {
                  _loc4_ = false;
               }
               if(_loc4_)
               {
                  delete focusManagerUsers[_loc2_];
                  _loc3_ = null;
               }
            }
            if(_loc3_ == null)
            {
               _loc2_.deactivate();
               for(_loc6_ in focusManagers)
               {
                  _loc7_ = focusManagers[_loc6_];
                  if(_loc2_ == _loc7_)
                  {
                     delete focusManagers[_loc6_];
                  }
               }
            }
         }
      }
      
      protected function createFocusManager() : void
      {
         if(focusManagers[stage] == null)
         {
            focusManagers[stage] = new FocusManager(stage);
         }
      }
      
      protected function isOurFocus(param1:DisplayObject) : Boolean
      {
         return param1 == this;
      }
      
      protected function focusInHandler(param1:FocusEvent) : void
      {
         var _loc2_:IFocusManager = null;
         if(isOurFocus(param1.target as DisplayObject))
         {
            _loc2_ = focusManager;
            if(Boolean(_loc2_) && _loc2_.showFocusIndicator)
            {
               drawFocus(true);
               isFocused = true;
            }
         }
      }
      
      protected function focusOutHandler(param1:FocusEvent) : void
      {
         if(isOurFocus(param1.target as DisplayObject))
         {
            drawFocus(false);
            isFocused = false;
         }
      }
      
      protected function keyDownHandler(param1:KeyboardEvent) : void
      {
      }
      
      protected function keyUpHandler(param1:KeyboardEvent) : void
      {
      }
      
      protected function hookAccessibility(param1:Event) : void
      {
         removeEventListener(Event.ENTER_FRAME,hookAccessibility);
         initializeAccessibility();
      }
      
      protected function initializeAccessibility() : void
      {
         if(UIComponent.createAccessibilityImplementation != null)
         {
            UIComponent.createAccessibilityImplementation(this);
         }
      }
   }
}

package fl.data
{
   import fl.events.DataChangeEvent;
   import fl.events.DataChangeType;
   import flash.events.EventDispatcher;
   
   public class DataProvider extends EventDispatcher
   {
      
      protected var data:Array;
      
      public function DataProvider(param1:Object = null)
      {
         super();
         if(param1 == null)
         {
            data = [];
         }
         else
         {
            data = getDataFromObject(param1);
         }
      }
      
      public function invalidateItemAt(param1:int) : void
      {
         checkIndex(param1,data.length - 1);
         dispatchChangeEvent(DataChangeType.INVALIDATE,[data[param1]],param1,param1);
      }
      
      protected function dispatchPreChangeEvent(param1:String, param2:Array, param3:int, param4:int) : void
      {
         dispatchEvent(new DataChangeEvent(DataChangeEvent.PRE_DATA_CHANGE,param1,param2,param3,param4));
      }
      
      public function getItemIndex(param1:Object) : int
      {
         return data.indexOf(param1);
      }
      
      public function removeItemAt(param1:uint) : Object
      {
         checkIndex(param1,data.length - 1);
         dispatchPreChangeEvent(DataChangeType.REMOVE,data.slice(param1,param1 + 1),param1,param1);
         var _loc2_:Array = data.splice(param1,1);
         dispatchChangeEvent(DataChangeType.REMOVE,_loc2_,param1,param1);
         return _loc2_[0];
      }
      
      protected function getDataFromObject(param1:Object) : Array
      {
         var _loc2_:Array = null;
         var _loc3_:Array = null;
         var _loc4_:uint = 0;
         var _loc5_:Object = null;
         var _loc6_:XML = null;
         var _loc7_:XMLList = null;
         var _loc8_:XML = null;
         var _loc9_:XMLList = null;
         var _loc10_:XML = null;
         var _loc11_:XMLList = null;
         var _loc12_:XML = null;
         if(param1 is Array)
         {
            _loc3_ = param1 as Array;
            if(_loc3_.length > 0)
            {
               if(_loc3_[0] is String || _loc3_[0] is Number)
               {
                  _loc2_ = [];
                  _loc4_ = 0;
                  while(_loc4_ < _loc3_.length)
                  {
                     _loc5_ = {
                        "label":String(_loc3_[_loc4_]),
                        "data":_loc3_[_loc4_]
                     };
                     _loc2_.push(_loc5_);
                     _loc4_++;
                  }
                  return _loc2_;
               }
            }
            return param1.concat();
         }
         if(param1 is DataProvider)
         {
            return param1.toArray();
         }
         if(param1 is XML)
         {
            _loc6_ = param1 as XML;
            _loc2_ = [];
            _loc7_ = _loc6_.*;
            for each(_loc8_ in _loc7_)
            {
               param1 = {};
               _loc9_ = _loc8_.attributes();
               for each(_loc10_ in _loc9_)
               {
                  param1[_loc10_.localName()] = _loc10_.toString();
               }
               _loc11_ = _loc8_.*;
               for each(_loc12_ in _loc11_)
               {
                  if(_loc12_.hasSimpleContent())
                  {
                     param1[_loc12_.localName()] = _loc12_.toString();
                  }
               }
               _loc2_.push(param1);
            }
            return _loc2_;
         }
         throw pop()(pop() * pop()(pop() * new TypeError("Error: Type Coercion failed: cannot convert " + param1 + " to Array or DataProvider.")));
      }
      
      public function addItem(param1:Object) : void
      {
         dispatchPreChangeEvent(DataChangeType.ADD,[param1],data.length - 1,data.length - 1);
         data.push(param1);
         dispatchChangeEvent(DataChangeType.ADD,[param1],data.length - 1,data.length - 1);
      }
      
      public function concat(param1:Object) : void
      {
         addItems(param1);
      }
      
      public function getItemAt(param1:uint) : Object
      {
         checkIndex(param1,data.length - 1);
         return data[param1];
      }
      
      public function sortOn(param1:Object, param2:Object = null) : *
      {
         dispatchPreChangeEvent(DataChangeType.SORT,data.concat(),0,data.length - 1);
         var _loc3_:Array = data.sortOn(param1,param2);
         dispatchChangeEvent(DataChangeType.SORT,data.concat(),0,data.length - 1);
         return _loc3_;
      }
      
      public function toArray() : Array
      {
         return data.concat();
      }
      
      public function addItems(param1:Object) : void
      {
         addItemsAt(param1,data.length);
      }
      
      public function clone() : DataProvider
      {
         return new DataProvider(data);
      }
      
      public function sort(... rest) : *
      {
         dispatchPreChangeEvent(DataChangeType.SORT,data.concat(),0,data.length - 1);
         var _loc2_:Array = data.sort.apply(data,rest);
         dispatchChangeEvent(DataChangeType.SORT,data.concat(),0,data.length - 1);
         return _loc2_;
      }
      
      public function get length() : uint
      {
         return data.length;
      }
      
      public function addItemAt(param1:Object, param2:uint) : void
      {
         checkIndex(param2,data.length);
         dispatchPreChangeEvent(DataChangeType.ADD,[param1],param2,param2);
         data.splice(param2,0,param1);
         dispatchChangeEvent(DataChangeType.ADD,[param1],param2,param2);
      }
      
      override public function toString() : String
      {
         return "DataProvider [" + data.join(" , ") + "]";
      }
      
      public function invalidateItem(param1:Object) : void
      {
         var _loc2_:uint = uint(getItemIndex(param1));
         if(_loc2_ == -1)
         {
            return;
         }
         invalidateItemAt(_loc2_);
      }
      
      protected function dispatchChangeEvent(param1:String, param2:Array, param3:int, param4:int) : void
      {
         dispatchEvent(new DataChangeEvent(DataChangeEvent.DATA_CHANGE,param1,param2,param3,param4));
      }
      
      protected function checkIndex(param1:int, param2:int) : void
      {
         if(param1 > param2 || param1 < 0)
         {
            throw new RangeError("DataProvider index (" + param1 + ") is not in acceptable range (0 - " + param2 + ")");
         }
      }
      
      public function addItemsAt(param1:Object, param2:uint) : void
      {
         checkIndex(param2,data.length);
         var _loc3_:Array = getDataFromObject(param1);
         dispatchPreChangeEvent(DataChangeType.ADD,_loc3_,param2,param2 + _loc3_.length - 1);
         data.splice.apply(data,[param2,0].concat(_loc3_));
         dispatchChangeEvent(DataChangeType.ADD,_loc3_,param2,param2 + _loc3_.length - 1);
      }
      
      public function replaceItem(param1:Object, param2:Object) : Object
      {
         var _loc3_:int = getItemIndex(param2);
         if(_loc3_ != -1)
         {
            return replaceItemAt(param1,_loc3_);
         }
         return null;
      }
      
      public function removeItem(param1:Object) : Object
      {
         var _loc2_:int = getItemIndex(param1);
         if(_loc2_ != -1)
         {
            return removeItemAt(_loc2_);
         }
         return null;
      }
      
      public function merge(param1:Object) : void
      {
         var _loc6_:Object = null;
         var _loc2_:Array = getDataFromObject(param1);
         var _loc3_:uint = _loc2_.length;
         var _loc4_:uint = data.length;
         dispatchPreChangeEvent(DataChangeType.ADD,data.slice(_loc4_,data.length),_loc4_,this.data.length - 1);
         var _loc5_:uint = 0;
         while(_loc5_ < _loc3_)
         {
            _loc6_ = _loc2_[_loc5_];
            if(getItemIndex(_loc6_) == -1)
            {
               data.push(_loc6_);
            }
            _loc5_++;
         }
         if(data.length > _loc4_)
         {
            dispatchChangeEvent(DataChangeType.ADD,data.slice(_loc4_,data.length),_loc4_,this.data.length - 1);
         }
         else
         {
            dispatchChangeEvent(DataChangeType.ADD,[],-1,-1);
         }
      }
      
      public function replaceItemAt(param1:Object, param2:uint) : Object
      {
         checkIndex(param2,data.length - 1);
         var _loc3_:Array = [data[param2]];
         dispatchPreChangeEvent(DataChangeType.REPLACE,_loc3_,param2,param2);
         data[param2] = param1;
         dispatchChangeEvent(DataChangeType.REPLACE,_loc3_,param2,param2);
         return _loc3_[0];
      }
      
      public function invalidate() : void
      {
         dispatchEvent(new DataChangeEvent(DataChangeEvent.DATA_CHANGE,DataChangeType.INVALIDATE_ALL,data.concat(),0,data.length));
      }
      
      public function removeAll() : void
      {
         var _loc1_:Array = data.concat();
         dispatchPreChangeEvent(DataChangeType.REMOVE_ALL,_loc1_,0,_loc1_.length);
         data = [];
         dispatchChangeEvent(DataChangeType.REMOVE_ALL,_loc1_,0,_loc1_.length);
      }
   }
}

package fl.data
{
   public dynamic class SimpleCollectionItem
   {
      
      public var data:String;
      
      public var label:String;
      
      public function SimpleCollectionItem()
      {
         super();
      }
      
      public function toString() : String
      {
         return "[SimpleCollectionItem: " + label + "," + data + "]";
      }
   }
}

package fl.events
{
   import flash.events.Event;
   
   public class ComponentEvent extends Event
   {
      
      public static const BUTTON_DOWN:String = "buttonDown";
      
      public static const LABEL_CHANGE:String = "labelChange";
      
      public static const HIDE:String = "hide";
      
      public static const SHOW:String = "show";
      
      public static const RESIZE:String = "resize";
      
      public static const MOVE:String = "move";
      
      public static const ENTER:String = "enter";
      
      public function ComponentEvent(param1:String, param2:Boolean = false, param3:Boolean = false)
      {
         super(param1,param2,param3);
      }
      
      override public function toString() : String
      {
         return formatToString("ComponentEvent","type","bubbles","cancelable");
      }
      
      override public function clone() : Event
      {
         return new ComponentEvent(type,bubbles,cancelable);
      }
   }
}

package fl.events
{
   import flash.events.Event;
   
   public class DataChangeEvent extends Event
   {
      
      public static const DATA_CHANGE:String = "dataChange";
      
      public static const PRE_DATA_CHANGE:String = "preDataChange";
      
      protected var _items:Array;
      
      protected var _changeType:String;
      
      protected var _startIndex:uint;
      
      protected var _endIndex:uint;
      
      public function DataChangeEvent(param1:String, param2:String, param3:Array, param4:int = -1, param5:int = -1)
      {
         super(param1);
         _changeType = param2;
         _startIndex = param4;
         _items = param3;
         _endIndex = param5 == -1 ? _startIndex : uint(param5);
      }
      
      public function get items() : Array
      {
         return _items;
      }
      
      public function get changeType() : String
      {
         return _changeType;
      }
      
      public function get startIndex() : uint
      {
         return _startIndex;
      }
      
      public function get endIndex() : uint
      {
         return _endIndex;
      }
      
      override public function toString() : String
      {
         return formatToString("DataChangeEvent","type","changeType","startIndex","endIndex","bubbles","cancelable");
      }
      
      override public function clone() : Event
      {
         return new DataChangeEvent(type,_changeType,_items,_startIndex,_endIndex);
      }
   }
}

package fl.events
{
   public class DataChangeType
   {
      
      public static const CHANGE:String = "change";
      
      public static const INVALIDATE:String = "invalidate";
      
      public static const INVALIDATE_ALL:String = "invalidateAll";
      
      public static const ADD:String = "add";
      
      public static const REMOVE:String = "remove";
      
      public static const REMOVE_ALL:String = "removeAll";
      
      public static const REPLACE:String = "replace";
      
      public static const SORT:String = "sort";
      
      public function DataChangeType()
      {
         super();
      }
   }
}

package fl.events
{
   public class InteractionInputType
   {
      
      public static const MOUSE:String = "mouse";
      
      public static const KEYBOARD:String = "keyboard";
      
      public function InteractionInputType()
      {
         super();
      }
   }
}

package fl.events
{
   import flash.events.Event;
   
   public class ListEvent extends Event
   {
      
      public static const ITEM_ROLL_OUT:String = "itemRollOut";
      
      public static const ITEM_ROLL_OVER:String = "itemRollOver";
      
      public static const ITEM_CLICK:String = "itemClick";
      
      public static const ITEM_DOUBLE_CLICK:String = "itemDoubleClick";
      
      protected var _item:Object;
      
      protected var _index:int;
      
      protected var _rowIndex:int;
      
      protected var _columnIndex:int;
      
      public function ListEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:int = -1, param5:int = -1, param6:int = -1, param7:Object = null)
      {
         super(param1,param2,param3);
         _rowIndex = param5;
         _columnIndex = param4;
         _index = param6;
         _item = param7;
      }
      
      public function get item() : Object
      {
         return _item;
      }
      
      override public function toString() : String
      {
         return formatToString("ListEvent","type","bubbles","cancelable","columnIndex","rowIndex","index","item");
      }
      
      override public function clone() : Event
      {
         return new ListEvent(type,bubbles,cancelable,_columnIndex,_rowIndex);
      }
      
      public function get rowIndex() : Object
      {
         return _rowIndex;
      }
      
      public function get index() : int
      {
         return _index;
      }
      
      public function get columnIndex() : int
      {
         return _columnIndex;
      }
   }
}

package fl.events
{
   import flash.events.Event;
   
   public class ScrollEvent extends Event
   {
      
      public static const SCROLL:String = "scroll";
      
      private var _direction:String;
      
      private var _position:Number;
      
      private var _delta:Number;
      
      public function ScrollEvent(param1:String, param2:Number, param3:Number)
      {
         super(ScrollEvent.SCROLL,false,false);
         _direction = param1;
         _delta = param2;
         _position = param3;
      }
      
      public function get position() : Number
      {
         return _position;
      }
      
      public function get direction() : String
      {
         return _direction;
      }
      
      public function get delta() : Number
      {
         return _delta;
      }
      
      override public function toString() : String
      {
         return formatToString("ScrollEvent","type","bubbles","cancelable","direction","delta","position");
      }
      
      override public function clone() : Event
      {
         return new ScrollEvent(_direction,_delta,_position);
      }
   }
}

package fl.events
{
   import flash.events.Event;
   
   public class SliderEvent extends Event
   {
      
      public static const CHANGE:String = "change";
      
      public static const THUMB_DRAG:String = "thumbDrag";
      
      public static const THUMB_PRESS:String = "thumbPress";
      
      public static const THUMB_RELEASE:String = "thumbRelease";
      
      protected var _triggerEvent:String;
      
      protected var _value:Number;
      
      protected var _keyCode:Number;
      
      protected var _clickTarget:String;
      
      public function SliderEvent(param1:String, param2:Number, param3:String, param4:String, param5:int = 0)
      {
         _value = param2;
         _keyCode = param5;
         _triggerEvent = param4;
         _clickTarget = param3;
         super(param1);
      }
      
      public function get value() : Number
      {
         return _value;
      }
      
      public function get keyCode() : Number
      {
         return _keyCode;
      }
      
      public function get triggerEvent() : String
      {
         return _triggerEvent;
      }
      
      public function get clickTarget() : String
      {
         return _clickTarget;
      }
      
      override public function toString() : String
      {
         return formatToString("SliderEvent","type","value","bubbles","cancelable","keyCode","triggerEvent","clickTarget");
      }
      
      override public function clone() : Event
      {
         return new SliderEvent(type,_value,_clickTarget,_triggerEvent,_keyCode);
      }
   }
}

package fl.events
{
   public class SliderEventClickTarget
   {
      
      public static const THUMB:String = "thumb";
      
      public static const TRACK:String = "track";
      
      public function SliderEventClickTarget()
      {
         super();
      }
   }
}

package fl.managers
{
   import fl.controls.Button;
   import fl.core.UIComponent;
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.display.InteractiveObject;
   import flash.display.SimpleButton;
   import flash.display.Stage;
   import flash.events.Event;
   import flash.events.FocusEvent;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.text.TextField;
   import flash.text.TextFieldType;
   import flash.ui.Keyboard;
   import flash.utils.*;
   
   public class FocusManager implements IFocusManager
   {
      
      private var _form:DisplayObjectContainer;
      
      private var focusableObjects:Dictionary;
      
      private var focusableCandidates:Array;
      
      private var activated:Boolean = false;
      
      private var calculateCandidates:Boolean = true;
      
      private var lastFocus:InteractiveObject;
      
      private var _showFocusIndicator:Boolean = true;
      
      private var lastAction:String;
      
      private var defButton:Button;
      
      private var _defaultButton:Button;
      
      private var _defaultButtonEnabled:Boolean = true;
      
      public function FocusManager(param1:DisplayObjectContainer)
      {
         super();
         focusableObjects = new Dictionary(true);
         if(param1 != null)
         {
            _form = param1;
            activate();
         }
      }
      
      private function addedHandler(param1:Event) : void
      {
         var _loc2_:DisplayObject = DisplayObject(param1.target);
         if(_loc2_.stage)
         {
            addFocusables(DisplayObject(param1.target));
         }
      }
      
      private function removedHandler(param1:Event) : void
      {
         var _loc2_:int = 0;
         var _loc4_:InteractiveObject = null;
         var _loc3_:DisplayObject = DisplayObject(param1.target);
         if(_loc3_ is IFocusManagerComponent && focusableObjects[_loc3_] == true)
         {
            if(_loc3_ == lastFocus)
            {
               IFocusManagerComponent(lastFocus).drawFocus(false);
               lastFocus = null;
            }
            _loc3_.removeEventListener(Event.TAB_ENABLED_CHANGE,tabEnabledChangeHandler,false);
            delete focusableObjects[_loc3_];
            calculateCandidates = true;
         }
         else if(_loc3_ is InteractiveObject && focusableObjects[_loc3_] == true)
         {
            _loc4_ = _loc3_ as InteractiveObject;
            if(_loc4_)
            {
               if(_loc4_ == lastFocus)
               {
                  lastFocus = null;
               }
               delete focusableObjects[_loc4_];
               calculateCandidates = true;
            }
            _loc3_.addEventListener(Event.TAB_ENABLED_CHANGE,tabEnabledChangeHandler,false,0,true);
         }
         removeFocusables(_loc3_);
      }
      
      private function addFocusables(param1:DisplayObject, param2:Boolean = false) : void
      {
         var focusable:IFocusManagerComponent = null;
         var io:InteractiveObject = null;
         var doc:DisplayObjectContainer = null;
         var i:int = 0;
         var child:DisplayObject = null;
         var o:DisplayObject = param1;
         var skipTopLevel:Boolean = param2;
         if(!skipTopLevel)
         {
            if(o is IFocusManagerComponent)
            {
               focusable = IFocusManagerComponent(o);
               if(focusable.focusEnabled)
               {
                  if(focusable.tabEnabled && isTabVisible(o))
                  {
                     focusableObjects[o] = true;
                     calculateCandidates = true;
                  }
                  o.addEventListener(Event.TAB_ENABLED_CHANGE,tabEnabledChangeHandler,false,0,true);
                  o.addEventListener(Event.TAB_INDEX_CHANGE,tabIndexChangeHandler,false,0,true);
               }
            }
            else if(o is InteractiveObject)
            {
               io = o as InteractiveObject;
               if(io && io.tabEnabled && findFocusManagerComponent(io) == io)
               {
                  focusableObjects[io] = true;
                  calculateCandidates = true;
               }
               io.addEventListener(Event.TAB_ENABLED_CHANGE,tabEnabledChangeHandler,false,0,true);
               io.addEventListener(Event.TAB_INDEX_CHANGE,tabIndexChangeHandler,false,0,true);
            }
         }
         if(o is DisplayObjectContainer)
         {
            doc = DisplayObjectContainer(o);
            o.addEventListener(Event.TAB_CHILDREN_CHANGE,tabChildrenChangeHandler,false,0,true);
            if(doc is Stage || doc.parent is Stage || doc.tabChildren)
            {
               i = 0;
               while(i < doc.numChildren)
               {
                  try
                  {
                     child = doc.getChildAt(i);
                     if(child != null)
                     {
                        addFocusables(doc.getChildAt(i));
                     }
                  }
                  catch(error:SecurityError)
                  {
                  }
                  i++;
               }
            }
         }
      }
      
      private function removeFocusables(param1:DisplayObject) : void
      {
         var _loc2_:Object = null;
         var _loc3_:DisplayObject = null;
         if(param1 is DisplayObjectContainer)
         {
            param1.removeEventListener(Event.TAB_CHILDREN_CHANGE,tabChildrenChangeHandler,false);
            param1.removeEventListener(Event.TAB_INDEX_CHANGE,tabIndexChangeHandler,false);
            for(_loc2_ in focusableObjects)
            {
               _loc3_ = DisplayObject(_loc2_);
               if(DisplayObjectContainer(param1).contains(_loc3_))
               {
                  if(_loc3_ == lastFocus)
                  {
                     lastFocus = null;
                  }
                  _loc3_.removeEventListener(Event.TAB_ENABLED_CHANGE,tabEnabledChangeHandler,false);
                  delete focusableObjects[_loc2_];
                  calculateCandidates = true;
               }
            }
         }
      }
      
      private function isTabVisible(param1:DisplayObject) : Boolean
      {
         var _loc2_:DisplayObjectContainer = param1.parent;
         while(_loc2_ && !(_loc2_ is Stage) && !(_loc2_.parent && _loc2_.parent is Stage))
         {
            if(!_loc2_.tabChildren)
            {
               return false;
            }
            _loc2_ = _loc2_.parent;
         }
         return true;
      }
      
      private function isValidFocusCandidate(param1:DisplayObject, param2:String) : Boolean
      {
         var _loc3_:IFocusManagerGroup = null;
         if(!isEnabledAndVisible(param1))
         {
            return false;
         }
         if(param1 is IFocusManagerGroup)
         {
            _loc3_ = IFocusManagerGroup(param1);
            if(param2 == _loc3_.groupName)
            {
               return false;
            }
         }
         return true;
      }
      
      private function isEnabledAndVisible(param1:DisplayObject) : Boolean
      {
         var _loc3_:TextField = null;
         var _loc4_:SimpleButton = null;
         var _loc2_:DisplayObjectContainer = DisplayObject(form).parent;
         while(param1 != _loc2_)
         {
            if(param1 is UIComponent)
            {
               if(!UIComponent(param1).enabled)
               {
                  return false;
               }
            }
            else if(param1 is TextField)
            {
               _loc3_ = TextField(param1);
               if(_loc3_.type == TextFieldType.DYNAMIC || !_loc3_.selectable)
               {
                  return false;
               }
            }
            else if(param1 is SimpleButton)
            {
               _loc4_ = SimpleButton(param1);
               if(!_loc4_.enabled)
               {
                  return false;
               }
            }
            if(!param1.visible)
            {
               return false;
            }
            param1 = param1.parent;
         }
         return true;
      }
      
      private function tabEnabledChangeHandler(param1:Event) : void
      {
         calculateCandidates = true;
         var _loc2_:InteractiveObject = InteractiveObject(param1.target);
         var _loc3_:* = focusableObjects[_loc2_] == true;
         if(_loc2_.tabEnabled)
         {
            if(!_loc3_ && isTabVisible(_loc2_))
            {
               if(!(_loc2_ is IFocusManagerComponent))
               {
                  _loc2_.focusRect = false;
               }
               focusableObjects[_loc2_] = true;
            }
         }
         else if(_loc3_)
         {
            delete focusableObjects[_loc2_];
         }
      }
      
      private function tabIndexChangeHandler(param1:Event) : void
      {
         calculateCandidates = true;
      }
      
      private function tabChildrenChangeHandler(param1:Event) : void
      {
         if(param1.target != param1.currentTarget)
         {
            return;
         }
         calculateCandidates = true;
         var _loc2_:DisplayObjectContainer = DisplayObjectContainer(param1.target);
         if(_loc2_.tabChildren)
         {
            addFocusables(_loc2_,true);
         }
         else
         {
            removeFocusables(_loc2_);
         }
      }
      
      public function activate() : void
      {
         if(activated)
         {
            return;
         }
         addFocusables(form);
         form.addEventListener(Event.ADDED,addedHandler,false,0,true);
         form.addEventListener(Event.REMOVED,removedHandler,false,0,true);
         form.stage.addEventListener(FocusEvent.MOUSE_FOCUS_CHANGE,mouseFocusChangeHandler,false,0,true);
         form.stage.addEventListener(FocusEvent.KEY_FOCUS_CHANGE,keyFocusChangeHandler,false,0,true);
         form.addEventListener(FocusEvent.FOCUS_IN,focusInHandler,true,0,true);
         form.addEventListener(FocusEvent.FOCUS_OUT,focusOutHandler,true,0,true);
         form.stage.addEventListener(Event.ACTIVATE,activateHandler,false,0,true);
         form.stage.addEventListener(Event.DEACTIVATE,deactivateHandler,false,0,true);
         form.addEventListener(MouseEvent.MOUSE_DOWN,mouseDownHandler,false,0,true);
         form.addEventListener(KeyboardEvent.KEY_DOWN,keyDownHandler,true,0,true);
         activated = true;
         if(lastFocus)
         {
            setFocus(lastFocus);
         }
      }
      
      public function deactivate() : void
      {
         if(!activated)
         {
            return;
         }
         focusableObjects = new Dictionary(true);
         focusableCandidates = null;
         lastFocus = null;
         defButton = null;
         form.removeEventListener(Event.ADDED,addedHandler,false);
         form.removeEventListener(Event.REMOVED,removedHandler,false);
         form.stage.removeEventListener(FocusEvent.MOUSE_FOCUS_CHANGE,mouseFocusChangeHandler,false);
         form.stage.removeEventListener(FocusEvent.KEY_FOCUS_CHANGE,keyFocusChangeHandler,false);
         form.removeEventListener(FocusEvent.FOCUS_IN,focusInHandler,true);
         form.removeEventListener(FocusEvent.FOCUS_OUT,focusOutHandler,true);
         form.stage.removeEventListener(Event.ACTIVATE,activateHandler,false);
         form.stage.removeEventListener(Event.DEACTIVATE,deactivateHandler,false);
         form.removeEventListener(MouseEvent.MOUSE_DOWN,mouseDownHandler,false);
         form.removeEventListener(KeyboardEvent.KEY_DOWN,keyDownHandler,true);
         activated = false;
      }
      
      private function focusInHandler(param1:FocusEvent) : void
      {
         var _loc3_:Button = null;
         if(!activated)
         {
            return;
         }
         var _loc2_:InteractiveObject = InteractiveObject(param1.target);
         if(form.contains(_loc2_))
         {
            lastFocus = findFocusManagerComponent(InteractiveObject(_loc2_));
            if(lastFocus is Button)
            {
               _loc3_ = Button(lastFocus);
               if(defButton)
               {
                  defButton.emphasized = false;
                  defButton = _loc3_;
                  _loc3_.emphasized = true;
               }
            }
            else if(Boolean(defButton) && defButton != _defaultButton)
            {
               defButton.emphasized = false;
               defButton = _defaultButton;
               _defaultButton.emphasized = true;
            }
         }
      }
      
      private function focusOutHandler(param1:FocusEvent) : void
      {
         if(!activated)
         {
            return;
         }
         var _loc2_:InteractiveObject = param1.target as InteractiveObject;
      }
      
      private function activateHandler(param1:Event) : void
      {
         if(!activated)
         {
            return;
         }
         var _loc2_:InteractiveObject = InteractiveObject(param1.target);
         if(lastFocus)
         {
            if(lastFocus is IFocusManagerComponent)
            {
               IFocusManagerComponent(lastFocus).setFocus();
            }
            else
            {
               form.stage.focus = lastFocus;
            }
         }
         lastAction = "ACTIVATE";
      }
      
      private function deactivateHandler(param1:Event) : void
      {
         if(!activated)
         {
            return;
         }
         var _loc2_:InteractiveObject = InteractiveObject(param1.target);
      }
      
      private function mouseFocusChangeHandler(param1:FocusEvent) : void
      {
         if(!activated)
         {
            return;
         }
         if(param1.relatedObject is TextField)
         {
            return;
         }
         param1.preventDefault();
      }
      
      private function keyFocusChangeHandler(param1:FocusEvent) : void
      {
         if(!activated)
         {
            return;
         }
         showFocusIndicator = true;
         if((param1.keyCode == Keyboard.TAB || param1.keyCode == 0) && !param1.isDefaultPrevented())
         {
            setFocusToNextObject(param1);
            param1.preventDefault();
         }
      }
      
      private function keyDownHandler(param1:KeyboardEvent) : void
      {
         if(!activated)
         {
            return;
         }
         if(param1.keyCode == Keyboard.TAB)
         {
            lastAction = "KEY";
            if(calculateCandidates)
            {
               sortFocusableObjects();
               calculateCandidates = false;
            }
         }
         if(defaultButtonEnabled && param1.keyCode == Keyboard.ENTER && defaultButton && defButton.enabled)
         {
            sendDefaultButtonEvent();
         }
      }
      
      private function mouseDownHandler(param1:MouseEvent) : void
      {
         if(!activated)
         {
            return;
         }
         if(param1.isDefaultPrevented())
         {
            return;
         }
         var _loc2_:InteractiveObject = getTopLevelFocusTarget(InteractiveObject(param1.target));
         if(!_loc2_)
         {
            return;
         }
         showFocusIndicator = false;
         if((_loc2_ != lastFocus || lastAction == "ACTIVATE") && !(_loc2_ is TextField))
         {
            setFocus(_loc2_);
         }
         lastAction = "MOUSEDOWN";
      }
      
      public function get defaultButton() : Button
      {
         return _defaultButton;
      }
      
      public function set defaultButton(param1:Button) : void
      {
         var _loc2_:Button = param1 ? Button(param1) : null;
         if(_loc2_ != _defaultButton)
         {
            if(_defaultButton)
            {
               _defaultButton.emphasized = false;
            }
            if(defButton)
            {
               defButton.emphasized = false;
            }
            _defaultButton = _loc2_;
            defButton = _loc2_;
            if(_loc2_)
            {
               _loc2_.emphasized = true;
            }
         }
      }
      
      public function sendDefaultButtonEvent() : void
      {
         defButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK));
      }
      
      private function setFocusToNextObject(param1:FocusEvent) : void
      {
         if(!hasFocusableObjects())
         {
            return;
         }
         var _loc2_:InteractiveObject = getNextFocusManagerComponent(param1.shiftKey);
         if(_loc2_)
         {
            setFocus(_loc2_);
         }
      }
      
      private function hasFocusableObjects() : Boolean
      {
         var _loc1_:Object = null;
         var _loc2_:int = 0;
         var _loc3_:* = focusableObjects;
         for(_loc1_ in _loc3_)
         {
            return true;
         }
         return false;
      }
      
      public function getNextFocusManagerComponent(param1:Boolean = false) : InteractiveObject
      {
         var _loc8_:IFocusManagerGroup = null;
         if(!hasFocusableObjects())
         {
            return null;
         }
         if(calculateCandidates)
         {
            sortFocusableObjects();
            calculateCandidates = false;
         }
         var _loc2_:DisplayObject = form.stage.focus;
         _loc2_ = DisplayObject(findFocusManagerComponent(InteractiveObject(_loc2_)));
         var _loc3_:String = "";
         if(_loc2_ is IFocusManagerGroup)
         {
            _loc8_ = IFocusManagerGroup(_loc2_);
            _loc3_ = _loc8_.groupName;
         }
         var _loc4_:int = getIndexOfFocusedObject(_loc2_);
         var _loc5_:Boolean = false;
         var _loc6_:int = _loc4_;
         if(_loc4_ == -1)
         {
            if(param1)
            {
               _loc4_ = int(focusableCandidates.length);
            }
            _loc5_ = true;
         }
         var _loc7_:int = getIndexOfNextObject(_loc4_,param1,_loc5_,_loc3_);
         return findFocusManagerComponent(focusableCandidates[_loc7_]);
      }
      
      private function getIndexOfFocusedObject(param1:DisplayObject) : int
      {
         var _loc2_:int = int(focusableCandidates.length);
         var _loc3_:int = 0;
         _loc3_ = 0;
         while(_loc3_ < _loc2_)
         {
            if(focusableCandidates[_loc3_] == param1)
            {
               return _loc3_;
            }
            _loc3_++;
         }
         return -1;
      }
      
      private function getIndexOfNextObject(param1:int, param2:Boolean, param3:Boolean, param4:String) : int
      {
         var _loc7_:DisplayObject = null;
         var _loc8_:IFocusManagerGroup = null;
         var _loc9_:int = 0;
         var _loc10_:DisplayObject = null;
         var _loc11_:IFocusManagerGroup = null;
         var _loc5_:int = int(focusableCandidates.length);
         var _loc6_:int = param1;
         while(true)
         {
            if(param2)
            {
               param1--;
            }
            else
            {
               param1++;
            }
            if(param3)
            {
               if(param2 && param1 < 0)
               {
                  break;
               }
               if(!param2 && param1 == _loc5_)
               {
                  break;
               }
            }
            else
            {
               param1 = (param1 + _loc5_) % _loc5_;
               if(_loc6_ == param1)
               {
                  break;
               }
            }
            if(isValidFocusCandidate(focusableCandidates[param1],param4))
            {
               _loc7_ = DisplayObject(findFocusManagerComponent(focusableCandidates[param1]));
               if(_loc7_ is IFocusManagerGroup)
               {
                  _loc8_ = IFocusManagerGroup(_loc7_);
                  _loc9_ = 0;
                  while(_loc9_ < focusableCandidates.length)
                  {
                     _loc10_ = focusableCandidates[_loc9_];
                     if(_loc10_ is IFocusManagerGroup)
                     {
                        _loc11_ = IFocusManagerGroup(_loc10_);
                        if(_loc11_.groupName == _loc8_.groupName && _loc11_.selected)
                        {
                           param1 = _loc9_;
                           break;
                        }
                     }
                     _loc9_++;
                  }
               }
               return param1;
            }
         }
         return param1;
      }
      
      private function sortFocusableObjects() : void
      {
         var _loc1_:Object = null;
         var _loc2_:InteractiveObject = null;
         focusableCandidates = [];
         for(_loc1_ in focusableObjects)
         {
            _loc2_ = InteractiveObject(_loc1_);
            if(_loc2_.tabIndex && !isNaN(Number(_loc2_.tabIndex)) && _loc2_.tabIndex > 0)
            {
               sortFocusableObjectsTabIndex();
               return;
            }
            focusableCandidates.push(_loc2_);
         }
         focusableCandidates.sort(sortByDepth);
      }
      
      private function sortFocusableObjectsTabIndex() : void
      {
         var _loc1_:Object = null;
         var _loc2_:InteractiveObject = null;
         focusableCandidates = [];
         for(_loc1_ in focusableObjects)
         {
            _loc2_ = InteractiveObject(_loc1_);
            if(Boolean(_loc2_.tabIndex) && !isNaN(Number(_loc2_.tabIndex)))
            {
               focusableCandidates.push(_loc2_);
            }
         }
         focusableCandidates.sort(sortByTabIndex);
      }
      
      private function sortByDepth(param1:InteractiveObject, param2:InteractiveObject) : Number
      {
         var _loc5_:int = 0;
         var _loc6_:String = null;
         var _loc7_:String = null;
         var _loc3_:String = "";
         var _loc4_:String = "";
         var _loc8_:String = "0000";
         var _loc9_:DisplayObject = DisplayObject(param1);
         var _loc10_:DisplayObject = DisplayObject(param2);
         while(_loc9_ != DisplayObject(form) && Boolean(_loc9_.parent))
         {
            _loc5_ = getChildIndex(_loc9_.parent,_loc9_);
            _loc6_ = _loc5_.toString(16);
            if(_loc6_.length < 4)
            {
               _loc7_ = _loc8_.substring(0,4 - _loc6_.length) + _loc6_;
            }
            _loc3_ = _loc7_ + _loc3_;
            _loc9_ = _loc9_.parent;
         }
         while(_loc10_ != DisplayObject(form) && Boolean(_loc10_.parent))
         {
            _loc5_ = getChildIndex(_loc10_.parent,_loc10_);
            _loc6_ = _loc5_.toString(16);
            if(_loc6_.length < 4)
            {
               _loc7_ = _loc8_.substring(0,4 - _loc6_.length) + _loc6_;
            }
            _loc4_ = _loc7_ + _loc4_;
            _loc10_ = _loc10_.parent;
         }
         return _loc3_ > _loc4_ ? 1 : (_loc3_ < _loc4_ ? -1 : 0);
      }
      
      private function getChildIndex(param1:DisplayObjectContainer, param2:DisplayObject) : int
      {
         return param1.getChildIndex(param2);
      }
      
      private function sortByTabIndex(param1:InteractiveObject, param2:InteractiveObject) : int
      {
         return param1.tabIndex > param2.tabIndex ? 1 : (param1.tabIndex < param2.tabIndex ? -1 : int(sortByDepth(param1,param2)));
      }
      
      public function get defaultButtonEnabled() : Boolean
      {
         return _defaultButtonEnabled;
      }
      
      public function set defaultButtonEnabled(param1:Boolean) : void
      {
         _defaultButtonEnabled = param1;
      }
      
      public function get nextTabIndex() : int
      {
         return 0;
      }
      
      public function get showFocusIndicator() : Boolean
      {
         return _showFocusIndicator;
      }
      
      public function set showFocusIndicator(param1:Boolean) : void
      {
         _showFocusIndicator = param1;
      }
      
      public function get form() : DisplayObjectContainer
      {
         return _form;
      }
      
      public function set form(param1:DisplayObjectContainer) : void
      {
         _form = param1;
      }
      
      public function getFocus() : InteractiveObject
      {
         var _loc1_:InteractiveObject = form.stage.focus;
         return findFocusManagerComponent(_loc1_);
      }
      
      public function setFocus(param1:InteractiveObject) : void
      {
         if(param1 is IFocusManagerComponent)
         {
            IFocusManagerComponent(param1).setFocus();
         }
         else
         {
            form.stage.focus = param1;
         }
      }
      
      public function showFocus() : void
      {
      }
      
      public function hideFocus() : void
      {
      }
      
      public function findFocusManagerComponent(param1:InteractiveObject) : InteractiveObject
      {
         var _loc2_:InteractiveObject = param1;
         while(param1)
         {
            if(param1 is IFocusManagerComponent && IFocusManagerComponent(param1).focusEnabled)
            {
               return param1;
            }
            param1 = param1.parent;
         }
         return _loc2_;
      }
      
      private function getTopLevelFocusTarget(param1:InteractiveObject) : InteractiveObject
      {
         while(param1 != InteractiveObject(form))
         {
            if(param1 is IFocusManagerComponent && IFocusManagerComponent(param1).focusEnabled && IFocusManagerComponent(param1).mouseFocusEnabled && UIComponent(param1).enabled)
            {
               return param1;
            }
            param1 = param1.parent;
            if(param1 == null)
            {
               break;
            }
         }
         return null;
      }
   }
}

package fl.managers
{
   import fl.controls.Button;
   import flash.display.InteractiveObject;
   
   public interface IFocusManager
   {
      
      function get defaultButton() : Button;
      
      function set defaultButton(param1:Button) : void;
      
      function get defaultButtonEnabled() : Boolean;
      
      function set defaultButtonEnabled(param1:Boolean) : void;
      
      function get nextTabIndex() : int;
      
      function get showFocusIndicator() : Boolean;
      
      function set showFocusIndicator(param1:Boolean) : void;
      
      function getFocus() : InteractiveObject;
      
      function setFocus(param1:InteractiveObject) : void;
      
      function showFocus() : void;
      
      function hideFocus() : void;
      
      function activate() : void;
      
      function deactivate() : void;
      
      function findFocusManagerComponent(param1:InteractiveObject) : InteractiveObject;
      
      function getNextFocusManagerComponent(param1:Boolean = false) : InteractiveObject;
   }
}

package fl.managers
{
   public interface IFocusManagerComponent
   {
      
      function get focusEnabled() : Boolean;
      
      function set focusEnabled(param1:Boolean) : void;
      
      function get mouseFocusEnabled() : Boolean;
      
      function get tabEnabled() : Boolean;
      
      function get tabIndex() : int;
      
      function setFocus() : void;
      
      function drawFocus(param1:Boolean) : void;
   }
}

package fl.managers
{
   public interface IFocusManagerGroup
   {
      
      function get groupName() : String;
      
      function set groupName(param1:String) : void;
      
      function get selected() : Boolean;
      
      function set selected(param1:Boolean) : void;
   }
}

package fl.managers
{
   import fl.core.UIComponent;
   import flash.text.TextFormat;
   import flash.utils.Dictionary;
   import flash.utils.getDefinitionByName;
   import flash.utils.getQualifiedClassName;
   import flash.utils.getQualifiedSuperclassName;
   
   public class StyleManager
   {
      
      private static var _instance:StyleManager;
      
      private var styleToClassesHash:Object;
      
      private var classToInstancesDict:Dictionary;
      
      private var classToStylesDict:Dictionary;
      
      private var classToDefaultStylesDict:Dictionary;
      
      private var globalStyles:Object;
      
      public function StyleManager()
      {
         super();
         styleToClassesHash = {};
         classToInstancesDict = new Dictionary(true);
         classToStylesDict = new Dictionary(true);
         classToDefaultStylesDict = new Dictionary(true);
         globalStyles = UIComponent.getStyleDefinition();
      }
      
      private static function getInstance() : *
      {
         if(_instance == null)
         {
            _instance = new StyleManager();
         }
         return _instance;
      }
      
      public static function registerInstance(param1:UIComponent) : void
      {
         var target:Class = null;
         var defaultStyles:Object = null;
         var styleToClasses:Object = null;
         var n:String = null;
         var instance:UIComponent = param1;
         var inst:StyleManager = getInstance();
         var classDef:Class = getClassDef(instance);
         if(classDef == null)
         {
            return;
         }
         if(inst.classToInstancesDict[classDef] == null)
         {
            inst.classToInstancesDict[classDef] = new Dictionary(true);
            target = classDef;
            while(defaultStyles == null)
            {
               if(target["getStyleDefinition"] != null)
               {
                  defaultStyles = target["getStyleDefinition"]();
                  break;
               }
               try
               {
                  target = instance.loaderInfo.applicationDomain.getDefinition(getQualifiedSuperclassName(target)) as Class;
               }
               catch(err:Error)
               {
                  try
                  {
                     target = getDefinitionByName(getQualifiedSuperclassName(target)) as Class;
                  }
                  catch(e:Error)
                  {
                     defaultStyles = UIComponent.getStyleDefinition();
                     break;
                  }
               }
            }
            styleToClasses = inst.styleToClassesHash;
            for(n in defaultStyles)
            {
               if(styleToClasses[n] == null)
               {
                  styleToClasses[n] = new Dictionary(true);
               }
               styleToClasses[n][classDef] = true;
            }
            inst.classToDefaultStylesDict[classDef] = defaultStyles;
            if(inst.classToStylesDict[classDef] == null)
            {
               inst.classToStylesDict[classDef] = {};
            }
         }
         inst.classToInstancesDict[classDef][instance] = true;
         setSharedStyles(instance);
      }
      
      private static function setSharedStyles(param1:UIComponent) : void
      {
         var _loc5_:String = null;
         var _loc2_:StyleManager = getInstance();
         var _loc3_:Class = getClassDef(param1);
         var _loc4_:Object = _loc2_.classToDefaultStylesDict[_loc3_];
         for(_loc5_ in _loc4_)
         {
            param1.setSharedStyle(_loc5_,getSharedStyle(param1,_loc5_));
         }
      }
      
      private static function getSharedStyle(param1:UIComponent, param2:String) : Object
      {
         var _loc3_:Class = getClassDef(param1);
         var _loc4_:StyleManager = getInstance();
         var _loc5_:Object = _loc4_.classToStylesDict[_loc3_][param2];
         if(_loc5_ != null)
         {
            return _loc5_;
         }
         _loc5_ = _loc4_.globalStyles[param2];
         if(_loc5_ != null)
         {
            return _loc5_;
         }
         return _loc4_.classToDefaultStylesDict[_loc3_][param2];
      }
      
      public static function getComponentStyle(param1:Object, param2:String) : Object
      {
         var _loc3_:Class = getClassDef(param1);
         var _loc4_:Object = getInstance().classToStylesDict[_loc3_];
         return _loc4_ == null ? null : _loc4_[param2];
      }
      
      public static function clearComponentStyle(param1:Object, param2:String) : void
      {
         var _loc3_:Class = getClassDef(param1);
         var _loc4_:Object = getInstance().classToStylesDict[_loc3_];
         if(_loc4_ != null && _loc4_[param2] != null)
         {
            delete _loc4_[param2];
            invalidateComponentStyle(_loc3_,param2);
         }
      }
      
      public static function setComponentStyle(param1:Object, param2:String, param3:Object) : void
      {
         var _loc4_:Class = getClassDef(param1);
         var _loc5_:Object = getInstance().classToStylesDict[_loc4_];
         if(_loc5_ == null)
         {
            _loc5_ = getInstance().classToStylesDict[_loc4_] = {};
         }
         if(_loc5_ == param3)
         {
            return;
         }
         _loc5_[param2] = param3;
         invalidateComponentStyle(_loc4_,param2);
      }
      
      private static function getClassDef(param1:Object) : Class
      {
         var component:Object = param1;
         if(component is Class)
         {
            return component as Class;
         }
         try
         {
            return getDefinitionByName(getQualifiedClassName(component)) as Class;
         }
         catch(e:Error)
         {
            if(component is UIComponent)
            {
               try
               {
                  return component.loaderInfo.applicationDomain.getDefinition(getQualifiedClassName(component)) as Class;
               }
               catch(e:Error)
               {
               }
            }
         }
         return null;
      }
      
      private static function invalidateStyle(param1:String) : void
      {
         var _loc3_:Object = null;
         var _loc2_:Dictionary = getInstance().styleToClassesHash[param1];
         if(_loc2_ == null)
         {
            return;
         }
         for(_loc3_ in _loc2_)
         {
            invalidateComponentStyle(Class(_loc3_),param1);
         }
      }
      
      private static function invalidateComponentStyle(param1:Class, param2:String) : void
      {
         var _loc4_:Object = null;
         var _loc5_:UIComponent = null;
         var _loc3_:Dictionary = getInstance().classToInstancesDict[param1];
         if(_loc3_ == null)
         {
            return;
         }
         for(_loc4_ in _loc3_)
         {
            _loc5_ = _loc4_ as UIComponent;
            if(_loc5_ != null)
            {
               _loc5_.setSharedStyle(param2,getSharedStyle(_loc5_,param2));
            }
         }
      }
      
      public static function setStyle(param1:String, param2:Object) : void
      {
         var _loc3_:Object = getInstance().globalStyles;
         if(_loc3_[param1] === param2 && !(param2 is TextFormat))
         {
            return;
         }
         _loc3_[param1] = param2;
         invalidateStyle(param1);
      }
      
      public static function clearStyle(param1:String) : void
      {
         setStyle(param1,null);
      }
      
      public static function getStyle(param1:String) : Object
      {
         return getInstance().globalStyles[param1];
      }
   }
}

package fl.transitions.easing
{
   public class None
   {
      
      public function None()
      {
         super();
      }
      
      public static function easeOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * param1 / param4 + param2;
      }
      
      public static function easeIn(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * param1 / param4 + param2;
      }
      
      public static function easeInOut(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * param1 / param4 + param2;
      }
      
      public static function easeNone(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 * param1 / param4 + param2;
      }
   }
}

package mx.automation
{
   import flash.display.DisplayObjectContainer;
   import flash.events.Event;
   
   public interface IAutomationObject
   {
      
      function get automationDelegate() : Object;
      
      function set automationDelegate(param1:Object) : void;
      
      function get automationName() : String;
      
      function set automationName(param1:String) : void;
      
      function get automationValue() : Array;
      
      function get numAutomationChildren() : int;
      
      function get showInAutomationHierarchy() : Boolean;
      
      function set showInAutomationHierarchy(param1:Boolean) : void;
      
      function get automationTabularData() : Object;
      
      function get automationOwner() : DisplayObjectContainer;
      
      function get automationParent() : DisplayObjectContainer;
      
      function get automationEnabled() : Boolean;
      
      function get automationVisible() : Boolean;
      
      function createAutomationIDPart(param1:IAutomationObject) : Object;
      
      function createAutomationIDPartWithRequiredProperties(param1:IAutomationObject, param2:Array) : Object;
      
      function resolveAutomationIDPart(param1:Object) : Array;
      
      function getAutomationChildAt(param1:int) : IAutomationObject;
      
      function getAutomationChildren() : Array;
      
      function replayAutomatableEvent(param1:Event) : Boolean;
   }
}

package mx.binding
{
   import mx.core.mx_internal;
   import mx.events.PropertyChangeEvent;
   
   use namespace mx_internal;
   
   public class BindabilityInfo
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const BINDABLE:String = "Bindable";
      
      public static const MANAGED:String = "Managed";
      
      public static const CHANGE_EVENT:String = "ChangeEvent";
      
      public static const NON_COMMITTING_CHANGE_EVENT:String = "NonCommittingChangeEvent";
      
      public static const ACCESSOR:String = "accessor";
      
      public static const METHOD:String = "method";
      
      private var typeDescription:XML;
      
      private var classChangeEvents:Object;
      
      private var childChangeEvents:Object = {};
      
      public function BindabilityInfo(param1:XML)
      {
         super();
         this.typeDescription = param1;
      }
      
      public function getChangeEvents(param1:String) : Object
      {
         var childDesc:XMLList = null;
         var numChildren:int = 0;
         var childName:String = param1;
         var changeEvents:Object = this.childChangeEvents[childName];
         if(!changeEvents)
         {
            changeEvents = this.copyProps(this.getClassChangeEvents(),{});
            childDesc = this.typeDescription.accessor.(@name == childName) + this.typeDescription.method.(@name == childName);
            numChildren = int(childDesc.length());
            if(numChildren == 0)
            {
               if(!this.typeDescription.@dynamic)
               {
                  trace("warning: no describeType entry for \'" + childName + "\' on non-dynamic type \'" + this.typeDescription.@name + "\'");
               }
            }
            else
            {
               if(numChildren > 1)
               {
                  trace("warning: multiple describeType entries for \'" + childName + "\' on type \'" + this.typeDescription.@name + "\':\n" + childDesc);
               }
               this.addBindabilityEvents(childDesc.metadata,changeEvents);
            }
            this.childChangeEvents[childName] = changeEvents;
         }
         return changeEvents;
      }
      
      private function getClassChangeEvents() : Object
      {
         if(!this.classChangeEvents)
         {
            this.classChangeEvents = {};
            this.addBindabilityEvents(this.typeDescription.metadata,this.classChangeEvents);
            if(this.typeDescription.metadata.(@name == MANAGED).length() > 0)
            {
               this.classChangeEvents[PropertyChangeEvent.PROPERTY_CHANGE] = true;
            }
         }
         return this.classChangeEvents;
      }
      
      private function addBindabilityEvents(param1:XMLList, param2:Object) : void
      {
         var metadata:XMLList = param1;
         var eventListObj:Object = param2;
         this.addChangeEvents(metadata.(@name == BINDABLE),eventListObj,true);
         this.addChangeEvents(metadata.(@name == CHANGE_EVENT),eventListObj,true);
         this.addChangeEvents(metadata.(@name == NON_COMMITTING_CHANGE_EVENT),eventListObj,false);
      }
      
      private function addChangeEvents(param1:XMLList, param2:Object, param3:Boolean) : void
      {
         var _loc4_:XML = null;
         var _loc5_:XMLList = null;
         var _loc6_:String = null;
         for each(_loc4_ in param1)
         {
            _loc5_ = _loc4_.arg;
            if(_loc5_.length() > 0)
            {
               _loc6_ = _loc5_[0].@value;
               param2[_loc6_] = param3;
            }
            else
            {
               trace("warning: unconverted Bindable metadata in class \'" + this.typeDescription.@name + "\'");
            }
         }
      }
      
      private function copyProps(param1:Object, param2:Object) : Object
      {
         var _loc3_:String = null;
         for(_loc3_ in param1)
         {
            param2[_loc3_] = param1[_loc3_];
         }
         return param2;
      }
   }
}

package mx.binding
{
   import flash.utils.Dictionary;
   import mx.collections.errors.ItemPendingError;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class Binding
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      mx_internal var _isEnabled:Boolean;
      
      mx_internal var isExecuting:Boolean;
      
      mx_internal var isHandlingEvent:Boolean;
      
      mx_internal var disabledRequests:Dictionary;
      
      private var hasHadValue:Boolean;
      
      public var uiComponentWatcher:int;
      
      public var twoWayCounterpart:Binding;
      
      public var isTwoWayPrimary:Boolean;
      
      private var wrappedFunctionSuccessful:Boolean;
      
      mx_internal var document:Object;
      
      mx_internal var srcFunc:Function;
      
      mx_internal var destFunc:Function;
      
      mx_internal var destString:String;
      
      mx_internal var srcString:String;
      
      private var lastValue:Object;
      
      public function Binding(param1:Object, param2:Function, param3:Function, param4:String, param5:String = null)
      {
         super();
         this.mx_internal::document = param1;
         this.mx_internal::srcFunc = param2;
         this.mx_internal::destFunc = param3;
         this.mx_internal::destString = param4;
         this.mx_internal::srcString = param5;
         if(this.mx_internal::srcFunc == null)
         {
            this.mx_internal::srcFunc = this.defaultSrcFunc;
         }
         if(this.mx_internal::destFunc == null)
         {
            this.mx_internal::destFunc = this.defaultDestFunc;
         }
         this.mx_internal::_isEnabled = true;
         this.mx_internal::isExecuting = false;
         this.mx_internal::isHandlingEvent = false;
         this.hasHadValue = false;
         this.uiComponentWatcher = -1;
         BindingManager.addBinding(param1,param4,this);
      }
      
      mx_internal function get isEnabled() : Boolean
      {
         return this.mx_internal::_isEnabled;
      }
      
      mx_internal function set isEnabled(param1:Boolean) : void
      {
         this.mx_internal::_isEnabled = param1;
         if(param1)
         {
            this.processDisabledRequests();
         }
      }
      
      private function defaultDestFunc(param1:Object) : void
      {
         var _loc2_:Array = this.mx_internal::destString.split(".");
         var _loc3_:Object = this.mx_internal::document;
         var _loc4_:uint = 0;
         if(_loc2_[0] == "this")
         {
            _loc4_++;
         }
         while(_loc4_ < _loc2_.length - 1)
         {
            _loc3_ = _loc3_[_loc2_[_loc4_++]];
         }
         _loc3_[_loc2_[_loc4_]] = param1;
      }
      
      private function defaultSrcFunc() : Object
      {
         return this.mx_internal::document[this.mx_internal::srcString];
      }
      
      public function execute(param1:Object = null) : void
      {
         var o:Object = param1;
         if(!this.mx_internal::isEnabled)
         {
            if(o != null)
            {
               this.registerDisabledExecute(o);
            }
            return;
         }
         if(this.twoWayCounterpart && !this.twoWayCounterpart.hasHadValue && this.twoWayCounterpart.isTwoWayPrimary)
         {
            this.twoWayCounterpart.execute();
            this.hasHadValue = true;
            return;
         }
         if(this.mx_internal::isExecuting || this.twoWayCounterpart && this.twoWayCounterpart.mx_internal::isExecuting)
         {
            this.hasHadValue = true;
            return;
         }
         try
         {
            this.mx_internal::isExecuting = true;
            this.wrapFunctionCall(this,this.innerExecute,o);
         }
         catch(error:Error)
         {
            if(error.errorID != 1507)
            {
               throw error;
            }
         }
         finally
         {
            this.mx_internal::isExecuting = false;
         }
      }
      
      private function registerDisabledExecute(param1:Object) : void
      {
         if(param1 != null)
         {
            this.mx_internal::disabledRequests = this.mx_internal::disabledRequests != null ? this.mx_internal::disabledRequests : new Dictionary(true);
            this.mx_internal::disabledRequests[param1] = true;
         }
      }
      
      private function processDisabledRequests() : void
      {
         var _loc1_:Object = null;
         if(this.mx_internal::disabledRequests != null)
         {
            for(_loc1_ in this.mx_internal::disabledRequests)
            {
               this.execute(_loc1_);
            }
            this.mx_internal::disabledRequests = null;
         }
      }
      
      protected function wrapFunctionCall(param1:Object, param2:Function, param3:Object = null, ... rest) : Object
      {
         var result:Object = null;
         var thisArg:Object = param1;
         var wrappedFunction:Function = param2;
         var object:Object = param3;
         var args:Array = rest;
         this.wrappedFunctionSuccessful = false;
         try
         {
            result = wrappedFunction.apply(thisArg,args);
            this.wrappedFunctionSuccessful = true;
            return result;
         }
         catch(itemPendingError:ItemPendingError)
         {
            itemPendingError.addResponder(new EvalBindingResponder(this,object));
            if(BindingManager.debugDestinationStrings[mx_internal::destString])
            {
               trace("Binding: destString = " + mx_internal::destString + ", error = " + itemPendingError);
            }
         }
         catch(rangeError:RangeError)
         {
            if(BindingManager.debugDestinationStrings[mx_internal::destString])
            {
               trace("Binding: destString = " + mx_internal::destString + ", error = " + rangeError);
            }
         }
         catch(error:Error)
         {
            if(error.errorID != 1006 && error.errorID != 1009 && error.errorID != 1010 && error.errorID != 1055 && error.errorID != 1069)
            {
               throw error;
            }
            if(BindingManager.debugDestinationStrings[mx_internal::destString])
            {
               trace("Binding: destString = " + mx_internal::destString + ", error = " + error);
            }
         }
         return null;
      }
      
      private function nodeSeqEqual(param1:XMLList, param2:XMLList) : Boolean
      {
         var _loc4_:uint = 0;
         var _loc3_:uint = uint(param1.length());
         if(_loc3_ == param2.length())
         {
            _loc4_ = 0;
            while(_loc4_ < _loc3_ && param1[_loc4_] === param2[_loc4_])
            {
               _loc4_++;
            }
            return _loc4_ == _loc3_;
         }
         return false;
      }
      
      private function innerExecute() : void
      {
         var _loc1_:Object = this.wrapFunctionCall(this.mx_internal::document,this.mx_internal::srcFunc);
         if(BindingManager.debugDestinationStrings[this.mx_internal::destString])
         {
            trace("Binding: destString = " + this.mx_internal::destString + ", srcFunc result = " + _loc1_);
         }
         if(this.hasHadValue || this.wrappedFunctionSuccessful)
         {
            if(!(this.lastValue is XML && Boolean(this.lastValue.hasComplexContent()) && this.lastValue === _loc1_) && !(this.lastValue is XMLList && this.lastValue.hasComplexContent() && _loc1_ is XMLList && this.nodeSeqEqual(this.lastValue as XMLList,_loc1_ as XMLList)))
            {
               this.mx_internal::destFunc.call(this.mx_internal::document,_loc1_);
               this.lastValue = _loc1_;
               this.hasHadValue = true;
            }
         }
      }
      
      public function watcherFired(param1:Boolean, param2:int) : void
      {
         var commitEvent:Boolean = param1;
         var cloneIndex:int = param2;
         if(this.mx_internal::isHandlingEvent)
         {
            return;
         }
         try
         {
            this.mx_internal::isHandlingEvent = true;
            this.execute(cloneIndex);
         }
         finally
         {
            this.mx_internal::isHandlingEvent = false;
         }
      }
   }
}

package mx.binding
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class BindingManager
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      internal static var debugDestinationStrings:Object = {};
      
      public function BindingManager()
      {
         super();
      }
      
      public static function addBinding(param1:Object, param2:String, param3:Binding) : void
      {
         if(!param1._bindingsByDestination)
         {
            param1._bindingsByDestination = {};
            param1._bindingsBeginWithWord = {};
         }
         param1._bindingsByDestination[param2] = param3;
         param1._bindingsBeginWithWord[getFirstWord(param2)] = true;
      }
      
      public static function setEnabled(param1:Object, param2:Boolean) : void
      {
         var _loc3_:Array = null;
         var _loc4_:uint = 0;
         var _loc5_:Binding = null;
         if(param1 is IBindingClient && Boolean(param1._bindings))
         {
            _loc3_ = param1._bindings as Array;
            _loc4_ = 0;
            while(_loc4_ < _loc3_.length)
            {
               _loc5_ = _loc3_[_loc4_];
               _loc5_.mx_internal::isEnabled = param2;
               _loc4_++;
            }
         }
      }
      
      public static function executeBindings(param1:Object, param2:String, param3:Object) : void
      {
         var _loc4_:String = null;
         if(!param2 || param2 == "")
         {
            return;
         }
         if(param1 && (param1 is IBindingClient || param1.hasOwnProperty("_bindingsByDestination")) && Boolean(param1._bindingsByDestination) && Boolean(param1._bindingsBeginWithWord[getFirstWord(param2)]))
         {
            for(_loc4_ in param1._bindingsByDestination)
            {
               if(_loc4_.charAt(0) == param2.charAt(0))
               {
                  if(_loc4_.indexOf(param2 + ".") == 0 || _loc4_.indexOf(param2 + "[") == 0 || _loc4_ == param2)
                  {
                     param1._bindingsByDestination[_loc4_].execute(param3);
                  }
               }
            }
         }
      }
      
      private static function getFirstWord(param1:String) : String
      {
         var _loc2_:int = int(param1.indexOf("."));
         var _loc3_:int = int(param1.indexOf("["));
         if(_loc2_ == _loc3_)
         {
            return param1;
         }
         var _loc4_:int = Math.min(_loc2_,_loc3_);
         if(_loc4_ == -1)
         {
            _loc4_ = Math.max(_loc2_,_loc3_);
         }
         return param1.substr(0,_loc4_);
      }
      
      public static function debugBinding(param1:String) : void
      {
         debugDestinationStrings[param1] = true;
      }
   }
}

package mx.binding
{
   import mx.core.mx_internal;
   import mx.rpc.IResponder;
   
   use namespace mx_internal;
   
   public class EvalBindingResponder implements IResponder
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var binding:Binding;
      
      private var object:Object;
      
      public function EvalBindingResponder(param1:Binding, param2:Object)
      {
         super();
         this.binding = param1;
         this.object = param2;
      }
      
      public function result(param1:Object) : void
      {
         this.binding.execute(this.object);
      }
      
      public function fault(param1:Object) : void
      {
      }
   }
}

package mx.binding
{
   public interface IBindingClient
   {
      
      
   }
}

package mx.collections
{
   import flash.events.IEventDispatcher;
   
   public interface IList extends IEventDispatcher
   {
      
      function get length() : int;
      
      function addItem(param1:Object) : void;
      
      function addItemAt(param1:Object, param2:int) : void;
      
      function getItemAt(param1:int, param2:int = 0) : Object;
      
      function getItemIndex(param1:Object) : int;
      
      function itemUpdated(param1:Object, param2:Object = null, param3:Object = null, param4:Object = null) : void;
      
      function removeAll() : void;
      
      function removeItemAt(param1:int) : Object;
      
      function setItemAt(param1:Object, param2:int) : Object;
      
      function toArray() : Array;
   }
}

package mx.collections.errors
{
   import mx.core.mx_internal;
   import mx.rpc.IResponder;
   
   use namespace mx_internal;
   
   public class ItemPendingError extends Error
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var _responders:Array;
      
      public function ItemPendingError(param1:String)
      {
         super(param1);
      }
      
      public function get responders() : Array
      {
         return this._responders;
      }
      
      public function addResponder(param1:IResponder) : void
      {
         if(!this._responders)
         {
            this._responders = [];
         }
         this._responders.push(param1);
      }
   }
}

package mx.controls
{
   import flash.display.InteractiveObject;
   
   public interface IFlexContextMenu
   {
      
      function setContextMenu(param1:InteractiveObject) : void;
      
      function unsetContextMenu(param1:InteractiveObject) : void;
   }
}

package mx.controls
{
   import flash.display.DisplayObject;
   import flash.events.Event;
   import mx.controls.listClasses.BaseListData;
   import mx.controls.listClasses.IDropInListItemRenderer;
   import mx.controls.listClasses.IListItemRenderer;
   import mx.core.IDataRenderer;
   import mx.core.mx_internal;
   import mx.events.FlexEvent;
   
   use namespace mx_internal;
   
   public class Image extends SWFLoader implements IDataRenderer, IDropInListItemRenderer, IListItemRenderer
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var makeContentVisible:Boolean = false;
      
      private var sourceSet:Boolean;
      
      private var settingBrokenImage:Boolean;
      
      private var _data:Object;
      
      private var _listData:BaseListData;
      
      public function Image()
      {
         super();
         tabChildren = false;
         tabEnabled = true;
         tabFocusEnabled = true;
         showInAutomationHierarchy = true;
      }
      
      [Bindable("sourceChanged")]
      override public function set source(param1:Object) : void
      {
         this.settingBrokenImage = param1 == getStyle("brokenImageSkin");
         this.sourceSet = !this.settingBrokenImage;
         super.source = param1;
      }
      
      [Bindable("dataChange")]
      public function get data() : Object
      {
         return this._data;
      }
      
      public function set data(param1:Object) : void
      {
         this._data = param1;
         if(!this.sourceSet)
         {
            this.source = this.listData ? this.listData.label : this.data;
            this.sourceSet = false;
         }
         dispatchEvent(new FlexEvent(FlexEvent.DATA_CHANGE));
      }
      
      [Bindable("dataChange")]
      public function get listData() : BaseListData
      {
         return this._listData;
      }
      
      public function set listData(param1:BaseListData) : void
      {
         this._listData = param1;
      }
      
      override public function invalidateSize() : void
      {
         if(Boolean(this.data) && this.settingBrokenImage)
         {
            return;
         }
         super.invalidateSize();
      }
      
      override protected function updateDisplayList(param1:Number, param2:Number) : void
      {
         super.updateDisplayList(param1,param2);
         if(this.makeContentVisible && Boolean(mx_internal::contentHolder))
         {
            mx_internal::contentHolder.visible = true;
            this.makeContentVisible = false;
         }
      }
      
      override mx_internal function contentLoaderInfo_completeEventHandler(param1:Event) : void
      {
         var _loc2_:DisplayObject = DisplayObject(param1.target.loader);
         super.mx_internal::contentLoaderInfo_completeEventHandler(param1);
         _loc2_.visible = false;
         this.makeContentVisible = true;
         invalidateDisplayList();
      }
   }
}

package mx.controls
{
   import flash.display.Bitmap;
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.display.Loader;
   import flash.display.LoaderInfo;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.events.HTTPStatusEvent;
   import flash.events.IEventDispatcher;
   import flash.events.IOErrorEvent;
   import flash.events.MouseEvent;
   import flash.events.ProgressEvent;
   import flash.events.SecurityErrorEvent;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.net.URLRequest;
   import flash.system.ApplicationDomain;
   import flash.system.Capabilities;
   import flash.system.LoaderContext;
   import flash.system.SecurityDomain;
   import flash.utils.ByteArray;
   import mx.core.FlexGlobals;
   import mx.core.FlexLoader;
   import mx.core.FlexVersion;
   import mx.core.IFlexDisplayObject;
   import mx.core.IFlexModuleFactory;
   import mx.core.ISWFLoader;
   import mx.core.IUIComponent;
   import mx.core.UIComponent;
   import mx.core.mx_internal;
   import mx.events.FlexEvent;
   import mx.events.InterManagerRequest;
   import mx.events.InvalidateRequestData;
   import mx.events.Request;
   import mx.events.SWFBridgeEvent;
   import mx.events.SWFBridgeRequest;
   import mx.managers.CursorManager;
   import mx.managers.IMarshalSystemManager;
   import mx.managers.ISystemManager;
   import mx.managers.SystemManagerGlobals;
   import mx.styles.ISimpleStyleClient;
   import mx.utils.LoaderUtil;
   
   use namespace mx_internal;
   
   public class SWFLoader extends UIComponent implements ISWFLoader
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      mx_internal var contentHolder:DisplayObject;
      
      private var contentChanged:Boolean = false;
      
      private var scaleContentChanged:Boolean = false;
      
      private var smoothBitmapContentChanged:Boolean = false;
      
      private var isContentLoaded:Boolean = false;
      
      private var brokenImage:Boolean = false;
      
      private var resizableContent:Boolean = false;
      
      private var flexContent:Boolean = false;
      
      private var contentRequestID:String = null;
      
      private var attemptingChildAppDomain:Boolean = false;
      
      private var requestedURL:URLRequest;
      
      private var brokenImageBorder:IFlexDisplayObject;
      
      private var explicitLoaderContext:Boolean = false;
      
      private var mouseShield:Sprite;
      
      private var useUnloadAndStop:Boolean;
      
      private var unloadAndStopGC:Boolean;
      
      private var _autoLoad:Boolean = true;
      
      private var _loadForCompatibility:Boolean = false;
      
      private var _bytesLoaded:Number = NaN;
      
      private var _bytesTotal:Number = NaN;
      
      private var _loaderContext:LoaderContext;
      
      private var _maintainAspectRatio:Boolean = true;
      
      private var _swfBridge:IEventDispatcher;
      
      private var _scaleContent:Boolean = true;
      
      private var _showBusyCursor:Boolean = false;
      
      private var _smoothBitmapContent:Boolean = false;
      
      private var _source:Object;
      
      private var _trustContent:Boolean = false;
      
      public function SWFLoader()
      {
         super();
         tabEnabled = false;
         tabFocusEnabled = false;
         addEventListener(FlexEvent.INITIALIZE,this.initializeHandler);
         addEventListener(Event.ADDED_TO_STAGE,this.addedToStageHandler);
         addEventListener(MouseEvent.CLICK,this.clickHandler);
         showInAutomationHierarchy = false;
      }
      
      [Bindable("autoLoadChanged")]
      public function get autoLoad() : Boolean
      {
         return this._autoLoad;
      }
      
      public function set autoLoad(param1:Boolean) : void
      {
         if(this._autoLoad != param1)
         {
            this._autoLoad = param1;
            this.contentChanged = true;
            invalidateProperties();
            invalidateSize();
            invalidateDisplayList();
            dispatchEvent(new Event("autoLoadChanged"));
         }
      }
      
      [Bindable("loadForCompatibilityChanged")]
      public function get loadForCompatibility() : Boolean
      {
         return this._loadForCompatibility;
      }
      
      public function set loadForCompatibility(param1:Boolean) : void
      {
         if(this._loadForCompatibility != param1)
         {
            this._loadForCompatibility = param1;
            this.contentChanged = true;
            invalidateProperties();
            invalidateSize();
            invalidateDisplayList();
            dispatchEvent(new Event("loadForCompatibilityChanged"));
         }
      }
      
      [Bindable("progress")]
      public function get bytesLoaded() : Number
      {
         return this._bytesLoaded;
      }
      
      [Bindable("complete")]
      public function get bytesTotal() : Number
      {
         return this._bytesTotal;
      }
      
      public function get content() : DisplayObject
      {
         if(this.mx_internal::contentHolder is Loader)
         {
            return Loader(this.mx_internal::contentHolder).content;
         }
         return this.mx_internal::contentHolder;
      }
      
      public function get contentHeight() : Number
      {
         return this.mx_internal::contentHolder ? this.mx_internal::contentHolder.height : NaN;
      }
      
      private function get contentHolderHeight() : Number
      {
         var loaderInfo:LoaderInfo = null;
         var mp:IMarshalSystemManager = null;
         var content:IFlexDisplayObject = null;
         var bridge:IEventDispatcher = null;
         var request:SWFBridgeRequest = null;
         var testContent:DisplayObject = null;
         if(this.mx_internal::contentHolder is Loader)
         {
            loaderInfo = Loader(this.mx_internal::contentHolder).contentLoaderInfo;
         }
         if(loaderInfo)
         {
            if(loaderInfo.contentType == "application/x-shockwave-flash")
            {
               try
               {
                  mp = IMarshalSystemManager(systemManager.getImplementation("mx.managers::IMarshalSystemManager"));
                  if(Boolean(mp) && Boolean(mp.swfBridgeGroup))
                  {
                     bridge = this.swfBridge;
                     if(bridge)
                     {
                        request = new SWFBridgeRequest(SWFBridgeRequest.GET_SIZE_REQUEST);
                        bridge.dispatchEvent(request);
                        return request.data.height;
                     }
                  }
                  content = Loader(this.mx_internal::contentHolder).content as IFlexDisplayObject;
                  if(content)
                  {
                     return content.measuredHeight;
                  }
               }
               catch(error:Error)
               {
                  return mx_internal::contentHolder.height;
               }
            }
            else
            {
               try
               {
                  testContent = Loader(this.mx_internal::contentHolder).content;
               }
               catch(error:Error)
               {
                  return mx_internal::contentHolder.height;
               }
            }
            return loaderInfo.height;
         }
         if(this.mx_internal::contentHolder is IUIComponent)
         {
            return IUIComponent(this.mx_internal::contentHolder).getExplicitOrMeasuredHeight();
         }
         if(this.mx_internal::contentHolder is IFlexDisplayObject)
         {
            return IFlexDisplayObject(this.mx_internal::contentHolder).measuredHeight;
         }
         return this.mx_internal::contentHolder.height;
      }
      
      private function get contentHolderWidth() : Number
      {
         var loaderInfo:LoaderInfo = null;
         var content:IFlexDisplayObject = null;
         var request:SWFBridgeRequest = null;
         var testContent:DisplayObject = null;
         if(this.mx_internal::contentHolder is Loader)
         {
            loaderInfo = Loader(this.mx_internal::contentHolder).contentLoaderInfo;
         }
         if(loaderInfo)
         {
            if(loaderInfo.contentType == "application/x-shockwave-flash")
            {
               try
               {
                  if(this.swfBridge)
                  {
                     request = new SWFBridgeRequest(SWFBridgeRequest.GET_SIZE_REQUEST);
                     this.swfBridge.dispatchEvent(request);
                     return request.data.width;
                  }
                  content = Loader(this.mx_internal::contentHolder).content as IFlexDisplayObject;
                  if(content)
                  {
                     return content.measuredWidth;
                  }
               }
               catch(error:Error)
               {
                  return mx_internal::contentHolder.width;
               }
            }
            else
            {
               try
               {
                  testContent = Loader(this.mx_internal::contentHolder).content;
               }
               catch(error:Error)
               {
                  return mx_internal::contentHolder.width;
               }
            }
            return loaderInfo.width;
         }
         if(this.mx_internal::contentHolder is IUIComponent)
         {
            return IUIComponent(this.mx_internal::contentHolder).getExplicitOrMeasuredWidth();
         }
         if(this.mx_internal::contentHolder is IFlexDisplayObject)
         {
            return IFlexDisplayObject(this.mx_internal::contentHolder).measuredWidth;
         }
         return this.mx_internal::contentHolder.width;
      }
      
      public function get contentWidth() : Number
      {
         return this.mx_internal::contentHolder ? this.mx_internal::contentHolder.width : NaN;
      }
      
      [Bindable("loaderContextChanged")]
      public function get loaderContext() : LoaderContext
      {
         return this._loaderContext;
      }
      
      public function set loaderContext(param1:LoaderContext) : void
      {
         this._loaderContext = param1;
         this.explicitLoaderContext = true;
         dispatchEvent(new Event("loaderContextChanged"));
      }
      
      [Bindable("maintainAspectRatioChanged")]
      public function get maintainAspectRatio() : Boolean
      {
         return this._maintainAspectRatio;
      }
      
      public function set maintainAspectRatio(param1:Boolean) : void
      {
         this._maintainAspectRatio = param1;
         dispatchEvent(new Event("maintainAspectRatioChanged"));
      }
      
      [Bindable("progress")]
      public function get percentLoaded() : Number
      {
         var _loc1_:Number = isNaN(this._bytesTotal) || this._bytesTotal == 0 ? 0 : 100 * (this._bytesLoaded / this._bytesTotal);
         if(isNaN(_loc1_))
         {
            _loc1_ = 0;
         }
         return _loc1_;
      }
      
      [Bindable("scaleContentChanged")]
      public function get scaleContent() : Boolean
      {
         return this._scaleContent;
      }
      
      public function set scaleContent(param1:Boolean) : void
      {
         if(this._scaleContent != param1)
         {
            this._scaleContent = param1;
            this.scaleContentChanged = true;
            invalidateDisplayList();
         }
         dispatchEvent(new Event("scaleContentChanged"));
      }
      
      public function get showBusyCursor() : Boolean
      {
         return this._showBusyCursor;
      }
      
      public function set showBusyCursor(param1:Boolean) : void
      {
         if(this._showBusyCursor != param1)
         {
            this._showBusyCursor = param1;
            if(this._showBusyCursor)
            {
               CursorManager.mx_internal::registerToUseBusyCursor(this);
            }
            else
            {
               CursorManager.mx_internal::unRegisterToUseBusyCursor(this);
            }
         }
      }
      
      [Bindable("smoothBitmapContentChanged")]
      public function get smoothBitmapContent() : Boolean
      {
         return this._smoothBitmapContent;
      }
      
      public function set smoothBitmapContent(param1:Boolean) : void
      {
         if(this._smoothBitmapContent != param1)
         {
            this._smoothBitmapContent = param1;
            this.smoothBitmapContentChanged = true;
            invalidateDisplayList();
         }
         dispatchEvent(new Event("smoothBitmapContentChanged"));
      }
      
      [Bindable("sourceChanged")]
      public function get source() : Object
      {
         return this._source;
      }
      
      public function set source(param1:Object) : void
      {
         if(this._source != param1)
         {
            this._source = param1;
            this.contentChanged = true;
            invalidateProperties();
            invalidateSize();
            invalidateDisplayList();
            dispatchEvent(new Event("sourceChanged"));
         }
      }
      
      [Bindable("trustContentChanged")]
      public function get trustContent() : Boolean
      {
         return this._trustContent;
      }
      
      public function set trustContent(param1:Boolean) : void
      {
         if(this._trustContent != param1)
         {
            this._trustContent = param1;
            invalidateProperties();
            invalidateSize();
            invalidateDisplayList();
            dispatchEvent(new Event("trustContentChanged"));
         }
      }
      
      public function get swfBridge() : IEventDispatcher
      {
         return this._swfBridge;
      }
      
      public function get childAllowsParent() : Boolean
      {
         if(!this.isContentLoaded)
         {
            return false;
         }
         try
         {
            if(this.mx_internal::contentHolder is Loader)
            {
               return Loader(this.mx_internal::contentHolder).contentLoaderInfo.childAllowsParent;
            }
         }
         catch(error:Error)
         {
            return false;
         }
         return true;
      }
      
      public function get parentAllowsChild() : Boolean
      {
         if(!this.isContentLoaded)
         {
            return false;
         }
         try
         {
            if(this.mx_internal::contentHolder is Loader)
            {
               return Loader(this.mx_internal::contentHolder).contentLoaderInfo.parentAllowsChild;
            }
         }
         catch(error:Error)
         {
            return false;
         }
         return true;
      }
      
      override protected function commitProperties() : void
      {
         super.commitProperties();
         if(this.contentChanged)
         {
            this.contentChanged = false;
            if(this._autoLoad)
            {
               this.load(this._source);
            }
         }
      }
      
      override protected function measure() : void
      {
         var _loc1_:Number = NaN;
         var _loc2_:Number = NaN;
         super.measure();
         if(this.isContentLoaded)
         {
            _loc1_ = this.mx_internal::contentHolder.scaleX;
            _loc2_ = this.mx_internal::contentHolder.scaleY;
            this.mx_internal::contentHolder.scaleX = 1;
            this.mx_internal::contentHolder.scaleY = 1;
            measuredWidth = this.contentHolderWidth;
            measuredHeight = this.contentHolderHeight;
            this.mx_internal::contentHolder.scaleX = _loc1_;
            this.mx_internal::contentHolder.scaleY = _loc2_;
         }
         else if(!this._source || this._source == "")
         {
            measuredWidth = 0;
            measuredHeight = 0;
         }
      }
      
      override protected function updateDisplayList(param1:Number, param2:Number) : void
      {
         var _loc3_:Class = null;
         super.updateDisplayList(param1,param2);
         if(this.contentChanged)
         {
            this.contentChanged = false;
            if(this._autoLoad)
            {
               this.load(this._source);
            }
         }
         if(this.isContentLoaded)
         {
            if(this._scaleContent && !this.brokenImage)
            {
               this.doScaleContent();
            }
            else
            {
               this.doScaleLoader();
            }
            this.scaleContentChanged = false;
            if(this.smoothBitmapContentChanged)
            {
               this.doSmoothBitmapContent();
               this.smoothBitmapContentChanged = false;
            }
         }
         if(this.brokenImage && !this.brokenImageBorder)
         {
            _loc3_ = getStyle("brokenImageBorderSkin");
            if(_loc3_)
            {
               this.brokenImageBorder = IFlexDisplayObject(new _loc3_());
               if(this.brokenImageBorder is ISimpleStyleClient)
               {
                  ISimpleStyleClient(this.brokenImageBorder).styleName = this;
               }
               addChild(DisplayObject(this.brokenImageBorder));
            }
         }
         else if(!this.brokenImage && Boolean(this.brokenImageBorder))
         {
            removeChild(DisplayObject(this.brokenImageBorder));
            this.brokenImageBorder = null;
         }
         if(this.brokenImageBorder)
         {
            this.brokenImageBorder.setActualSize(param1,param2);
         }
         this.sizeShield();
      }
      
      public function load(param1:Object = null) : void
      {
         if(param1)
         {
            this._source = param1;
         }
         this.unloadContent();
         this.isContentLoaded = false;
         this.brokenImage = false;
         this.useUnloadAndStop = false;
         this.contentChanged = false;
         if(!this._source || this._source == "")
         {
            return;
         }
         this.loadContent(this._source);
      }
      
      public function unloadAndStop(param1:Boolean = true) : void
      {
         this.useUnloadAndStop = true;
         this.unloadAndStopGC = param1;
         this.source = null;
         if(!this.autoLoad)
         {
            this.load(null);
         }
      }
      
      public function getVisibleApplicationRect(param1:Boolean = false) : Rectangle
      {
         var _loc2_:Rectangle = getVisibleRect();
         if(param1)
         {
            _loc2_ = systemManager.getVisibleApplicationRect(_loc2_);
         }
         return _loc2_;
      }
      
      private function unloadContent() : void
      {
         var imageData:Bitmap = null;
         var contentLoader:Loader = null;
         var request:SWFBridgeEvent = null;
         if(this.mx_internal::contentHolder)
         {
            if(this.isContentLoaded)
            {
               if(this.mx_internal::contentHolder is Loader)
               {
                  contentLoader = Loader(this.mx_internal::contentHolder);
                  try
                  {
                     if(contentLoader.content is Bitmap)
                     {
                        imageData = Bitmap(contentLoader.content);
                        if(imageData.bitmapData)
                        {
                           imageData.bitmapData = null;
                        }
                     }
                  }
                  catch(error:Error)
                  {
                  }
                  if(this._swfBridge)
                  {
                     request = new SWFBridgeEvent(SWFBridgeEvent.BRIDGE_APPLICATION_UNLOADING,false,false,this._swfBridge);
                     this._swfBridge.dispatchEvent(request);
                  }
                  if(contentLoader.contentLoaderInfo.contentType == "application/x-shockwave-flash" && contentLoader.contentLoaderInfo.parentAllowsChild && contentLoader.contentLoaderInfo.childAllowsParent && Boolean(contentLoader.content))
                  {
                     contentLoader.content.removeEventListener(Request.GET_PARENT_FLEX_MODULE_FACTORY_REQUEST,this.contentHolder_getFlexModuleFactoryRequestHandler);
                  }
                  this.mx_internal::contentHolder.removeEventListener(Event.ADDED,this.contentHolder_addedHandler);
                  this.removeInitSystemManagerCompleteListener(contentLoader.contentLoaderInfo);
                  if(this.useUnloadAndStop)
                  {
                     contentLoader.unloadAndStop(this.unloadAndStopGC);
                  }
                  else
                  {
                     contentLoader.unload();
                  }
                  if(!this.explicitLoaderContext)
                  {
                     this._loaderContext = null;
                  }
               }
               else if(this.mx_internal::contentHolder is Bitmap)
               {
                  imageData = Bitmap(this.mx_internal::contentHolder);
                  if(imageData.bitmapData)
                  {
                     imageData.bitmapData = null;
                  }
               }
            }
            else if(this.mx_internal::contentHolder is Loader)
            {
               try
               {
                  Loader(this.mx_internal::contentHolder).close();
               }
               catch(error:Error)
               {
               }
            }
            try
            {
               if(this.mx_internal::contentHolder.parent == this)
               {
                  removeChild(this.mx_internal::contentHolder);
               }
            }
            catch(error:Error)
            {
               try
               {
                  removeChild(mx_internal::contentHolder);
               }
               catch(error1:Error)
               {
               }
            }
            this.mx_internal::contentHolder = null;
         }
      }
      
      private function loadContent(param1:Object) : void
      {
         var child:DisplayObject = null;
         var cls:Class = null;
         var url:String = null;
         var byteArray:ByteArray = null;
         var loader:Loader = null;
         var lc:LoaderContext = null;
         var rootURL:String = null;
         var currentDomain:ApplicationDomain = null;
         var appDomain:ApplicationDomain = null;
         var topmostDomain:ApplicationDomain = null;
         var message:String = null;
         var classOrString:Object = param1;
         if(classOrString is Class)
         {
            cls = Class(classOrString);
         }
         else if(classOrString is String)
         {
            try
            {
               cls = Class(systemManager.getDefinitionByName(String(classOrString)));
            }
            catch(e:Error)
            {
            }
            url = String(classOrString);
         }
         else if(classOrString is ByteArray)
         {
            byteArray = ByteArray(classOrString);
         }
         else
         {
            url = classOrString.toString();
         }
         if(cls)
         {
            this.mx_internal::contentHolder = child = new cls();
            this.mx_internal::contentHolder.addEventListener(Event.ADDED,this.contentHolder_addedHandler,false,0,true);
            addChild(child);
            this.contentLoaded();
         }
         else if(classOrString is DisplayObject)
         {
            this.mx_internal::contentHolder = child = DisplayObject(classOrString);
            addChild(child);
            this.contentLoaded();
            this.mx_internal::contentHolder.addEventListener(Request.GET_PARENT_FLEX_MODULE_FACTORY_REQUEST,this.contentHolder_getFlexModuleFactoryRequestHandler);
         }
         else if(byteArray)
         {
            loader = new FlexLoader();
            this.mx_internal::contentHolder = child = loader;
            addChild(child);
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE,this.mx_internal::contentLoaderInfo_completeEventHandler);
            loader.contentLoaderInfo.addEventListener(Event.INIT,this.contentLoaderInfo_initEventHandler);
            loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR,this.contentLoaderInfo_ioErrorEventHandler);
            loader.contentLoaderInfo.addEventListener(Event.UNLOAD,this.contentLoaderInfo_unloadEventHandler);
            loader.loadBytes(byteArray,this.loaderContext);
         }
         else
         {
            if(!url)
            {
               message = resourceManager.getString("controls","notLoadable",[this.source]);
               throw new Error(message);
            }
            loader = new FlexLoader();
            this.mx_internal::contentHolder = child = loader;
            addChild(loader);
            loader.contentLoaderInfo.addEventListener(Event.COMPLETE,this.mx_internal::contentLoaderInfo_completeEventHandler);
            loader.contentLoaderInfo.addEventListener(HTTPStatusEvent.HTTP_STATUS,this.contentLoaderInfo_httpStatusEventHandler);
            loader.contentLoaderInfo.addEventListener(Event.INIT,this.contentLoaderInfo_initEventHandler);
            loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR,this.contentLoaderInfo_ioErrorEventHandler);
            loader.contentLoaderInfo.addEventListener(Event.OPEN,this.contentLoaderInfo_openEventHandler);
            loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS,this.contentLoaderInfo_progressEventHandler);
            loader.contentLoaderInfo.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.contentLoaderInfo_securityErrorEventHandler);
            loader.contentLoaderInfo.addEventListener(Event.UNLOAD,this.contentLoaderInfo_unloadEventHandler);
            if(Capabilities.isDebugger == true && url.indexOf(".jpg") == -1 && LoaderUtil.normalizeURL(FlexGlobals.topLevelApplication.systemManager.loaderInfo).indexOf("debug=true") > -1)
            {
               url += url.indexOf("?") > -1 ? "&debug=true" : "?debug=true";
            }
            if(!(url.indexOf(":") > -1 || url.indexOf("/") == 0 || url.indexOf("\\") == 0))
            {
               if(SystemManagerGlobals.bootstrapLoaderInfoURL != null && SystemManagerGlobals.bootstrapLoaderInfoURL != "")
               {
                  rootURL = SystemManagerGlobals.bootstrapLoaderInfoURL;
               }
               else if(root)
               {
                  rootURL = LoaderUtil.normalizeURL(root.loaderInfo);
               }
               else if(systemManager)
               {
                  rootURL = LoaderUtil.normalizeURL(DisplayObject(systemManager).loaderInfo);
               }
               url = this.OSToPlayerURI(url,this.isLocal(rootURL ? rootURL : url));
               if(rootURL)
               {
                  url = LoaderUtil.createAbsoluteURL(rootURL,url);
               }
            }
            else
            {
               url = this.OSToPlayerURI(url,this.isLocal(url));
            }
            this.requestedURL = new URLRequest(url);
            lc = this.loaderContext;
            if(!lc)
            {
               lc = new LoaderContext();
               this._loaderContext = lc;
               if(Boolean(moduleFactory) && FlexVersion.compatibilityVersion >= FlexVersion.VERSION_4_0)
               {
                  currentDomain = moduleFactory.info()["currentDomain"];
               }
               else
               {
                  currentDomain = ApplicationDomain.currentDomain;
               }
               if(this.loadForCompatibility)
               {
                  appDomain = currentDomain.parentDomain;
                  topmostDomain = null;
                  while(appDomain)
                  {
                     topmostDomain = appDomain;
                     appDomain = appDomain.parentDomain;
                  }
                  lc.applicationDomain = new ApplicationDomain(topmostDomain);
               }
               if(this.trustContent)
               {
                  lc.securityDomain = SecurityDomain.currentDomain;
               }
               else if(!this.loadForCompatibility)
               {
                  this.attemptingChildAppDomain = true;
                  lc.applicationDomain = new ApplicationDomain(currentDomain);
               }
            }
            loader.load(this.requestedURL,lc);
         }
         invalidateDisplayList();
      }
      
      private function isLocal(param1:String) : Boolean
      {
         return param1.indexOf("file:") == 0 || param1.indexOf(":") == 1;
      }
      
      private function OSToPlayerURI(param1:String, param2:Boolean) : String
      {
         param1 = decodeURI(param1);
         if(param2 && Capabilities.playerType == "ActiveX")
         {
            return param1;
         }
         return encodeURI(param1);
      }
      
      private function contentLoaded() : void
      {
         var loaderInfo:LoaderInfo = null;
         this.isContentLoaded = true;
         if(this.mx_internal::contentHolder is Loader)
         {
            loaderInfo = Loader(this.mx_internal::contentHolder).contentLoaderInfo;
         }
         this.resizableContent = false;
         if(loaderInfo)
         {
            if(loaderInfo.contentType == "application/x-shockwave-flash")
            {
               this.resizableContent = true;
            }
            if(this.resizableContent)
            {
               try
               {
                  if(Loader(this.mx_internal::contentHolder).content is IFlexDisplayObject)
                  {
                     this.flexContent = true;
                  }
                  else
                  {
                     this.flexContent = this.swfBridge != null;
                  }
               }
               catch(e:Error)
               {
                  flexContent = swfBridge != null;
               }
            }
         }
         try
         {
            if(tabChildren && this.mx_internal::contentHolder is Loader && (loaderInfo.contentType == "application/x-shockwave-flash" || Loader(this.mx_internal::contentHolder).content is DisplayObjectContainer))
            {
               Loader(this.mx_internal::contentHolder).tabChildren = true;
               DisplayObjectContainer(Loader(this.mx_internal::contentHolder).content).tabChildren = true;
            }
         }
         catch(e:Error)
         {
         }
         invalidateSize();
         invalidateDisplayList();
      }
      
      private function doScaleContent() : void
      {
         var interiorWidth:Number = NaN;
         var interiorHeight:Number = NaN;
         var contentWidth:Number = NaN;
         var contentHeight:Number = NaN;
         var x:Number = NaN;
         var y:Number = NaN;
         var newXScale:Number = NaN;
         var newYScale:Number = NaN;
         var scale:Number = NaN;
         var w:Number = NaN;
         var h:Number = NaN;
         var holder:Loader = null;
         var sizeSet:Boolean = false;
         var lInfo:LoaderInfo = null;
         if(!this.isContentLoaded)
         {
            return;
         }
         if(!this.resizableContent || this.maintainAspectRatio && !this.flexContent)
         {
            this.unScaleContent();
            interiorWidth = unscaledWidth;
            interiorHeight = unscaledHeight;
            contentWidth = this.contentHolderWidth;
            contentHeight = this.contentHolderHeight;
            x = 0;
            y = 0;
            newXScale = contentWidth == 0 ? 1 : interiorWidth / contentWidth;
            newYScale = contentHeight == 0 ? 1 : interiorHeight / contentHeight;
            if(this._maintainAspectRatio)
            {
               if(newXScale > newYScale)
               {
                  x = Math.floor((interiorWidth - contentWidth * newYScale) * this.getHorizontalAlignValue());
                  scale = newYScale;
               }
               else
               {
                  y = Math.floor((interiorHeight - contentHeight * newXScale) * this.getVerticalAlignValue());
                  scale = newXScale;
               }
               this.mx_internal::contentHolder.scaleX = scale;
               this.mx_internal::contentHolder.scaleY = scale;
            }
            else
            {
               this.mx_internal::contentHolder.scaleX = newXScale;
               this.mx_internal::contentHolder.scaleY = newYScale;
            }
            this.mx_internal::contentHolder.x = x;
            this.mx_internal::contentHolder.y = y;
         }
         else
         {
            this.mx_internal::contentHolder.x = 0;
            this.mx_internal::contentHolder.y = 0;
            w = unscaledWidth;
            h = unscaledHeight;
            if(this.mx_internal::contentHolder is Loader)
            {
               holder = Loader(this.mx_internal::contentHolder);
               try
               {
                  if(this.getContentSize().x > 0)
                  {
                     sizeSet = false;
                     if(holder.contentLoaderInfo.contentType == "application/x-shockwave-flash")
                     {
                        if(this.childAllowsParent)
                        {
                           if(holder.content is IFlexDisplayObject)
                           {
                              IFlexDisplayObject(holder.content).setActualSize(w,h);
                              sizeSet = true;
                           }
                        }
                        if(!sizeSet && Boolean(this.swfBridge))
                        {
                           this.swfBridge.dispatchEvent(new SWFBridgeRequest(SWFBridgeRequest.SET_ACTUAL_SIZE_REQUEST,false,false,null,{
                              "width":w,
                              "height":h
                           }));
                           sizeSet = true;
                        }
                     }
                     if(!sizeSet)
                     {
                        lInfo = holder.contentLoaderInfo;
                        if(lInfo)
                        {
                           this.mx_internal::contentHolder.scaleX = w / lInfo.width;
                           this.mx_internal::contentHolder.scaleY = h / lInfo.height;
                        }
                        else
                        {
                           this.mx_internal::contentHolder.width = w;
                           this.mx_internal::contentHolder.height = h;
                        }
                     }
                  }
                  else if(this.childAllowsParent && !(holder.content is IFlexDisplayObject))
                  {
                     this.mx_internal::contentHolder.width = w;
                     this.mx_internal::contentHolder.height = h;
                  }
               }
               catch(error:Error)
               {
                  mx_internal::contentHolder.width = w;
                  mx_internal::contentHolder.height = h;
               }
               if(!this.parentAllowsChild)
               {
                  this.mx_internal::contentHolder.scrollRect = new Rectangle(0,0,w / this.mx_internal::contentHolder.scaleX,h / this.mx_internal::contentHolder.scaleY);
               }
            }
            else
            {
               this.mx_internal::contentHolder.width = w;
               this.mx_internal::contentHolder.height = h;
            }
         }
      }
      
      private function doScaleLoader() : void
      {
         if(!this.isContentLoaded)
         {
            return;
         }
         this.unScaleContent();
         var _loc1_:Number = unscaledWidth;
         var _loc2_:Number = unscaledHeight;
         if(this.contentHolderWidth > _loc1_ || this.contentHolderHeight > _loc2_ || !this.parentAllowsChild)
         {
            this.mx_internal::contentHolder.scrollRect = new Rectangle(0,0,_loc1_,_loc2_);
         }
         else
         {
            this.mx_internal::contentHolder.scrollRect = null;
         }
         this.mx_internal::contentHolder.x = (_loc1_ - this.contentHolderWidth) * this.getHorizontalAlignValue();
         this.mx_internal::contentHolder.y = (_loc2_ - this.contentHolderHeight) * this.getVerticalAlignValue();
      }
      
      private function doSmoothBitmapContent() : void
      {
         if(this.content is Bitmap)
         {
            (this.content as Bitmap).smoothing = this._smoothBitmapContent;
         }
      }
      
      private function unScaleContent() : void
      {
         this.mx_internal::contentHolder.scaleX = 1;
         this.mx_internal::contentHolder.scaleY = 1;
         this.mx_internal::contentHolder.x = 0;
         this.mx_internal::contentHolder.y = 0;
      }
      
      private function getHorizontalAlignValue() : Number
      {
         var _loc1_:String = getStyle("horizontalAlign");
         if(_loc1_ == "left")
         {
            return 0;
         }
         if(_loc1_ == "right")
         {
            return 1;
         }
         return 0.5;
      }
      
      private function getVerticalAlignValue() : Number
      {
         var _loc1_:String = getStyle("verticalAlign");
         if(_loc1_ == "top")
         {
            return 0;
         }
         if(_loc1_ == "bottom")
         {
            return 1;
         }
         return 0.5;
      }
      
      private function dispatchInvalidateRequest(param1:Boolean, param2:Boolean, param3:Boolean) : void
      {
         var _loc4_:ISystemManager = systemManager;
         var _loc5_:IMarshalSystemManager = IMarshalSystemManager(systemManager.getImplementation("mx.managers::IMarshalSystemManager"));
         if(!_loc5_ || !_loc5_.useSWFBridge())
         {
            return;
         }
         var _loc6_:IEventDispatcher = _loc5_.swfBridgeGroup.parentBridge;
         var _loc7_:uint = 0;
         if(param1)
         {
            _loc7_ |= InvalidateRequestData.PROPERTIES;
         }
         if(param2)
         {
            _loc7_ |= InvalidateRequestData.SIZE;
         }
         if(param3)
         {
            _loc7_ |= InvalidateRequestData.DISPLAY_LIST;
         }
         var _loc8_:SWFBridgeRequest = new SWFBridgeRequest(SWFBridgeRequest.INVALIDATE_REQUEST,false,false,_loc6_,_loc7_);
         _loc6_.dispatchEvent(_loc8_);
      }
      
      private function initializeHandler(param1:FlexEvent) : void
      {
         if(this.contentChanged)
         {
            this.contentChanged = false;
            if(this._autoLoad)
            {
               this.load(this._source);
            }
         }
      }
      
      private function addedToStageHandler(param1:Event) : void
      {
         systemManager.getSandboxRoot().addEventListener(InterManagerRequest.DRAG_MANAGER_REQUEST,this.mouseShieldHandler,false,0,true);
      }
      
      mx_internal function contentLoaderInfo_completeEventHandler(param1:Event) : void
      {
         if(LoaderInfo(param1.target).loader != this.mx_internal::contentHolder)
         {
            return;
         }
         dispatchEvent(param1);
         this.contentLoaded();
      }
      
      private function contentLoaderInfo_httpStatusEventHandler(param1:HTTPStatusEvent) : void
      {
         dispatchEvent(param1);
      }
      
      private function contentLoaderInfo_initEventHandler(param1:Event) : void
      {
         dispatchEvent(param1);
         var _loc2_:LoaderInfo = LoaderInfo(param1.target);
         this.addInitSystemManagerCompleteListener(_loc2_.loader.contentLoaderInfo);
         if(_loc2_.contentType == "application/x-shockwave-flash" && _loc2_.parentAllowsChild && _loc2_.childAllowsParent && Boolean(_loc2_.content))
         {
            _loc2_.content.addEventListener(Request.GET_PARENT_FLEX_MODULE_FACTORY_REQUEST,this.contentHolder_getFlexModuleFactoryRequestHandler);
         }
      }
      
      private function addInitSystemManagerCompleteListener(param1:LoaderInfo) : void
      {
         var _loc2_:EventDispatcher = null;
         if(param1.contentType == "application/x-shockwave-flash")
         {
            _loc2_ = param1.sharedEvents;
            _loc2_.addEventListener(SWFBridgeEvent.BRIDGE_NEW_APPLICATION,this.initSystemManagerCompleteEventHandler);
         }
      }
      
      private function removeInitSystemManagerCompleteListener(param1:LoaderInfo) : void
      {
         var _loc2_:EventDispatcher = null;
         if(param1.contentType == "application/x-shockwave-flash")
         {
            _loc2_ = param1.sharedEvents;
            _loc2_.removeEventListener(SWFBridgeEvent.BRIDGE_NEW_APPLICATION,this.initSystemManagerCompleteEventHandler);
         }
      }
      
      private function contentLoaderInfo_ioErrorEventHandler(param1:IOErrorEvent) : void
      {
         this.source = getStyle("brokenImageSkin");
         this.load();
         this.contentChanged = false;
         this.brokenImage = true;
         if(hasEventListener(param1.type))
         {
            dispatchEvent(param1);
         }
         if(this.mx_internal::contentHolder is Loader)
         {
            this.removeInitSystemManagerCompleteListener(Loader(this.mx_internal::contentHolder).contentLoaderInfo);
         }
      }
      
      private function contentLoaderInfo_openEventHandler(param1:Event) : void
      {
         dispatchEvent(param1);
      }
      
      private function contentLoaderInfo_progressEventHandler(param1:ProgressEvent) : void
      {
         this._bytesTotal = param1.bytesTotal;
         this._bytesLoaded = param1.bytesLoaded;
         dispatchEvent(param1);
      }
      
      private function contentLoaderInfo_securityErrorEventHandler(param1:SecurityErrorEvent) : void
      {
         var _loc2_:LoaderContext = null;
         if(this.attemptingChildAppDomain)
         {
            this.attemptingChildAppDomain = false;
            _loc2_ = new LoaderContext();
            this._loaderContext = _loc2_;
            callLater(this.load);
            return;
         }
         dispatchEvent(param1);
         if(this.mx_internal::contentHolder is Loader)
         {
            this.removeInitSystemManagerCompleteListener(Loader(this.mx_internal::contentHolder).contentLoaderInfo);
         }
      }
      
      private function contentLoaderInfo_unloadEventHandler(param1:Event) : void
      {
         var _loc2_:ISystemManager = null;
         var _loc3_:IMarshalSystemManager = null;
         this.isContentLoaded = false;
         dispatchEvent(param1);
         if(this._swfBridge)
         {
            this._swfBridge.removeEventListener(SWFBridgeRequest.INVALIDATE_REQUEST,this.invalidateRequestHandler);
            _loc2_ = systemManager;
            _loc3_ = IMarshalSystemManager(systemManager.getImplementation("mx.managers::IMarshalSystemManager"));
            _loc3_.removeChildBridge(this._swfBridge);
            this._swfBridge = null;
         }
      }
      
      private function contentHolder_getFlexModuleFactoryRequestHandler(param1:Event) : void
      {
         if("value" in param1)
         {
            param1["value"] = moduleFactory;
         }
      }
      
      private function contentHolder_addedHandler(param1:Event) : void
      {
         if(param1.target == this.mx_internal::contentHolder)
         {
            return;
         }
         if(param1.target is IFlexModuleFactory)
         {
            param1.target.addEventListener(Request.GET_PARENT_FLEX_MODULE_FACTORY_REQUEST,this.contentHolder_getFlexModuleFactoryRequestHandler);
         }
         this.mx_internal::contentHolder.removeEventListener(Event.ADDED,this.contentHolder_addedHandler);
      }
      
      private function initSystemManagerCompleteEventHandler(param1:Event) : void
      {
         var _loc3_:ISystemManager = null;
         var _loc2_:Object = Object(param1);
         if(this.mx_internal::contentHolder is Loader && _loc2_.data == Loader(this.mx_internal::contentHolder).contentLoaderInfo.sharedEvents)
         {
            this._swfBridge = Loader(this.mx_internal::contentHolder).contentLoaderInfo.sharedEvents;
            this.flexContent = true;
            this.unScaleContent();
            _loc3_ = systemManager;
            IMarshalSystemManager(_loc3_.getImplementation("mx.managers::IMarshalSystemManager")).addChildBridge(this._swfBridge,this);
            this.removeInitSystemManagerCompleteListener(Loader(this.mx_internal::contentHolder).contentLoaderInfo);
            this._swfBridge.addEventListener(SWFBridgeRequest.INVALIDATE_REQUEST,this.invalidateRequestHandler);
         }
      }
      
      private function invalidateRequestHandler(param1:Event) : void
      {
         if(param1 is SWFBridgeRequest)
         {
            return;
         }
         var _loc2_:SWFBridgeRequest = SWFBridgeRequest.marshal(param1);
         var _loc3_:uint = uint(_loc2_.data);
         if(_loc3_ & InvalidateRequestData.PROPERTIES)
         {
            invalidateProperties();
         }
         if(_loc3_ & InvalidateRequestData.SIZE)
         {
            invalidateSize();
         }
         if(_loc3_ & InvalidateRequestData.DISPLAY_LIST)
         {
            invalidateDisplayList();
         }
         this.dispatchInvalidateRequest((_loc3_ & InvalidateRequestData.PROPERTIES) != 0,(_loc3_ & InvalidateRequestData.SIZE) != 0,(_loc3_ & InvalidateRequestData.DISPLAY_LIST) != 0);
      }
      
      private function mouseShieldHandler(param1:Event) : void
      {
         if(param1["name"] != "mouseShield")
         {
            return;
         }
         if(!this.isContentLoaded || this.parentAllowsChild)
         {
            return;
         }
         if(param1["value"])
         {
            if(!this.mouseShield)
            {
               this.mouseShield = new Sprite();
               this.mouseShield.graphics.beginFill(0,0);
               this.mouseShield.graphics.drawRect(0,0,100,100);
               this.mouseShield.graphics.endFill();
            }
            if(!this.mouseShield.parent)
            {
               addChild(this.mouseShield);
            }
            this.sizeShield();
         }
         else if(Boolean(this.mouseShield) && Boolean(this.mouseShield.parent))
         {
            removeChild(this.mouseShield);
         }
      }
      
      private function sizeShield() : void
      {
         if(Boolean(this.mouseShield) && Boolean(this.mouseShield.parent))
         {
            this.mouseShield.width = unscaledWidth;
            this.mouseShield.height = unscaledHeight;
         }
      }
      
      override public function regenerateStyleCache(param1:Boolean) : void
      {
         var sm:ISystemManager = null;
         var cm:Object = null;
         var recursive:Boolean = param1;
         super.regenerateStyleCache(recursive);
         try
         {
            sm = this.content as ISystemManager;
            if(sm != null)
            {
               cm = sm.getImplementation("mx.managers::ISystemManagerChildManager");
               Object(cm).regenerateStyleCache(recursive);
            }
         }
         catch(error:Error)
         {
         }
      }
      
      override public function notifyStyleChangeInChildren(param1:String, param2:Boolean) : void
      {
         var sm:ISystemManager = null;
         var cm:Object = null;
         var styleProp:String = param1;
         var recursive:Boolean = param2;
         super.notifyStyleChangeInChildren(styleProp,recursive);
         try
         {
            sm = this.content as ISystemManager;
            if(sm != null)
            {
               cm = sm.getImplementation("mx.managers::ISystemManagerChildManager");
               Object(cm).notifyStyleChangeInChildren(styleProp,recursive);
            }
         }
         catch(error:Error)
         {
         }
      }
      
      private function getContentSize() : Point
      {
         var _loc3_:IEventDispatcher = null;
         var _loc4_:SWFBridgeRequest = null;
         var _loc1_:Point = new Point();
         if(!this.mx_internal::contentHolder is Loader)
         {
            return _loc1_;
         }
         var _loc2_:Loader = Loader(this.mx_internal::contentHolder);
         if(_loc2_.contentLoaderInfo.childAllowsParent)
         {
            _loc1_.x = _loc2_.content.width;
            _loc1_.y = _loc2_.content.height;
         }
         else
         {
            _loc3_ = this.swfBridge;
            if(_loc3_)
            {
               _loc4_ = new SWFBridgeRequest(SWFBridgeRequest.GET_SIZE_REQUEST);
               _loc3_.dispatchEvent(_loc4_);
               _loc1_.x = _loc4_.data.width;
               _loc1_.y = _loc4_.data.height;
            }
         }
         if(_loc1_.x == 0)
         {
            _loc1_.x = _loc2_.contentLoaderInfo.width;
         }
         if(_loc1_.y == 0)
         {
            _loc1_.y = _loc2_.contentLoaderInfo.height;
         }
         return _loc1_;
      }
      
      protected function clickHandler(param1:MouseEvent) : void
      {
         if(!enabled)
         {
            param1.stopImmediatePropagation();
            return;
         }
      }
   }
}

package mx.controls
{
   import flash.display.DisplayObject;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import mx.core.EdgeMetrics;
   import mx.core.IFlexDisplayObject;
   import mx.core.IFlexModuleFactory;
   import mx.core.IFontContextComponent;
   import mx.core.IRectangularBorder;
   import mx.core.IToolTip;
   import mx.core.IUITextField;
   import mx.core.UIComponent;
   import mx.core.UITextField;
   import mx.core.mx_internal;
   import mx.styles.ISimpleStyleClient;
   
   use namespace mx_internal;
   
   public class ToolTip extends UIComponent implements IToolTip, IFontContextComponent
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static var maxWidth:Number = 300;
      
      mx_internal var border:IFlexDisplayObject;
      
      private var _text:String;
      
      private var textChanged:Boolean;
      
      protected var textField:IUITextField;
      
      public function ToolTip()
      {
         super();
         mouseEnabled = false;
      }
      
      private function get borderMetrics() : EdgeMetrics
      {
         if(this.mx_internal::border is IRectangularBorder)
         {
            return IRectangularBorder(this.mx_internal::border).borderMetrics;
         }
         return EdgeMetrics.EMPTY;
      }
      
      public function get fontContext() : IFlexModuleFactory
      {
         return moduleFactory;
      }
      
      public function set fontContext(param1:IFlexModuleFactory) : void
      {
         this.moduleFactory = param1;
      }
      
      public function get text() : String
      {
         return this._text;
      }
      
      public function set text(param1:String) : void
      {
         this._text = param1;
         this.textChanged = true;
         invalidateProperties();
         invalidateSize();
         invalidateDisplayList();
      }
      
      override protected function createChildren() : void
      {
         var _loc1_:Class = null;
         super.createChildren();
         if(!this.mx_internal::border)
         {
            _loc1_ = getStyle("borderSkin");
            this.mx_internal::border = new _loc1_();
            if(this.mx_internal::border is ISimpleStyleClient)
            {
               ISimpleStyleClient(this.mx_internal::border).styleName = this;
            }
            addChild(DisplayObject(this.mx_internal::border));
         }
         this.mx_internal::createTextField(-1);
      }
      
      override protected function commitProperties() : void
      {
         var _loc1_:int = 0;
         var _loc2_:TextFormat = null;
         super.commitProperties();
         if(hasFontContextChanged() && this.textField != null)
         {
            _loc1_ = getChildIndex(DisplayObject(this.textField));
            this.mx_internal::removeTextField();
            this.mx_internal::createTextField(_loc1_);
            invalidateSize();
            this.textChanged = true;
         }
         if(this.textChanged)
         {
            _loc2_ = this.textField.getTextFormat();
            _loc2_.leftMargin = 0;
            _loc2_.rightMargin = 0;
            this.textField.defaultTextFormat = _loc2_;
            this.textField.text = this._text;
            this.textChanged = false;
         }
      }
      
      override protected function measure() : void
      {
         var _loc7_:Number = NaN;
         super.measure();
         var _loc1_:EdgeMetrics = this.borderMetrics;
         var _loc2_:Number = _loc1_.left + getStyle("paddingLeft");
         var _loc3_:Number = _loc1_.top + getStyle("paddingTop");
         var _loc4_:Number = _loc1_.right + getStyle("paddingRight");
         var _loc5_:Number = _loc1_.bottom + getStyle("paddingBottom");
         var _loc6_:Number = _loc2_ + _loc4_;
         _loc7_ = _loc3_ + _loc5_;
         this.textField.wordWrap = false;
         if(this.textField.textWidth + _loc6_ > ToolTip.maxWidth)
         {
            this.textField.width = ToolTip.maxWidth - _loc6_;
            this.textField.wordWrap = true;
         }
         measuredWidth = this.textField.width + _loc6_;
         measuredHeight = this.textField.height + _loc7_;
      }
      
      override protected function updateDisplayList(param1:Number, param2:Number) : void
      {
         super.updateDisplayList(param1,param2);
         var _loc3_:EdgeMetrics = this.borderMetrics;
         var _loc4_:Number = _loc3_.left + getStyle("paddingLeft");
         var _loc5_:Number = _loc3_.top + getStyle("paddingTop");
         var _loc6_:Number = _loc3_.right + getStyle("paddingRight");
         var _loc7_:Number = _loc3_.bottom + getStyle("paddingBottom");
         var _loc8_:Number = _loc4_ + _loc6_;
         var _loc9_:Number = _loc5_ + _loc7_;
         this.mx_internal::border.setActualSize(param1,param2);
         this.textField.move(_loc4_,_loc5_);
         this.textField.setActualSize(param1 - _loc8_,param2 - _loc9_);
      }
      
      override public function styleChanged(param1:String) : void
      {
         super.styleChanged(param1);
         if(param1 == "borderStyle" || param1 == "styleName" || param1 == null)
         {
            invalidateDisplayList();
         }
      }
      
      mx_internal function createTextField(param1:int) : void
      {
         if(!this.textField)
         {
            this.textField = IUITextField(createInFontContext(UITextField));
            this.textField.autoSize = TextFieldAutoSize.LEFT;
            this.textField.mouseEnabled = false;
            this.textField.multiline = true;
            this.textField.selectable = false;
            this.textField.wordWrap = false;
            this.textField.styleName = this;
            if(param1 == -1)
            {
               addChild(DisplayObject(this.textField));
            }
            else
            {
               addChildAt(DisplayObject(this.textField),param1);
            }
         }
      }
      
      mx_internal function removeTextField() : void
      {
         if(this.textField)
         {
            removeChild(DisplayObject(this.textField));
            this.textField = null;
         }
      }
      
      mx_internal function getTextField() : IUITextField
      {
         return this.textField;
      }
   }
}

package mx.controls.listClasses
{
   import flash.events.EventDispatcher;
   import mx.core.IUIComponent;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class BaseListData extends EventDispatcher
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      [Bindable("__NoChangeEvent__")]
      public var columnIndex:int;
      
      [Bindable("__NoChangeEvent__")]
      public var label:String;
      
      [Bindable("__NoChangeEvent__")]
      public var owner:IUIComponent;
      
      [Bindable("__NoChangeEvent__")]
      public var rowIndex:int;
      
      private var _uid:String;
      
      public function BaseListData(param1:String, param2:String, param3:IUIComponent, param4:int = 0, param5:int = 0)
      {
         super();
         this.label = param1;
         this.uid = param2;
         this.owner = param3;
         this.rowIndex = param4;
         this.columnIndex = param5;
      }
      
      [Bindable("__NoChangeEvent__")]
      public function get uid() : String
      {
         return this._uid;
      }
      
      public function set uid(param1:String) : void
      {
         this._uid = param1;
      }
   }
}

package mx.controls.listClasses
{
   public interface IDropInListItemRenderer
   {
      
      function get listData() : BaseListData;
      
      function set listData(param1:BaseListData) : void;
   }
}

package mx.controls.listClasses
{
   import flash.events.IEventDispatcher;
   import mx.core.IDataRenderer;
   import mx.core.IFlexDisplayObject;
   import mx.core.IUIComponent;
   import mx.managers.ILayoutManagerClient;
   import mx.styles.ISimpleStyleClient;
   
   public interface IListItemRenderer extends IDataRenderer, IEventDispatcher, IFlexDisplayObject, ILayoutManagerClient, ISimpleStyleClient, IUIComponent
   {
      
      
   }
}

package mx.core
{
   import flash.events.Event;
   import flash.geom.Matrix;
   import flash.geom.Matrix3D;
   import flash.geom.Point;
   import flash.geom.Vector3D;
   import flash.system.Capabilities;
   import mx.geom.CompoundTransform;
   import mx.geom.TransformOffsets;
   
   use namespace mx_internal;
   
   public class AdvancedLayoutFeatures
   {
      
      private static var tempLocalPosition:Vector3D;
      
      private static const COMPUTED_MATRIX_VALID:uint = 1;
      
      private static const COMPUTED_MATRIX3D_VALID:uint = 2;
      
      private static var reVT:Vector3D = new Vector3D(0,0,0);
      
      private static var reVR:Vector3D = new Vector3D(0,0,0);
      
      private static var reVS:Vector3D = new Vector3D(1,1,1);
      
      private static var reV:Vector.<Vector3D> = new Vector.<Vector3D>();
      
      private static const RADIANS_PER_DEGREES:Number = Math.PI / 180;
      
      private static const ZERO_REPLACEMENT_IN_3D:Number = 1e-14;
      
      private static var transformVector:Function = initTransformVectorFunction;
      
      private static var staticTranslation:Vector3D = new Vector3D();
      
      private static var staticOffsetTranslation:Vector3D = new Vector3D();
      
      reV.push(reVT);
      reV.push(reVR);
      reV.push(reVS);
      
      public var updatePending:Boolean = false;
      
      public var depth:Number = 0;
      
      protected var _computedMatrix:Matrix;
      
      protected var _computedMatrix3D:Matrix3D;
      
      protected var layout:CompoundTransform;
      
      private var _postLayoutTransformOffsets:TransformOffsets;
      
      private var _flags:uint = 0;
      
      private var _stretchX:Number = 1;
      
      private var _stretchY:Number = 1;
      
      public function AdvancedLayoutFeatures()
      {
         super();
         this.layout = new CompoundTransform();
      }
      
      private static function pre10_0_22_87_transformVector(param1:Matrix3D, param2:Vector3D) : Vector3D
      {
         var _loc3_:Vector.<Number> = param1.rawData;
         return new Vector3D(_loc3_[0] * param2.x + _loc3_[4] * param2.y + _loc3_[8] * param2.z + _loc3_[12],_loc3_[1] * param2.x + _loc3_[5] * param2.y + _loc3_[9] * param2.z + _loc3_[13],_loc3_[2] * param2.x + _loc3_[6] * param2.y + _loc3_[10] * param2.z + _loc3_[14],1);
      }
      
      private static function nativeTransformVector(param1:Matrix3D, param2:Vector3D) : Vector3D
      {
         return param1.transformVector(param2);
      }
      
      private static function initTransformVectorFunction(param1:Matrix3D, param2:Vector3D) : Vector3D
      {
         var _loc3_:Boolean = false;
         var _loc4_:Array = Capabilities.version.split(" ")[1].split(",");
         if(parseFloat(_loc4_[0]) > 10)
         {
            _loc3_ = true;
         }
         else if(parseFloat(_loc4_[1]) > 0)
         {
            _loc3_ = true;
         }
         else if(parseFloat(_loc4_[2]) > 22)
         {
            _loc3_ = true;
         }
         else if(parseFloat(_loc4_[3]) >= 87)
         {
            _loc3_ = true;
         }
         if(_loc3_)
         {
            transformVector = nativeTransformVector;
         }
         else
         {
            transformVector = pre10_0_22_87_transformVector;
         }
         return transformVector(param1,param2);
      }
      
      public static function build2DMatrix(param1:Matrix, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number, param8:Number) : void
      {
         param1.translate(-param2,-param3);
         param1.scale(param4,param5);
         param1.rotate(param6 * RADIANS_PER_DEGREES);
         param1.translate(param7 + param2,param8 + param3);
      }
      
      public static function build3DMatrix(param1:Matrix3D, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number, param8:Number, param9:Number, param10:Number, param11:Number, param12:Number, param13:Number) : void
      {
         reVR.x = param8 * RADIANS_PER_DEGREES;
         reVR.y = param9 * RADIANS_PER_DEGREES;
         reVR.z = param10 * RADIANS_PER_DEGREES;
         param1.recompose(reV);
         if(param5 == 0)
         {
            param5 = ZERO_REPLACEMENT_IN_3D;
         }
         if(param6 == 0)
         {
            param6 = ZERO_REPLACEMENT_IN_3D;
         }
         if(param7 == 0)
         {
            param7 = ZERO_REPLACEMENT_IN_3D;
         }
         param1.prependScale(param5,param6,param7);
         param1.prependTranslation(-param2,-param3,-param4);
         param1.appendTranslation(param2 + param11,param3 + param12,param4 + param13);
      }
      
      public function set layoutX(param1:Number) : void
      {
         this.layout.x = param1;
         this.invalidate();
      }
      
      public function get layoutX() : Number
      {
         return this.layout.x;
      }
      
      public function set layoutY(param1:Number) : void
      {
         this.layout.y = param1;
         this.invalidate();
      }
      
      public function get layoutY() : Number
      {
         return this.layout.y;
      }
      
      public function set layoutZ(param1:Number) : void
      {
         this.layout.z = param1;
         this.invalidate();
      }
      
      public function get layoutZ() : Number
      {
         return this.layout.z;
      }
      
      public function set transformX(param1:Number) : void
      {
         this.layout.transformX = param1;
         this.invalidate();
      }
      
      public function get transformX() : Number
      {
         return this.layout.transformX;
      }
      
      public function set transformY(param1:Number) : void
      {
         this.layout.transformY = param1;
         this.invalidate();
      }
      
      public function get transformY() : Number
      {
         return this.layout.transformY;
      }
      
      public function set transformZ(param1:Number) : void
      {
         this.layout.transformZ = param1;
         this.invalidate();
      }
      
      public function get transformZ() : Number
      {
         return this.layout.transformZ;
      }
      
      public function set layoutRotationX(param1:Number) : void
      {
         this.layout.rotationX = param1;
         this.invalidate();
      }
      
      public function get layoutRotationX() : Number
      {
         return this.layout.rotationX;
      }
      
      public function set layoutRotationY(param1:Number) : void
      {
         this.layout.rotationY = param1;
         this.invalidate();
      }
      
      public function get layoutRotationY() : Number
      {
         return this.layout.rotationY;
      }
      
      public function set layoutRotationZ(param1:Number) : void
      {
         this.layout.rotationZ = param1;
         this.invalidate();
      }
      
      public function get layoutRotationZ() : Number
      {
         return this.layout.rotationZ;
      }
      
      public function set layoutScaleX(param1:Number) : void
      {
         this.layout.scaleX = param1;
         this.invalidate();
      }
      
      public function get layoutScaleX() : Number
      {
         return this.layout.scaleX;
      }
      
      public function set layoutScaleY(param1:Number) : void
      {
         this.layout.scaleY = param1;
         this.invalidate();
      }
      
      public function get layoutScaleY() : Number
      {
         return this.layout.scaleY;
      }
      
      public function set layoutScaleZ(param1:Number) : void
      {
         this.layout.scaleZ = param1;
         this.invalidate();
      }
      
      public function get layoutScaleZ() : Number
      {
         return this.layout.scaleZ;
      }
      
      public function set layoutMatrix(param1:Matrix) : void
      {
         this.layout.matrix = param1;
         this.invalidate();
      }
      
      public function get layoutMatrix() : Matrix
      {
         return this.layout.matrix;
      }
      
      public function set layoutMatrix3D(param1:Matrix3D) : void
      {
         this.layout.matrix3D = param1;
         this.invalidate();
      }
      
      public function get layoutMatrix3D() : Matrix3D
      {
         return this.layout.matrix3D;
      }
      
      public function get is3D() : Boolean
      {
         return this.layout.is3D || this.postLayoutTransformOffsets != null && this.postLayoutTransformOffsets.mx_internal::is3D;
      }
      
      public function get layoutIs3D() : Boolean
      {
         return this.layout.is3D;
      }
      
      public function set postLayoutTransformOffsets(param1:TransformOffsets) : void
      {
         if(this._postLayoutTransformOffsets != null)
         {
            this._postLayoutTransformOffsets.removeEventListener(Event.CHANGE,this.postLayoutTransformOffsetsChangedHandler);
            this._postLayoutTransformOffsets.mx_internal::owner = null;
         }
         this._postLayoutTransformOffsets = param1;
         if(this._postLayoutTransformOffsets != null)
         {
            this._postLayoutTransformOffsets.addEventListener(Event.CHANGE,this.postLayoutTransformOffsetsChangedHandler);
            this._postLayoutTransformOffsets.mx_internal::owner = this;
         }
         this.invalidate();
      }
      
      public function get postLayoutTransformOffsets() : TransformOffsets
      {
         return this._postLayoutTransformOffsets;
      }
      
      private function postLayoutTransformOffsetsChangedHandler(param1:Event) : void
      {
         this.invalidate();
      }
      
      public function get stretchX() : Number
      {
         return this._stretchX;
      }
      
      public function set stretchX(param1:Number) : void
      {
         if(param1 == this._stretchX)
         {
            return;
         }
         this._stretchX = param1;
         this.invalidate();
      }
      
      public function get stretchY() : Number
      {
         return this._stretchY;
      }
      
      public function set stretchY(param1:Number) : void
      {
         if(param1 == this._stretchY)
         {
            return;
         }
         this._stretchY = param1;
         this.invalidate();
      }
      
      private function invalidate() : void
      {
         this._flags &= ~COMPUTED_MATRIX_VALID;
         this._flags &= ~COMPUTED_MATRIX3D_VALID;
      }
      
      public function get computedMatrix() : Matrix
      {
         if(this._flags & COMPUTED_MATRIX_VALID)
         {
            return this._computedMatrix;
         }
         if(!this.postLayoutTransformOffsets && this.stretchX == 1 && this.stretchY == 1)
         {
            return this.layout.matrix;
         }
         var _loc1_:Matrix = this._computedMatrix;
         if(_loc1_ == null)
         {
            _loc1_ = this._computedMatrix = new Matrix();
         }
         else
         {
            _loc1_.identity();
         }
         var _loc2_:Number = this.layout.transformX;
         var _loc3_:Number = this.layout.transformY;
         var _loc4_:Number = this.layout.scaleX;
         var _loc5_:Number = this.layout.scaleY;
         var _loc6_:Number = this.layout.rotationZ;
         var _loc7_:Number = this.layout.x;
         var _loc8_:Number = this.layout.y;
         if(this.postLayoutTransformOffsets)
         {
            _loc4_ *= this.postLayoutTransformOffsets.scaleX;
            _loc5_ *= this.postLayoutTransformOffsets.scaleY;
            _loc6_ += this.postLayoutTransformOffsets.rotationZ;
            _loc7_ += this.postLayoutTransformOffsets.x;
            _loc8_ += this.postLayoutTransformOffsets.y;
         }
         if(this.stretchX != 1 || this.stretchY != 1)
         {
            _loc1_.scale(this.stretchX,this.stretchY);
         }
         build2DMatrix(_loc1_,_loc2_,_loc3_,_loc4_,_loc5_,_loc6_,_loc7_,_loc8_);
         this._flags |= COMPUTED_MATRIX_VALID;
         return _loc1_;
      }
      
      public function get computedMatrix3D() : Matrix3D
      {
         if(this._flags & COMPUTED_MATRIX3D_VALID)
         {
            return this._computedMatrix3D;
         }
         if(!this.postLayoutTransformOffsets && this.stretchX == 1 && this.stretchY == 1)
         {
            return this.layout.matrix3D;
         }
         var _loc1_:Matrix3D = this._computedMatrix3D;
         if(_loc1_ == null)
         {
            _loc1_ = this._computedMatrix3D = new Matrix3D();
         }
         else
         {
            _loc1_.identity();
         }
         var _loc2_:Number = this.layout.transformX;
         var _loc3_:Number = this.layout.transformY;
         var _loc4_:Number = this.layout.transformZ;
         var _loc5_:Number = this.layout.scaleX;
         var _loc6_:Number = this.layout.scaleY;
         var _loc7_:Number = this.layout.scaleZ;
         var _loc8_:Number = this.layout.rotationX;
         var _loc9_:Number = this.layout.rotationY;
         var _loc10_:Number = this.layout.rotationZ;
         var _loc11_:Number = this.layout.x;
         var _loc12_:Number = this.layout.y;
         var _loc13_:Number = this.layout.z;
         if(this.postLayoutTransformOffsets)
         {
            _loc5_ *= this.postLayoutTransformOffsets.scaleX;
            _loc6_ *= this.postLayoutTransformOffsets.scaleY;
            _loc7_ *= this.postLayoutTransformOffsets.scaleZ;
            _loc8_ += this.postLayoutTransformOffsets.rotationX;
            _loc9_ += this.postLayoutTransformOffsets.rotationY;
            _loc10_ += this.postLayoutTransformOffsets.rotationZ;
            _loc11_ += this.postLayoutTransformOffsets.x;
            _loc12_ += this.postLayoutTransformOffsets.y;
            _loc13_ += this.postLayoutTransformOffsets.z;
         }
         build3DMatrix(_loc1_,_loc2_,_loc3_,_loc4_,_loc5_,_loc6_,_loc7_,_loc8_,_loc9_,_loc10_,_loc11_,_loc12_,_loc13_);
         if(this.stretchX != 1 || this.stretchY != 1)
         {
            _loc1_.prependScale(this.stretchX,this.stretchY,1);
         }
         this._flags |= COMPUTED_MATRIX3D_VALID;
         return _loc1_;
      }
      
      public function transformPointToParent(param1:Boolean, param2:Vector3D, param3:Vector3D, param4:Vector3D) : void
      {
         var _loc5_:Vector3D = null;
         var _loc6_:Point = null;
         var _loc7_:Point = null;
         tempLocalPosition = param2 ? param2.clone() : new Vector3D();
         if(this.is3D || param1)
         {
            if(param3 != null)
            {
               _loc5_ = transformVector(this.layoutMatrix3D,tempLocalPosition);
               param3.x = _loc5_.x;
               param3.y = _loc5_.y;
               param3.z = _loc5_.z;
            }
            if(param4 != null)
            {
               tempLocalPosition.x /= this.stretchX;
               tempLocalPosition.y /= this.stretchY;
               _loc5_ = transformVector(this.computedMatrix3D,tempLocalPosition);
               param4.x = _loc5_.x;
               param4.y = _loc5_.y;
               param4.z = _loc5_.z;
            }
         }
         else
         {
            _loc7_ = new Point(tempLocalPosition.x,tempLocalPosition.y);
            if(param3 != null)
            {
               _loc6_ = this.layoutMatrix.transformPoint(_loc7_);
               param3.x = _loc6_.x;
               param3.y = _loc6_.y;
               param3.z = 0;
            }
            if(param4 != null)
            {
               _loc7_.x /= this.stretchX;
               _loc7_.y /= this.stretchY;
               _loc6_ = this.computedMatrix.transformPoint(_loc7_);
               param4.x = _loc6_.x;
               param4.y = _loc6_.y;
               param4.z = 0;
            }
         }
      }
      
      private function completeTransformCenterAdjustment(param1:Boolean, param2:Vector3D, param3:Vector3D, param4:Vector3D) : void
      {
         var _loc5_:Vector3D = null;
         var _loc6_:Vector3D = null;
         var _loc7_:Vector3D = null;
         var _loc8_:Point = null;
         var _loc9_:Point = null;
         var _loc10_:Point = null;
         if(this.is3D || param1)
         {
            if(param3 != null)
            {
               _loc5_ = transformVector(this.layoutMatrix3D,param2);
               if(_loc5_.equals(param3) == false)
               {
                  this.layout.translateBy(param3.x - _loc5_.x,param3.y - _loc5_.y,param3.z - _loc5_.z);
                  this.invalidate();
               }
            }
            if(param4 != null && this._postLayoutTransformOffsets != null)
            {
               _loc6_ = new Vector3D(param2.x,param2.y,param2.z);
               _loc6_.x /= this.stretchX;
               _loc6_.y /= this.stretchY;
               _loc7_ = transformVector(this.computedMatrix3D,_loc6_);
               if(_loc7_.equals(param4) == false)
               {
                  this.postLayoutTransformOffsets.x += param4.x - _loc7_.x;
                  this.postLayoutTransformOffsets.y += param4.y - _loc7_.y;
                  this.postLayoutTransformOffsets.z += param4.z - _loc7_.z;
                  this.invalidate();
               }
            }
         }
         else
         {
            _loc8_ = new Point(param2.x,param2.y);
            if(param3 != null)
            {
               _loc9_ = this.layoutMatrix.transformPoint(_loc8_);
               if(_loc9_.x != param3.x || _loc9_.y != param3.y)
               {
                  this.layout.translateBy(param3.x - _loc9_.x,param3.y - _loc9_.y,0);
                  this.invalidate();
               }
            }
            if(param4 != null && this._postLayoutTransformOffsets != null)
            {
               _loc8_.x /= this.stretchX;
               _loc8_.y /= this.stretchY;
               _loc10_ = this.computedMatrix.transformPoint(_loc8_);
               if(_loc10_.x != param4.x || _loc10_.y != param4.y)
               {
                  this._postLayoutTransformOffsets.x += param4.x - _loc10_.x;
                  this._postLayoutTransformOffsets.y += param4.y - _loc10_.y;
                  this.invalidate();
               }
            }
         }
      }
      
      public function transformAround(param1:Vector3D, param2:Vector3D, param3:Vector3D, param4:Vector3D, param5:Vector3D = null, param6:Vector3D = null, param7:Vector3D = null) : void
      {
         var _loc8_:Boolean = param2 != null && param2.z != 1 || param3 != null && (param3.x != 0 || param3.y != 0) || param4 != null && param4.z != 0 || param5 != null && param5.z != 1 || param6 != null && (param6.x != 0 || param6.y != 0) || param7 != null && param7.z != 0;
         var _loc9_:Boolean = this._postLayoutTransformOffsets == null && (param5 != null || param6 != null || param7 != null);
         if(_loc9_)
         {
            this._postLayoutTransformOffsets = new TransformOffsets();
         }
         if(param1 != null && (param4 == null || param7 == null))
         {
            this.transformPointToParent(_loc8_,param1,staticTranslation,staticOffsetTranslation);
            if(param7 == null && param4 != null)
            {
               staticOffsetTranslation.x = param4.x + staticOffsetTranslation.x - staticTranslation.x;
               staticOffsetTranslation.y = param4.y + staticOffsetTranslation.y - staticTranslation.y;
               staticOffsetTranslation.z = param4.z + staticOffsetTranslation.z - staticTranslation.z;
            }
         }
         var _loc10_:Vector3D = param4 == null ? staticTranslation : param4;
         var _loc11_:Vector3D = param7 == null ? staticOffsetTranslation : param7;
         if(param3 != null)
         {
            if(!isNaN(param3.x))
            {
               this.layout.rotationX = param3.x;
            }
            if(!isNaN(param3.y))
            {
               this.layout.rotationY = param3.y;
            }
            if(!isNaN(param3.z))
            {
               this.layout.rotationZ = param3.z;
            }
         }
         if(param2 != null)
         {
            if(!isNaN(param2.x))
            {
               this.layout.scaleX = param2.x;
            }
            if(!isNaN(param2.y))
            {
               this.layout.scaleY = param2.y;
            }
            if(!isNaN(param2.z))
            {
               this.layout.scaleZ = param2.z;
            }
         }
         if(param6 != null)
         {
            this._postLayoutTransformOffsets.rotationX = param6.x;
            this._postLayoutTransformOffsets.rotationY = param6.y;
            this._postLayoutTransformOffsets.rotationZ = param6.z;
         }
         if(param5 != null)
         {
            this._postLayoutTransformOffsets.scaleX = param5.x;
            this._postLayoutTransformOffsets.scaleY = param5.y;
            this._postLayoutTransformOffsets.scaleZ = param5.z;
         }
         if(param1 == null)
         {
            if(param4 != null)
            {
               this.layout.x = param4.x;
               this.layout.y = param4.y;
               this.layout.z = param4.z;
            }
            if(param7 != null)
            {
               this._postLayoutTransformOffsets.x = param7.x - this.layout.x;
               this._postLayoutTransformOffsets.y = param7.y - this.layout.y;
               this._postLayoutTransformOffsets.z = param7.z - this.layout.z;
            }
         }
         this.invalidate();
         if(param1 != null)
         {
            this.completeTransformCenterAdjustment(_loc8_,param1,_loc10_,_loc11_);
         }
      }
   }
}

package mx.core
{
   import flash.utils.ByteArray;
   
   use namespace mx_internal;
   
   public class ByteArrayAsset extends ByteArray implements IFlexAsset
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function ByteArrayAsset()
      {
         super();
      }
   }
}

package mx.core
{
   use namespace mx_internal;
   
   public class ComponentDescriptor
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var document:Object;
      
      public var events:Object;
      
      public var id:String;
      
      private var _properties:Object;
      
      public var propertiesFactory:Function;
      
      public var type:Class;
      
      public function ComponentDescriptor(param1:Object)
      {
         var _loc2_:String = null;
         super();
         for(_loc2_ in param1)
         {
            this[_loc2_] = param1[_loc2_];
         }
      }
      
      public function get properties() : Object
      {
         var _loc1_:Array = null;
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         if(this._properties)
         {
            return this._properties;
         }
         if(this.propertiesFactory != null)
         {
            this._properties = this.propertiesFactory.call(this.document);
         }
         if(this._properties)
         {
            _loc1_ = this._properties.childDescriptors;
            if(_loc1_)
            {
               _loc2_ = int(_loc1_.length);
               _loc3_ = 0;
               while(_loc3_ < _loc2_)
               {
                  _loc1_[_loc3_].document = this.document;
                  _loc3_++;
               }
            }
         }
         else
         {
            this._properties = {};
         }
         return this._properties;
      }
      
      public function invalidateProperties() : void
      {
         this._properties = null;
      }
      
      public function toString() : String
      {
         return "ComponentDescriptor_" + this.id;
      }
   }
}

package mx.core
{
   import flash.display.InteractiveObject;
   import mx.managers.IFocusManager;
   import mx.managers.IFocusManagerContainer;
   
   public class ContainerGlobals
   {
      
      public static var focusedContainer:InteractiveObject;
      
      public function ContainerGlobals()
      {
         super();
      }
      
      public static function checkFocus(param1:InteractiveObject, param2:InteractiveObject) : void
      {
         var _loc6_:IFocusManager = null;
         var _loc7_:IButton = null;
         var _loc3_:InteractiveObject = param2;
         var _loc4_:InteractiveObject = param2;
         var _loc5_:IUIComponent = null;
         if(param2 != null && param1 == param2)
         {
            return;
         }
         while(_loc4_)
         {
            if(_loc4_.parent)
            {
               _loc3_ = _loc4_.parent;
            }
            else
            {
               _loc3_ = null;
            }
            if(_loc4_ is IUIComponent)
            {
               _loc5_ = IUIComponent(_loc4_);
            }
            _loc4_ = _loc3_;
            if((_loc4_) && _loc4_ is IFocusManagerContainer && Boolean(IFocusManagerContainer(_loc4_).defaultButton))
            {
               break;
            }
         }
         if(ContainerGlobals.focusedContainer != _loc4_ || ContainerGlobals.focusedContainer == null && _loc4_ == null)
         {
            if(!_loc4_)
            {
               _loc4_ = InteractiveObject(_loc5_);
            }
            if(Boolean(_loc4_) && _loc4_ is IFocusManagerContainer)
            {
               _loc6_ = IFocusManagerContainer(_loc4_).focusManager;
               if(!_loc6_)
               {
                  return;
               }
               _loc7_ = IFocusManagerContainer(_loc4_).defaultButton as IButton;
               if(_loc7_)
               {
                  ContainerGlobals.focusedContainer = InteractiveObject(_loc4_);
                  _loc6_.defaultButton = _loc7_ as IButton;
               }
               else
               {
                  ContainerGlobals.focusedContainer = InteractiveObject(_loc4_);
                  _loc6_.defaultButton = null;
               }
            }
         }
      }
   }
}

package mx.core
{
   import flash.events.EventDispatcher;
   import mx.events.PropertyChangeEvent;
   import mx.events.PropertyChangeEventKind;
   
   public class DesignLayer extends EventDispatcher implements IMXMLObject
   {
      
      private var _id:String;
      
      private var _parent:DesignLayer;
      
      private var layerChildren:Array = new Array();
      
      private var _visible:Boolean = true;
      
      private var _alpha:Number = 1;
      
      public function DesignLayer()
      {
         super();
      }
      
      public function get id() : String
      {
         return this._id;
      }
      
      public function set id(param1:String) : void
      {
         this._id = param1;
      }
      
      public function get parent() : DesignLayer
      {
         return this._parent;
      }
      
      protected function parentChanged(param1:DesignLayer) : void
      {
         if(Boolean(this._parent) && Boolean(param1))
         {
            this._parent.removeLayer(this);
         }
         this._parent = param1;
         this.effectiveVisibilityChanged(this._visible);
         this.effectiveAlphaChanged(this._alpha);
      }
      
      public function get visible() : Boolean
      {
         return this._visible;
      }
      
      public function set visible(param1:Boolean) : void
      {
         if(this._visible != param1)
         {
            this._visible = param1;
            this.effectiveVisibilityChanged(this.effectiveVisibility);
         }
      }
      
      public function get effectiveVisibility() : Boolean
      {
         var _loc1_:Boolean = this._visible;
         var _loc2_:DesignLayer = this;
         while(_loc1_ && Boolean(_loc2_.parent))
         {
            _loc2_ = _loc2_.parent;
            _loc1_ = _loc2_.visible;
         }
         return _loc1_;
      }
      
      protected function effectiveVisibilityChanged(param1:Boolean) : void
      {
         var _loc3_:DesignLayer = null;
         dispatchEvent(new PropertyChangeEvent("layerPropertyChange",false,false,PropertyChangeEventKind.UPDATE,"effectiveVisibility",!this.effectiveVisibility,this.effectiveVisibility));
         var _loc2_:int = 0;
         while(_loc2_ < this.layerChildren.length)
         {
            _loc3_ = this.layerChildren[_loc2_];
            if(_loc3_.visible)
            {
               _loc3_.effectiveVisibilityChanged(param1);
            }
            _loc2_++;
         }
      }
      
      public function get alpha() : Number
      {
         return this._alpha;
      }
      
      public function set alpha(param1:Number) : void
      {
         var _loc2_:Number = NaN;
         if(this._alpha != param1)
         {
            _loc2_ = this._alpha;
            this._alpha = param1;
            this.effectiveAlphaChanged(_loc2_);
         }
      }
      
      public function get effectiveAlpha() : Number
      {
         var _loc1_:Number = this._alpha;
         var _loc2_:DesignLayer = this;
         while(_loc2_.parent)
         {
            _loc2_ = _loc2_.parent;
            _loc1_ *= _loc2_.alpha;
         }
         return _loc1_;
      }
      
      protected function effectiveAlphaChanged(param1:Number) : void
      {
         var _loc3_:DesignLayer = null;
         dispatchEvent(new PropertyChangeEvent("layerPropertyChange",false,false,PropertyChangeEventKind.UPDATE,"effectiveAlpha",param1,this.effectiveAlpha));
         var _loc2_:int = 0;
         while(_loc2_ < this.layerChildren.length)
         {
            _loc3_ = this.layerChildren[_loc2_];
            _loc3_.effectiveAlphaChanged(_loc3_.alpha);
            _loc2_++;
         }
      }
      
      public function get numLayers() : int
      {
         return this.layerChildren.length;
      }
      
      public function addLayer(param1:DesignLayer) : void
      {
         param1.parentChanged(this);
         this.layerChildren.push(param1);
      }
      
      public function getLayerAt(param1:int) : DesignLayer
      {
         return param1 < this.layerChildren.length && param1 >= 0 ? this.layerChildren[param1] : null;
      }
      
      public function initialized(param1:Object, param2:String) : void
      {
         this.id = param2;
      }
      
      public function removeLayer(param1:DesignLayer) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this.layerChildren.length)
         {
            if(this.layerChildren[_loc2_] == param1)
            {
               param1.parentChanged(null);
               this.layerChildren.splice(_loc2_,1);
               return;
            }
            _loc2_++;
         }
      }
   }
}

package mx.core
{
   use namespace mx_internal;
   
   public class DragSource
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var dataHolder:Object = {};
      
      private var formatHandlers:Object = {};
      
      private var _formats:Array = [];
      
      public function DragSource()
      {
         super();
      }
      
      public function get formats() : Array
      {
         return this._formats;
      }
      
      public function addData(param1:Object, param2:String) : void
      {
         this._formats.push(param2);
         this.dataHolder[param2] = param1;
      }
      
      public function addHandler(param1:Function, param2:String) : void
      {
         this._formats.push(param2);
         this.formatHandlers[param2] = param1;
      }
      
      public function dataForFormat(param1:String) : Object
      {
         var _loc2_:Object = this.dataHolder[param1];
         if(_loc2_)
         {
            return _loc2_;
         }
         if(this.formatHandlers[param1])
         {
            return this.formatHandlers[param1]();
         }
         return null;
      }
      
      public function hasFormat(param1:String) : Boolean
      {
         var _loc2_:int = int(this._formats.length);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            if(this._formats[_loc3_] == param1)
            {
               return true;
            }
            _loc3_++;
         }
         return false;
      }
   }
}

package mx.core
{
   use namespace mx_internal;
   
   public class EdgeMetrics
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const EMPTY:EdgeMetrics = new EdgeMetrics(0,0,0,0);
      
      public var bottom:Number;
      
      public var left:Number;
      
      public var right:Number;
      
      public var top:Number;
      
      public function EdgeMetrics(param1:Number = 0, param2:Number = 0, param3:Number = 0, param4:Number = 0)
      {
         super();
         this.left = param1;
         this.top = param2;
         this.right = param3;
         this.bottom = param4;
      }
      
      public function clone() : EdgeMetrics
      {
         return new EdgeMetrics(this.left,this.top,this.right,this.bottom);
      }
   }
}

package mx.core
{
   use namespace mx_internal;
   
   public class EmbeddedFont
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var _bold:Boolean;
      
      private var _fontName:String;
      
      private var _fontStyle:String;
      
      private var _italic:Boolean;
      
      public function EmbeddedFont(param1:String, param2:Boolean, param3:Boolean)
      {
         super();
         this.initialize(param1,param2,param3);
      }
      
      public function get bold() : Boolean
      {
         return this._bold;
      }
      
      public function get fontName() : String
      {
         return this._fontName;
      }
      
      public function get fontStyle() : String
      {
         return this._fontStyle;
      }
      
      public function get italic() : Boolean
      {
         return this._italic;
      }
      
      public function initialize(param1:String, param2:Boolean, param3:Boolean) : void
      {
         this._bold = param2;
         this._italic = param3;
         this._fontName = param1;
         this._fontStyle = EmbeddedFontRegistry.getInstance().getFontStyle(param2,param3);
      }
   }
}

package mx.core
{
   import flash.system.Capabilities;
   import flash.text.FontStyle;
   import flash.text.TextField;
   import flash.text.TextFormat;
   import flash.text.engine.FontDescription;
   import flash.utils.Dictionary;
   import flash.utils.getQualifiedClassName;
   import mx.managers.ISystemManager;
   import mx.resources.IResourceManager;
   import mx.resources.ResourceManager;
   
   use namespace mx_internal;
   
   public class EmbeddedFontRegistry implements IEmbeddedFontRegistry
   {
      
      private static var instance:IEmbeddedFontRegistry;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static var fonts:Object = {};
      
      private static var cachedFontsForObjects:Dictionary = new Dictionary(true);
      
      private static var staticTextFormat:TextFormat = new TextFormat();
      
      private static var flaggedObjects:Dictionary = new Dictionary(true);
      
      private var _resourceManager:IResourceManager;
      
      public function EmbeddedFontRegistry()
      {
         super();
      }
      
      public static function getInstance() : IEmbeddedFontRegistry
      {
         if(!instance)
         {
            instance = new EmbeddedFontRegistry();
         }
         return instance;
      }
      
      private static function createFontKey(param1:EmbeddedFont) : String
      {
         return param1.fontName + param1.fontStyle;
      }
      
      private static function createEmbeddedFont(param1:String) : EmbeddedFont
      {
         var _loc2_:String = null;
         var _loc3_:Boolean = false;
         var _loc4_:Boolean = false;
         var _loc5_:int = endsWith(param1,FontStyle.REGULAR);
         if(_loc5_ > 0)
         {
            _loc2_ = param1.substring(0,_loc5_);
            return new EmbeddedFont(_loc2_,false,false);
         }
         _loc5_ = endsWith(param1,FontStyle.BOLD);
         if(_loc5_ > 0)
         {
            _loc2_ = param1.substring(0,_loc5_);
            return new EmbeddedFont(_loc2_,true,false);
         }
         _loc5_ = endsWith(param1,FontStyle.BOLD_ITALIC);
         if(_loc5_ > 0)
         {
            _loc2_ = param1.substring(0,_loc5_);
            return new EmbeddedFont(_loc2_,true,true);
         }
         _loc5_ = endsWith(param1,FontStyle.ITALIC);
         if(_loc5_ > 0)
         {
            _loc2_ = param1.substring(0,_loc5_);
            return new EmbeddedFont(_loc2_,false,true);
         }
         return new EmbeddedFont("",false,false);
      }
      
      private static function endsWith(param1:String, param2:String) : int
      {
         var _loc3_:int = int(param1.lastIndexOf(param2));
         if(_loc3_ > 0 && _loc3_ + param2.length == param1.length)
         {
            return _loc3_;
         }
         return -1;
      }
      
      public static function registerFonts(param1:Object, param2:IFlexModuleFactory) : void
      {
         var fontRegistry:IEmbeddedFontRegistry = null;
         var f:Object = null;
         var fontObj:Object = null;
         var fieldIter:String = null;
         var bold:Boolean = false;
         var italic:Boolean = false;
         var fonts:Object = param1;
         var moduleFactory:IFlexModuleFactory = param2;
         try
         {
            fontRegistry = IEmbeddedFontRegistry(Singleton.getInstance("mx.core::IEmbeddedFontRegistry"));
         }
         catch(e:Error)
         {
            Singleton.registerClass("mx.core::IEmbeddedFontRegistry",EmbeddedFontRegistry);
            fontRegistry = IEmbeddedFontRegistry(Singleton.getInstance("mx.core::IEmbeddedFontRegistry"));
         }
         for(f in fonts)
         {
            fontObj = fonts[f];
            for(fieldIter in fontObj)
            {
               if(fontObj[fieldIter] != false)
               {
                  if(fieldIter == "regular")
                  {
                     bold = false;
                     italic = false;
                  }
                  else if(fieldIter == "boldItalic")
                  {
                     bold = true;
                     italic = true;
                  }
                  else if(fieldIter == "bold")
                  {
                     bold = true;
                     italic = false;
                  }
                  else if(fieldIter == "italic")
                  {
                     bold = false;
                     italic = true;
                  }
                  fontRegistry.registerFont(new EmbeddedFont(String(f),bold,italic),moduleFactory);
               }
            }
         }
      }
      
      private function get resourceManager() : IResourceManager
      {
         if(!this._resourceManager)
         {
            this._resourceManager = ResourceManager.getInstance();
         }
         return this._resourceManager;
      }
      
      public function getFontStyle(param1:Boolean, param2:Boolean) : String
      {
         var _loc3_:String = FontStyle.REGULAR;
         if(param1 && param2)
         {
            _loc3_ = FontStyle.BOLD_ITALIC;
         }
         else if(param1)
         {
            _loc3_ = FontStyle.BOLD;
         }
         else if(param2)
         {
            _loc3_ = FontStyle.ITALIC;
         }
         return _loc3_;
      }
      
      public function registerFont(param1:EmbeddedFont, param2:IFlexModuleFactory) : void
      {
         var _loc3_:String = createFontKey(param1);
         var _loc4_:Dictionary = fonts[_loc3_];
         if(!_loc4_)
         {
            _loc4_ = new Dictionary(true);
            fonts[_loc3_] = _loc4_;
         }
         _loc4_[param2] = 1;
      }
      
      public function deregisterFont(param1:EmbeddedFont, param2:IFlexModuleFactory) : void
      {
         var _loc5_:int = 0;
         var _loc6_:Object = null;
         var _loc3_:String = createFontKey(param1);
         var _loc4_:Dictionary = fonts[_loc3_];
         if(_loc4_ != null)
         {
            delete _loc4_[param2];
            _loc5_ = 0;
            for(_loc6_ in _loc4_)
            {
               _loc5_++;
            }
            if(_loc5_ == 0)
            {
               delete fonts[_loc3_];
            }
         }
      }
      
      public function isFontRegistered(param1:EmbeddedFont, param2:IFlexModuleFactory) : Boolean
      {
         var _loc3_:String = createFontKey(param1);
         var _loc4_:Dictionary = fonts[_loc3_];
         return (Boolean(_loc4_)) && _loc4_[param2] == 1;
      }
      
      public function getFonts() : Array
      {
         var _loc2_:String = null;
         var _loc1_:Array = [];
         for(_loc2_ in fonts)
         {
            _loc1_.push(createEmbeddedFont(_loc2_));
         }
         return _loc1_;
      }
      
      public function getAssociatedModuleFactory(param1:String, param2:Boolean, param3:Boolean, param4:Object, param5:IFlexModuleFactory, param6:ISystemManager, param7:* = undefined) : IFlexModuleFactory
      {
         var _loc8_:EmbeddedFont = null;
         var _loc9_:IFlexModuleFactory = null;
         var _loc11_:int = 0;
         var _loc12_:Object = null;
         var _loc13_:Boolean = false;
         var _loc14_:String = null;
         _loc8_ = cachedFontsForObjects[param4];
         if(!_loc8_)
         {
            _loc8_ = new EmbeddedFont(param1,param2,param3);
            cachedFontsForObjects[param4] = _loc8_;
         }
         else if(_loc8_.fontName != param1 || _loc8_.bold != param2 || _loc8_.italic != param3)
         {
            _loc8_ = new EmbeddedFont(param1,param2,param3);
            cachedFontsForObjects[param4] = _loc8_;
         }
         var _loc10_:Dictionary = fonts[createFontKey(_loc8_)];
         if(_loc10_)
         {
            _loc11_ = int(_loc10_[param5]);
            if(_loc11_)
            {
               _loc9_ = param5;
            }
            else
            {
               var _loc15_:int = 0;
               var _loc16_:* = _loc10_;
               for(_loc12_ in _loc16_)
               {
                  _loc9_ = _loc12_ as IFlexModuleFactory;
               }
            }
         }
         if(!_loc9_ && Boolean(param6))
         {
            staticTextFormat.font = param1;
            staticTextFormat.bold = param2;
            staticTextFormat.italic = param3;
            if(param6.isFontFaceEmbedded(staticTextFormat))
            {
               _loc9_ = param6;
            }
         }
         if(_loc9_ && param7 != undefined && Capabilities.isDebugger)
         {
            _loc13_ = param7 ? _loc9_.callInContext(FontDescription.isFontCompatible,null,[param1,param2 ? "bold" : "normal",param3 ? "italic" : "normal"]) : _loc9_.callInContext(TextField.isFontCompatible,null,[param1,this.getFontStyle(param2,param3)]);
            if(!_loc13_)
            {
               if(!flaggedObjects[param4])
               {
                  _loc14_ = getQualifiedClassName(param4);
                  _loc14_ = _loc14_ + ("name" in param4 && param4.name != null ? " (" + param4.name + ") " : "");
                  trace(this.resourceManager.getString("core","fontIncompatible",[param1,_loc14_,param7]));
                  flaggedObjects[param4] = true;
               }
            }
         }
         return _loc9_;
      }
   }
}

package mx.core
{
   use namespace mx_internal;
   
   public final class EventPriority
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const CURSOR_MANAGEMENT:int = 200;
      
      public static const BINDING:int = 100;
      
      public static const DEFAULT:int = 0;
      
      public static const DEFAULT_HANDLER:int = -50;
      
      public static const EFFECT:int = -100;
      
      public function EventPriority()
      {
         super();
      }
   }
}

package mx.core
{
   public class FlexGlobals
   {
      
      public static var topLevelApplication:Object;
      
      public function FlexGlobals()
      {
         super();
      }
   }
}

package mx.core
{
   import flash.display.Loader;
   import mx.utils.NameUtil;
   
   use namespace mx_internal;
   
   public class FlexLoader extends Loader
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function FlexLoader()
      {
         super();
         try
         {
            name = NameUtil.createUniqueName(this);
         }
         catch(e:Error)
         {
         }
      }
      
      override public function toString() : String
      {
         return NameUtil.displayObjectToString(this);
      }
   }
}

package mx.core
{
   import flash.display.Sprite;
   import mx.utils.NameUtil;
   
   use namespace mx_internal;
   
   public class FlexSprite extends Sprite
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function FlexSprite()
      {
         super();
         try
         {
            name = NameUtil.createUniqueName(this);
         }
         catch(e:Error)
         {
         }
      }
      
      override public function toString() : String
      {
         return NameUtil.displayObjectToString(this);
      }
   }
}

package mx.core
{
   import flash.text.TextField;
   import mx.utils.NameUtil;
   
   use namespace mx_internal;
   
   public class FlexTextField extends TextField
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function FlexTextField()
      {
         super();
         try
         {
            name = NameUtil.createUniqueName(this);
         }
         catch(e:Error)
         {
         }
      }
      
      override public function toString() : String
      {
         return NameUtil.displayObjectToString(this);
      }
   }
}

package mx.core
{
   import mx.resources.ResourceManager;
   
   use namespace mx_internal;
   
   public class FlexVersion
   {
      
      private static var _compatibilityErrorFunction:Function;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const CURRENT_VERSION:uint = 67108864;
      
      public static const VERSION_4_0:uint = 67108864;
      
      public static const VERSION_3_0:uint = 50331648;
      
      public static const VERSION_2_0_1:uint = 33554433;
      
      public static const VERSION_2_0:uint = 33554432;
      
      public static const VERSION_ALREADY_SET:String = "versionAlreadySet";
      
      public static const VERSION_ALREADY_READ:String = "versionAlreadyRead";
      
      private static var _compatibilityVersion:uint = CURRENT_VERSION;
      
      private static var compatibilityVersionChanged:Boolean = false;
      
      private static var compatibilityVersionRead:Boolean = false;
      
      public function FlexVersion()
      {
         super();
      }
      
      public static function get compatibilityErrorFunction() : Function
      {
         return _compatibilityErrorFunction;
      }
      
      public static function set compatibilityErrorFunction(param1:Function) : void
      {
         _compatibilityErrorFunction = param1;
      }
      
      public static function get compatibilityVersion() : uint
      {
         compatibilityVersionRead = true;
         return _compatibilityVersion;
      }
      
      public static function set compatibilityVersion(param1:uint) : void
      {
         var _loc2_:String = null;
         if(param1 == _compatibilityVersion)
         {
            return;
         }
         if(compatibilityVersionChanged)
         {
            if(compatibilityErrorFunction == null)
            {
               _loc2_ = ResourceManager.getInstance().getString("core",VERSION_ALREADY_SET);
               throw new Error(_loc2_);
            }
            compatibilityErrorFunction(param1,VERSION_ALREADY_SET);
         }
         if(compatibilityVersionRead)
         {
            if(compatibilityErrorFunction == null)
            {
               _loc2_ = ResourceManager.getInstance().getString("core",VERSION_ALREADY_READ);
               throw new Error(_loc2_);
            }
            compatibilityErrorFunction(param1,VERSION_ALREADY_READ);
         }
         _compatibilityVersion = param1;
         compatibilityVersionChanged = true;
      }
      
      public static function get compatibilityVersionString() : String
      {
         var _loc1_:uint = uint(compatibilityVersion >> 24 & 0xFF);
         var _loc2_:uint = uint(compatibilityVersion >> 16 & 0xFF);
         var _loc3_:uint = uint(compatibilityVersion & 0xFFFF);
         return _loc1_.toString() + "." + _loc2_.toString() + "." + _loc3_.toString();
      }
      
      public static function set compatibilityVersionString(param1:String) : void
      {
         var _loc2_:Array = param1.split(".");
         var _loc3_:uint = parseInt(_loc2_[0]);
         var _loc4_:uint = parseInt(_loc2_[1]);
         var _loc5_:uint = parseInt(_loc2_[2]);
         compatibilityVersion = (_loc3_ << 24) + (_loc4_ << 16) + _loc5_;
      }
      
      mx_internal static function changeCompatibilityVersionString(param1:String) : void
      {
         var _loc2_:Array = param1.split(".");
         var _loc3_:uint = parseInt(_loc2_[0]);
         var _loc4_:uint = parseInt(_loc2_[1]);
         var _loc5_:uint = parseInt(_loc2_[2]);
         _compatibilityVersion = (_loc3_ << 24) + (_loc4_ << 16) + _loc5_;
      }
   }
}

package mx.core
{
   import flash.text.Font;
   
   use namespace mx_internal;
   
   public class FontAsset extends Font implements IFlexAsset
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function FontAsset()
      {
         super();
      }
   }
}

package mx.core
{
   public interface IBorder
   {
      
      function get borderMetrics() : EdgeMetrics;
   }
}

package mx.core
{
   public interface IButton extends IUIComponent
   {
      
      function get emphasized() : Boolean;
      
      function set emphasized(param1:Boolean) : void;
      
      function callLater(param1:Function, param2:Array = null) : void;
   }
}

package mx.core
{
   import flash.display.DisplayObject;
   import flash.geom.Point;
   
   public interface IChildList
   {
      
      function get numChildren() : int;
      
      function addChild(param1:DisplayObject) : DisplayObject;
      
      function addChildAt(param1:DisplayObject, param2:int) : DisplayObject;
      
      function removeChild(param1:DisplayObject) : DisplayObject;
      
      function removeChildAt(param1:int) : DisplayObject;
      
      function getChildAt(param1:int) : DisplayObject;
      
      function getChildByName(param1:String) : DisplayObject;
      
      function getChildIndex(param1:DisplayObject) : int;
      
      function setChildIndex(param1:DisplayObject, param2:int) : void;
      
      function getObjectsUnderPoint(param1:Point) : Array;
      
      function contains(param1:DisplayObject) : Boolean;
   }
}

package mx.core
{
   public interface IConstraintClient
   {
      
      function getConstraintValue(param1:String) : *;
      
      function setConstraintValue(param1:String, param2:*) : void;
   }
}

package mx.core
{
   import flash.display.DisplayObject;
   import flash.display.Graphics;
   import flash.display.Sprite;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.media.SoundTransform;
   import flash.text.TextSnapshot;
   import mx.managers.IFocusManager;
   
   public interface IContainer extends IUIComponent
   {
      
      function get graphics() : Graphics;
      
      function get buttonMode() : Boolean;
      
      function set buttonMode(param1:Boolean) : void;
      
      function startDrag(param1:Boolean = false, param2:Rectangle = null) : void;
      
      function stopDrag() : void;
      
      function get dropTarget() : DisplayObject;
      
      function get hitArea() : Sprite;
      
      function set hitArea(param1:Sprite) : void;
      
      function get useHandCursor() : Boolean;
      
      function set useHandCursor(param1:Boolean) : void;
      
      function get soundTransform() : SoundTransform;
      
      function set soundTransform(param1:SoundTransform) : void;
      
      function addChild(param1:DisplayObject) : DisplayObject;
      
      function addChildAt(param1:DisplayObject, param2:int) : DisplayObject;
      
      function removeChild(param1:DisplayObject) : DisplayObject;
      
      function removeChildAt(param1:int) : DisplayObject;
      
      function getChildIndex(param1:DisplayObject) : int;
      
      function setChildIndex(param1:DisplayObject, param2:int) : void;
      
      function getChildAt(param1:int) : DisplayObject;
      
      function getChildByName(param1:String) : DisplayObject;
      
      function get numChildren() : int;
      
      function get textSnapshot() : TextSnapshot;
      
      function getObjectsUnderPoint(param1:Point) : Array;
      
      function areInaccessibleObjectsUnderPoint(param1:Point) : Boolean;
      
      function get tabChildren() : Boolean;
      
      function set tabChildren(param1:Boolean) : void;
      
      function get mouseChildren() : Boolean;
      
      function set mouseChildren(param1:Boolean) : void;
      
      function contains(param1:DisplayObject) : Boolean;
      
      function swapChildrenAt(param1:int, param2:int) : void;
      
      function swapChildren(param1:DisplayObject, param2:DisplayObject) : void;
      
      function get tabEnabled() : Boolean;
      
      function set tabEnabled(param1:Boolean) : void;
      
      function get tabIndex() : int;
      
      function set tabIndex(param1:int) : void;
      
      function get focusRect() : Object;
      
      function set focusRect(param1:Object) : void;
      
      function get mouseEnabled() : Boolean;
      
      function set mouseEnabled(param1:Boolean) : void;
      
      function get doubleClickEnabled() : Boolean;
      
      function set doubleClickEnabled(param1:Boolean) : void;
      
      function get defaultButton() : IFlexDisplayObject;
      
      function set defaultButton(param1:IFlexDisplayObject) : void;
      
      function get creatingContentPane() : Boolean;
      
      function set creatingContentPane(param1:Boolean) : void;
      
      function get viewMetrics() : EdgeMetrics;
      
      function get horizontalScrollPosition() : Number;
      
      function set horizontalScrollPosition(param1:Number) : void;
      
      function get verticalScrollPosition() : Number;
      
      function set verticalScrollPosition(param1:Number) : void;
      
      function get focusManager() : IFocusManager;
   }
}

package mx.core
{
   public interface IDataRenderer
   {
      
      function get data() : Object;
      
      function set data(param1:Object) : void;
   }
}

package mx.core
{
   public interface IDeferredInstantiationUIComponent extends IUIComponent
   {
      
      function set cacheHeuristic(param1:Boolean) : void;
      
      function get cachePolicy() : String;
      
      function get descriptor() : UIComponentDescriptor;
      
      function set descriptor(param1:UIComponentDescriptor) : void;
      
      function get id() : String;
      
      function set id(param1:String) : void;
      
      function createReferenceOnParentDocument(param1:IFlexDisplayObject) : void;
      
      function deleteReferenceOnParentDocument(param1:IFlexDisplayObject) : void;
      
      function executeBindings(param1:Boolean = false) : void;
      
      function registerEffects(param1:Array) : void;
   }
}

package mx.core
{
   import mx.managers.ISystemManager;
   
   public interface IEmbeddedFontRegistry
   {
      
      function registerFont(param1:EmbeddedFont, param2:IFlexModuleFactory) : void;
      
      function deregisterFont(param1:EmbeddedFont, param2:IFlexModuleFactory) : void;
      
      function isFontRegistered(param1:EmbeddedFont, param2:IFlexModuleFactory) : Boolean;
      
      function getAssociatedModuleFactory(param1:String, param2:Boolean, param3:Boolean, param4:Object, param5:IFlexModuleFactory, param6:ISystemManager, param7:* = undefined) : IFlexModuleFactory;
      
      function getFonts() : Array;
      
      function getFontStyle(param1:Boolean, param2:Boolean) : String;
   }
}

package mx.core
{
   public interface IFlexAsset
   {
      
      
   }
}

package mx.core
{
   import flash.accessibility.AccessibilityProperties;
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.display.IBitmapDrawable;
   import flash.display.LoaderInfo;
   import flash.display.Stage;
   import flash.events.IEventDispatcher;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.geom.Transform;
   
   public interface IFlexDisplayObject extends IBitmapDrawable, IEventDispatcher
   {
      
      function get root() : DisplayObject;
      
      function get stage() : Stage;
      
      function get name() : String;
      
      function set name(param1:String) : void;
      
      function get parent() : DisplayObjectContainer;
      
      function get mask() : DisplayObject;
      
      function set mask(param1:DisplayObject) : void;
      
      function get visible() : Boolean;
      
      function set visible(param1:Boolean) : void;
      
      function get x() : Number;
      
      function set x(param1:Number) : void;
      
      function get y() : Number;
      
      function set y(param1:Number) : void;
      
      function get scaleX() : Number;
      
      function set scaleX(param1:Number) : void;
      
      function get scaleY() : Number;
      
      function set scaleY(param1:Number) : void;
      
      function get mouseX() : Number;
      
      function get mouseY() : Number;
      
      function get rotation() : Number;
      
      function set rotation(param1:Number) : void;
      
      function get alpha() : Number;
      
      function set alpha(param1:Number) : void;
      
      function get width() : Number;
      
      function set width(param1:Number) : void;
      
      function get height() : Number;
      
      function set height(param1:Number) : void;
      
      function get cacheAsBitmap() : Boolean;
      
      function set cacheAsBitmap(param1:Boolean) : void;
      
      function get opaqueBackground() : Object;
      
      function set opaqueBackground(param1:Object) : void;
      
      function get scrollRect() : Rectangle;
      
      function set scrollRect(param1:Rectangle) : void;
      
      function get filters() : Array;
      
      function set filters(param1:Array) : void;
      
      function get blendMode() : String;
      
      function set blendMode(param1:String) : void;
      
      function get transform() : Transform;
      
      function set transform(param1:Transform) : void;
      
      function get scale9Grid() : Rectangle;
      
      function set scale9Grid(param1:Rectangle) : void;
      
      function globalToLocal(param1:Point) : Point;
      
      function localToGlobal(param1:Point) : Point;
      
      function getBounds(param1:DisplayObject) : Rectangle;
      
      function getRect(param1:DisplayObject) : Rectangle;
      
      function get loaderInfo() : LoaderInfo;
      
      function hitTestObject(param1:DisplayObject) : Boolean;
      
      function hitTestPoint(param1:Number, param2:Number, param3:Boolean = false) : Boolean;
      
      function get accessibilityProperties() : AccessibilityProperties;
      
      function set accessibilityProperties(param1:AccessibilityProperties) : void;
      
      function get measuredHeight() : Number;
      
      function get measuredWidth() : Number;
      
      function move(param1:Number, param2:Number) : void;
      
      function setActualSize(param1:Number, param2:Number) : void;
   }
}

package mx.core
{
   public interface IFlexModule
   {
      
      function set moduleFactory(param1:IFlexModuleFactory) : void;
      
      function get moduleFactory() : IFlexModuleFactory;
   }
}

package mx.core
{
   import flash.utils.Dictionary;
   
   public interface IFlexModuleFactory
   {
      
      function get preloadedRSLs() : Dictionary;
      
      function allowDomain(... rest) : void;
      
      function allowInsecureDomain(... rest) : void;
      
      function callInContext(param1:Function, param2:Object, param3:Array, param4:Boolean = true) : *;
      
      function create(... rest) : Object;
      
      function getImplementation(param1:String) : Object;
      
      function info() : Object;
      
      function registerImplementation(param1:String, param2:Object) : void;
   }
}

package mx.core
{
   public interface IFontContextComponent
   {
      
      function get fontContext() : IFlexModuleFactory;
      
      function set fontContext(param1:IFlexModuleFactory) : void;
   }
}

package mx.core
{
   public interface IIMESupport
   {
      
      function get enableIME() : Boolean;
      
      function get imeMode() : String;
      
      function set imeMode(param1:String) : void;
   }
}

package mx.core
{
   public interface IInvalidating
   {
      
      function invalidateProperties() : void;
      
      function invalidateSize() : void;
      
      function invalidateDisplayList() : void;
      
      function validateNow() : void;
   }
}

package mx.core
{
   import flash.events.IEventDispatcher;
   import flash.geom.Matrix;
   import flash.geom.Matrix3D;
   import flash.geom.Vector3D;
   
   public interface ILayoutElement extends IEventDispatcher
   {
      
      function get left() : Object;
      
      function set left(param1:Object) : void;
      
      function get right() : Object;
      
      function set right(param1:Object) : void;
      
      function get top() : Object;
      
      function set top(param1:Object) : void;
      
      function get bottom() : Object;
      
      function set bottom(param1:Object) : void;
      
      function get horizontalCenter() : Object;
      
      function set horizontalCenter(param1:Object) : void;
      
      function get verticalCenter() : Object;
      
      function set verticalCenter(param1:Object) : void;
      
      function get baseline() : Object;
      
      function set baseline(param1:Object) : void;
      
      function get baselinePosition() : Number;
      
      function get percentWidth() : Number;
      
      function set percentWidth(param1:Number) : void;
      
      function get percentHeight() : Number;
      
      function set percentHeight(param1:Number) : void;
      
      function get includeInLayout() : Boolean;
      
      function set includeInLayout(param1:Boolean) : void;
      
      function getPreferredBoundsWidth(param1:Boolean = true) : Number;
      
      function getPreferredBoundsHeight(param1:Boolean = true) : Number;
      
      function getMinBoundsWidth(param1:Boolean = true) : Number;
      
      function getMinBoundsHeight(param1:Boolean = true) : Number;
      
      function getMaxBoundsWidth(param1:Boolean = true) : Number;
      
      function getMaxBoundsHeight(param1:Boolean = true) : Number;
      
      function getBoundsXAtSize(param1:Number, param2:Number, param3:Boolean = true) : Number;
      
      function getBoundsYAtSize(param1:Number, param2:Number, param3:Boolean = true) : Number;
      
      function getLayoutBoundsWidth(param1:Boolean = true) : Number;
      
      function getLayoutBoundsHeight(param1:Boolean = true) : Number;
      
      function getLayoutBoundsX(param1:Boolean = true) : Number;
      
      function getLayoutBoundsY(param1:Boolean = true) : Number;
      
      function setLayoutBoundsPosition(param1:Number, param2:Number, param3:Boolean = true) : void;
      
      function setLayoutBoundsSize(param1:Number, param2:Number, param3:Boolean = true) : void;
      
      function getLayoutMatrix() : Matrix;
      
      function setLayoutMatrix(param1:Matrix, param2:Boolean) : void;
      
      function get hasLayoutMatrix3D() : Boolean;
      
      function getLayoutMatrix3D() : Matrix3D;
      
      function setLayoutMatrix3D(param1:Matrix3D, param2:Boolean) : void;
      
      function transformAround(param1:Vector3D, param2:Vector3D = null, param3:Vector3D = null, param4:Vector3D = null, param5:Vector3D = null, param6:Vector3D = null, param7:Vector3D = null, param8:Boolean = true) : void;
   }
}

package mx.core
{
   public interface IMXMLObject
   {
      
      function initialized(param1:Object, param2:String) : void;
   }
}

package mx.core
{
   public interface IProgrammaticSkin
   {
      
      function validateNow() : void;
      
      function validateDisplayList() : void;
   }
}

package mx.core
{
   import flash.events.IEventDispatcher;
   
   public interface IPropertyChangeNotifier extends IEventDispatcher, IUID
   {
      
      
   }
}

package mx.core
{
   public interface IRawChildrenContainer
   {
      
      function get rawChildren() : IChildList;
   }
}

package mx.core
{
   import flash.geom.Rectangle;
   
   public interface IRectangularBorder extends IBorder
   {
      
      function get backgroundImageBounds() : Rectangle;
      
      function set backgroundImageBounds(param1:Rectangle) : void;
      
      function get hasBackgroundImage() : Boolean;
      
      function layoutBackgroundImage() : void;
   }
}

package mx.core
{
   public interface IRepeater
   {
      
      function get container() : IContainer;
      
      function get count() : int;
      
      function set count(param1:int) : void;
      
      function get currentIndex() : int;
      
      function get currentItem() : Object;
      
      function get dataProvider() : Object;
      
      function set dataProvider(param1:Object) : void;
      
      function get recycleChildren() : Boolean;
      
      function set recycleChildren(param1:Boolean) : void;
      
      function get startingIndex() : int;
      
      function set startingIndex(param1:int) : void;
      
      function initializeRepeater(param1:IContainer, param2:Boolean) : void;
      
      function executeChildBindings() : void;
   }
}

package mx.core
{
   public interface IRepeaterClient
   {
      
      function get instanceIndices() : Array;
      
      function set instanceIndices(param1:Array) : void;
      
      function get isDocument() : Boolean;
      
      function get repeaterIndices() : Array;
      
      function set repeaterIndices(param1:Array) : void;
      
      function get repeaters() : Array;
      
      function set repeaters(param1:Array) : void;
      
      function initializeRepeaterArrays(param1:IRepeaterClient) : void;
   }
}

package mx.core
{
   public interface IStateClient
   {
      
      function get currentState() : String;
      
      function set currentState(param1:String) : void;
   }
}

package mx.core
{
   import flash.events.IEventDispatcher;
   
   public interface IStateClient2 extends IEventDispatcher, IStateClient
   {
      
      function get states() : Array;
      
      function set states(param1:Array) : void;
      
      function get transitions() : Array;
      
      function set transitions(param1:Array) : void;
      
      function hasState(param1:String) : Boolean;
   }
}

package mx.core
{
   import flash.events.IEventDispatcher;
   
   public interface ISWFBridgeGroup extends IEventDispatcher
   {
      
      function get parentBridge() : IEventDispatcher;
      
      function set parentBridge(param1:IEventDispatcher) : void;
      
      function addChildBridge(param1:IEventDispatcher, param2:ISWFBridgeProvider) : void;
      
      function removeChildBridge(param1:IEventDispatcher) : void;
      
      function getChildBridgeProvider(param1:IEventDispatcher) : ISWFBridgeProvider;
      
      function getChildBridges() : Array;
      
      function containsBridge(param1:IEventDispatcher) : Boolean;
   }
}

package mx.core
{
   import flash.events.IEventDispatcher;
   
   public interface ISWFBridgeProvider
   {
      
      function get swfBridge() : IEventDispatcher;
      
      function get childAllowsParent() : Boolean;
      
      function get parentAllowsChild() : Boolean;
   }
}

package mx.core
{
   import flash.geom.Rectangle;
   
   public interface ISWFLoader extends ISWFBridgeProvider
   {
      
      function get loadForCompatibility() : Boolean;
      
      function set loadForCompatibility(param1:Boolean) : void;
      
      function getVisibleApplicationRect(param1:Boolean = false) : Rectangle;
   }
}

package mx.core
{
   public interface ISystemCursorClient
   {
      
      function get showSystemCursor() : Boolean;
   }
}

package mx.core
{
   import flash.text.TextField;
   
   public interface ITextFieldFactory
   {
      
      function createTextField(param1:IFlexModuleFactory) : TextField;
      
      function createFTETextField(param1:IFlexModuleFactory) : Object;
   }
}

package mx.core
{
   import flash.geom.Rectangle;
   
   public interface IToolTip extends IUIComponent
   {
      
      function get screen() : Rectangle;
      
      function get text() : String;
      
      function set text(param1:String) : void;
   }
}

package mx.core
{
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.display.Sprite;
   import mx.managers.ISystemManager;
   
   public interface IUIComponent extends IFlexDisplayObject
   {
      
      function get baselinePosition() : Number;
      
      function get document() : Object;
      
      function set document(param1:Object) : void;
      
      function get enabled() : Boolean;
      
      function set enabled(param1:Boolean) : void;
      
      function get explicitHeight() : Number;
      
      function set explicitHeight(param1:Number) : void;
      
      function get explicitMaxHeight() : Number;
      
      function get explicitMaxWidth() : Number;
      
      function get explicitMinHeight() : Number;
      
      function get explicitMinWidth() : Number;
      
      function get explicitWidth() : Number;
      
      function set explicitWidth(param1:Number) : void;
      
      function get focusPane() : Sprite;
      
      function set focusPane(param1:Sprite) : void;
      
      function get includeInLayout() : Boolean;
      
      function set includeInLayout(param1:Boolean) : void;
      
      function get isPopUp() : Boolean;
      
      function set isPopUp(param1:Boolean) : void;
      
      function get maxHeight() : Number;
      
      function get maxWidth() : Number;
      
      function get measuredMinHeight() : Number;
      
      function set measuredMinHeight(param1:Number) : void;
      
      function get measuredMinWidth() : Number;
      
      function set measuredMinWidth(param1:Number) : void;
      
      function get minHeight() : Number;
      
      function get minWidth() : Number;
      
      function get owner() : DisplayObjectContainer;
      
      function set owner(param1:DisplayObjectContainer) : void;
      
      function get percentHeight() : Number;
      
      function set percentHeight(param1:Number) : void;
      
      function get percentWidth() : Number;
      
      function set percentWidth(param1:Number) : void;
      
      function get systemManager() : ISystemManager;
      
      function set systemManager(param1:ISystemManager) : void;
      
      function get tweeningProperties() : Array;
      
      function set tweeningProperties(param1:Array) : void;
      
      function initialize() : void;
      
      function parentChanged(param1:DisplayObjectContainer) : void;
      
      function getExplicitOrMeasuredWidth() : Number;
      
      function getExplicitOrMeasuredHeight() : Number;
      
      function setVisible(param1:Boolean, param2:Boolean = false) : void;
      
      function owns(param1:DisplayObject) : Boolean;
   }
}

package mx.core
{
   public interface IUID
   {
      
      function get uid() : String;
      
      function set uid(param1:String) : void;
   }
}

package mx.core
{
   import flash.display.DisplayObject;
   import flash.geom.Rectangle;
   import flash.text.StyleSheet;
   import flash.text.TextFormat;
   import flash.text.TextLineMetrics;
   import mx.managers.IToolTipManagerClient;
   import mx.styles.ISimpleStyleClient;
   
   public interface IUITextField extends IIMESupport, IFlexModule, IInvalidating, ISimpleStyleClient, IToolTipManagerClient, IUIComponent
   {
      
      function get alwaysShowSelection() : Boolean;
      
      function set alwaysShowSelection(param1:Boolean) : void;
      
      function get antiAliasType() : String;
      
      function set antiAliasType(param1:String) : void;
      
      function get autoSize() : String;
      
      function set autoSize(param1:String) : void;
      
      function get background() : Boolean;
      
      function set background(param1:Boolean) : void;
      
      function get backgroundColor() : uint;
      
      function set backgroundColor(param1:uint) : void;
      
      function get border() : Boolean;
      
      function set border(param1:Boolean) : void;
      
      function get borderColor() : uint;
      
      function set borderColor(param1:uint) : void;
      
      function get bottomScrollV() : int;
      
      function get caretIndex() : int;
      
      function get condenseWhite() : Boolean;
      
      function set condenseWhite(param1:Boolean) : void;
      
      function get defaultTextFormat() : TextFormat;
      
      function set defaultTextFormat(param1:TextFormat) : void;
      
      function get embedFonts() : Boolean;
      
      function set embedFonts(param1:Boolean) : void;
      
      function get gridFitType() : String;
      
      function set gridFitType(param1:String) : void;
      
      function get htmlText() : String;
      
      function set htmlText(param1:String) : void;
      
      function get length() : int;
      
      function get maxChars() : int;
      
      function set maxChars(param1:int) : void;
      
      function get maxScrollH() : int;
      
      function get maxScrollV() : int;
      
      function get mouseWheelEnabled() : Boolean;
      
      function set mouseWheelEnabled(param1:Boolean) : void;
      
      function get multiline() : Boolean;
      
      function set multiline(param1:Boolean) : void;
      
      function get numLines() : int;
      
      function get displayAsPassword() : Boolean;
      
      function set displayAsPassword(param1:Boolean) : void;
      
      function get restrict() : String;
      
      function set restrict(param1:String) : void;
      
      function get scrollH() : int;
      
      function set scrollH(param1:int) : void;
      
      function get scrollV() : int;
      
      function set scrollV(param1:int) : void;
      
      function get selectable() : Boolean;
      
      function set selectable(param1:Boolean) : void;
      
      function get selectionBeginIndex() : int;
      
      function get selectionEndIndex() : int;
      
      function get sharpness() : Number;
      
      function set sharpness(param1:Number) : void;
      
      function get styleSheet() : StyleSheet;
      
      function set styleSheet(param1:StyleSheet) : void;
      
      function get text() : String;
      
      function set text(param1:String) : void;
      
      function get textColor() : uint;
      
      function set textColor(param1:uint) : void;
      
      function get textHeight() : Number;
      
      function get textWidth() : Number;
      
      function get thickness() : Number;
      
      function set thickness(param1:Number) : void;
      
      function get type() : String;
      
      function set type(param1:String) : void;
      
      function get wordWrap() : Boolean;
      
      function set wordWrap(param1:Boolean) : void;
      
      function appendText(param1:String) : void;
      
      function getCharBoundaries(param1:int) : Rectangle;
      
      function getCharIndexAtPoint(param1:Number, param2:Number) : int;
      
      function getFirstCharInParagraph(param1:int) : int;
      
      function getLineIndexAtPoint(param1:Number, param2:Number) : int;
      
      function getLineIndexOfChar(param1:int) : int;
      
      function getLineLength(param1:int) : int;
      
      function getLineMetrics(param1:int) : TextLineMetrics;
      
      function getLineOffset(param1:int) : int;
      
      function getLineText(param1:int) : String;
      
      function getParagraphLength(param1:int) : int;
      
      function getTextFormat(param1:int = -1, param2:int = -1) : TextFormat;
      
      function replaceSelectedText(param1:String) : void;
      
      function replaceText(param1:int, param2:int, param3:String) : void;
      
      function setSelection(param1:int, param2:int) : void;
      
      function setTextFormat(param1:TextFormat, param2:int = -1, param3:int = -1) : void;
      
      function getImageReference(param1:String) : DisplayObject;
      
      function set useRichTextClipboard(param1:Boolean) : void;
      
      function get useRichTextClipboard() : Boolean;
      
      function get tabEnabled() : Boolean;
      
      function set tabEnabled(param1:Boolean) : void;
      
      function get tabIndex() : int;
      
      function set tabIndex(param1:int) : void;
      
      function get focusRect() : Object;
      
      function set focusRect(param1:Object) : void;
      
      function get mouseEnabled() : Boolean;
      
      function set mouseEnabled(param1:Boolean) : void;
      
      function get doubleClickEnabled() : Boolean;
      
      function set doubleClickEnabled(param1:Boolean) : void;
      
      function get ignorePadding() : Boolean;
      
      function set ignorePadding(param1:Boolean) : void;
      
      function get inheritingStyles() : Object;
      
      function set inheritingStyles(param1:Object) : void;
      
      function get nestLevel() : int;
      
      function set nestLevel(param1:int) : void;
      
      function get nonInheritingStyles() : Object;
      
      function set nonInheritingStyles(param1:Object) : void;
      
      function get nonZeroTextHeight() : Number;
      
      function getStyle(param1:String) : *;
      
      function getUITextFormat() : UITextFormat;
      
      function setColor(param1:uint) : void;
      
      function setFocus() : void;
      
      function truncateToFit(param1:String = null) : Boolean;
   }
}

package mx.core
{
   import flash.display.DisplayObjectContainer;
   import mx.geom.TransformOffsets;
   
   public interface IVisualElement extends ILayoutElement
   {
      
      function get owner() : DisplayObjectContainer;
      
      function set owner(param1:DisplayObjectContainer) : void;
      
      function get parent() : DisplayObjectContainer;
      
      function get depth() : Number;
      
      function set depth(param1:Number) : void;
      
      function get visible() : Boolean;
      
      function set visible(param1:Boolean) : void;
      
      function get alpha() : Number;
      
      function set alpha(param1:Number) : void;
      
      function get width() : Number;
      
      function set width(param1:Number) : void;
      
      function get height() : Number;
      
      function set height(param1:Number) : void;
      
      function get x() : Number;
      
      function set x(param1:Number) : void;
      
      function get y() : Number;
      
      function set y(param1:Number) : void;
      
      function get designLayer() : DesignLayer;
      
      function set designLayer(param1:DesignLayer) : void;
      
      function get postLayoutTransformOffsets() : TransformOffsets;
      
      function set postLayoutTransformOffsets(param1:TransformOffsets) : void;
      
      function get is3D() : Boolean;
   }
}

package mx.core
{
   public interface IVisualElementContainer
   {
      
      function get numElements() : int;
      
      function getElementAt(param1:int) : IVisualElement;
      
      function addElement(param1:IVisualElement) : IVisualElement;
      
      function addElementAt(param1:IVisualElement, param2:int) : IVisualElement;
      
      function removeElement(param1:IVisualElement) : IVisualElement;
      
      function removeElementAt(param1:int) : IVisualElement;
      
      function removeAllElements() : void;
      
      function getElementIndex(param1:IVisualElement) : int;
      
      function setElementIndex(param1:IVisualElement, param2:int) : void;
      
      function swapElements(param1:IVisualElement, param2:IVisualElement) : void;
      
      function swapElementsAt(param1:int, param2:int) : void;
   }
}

package mx.core
{
   import flash.geom.Matrix;
   import flash.geom.Point;
   import mx.utils.MatrixUtil;
   
   use namespace mx_internal;
   
   public class LayoutElementUIComponentUtils
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static const DEFAULT_MAX_WIDTH:Number = 10000;
      
      private static const DEFAULT_MAX_HEIGHT:Number = 10000;
      
      public function LayoutElementUIComponentUtils()
      {
         super();
      }
      
      private static function getPreferredUBoundsWidth(param1:IUIComponent) : Number
      {
         var _loc2_:Number = param1.getExplicitOrMeasuredWidth();
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc2_ = param1.scaleX == 0 ? 0 : _loc2_ / param1.scaleX;
         }
         return _loc2_;
      }
      
      private static function getPreferredUBoundsHeight(param1:IUIComponent) : Number
      {
         var _loc2_:Number = param1.getExplicitOrMeasuredHeight();
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc2_ = param1.scaleY == 0 ? 0 : _loc2_ / param1.scaleY;
         }
         return _loc2_;
      }
      
      private static function getMinUBoundsWidth(param1:IUIComponent) : Number
      {
         var _loc2_:Number = NaN;
         if(!isNaN(param1.explicitMinWidth))
         {
            _loc2_ = param1.explicitMinWidth;
         }
         else
         {
            _loc2_ = isNaN(param1.measuredMinWidth) ? 0 : param1.measuredMinWidth;
            if(!isNaN(param1.explicitMaxWidth))
            {
               _loc2_ = Math.min(_loc2_,param1.explicitMaxWidth);
            }
         }
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc2_ = param1.scaleX == 0 ? 0 : _loc2_ / param1.scaleX;
         }
         return _loc2_;
      }
      
      private static function getMinUBoundsHeight(param1:IUIComponent) : Number
      {
         var _loc2_:Number = NaN;
         if(!isNaN(param1.explicitMinHeight))
         {
            _loc2_ = param1.explicitMinHeight;
         }
         else
         {
            _loc2_ = isNaN(param1.measuredMinHeight) ? 0 : param1.measuredMinHeight;
            if(!isNaN(param1.explicitMaxHeight))
            {
               _loc2_ = Math.min(_loc2_,param1.explicitMaxHeight);
            }
         }
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc2_ = param1.scaleY == 0 ? 0 : _loc2_ / param1.scaleY;
         }
         return _loc2_;
      }
      
      private static function getMaxUBoundsWidth(param1:IUIComponent) : Number
      {
         var _loc2_:Number = NaN;
         if(!isNaN(param1.explicitMaxWidth))
         {
            _loc2_ = param1.explicitMaxWidth;
         }
         else
         {
            _loc2_ = DEFAULT_MAX_WIDTH;
         }
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc2_ = param1.scaleX == 0 ? 0 : _loc2_ / param1.scaleX;
         }
         return _loc2_;
      }
      
      private static function getMaxUBoundsHeight(param1:IUIComponent) : Number
      {
         var _loc2_:Number = NaN;
         if(!isNaN(param1.explicitMaxHeight))
         {
            _loc2_ = param1.explicitMaxHeight;
         }
         else
         {
            _loc2_ = DEFAULT_MAX_HEIGHT;
         }
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc2_ = param1.scaleY == 0 ? 0 : _loc2_ / param1.scaleY;
         }
         return _loc2_;
      }
      
      public static function getPreferredBoundsWidth(param1:IUIComponent, param2:Matrix) : Number
      {
         var _loc3_:Number = getPreferredUBoundsWidth(param1);
         if(param2)
         {
            _loc3_ = MatrixUtil.transformSize(_loc3_,getPreferredUBoundsHeight(param1),param2).x;
         }
         return _loc3_;
      }
      
      public static function getPreferredBoundsHeight(param1:IUIComponent, param2:Matrix) : Number
      {
         var _loc3_:Number = getPreferredUBoundsHeight(param1);
         if(param2)
         {
            _loc3_ = MatrixUtil.transformSize(getPreferredUBoundsWidth(param1),_loc3_,param2).y;
         }
         return _loc3_;
      }
      
      public static function getMinBoundsWidth(param1:IUIComponent, param2:Matrix) : Number
      {
         var _loc3_:Number = getMinUBoundsWidth(param1);
         if(param2)
         {
            _loc3_ = MatrixUtil.transformSize(_loc3_,getMinUBoundsHeight(param1),param2).x;
         }
         return _loc3_;
      }
      
      public static function getMinBoundsHeight(param1:IUIComponent, param2:Matrix) : Number
      {
         var _loc3_:Number = getMinUBoundsHeight(param1);
         if(param2)
         {
            _loc3_ = MatrixUtil.transformSize(getMinUBoundsWidth(param1),_loc3_,param2).y;
         }
         return _loc3_;
      }
      
      public static function getMaxBoundsWidth(param1:IUIComponent, param2:Matrix) : Number
      {
         var _loc3_:Number = getMaxUBoundsWidth(param1);
         if(param2)
         {
            _loc3_ = MatrixUtil.transformSize(_loc3_,getMaxUBoundsHeight(param1),param2).x;
         }
         return _loc3_;
      }
      
      public static function getMaxBoundsHeight(param1:IUIComponent, param2:Matrix) : Number
      {
         var _loc3_:Number = getMaxUBoundsHeight(param1);
         if(param2)
         {
            _loc3_ = MatrixUtil.transformSize(getMaxUBoundsWidth(param1),_loc3_,param2).y;
         }
         return _loc3_;
      }
      
      public static function getBoundsXAtSize(param1:IUIComponent, param2:Number, param3:Number, param4:Matrix) : Number
      {
         if(!param4)
         {
            return param1.x;
         }
         var _loc5_:Point = MatrixUtil.fitBounds(param2,param3,param4,getPreferredUBoundsWidth(param1),getPreferredUBoundsHeight(param1),getMinUBoundsWidth(param1),getMinUBoundsHeight(param1),getMaxUBoundsWidth(param1),getMaxUBoundsHeight(param1));
         if(!_loc5_)
         {
            _loc5_ = new Point(getMinUBoundsWidth(param1),getMinUBoundsHeight(param1));
         }
         var _loc6_:Point = new Point();
         MatrixUtil.transformBounds(_loc5_.x,_loc5_.y,param4,_loc6_);
         return _loc6_.x;
      }
      
      public static function getBoundsYAtSize(param1:IUIComponent, param2:Number, param3:Number, param4:Matrix) : Number
      {
         if(!param4)
         {
            return param1.y;
         }
         var _loc5_:Point = MatrixUtil.fitBounds(param2,param3,param4,getPreferredUBoundsWidth(param1),getPreferredUBoundsHeight(param1),getMinUBoundsWidth(param1),getMinUBoundsHeight(param1),getMaxUBoundsWidth(param1),getMaxUBoundsHeight(param1));
         if(!_loc5_)
         {
            _loc5_ = new Point(getMinUBoundsWidth(param1),getMinUBoundsHeight(param1));
         }
         var _loc6_:Point = new Point();
         MatrixUtil.transformBounds(_loc5_.x,_loc5_.y,param4,_loc6_);
         return _loc6_.y;
      }
      
      public static function getLayoutBoundsWidth(param1:IUIComponent, param2:Matrix) : Number
      {
         var _loc4_:Number = NaN;
         var _loc3_:Number = Number(param1.width);
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc3_ = param1.scaleX == 0 ? 0 : _loc3_ / param1.scaleX;
         }
         if(param2)
         {
            _loc4_ = Number(param1.height);
            if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
            {
               _loc4_ = param1.scaleY == 0 ? 0 : _loc4_ / param1.scaleY;
            }
            _loc3_ = MatrixUtil.transformBounds(_loc3_,_loc4_,param2,new Point()).x;
         }
         return _loc3_;
      }
      
      public static function getLayoutBoundsHeight(param1:IUIComponent, param2:Matrix) : Number
      {
         var _loc4_:Number = NaN;
         var _loc3_:Number = Number(param1.height);
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc3_ = param1.scaleY == 0 ? 0 : _loc3_ / param1.scaleY;
         }
         if(param2)
         {
            _loc4_ = Number(param1.width);
            if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
            {
               _loc4_ = param1.scaleX == 0 ? 0 : _loc4_ / param1.scaleX;
            }
            _loc3_ = MatrixUtil.transformBounds(_loc4_,_loc3_,param2,new Point()).y;
         }
         return _loc3_;
      }
      
      public static function getLayoutBoundsX(param1:IUIComponent, param2:Matrix) : Number
      {
         if(param2 == null)
         {
            return param1.x;
         }
         var _loc3_:Number = Number(param1.width);
         var _loc4_:Number = Number(param1.height);
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc3_ = param1.scaleX == 0 ? 0 : _loc3_ / param1.scaleX;
            _loc4_ = param1.scaleY == 0 ? 0 : _loc4_ / param1.scaleY;
         }
         var _loc5_:Point = new Point();
         MatrixUtil.transformBounds(_loc3_,_loc4_,param2,_loc5_);
         return _loc5_.x;
      }
      
      public static function getLayoutBoundsY(param1:IUIComponent, param2:Matrix) : Number
      {
         if(param2 == null)
         {
            return param1.y;
         }
         var _loc3_:Number = Number(param1.width);
         var _loc4_:Number = Number(param1.height);
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc3_ = param1.scaleX == 0 ? 0 : _loc3_ / param1.scaleX;
            _loc4_ = param1.scaleY == 0 ? 0 : _loc4_ / param1.scaleY;
         }
         var _loc5_:Point = new Point();
         MatrixUtil.transformBounds(_loc3_,_loc4_,param2,_loc5_);
         return _loc5_.y;
      }
      
      public static function setLayoutBoundsPosition(param1:IUIComponent, param2:Number, param3:Number, param4:Matrix) : void
      {
         if(param4)
         {
            param2 = param2 - getLayoutBoundsX(param1,param4) + param1.x;
            param3 = param3 - getLayoutBoundsY(param1,param4) + param1.y;
         }
         param1.move(param2,param3);
      }
      
      public static function setLayoutBoundsSize(param1:IUIComponent, param2:Number, param3:Number, param4:Matrix) : void
      {
         if(!param4)
         {
            if(isNaN(param2))
            {
               param2 = getPreferredUBoundsWidth(param1);
            }
            if(isNaN(param3))
            {
               param3 = getPreferredUBoundsHeight(param1);
            }
            if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
            {
               param2 *= param1.scaleX;
               param3 *= param1.scaleY;
            }
            param1.setActualSize(param2,param3);
            return;
         }
         var _loc5_:Point = MatrixUtil.fitBounds(param2,param3,param4,getPreferredUBoundsWidth(param1),getPreferredUBoundsHeight(param1),getMinUBoundsWidth(param1),getMinUBoundsHeight(param1),getMaxUBoundsWidth(param1),getMaxUBoundsHeight(param1));
         if(!_loc5_)
         {
            _loc5_ = new Point(getMinUBoundsWidth(param1),getMinUBoundsHeight(param1));
         }
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            param1.setActualSize(_loc5_.x * param1.scaleX,_loc5_.y * param1.scaleY);
         }
         else
         {
            param1.setActualSize(_loc5_.x,_loc5_.y);
         }
      }
   }
}

package mx.core
{
   public namespace mx_internal = "http://www.adobe.com/2006/flex/mx/internal";
}

package mx.core
{
   import flash.events.IEventDispatcher;
   import flash.events.IOErrorEvent;
   import flash.system.ApplicationDomain;
   import mx.events.ResourceEvent;
   import mx.resources.IResourceManager;
   
   use namespace mx_internal;
   
   public class ResourceModuleRSLItem extends RSLItem
   {
      
      public static var resourceManager:IResourceManager;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var appDomain:ApplicationDomain;
      
      public function ResourceModuleRSLItem(param1:String, param2:ApplicationDomain)
      {
         super(param1);
         this.appDomain = param2;
      }
      
      override public function load(param1:Function, param2:Function, param3:Function, param4:Function, param5:Function) : void
      {
         var _loc7_:Class = null;
         chainedProgressHandler = param1;
         chainedCompleteHandler = param2;
         chainedIOErrorHandler = param3;
         chainedSecurityErrorHandler = param4;
         chainedRSLErrorHandler = param5;
         if(!resourceManager)
         {
            if(!this.appDomain.hasDefinition("mx.resources::ResourceManager"))
            {
               return;
            }
            _loc7_ = Class(this.appDomain.getDefinition("mx.resources::ResourceManager"));
            resourceManager = IResourceManager(_loc7_["getInstance"]());
         }
         var _loc6_:IEventDispatcher = resourceManager.loadResourceModule(url);
         _loc6_.addEventListener(ResourceEvent.PROGRESS,itemProgressHandler);
         _loc6_.addEventListener(ResourceEvent.COMPLETE,itemCompleteHandler);
         _loc6_.addEventListener(ResourceEvent.ERROR,this.resourceErrorHandler);
      }
      
      private function resourceErrorHandler(param1:ResourceEvent) : void
      {
         var _loc2_:IOErrorEvent = new IOErrorEvent(IOErrorEvent.IO_ERROR);
         _loc2_.text = param1.errorText;
         super.itemErrorHandler(_loc2_);
      }
   }
}

package mx.core
{
   import flash.display.Loader;
   import flash.events.ErrorEvent;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.ProgressEvent;
   import flash.events.SecurityErrorEvent;
   import flash.net.URLRequest;
   import flash.system.ApplicationDomain;
   import flash.system.LoaderContext;
   import mx.events.RSLEvent;
   import mx.utils.LoaderUtil;
   
   use namespace mx_internal;
   
   public class RSLItem
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var urlRequest:URLRequest;
      
      public var total:uint = 0;
      
      public var loaded:uint = 0;
      
      public var rootURL:String;
      
      protected var chainedProgressHandler:Function;
      
      protected var chainedCompleteHandler:Function;
      
      protected var chainedIOErrorHandler:Function;
      
      protected var chainedSecurityErrorHandler:Function;
      
      protected var chainedRSLErrorHandler:Function;
      
      private var completed:Boolean = false;
      
      private var errorText:String;
      
      protected var moduleFactory:IFlexModuleFactory;
      
      protected var url:String;
      
      public function RSLItem(param1:String, param2:String = null, param3:IFlexModuleFactory = null)
      {
         super();
         this.url = param1;
         this.rootURL = param2;
         this.moduleFactory = param3;
      }
      
      public function load(param1:Function, param2:Function, param3:Function, param4:Function, param5:Function) : void
      {
         this.chainedProgressHandler = param1;
         this.chainedCompleteHandler = param2;
         this.chainedIOErrorHandler = param3;
         this.chainedSecurityErrorHandler = param4;
         this.chainedRSLErrorHandler = param5;
         var _loc6_:Loader = new Loader();
         var _loc7_:LoaderContext = new LoaderContext();
         this.urlRequest = new URLRequest(LoaderUtil.createAbsoluteURL(this.rootURL,this.url));
         _loc6_.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS,this.itemProgressHandler);
         _loc6_.contentLoaderInfo.addEventListener(Event.COMPLETE,this.itemCompleteHandler);
         _loc6_.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR,this.itemErrorHandler);
         _loc6_.contentLoaderInfo.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.itemErrorHandler);
         if(this.moduleFactory != null)
         {
            _loc7_.applicationDomain = this.moduleFactory.info()["currentDomain"];
         }
         else
         {
            _loc7_.applicationDomain = ApplicationDomain.currentDomain;
         }
         _loc6_.load(this.urlRequest,_loc7_);
      }
      
      public function itemProgressHandler(param1:ProgressEvent) : void
      {
         this.loaded = param1.bytesLoaded;
         this.total = param1.bytesTotal;
         if(this.chainedProgressHandler != null)
         {
            this.chainedProgressHandler(param1);
         }
      }
      
      public function itemCompleteHandler(param1:Event) : void
      {
         this.completed = true;
         if(this.chainedCompleteHandler != null)
         {
            this.chainedCompleteHandler(param1);
         }
      }
      
      public function itemErrorHandler(param1:ErrorEvent) : void
      {
         this.errorText = decodeURI(param1.text);
         this.completed = true;
         this.loaded = 0;
         this.total = 0;
         trace(this.errorText);
         if(param1.type == IOErrorEvent.IO_ERROR && this.chainedIOErrorHandler != null)
         {
            this.chainedIOErrorHandler(param1);
         }
         else if(param1.type == SecurityErrorEvent.SECURITY_ERROR && this.chainedSecurityErrorHandler != null)
         {
            this.chainedSecurityErrorHandler(param1);
         }
         else if(param1.type == RSLEvent.RSL_ERROR && this.chainedRSLErrorHandler != null)
         {
            this.chainedRSLErrorHandler(param1);
         }
      }
   }
}

package mx.core
{
   import flash.events.Event;
   
   use namespace mx_internal;
   
   public class RSLListLoader
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var currentIndex:int = 0;
      
      private var rslList:Array = [];
      
      private var chainedProgressHandler:Function;
      
      private var chainedCompleteHandler:Function;
      
      private var chainedIOErrorHandler:Function;
      
      private var chainedSecurityErrorHandler:Function;
      
      private var chainedRSLErrorHandler:Function;
      
      public function RSLListLoader(param1:Array)
      {
         super();
         this.rslList = param1;
      }
      
      public function load(param1:Function, param2:Function, param3:Function, param4:Function, param5:Function) : void
      {
         this.chainedProgressHandler = param1;
         this.chainedCompleteHandler = param2;
         this.chainedIOErrorHandler = param3;
         this.chainedSecurityErrorHandler = param4;
         this.chainedRSLErrorHandler = param5;
         this.currentIndex = -1;
         this.loadNext();
      }
      
      private function loadNext() : void
      {
         if(!this.isDone())
         {
            ++this.currentIndex;
            if(this.currentIndex < this.rslList.length)
            {
               this.rslList[this.currentIndex].load(this.chainedProgressHandler,this.listCompleteHandler,this.listIOErrorHandler,this.listSecurityErrorHandler,this.chainedRSLErrorHandler);
            }
         }
      }
      
      public function getItem(param1:int) : RSLItem
      {
         if(param1 < 0 || param1 >= this.rslList.length)
         {
            return null;
         }
         return this.rslList[param1];
      }
      
      public function getIndex() : int
      {
         return this.currentIndex;
      }
      
      public function getItemCount() : int
      {
         return this.rslList.length;
      }
      
      public function isDone() : Boolean
      {
         return this.currentIndex >= this.rslList.length;
      }
      
      private function listCompleteHandler(param1:Event) : void
      {
         if(this.chainedCompleteHandler != null)
         {
            this.chainedCompleteHandler(param1);
         }
         this.loadNext();
      }
      
      private function listIOErrorHandler(param1:Event) : void
      {
         if(this.chainedIOErrorHandler != null)
         {
            this.chainedIOErrorHandler(param1);
         }
      }
      
      private function listSecurityErrorHandler(param1:Event) : void
      {
         if(this.chainedSecurityErrorHandler != null)
         {
            this.chainedSecurityErrorHandler(param1);
         }
      }
   }
}

package mx.core
{
   use namespace mx_internal;
   
   public class Singleton
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static var classMap:Object = {};
      
      public function Singleton()
      {
         super();
      }
      
      public static function registerClass(param1:String, param2:Class) : void
      {
         var _loc3_:Class = classMap[param1];
         if(!_loc3_)
         {
            classMap[param1] = param2;
         }
      }
      
      public static function getClass(param1:String) : Class
      {
         return classMap[param1];
      }
      
      public static function getInstance(param1:String) : Object
      {
         var _loc2_:Class = classMap[param1];
         if(!_loc2_)
         {
            throw new Error("No class registered for interface \'" + param1 + "\'.");
         }
         return _loc2_["getInstance"]();
      }
   }
}

package mx.core
{
   import flash.accessibility.Accessibility;
   import flash.accessibility.AccessibilityProperties;
   import flash.display.BlendMode;
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.display.GradientType;
   import flash.display.Graphics;
   import flash.display.InteractiveObject;
   import flash.display.Loader;
   import flash.display.Shader;
   import flash.display.Sprite;
   import flash.display.Stage;
   import flash.events.Event;
   import flash.events.EventPhase;
   import flash.events.FocusEvent;
   import flash.events.IEventDispatcher;
   import flash.events.KeyboardEvent;
   import flash.geom.ColorTransform;
   import flash.geom.Matrix;
   import flash.geom.Matrix3D;
   import flash.geom.PerspectiveProjection;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.geom.Transform;
   import flash.geom.Vector3D;
   import flash.system.ApplicationDomain;
   import flash.system.Capabilities;
   import flash.text.TextFormatAlign;
   import flash.text.TextLineMetrics;
   import flash.utils.getQualifiedClassName;
   import mx.automation.IAutomationObject;
   import mx.binding.BindingManager;
   import mx.controls.IFlexContextMenu;
   import mx.effects.EffectManager;
   import mx.effects.IEffect;
   import mx.effects.IEffectInstance;
   import mx.events.ChildExistenceChangedEvent;
   import mx.events.DynamicEvent;
   import mx.events.EffectEvent;
   import mx.events.FlexEvent;
   import mx.events.MoveEvent;
   import mx.events.PropertyChangeEvent;
   import mx.events.ResizeEvent;
   import mx.events.StateChangeEvent;
   import mx.events.ValidationResultEvent;
   import mx.filters.BaseFilter;
   import mx.filters.IBitmapFilter;
   import mx.geom.RoundedRectangle;
   import mx.geom.Transform;
   import mx.geom.TransformOffsets;
   import mx.graphics.shaderClasses.ColorBurnShader;
   import mx.graphics.shaderClasses.ColorDodgeShader;
   import mx.graphics.shaderClasses.ColorShader;
   import mx.graphics.shaderClasses.ExclusionShader;
   import mx.graphics.shaderClasses.HueShader;
   import mx.graphics.shaderClasses.LuminosityShader;
   import mx.graphics.shaderClasses.SaturationShader;
   import mx.graphics.shaderClasses.SoftLightShader;
   import mx.managers.CursorManager;
   import mx.managers.ICursorManager;
   import mx.managers.IFocusManager;
   import mx.managers.IFocusManagerComponent;
   import mx.managers.IFocusManagerContainer;
   import mx.managers.ILayoutManagerClient;
   import mx.managers.ISystemManager;
   import mx.managers.IToolTipManagerClient;
   import mx.managers.SystemManager;
   import mx.managers.SystemManagerGlobals;
   import mx.managers.ToolTipManager;
   import mx.resources.IResourceManager;
   import mx.resources.ResourceManager;
   import mx.states.State;
   import mx.states.Transition;
   import mx.styles.CSSStyleDeclaration;
   import mx.styles.IAdvancedStyleClient;
   import mx.styles.ISimpleStyleClient;
   import mx.styles.IStyleClient;
   import mx.styles.IStyleManager2;
   import mx.styles.StyleManager;
   import mx.styles.StyleProtoChain;
   import mx.utils.ColorUtil;
   import mx.utils.GraphicsUtil;
   import mx.utils.MatrixUtil;
   import mx.utils.NameUtil;
   import mx.utils.StringUtil;
   import mx.validators.IValidatorListener;
   import mx.validators.ValidationResult;
   
   use namespace mx_internal;
   
   public class UIComponent extends FlexSprite implements IAutomationObject, IChildList, IConstraintClient, IDeferredInstantiationUIComponent, IFlexDisplayObject, IFlexModule, IInvalidating, ILayoutManagerClient, IPropertyChangeNotifier, IRepeaterClient, IStateClient, IAdvancedStyleClient, IToolTipManagerClient, IUIComponent, IValidatorListener, IVisualElement
   {
      
      mx_internal static var createAccessibilityImplementation:Function;
      
      private static var noEmbeddedFonts:Boolean;
      
      private static var _embeddedFontRegistry:IEmbeddedFontRegistry;
      
      private static var compositeEffectType:Class;
      
      mx_internal static var dispatchEventHook:Function;
      
      private static var xformPt:Point;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const DEFAULT_MEASURED_WIDTH:Number = 160;
      
      public static const DEFAULT_MEASURED_MIN_WIDTH:Number = 40;
      
      public static const DEFAULT_MEASURED_HEIGHT:Number = 22;
      
      public static const DEFAULT_MEASURED_MIN_HEIGHT:Number = 22;
      
      public static const DEFAULT_MAX_WIDTH:Number = 10000;
      
      public static const DEFAULT_MAX_HEIGHT:Number = 10000;
      
      private static var compositeEffectLoaded:Boolean = false;
      
      private static var fakeMouseX:QName = new QName(mx_internal,"_mouseX");
      
      private static var fakeMouseY:QName = new QName(mx_internal,"_mouseY");
      
      private var deferredSetStyles:Object;
      
      private var listeningForRender:Boolean = false;
      
      private var methodQueue:Array = [];
      
      private var hasFocusRect:Boolean = false;
      
      private var transitionFromState:String;
      
      private var transitionToState:String;
      
      private var _initialized:Boolean = false;
      
      private var _processedDescriptors:Boolean = false;
      
      private var _updateCompletePendingFlag:Boolean = false;
      
      mx_internal var invalidatePropertiesFlag:Boolean = false;
      
      mx_internal var invalidateSizeFlag:Boolean = false;
      
      mx_internal var invalidateDisplayListFlag:Boolean = false;
      
      mx_internal var setActualSizeCalled:Boolean = false;
      
      private var oldX:Number = 0;
      
      private var oldY:Number = 0;
      
      private var oldWidth:Number = 0;
      
      private var oldHeight:Number = 0;
      
      private var oldMinWidth:Number;
      
      private var oldMinHeight:Number;
      
      private var oldExplicitWidth:Number;
      
      private var oldExplicitHeight:Number;
      
      private var oldScaleX:Number = 1;
      
      private var oldScaleY:Number = 1;
      
      private var hasFontContextBeenSaved:Boolean = false;
      
      private var oldEmbeddedFontContext:IFlexModuleFactory = null;
      
      mx_internal var _layoutFeatures:AdvancedLayoutFeatures;
      
      private var _transform:flash.geom.Transform;
      
      private var cachedTextFormat:UITextFormat;
      
      mx_internal var effectOverlay:UIComponent;
      
      mx_internal var effectOverlayColor:uint;
      
      mx_internal var effectOverlayReferenceCount:int = 0;
      
      mx_internal var saveBorderColor:Boolean = true;
      
      mx_internal var origBorderColor:Number;
      
      mx_internal var automaticRadioButtonGroups:Object;
      
      private var _usingBridge:int = -1;
      
      mx_internal var _owner:DisplayObjectContainer;
      
      mx_internal var _parent:DisplayObjectContainer;
      
      mx_internal var _width:Number;
      
      mx_internal var _height:Number;
      
      private var _scaleX:Number = 1;
      
      private var _scaleY:Number = 1;
      
      private var _visible:Boolean = true;
      
      private var _alpha:Number = 1;
      
      private var _blendMode:String = "normal";
      
      private var blendShaderChanged:Boolean;
      
      private var blendModeChanged:Boolean;
      
      private var _enabled:Boolean = false;
      
      private var _filters:Array;
      
      private var _designLayer:DesignLayer;
      
      private var _tweeningProperties:Array;
      
      private var _focusManager:IFocusManager;
      
      private var _resourceManager:IResourceManager = ResourceManager.getInstance();
      
      private var _systemManager:ISystemManager;
      
      private var _systemManagerDirty:Boolean = false;
      
      private var _nestLevel:int = 0;
      
      mx_internal var _descriptor:UIComponentDescriptor;
      
      mx_internal var _document:Object;
      
      mx_internal var _documentDescriptor:UIComponentDescriptor;
      
      private var _id:String;
      
      private var _moduleFactory:IFlexModuleFactory;
      
      private var _inheritingStyles:Object = StyleProtoChain.STYLE_UNINITIALIZED;
      
      private var _nonInheritingStyles:Object = StyleProtoChain.STYLE_UNINITIALIZED;
      
      private var _styleDeclaration:CSSStyleDeclaration;
      
      private var _cachePolicy:String = "auto";
      
      private var cacheAsBitmapCount:int = 0;
      
      private var _focusPane:Sprite;
      
      private var _focusEnabled:Boolean = true;
      
      private var _hasFocusableChildren:Boolean = false;
      
      private var _mouseFocusEnabled:Boolean = true;
      
      private var _tabFocusEnabled:Boolean = true;
      
      private var _measuredMinWidth:Number = 0;
      
      private var _measuredMinHeight:Number = 0;
      
      private var _measuredWidth:Number = 0;
      
      private var _measuredHeight:Number = 0;
      
      private var _percentWidth:Number;
      
      private var _percentHeight:Number;
      
      mx_internal var _explicitMinWidth:Number;
      
      mx_internal var _explicitMinHeight:Number;
      
      mx_internal var _explicitMaxWidth:Number;
      
      mx_internal var _explicitMaxHeight:Number;
      
      private var _explicitWidth:Number;
      
      private var _explicitHeight:Number;
      
      private var _hasComplexLayoutMatrix:Boolean = false;
      
      private var _includeInLayout:Boolean = true;
      
      private var _instanceIndices:Array;
      
      private var _repeaters:Array;
      
      private var _repeaterIndices:Array;
      
      private var _currentState:String;
      
      private var requestedCurrentState:String;
      
      private var playStateTransition:Boolean = true;
      
      private var _currentStateChanged:Boolean;
      
      private var _currentStateDeferred:String;
      
      private var _states:Array = [];
      
      private var _currentTransition:Transition;
      
      private var _transitions:Array = [];
      
      private var _flexContextMenu:IFlexContextMenu;
      
      private var _styleName:Object;
      
      mx_internal var _toolTip:String;
      
      private var _uid:String;
      
      private var _isPopUp:Boolean;
      
      private var _automationDelegate:IAutomationObject;
      
      private var _automationName:String = null;
      
      private var _showInAutomationHierarchy:Boolean = true;
      
      mx_internal var _errorString:String = "";
      
      private var errorArray:Array;
      
      private var errorObjectArray:Array;
      
      private var errorStringChanged:Boolean = false;
      
      private var _validationSubField:String;
      
      private var lastUnscaledWidth:Number;
      
      private var lastUnscaledHeight:Number;
      
      mx_internal var _effectsStarted:Array = [];
      
      mx_internal var _affectedProperties:Object = {};
      
      private var _isEffectStarted:Boolean = false;
      
      private var preventDrawFocus:Boolean = false;
      
      private var _endingEffectInstances:Array = [];
      
      private var _maintainProjectionCenter:Boolean = false;
      
      public function UIComponent()
      {
         super();
         focusRect = false;
         tabEnabled = this is IFocusManagerComponent;
         this.tabFocusEnabled = this is IFocusManagerComponent;
         this.enabled = true;
         this.mx_internal::$visible = false;
         addEventListener(Event.ADDED,this.addedHandler);
         addEventListener(Event.REMOVED,this.removedHandler);
         if(this is IFocusManagerComponent)
         {
            addEventListener(FocusEvent.FOCUS_IN,this.focusInHandler);
            addEventListener(FocusEvent.FOCUS_OUT,this.focusOutHandler);
            addEventListener(KeyboardEvent.KEY_DOWN,this.keyDownHandler);
            addEventListener(KeyboardEvent.KEY_UP,this.keyUpHandler);
         }
         this.resourcesChanged();
         this.resourceManager.addEventListener(Event.CHANGE,this.resourceManager_changeHandler,false,0,true);
         this.mx_internal::_width = super.width;
         this.mx_internal::_height = super.height;
      }
      
      mx_internal static function get embeddedFontRegistry() : IEmbeddedFontRegistry
      {
         if(!_embeddedFontRegistry && !noEmbeddedFonts)
         {
            try
            {
               _embeddedFontRegistry = IEmbeddedFontRegistry(Singleton.getInstance("mx.core::IEmbeddedFontRegistry"));
            }
            catch(e:Error)
            {
               noEmbeddedFonts = true;
            }
         }
         return _embeddedFontRegistry;
      }
      
      public static function suspendBackgroundProcessing() : void
      {
         ++UIComponentGlobals.mx_internal::callLaterSuspendCount;
      }
      
      public static function resumeBackgroundProcessing() : void
      {
         var _loc1_:ISystemManager = null;
         if(UIComponentGlobals.mx_internal::callLaterSuspendCount > 0)
         {
            --UIComponentGlobals.mx_internal::callLaterSuspendCount;
            if(UIComponentGlobals.mx_internal::callLaterSuspendCount == 0)
            {
               _loc1_ = SystemManagerGlobals.topLevelSystemManagers[0];
               if(Boolean(_loc1_) && Boolean(_loc1_.stage))
               {
                  _loc1_.stage.invalidate();
               }
            }
         }
      }
      
      public function get initialized() : Boolean
      {
         return this._initialized;
      }
      
      public function set initialized(param1:Boolean) : void
      {
         this._initialized = param1;
         if(param1)
         {
            this.setVisible(this._visible,true);
            this.dispatchEvent(new FlexEvent(FlexEvent.CREATION_COMPLETE));
         }
      }
      
      public function get processedDescriptors() : Boolean
      {
         return this._processedDescriptors;
      }
      
      public function set processedDescriptors(param1:Boolean) : void
      {
         this._processedDescriptors = param1;
         if(param1)
         {
            this.dispatchEvent(new FlexEvent(FlexEvent.INITIALIZE));
         }
      }
      
      public function get updateCompletePendingFlag() : Boolean
      {
         return this._updateCompletePendingFlag;
      }
      
      public function set updateCompletePendingFlag(param1:Boolean) : void
      {
         this._updateCompletePendingFlag = param1;
      }
      
      public function get accessibilityEnabled() : Boolean
      {
         return accessibilityProperties ? !accessibilityProperties.silent : true;
      }
      
      public function set accessibilityEnabled(param1:Boolean) : void
      {
         if(!Capabilities.hasAccessibility)
         {
            return;
         }
         if(!accessibilityProperties)
         {
            accessibilityProperties = new AccessibilityProperties();
         }
         accessibilityProperties.silent = !param1;
         Accessibility.updateProperties();
      }
      
      public function get accessibilityName() : String
      {
         return accessibilityProperties ? accessibilityProperties.name : "";
      }
      
      public function set accessibilityName(param1:String) : void
      {
         if(!Capabilities.hasAccessibility)
         {
            return;
         }
         if(!accessibilityProperties)
         {
            accessibilityProperties = new AccessibilityProperties();
         }
         accessibilityProperties.name = param1;
         Accessibility.updateProperties();
      }
      
      public function get accessibilityDescription() : String
      {
         return accessibilityProperties ? accessibilityProperties.description : "";
      }
      
      public function set accessibilityDescription(param1:String) : void
      {
         if(!Capabilities.hasAccessibility)
         {
            return;
         }
         if(!accessibilityProperties)
         {
            accessibilityProperties = new AccessibilityProperties();
         }
         accessibilityProperties.description = param1;
         Accessibility.updateProperties();
      }
      
      public function get accessibilityShortcut() : String
      {
         return accessibilityProperties ? accessibilityProperties.shortcut : "";
      }
      
      public function set accessibilityShortcut(param1:String) : void
      {
         if(!Capabilities.hasAccessibility)
         {
            return;
         }
         if(!accessibilityProperties)
         {
            accessibilityProperties = new AccessibilityProperties();
         }
         accessibilityProperties.shortcut = param1;
         Accessibility.updateProperties();
      }
      
      private function get usingBridge() : Boolean
      {
         if(this._usingBridge == 0)
         {
            return false;
         }
         if(this._usingBridge == 1)
         {
            return true;
         }
         if(!this._systemManager)
         {
            return false;
         }
         var _loc1_:Object = this._systemManager.getImplementation("mx.managers.IMarshallPlanSystemManager");
         if(!_loc1_)
         {
            this._usingBridge = 0;
            return false;
         }
         if(_loc1_.useSWFBridge())
         {
            this._usingBridge = 1;
            return true;
         }
         this._usingBridge = 0;
         return false;
      }
      
      public function get owner() : DisplayObjectContainer
      {
         return this.mx_internal::_owner ? this.mx_internal::_owner : this.parent;
      }
      
      public function set owner(param1:DisplayObjectContainer) : void
      {
         this.mx_internal::_owner = param1;
      }
      
      override public function get parent() : DisplayObjectContainer
      {
         try
         {
            return this.mx_internal::_parent ? this.mx_internal::_parent : super.parent;
         }
         catch(e:SecurityError)
         {
         }
         return null;
      }
      
      [Bindable("xChanged")]
      override public function get x() : Number
      {
         return this.mx_internal::_layoutFeatures == null ? super.x : this.mx_internal::_layoutFeatures.layoutX;
      }
      
      override public function set x(param1:Number) : void
      {
         if(this.x == param1)
         {
            return;
         }
         if(this.mx_internal::_layoutFeatures == null)
         {
            super.x = param1;
         }
         else
         {
            this.mx_internal::_layoutFeatures.layoutX = param1;
            this.invalidateTransform();
         }
         this.invalidateProperties();
         if(Boolean(this.parent) && this.parent is UIComponent)
         {
            UIComponent(this.parent).mx_internal::childXYChanged();
         }
         if(hasEventListener("xChanged"))
         {
            this.dispatchEvent(new Event("xChanged"));
         }
      }
      
      [Bindable("zChanged")]
      override public function get z() : Number
      {
         return this.mx_internal::_layoutFeatures == null ? super.z : this.mx_internal::_layoutFeatures.layoutZ;
      }
      
      override public function set z(param1:Number) : void
      {
         if(this.z == param1)
         {
            return;
         }
         var _loc2_:Boolean = this.is3D;
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         this.mx_internal::_layoutFeatures.layoutZ = param1;
         this.invalidateTransform();
         this.invalidateProperties();
         if(_loc2_ != this.is3D)
         {
            this.validateMatrix();
         }
         if(hasEventListener("zChanged"))
         {
            this.dispatchEvent(new Event("zChanged"));
         }
      }
      
      public function get transformX() : Number
      {
         return this.mx_internal::_layoutFeatures == null ? 0 : this.mx_internal::_layoutFeatures.transformX;
      }
      
      public function set transformX(param1:Number) : void
      {
         if(this.transformX == param1)
         {
            return;
         }
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         this.mx_internal::_layoutFeatures.transformX = param1;
         this.invalidateTransform();
         this.invalidateProperties();
         this.invalidateParentSizeAndDisplayList();
      }
      
      public function get transformY() : Number
      {
         return this.mx_internal::_layoutFeatures == null ? 0 : this.mx_internal::_layoutFeatures.transformY;
      }
      
      public function set transformY(param1:Number) : void
      {
         if(this.transformY == param1)
         {
            return;
         }
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         this.mx_internal::_layoutFeatures.transformY = param1;
         this.invalidateTransform();
         this.invalidateProperties();
         this.invalidateParentSizeAndDisplayList();
      }
      
      public function get transformZ() : Number
      {
         return this.mx_internal::_layoutFeatures == null ? 0 : this.mx_internal::_layoutFeatures.transformZ;
      }
      
      public function set transformZ(param1:Number) : void
      {
         if(this.transformZ == param1)
         {
            return;
         }
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         this.mx_internal::_layoutFeatures.transformZ = param1;
         this.invalidateTransform();
         this.invalidateProperties();
         this.invalidateParentSizeAndDisplayList();
      }
      
      override public function get rotation() : Number
      {
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            return super.rotation;
         }
         return this.mx_internal::_layoutFeatures == null ? super.rotation : this.mx_internal::_layoutFeatures.layoutRotationZ;
      }
      
      override public function set rotation(param1:Number) : void
      {
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            super.rotation = param1;
            return;
         }
         if(this.rotation == param1)
         {
            return;
         }
         this._hasComplexLayoutMatrix = true;
         if(this.mx_internal::_layoutFeatures == null)
         {
            super.rotation = MatrixUtil.clampRotation(param1);
         }
         else
         {
            this.mx_internal::_layoutFeatures.layoutRotationZ = param1;
         }
         this.invalidateTransform();
         this.invalidateProperties();
         this.invalidateParentSizeAndDisplayList();
      }
      
      override public function get rotationZ() : Number
      {
         return this.rotation;
      }
      
      override public function set rotationZ(param1:Number) : void
      {
         this.rotation = param1;
      }
      
      override public function get rotationX() : Number
      {
         return this.mx_internal::_layoutFeatures == null ? super.rotationX : this.mx_internal::_layoutFeatures.layoutRotationX;
      }
      
      override public function set rotationX(param1:Number) : void
      {
         if(this.rotationX == param1)
         {
            return;
         }
         var _loc2_:Boolean = this.is3D;
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         this.mx_internal::_layoutFeatures.layoutRotationX = param1;
         this.invalidateTransform();
         this.invalidateProperties();
         this.invalidateParentSizeAndDisplayList();
         if(_loc2_ != this.is3D)
         {
            this.validateMatrix();
         }
      }
      
      override public function get rotationY() : Number
      {
         return this.mx_internal::_layoutFeatures == null ? super.rotationY : this.mx_internal::_layoutFeatures.layoutRotationY;
      }
      
      override public function set rotationY(param1:Number) : void
      {
         if(this.rotationY == param1)
         {
            return;
         }
         var _loc2_:Boolean = this.is3D;
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         this.mx_internal::_layoutFeatures.layoutRotationY = param1;
         this.invalidateTransform();
         this.invalidateProperties();
         this.invalidateParentSizeAndDisplayList();
         if(_loc2_ != this.is3D)
         {
            this.validateMatrix();
         }
      }
      
      [Bindable("yChanged")]
      override public function get y() : Number
      {
         return this.mx_internal::_layoutFeatures == null ? super.y : this.mx_internal::_layoutFeatures.layoutY;
      }
      
      override public function set y(param1:Number) : void
      {
         if(this.y == param1)
         {
            return;
         }
         if(this.mx_internal::_layoutFeatures == null)
         {
            super.y = param1;
         }
         else
         {
            this.mx_internal::_layoutFeatures.layoutY = param1;
            this.invalidateTransform();
         }
         this.invalidateProperties();
         if(Boolean(this.parent) && this.parent is UIComponent)
         {
            UIComponent(this.parent).mx_internal::childXYChanged();
         }
         if(hasEventListener("yChanged"))
         {
            this.dispatchEvent(new Event("yChanged"));
         }
      }
      
      [Bindable("widthChanged")]
      override public function get width() : Number
      {
         return this.mx_internal::_width;
      }
      
      override public function set width(param1:Number) : void
      {
         if(this.explicitWidth != param1)
         {
            this.explicitWidth = param1;
            this.invalidateSize();
         }
         if(this.mx_internal::_width != param1)
         {
            this.invalidateProperties();
            this.invalidateDisplayList();
            this.invalidateParentSizeAndDisplayList();
            this.mx_internal::_width = param1;
            if(hasEventListener("widthChanged"))
            {
               this.dispatchEvent(new Event("widthChanged"));
            }
         }
      }
      
      [Bindable("heightChanged")]
      override public function get height() : Number
      {
         return this.mx_internal::_height;
      }
      
      override public function set height(param1:Number) : void
      {
         if(this.explicitHeight != param1)
         {
            this.explicitHeight = param1;
            this.invalidateSize();
         }
         if(this.mx_internal::_height != param1)
         {
            this.invalidateProperties();
            this.invalidateDisplayList();
            this.invalidateParentSizeAndDisplayList();
            this.mx_internal::_height = param1;
            if(hasEventListener("heightChanged"))
            {
               this.dispatchEvent(new Event("heightChanged"));
            }
         }
      }
      
      [Bindable("scaleXChanged")]
      override public function get scaleX() : Number
      {
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            return this._scaleX;
         }
         return this.mx_internal::_layoutFeatures == null ? super.scaleX : this.mx_internal::_layoutFeatures.layoutScaleX;
      }
      
      override public function set scaleX(param1:Number) : void
      {
         var _loc2_:Number = NaN;
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            if(this._scaleX == param1)
            {
               return;
            }
            this._scaleX = param1;
            this.invalidateProperties();
            this.invalidateSize();
         }
         else
         {
            _loc2_ = this.mx_internal::_layoutFeatures == null ? this.scaleX : this.mx_internal::_layoutFeatures.layoutScaleX;
            if(_loc2_ == param1)
            {
               return;
            }
            this._hasComplexLayoutMatrix = true;
            if(this.mx_internal::_layoutFeatures == null)
            {
               super.scaleX = param1;
            }
            else
            {
               this.mx_internal::_layoutFeatures.layoutScaleX = param1;
            }
            this.invalidateTransform();
            this.invalidateProperties();
            this.invalidateParentSizeAndDisplayList();
         }
         this.dispatchEvent(new Event("scaleXChanged"));
      }
      
      [Bindable("scaleYChanged")]
      override public function get scaleY() : Number
      {
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            return this._scaleY;
         }
         return this.mx_internal::_layoutFeatures == null ? super.scaleY : this.mx_internal::_layoutFeatures.layoutScaleY;
      }
      
      override public function set scaleY(param1:Number) : void
      {
         var _loc2_:Number = NaN;
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            if(this._scaleY == param1)
            {
               return;
            }
            this._scaleY = param1;
            this.invalidateProperties();
            this.invalidateSize();
         }
         else
         {
            _loc2_ = this.mx_internal::_layoutFeatures == null ? this.scaleY : this.mx_internal::_layoutFeatures.layoutScaleY;
            if(_loc2_ == param1)
            {
               return;
            }
            this._hasComplexLayoutMatrix = true;
            if(this.mx_internal::_layoutFeatures == null)
            {
               super.scaleY = param1;
            }
            else
            {
               this.mx_internal::_layoutFeatures.layoutScaleY = param1;
            }
            this.invalidateTransform();
            this.invalidateProperties();
            this.invalidateParentSizeAndDisplayList();
         }
         this.dispatchEvent(new Event("scaleYChanged"));
      }
      
      [Bindable("scaleZChanged")]
      override public function get scaleZ() : Number
      {
         return this.mx_internal::_layoutFeatures == null ? super.scaleZ : this.mx_internal::_layoutFeatures.layoutScaleZ;
      }
      
      override public function set scaleZ(param1:Number) : void
      {
         if(this.scaleZ == param1)
         {
            return;
         }
         var _loc2_:Boolean = this.is3D;
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         this._hasComplexLayoutMatrix = true;
         this.mx_internal::_layoutFeatures.layoutScaleZ = param1;
         this.invalidateTransform();
         this.invalidateProperties();
         this.invalidateParentSizeAndDisplayList();
         if(_loc2_ != this.is3D)
         {
            this.validateMatrix();
         }
         this.dispatchEvent(new Event("scaleZChanged"));
      }
      
      final mx_internal function get $scaleX() : Number
      {
         return super.scaleX;
      }
      
      final mx_internal function set $scaleX(param1:Number) : void
      {
         super.scaleX = param1;
      }
      
      final mx_internal function get $scaleY() : Number
      {
         return super.scaleY;
      }
      
      final mx_internal function set $scaleY(param1:Number) : void
      {
         super.scaleY = param1;
      }
      
      [Bindable("show")]
      [Bindable("hide")]
      override public function get visible() : Boolean
      {
         return this._visible;
      }
      
      override public function set visible(param1:Boolean) : void
      {
         this.setVisible(param1);
      }
      
      public function setVisible(param1:Boolean, param2:Boolean = false) : void
      {
         this._visible = param1;
         if(!this.initialized)
         {
            return;
         }
         if(Boolean(this.designLayer) && !this.designLayer.effectiveVisibility)
         {
            param1 = false;
         }
         if(this.mx_internal::$visible == param1)
         {
            return;
         }
         this.mx_internal::$visible = param1;
         if(!param2)
         {
            this.dispatchEvent(new FlexEvent(param1 ? FlexEvent.SHOW : FlexEvent.HIDE));
         }
      }
      
      [Bindable("alphaChanged")]
      override public function get alpha() : Number
      {
         return int(this._alpha * 256) / 256;
      }
      
      override public function set alpha(param1:Number) : void
      {
         if(this._alpha != param1)
         {
            this._alpha = param1;
            if(this.designLayer)
            {
               param1 *= this.designLayer.effectiveAlpha;
            }
            this.mx_internal::$alpha = param1;
            this.dispatchEvent(new Event("alphaChanged"));
         }
      }
      
      override public function get blendMode() : String
      {
         return this._blendMode;
      }
      
      override public function set blendMode(param1:String) : void
      {
         if(this._blendMode != param1)
         {
            this._blendMode = param1;
            this.blendModeChanged = true;
            if(param1 == "colordodge" || param1 == "colorburn" || param1 == "exclusion" || param1 == "softlight" || param1 == "hue" || param1 == "saturation" || param1 == "color" || param1 == "luminosity")
            {
               this.blendShaderChanged = true;
            }
            this.invalidateProperties();
         }
      }
      
      override public function get doubleClickEnabled() : Boolean
      {
         return super.doubleClickEnabled;
      }
      
      override public function set doubleClickEnabled(param1:Boolean) : void
      {
         var _loc2_:IChildList = null;
         var _loc4_:InteractiveObject = null;
         super.doubleClickEnabled = param1;
         if(this is IRawChildrenContainer)
         {
            _loc2_ = IRawChildrenContainer(this).rawChildren;
         }
         else
         {
            _loc2_ = IChildList(this);
         }
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_.numChildren)
         {
            _loc4_ = _loc2_.getChildAt(_loc3_) as InteractiveObject;
            if(_loc4_)
            {
               _loc4_.doubleClickEnabled = param1;
            }
            _loc3_++;
         }
      }
      
      [Bindable("enabledChanged")]
      public function get enabled() : Boolean
      {
         return this._enabled;
      }
      
      public function set enabled(param1:Boolean) : void
      {
         this._enabled = param1;
         this.cachedTextFormat = null;
         this.invalidateDisplayList();
         this.dispatchEvent(new Event("enabledChanged"));
      }
      
      override public function set cacheAsBitmap(param1:Boolean) : void
      {
         super.cacheAsBitmap = param1;
         this.cacheAsBitmapCount = param1 ? 1 : 0;
      }
      
      override public function get filters() : Array
      {
         return this._filters ? this._filters : super.filters;
      }
      
      override public function set filters(param1:Array) : void
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         var _loc4_:IEventDispatcher = null;
         if(this._filters)
         {
            _loc2_ = int(this._filters.length);
            _loc3_ = 0;
            while(_loc3_ < _loc2_)
            {
               _loc4_ = this._filters[_loc3_] as IEventDispatcher;
               if(_loc4_)
               {
                  _loc4_.removeEventListener(BaseFilter.CHANGE,this.filterChangeHandler);
               }
               _loc3_++;
            }
         }
         this._filters = param1;
         var _loc5_:Array = [];
         if(this._filters)
         {
            _loc2_ = int(this._filters.length);
            _loc3_ = 0;
            while(_loc3_ < _loc2_)
            {
               if(this._filters[_loc3_] is IBitmapFilter)
               {
                  _loc4_ = this._filters[_loc3_] as IEventDispatcher;
                  if(_loc4_)
                  {
                     _loc4_.addEventListener(BaseFilter.CHANGE,this.filterChangeHandler);
                  }
                  _loc5_.push(IBitmapFilter(this._filters[_loc3_]).clone());
               }
               else
               {
                  _loc5_.push(this._filters[_loc3_]);
               }
               _loc3_++;
            }
         }
         super.filters = _loc5_;
      }
      
      public function get designLayer() : DesignLayer
      {
         return this._designLayer;
      }
      
      public function set designLayer(param1:DesignLayer) : void
      {
         if(this._designLayer)
         {
            this._designLayer.removeEventListener("layerPropertyChange",this.layer_PropertyChange,false);
         }
         this._designLayer = param1;
         if(this._designLayer)
         {
            this._designLayer.addEventListener("layerPropertyChange",this.layer_PropertyChange,false,0,true);
         }
         this.mx_internal::$alpha = this._designLayer ? this._alpha * this._designLayer.effectiveAlpha : this._alpha;
         this.mx_internal::$visible = this.designLayer ? this._visible && this._designLayer.effectiveVisibility : this._visible;
      }
      
      final mx_internal function get $alpha() : Number
      {
         return super.alpha;
      }
      
      final mx_internal function set $alpha(param1:Number) : void
      {
         super.alpha = param1;
      }
      
      final mx_internal function get $blendMode() : String
      {
         return super.blendMode;
      }
      
      final mx_internal function set $blendMode(param1:String) : void
      {
         super.blendMode = param1;
      }
      
      final mx_internal function set $blendShader(param1:Shader) : void
      {
         super.blendShader = param1;
      }
      
      final mx_internal function get $parent() : DisplayObjectContainer
      {
         return super.parent;
      }
      
      final mx_internal function get $x() : Number
      {
         return super.x;
      }
      
      final mx_internal function set $x(param1:Number) : void
      {
         super.x = param1;
      }
      
      final mx_internal function get $y() : Number
      {
         return super.y;
      }
      
      final mx_internal function set $y(param1:Number) : void
      {
         super.y = param1;
      }
      
      final mx_internal function get $width() : Number
      {
         return super.width;
      }
      
      final mx_internal function set $width(param1:Number) : void
      {
         super.width = param1;
      }
      
      final mx_internal function get $height() : Number
      {
         return super.height;
      }
      
      final mx_internal function set $height(param1:Number) : void
      {
         super.height = param1;
      }
      
      final mx_internal function get $visible() : Boolean
      {
         return super.visible;
      }
      
      final mx_internal function set $visible(param1:Boolean) : void
      {
         super.visible = param1;
      }
      
      public function get contentMouseX() : Number
      {
         return this.mouseX;
      }
      
      public function get contentMouseY() : Number
      {
         return this.mouseY;
      }
      
      public function get tweeningProperties() : Array
      {
         return this._tweeningProperties;
      }
      
      public function set tweeningProperties(param1:Array) : void
      {
         this._tweeningProperties = param1;
      }
      
      public function get cursorManager() : ICursorManager
      {
         var _loc2_:ICursorManager = null;
         var _loc1_:DisplayObject = this.parent;
         while(_loc1_)
         {
            if(_loc1_ is IUIComponent && "cursorManager" in _loc1_)
            {
               return _loc1_["cursorManager"];
            }
            _loc1_ = _loc1_.parent;
         }
         return CursorManager.getInstance();
      }
      
      public function get focusManager() : IFocusManager
      {
         if(this._focusManager)
         {
            return this._focusManager;
         }
         var _loc1_:DisplayObject = this.parent;
         while(_loc1_)
         {
            if(_loc1_ is IFocusManagerContainer)
            {
               return IFocusManagerContainer(_loc1_).focusManager;
            }
            _loc1_ = _loc1_.parent;
         }
         return null;
      }
      
      public function set focusManager(param1:IFocusManager) : void
      {
         this._focusManager = param1;
         this.dispatchEvent(new FlexEvent(FlexEvent.ADD_FOCUS_MANAGER));
      }
      
      [Bindable("unused")]
      protected function get resourceManager() : IResourceManager
      {
         return this._resourceManager;
      }
      
      public function get styleManager() : IStyleManager2
      {
         return StyleManager.getStyleManager(this.moduleFactory);
      }
      
      public function get systemManager() : ISystemManager
      {
         var _loc1_:DisplayObject = null;
         var _loc2_:DisplayObjectContainer = null;
         var _loc3_:IUIComponent = null;
         if(!this._systemManager || this._systemManagerDirty)
         {
            _loc1_ = root;
            if(!(Boolean(this._systemManager) && this._systemManager.isProxy))
            {
               if(Boolean(_loc1_) && !(_loc1_ is Stage))
               {
                  this._systemManager = _loc1_ as ISystemManager;
               }
               else if(_loc1_)
               {
                  this._systemManager = Stage(_loc1_).getChildAt(0) as ISystemManager;
               }
               else
               {
                  _loc2_ = this.parent;
                  while(_loc2_)
                  {
                     _loc3_ = _loc2_ as IUIComponent;
                     if(_loc3_)
                     {
                        this._systemManager = _loc3_.systemManager;
                        break;
                     }
                     if(_loc2_ is ISystemManager)
                     {
                        this._systemManager = _loc2_ as ISystemManager;
                        break;
                     }
                     _loc2_ = _loc2_.parent;
                  }
               }
            }
            this._systemManagerDirty = false;
         }
         return this._systemManager;
      }
      
      public function set systemManager(param1:ISystemManager) : void
      {
         this._systemManager = param1;
         this._systemManagerDirty = false;
      }
      
      mx_internal function getNonNullSystemManager() : ISystemManager
      {
         var _loc1_:ISystemManager = this.systemManager;
         if(!_loc1_)
         {
            _loc1_ = ISystemManager(SystemManager.getSWFRoot(this));
         }
         if(!_loc1_)
         {
            return SystemManagerGlobals.topLevelSystemManagers[0];
         }
         return _loc1_;
      }
      
      protected function invalidateSystemManager() : void
      {
         var _loc4_:UIComponent = null;
         var _loc1_:IChildList = this is IRawChildrenContainer ? IRawChildrenContainer(this).rawChildren : IChildList(this);
         var _loc2_:int = _loc1_.numChildren;
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            _loc4_ = _loc1_.getChildAt(_loc3_) as UIComponent;
            if(_loc4_)
            {
               _loc4_.invalidateSystemManager();
            }
            _loc3_++;
         }
         this._systemManagerDirty = true;
      }
      
      public function get nestLevel() : int
      {
         return this._nestLevel;
      }
      
      public function set nestLevel(param1:int) : void
      {
         var _loc2_:IChildList = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:ILayoutManagerClient = null;
         var _loc6_:IUITextField = null;
         if(param1 > 1 && this._nestLevel != param1)
         {
            this._nestLevel = param1;
            this.mx_internal::updateCallbacks();
            _loc2_ = this is IRawChildrenContainer ? IRawChildrenContainer(this).rawChildren : IChildList(this);
            _loc3_ = _loc2_.numChildren;
            _loc4_ = 0;
            while(_loc4_ < _loc3_)
            {
               _loc5_ = _loc2_.getChildAt(_loc4_) as ILayoutManagerClient;
               if(_loc5_)
               {
                  _loc5_.nestLevel = param1 + 1;
               }
               else
               {
                  _loc6_ = _loc2_.getChildAt(_loc4_) as IUITextField;
                  if(_loc6_)
                  {
                     _loc6_.nestLevel = param1 + 1;
                  }
               }
               _loc4_++;
            }
         }
      }
      
      public function get descriptor() : UIComponentDescriptor
      {
         return this.mx_internal::_descriptor;
      }
      
      public function set descriptor(param1:UIComponentDescriptor) : void
      {
         this.mx_internal::_descriptor = param1;
      }
      
      public function get document() : Object
      {
         return this.mx_internal::_document;
      }
      
      public function set document(param1:Object) : void
      {
         var _loc4_:IUIComponent = null;
         var _loc2_:int = numChildren;
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            _loc4_ = getChildAt(_loc3_) as IUIComponent;
            if(_loc4_)
            {
               if(_loc4_.document == this.mx_internal::_document || _loc4_.document == FlexGlobals.topLevelApplication)
               {
                  _loc4_.document = param1;
               }
            }
            _loc3_++;
         }
         this.mx_internal::_document = param1;
      }
      
      mx_internal function get documentDescriptor() : UIComponentDescriptor
      {
         return this.mx_internal::_documentDescriptor;
      }
      
      public function get id() : String
      {
         return this._id;
      }
      
      public function set id(param1:String) : void
      {
         this._id = param1;
      }
      
      public function get isDocument() : Boolean
      {
         return this.document == this;
      }
      
      [Bindable("initialize")]
      public function get parentApplication() : Object
      {
         var _loc2_:UIComponent = null;
         var _loc1_:Object = this.systemManager.document;
         if(_loc1_ == this)
         {
            _loc2_ = _loc1_.systemManager.parent as UIComponent;
            _loc1_ = _loc2_ ? _loc2_.systemManager.document : null;
         }
         return _loc1_;
      }
      
      [Bindable("initialize")]
      public function get parentDocument() : Object
      {
         var _loc1_:IUIComponent = null;
         var _loc2_:ISystemManager = null;
         if(this.document == this)
         {
            _loc1_ = this.parent as IUIComponent;
            if(_loc1_)
            {
               return _loc1_.document;
            }
            _loc2_ = this.parent as ISystemManager;
            if(_loc2_)
            {
               return _loc2_.document;
            }
            return null;
         }
         return this.document;
      }
      
      public function get screen() : Rectangle
      {
         var _loc1_:ISystemManager = this.systemManager;
         return _loc1_ ? _loc1_.screen : null;
      }
      
      public function get moduleFactory() : IFlexModuleFactory
      {
         return this._moduleFactory;
      }
      
      public function set moduleFactory(param1:IFlexModuleFactory) : void
      {
         var _loc4_:IFlexModule = null;
         var _loc2_:int = numChildren;
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            _loc4_ = getChildAt(_loc3_) as IFlexModule;
            if(_loc4_)
            {
               if(_loc4_.moduleFactory == null || _loc4_.moduleFactory == this._moduleFactory)
               {
                  _loc4_.moduleFactory = param1;
               }
            }
            _loc3_++;
         }
         this._moduleFactory = param1;
         this.setDeferredStyles();
      }
      
      public function get inheritingStyles() : Object
      {
         return this._inheritingStyles;
      }
      
      public function set inheritingStyles(param1:Object) : void
      {
         this._inheritingStyles = param1;
      }
      
      public function get nonInheritingStyles() : Object
      {
         return this._nonInheritingStyles;
      }
      
      public function set nonInheritingStyles(param1:Object) : void
      {
         this._nonInheritingStyles = param1;
      }
      
      public function get styleDeclaration() : CSSStyleDeclaration
      {
         return this._styleDeclaration;
      }
      
      public function set styleDeclaration(param1:CSSStyleDeclaration) : void
      {
         this._styleDeclaration = param1;
      }
      
      public function get cachePolicy() : String
      {
         return this._cachePolicy;
      }
      
      public function set cachePolicy(param1:String) : void
      {
         if(this._cachePolicy != param1)
         {
            this._cachePolicy = param1;
            if(param1 == UIComponentCachePolicy.OFF)
            {
               this.cacheAsBitmap = false;
            }
            else if(param1 == UIComponentCachePolicy.ON)
            {
               this.cacheAsBitmap = true;
            }
            else
            {
               this.cacheAsBitmap = this.cacheAsBitmapCount > 0;
            }
         }
      }
      
      public function set cacheHeuristic(param1:Boolean) : void
      {
         if(this._cachePolicy == UIComponentCachePolicy.AUTO)
         {
            if(param1)
            {
               ++this.cacheAsBitmapCount;
            }
            else if(this.cacheAsBitmapCount != 0)
            {
               --this.cacheAsBitmapCount;
            }
            super.cacheAsBitmap = this.cacheAsBitmapCount != 0;
         }
      }
      
      public function get focusPane() : Sprite
      {
         return this._focusPane;
      }
      
      public function set focusPane(param1:Sprite) : void
      {
         if(param1)
         {
            this.addChild(param1);
            param1.x = 0;
            param1.y = 0;
            param1.scrollRect = null;
            this._focusPane = param1;
         }
         else
         {
            this.removeChild(this._focusPane);
            this._focusPane.mask = null;
            this._focusPane = null;
         }
      }
      
      public function get focusEnabled() : Boolean
      {
         return this._focusEnabled;
      }
      
      public function set focusEnabled(param1:Boolean) : void
      {
         this._focusEnabled = param1;
      }
      
      [Bindable("hasFocusableChildrenChange")]
      public function get hasFocusableChildren() : Boolean
      {
         return this._hasFocusableChildren;
      }
      
      public function set hasFocusableChildren(param1:Boolean) : void
      {
         if(param1 != this._hasFocusableChildren)
         {
            this._hasFocusableChildren = param1;
            this.dispatchEvent(new Event("hasFocusableChildrenChange"));
         }
      }
      
      public function get mouseFocusEnabled() : Boolean
      {
         return this._mouseFocusEnabled;
      }
      
      public function set mouseFocusEnabled(param1:Boolean) : void
      {
         this._mouseFocusEnabled = param1;
      }
      
      [Bindable("tabFocusEnabledChange")]
      public function get tabFocusEnabled() : Boolean
      {
         return this._tabFocusEnabled;
      }
      
      public function set tabFocusEnabled(param1:Boolean) : void
      {
         if(param1 != this._tabFocusEnabled)
         {
            this._tabFocusEnabled = param1;
            this.dispatchEvent(new Event("tabFocusEnabledChange"));
         }
      }
      
      public function get measuredMinWidth() : Number
      {
         return this._measuredMinWidth;
      }
      
      public function set measuredMinWidth(param1:Number) : void
      {
         this._measuredMinWidth = param1;
      }
      
      public function get measuredMinHeight() : Number
      {
         return this._measuredMinHeight;
      }
      
      public function set measuredMinHeight(param1:Number) : void
      {
         this._measuredMinHeight = param1;
      }
      
      public function get measuredWidth() : Number
      {
         return this._measuredWidth;
      }
      
      public function set measuredWidth(param1:Number) : void
      {
         this._measuredWidth = param1;
      }
      
      public function get measuredHeight() : Number
      {
         return this._measuredHeight;
      }
      
      public function set measuredHeight(param1:Number) : void
      {
         this._measuredHeight = param1;
      }
      
      [Bindable("resize")]
      public function get percentWidth() : Number
      {
         return this._percentWidth;
      }
      
      public function set percentWidth(param1:Number) : void
      {
         if(this._percentWidth == param1)
         {
            return;
         }
         if(!isNaN(param1))
         {
            this._explicitWidth = NaN;
         }
         this._percentWidth = param1;
         this.invalidateParentSizeAndDisplayList();
      }
      
      [Bindable("resize")]
      public function get percentHeight() : Number
      {
         return this._percentHeight;
      }
      
      public function set percentHeight(param1:Number) : void
      {
         if(this._percentHeight == param1)
         {
            return;
         }
         if(!isNaN(param1))
         {
            this._explicitHeight = NaN;
         }
         this._percentHeight = param1;
         this.invalidateParentSizeAndDisplayList();
      }
      
      [Bindable("explicitMinWidthChanged")]
      public function get minWidth() : Number
      {
         if(!isNaN(this.explicitMinWidth))
         {
            return this.explicitMinWidth;
         }
         return this.measuredMinWidth;
      }
      
      public function set minWidth(param1:Number) : void
      {
         if(this.explicitMinWidth == param1)
         {
            return;
         }
         this.explicitMinWidth = param1;
      }
      
      [Bindable("explicitMinHeightChanged")]
      public function get minHeight() : Number
      {
         if(!isNaN(this.explicitMinHeight))
         {
            return this.explicitMinHeight;
         }
         return this.measuredMinHeight;
      }
      
      public function set minHeight(param1:Number) : void
      {
         if(this.explicitMinHeight == param1)
         {
            return;
         }
         this.explicitMinHeight = param1;
      }
      
      [Bindable("explicitMaxWidthChanged")]
      public function get maxWidth() : Number
      {
         return !isNaN(this.explicitMaxWidth) ? this.explicitMaxWidth : DEFAULT_MAX_WIDTH;
      }
      
      public function set maxWidth(param1:Number) : void
      {
         if(this.explicitMaxWidth == param1)
         {
            return;
         }
         this.explicitMaxWidth = param1;
      }
      
      [Bindable("explicitMaxHeightChanged")]
      public function get maxHeight() : Number
      {
         return !isNaN(this.explicitMaxHeight) ? this.explicitMaxHeight : DEFAULT_MAX_HEIGHT;
      }
      
      public function set maxHeight(param1:Number) : void
      {
         if(this.explicitMaxHeight == param1)
         {
            return;
         }
         this.explicitMaxHeight = param1;
      }
      
      [Bindable("explicitMinWidthChanged")]
      public function get explicitMinWidth() : Number
      {
         return this.mx_internal::_explicitMinWidth;
      }
      
      public function set explicitMinWidth(param1:Number) : void
      {
         if(this.mx_internal::_explicitMinWidth == param1)
         {
            return;
         }
         this.mx_internal::_explicitMinWidth = param1;
         this.invalidateSize();
         this.invalidateParentSizeAndDisplayList();
         this.dispatchEvent(new Event("explicitMinWidthChanged"));
      }
      
      [Bindable("explictMinHeightChanged")]
      public function get explicitMinHeight() : Number
      {
         return this.mx_internal::_explicitMinHeight;
      }
      
      public function set explicitMinHeight(param1:Number) : void
      {
         if(this.mx_internal::_explicitMinHeight == param1)
         {
            return;
         }
         this.mx_internal::_explicitMinHeight = param1;
         this.invalidateSize();
         this.invalidateParentSizeAndDisplayList();
         this.dispatchEvent(new Event("explicitMinHeightChanged"));
      }
      
      [Bindable("explicitMaxWidthChanged")]
      public function get explicitMaxWidth() : Number
      {
         return this.mx_internal::_explicitMaxWidth;
      }
      
      public function set explicitMaxWidth(param1:Number) : void
      {
         if(this.mx_internal::_explicitMaxWidth == param1)
         {
            return;
         }
         this.mx_internal::_explicitMaxWidth = param1;
         this.invalidateSize();
         this.invalidateParentSizeAndDisplayList();
         this.dispatchEvent(new Event("explicitMaxWidthChanged"));
      }
      
      [Bindable("explicitMaxHeightChanged")]
      public function get explicitMaxHeight() : Number
      {
         return this.mx_internal::_explicitMaxHeight;
      }
      
      public function set explicitMaxHeight(param1:Number) : void
      {
         if(this.mx_internal::_explicitMaxHeight == param1)
         {
            return;
         }
         this.mx_internal::_explicitMaxHeight = param1;
         this.invalidateSize();
         this.invalidateParentSizeAndDisplayList();
         this.dispatchEvent(new Event("explicitMaxHeightChanged"));
      }
      
      [Bindable("explicitWidthChanged")]
      public function get explicitWidth() : Number
      {
         return this._explicitWidth;
      }
      
      public function set explicitWidth(param1:Number) : void
      {
         if(this._explicitWidth == param1)
         {
            return;
         }
         if(!isNaN(param1))
         {
            this._percentWidth = NaN;
         }
         this._explicitWidth = param1;
         this.invalidateSize();
         this.invalidateParentSizeAndDisplayList();
         this.dispatchEvent(new Event("explicitWidthChanged"));
      }
      
      [Bindable("explicitHeightChanged")]
      public function get explicitHeight() : Number
      {
         return this._explicitHeight;
      }
      
      public function set explicitHeight(param1:Number) : void
      {
         if(this._explicitHeight == param1)
         {
            return;
         }
         if(!isNaN(param1))
         {
            this._percentHeight = NaN;
         }
         this._explicitHeight = param1;
         this.invalidateSize();
         this.invalidateParentSizeAndDisplayList();
         this.dispatchEvent(new Event("explicitHeightChanged"));
      }
      
      protected function get hasComplexLayoutMatrix() : Boolean
      {
         if(!this._hasComplexLayoutMatrix)
         {
            return false;
         }
         if(this.mx_internal::_layoutFeatures == null)
         {
            this._hasComplexLayoutMatrix = !MatrixUtil.isDeltaIdentity(super.transform.matrix);
            return this._hasComplexLayoutMatrix;
         }
         return !MatrixUtil.isDeltaIdentity(this.mx_internal::_layoutFeatures.layoutMatrix);
      }
      
      [Bindable("includeInLayoutChanged")]
      public function get includeInLayout() : Boolean
      {
         return this._includeInLayout;
      }
      
      public function set includeInLayout(param1:Boolean) : void
      {
         var _loc2_:IInvalidating = null;
         if(this._includeInLayout != param1)
         {
            this._includeInLayout = param1;
            _loc2_ = this.parent as IInvalidating;
            if(_loc2_)
            {
               _loc2_.invalidateSize();
               _loc2_.invalidateDisplayList();
            }
            this.dispatchEvent(new Event("includeInLayoutChanged"));
         }
      }
      
      public function get instanceIndex() : int
      {
         return this._instanceIndices ? int(this._instanceIndices[this._instanceIndices.length - 1]) : -1;
      }
      
      public function get instanceIndices() : Array
      {
         return this._instanceIndices ? this._instanceIndices.slice(0) : null;
      }
      
      public function set instanceIndices(param1:Array) : void
      {
         this._instanceIndices = param1;
      }
      
      public function get repeater() : IRepeater
      {
         return this._repeaters ? this._repeaters[this._repeaters.length - 1] : null;
      }
      
      public function get repeaters() : Array
      {
         return this._repeaters ? this._repeaters.slice(0) : [];
      }
      
      public function set repeaters(param1:Array) : void
      {
         this._repeaters = param1;
      }
      
      public function get repeaterIndex() : int
      {
         return this._repeaterIndices ? int(this._repeaterIndices[this._repeaterIndices.length - 1]) : -1;
      }
      
      public function get repeaterIndices() : Array
      {
         return this._repeaterIndices ? this._repeaterIndices.slice() : [];
      }
      
      public function set repeaterIndices(param1:Array) : void
      {
         this._repeaterIndices = param1;
      }
      
      [Bindable("currentStateChange")]
      public function get currentState() : String
      {
         return this._currentStateChanged ? this.requestedCurrentState : this._currentState;
      }
      
      public function set currentState(param1:String) : void
      {
         this.setCurrentState(param1,true);
      }
      
      mx_internal function get currentStateDeferred() : String
      {
         return this._currentStateDeferred != null ? this._currentStateDeferred : this.currentState;
      }
      
      mx_internal function set currentStateDeferred(param1:String) : void
      {
         this._currentStateDeferred = param1;
         if(param1 != null)
         {
            this.invalidateProperties();
         }
      }
      
      public function get states() : Array
      {
         return this._states;
      }
      
      public function set states(param1:Array) : void
      {
         this._states = param1;
      }
      
      public function get transitions() : Array
      {
         return this._transitions;
      }
      
      public function set transitions(param1:Array) : void
      {
         this._transitions = param1;
      }
      
      public function get baselinePosition() : Number
      {
         if(!this.mx_internal::validateBaselinePosition())
         {
            return NaN;
         }
         var _loc1_:TextLineMetrics = this.measureText("Wj");
         if(this.height < 2 + _loc1_.ascent + 2)
         {
            return int(this.height + (_loc1_.ascent - this.height) / 2);
         }
         return 2 + _loc1_.ascent;
      }
      
      public function get className() : String
      {
         return NameUtil.getUnqualifiedClassName(this);
      }
      
      public function get activeEffects() : Array
      {
         return this.mx_internal::_effectsStarted;
      }
      
      public function get flexContextMenu() : IFlexContextMenu
      {
         return this._flexContextMenu;
      }
      
      public function set flexContextMenu(param1:IFlexContextMenu) : void
      {
         if(this._flexContextMenu)
         {
            this._flexContextMenu.unsetContextMenu(this);
         }
         this._flexContextMenu = param1;
         if(param1 != null)
         {
            this._flexContextMenu.setContextMenu(this);
         }
      }
      
      public function get styleName() : Object
      {
         return this._styleName;
      }
      
      public function set styleName(param1:Object) : void
      {
         if(this._styleName === param1)
         {
            return;
         }
         this._styleName = param1;
         if(this.inheritingStyles == StyleProtoChain.STYLE_UNINITIALIZED)
         {
            return;
         }
         this.regenerateStyleCache(true);
         this.mx_internal::initThemeColor();
         this.styleChanged("styleName");
         this.notifyStyleChangeInChildren("styleName",true);
      }
      
      [Bindable("toolTipChanged")]
      public function get toolTip() : String
      {
         return this.mx_internal::_toolTip;
      }
      
      public function set toolTip(param1:String) : void
      {
         var _loc2_:String = this.mx_internal::_toolTip;
         this.mx_internal::_toolTip = param1;
         ToolTipManager.mx_internal::registerToolTip(this,_loc2_,param1);
         this.dispatchEvent(new Event("toolTipChanged"));
      }
      
      public function get uid() : String
      {
         if(!this._uid)
         {
            this._uid = toString();
         }
         return this._uid;
      }
      
      public function set uid(param1:String) : void
      {
         this._uid = param1;
      }
      
      private function get indexedID() : String
      {
         var _loc1_:String = this.id;
         var _loc2_:Array = this.instanceIndices;
         if(_loc2_)
         {
            _loc1_ += "[" + _loc2_.join("][") + "]";
         }
         return _loc1_;
      }
      
      public function get isPopUp() : Boolean
      {
         return this._isPopUp;
      }
      
      public function set isPopUp(param1:Boolean) : void
      {
         this._isPopUp = param1;
      }
      
      public function get automationDelegate() : Object
      {
         return this._automationDelegate;
      }
      
      public function set automationDelegate(param1:Object) : void
      {
         this._automationDelegate = param1 as IAutomationObject;
      }
      
      public function get automationName() : String
      {
         if(this._automationName)
         {
            return this._automationName;
         }
         if(this.automationDelegate)
         {
            return this.automationDelegate.automationName;
         }
         return "";
      }
      
      public function set automationName(param1:String) : void
      {
         this._automationName = param1;
      }
      
      public function get automationValue() : Array
      {
         if(this.automationDelegate)
         {
            return this.automationDelegate.automationValue;
         }
         return [];
      }
      
      public function get showInAutomationHierarchy() : Boolean
      {
         return this._showInAutomationHierarchy;
      }
      
      public function set showInAutomationHierarchy(param1:Boolean) : void
      {
         this._showInAutomationHierarchy = param1;
      }
      
      [Bindable("errorStringChanged")]
      public function get errorString() : String
      {
         return this.mx_internal::_errorString;
      }
      
      public function set errorString(param1:String) : void
      {
         var _loc2_:String = this.mx_internal::_errorString;
         this.mx_internal::_errorString = param1;
         ToolTipManager.mx_internal::registerErrorString(this,_loc2_,param1);
         this.errorStringChanged = true;
         this.invalidateProperties();
         this.dispatchEvent(new Event("errorStringChanged"));
      }
      
      private function setBorderColorForErrorString() : void
      {
         if(!this.mx_internal::_errorString || this.mx_internal::_errorString.length == 0)
         {
            if(!isNaN(this.mx_internal::origBorderColor))
            {
               this.setStyle("borderColor",this.mx_internal::origBorderColor);
               this.mx_internal::saveBorderColor = true;
            }
         }
         else
         {
            if(this.mx_internal::saveBorderColor)
            {
               this.mx_internal::saveBorderColor = false;
               this.mx_internal::origBorderColor = this.getStyle("borderColor");
            }
            this.setStyle("borderColor",this.getStyle("errorColor"));
         }
         this.styleChanged("themeColor");
         var _loc1_:IFocusManager = this.focusManager;
         var _loc2_:DisplayObject = _loc1_ ? DisplayObject(_loc1_.getFocus()) : null;
         if(_loc1_ && _loc1_.showFocusIndicator && _loc2_ == this)
         {
            this.drawFocus(true);
         }
      }
      
      public function get validationSubField() : String
      {
         return this._validationSubField;
      }
      
      public function set validationSubField(param1:String) : void
      {
         this._validationSubField = param1;
      }
      
      override public function addChild(param1:DisplayObject) : DisplayObject
      {
         var _loc2_:DisplayObjectContainer = param1.parent;
         if(Boolean(_loc2_) && !(_loc2_ is Loader))
         {
            _loc2_.removeChild(param1);
         }
         var _loc3_:int = Boolean(this.mx_internal::effectOverlayReferenceCount) && param1 != this.mx_internal::effectOverlay ? int(Math.max(0,super.numChildren - 1)) : super.numChildren;
         this.mx_internal::addingChild(param1);
         this.mx_internal::$addChildAt(param1,_loc3_);
         this.mx_internal::childAdded(param1);
         return param1;
      }
      
      override public function addChildAt(param1:DisplayObject, param2:int) : DisplayObject
      {
         var _loc3_:DisplayObjectContainer = param1.parent;
         if(Boolean(_loc3_) && !(_loc3_ is Loader))
         {
            _loc3_.removeChild(param1);
         }
         if(Boolean(this.mx_internal::effectOverlayReferenceCount) && param1 != this.mx_internal::effectOverlay)
         {
            param2 = Math.min(param2,Math.max(0,super.numChildren - 1));
         }
         this.mx_internal::addingChild(param1);
         this.mx_internal::$addChildAt(param1,param2);
         this.mx_internal::childAdded(param1);
         return param1;
      }
      
      override public function removeChild(param1:DisplayObject) : DisplayObject
      {
         this.mx_internal::removingChild(param1);
         this.mx_internal::$removeChild(param1);
         this.mx_internal::childRemoved(param1);
         return param1;
      }
      
      override public function removeChildAt(param1:int) : DisplayObject
      {
         var _loc2_:DisplayObject = getChildAt(param1);
         this.mx_internal::removingChild(_loc2_);
         this.mx_internal::$removeChild(_loc2_);
         this.mx_internal::childRemoved(_loc2_);
         return _loc2_;
      }
      
      override public function setChildIndex(param1:DisplayObject, param2:int) : void
      {
         if(Boolean(this.mx_internal::effectOverlayReferenceCount) && param1 != this.mx_internal::effectOverlay)
         {
            param2 = Math.min(param2,Math.max(0,super.numChildren - 2));
         }
         super.setChildIndex(param1,param2);
      }
      
      override public function stopDrag() : void
      {
         super.stopDrag();
         this.invalidateProperties();
         this.dispatchEvent(new Event("xChanged"));
         this.dispatchEvent(new Event("yChanged"));
      }
      
      final mx_internal function $addChild(param1:DisplayObject) : DisplayObject
      {
         return super.addChild(param1);
      }
      
      final mx_internal function $addChildAt(param1:DisplayObject, param2:int) : DisplayObject
      {
         return super.addChildAt(param1,param2);
      }
      
      final mx_internal function $removeChild(param1:DisplayObject) : DisplayObject
      {
         return super.removeChild(param1);
      }
      
      final mx_internal function $removeChildAt(param1:int) : DisplayObject
      {
         return super.removeChildAt(param1);
      }
      
      final mx_internal function $setChildIndex(param1:DisplayObject, param2:int) : void
      {
         super.setChildIndex(param1,param2);
      }
      
      mx_internal function updateCallbacks() : void
      {
         if(this.mx_internal::invalidateDisplayListFlag)
         {
            UIComponentGlobals.mx_internal::layoutManager.invalidateDisplayList(this);
         }
         if(this.mx_internal::invalidateSizeFlag)
         {
            UIComponentGlobals.mx_internal::layoutManager.invalidateSize(this);
         }
         if(this.mx_internal::invalidatePropertiesFlag)
         {
            UIComponentGlobals.mx_internal::layoutManager.invalidateProperties(this);
         }
         if(Boolean(this.systemManager) && (this._systemManager.stage || this.usingBridge))
         {
            if(this.methodQueue.length > 0 && !this.listeningForRender)
            {
               this._systemManager.addEventListener(FlexEvent.RENDER,this.callLaterDispatcher);
               this._systemManager.addEventListener(FlexEvent.ENTER_FRAME,this.callLaterDispatcher);
               this.listeningForRender = true;
            }
            if(this._systemManager.stage)
            {
               this._systemManager.stage.invalidate();
            }
         }
      }
      
      public function parentChanged(param1:DisplayObjectContainer) : void
      {
         if(!param1)
         {
            this.mx_internal::_parent = null;
            this._nestLevel = 0;
         }
         else if(param1 is IStyleClient)
         {
            this.mx_internal::_parent = param1;
         }
         else if(param1 is ISystemManager)
         {
            this.mx_internal::_parent = param1;
         }
         else
         {
            this.mx_internal::_parent = param1.parent;
         }
      }
      
      mx_internal function addingChild(param1:DisplayObject) : void
      {
         if(param1 is IUIComponent && !IUIComponent(param1).document)
         {
            IUIComponent(param1).document = this.document ? this.document : FlexGlobals.topLevelApplication;
         }
         if(param1 is IFlexModule && IFlexModule(param1).moduleFactory == null)
         {
            if(this.moduleFactory != null)
            {
               IFlexModule(param1).moduleFactory = this.moduleFactory;
            }
            else if(this.document is IFlexModule && this.document.moduleFactory != null)
            {
               IFlexModule(param1).moduleFactory = this.document.moduleFactory;
            }
            else if(this.parent is IFlexModule && IFlexModule(this.parent).moduleFactory != null)
            {
               IFlexModule(param1).moduleFactory = IFlexModule(this.parent).moduleFactory;
            }
         }
         if(param1 is IFontContextComponent && !param1 is UIComponent && IFontContextComponent(param1).fontContext == null)
         {
            IFontContextComponent(param1).fontContext = this.moduleFactory;
         }
         if(param1 is IUIComponent)
         {
            IUIComponent(param1).parentChanged(this);
         }
         if(param1 is ILayoutManagerClient)
         {
            ILayoutManagerClient(param1).nestLevel = this.nestLevel + 1;
         }
         else if(param1 is IUITextField)
         {
            IUITextField(param1).nestLevel = this.nestLevel + 1;
         }
         if(param1 is InteractiveObject)
         {
            if(this.doubleClickEnabled)
            {
               InteractiveObject(param1).doubleClickEnabled = true;
            }
         }
         if(param1 is IStyleClient)
         {
            IStyleClient(param1).regenerateStyleCache(true);
         }
         else if(param1 is IUITextField && Boolean(IUITextField(param1).inheritingStyles))
         {
            StyleProtoChain.initTextField(IUITextField(param1));
         }
         if(param1 is ISimpleStyleClient)
         {
            ISimpleStyleClient(param1).styleChanged(null);
         }
         if(param1 is IStyleClient)
         {
            IStyleClient(param1).notifyStyleChangeInChildren(null,true);
         }
         if(param1 is UIComponent)
         {
            UIComponent(param1).mx_internal::initThemeColor();
         }
         if(param1 is UIComponent)
         {
            UIComponent(param1).stylesInitialized();
         }
      }
      
      mx_internal function childAdded(param1:DisplayObject) : void
      {
         if(param1 is UIComponent)
         {
            if(!UIComponent(param1).initialized)
            {
               UIComponent(param1).initialize();
            }
         }
         else if(param1 is IUIComponent)
         {
            IUIComponent(param1).initialize();
         }
      }
      
      mx_internal function removingChild(param1:DisplayObject) : void
      {
      }
      
      mx_internal function childRemoved(param1:DisplayObject) : void
      {
         if(param1 is IUIComponent)
         {
            if(IUIComponent(param1).document != param1)
            {
               IUIComponent(param1).document = null;
            }
            IUIComponent(param1).parentChanged(null);
         }
      }
      
      public function initialize() : void
      {
         if(this.initialized)
         {
            return;
         }
         this.dispatchEvent(new FlexEvent(FlexEvent.PREINITIALIZE));
         this.createChildren();
         this.childrenCreated();
         this.initializeAccessibility();
         this.initializationComplete();
      }
      
      protected function initializationComplete() : void
      {
         this.processedDescriptors = true;
      }
      
      protected function initializeAccessibility() : void
      {
         if(UIComponent.mx_internal::createAccessibilityImplementation != null)
         {
            UIComponent.mx_internal::createAccessibilityImplementation(this);
         }
      }
      
      public function initializeRepeaterArrays(param1:IRepeaterClient) : void
      {
         if(param1 && param1.instanceIndices && (!param1.isDocument || param1 != this.descriptor.document) && !this._instanceIndices)
         {
            this._instanceIndices = param1.instanceIndices;
            this._repeaters = param1.repeaters;
            this._repeaterIndices = param1.repeaterIndices;
         }
      }
      
      protected function createChildren() : void
      {
      }
      
      protected function childrenCreated() : void
      {
         this.invalidateProperties();
         this.invalidateSize();
         this.invalidateDisplayList();
      }
      
      public function invalidateProperties() : void
      {
         if(!this.mx_internal::invalidatePropertiesFlag)
         {
            this.mx_internal::invalidatePropertiesFlag = true;
            if(Boolean(this.parent) && Boolean(UIComponentGlobals.mx_internal::layoutManager))
            {
               UIComponentGlobals.mx_internal::layoutManager.invalidateProperties(this);
            }
         }
      }
      
      public function invalidateSize() : void
      {
         if(!this.mx_internal::invalidateSizeFlag)
         {
            this.mx_internal::invalidateSizeFlag = true;
            if(Boolean(this.parent) && Boolean(UIComponentGlobals.mx_internal::layoutManager))
            {
               UIComponentGlobals.mx_internal::layoutManager.invalidateSize(this);
            }
         }
      }
      
      protected function invalidateParentSizeAndDisplayList() : void
      {
         if(!this.includeInLayout)
         {
            return;
         }
         var _loc1_:IInvalidating = this.parent as IInvalidating;
         if(!_loc1_)
         {
            return;
         }
         _loc1_.invalidateSize();
         _loc1_.invalidateDisplayList();
      }
      
      public function invalidateDisplayList() : void
      {
         if(!this.mx_internal::invalidateDisplayListFlag)
         {
            this.mx_internal::invalidateDisplayListFlag = true;
            if(this.isOnDisplayList() && Boolean(UIComponentGlobals.mx_internal::layoutManager))
            {
               UIComponentGlobals.mx_internal::layoutManager.invalidateDisplayList(this);
            }
         }
      }
      
      private function invalidateTransform() : void
      {
         if(Boolean(this.mx_internal::_layoutFeatures) && this.mx_internal::_layoutFeatures.updatePending == false)
         {
            this.mx_internal::_layoutFeatures.updatePending = true;
            if(this.isOnDisplayList() && UIComponentGlobals.mx_internal::layoutManager && this.mx_internal::invalidateDisplayListFlag == false)
            {
               UIComponentGlobals.mx_internal::layoutManager.invalidateDisplayList(this);
            }
         }
      }
      
      private function transformOffsetsChangedHandler(param1:Event) : void
      {
         this.invalidateTransform();
      }
      
      private function isOnDisplayList() : Boolean
      {
         var p:DisplayObjectContainer = null;
         try
         {
            p = this.mx_internal::_parent ? this.mx_internal::_parent : super.parent;
         }
         catch(e:SecurityError)
         {
            return true;
         }
         return p ? true : false;
      }
      
      public function stylesInitialized() : void
      {
      }
      
      public function styleChanged(param1:String) : void
      {
         StyleProtoChain.styleChanged(this,param1);
         if(Boolean(param1) && param1 != "styleName")
         {
            if(hasEventListener(param1 + "Changed"))
            {
               this.dispatchEvent(new Event(param1 + "Changed"));
            }
         }
         else if(hasEventListener("allStylesChanged"))
         {
            this.dispatchEvent(new Event("allStylesChanged"));
         }
      }
      
      public function validateNow() : void
      {
         UIComponentGlobals.mx_internal::layoutManager.validateClient(this);
      }
      
      mx_internal function validateBaselinePosition() : Boolean
      {
         var _loc1_:Number = NaN;
         var _loc2_:Number = NaN;
         if(!this.parent)
         {
            return false;
         }
         if(!this.mx_internal::setActualSizeCalled && (this.width == 0 || this.height == 0))
         {
            this.validateNow();
            _loc1_ = this.getExplicitOrMeasuredWidth();
            _loc2_ = this.getExplicitOrMeasuredHeight();
            this.setActualSize(_loc1_,_loc2_);
         }
         this.validateNow();
         return true;
      }
      
      public function callLater(param1:Function, param2:Array = null) : void
      {
         this.methodQueue.push(new MethodQueueElement(param1,param2));
         var _loc3_:ISystemManager = this.systemManager;
         if(Boolean(_loc3_) && (_loc3_.stage || this.usingBridge))
         {
            if(!this.listeningForRender)
            {
               _loc3_.addEventListener(FlexEvent.RENDER,this.callLaterDispatcher);
               _loc3_.addEventListener(FlexEvent.ENTER_FRAME,this.callLaterDispatcher);
               this.listeningForRender = true;
            }
            if(_loc3_.stage)
            {
               _loc3_.stage.invalidate();
            }
         }
      }
      
      mx_internal function cancelAllCallLaters() : void
      {
         var _loc1_:ISystemManager = this.systemManager;
         if(Boolean(_loc1_) && (_loc1_.stage || this.usingBridge))
         {
            if(this.listeningForRender)
            {
               _loc1_.removeEventListener(FlexEvent.RENDER,this.callLaterDispatcher);
               _loc1_.removeEventListener(FlexEvent.ENTER_FRAME,this.callLaterDispatcher);
               this.listeningForRender = false;
            }
         }
         this.methodQueue.splice(0);
      }
      
      public function validateProperties() : void
      {
         if(this.mx_internal::invalidatePropertiesFlag)
         {
            this.commitProperties();
            this.mx_internal::invalidatePropertiesFlag = false;
         }
      }
      
      protected function commitProperties() : void
      {
         var _loc1_:Number = NaN;
         var _loc2_:Number = NaN;
         var _loc3_:String = null;
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            if(this._scaleX != this.oldScaleX)
            {
               _loc1_ = Math.abs(this._scaleX / this.oldScaleX);
               if(!isNaN(this.explicitMinWidth))
               {
                  this.explicitMinWidth *= _loc1_;
               }
               if(!isNaN(this.explicitWidth))
               {
                  this.explicitWidth *= _loc1_;
               }
               if(!isNaN(this.explicitMaxWidth))
               {
                  this.explicitMaxWidth *= _loc1_;
               }
               this.mx_internal::_width *= _loc1_;
               super.scaleX = this.oldScaleX = this._scaleX;
            }
            if(this._scaleY != this.oldScaleY)
            {
               _loc2_ = Math.abs(this._scaleY / this.oldScaleY);
               if(!isNaN(this.explicitMinHeight))
               {
                  this.explicitMinHeight *= _loc2_;
               }
               if(!isNaN(this.explicitHeight))
               {
                  this.explicitHeight *= _loc2_;
               }
               if(!isNaN(this.explicitMaxHeight))
               {
                  this.explicitMaxHeight *= _loc2_;
               }
               this.mx_internal::_height *= _loc2_;
               super.scaleY = this.oldScaleY = this._scaleY;
            }
         }
         else
         {
            if(this._currentStateDeferred != null)
            {
               _loc3_ = this._currentStateDeferred;
               this._currentStateDeferred = null;
               this.currentState = _loc3_;
            }
            this.oldScaleX = this.scaleX;
            this.oldScaleY = this.scaleY;
         }
         if(this._currentStateChanged && !this.initialized)
         {
            this._currentStateChanged = false;
            this.commitCurrentState();
         }
         if(this.x != this.oldX || this.y != this.oldY)
         {
            this.dispatchMoveEvent();
         }
         if(this.width != this.oldWidth || this.height != this.oldHeight)
         {
            this.dispatchResizeEvent();
         }
         if(this.errorStringChanged)
         {
            this.errorStringChanged = false;
            this.setBorderColorForErrorString();
         }
         if(this.blendModeChanged)
         {
            this.blendModeChanged = false;
            if(!this.blendShaderChanged)
            {
               this.mx_internal::$blendMode = this._blendMode;
            }
            else
            {
               this.blendShaderChanged = false;
               this.mx_internal::$blendMode = BlendMode.NORMAL;
               switch(this._blendMode)
               {
                  case "color":
                     this.mx_internal::$blendShader = new ColorShader();
                     break;
                  case "colordodge":
                     this.mx_internal::$blendShader = new ColorDodgeShader();
                     break;
                  case "colorburn":
                     this.mx_internal::$blendShader = new ColorBurnShader();
                     break;
                  case "exclusion":
                     this.mx_internal::$blendShader = new ExclusionShader();
                     break;
                  case "hue":
                     this.mx_internal::$blendShader = new HueShader();
                     break;
                  case "luminosity":
                     this.mx_internal::$blendShader = new LuminosityShader();
                     break;
                  case "saturation":
                     this.mx_internal::$blendShader = new SaturationShader();
                     break;
                  case "softlight":
                     this.mx_internal::$blendShader = new SoftLightShader();
               }
            }
         }
      }
      
      public function validateSize(param1:Boolean = false) : void
      {
         var _loc2_:int = 0;
         var _loc3_:DisplayObject = null;
         var _loc4_:Boolean = false;
         if(param1)
         {
            _loc2_ = 0;
            while(_loc2_ < numChildren)
            {
               _loc3_ = getChildAt(_loc2_);
               if(_loc3_ is ILayoutManagerClient)
               {
                  (_loc3_ as ILayoutManagerClient).validateSize(true);
               }
               _loc2_++;
            }
         }
         if(this.mx_internal::invalidateSizeFlag)
         {
            _loc4_ = this.measureSizes();
            if((_loc4_) && this.includeInLayout)
            {
               this.invalidateDisplayList();
               this.invalidateParentSizeAndDisplayList();
            }
         }
      }
      
      protected function canSkipMeasurement() : Boolean
      {
         return !isNaN(this.explicitWidth) && !isNaN(this.explicitHeight);
      }
      
      private function measureSizes() : Boolean
      {
         var _loc2_:Number = NaN;
         var _loc3_:Number = NaN;
         var _loc4_:Number = NaN;
         var _loc5_:Number = NaN;
         var _loc1_:Boolean = false;
         if(!this.mx_internal::invalidateSizeFlag)
         {
            return _loc1_;
         }
         if(this.canSkipMeasurement())
         {
            this.mx_internal::invalidateSizeFlag = false;
            this._measuredMinWidth = 0;
            this._measuredMinHeight = 0;
         }
         else
         {
            _loc4_ = Math.abs(this.scaleX);
            _loc5_ = Math.abs(this.scaleY);
            if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
            {
               if(_loc4_ != 1)
               {
                  this._measuredMinWidth /= _loc4_;
                  this._measuredWidth /= _loc4_;
               }
               if(_loc5_ != 1)
               {
                  this._measuredMinHeight /= _loc5_;
                  this._measuredHeight /= _loc5_;
               }
            }
            this.measure();
            this.mx_internal::invalidateSizeFlag = false;
            if(!isNaN(this.explicitMinWidth) && this.measuredWidth < this.explicitMinWidth)
            {
               this.measuredWidth = this.explicitMinWidth;
            }
            if(!isNaN(this.explicitMaxWidth) && this.measuredWidth > this.explicitMaxWidth)
            {
               this.measuredWidth = this.explicitMaxWidth;
            }
            if(!isNaN(this.explicitMinHeight) && this.measuredHeight < this.explicitMinHeight)
            {
               this.measuredHeight = this.explicitMinHeight;
            }
            if(!isNaN(this.explicitMaxHeight) && this.measuredHeight > this.explicitMaxHeight)
            {
               this.measuredHeight = this.explicitMaxHeight;
            }
            if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
            {
               if(_loc4_ != 1)
               {
                  this._measuredMinWidth *= _loc4_;
                  this._measuredWidth *= _loc4_;
               }
               if(_loc5_ != 1)
               {
                  this._measuredMinHeight *= _loc5_;
                  this._measuredHeight *= _loc5_;
               }
            }
         }
         this.mx_internal::adjustSizesForScaleChanges();
         if(isNaN(this.oldMinWidth))
         {
            this.oldMinWidth = !isNaN(this.explicitMinWidth) ? this.explicitMinWidth : this.measuredMinWidth;
            this.oldMinHeight = !isNaN(this.explicitMinHeight) ? this.explicitMinHeight : this.measuredMinHeight;
            this.oldExplicitWidth = !isNaN(this.explicitWidth) ? this.explicitWidth : this.measuredWidth;
            this.oldExplicitHeight = !isNaN(this.explicitHeight) ? this.explicitHeight : this.measuredHeight;
            _loc1_ = true;
         }
         else
         {
            _loc3_ = !isNaN(this.explicitMinWidth) ? this.explicitMinWidth : this.measuredMinWidth;
            if(_loc3_ != this.oldMinWidth)
            {
               this.oldMinWidth = _loc3_;
               _loc1_ = true;
            }
            _loc3_ = !isNaN(this.explicitMinHeight) ? this.explicitMinHeight : this.measuredMinHeight;
            if(_loc3_ != this.oldMinHeight)
            {
               this.oldMinHeight = _loc3_;
               _loc1_ = true;
            }
            _loc3_ = !isNaN(this.explicitWidth) ? this.explicitWidth : this.measuredWidth;
            if(_loc3_ != this.oldExplicitWidth)
            {
               this.oldExplicitWidth = _loc3_;
               _loc1_ = true;
            }
            _loc3_ = !isNaN(this.explicitHeight) ? this.explicitHeight : this.measuredHeight;
            if(_loc3_ != this.oldExplicitHeight)
            {
               this.oldExplicitHeight = _loc3_;
               _loc1_ = true;
            }
         }
         return _loc1_;
      }
      
      protected function measure() : void
      {
         this.measuredMinWidth = 0;
         this.measuredMinHeight = 0;
         this.measuredWidth = 0;
         this.measuredHeight = 0;
      }
      
      mx_internal function adjustSizesForScaleChanges() : void
      {
         var _loc3_:Number = NaN;
         var _loc1_:Number = this.scaleX;
         var _loc2_:Number = this.scaleY;
         if(_loc1_ != this.oldScaleX)
         {
            if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
            {
               _loc3_ = Math.abs(_loc1_ / this.oldScaleX);
               if(this.explicitMinWidth)
               {
                  this.explicitMinWidth *= _loc3_;
               }
               if(!isNaN(this.explicitWidth))
               {
                  this.explicitWidth *= _loc3_;
               }
               if(this.explicitMaxWidth)
               {
                  this.explicitMaxWidth *= _loc3_;
               }
            }
            this.oldScaleX = _loc1_;
         }
         if(_loc2_ != this.oldScaleY)
         {
            if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
            {
               _loc3_ = Math.abs(_loc2_ / this.oldScaleY);
               if(this.explicitMinHeight)
               {
                  this.explicitMinHeight *= _loc3_;
               }
               if(this.explicitHeight)
               {
                  this.explicitHeight *= _loc3_;
               }
               if(this.explicitMaxHeight)
               {
                  this.explicitMaxHeight *= _loc3_;
               }
            }
            this.oldScaleY = _loc2_;
         }
      }
      
      public function getExplicitOrMeasuredWidth() : Number
      {
         return !isNaN(this.explicitWidth) ? this.explicitWidth : this.measuredWidth;
      }
      
      public function getExplicitOrMeasuredHeight() : Number
      {
         return !isNaN(this.explicitHeight) ? this.explicitHeight : this.measuredHeight;
      }
      
      protected function get unscaledWidth() : Number
      {
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            return this.width / Math.abs(this.scaleX);
         }
         return this.width;
      }
      
      mx_internal function getUnscaledWidth() : Number
      {
         return this.unscaledWidth;
      }
      
      mx_internal function setUnscaledWidth(param1:Number) : void
      {
         var _loc2_:Number = param1;
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc2_ *= Math.abs(this.oldScaleX);
         }
         if(this._explicitWidth == _loc2_)
         {
            return;
         }
         if(!isNaN(_loc2_))
         {
            this._percentWidth = NaN;
         }
         this._explicitWidth = _loc2_;
         this.invalidateSize();
         this.invalidateParentSizeAndDisplayList();
      }
      
      protected function get unscaledHeight() : Number
      {
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            return this.height / Math.abs(this.scaleY);
         }
         return this.height;
      }
      
      mx_internal function getUnscaledHeight() : Number
      {
         return this.unscaledHeight;
      }
      
      mx_internal function setUnscaledHeight(param1:Number) : void
      {
         var _loc2_:Number = param1;
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            _loc2_ *= Math.abs(this.oldScaleY);
         }
         if(this._explicitHeight == _loc2_)
         {
            return;
         }
         if(!isNaN(_loc2_))
         {
            this._percentHeight = NaN;
         }
         this._explicitHeight = _loc2_;
         this.invalidateSize();
         this.invalidateParentSizeAndDisplayList();
      }
      
      public function measureText(param1:String) : TextLineMetrics
      {
         return this.determineTextFormatFromStyles().measureText(param1);
      }
      
      public function measureHTMLText(param1:String) : TextLineMetrics
      {
         return this.determineTextFormatFromStyles().measureHTMLText(param1);
      }
      
      protected function validateMatrix() : void
      {
         var _loc1_:PerspectiveProjection = null;
         if(this.mx_internal::_layoutFeatures != null && this.mx_internal::_layoutFeatures.updatePending == true)
         {
            this.applyComputedMatrix();
         }
         if(this._maintainProjectionCenter)
         {
            _loc1_ = super.transform.perspectiveProjection;
            if(_loc1_ != null)
            {
               _loc1_.projectionCenter = new Point(this.unscaledWidth / 2,this.unscaledHeight / 2);
            }
         }
      }
      
      public function validateDisplayList() : void
      {
         var _loc1_:ISystemManager = null;
         var _loc2_:Number = NaN;
         var _loc3_:Number = NaN;
         this.validateMatrix();
         if(this.mx_internal::invalidateDisplayListFlag)
         {
            _loc1_ = this.parent as ISystemManager;
            if(_loc1_)
            {
               if(_loc1_.isProxy || _loc1_ == this.systemManager.topLevelSystemManager && _loc1_.document != this)
               {
                  this.setActualSize(this.getExplicitOrMeasuredWidth(),this.getExplicitOrMeasuredHeight());
               }
            }
            _loc2_ = this.width;
            _loc3_ = this.height;
            if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
            {
               _loc2_ = this.scaleX == 0 ? 0 : this.width / this.scaleX;
               _loc3_ = this.scaleY == 0 ? 0 : this.height / this.scaleY;
               if(Math.abs(_loc2_ - this.lastUnscaledWidth) < 0.00001)
               {
                  _loc2_ = this.lastUnscaledWidth;
               }
               if(Math.abs(_loc3_ - this.lastUnscaledHeight) < 0.00001)
               {
                  _loc3_ = this.lastUnscaledHeight;
               }
            }
            this.updateDisplayList(_loc2_,_loc3_);
            this.lastUnscaledWidth = _loc2_;
            this.lastUnscaledHeight = _loc3_;
            this.mx_internal::invalidateDisplayListFlag = false;
         }
      }
      
      protected function updateDisplayList(param1:Number, param2:Number) : void
      {
      }
      
      public function getConstraintValue(param1:String) : *
      {
         return this.getStyle(param1);
      }
      
      public function setConstraintValue(param1:String, param2:*) : void
      {
         this.setStyle(param1,param2);
      }
      
      public function get left() : Object
      {
         return this.getConstraintValue("left");
      }
      
      public function set left(param1:Object) : void
      {
         this.setConstraintValue("left",param1 != null ? param1 : undefined);
      }
      
      public function get right() : Object
      {
         return this.getConstraintValue("right");
      }
      
      public function set right(param1:Object) : void
      {
         this.setConstraintValue("right",param1 != null ? param1 : undefined);
      }
      
      public function get top() : Object
      {
         return this.getConstraintValue("top");
      }
      
      public function set top(param1:Object) : void
      {
         this.setConstraintValue("top",param1 != null ? param1 : undefined);
      }
      
      public function get bottom() : Object
      {
         return this.getConstraintValue("bottom");
      }
      
      public function set bottom(param1:Object) : void
      {
         this.setConstraintValue("bottom",param1 != null ? param1 : undefined);
      }
      
      public function get horizontalCenter() : Object
      {
         return this.getConstraintValue("horizontalCenter");
      }
      
      public function set horizontalCenter(param1:Object) : void
      {
         this.setConstraintValue("horizontalCenter",param1 != null ? param1 : undefined);
      }
      
      public function get verticalCenter() : Object
      {
         return this.getConstraintValue("verticalCenter");
      }
      
      public function set verticalCenter(param1:Object) : void
      {
         this.setConstraintValue("verticalCenter",param1 != null ? param1 : undefined);
      }
      
      public function get baseline() : Object
      {
         return this.getConstraintValue("baseline");
      }
      
      public function set baseline(param1:Object) : void
      {
         this.setConstraintValue("baseline",param1 != null ? param1 : undefined);
      }
      
      public function horizontalGradientMatrix(param1:Number, param2:Number, param3:Number, param4:Number) : Matrix
      {
         UIComponentGlobals.mx_internal::tempMatrix.createGradientBox(param3,param4,0,param1,param2);
         return UIComponentGlobals.mx_internal::tempMatrix;
      }
      
      public function verticalGradientMatrix(param1:Number, param2:Number, param3:Number, param4:Number) : Matrix
      {
         UIComponentGlobals.mx_internal::tempMatrix.createGradientBox(param3,param4,Math.PI / 2,param1,param2);
         return UIComponentGlobals.mx_internal::tempMatrix;
      }
      
      public function drawRoundRect(param1:Number, param2:Number, param3:Number, param4:Number, param5:Object = null, param6:Object = null, param7:Object = null, param8:Object = null, param9:String = null, param10:Array = null, param11:Object = null) : void
      {
         var _loc13_:Number = NaN;
         var _loc14_:Array = null;
         var _loc15_:Matrix = null;
         var _loc16_:Object = null;
         var _loc12_:Graphics = graphics;
         if(!param3 || !param4)
         {
            return;
         }
         if(param6 !== null)
         {
            if(param6 is Array)
            {
               if(param7 is Array)
               {
                  _loc14_ = param7 as Array;
               }
               else
               {
                  _loc14_ = [param7,param7];
               }
               if(!param10)
               {
                  param10 = [0,255];
               }
               _loc15_ = null;
               if(param8)
               {
                  if(param8 is Matrix)
                  {
                     _loc15_ = Matrix(param8);
                  }
                  else
                  {
                     _loc15_ = new Matrix();
                     if(param8 is Number)
                     {
                        _loc15_.createGradientBox(param3,param4,Number(param8) * Math.PI / 180,param1,param2);
                     }
                     else
                     {
                        _loc15_.createGradientBox(param8.w,param8.h,param8.r,param8.x,param8.y);
                     }
                  }
               }
               if(param9 == GradientType.RADIAL)
               {
                  _loc12_.beginGradientFill(GradientType.RADIAL,param6 as Array,_loc14_,param10,_loc15_);
               }
               else
               {
                  _loc12_.beginGradientFill(GradientType.LINEAR,param6 as Array,_loc14_,param10,_loc15_);
               }
            }
            else
            {
               _loc12_.beginFill(Number(param6),Number(param7));
            }
         }
         if(!param5)
         {
            _loc12_.drawRect(param1,param2,param3,param4);
         }
         else if(param5 is Number)
         {
            _loc13_ = Number(param5) * 2;
            _loc12_.drawRoundRect(param1,param2,param3,param4,_loc13_,_loc13_);
         }
         else
         {
            GraphicsUtil.drawRoundRectComplex(_loc12_,param1,param2,param3,param4,param5.tl,param5.tr,param5.bl,param5.br);
         }
         if(param11)
         {
            _loc16_ = param11.r;
            if(_loc16_ is Number)
            {
               _loc13_ = Number(_loc16_) * 2;
               _loc12_.drawRoundRect(param11.x,param11.y,param11.w,param11.h,_loc13_,_loc13_);
            }
            else
            {
               GraphicsUtil.drawRoundRectComplex(_loc12_,param11.x,param11.y,param11.w,param11.h,_loc16_.tl,_loc16_.tr,_loc16_.bl,_loc16_.br);
            }
         }
         if(param6 !== null)
         {
            _loc12_.endFill();
         }
      }
      
      public function move(param1:Number, param2:Number) : void
      {
         var _loc3_:Boolean = false;
         if(param1 != this.x)
         {
            if(this.mx_internal::_layoutFeatures == null)
            {
               super.x = param1;
            }
            else
            {
               this.mx_internal::_layoutFeatures.layoutX = param1;
            }
            if(hasEventListener("xChanged"))
            {
               this.dispatchEvent(new Event("xChanged"));
            }
            _loc3_ = true;
         }
         if(param2 != this.y)
         {
            if(this.mx_internal::_layoutFeatures == null)
            {
               super.y = param2;
            }
            else
            {
               this.mx_internal::_layoutFeatures.layoutY = param2;
            }
            if(hasEventListener("yChanged"))
            {
               this.dispatchEvent(new Event("yChanged"));
            }
            _loc3_ = true;
         }
         if(_loc3_)
         {
            this.invalidateTransform();
            this.dispatchMoveEvent();
         }
      }
      
      public function setActualSize(param1:Number, param2:Number) : void
      {
         var _loc3_:Boolean = false;
         if(this.mx_internal::_width != param1)
         {
            this.mx_internal::_width = param1;
            if(hasEventListener("widthChanged"))
            {
               this.dispatchEvent(new Event("widthChanged"));
            }
            _loc3_ = true;
         }
         if(this.mx_internal::_height != param2)
         {
            this.mx_internal::_height = param2;
            if(hasEventListener("heightChanged"))
            {
               this.dispatchEvent(new Event("heightChanged"));
            }
            _loc3_ = true;
         }
         if(_loc3_)
         {
            this.invalidateDisplayList();
            this.dispatchResizeEvent();
         }
         this.mx_internal::setActualSizeCalled = true;
      }
      
      public function contentToGlobal(param1:Point) : Point
      {
         return localToGlobal(param1);
      }
      
      public function globalToContent(param1:Point) : Point
      {
         return globalToLocal(param1);
      }
      
      public function contentToLocal(param1:Point) : Point
      {
         return param1;
      }
      
      public function localToContent(param1:Point) : Point
      {
         return param1;
      }
      
      public function getFocus() : InteractiveObject
      {
         var _loc1_:ISystemManager = this.systemManager;
         if(!_loc1_)
         {
            return null;
         }
         if(UIComponentGlobals.mx_internal::nextFocusObject)
         {
            return UIComponentGlobals.mx_internal::nextFocusObject;
         }
         if(_loc1_.stage)
         {
            return _loc1_.stage.focus;
         }
         return null;
      }
      
      public function setFocus() : void
      {
         var _loc1_:ISystemManager = this.systemManager;
         if(Boolean(_loc1_) && (_loc1_.stage || this.usingBridge))
         {
            if(UIComponentGlobals.mx_internal::callLaterDispatcherCount == 0)
            {
               _loc1_.stage.focus = this;
               UIComponentGlobals.mx_internal::nextFocusObject = null;
            }
            else
            {
               UIComponentGlobals.mx_internal::nextFocusObject = this;
               _loc1_.addEventListener(FlexEvent.ENTER_FRAME,this.setFocusLater);
            }
         }
         else
         {
            UIComponentGlobals.mx_internal::nextFocusObject = this;
            this.callLater(this.setFocusLater);
         }
      }
      
      mx_internal function getFocusObject() : DisplayObject
      {
         var _loc1_:IFocusManager = this.focusManager;
         if(!_loc1_ || !_loc1_.focusPane)
         {
            return null;
         }
         return _loc1_.focusPane.numChildren == 0 ? null : _loc1_.focusPane.getChildAt(0);
      }
      
      public function drawFocus(param1:Boolean) : void
      {
         var _loc4_:DisplayObjectContainer = null;
         var _loc5_:Class = null;
         if(!this.parent)
         {
            return;
         }
         var _loc2_:DisplayObject = this.mx_internal::getFocusObject();
         var _loc3_:Sprite = this.focusManager ? this.focusManager.focusPane : null;
         if(param1 && !this.preventDrawFocus)
         {
            _loc4_ = _loc3_.parent;
            if(_loc4_ != this.parent)
            {
               if(_loc4_)
               {
                  if(_loc4_ is ISystemManager)
                  {
                     ISystemManager(_loc4_).focusPane = null;
                  }
                  else
                  {
                     IUIComponent(_loc4_).focusPane = null;
                  }
               }
               if(this.parent is ISystemManager)
               {
                  ISystemManager(this.parent).focusPane = _loc3_;
               }
               else
               {
                  IUIComponent(this.parent).focusPane = _loc3_;
               }
            }
            _loc5_ = this.getStyle("focusSkin");
            if(!_loc5_)
            {
               return;
            }
            if(Boolean(_loc2_) && !(_loc2_ is _loc5_))
            {
               _loc3_.removeChild(_loc2_);
               _loc2_ = null;
            }
            if(!_loc2_)
            {
               _loc2_ = new _loc5_();
               _loc2_.name = "focus";
               _loc3_.addChild(_loc2_);
            }
            if(_loc2_ is ILayoutManagerClient)
            {
               ILayoutManagerClient(_loc2_).nestLevel = this.nestLevel;
            }
            if(_loc2_ is ISimpleStyleClient)
            {
               ISimpleStyleClient(_loc2_).styleName = this;
            }
            addEventListener(MoveEvent.MOVE,this.focusObj_moveHandler,true);
            addEventListener(MoveEvent.MOVE,this.focusObj_moveHandler);
            addEventListener(ResizeEvent.RESIZE,this.focusObj_resizeHandler,true);
            addEventListener(ResizeEvent.RESIZE,this.focusObj_resizeHandler);
            addEventListener(Event.REMOVED,this.focusObj_removedHandler,true);
            _loc2_.visible = true;
            this.hasFocusRect = true;
            this.adjustFocusRect();
         }
         else if(this.hasFocusRect)
         {
            this.hasFocusRect = false;
            if(_loc2_)
            {
               _loc2_.visible = false;
               if(_loc2_ is ISimpleStyleClient)
               {
                  ISimpleStyleClient(_loc2_).styleName = null;
               }
            }
            removeEventListener(MoveEvent.MOVE,this.focusObj_moveHandler);
            removeEventListener(MoveEvent.MOVE,this.focusObj_moveHandler,true);
            removeEventListener(ResizeEvent.RESIZE,this.focusObj_resizeHandler,true);
            removeEventListener(ResizeEvent.RESIZE,this.focusObj_resizeHandler);
            removeEventListener(Event.REMOVED,this.focusObj_removedHandler,true);
         }
      }
      
      protected function adjustFocusRect(param1:DisplayObject = null) : void
      {
         var _loc2_:Number = NaN;
         var _loc3_:Number = NaN;
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         var _loc8_:Point = null;
         var _loc9_:Number = NaN;
         if(!param1)
         {
            param1 = this;
         }
         if(param1 is UIComponent)
         {
            _loc2_ = UIComponent(param1).unscaledWidth * Math.abs(param1.scaleX);
            _loc3_ = UIComponent(param1).unscaledHeight * Math.abs(param1.scaleY);
         }
         else
         {
            _loc2_ = param1.width;
            _loc3_ = param1.height;
         }
         if(isNaN(_loc2_) || isNaN(_loc3_))
         {
            return;
         }
         var _loc4_:IFocusManager = this.focusManager;
         if(!_loc4_)
         {
            return;
         }
         var _loc5_:IFlexDisplayObject = IFlexDisplayObject(this.mx_internal::getFocusObject());
         if(_loc5_)
         {
            if(Boolean(this.errorString) && this.errorString != "")
            {
               _loc6_ = this.getStyle("errorColor");
            }
            else if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
            {
               _loc6_ = this.getStyle("themeColor");
            }
            else
            {
               _loc6_ = this.getStyle("focusColor");
            }
            _loc7_ = this.getStyle("focusThickness");
            if(_loc5_ is IStyleClient)
            {
               IStyleClient(_loc5_).setStyle("focusColor",_loc6_);
            }
            _loc5_.setActualSize(_loc2_ + 2 * _loc7_,_loc3_ + 2 * _loc7_);
            if(this.rotation)
            {
               _loc9_ = this.rotation * Math.PI / 180;
               _loc8_ = new Point(param1.x - _loc7_ * (Math.cos(_loc9_) - Math.sin(_loc9_)),param1.y - _loc7_ * (Math.cos(_loc9_) + Math.sin(_loc9_)));
               DisplayObject(_loc5_).rotation = this.rotation;
            }
            else
            {
               _loc8_ = new Point(param1.x - _loc7_,param1.y - _loc7_);
               DisplayObject(_loc5_).rotation = 0;
            }
            if(param1.parent == this)
            {
               _loc8_.x += this.x;
               _loc8_.y += this.y;
            }
            _loc8_ = this.parent.localToGlobal(_loc8_);
            _loc8_ = this.parent.globalToLocal(_loc8_);
            _loc5_.move(_loc8_.x,_loc8_.y);
            if(_loc5_ is IInvalidating)
            {
               IInvalidating(_loc5_).validateNow();
            }
            else if(_loc5_ is IProgrammaticSkin)
            {
               IProgrammaticSkin(_loc5_).validateNow();
            }
         }
      }
      
      protected function dispatchPropertyChangeEvent(param1:String, param2:*, param3:*) : void
      {
         if(hasEventListener("propertyChange"))
         {
            this.dispatchEvent(PropertyChangeEvent.createUpdateEvent(this,param1,param2,param3));
         }
      }
      
      private function dispatchMoveEvent() : void
      {
         var _loc1_:MoveEvent = null;
         if(hasEventListener(MoveEvent.MOVE))
         {
            _loc1_ = new MoveEvent(MoveEvent.MOVE);
            _loc1_.oldX = this.oldX;
            _loc1_.oldY = this.oldY;
            this.dispatchEvent(_loc1_);
         }
         this.oldX = this.x;
         this.oldY = this.y;
      }
      
      private function dispatchResizeEvent() : void
      {
         var _loc1_:ResizeEvent = null;
         if(hasEventListener(ResizeEvent.RESIZE))
         {
            _loc1_ = new ResizeEvent(ResizeEvent.RESIZE);
            _loc1_.oldWidth = this.oldWidth;
            _loc1_.oldHeight = this.oldHeight;
            this.dispatchEvent(_loc1_);
         }
         this.oldWidth = this.width;
         this.oldHeight = this.height;
      }
      
      mx_internal function childXYChanged() : void
      {
      }
      
      public function setCurrentState(param1:String, param2:Boolean = true) : void
      {
         param1 = this.isBaseState(param1) ? this.getDefaultState() : param1;
         if(param1 != this.currentState && !(this.isBaseState(param1) && this.isBaseState(this.currentState)))
         {
            this.requestedCurrentState = param1;
            this.playStateTransition = this is IStateClient2 && this.isBaseState(this.currentState) ? false : param2;
            if(this.initialized)
            {
               this.commitCurrentState();
            }
            else
            {
               this._currentStateChanged = true;
               this.invalidateProperties();
            }
         }
      }
      
      public function hasState(param1:String) : Boolean
      {
         return this.getState(param1,false) != null;
      }
      
      private function isBaseState(param1:String) : Boolean
      {
         return !param1 || param1 == "";
      }
      
      private function getDefaultState() : String
      {
         return this is IStateClient2 && this.states.length > 0 ? this.states[0].name : null;
      }
      
      private function commitCurrentState() : void
      {
         var _loc3_:StateChangeEvent = null;
         var _loc6_:Number = NaN;
         var _loc1_:Transition = this.playStateTransition ? this.getTransition(this._currentState,this.requestedCurrentState) : null;
         var _loc2_:String = this.findCommonBaseState(this._currentState,this.requestedCurrentState);
         var _loc4_:String = this._currentState ? this._currentState : "";
         var _loc5_:State = this.getState(this.requestedCurrentState);
         if(this._currentTransition)
         {
            if(this._currentTransition.autoReverse && this.transitionFromState == this.requestedCurrentState && this.transitionToState == this._currentState)
            {
               if(this._currentTransition.effect.duration == 0)
               {
                  _loc6_ = 0;
               }
               else
               {
                  _loc6_ = this._currentTransition.effect.playheadTime / this.getTotalDuration(this._currentTransition.effect);
               }
            }
            this._currentTransition.effect.end();
         }
         this.initializeState(this.requestedCurrentState);
         if(_loc1_)
         {
            _loc1_.effect.captureStartValues();
         }
         if(hasEventListener(StateChangeEvent.CURRENT_STATE_CHANGING))
         {
            _loc3_ = new StateChangeEvent(StateChangeEvent.CURRENT_STATE_CHANGING);
            _loc3_.oldState = _loc4_;
            _loc3_.newState = this.requestedCurrentState ? this.requestedCurrentState : "";
            this.dispatchEvent(_loc3_);
         }
         if(this.isBaseState(this._currentState) && hasEventListener(FlexEvent.EXIT_STATE))
         {
            this.dispatchEvent(new FlexEvent(FlexEvent.EXIT_STATE));
         }
         this.removeState(this._currentState,_loc2_);
         this._currentState = this.requestedCurrentState;
         this.stateChanged(_loc4_,this._currentState,true);
         if(this.isBaseState(this.currentState))
         {
            if(hasEventListener(FlexEvent.ENTER_STATE))
            {
               this.dispatchEvent(new FlexEvent(FlexEvent.ENTER_STATE));
            }
         }
         else
         {
            this.applyState(this._currentState,_loc2_);
         }
         if(hasEventListener(StateChangeEvent.CURRENT_STATE_CHANGE))
         {
            _loc3_ = new StateChangeEvent(StateChangeEvent.CURRENT_STATE_CHANGE);
            _loc3_.oldState = _loc4_;
            _loc3_.newState = this._currentState ? this._currentState : "";
            this.dispatchEvent(_loc3_);
         }
         if(_loc1_)
         {
            UIComponentGlobals.mx_internal::layoutManager.validateNow();
            this._currentTransition = _loc1_;
            this.transitionFromState = _loc4_;
            this.transitionToState = this._currentState;
            _loc1_.effect.addEventListener(EffectEvent.EFFECT_END,this.transition_effectEndHandler);
            _loc1_.effect.play();
            if(!isNaN(_loc6_) && _loc1_.effect.duration != 0)
            {
               _loc1_.effect.playheadTime = (1 - _loc6_) * this.getTotalDuration(_loc1_.effect);
            }
         }
      }
      
      private function getTotalDuration(param1:IEffect) : Number
      {
         var _loc2_:Number = 0;
         var _loc3_:Object = Object(param1);
         if(!compositeEffectLoaded)
         {
            compositeEffectLoaded = true;
            if(ApplicationDomain.currentDomain.hasDefinition("mx.effects.CompositeEffect"))
            {
               compositeEffectType = Class(ApplicationDomain.currentDomain.getDefinition("mx.effects.CompositeEffect"));
            }
         }
         if(Boolean(compositeEffectType) && param1 is compositeEffectType)
         {
            _loc2_ = Number(_loc3_.compositeDuration);
         }
         else
         {
            _loc2_ = param1.duration;
         }
         var _loc4_:int = "repeatDelay" in param1 ? int(_loc3_.repeatDelay) : 0;
         var _loc5_:int = "repeatCount" in param1 ? int(_loc3_.repeatCount) : 0;
         var _loc6_:int = "startDelay" in param1 ? int(_loc3_.startDelay) : 0;
         return _loc2_ * _loc5_ + _loc4_ * (_loc5_ - 1) + _loc6_;
      }
      
      private function transition_effectEndHandler(param1:EffectEvent) : void
      {
         this._currentTransition = null;
      }
      
      private function getState(param1:String, param2:Boolean = true) : State
      {
         var _loc4_:String = null;
         if(!this.states || this.isBaseState(param1))
         {
            return null;
         }
         var _loc3_:int = 0;
         while(_loc3_ < this.states.length)
         {
            if(this.states[_loc3_].name == param1)
            {
               return this.states[_loc3_];
            }
            _loc3_++;
         }
         if(param2)
         {
            _loc4_ = this.resourceManager.getString("core","stateUndefined",[param1]);
            throw new ArgumentError(_loc4_);
         }
         return null;
      }
      
      private function findCommonBaseState(param1:String, param2:String) : String
      {
         var _loc3_:State = this.getState(param1);
         var _loc4_:State = this.getState(param2);
         if(!_loc3_ || !_loc4_)
         {
            return "";
         }
         if(this.isBaseState(_loc3_.basedOn) && this.isBaseState(_loc4_.basedOn))
         {
            return "";
         }
         var _loc5_:Array = this.getBaseStates(_loc3_);
         var _loc6_:Array = this.getBaseStates(_loc4_);
         var _loc7_:String = "";
         while(_loc5_[_loc5_.length - 1] == _loc6_[_loc6_.length - 1])
         {
            _loc7_ = _loc5_.pop();
            _loc6_.pop();
            if(!_loc5_.length || !_loc6_.length)
            {
               break;
            }
         }
         if(Boolean(_loc5_.length) && _loc5_[_loc5_.length - 1] == _loc4_.name)
         {
            _loc7_ = _loc4_.name;
         }
         else if(Boolean(_loc6_.length) && _loc6_[_loc6_.length - 1] == _loc3_.name)
         {
            _loc7_ = _loc3_.name;
         }
         return _loc7_;
      }
      
      private function getBaseStates(param1:State) : Array
      {
         var _loc2_:Array = [];
         while(Boolean(param1) && Boolean(param1.basedOn))
         {
            _loc2_.push(param1.basedOn);
            param1 = this.getState(param1.basedOn);
         }
         return _loc2_;
      }
      
      private function removeState(param1:String, param2:String) : void
      {
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc3_:State = this.getState(param1);
         if(param1 == param2)
         {
            return;
         }
         if(_loc3_)
         {
            _loc3_.mx_internal::dispatchExitState();
            _loc4_ = _loc3_.overrides;
            _loc5_ = int(_loc4_.length);
            while(_loc5_)
            {
               _loc4_[_loc5_ - 1].remove(this);
               _loc5_--;
            }
            if(_loc3_.basedOn != param2)
            {
               this.removeState(_loc3_.basedOn,param2);
            }
         }
      }
      
      private function applyState(param1:String, param2:String) : void
      {
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc3_:State = this.getState(param1);
         if(param1 == param2)
         {
            return;
         }
         if(_loc3_)
         {
            if(_loc3_.basedOn != param2)
            {
               this.applyState(_loc3_.basedOn,param2);
            }
            _loc4_ = _loc3_.overrides;
            _loc5_ = 0;
            while(_loc5_ < _loc4_.length)
            {
               _loc4_[_loc5_].apply(this);
               _loc5_++;
            }
            _loc3_.mx_internal::dispatchEnterState();
         }
      }
      
      private function initializeState(param1:String) : void
      {
         var _loc2_:State = this.getState(param1);
         while(_loc2_)
         {
            _loc2_.mx_internal::initialize();
            _loc2_ = this.getState(_loc2_.basedOn);
         }
      }
      
      private function getTransition(param1:String, param2:String) : Transition
      {
         var _loc6_:Transition = null;
         var _loc3_:Transition = null;
         var _loc4_:int = 0;
         if(!this.transitions)
         {
            return null;
         }
         if(!param1)
         {
            param1 = "";
         }
         if(!param2)
         {
            param2 = "";
         }
         var _loc5_:int = 0;
         while(_loc5_ < this.transitions.length)
         {
            _loc6_ = this.transitions[_loc5_];
            if(_loc6_.fromState == "*" && _loc6_.toState == "*" && _loc4_ < 1)
            {
               _loc3_ = _loc6_;
               _loc4_ = 1;
            }
            else if(_loc6_.fromState == param1 && _loc6_.toState == "*" && _loc4_ < 2)
            {
               _loc3_ = _loc6_;
               _loc4_ = 2;
            }
            else if(_loc6_.fromState == "*" && _loc6_.toState == param2 && _loc4_ < 3)
            {
               _loc3_ = _loc6_;
               _loc4_ = 3;
            }
            else if(_loc6_.fromState == param1 && _loc6_.toState == param2 && _loc4_ < 4)
            {
               _loc3_ = _loc6_;
               _loc4_ = 4;
               break;
            }
            _loc5_++;
         }
         if(Boolean(_loc3_) && !_loc3_.effect)
         {
            _loc3_ = null;
         }
         return _loc3_;
      }
      
      protected function get currentCSSState() : String
      {
         return this.currentState;
      }
      
      public function get styleParent() : IAdvancedStyleClient
      {
         return this.parent as IAdvancedStyleClient;
      }
      
      public function matchesCSSState(param1:String) : Boolean
      {
         return this.currentCSSState == param1;
      }
      
      public function matchesCSSType(param1:String) : Boolean
      {
         return StyleProtoChain.matchesCSSType(this,param1);
      }
      
      mx_internal function initProtoChain() : void
      {
         StyleProtoChain.initProtoChain(this);
      }
      
      public function getClassStyleDeclarations() : Array
      {
         return StyleProtoChain.getClassStyleDeclarations(this);
      }
      
      public function regenerateStyleCache(param1:Boolean) : void
      {
         var _loc5_:Object = null;
         this.mx_internal::initProtoChain();
         var _loc2_:IChildList = this is IRawChildrenContainer ? IRawChildrenContainer(this).rawChildren : IChildList(this);
         var _loc3_:int = _loc2_.numChildren;
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_)
         {
            _loc5_ = _loc2_.getChildAt(_loc4_);
            if(_loc5_ is IStyleClient)
            {
               if(IStyleClient(_loc5_).inheritingStyles != StyleProtoChain.STYLE_UNINITIALIZED)
               {
                  IStyleClient(_loc5_).regenerateStyleCache(param1);
               }
            }
            else if(_loc5_ is IUITextField)
            {
               if(IUITextField(_loc5_).inheritingStyles)
               {
                  StyleProtoChain.initTextField(IUITextField(_loc5_));
               }
            }
            _loc4_++;
         }
      }
      
      protected function stateChanged(param1:String, param2:String, param3:Boolean) : void
      {
         if(this.currentCSSState && param1 != param2 && (this.styleManager.hasPseudoCondition(param1) || this.styleManager.hasPseudoCondition(param2)))
         {
            this.regenerateStyleCache(param3);
            this.mx_internal::initThemeColor();
            this.styleChanged(null);
            this.notifyStyleChangeInChildren(null,param3);
         }
      }
      
      [Bindable(style="true")]
      public function getStyle(param1:String) : *
      {
         if(!this.moduleFactory)
         {
            if(Boolean(this.deferredSetStyles) && this.deferredSetStyles[param1] !== undefined)
            {
               return this.deferredSetStyles[param1];
            }
         }
         return this.styleManager.inheritingStyles[param1] ? this._inheritingStyles[param1] : this._nonInheritingStyles[param1];
      }
      
      public function setStyle(param1:String, param2:*) : void
      {
         if(this.moduleFactory)
         {
            StyleProtoChain.setStyle(this,param1,param2);
         }
         else
         {
            if(!this.deferredSetStyles)
            {
               this.deferredSetStyles = new Object();
            }
            this.deferredSetStyles[param1] = param2;
         }
      }
      
      private function setDeferredStyles() : void
      {
         var _loc1_:String = null;
         if(!this.deferredSetStyles)
         {
            return;
         }
         for(_loc1_ in this.deferredSetStyles)
         {
            StyleProtoChain.setStyle(this,_loc1_,this.deferredSetStyles[_loc1_]);
         }
         this.deferredSetStyles = null;
      }
      
      public function clearStyle(param1:String) : void
      {
         this.setStyle(param1,undefined);
      }
      
      public function notifyStyleChangeInChildren(param1:String, param2:Boolean) : void
      {
         var _loc5_:ISimpleStyleClient = null;
         this.cachedTextFormat = null;
         var _loc3_:int = numChildren;
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_)
         {
            _loc5_ = getChildAt(_loc4_) as ISimpleStyleClient;
            if(_loc5_)
            {
               _loc5_.styleChanged(param1);
               if(_loc5_ is IStyleClient)
               {
                  IStyleClient(_loc5_).notifyStyleChangeInChildren(param1,param2);
               }
            }
            _loc4_++;
         }
      }
      
      mx_internal function initThemeColor() : Boolean
      {
         var _loc2_:Object = null;
         var _loc3_:Number = NaN;
         var _loc4_:Number = NaN;
         var _loc5_:int = 0;
         var _loc6_:Array = null;
         var _loc7_:CSSStyleDeclaration = null;
         var _loc8_:Object = null;
         var _loc9_:Array = null;
         var _loc10_:CSSStyleDeclaration = null;
         if(FlexVersion.compatibilityVersion >= FlexVersion.VERSION_4_0)
         {
            return true;
         }
         var _loc1_:Object = this._styleName;
         if(this._styleDeclaration)
         {
            _loc2_ = this._styleDeclaration.getStyle("themeColor");
            _loc3_ = this._styleDeclaration.getStyle("rollOverColor");
            _loc4_ = this._styleDeclaration.getStyle("selectionColor");
         }
         if(this.styleManager.hasAdvancedSelectors())
         {
            if(_loc2_ === null || !this.styleManager.isValidStyleValue(_loc2_))
            {
               _loc6_ = StyleProtoChain.getMatchingStyleDeclarations(this);
               _loc5_ = int(_loc6_.length - 1);
               while(_loc5_ >= 0)
               {
                  _loc7_ = _loc6_[_loc5_];
                  if(_loc7_)
                  {
                     _loc2_ = _loc7_.getStyle("themeColor");
                     _loc3_ = _loc7_.getStyle("rollOverColor");
                     _loc4_ = _loc7_.getStyle("selectionColor");
                  }
                  if(_loc2_ !== null && Boolean(this.styleManager.isValidStyleValue(_loc2_)))
                  {
                     break;
                  }
                  _loc5_--;
               }
            }
         }
         else
         {
            if((_loc2_ === null || !this.styleManager.isValidStyleValue(_loc2_)) && (_loc1_ && !(_loc1_ is ISimpleStyleClient)))
            {
               _loc8_ = _loc1_ is String ? this.styleManager.getMergedStyleDeclaration("." + _loc1_) : _loc1_;
               if(_loc8_)
               {
                  _loc2_ = _loc8_.getStyle("themeColor");
                  _loc3_ = Number(_loc8_.getStyle("rollOverColor"));
                  _loc4_ = Number(_loc8_.getStyle("selectionColor"));
               }
            }
            if(_loc2_ === null || !this.styleManager.isValidStyleValue(_loc2_))
            {
               _loc9_ = this.getClassStyleDeclarations();
               _loc5_ = 0;
               while(_loc5_ < _loc9_.length)
               {
                  _loc10_ = _loc9_[_loc5_];
                  if(_loc10_)
                  {
                     _loc2_ = _loc10_.getStyle("themeColor");
                     _loc3_ = _loc10_.getStyle("rollOverColor");
                     _loc4_ = _loc10_.getStyle("selectionColor");
                  }
                  if(_loc2_ !== null && Boolean(this.styleManager.isValidStyleValue(_loc2_)))
                  {
                     break;
                  }
                  _loc5_++;
               }
            }
         }
         if(_loc2_ !== null && Boolean(this.styleManager.isValidStyleValue(_loc2_)) && isNaN(_loc3_) && isNaN(_loc4_))
         {
            this.mx_internal::setThemeColor(_loc2_);
            return true;
         }
         return _loc2_ !== null && Boolean(this.styleManager.isValidStyleValue(_loc2_)) && !isNaN(_loc3_) && !isNaN(_loc4_);
      }
      
      mx_internal function setThemeColor(param1:Object) : void
      {
         var _loc2_:Number = NaN;
         if(_loc2_ is String)
         {
            _loc2_ = parseInt(String(param1));
         }
         else
         {
            _loc2_ = Number(param1);
         }
         if(isNaN(_loc2_))
         {
            _loc2_ = Number(this.styleManager.getColorName(param1));
         }
         var _loc3_:Number = ColorUtil.adjustBrightness2(_loc2_,50);
         var _loc4_:Number = ColorUtil.adjustBrightness2(_loc2_,70);
         this.setStyle("selectionColor",_loc3_);
         this.setStyle("rollOverColor",_loc4_);
      }
      
      public function determineTextFormatFromStyles() : UITextFormat
      {
         var _loc2_:String = null;
         var _loc3_:String = null;
         var _loc1_:UITextFormat = this.cachedTextFormat;
         if(!_loc1_)
         {
            _loc2_ = StringUtil.trimArrayElements(this._inheritingStyles.fontFamily,",");
            _loc1_ = new UITextFormat(this.mx_internal::getNonNullSystemManager(),_loc2_);
            _loc1_.moduleFactory = this.moduleFactory;
            _loc3_ = this._inheritingStyles.textAlign;
            if(_loc3_ == "start")
            {
               _loc3_ = TextFormatAlign.LEFT;
            }
            else if(_loc3_ == "end")
            {
               _loc3_ = TextFormatAlign.RIGHT;
            }
            _loc1_.align = _loc3_;
            _loc1_.bold = this._inheritingStyles.fontWeight == "bold";
            _loc1_.color = this.enabled ? this._inheritingStyles.color : this._inheritingStyles.disabledColor;
            _loc1_.font = _loc2_;
            _loc1_.indent = this._inheritingStyles.textIndent;
            _loc1_.italic = this._inheritingStyles.fontStyle == "italic";
            _loc1_.kerning = this._inheritingStyles.kerning;
            _loc1_.leading = this._nonInheritingStyles.leading;
            _loc1_.leftMargin = this._nonInheritingStyles.paddingLeft;
            _loc1_.letterSpacing = this._inheritingStyles.letterSpacing;
            _loc1_.rightMargin = this._nonInheritingStyles.paddingRight;
            _loc1_.size = this._inheritingStyles.fontSize;
            _loc1_.underline = this._nonInheritingStyles.textDecoration == "underline";
            _loc1_.antiAliasType = this._inheritingStyles.fontAntiAliasType;
            _loc1_.gridFitType = this._inheritingStyles.fontGridFitType;
            _loc1_.sharpness = this._inheritingStyles.fontSharpness;
            _loc1_.thickness = this._inheritingStyles.fontThickness;
            _loc1_.useFTE = this.getTextFieldClassName() == "mx.core::UIFTETextField" || this.getTextInputClassName() == "mx.controls::MXFTETextInput";
            if(_loc1_.useFTE)
            {
               _loc1_.direction = this._inheritingStyles.direction;
               _loc1_.locale = this._inheritingStyles.locale;
            }
            this.cachedTextFormat = _loc1_;
         }
         return _loc1_;
      }
      
      public function executeBindings(param1:Boolean = false) : void
      {
         var _loc2_:Object = Boolean(this.descriptor) && Boolean(this.descriptor.document) ? this.descriptor.document : this.parentDocument;
         BindingManager.executeBindings(_loc2_,this.id,this);
      }
      
      public function registerEffects(param1:Array) : void
      {
         var _loc4_:String = null;
         var _loc2_:int = int(param1.length);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            _loc4_ = EffectManager.mx_internal::getEventForEffectTrigger(param1[_loc3_]);
            if(_loc4_ != null && _loc4_ != "")
            {
               addEventListener(_loc4_,EffectManager.mx_internal::eventHandler,false,EventPriority.EFFECT);
            }
            _loc3_++;
         }
      }
      
      mx_internal function addOverlay(param1:uint, param2:RoundedRectangle = null) : void
      {
         if(!this.mx_internal::effectOverlay)
         {
            this.mx_internal::effectOverlayColor = param1;
            this.mx_internal::effectOverlay = new UIComponent();
            this.mx_internal::effectOverlay.name = "overlay";
            this.mx_internal::effectOverlay.mx_internal::$visible = true;
            this.mx_internal::fillOverlay(this.mx_internal::effectOverlay,param1,param2);
            this.attachOverlay();
            if(!param2)
            {
               addEventListener(ResizeEvent.RESIZE,this.overlay_resizeHandler);
            }
            this.mx_internal::effectOverlay.x = 0;
            this.mx_internal::effectOverlay.y = 0;
            this.invalidateDisplayList();
            this.mx_internal::effectOverlayReferenceCount = 1;
         }
         else
         {
            ++this.mx_internal::effectOverlayReferenceCount;
         }
         this.dispatchEvent(new ChildExistenceChangedEvent(ChildExistenceChangedEvent.OVERLAY_CREATED,true,false,this.mx_internal::effectOverlay));
      }
      
      protected function attachOverlay() : void
      {
         this.addChild(this.mx_internal::effectOverlay);
      }
      
      mx_internal function fillOverlay(param1:UIComponent, param2:uint, param3:RoundedRectangle = null) : void
      {
         if(!param3)
         {
            param3 = new RoundedRectangle(0,0,this.unscaledWidth,this.unscaledHeight,0);
         }
         var _loc4_:Graphics = param1.graphics;
         _loc4_.clear();
         _loc4_.beginFill(param2);
         _loc4_.drawRoundRect(param3.x,param3.y,param3.width,param3.height,param3.cornerRadius * 2,param3.cornerRadius * 2);
         _loc4_.endFill();
      }
      
      mx_internal function removeOverlay() : void
      {
         if(this.mx_internal::effectOverlayReferenceCount > 0 && --this.mx_internal::effectOverlayReferenceCount == 0 && Boolean(this.mx_internal::effectOverlay))
         {
            removeEventListener(ResizeEvent.RESIZE,this.overlay_resizeHandler);
            if(super.getChildByName("overlay"))
            {
               this.mx_internal::$removeChild(this.mx_internal::effectOverlay);
            }
            this.mx_internal::effectOverlay = null;
         }
      }
      
      private function overlay_resizeHandler(param1:Event) : void
      {
         this.mx_internal::fillOverlay(this.mx_internal::effectOverlay,this.mx_internal::effectOverlayColor,null);
      }
      
      mx_internal function get isEffectStarted() : Boolean
      {
         return this._isEffectStarted;
      }
      
      mx_internal function set isEffectStarted(param1:Boolean) : void
      {
         this._isEffectStarted = param1;
      }
      
      public function effectStarted(param1:IEffectInstance) : void
      {
         var _loc4_:String = null;
         this.mx_internal::_effectsStarted.push(param1);
         var _loc2_:Array = param1.effect.getAffectedProperties();
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_.length)
         {
            _loc4_ = _loc2_[_loc3_];
            if(this.mx_internal::_affectedProperties[_loc4_] == undefined)
            {
               this.mx_internal::_affectedProperties[_loc4_] = [];
            }
            this.mx_internal::_affectedProperties[_loc4_].push(param1);
            _loc3_++;
         }
         this.mx_internal::isEffectStarted = true;
         if(param1.hideFocusRing)
         {
            this.preventDrawFocus = true;
            this.drawFocus(false);
         }
      }
      
      public function effectFinished(param1:IEffectInstance) : void
      {
         this._endingEffectInstances.push(param1);
         this.invalidateProperties();
         UIComponentGlobals.mx_internal::layoutManager.addEventListener(FlexEvent.UPDATE_COMPLETE,this.updateCompleteHandler,false,0,true);
      }
      
      public function endEffectsStarted() : void
      {
         var _loc1_:int = int(this.mx_internal::_effectsStarted.length);
         var _loc2_:int = 0;
         while(_loc2_ < _loc1_)
         {
            this.mx_internal::_effectsStarted[_loc2_].end();
            _loc2_++;
         }
      }
      
      private function updateCompleteHandler(param1:FlexEvent) : void
      {
         UIComponentGlobals.mx_internal::layoutManager.removeEventListener(FlexEvent.UPDATE_COMPLETE,this.updateCompleteHandler);
         this.processEffectFinished(this._endingEffectInstances);
         this._endingEffectInstances = [];
      }
      
      private function processEffectFinished(param1:Array) : void
      {
         var _loc3_:int = 0;
         var _loc4_:IEffectInstance = null;
         var _loc5_:IEffectInstance = null;
         var _loc6_:Array = null;
         var _loc7_:int = 0;
         var _loc8_:String = null;
         var _loc9_:int = 0;
         var _loc2_:int = int(this.mx_internal::_effectsStarted.length - 1);
         while(_loc2_ >= 0)
         {
            _loc3_ = 0;
            while(_loc3_ < param1.length)
            {
               _loc4_ = param1[_loc3_];
               if(_loc4_ == this.mx_internal::_effectsStarted[_loc2_])
               {
                  _loc5_ = this.mx_internal::_effectsStarted[_loc2_];
                  this.mx_internal::_effectsStarted.splice(_loc2_,1);
                  _loc6_ = _loc5_.effect.getAffectedProperties();
                  _loc7_ = 0;
                  while(_loc7_ < _loc6_.length)
                  {
                     _loc8_ = _loc6_[_loc7_];
                     if(this.mx_internal::_affectedProperties[_loc8_] != undefined)
                     {
                        _loc9_ = 0;
                        while(_loc9_ < this.mx_internal::_affectedProperties[_loc8_].length)
                        {
                           if(this.mx_internal::_affectedProperties[_loc8_][_loc9_] == _loc4_)
                           {
                              this.mx_internal::_affectedProperties[_loc8_].splice(_loc9_,1);
                              break;
                           }
                           _loc9_++;
                        }
                        if(this.mx_internal::_affectedProperties[_loc8_].length == 0)
                        {
                           delete this.mx_internal::_affectedProperties[_loc8_];
                        }
                     }
                     _loc7_++;
                  }
                  break;
               }
               _loc3_++;
            }
            _loc2_--;
         }
         this.mx_internal::isEffectStarted = this.mx_internal::_effectsStarted.length > 0 ? true : false;
         if(Boolean(_loc4_) && _loc4_.hideFocusRing)
         {
            this.preventDrawFocus = false;
         }
      }
      
      mx_internal function getEffectsForProperty(param1:String) : Array
      {
         return this.mx_internal::_affectedProperties[param1] != undefined ? this.mx_internal::_affectedProperties[param1] : [];
      }
      
      public function createReferenceOnParentDocument(param1:IFlexDisplayObject) : void
      {
         var _loc2_:Array = null;
         var _loc3_:Object = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:Object = null;
         var _loc7_:PropertyChangeEvent = null;
         if(Boolean(this.id) && this.id != "")
         {
            _loc2_ = this._instanceIndices;
            if(!_loc2_)
            {
               param1[this.id] = this;
            }
            else
            {
               _loc3_ = param1[this.id];
               if(!(_loc3_ is Array))
               {
                  _loc3_ = param1[this.id] = [];
               }
               _loc4_ = int(_loc2_.length);
               _loc5_ = 0;
               while(_loc5_ < _loc4_ - 1)
               {
                  _loc6_ = _loc3_[_loc2_[_loc5_]];
                  if(!(_loc6_ is Array))
                  {
                     _loc6_ = _loc3_[_loc2_[_loc5_]] = [];
                  }
                  _loc3_ = _loc6_;
                  _loc5_++;
               }
               _loc3_[_loc2_[_loc4_ - 1]] = this;
               if(param1.hasEventListener("propertyChange"))
               {
                  _loc7_ = PropertyChangeEvent.createUpdateEvent(param1,this.id,param1[this.id],param1[this.id]);
                  param1.dispatchEvent(_loc7_);
               }
            }
         }
      }
      
      public function deleteReferenceOnParentDocument(param1:IFlexDisplayObject) : void
      {
         var _loc2_:Array = null;
         var _loc3_:Object = null;
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:Object = null;
         var _loc9_:PropertyChangeEvent = null;
         if(Boolean(this.id) && this.id != "")
         {
            _loc2_ = this._instanceIndices;
            if(!_loc2_)
            {
               param1[this.id] = null;
            }
            else
            {
               _loc3_ = param1[this.id];
               if(!_loc3_)
               {
                  return;
               }
               _loc4_ = [];
               _loc4_.push(_loc3_);
               _loc5_ = int(_loc2_.length);
               _loc6_ = 0;
               while(_loc6_ < _loc5_ - 1)
               {
                  _loc8_ = _loc3_[_loc2_[_loc6_]];
                  if(!_loc8_)
                  {
                     return;
                  }
                  _loc3_ = _loc8_;
                  _loc4_.push(_loc3_);
                  _loc6_++;
               }
               _loc3_.splice(_loc2_[_loc5_ - 1],1);
               _loc7_ = int(_loc4_.length - 1);
               while(_loc7_ > 0)
               {
                  if(_loc4_[_loc7_].length == 0)
                  {
                     _loc4_[_loc7_ - 1].splice(_loc2_[_loc7_],1);
                  }
                  _loc7_--;
               }
               if(_loc4_.length > 0 && _loc4_[0].length == 0)
               {
                  param1[this.id] = null;
               }
               else if(param1.hasEventListener("propertyChange"))
               {
                  _loc9_ = PropertyChangeEvent.createUpdateEvent(param1,this.id,param1[this.id],param1[this.id]);
                  param1.dispatchEvent(_loc9_);
               }
            }
         }
      }
      
      public function getRepeaterItem(param1:int = -1) : Object
      {
         var _loc2_:Array = this.repeaters;
         if(_loc2_.length == 0)
         {
            return null;
         }
         if(param1 == -1)
         {
            param1 = int(_loc2_.length - 1);
         }
         return _loc2_[param1].getItemAt(this.repeaterIndices[param1]);
      }
      
      protected function resourcesChanged() : void
      {
      }
      
      public function prepareToPrint(param1:IFlexDisplayObject) : Object
      {
         return null;
      }
      
      public function finishPrint(param1:Object, param2:IFlexDisplayObject) : void
      {
      }
      
      private function callLaterDispatcher(param1:Event) : void
      {
         var callLaterErrorEvent:DynamicEvent = null;
         var event:Event = param1;
         ++UIComponentGlobals.mx_internal::callLaterDispatcherCount;
         if(!UIComponentGlobals.catchCallLaterExceptions)
         {
            this.callLaterDispatcher2(event);
         }
         else
         {
            try
            {
               this.callLaterDispatcher2(event);
            }
            catch(e:Error)
            {
               callLaterErrorEvent = new DynamicEvent("callLaterError");
               callLaterErrorEvent.error = e;
               callLaterErrorEvent.source = this;
               systemManager.dispatchEvent(callLaterErrorEvent);
            }
         }
         --UIComponentGlobals.mx_internal::callLaterDispatcherCount;
      }
      
      private function callLaterDispatcher2(param1:Event) : void
      {
         var _loc6_:MethodQueueElement = null;
         if(UIComponentGlobals.mx_internal::callLaterSuspendCount > 0)
         {
            return;
         }
         var _loc2_:ISystemManager = this.systemManager;
         if(_loc2_ && (_loc2_.stage || this.usingBridge) && this.listeningForRender)
         {
            _loc2_.removeEventListener(FlexEvent.RENDER,this.callLaterDispatcher);
            _loc2_.removeEventListener(FlexEvent.ENTER_FRAME,this.callLaterDispatcher);
            this.listeningForRender = false;
         }
         var _loc3_:Array = this.methodQueue;
         this.methodQueue = [];
         var _loc4_:int = int(_loc3_.length);
         var _loc5_:int = 0;
         while(_loc5_ < _loc4_)
         {
            _loc6_ = MethodQueueElement(_loc3_[_loc5_]);
            _loc6_.method.apply(null,_loc6_.args);
            _loc5_++;
         }
      }
      
      protected function keyDownHandler(param1:KeyboardEvent) : void
      {
      }
      
      protected function keyUpHandler(param1:KeyboardEvent) : void
      {
      }
      
      protected function isOurFocus(param1:DisplayObject) : Boolean
      {
         return param1 == this;
      }
      
      protected function focusInHandler(param1:FocusEvent) : void
      {
         var _loc2_:IFocusManager = null;
         if(this.isOurFocus(DisplayObject(param1.target)))
         {
            _loc2_ = this.focusManager;
            if(Boolean(_loc2_) && _loc2_.showFocusIndicator)
            {
               this.drawFocus(true);
            }
            ContainerGlobals.checkFocus(param1.relatedObject,this);
         }
      }
      
      protected function focusOutHandler(param1:FocusEvent) : void
      {
         if(this.isOurFocus(DisplayObject(param1.target)))
         {
            this.drawFocus(false);
         }
      }
      
      private function addedHandler(param1:Event) : void
      {
         var event:Event = param1;
         if(event.eventPhase != EventPhase.AT_TARGET)
         {
            return;
         }
         try
         {
            if(this.parent is IContainer && IContainer(this.parent).creatingContentPane)
            {
               event.stopImmediatePropagation();
               return;
            }
         }
         catch(error:SecurityError)
         {
         }
      }
      
      private function removedHandler(param1:Event) : void
      {
         var event:Event = param1;
         if(event.eventPhase != EventPhase.AT_TARGET)
         {
            return;
         }
         try
         {
            if(this.parent is IContainer && IContainer(this.parent).creatingContentPane)
            {
               event.stopImmediatePropagation();
               return;
            }
         }
         catch(error:SecurityError)
         {
         }
         this.invalidateSystemManager();
      }
      
      private function setFocusLater(param1:Event = null) : void
      {
         var _loc2_:ISystemManager = this.systemManager;
         if(Boolean(_loc2_) && Boolean(_loc2_.stage))
         {
            _loc2_.stage.removeEventListener(Event.ENTER_FRAME,this.setFocusLater);
            if(UIComponentGlobals.mx_internal::nextFocusObject)
            {
               _loc2_.stage.focus = UIComponentGlobals.mx_internal::nextFocusObject;
            }
            UIComponentGlobals.mx_internal::nextFocusObject = null;
         }
      }
      
      private function focusObj_scrollHandler(param1:Event) : void
      {
         this.adjustFocusRect();
      }
      
      private function focusObj_moveHandler(param1:MoveEvent) : void
      {
         this.adjustFocusRect();
      }
      
      private function focusObj_resizeHandler(param1:Event) : void
      {
         if(param1 is ResizeEvent)
         {
            this.adjustFocusRect();
         }
      }
      
      private function focusObj_removedHandler(param1:Event) : void
      {
         if(param1.target != this)
         {
            return;
         }
         var _loc2_:DisplayObject = this.mx_internal::getFocusObject();
         if(_loc2_)
         {
            _loc2_.visible = false;
         }
      }
      
      protected function layer_PropertyChange(param1:PropertyChangeEvent) : void
      {
         var _loc2_:Boolean = false;
         var _loc3_:Number = NaN;
         switch(param1.property)
         {
            case "effectiveVisibility":
               _loc2_ = Boolean(param1.newValue) && this._visible;
               if(_loc2_ != this.mx_internal::$visible)
               {
                  this.mx_internal::$visible = _loc2_;
               }
               break;
            case "effectiveAlpha":
               _loc3_ = Number(param1.newValue) * this._alpha;
               if(_loc3_ != this.mx_internal::$alpha)
               {
                  this.mx_internal::$alpha = _loc3_;
               }
         }
      }
      
      public function validationResultHandler(param1:ValidationResultEvent) : void
      {
         var _loc3_:String = null;
         var _loc4_:ValidationResult = null;
         var _loc5_:int = 0;
         if(this.errorObjectArray === null)
         {
            this.errorObjectArray = new Array();
            this.errorArray = new Array();
         }
         var _loc2_:int = int(this.errorObjectArray.indexOf(param1.target));
         if(param1.type == ValidationResultEvent.VALID)
         {
            if(_loc2_ != -1)
            {
               this.errorObjectArray.splice(_loc2_,1);
               this.errorArray.splice(_loc2_,1);
               this.errorString = this.errorArray.join("\n");
               if(this.errorArray.length == 0)
               {
                  this.dispatchEvent(new FlexEvent(FlexEvent.VALID));
               }
            }
         }
         else
         {
            if(this.validationSubField != null && this.validationSubField != "" && Boolean(param1.results))
            {
               _loc5_ = 0;
               while(_loc5_ < param1.results.length)
               {
                  _loc4_ = param1.results[_loc5_];
                  if(_loc4_.subField == this.validationSubField)
                  {
                     if(_loc4_.isError)
                     {
                        _loc3_ = _loc4_.errorMessage;
                        break;
                     }
                     if(_loc2_ != -1)
                     {
                        this.errorObjectArray.splice(_loc2_,1);
                        this.errorArray.splice(_loc2_,1);
                        this.errorString = this.errorArray.join("\n");
                        if(this.errorArray.length == 0)
                        {
                           this.dispatchEvent(new FlexEvent(FlexEvent.VALID));
                        }
                     }
                     break;
                  }
                  _loc5_++;
               }
            }
            else if(Boolean(param1.results) && param1.results.length > 0)
            {
               _loc3_ = param1.results[0].errorMessage;
            }
            if(_loc3_ && _loc2_ != -1 && this.errorArray[_loc2_] != _loc3_)
            {
               this.errorArray[_loc2_] = _loc3_;
               this.errorString = this.errorArray.join("\n");
               this.dispatchEvent(new FlexEvent(FlexEvent.INVALID));
            }
            else if(Boolean(_loc3_) && _loc2_ == -1)
            {
               this.errorObjectArray.push(param1.target);
               this.errorArray.push(_loc3_);
               this.errorString = this.errorArray.join("\n");
               this.dispatchEvent(new FlexEvent(FlexEvent.INVALID));
            }
         }
      }
      
      private function resourceManager_changeHandler(param1:Event) : void
      {
         this.resourcesChanged();
      }
      
      private function filterChangeHandler(param1:Event) : void
      {
         this.filters = this._filters;
      }
      
      public function owns(param1:DisplayObject) : Boolean
      {
         var child:DisplayObject = param1;
         var childList:IChildList = this is IRawChildrenContainer ? IRawChildrenContainer(this).rawChildren : IChildList(this);
         if(childList.contains(child))
         {
            return true;
         }
         try
         {
            while(Boolean(child) && child != this)
            {
               if(child is IUIComponent)
               {
                  child = IUIComponent(child).owner;
               }
               else
               {
                  child = child.parent;
               }
            }
         }
         catch(e:SecurityError)
         {
            return false;
         }
         return child == this;
      }
      
      mx_internal function getFontContext(param1:String, param2:Boolean, param3:Boolean, param4:* = undefined) : IFlexModuleFactory
      {
         if(noEmbeddedFonts)
         {
            return null;
         }
         var _loc5_:IEmbeddedFontRegistry = mx_internal::embeddedFontRegistry;
         return _loc5_ ? _loc5_.getAssociatedModuleFactory(param1,param2,param3,this,this.moduleFactory,this.systemManager,param4) : null;
      }
      
      protected function createInFontContext(param1:Class) : Object
      {
         this.hasFontContextBeenSaved = true;
         var _loc2_:String = StringUtil.trimArrayElements(this.getStyle("fontFamily"),",");
         var _loc3_:String = this.getStyle("fontWeight");
         var _loc4_:String = this.getStyle("fontStyle");
         var _loc5_:* = _loc3_ == "bold";
         var _loc6_:* = _loc4_ == "italic";
         var _loc7_:String = getQualifiedClassName(param1);
         if(_loc7_ == "mx.core::UITextField")
         {
            _loc7_ = this.getTextFieldClassName();
            if(_loc7_ == "mx.core::UIFTETextField")
            {
               param1 = Class(ApplicationDomain.currentDomain.getDefinition(_loc7_));
            }
         }
         this.oldEmbeddedFontContext = this.mx_internal::getFontContext(_loc2_,_loc5_,_loc6_,_loc7_ == "mx.core::UIFTETextField");
         var _loc8_:IFlexModuleFactory = this.oldEmbeddedFontContext ? this.oldEmbeddedFontContext : this.moduleFactory;
         var _loc9_:Object = this.createInModuleContext(_loc8_,_loc7_);
         if(_loc9_ == null)
         {
            _loc9_ = new param1();
         }
         if(_loc7_ == "mx.core::UIFTETextField")
         {
            _loc9_.fontContext = _loc8_;
         }
         return _loc9_;
      }
      
      private function getTextFieldClassName() : String
      {
         var _loc1_:Class = this.getStyle("textFieldClass");
         if(!_loc1_ || FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            return "mx.core::UITextField";
         }
         return getQualifiedClassName(_loc1_);
      }
      
      private function getTextInputClassName() : String
      {
         var _loc1_:Class = this.getStyle("textInputClass");
         if(!_loc1_ || FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            return "mx.core::TextInput";
         }
         return getQualifiedClassName(_loc1_);
      }
      
      protected function createInModuleContext(param1:IFlexModuleFactory, param2:String) : Object
      {
         var _loc3_:Object = null;
         if(param1)
         {
            _loc3_ = param1.create(param2);
         }
         return _loc3_;
      }
      
      public function hasFontContextChanged() : Boolean
      {
         if(!this.hasFontContextBeenSaved)
         {
            return false;
         }
         var _loc1_:String = StringUtil.trimArrayElements(this.getStyle("fontFamily"),",");
         var _loc2_:String = this.getStyle("fontWeight");
         var _loc3_:String = this.getStyle("fontStyle");
         var _loc4_:* = _loc2_ == "bold";
         var _loc5_:* = _loc3_ == "italic";
         var _loc6_:IFlexModuleFactory = noEmbeddedFonts ? null : mx_internal::embeddedFontRegistry.getAssociatedModuleFactory(_loc1_,_loc4_,_loc5_,this,this.moduleFactory,this.systemManager);
         return _loc6_ != this.oldEmbeddedFontContext;
      }
      
      public function createAutomationIDPart(param1:IAutomationObject) : Object
      {
         if(this.automationDelegate)
         {
            return this.automationDelegate.createAutomationIDPart(param1);
         }
         return null;
      }
      
      public function createAutomationIDPartWithRequiredProperties(param1:IAutomationObject, param2:Array) : Object
      {
         if(this.automationDelegate)
         {
            return this.automationDelegate.createAutomationIDPartWithRequiredProperties(param1,param2);
         }
         return null;
      }
      
      public function resolveAutomationIDPart(param1:Object) : Array
      {
         if(this.automationDelegate)
         {
            return this.automationDelegate.resolveAutomationIDPart(param1);
         }
         return [];
      }
      
      public function getAutomationChildAt(param1:int) : IAutomationObject
      {
         if(this.automationDelegate)
         {
            return this.automationDelegate.getAutomationChildAt(param1);
         }
         return null;
      }
      
      public function getAutomationChildren() : Array
      {
         if(this.automationDelegate)
         {
            return this.automationDelegate.getAutomationChildren();
         }
         return null;
      }
      
      public function get numAutomationChildren() : int
      {
         if(this.automationDelegate)
         {
            return this.automationDelegate.numAutomationChildren;
         }
         return 0;
      }
      
      public function get automationTabularData() : Object
      {
         if(this.automationDelegate)
         {
            return this.automationDelegate.automationTabularData;
         }
         return null;
      }
      
      public function get automationOwner() : DisplayObjectContainer
      {
         return this.owner;
      }
      
      public function get automationParent() : DisplayObjectContainer
      {
         return this.parent;
      }
      
      public function get automationEnabled() : Boolean
      {
         return this.enabled;
      }
      
      public function get automationVisible() : Boolean
      {
         return this.visible;
      }
      
      public function replayAutomatableEvent(param1:Event) : Boolean
      {
         if(this.automationDelegate)
         {
            return this.automationDelegate.replayAutomatableEvent(param1);
         }
         return false;
      }
      
      public function getVisibleRect(param1:DisplayObject = null) : Rectangle
      {
         if(!param1)
         {
            param1 = DisplayObject(this.systemManager);
         }
         var _loc2_:DisplayObject = this.mx_internal::$parent ? this.mx_internal::$parent : this.parent;
         if(!_loc2_)
         {
            return new Rectangle();
         }
         var _loc3_:Point = new Point(this.x,this.y);
         _loc3_ = _loc2_.localToGlobal(_loc3_);
         var _loc4_:Rectangle = new Rectangle(_loc3_.x,_loc3_.y,this.width,this.height);
         var _loc5_:DisplayObject = this;
         var _loc6_:Rectangle = new Rectangle();
         do
         {
            if(_loc5_ is UIComponent)
            {
               if(UIComponent(_loc5_).mx_internal::$parent)
               {
                  _loc5_ = UIComponent(_loc5_).mx_internal::$parent;
               }
               else
               {
                  _loc5_ = UIComponent(_loc5_).parent;
               }
            }
            else
            {
               _loc5_ = _loc5_.parent;
            }
            if(Boolean(_loc5_) && Boolean(_loc5_.scrollRect))
            {
               _loc6_ = _loc5_.scrollRect.clone();
               _loc3_ = _loc5_.localToGlobal(_loc6_.topLeft);
               _loc6_.x = _loc3_.x;
               _loc6_.y = _loc3_.y;
               _loc4_ = _loc4_.intersection(_loc6_);
            }
         }
         while(Boolean(_loc5_) && _loc5_ != param1);
         
         return _loc4_;
      }
      
      override public function dispatchEvent(param1:Event) : Boolean
      {
         if(mx_internal::dispatchEventHook != null)
         {
            mx_internal::dispatchEventHook(param1,this);
         }
         return super.dispatchEvent(param1);
      }
      
      override public function get mouseX() : Number
      {
         if(!root || root is Stage || root[fakeMouseX] === undefined)
         {
            return super.mouseX;
         }
         return globalToLocal(new Point(root[fakeMouseX],0)).x;
      }
      
      override public function get mouseY() : Number
      {
         if(!root || root is Stage || root[fakeMouseY] === undefined)
         {
            return super.mouseY;
         }
         return globalToLocal(new Point(0,root[fakeMouseY])).y;
      }
      
      protected function initAdvancedLayoutFeatures() : void
      {
         var _loc1_:AdvancedLayoutFeatures = new AdvancedLayoutFeatures();
         this._hasComplexLayoutMatrix = true;
         _loc1_.layoutScaleX = this.scaleX;
         _loc1_.layoutScaleY = this.scaleY;
         _loc1_.layoutScaleZ = this.scaleZ;
         _loc1_.layoutRotationX = this.rotationX;
         _loc1_.layoutRotationY = this.rotationY;
         _loc1_.layoutRotationZ = this.rotation;
         _loc1_.layoutX = this.x;
         _loc1_.layoutY = this.y;
         _loc1_.layoutZ = this.z;
         this.mx_internal::_layoutFeatures = _loc1_;
         this.invalidateTransform();
      }
      
      private function setTransform(param1:flash.geom.Transform) : void
      {
         var _loc2_:mx.geom.Transform = this._transform as mx.geom.Transform;
         if(_loc2_)
         {
            _loc2_.target = null;
         }
         var _loc3_:mx.geom.Transform = param1 as mx.geom.Transform;
         if(_loc3_)
         {
            _loc3_.target = this;
         }
         this._transform = param1;
      }
      
      mx_internal function get $transform() : flash.geom.Transform
      {
         return super.transform;
      }
      
      override public function get transform() : flash.geom.Transform
      {
         if(this._transform == null)
         {
            this.setTransform(new mx.geom.Transform(this));
         }
         return this._transform;
      }
      
      override public function set transform(param1:flash.geom.Transform) : void
      {
         var _loc2_:Matrix = param1.matrix;
         var _loc3_:Matrix3D = param1.matrix3D;
         var _loc4_:ColorTransform = param1.colorTransform;
         var _loc5_:PerspectiveProjection = param1.perspectiveProjection;
         var _loc6_:Boolean = this.is3D;
         var _loc7_:mx.geom.Transform = param1 as mx.geom.Transform;
         if(_loc7_)
         {
            if(!_loc7_.mx_internal::applyMatrix)
            {
               _loc2_ = null;
            }
            if(!_loc7_.mx_internal::applyMatrix3D)
            {
               _loc3_ = null;
            }
         }
         this.setTransform(param1);
         if(_loc2_ != null)
         {
            this.setLayoutMatrix(_loc2_.clone(),true);
         }
         else if(_loc3_ != null)
         {
            this.setLayoutMatrix3D(_loc3_.clone(),true);
         }
         super.transform.colorTransform = _loc4_;
         super.transform.perspectiveProjection = _loc5_;
         if(this.maintainProjectionCenter)
         {
            this.invalidateDisplayList();
         }
         if(_loc6_ != this.is3D)
         {
            this.validateMatrix();
         }
      }
      
      public function get postLayoutTransformOffsets() : TransformOffsets
      {
         return this.mx_internal::_layoutFeatures != null ? this.mx_internal::_layoutFeatures.postLayoutTransformOffsets : null;
      }
      
      public function set postLayoutTransformOffsets(param1:TransformOffsets) : void
      {
         var _loc2_:Boolean = this.is3D;
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         if(this.mx_internal::_layoutFeatures.postLayoutTransformOffsets != null)
         {
            this.mx_internal::_layoutFeatures.postLayoutTransformOffsets.removeEventListener(Event.CHANGE,this.transformOffsetsChangedHandler);
         }
         this.mx_internal::_layoutFeatures.postLayoutTransformOffsets = param1;
         if(this.mx_internal::_layoutFeatures.postLayoutTransformOffsets != null)
         {
            this.mx_internal::_layoutFeatures.postLayoutTransformOffsets.addEventListener(Event.CHANGE,this.transformOffsetsChangedHandler);
         }
         if(_loc2_ != this.is3D)
         {
            this.validateMatrix();
         }
      }
      
      public function set maintainProjectionCenter(param1:Boolean) : void
      {
         this._maintainProjectionCenter = param1;
         if(param1 && super.transform.perspectiveProjection == null)
         {
            super.transform.perspectiveProjection = new PerspectiveProjection();
         }
         this.invalidateDisplayList();
      }
      
      public function get maintainProjectionCenter() : Boolean
      {
         return this._maintainProjectionCenter;
      }
      
      public function setLayoutMatrix(param1:Matrix, param2:Boolean) : void
      {
         var _loc3_:Matrix = this.mx_internal::_layoutFeatures ? this.mx_internal::_layoutFeatures.layoutMatrix : super.transform.matrix;
         var _loc4_:Boolean = this.is3D;
         this._hasComplexLayoutMatrix = true;
         if(this.mx_internal::_layoutFeatures == null)
         {
            super.transform.matrix = param1;
         }
         else
         {
            this.mx_internal::_layoutFeatures.layoutMatrix = param1;
            this.invalidateTransform();
         }
         if(MatrixUtil.isEqual(_loc3_,this.mx_internal::_layoutFeatures ? this.mx_internal::_layoutFeatures.layoutMatrix : super.transform.matrix))
         {
            return;
         }
         this.invalidateProperties();
         if(param2)
         {
            this.invalidateParentSizeAndDisplayList();
         }
         if(_loc4_ != this.is3D)
         {
            this.validateMatrix();
         }
      }
      
      public function setLayoutMatrix3D(param1:Matrix3D, param2:Boolean) : void
      {
         if(Boolean(this.mx_internal::_layoutFeatures) && MatrixUtil.isEqual3D(this.mx_internal::_layoutFeatures.layoutMatrix3D,param1))
         {
            return;
         }
         var _loc3_:Boolean = this.is3D;
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         this.mx_internal::_layoutFeatures.layoutMatrix3D = param1;
         this.invalidateTransform();
         this.invalidateProperties();
         if(param2)
         {
            this.invalidateParentSizeAndDisplayList();
         }
         if(_loc3_ != this.is3D)
         {
            this.validateMatrix();
         }
      }
      
      public function transformAround(param1:Vector3D, param2:Vector3D = null, param3:Vector3D = null, param4:Vector3D = null, param5:Vector3D = null, param6:Vector3D = null, param7:Vector3D = null, param8:Boolean = true) : void
      {
         var _loc9_:Boolean = false;
         var _loc10_:Boolean = false;
         var _loc11_:Number = NaN;
         var _loc12_:Number = NaN;
         var _loc13_:Number = NaN;
         var _loc14_:Point = null;
         var _loc15_:Point = null;
         if(!param8)
         {
            _loc9_ = this._includeInLayout;
            this._includeInLayout = false;
         }
         if(this.mx_internal::_layoutFeatures == null)
         {
            _loc10_ = param2 != null && (!isNaN(param2.x) && param2.x != 1 || !isNaN(param2.y) && param2.y != 1 || !isNaN(param2.z) && param2.z != 1) || param3 != null && (!isNaN(param3.x) && param3.x != 0 || !isNaN(param3.y) && param3.y != 0 || !isNaN(param3.z) && param3.z != 0) || param4 != null && param4.z != 0 && !isNaN(param4.z) || param5 != null || param6 != null || param7 != null && (param4 == null || param7.x != param4.x || param7.y != param4.y || param7.z != param4.z);
            if(_loc10_)
            {
               this.initAdvancedLayoutFeatures();
            }
         }
         if(this.mx_internal::_layoutFeatures != null)
         {
            _loc11_ = this.mx_internal::_layoutFeatures.layoutX;
            _loc12_ = this.mx_internal::_layoutFeatures.layoutY;
            _loc13_ = this.mx_internal::_layoutFeatures.layoutZ;
            this.mx_internal::_layoutFeatures.transformAround(param1,param2,param3,param4,param5,param6,param7);
            this.invalidateTransform();
            this.invalidateParentSizeAndDisplayList();
            if(_loc11_ != this.mx_internal::_layoutFeatures.layoutX)
            {
               this.dispatchEvent(new Event("xChanged"));
            }
            if(_loc12_ != this.mx_internal::_layoutFeatures.layoutY)
            {
               this.dispatchEvent(new Event("yChanged"));
            }
            if(_loc13_ != this.mx_internal::_layoutFeatures.layoutZ)
            {
               this.dispatchEvent(new Event("zChanged"));
            }
         }
         else
         {
            if(param4 == null && param1 != null)
            {
               if(xformPt == null)
               {
                  xformPt = new Point();
               }
               xformPt.x = param1.x;
               xformPt.y = param1.y;
               _loc14_ = this.transform.matrix.transformPoint(xformPt);
            }
            if(param3 != null && !isNaN(param3.z))
            {
               this.rotation = param3.z;
            }
            if(param2 != null)
            {
               this.scaleX = param2.x;
               this.scaleY = param2.y;
            }
            if(param1 == null)
            {
               if(param4 != null)
               {
                  this.x = param4.x;
                  this.y = param4.y;
               }
            }
            else
            {
               if(xformPt == null)
               {
                  xformPt = new Point();
               }
               xformPt.x = param1.x;
               xformPt.y = param1.y;
               _loc15_ = this.transform.matrix.transformPoint(xformPt);
               if(param4 != null)
               {
                  this.x += param4.x - _loc15_.x;
                  this.y += param4.y - _loc15_.y;
               }
               else
               {
                  this.x += _loc14_.x - _loc15_.x;
                  this.y += _loc14_.y - _loc15_.y;
               }
            }
         }
         if(!param8)
         {
            this._includeInLayout = _loc9_;
         }
      }
      
      public function transformPointToParent(param1:Vector3D, param2:Vector3D, param3:Vector3D) : void
      {
         var _loc4_:Point = null;
         if(this.mx_internal::_layoutFeatures != null)
         {
            this.mx_internal::_layoutFeatures.transformPointToParent(true,param1,param2,param3);
         }
         else
         {
            if(xformPt == null)
            {
               xformPt = new Point();
            }
            if(param1)
            {
               xformPt.x = param1.x;
               xformPt.y = param1.y;
            }
            else
            {
               xformPt.x = 0;
               xformPt.y = 0;
            }
            _loc4_ = this.transform.matrix != null ? this.transform.matrix.transformPoint(xformPt) : xformPt;
            if(param2 != null)
            {
               param2.x = _loc4_.x;
               param2.y = _loc4_.y;
               param2.z = 0;
            }
            if(param3 != null)
            {
               param3.x = _loc4_.x;
               param3.y = _loc4_.y;
               param3.z = 0;
            }
         }
      }
      
      public function set layoutMatrix3D(param1:Matrix3D) : void
      {
         this.setLayoutMatrix3D(param1,true);
      }
      
      public function get depth() : Number
      {
         return this.mx_internal::_layoutFeatures == null ? 0 : this.mx_internal::_layoutFeatures.depth;
      }
      
      public function set depth(param1:Number) : void
      {
         if(param1 == this.depth)
         {
            return;
         }
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         this.mx_internal::_layoutFeatures.depth = param1;
         if(this.parent is UIComponent)
         {
            UIComponent(this.parent).invalidateLayering();
         }
      }
      
      public function invalidateLayering() : void
      {
      }
      
      protected function applyComputedMatrix() : void
      {
         this.mx_internal::_layoutFeatures.updatePending = false;
         if(this.mx_internal::_layoutFeatures.is3D)
         {
            super.transform.matrix3D = this.mx_internal::_layoutFeatures.computedMatrix3D;
         }
         else
         {
            super.transform.matrix = this.mx_internal::_layoutFeatures.computedMatrix;
         }
      }
      
      protected function setStretchXY(param1:Number, param2:Number) : void
      {
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         if(param1 != this.mx_internal::_layoutFeatures.stretchX || param2 != this.mx_internal::_layoutFeatures.stretchY)
         {
            this.mx_internal::_layoutFeatures.stretchX = param1;
            this.mx_internal::_layoutFeatures.stretchY = param2;
            this.invalidateTransform();
         }
      }
      
      public function getPreferredBoundsWidth(param1:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getPreferredBoundsWidth(this,param1 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getPreferredBoundsHeight(param1:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getPreferredBoundsHeight(this,param1 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getMinBoundsWidth(param1:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getMinBoundsWidth(this,param1 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getMinBoundsHeight(param1:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getMinBoundsHeight(this,param1 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getMaxBoundsWidth(param1:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getMaxBoundsWidth(this,param1 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getMaxBoundsHeight(param1:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getMaxBoundsHeight(this,param1 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getBoundsXAtSize(param1:Number, param2:Number, param3:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getBoundsXAtSize(this,param1,param2,param3 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getBoundsYAtSize(param1:Number, param2:Number, param3:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getBoundsYAtSize(this,param1,param2,param3 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getLayoutBoundsWidth(param1:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getLayoutBoundsWidth(this,param1 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getLayoutBoundsHeight(param1:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getLayoutBoundsHeight(this,param1 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getLayoutBoundsX(param1:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getLayoutBoundsX(this,param1 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getLayoutBoundsY(param1:Boolean = true) : Number
      {
         return LayoutElementUIComponentUtils.getLayoutBoundsY(this,param1 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function setLayoutBoundsPosition(param1:Number, param2:Number, param3:Boolean = true) : void
      {
         LayoutElementUIComponentUtils.setLayoutBoundsPosition(this,param1,param2,param3 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function setLayoutBoundsSize(param1:Number, param2:Number, param3:Boolean = true) : void
      {
         LayoutElementUIComponentUtils.setLayoutBoundsSize(this,param1,param2,param3 ? this.nonDeltaLayoutMatrix() : null);
      }
      
      public function getLayoutMatrix() : Matrix
      {
         if(this.mx_internal::_layoutFeatures != null || super.transform.matrix == null)
         {
            if(this.mx_internal::_layoutFeatures == null)
            {
               this.initAdvancedLayoutFeatures();
            }
            return this.mx_internal::_layoutFeatures.layoutMatrix.clone();
         }
         return super.transform.matrix;
      }
      
      public function get hasLayoutMatrix3D() : Boolean
      {
         return this.mx_internal::_layoutFeatures ? this.mx_internal::_layoutFeatures.layoutIs3D : false;
      }
      
      public function get is3D() : Boolean
      {
         return this.mx_internal::_layoutFeatures ? this.mx_internal::_layoutFeatures.is3D : false;
      }
      
      public function getLayoutMatrix3D() : Matrix3D
      {
         if(this.mx_internal::_layoutFeatures == null)
         {
            this.initAdvancedLayoutFeatures();
         }
         return this.mx_internal::_layoutFeatures.layoutMatrix3D.clone();
      }
      
      protected function nonDeltaLayoutMatrix() : Matrix
      {
         if(!this.hasComplexLayoutMatrix)
         {
            return null;
         }
         if(this.mx_internal::_layoutFeatures != null)
         {
            return this.mx_internal::_layoutFeatures.layoutMatrix;
         }
         return super.transform.matrix;
      }
   }
}

class MethodQueueElement
{
   
   public var method:Function;
   
   public var args:Array;
   
   public function MethodQueueElement(param1:Function, param2:Array = null)
   {
      super();
      this.method = param1;
      this.args = param2;
   }
}
package mx.core
{
   use namespace mx_internal;
   
   public final class UIComponentCachePolicy
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const AUTO:String = "auto";
      
      public static const OFF:String = "off";
      
      public static const ON:String = "on";
      
      public function UIComponentCachePolicy()
      {
         super();
      }
   }
}

package mx.core
{
   use namespace mx_internal;
   
   public class UIComponentDescriptor extends ComponentDescriptor
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var effects:Array;
      
      mx_internal var instanceIndices:Array;
      
      mx_internal var repeaterIndices:Array;
      
      mx_internal var repeaters:Array;
      
      public var stylesFactory:Function;
      
      public function UIComponentDescriptor(param1:Object)
      {
         super(param1);
      }
      
      override public function toString() : String
      {
         return "UIComponentDescriptor_" + id;
      }
   }
}

package mx.core
{
   import flash.display.InteractiveObject;
   import flash.geom.Matrix;
   import mx.managers.ILayoutManager;
   
   use namespace mx_internal;
   
   public class UIComponentGlobals
   {
      
      mx_internal static var layoutManager:ILayoutManager;
      
      mx_internal static var nextFocusObject:InteractiveObject;
      
      mx_internal static var callLaterSuspendCount:int = 0;
      
      mx_internal static var callLaterDispatcherCount:int = 0;
      
      mx_internal static var tempMatrix:Matrix = new Matrix();
      
      mx_internal static var designTime:Boolean = false;
      
      private static var _catchCallLaterExceptions:Boolean = false;
      
      public function UIComponentGlobals()
      {
         super();
      }
      
      public static function get designMode() : Boolean
      {
         return mx_internal::designTime;
      }
      
      public static function set designMode(param1:Boolean) : void
      {
         mx_internal::designTime = param1;
      }
      
      public static function get catchCallLaterExceptions() : Boolean
      {
         return _catchCallLaterExceptions;
      }
      
      public static function set catchCallLaterExceptions(param1:Boolean) : void
      {
         _catchCallLaterExceptions = param1;
      }
   }
}

package mx.core
{
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.geom.Matrix;
   import flash.text.TextFieldType;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import flash.text.TextLineMetrics;
   import mx.automation.IAutomationObject;
   import mx.managers.ISystemManager;
   import mx.managers.IToolTipManagerClient;
   import mx.managers.SystemManager;
   import mx.managers.ToolTipManager;
   import mx.resources.IResourceManager;
   import mx.resources.ResourceManager;
   import mx.styles.ISimpleStyleClient;
   import mx.styles.IStyleClient;
   import mx.styles.IStyleManager2;
   import mx.styles.StyleManager;
   import mx.styles.StyleProtoChain;
   import mx.utils.NameUtil;
   import mx.utils.StringUtil;
   
   use namespace mx_internal;
   
   public class UITextField extends FlexTextField implements IAutomationObject, IIMESupport, IFlexModule, IInvalidating, ISimpleStyleClient, IToolTipManagerClient, IUITextField
   {
      
      private static var truncationIndicatorResource:String;
      
      private static var noEmbeddedFonts:Boolean;
      
      private static var _embeddedFontRegistry:IEmbeddedFontRegistry;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      mx_internal static const TEXT_WIDTH_PADDING:int = 5;
      
      mx_internal static const TEXT_HEIGHT_PADDING:int = 4;
      
      mx_internal static var debuggingBorders:Boolean = false;
      
      private var cachedTextFormat:TextFormat;
      
      private var invalidateDisplayListFlag:Boolean = true;
      
      mx_internal var styleChangedFlag:Boolean = true;
      
      private var explicitHTMLText:String = null;
      
      mx_internal var explicitColor:uint = 4294967295;
      
      private var resourceManager:IResourceManager = ResourceManager.getInstance();
      
      private var untruncatedText:String;
      
      mx_internal var _parent:DisplayObjectContainer;
      
      private var _automationDelegate:IAutomationObject;
      
      private var _automationName:String;
      
      private var _document:Object;
      
      private var _enabled:Boolean = true;
      
      private var _explicitHeight:Number;
      
      private var _explicitWidth:Number;
      
      private var _ignorePadding:Boolean = true;
      
      private var _imeMode:String = null;
      
      private var _includeInLayout:Boolean = true;
      
      private var _inheritingStyles:Object = StyleProtoChain.STYLE_UNINITIALIZED;
      
      private var _initialized:Boolean = false;
      
      private var _moduleFactory:IFlexModuleFactory;
      
      private var _nestLevel:int = 0;
      
      private var _nonInheritingStyles:Object = StyleProtoChain.STYLE_UNINITIALIZED;
      
      private var _processedDescriptors:Boolean = true;
      
      private var _styleName:Object;
      
      mx_internal var _toolTip:String;
      
      private var _updateCompletePendingFlag:Boolean = false;
      
      private var _owner:DisplayObjectContainer;
      
      public function UITextField()
      {
         super();
         super.text = "";
         focusRect = false;
         selectable = false;
         tabEnabled = false;
         if(mx_internal::debuggingBorders)
         {
            border = true;
         }
         if(!truncationIndicatorResource)
         {
            truncationIndicatorResource = this.resourceManager.getString("core","truncationIndicator");
         }
         addEventListener(Event.CHANGE,this.changeHandler);
         addEventListener("textFieldStyleChange",this.textFieldStyleChangeHandler);
         this.resourceManager.addEventListener(Event.CHANGE,this.resourceManager_changeHandler,false,0,true);
      }
      
      private static function get embeddedFontRegistry() : IEmbeddedFontRegistry
      {
         if(!_embeddedFontRegistry && !noEmbeddedFonts)
         {
            try
            {
               _embeddedFontRegistry = IEmbeddedFontRegistry(Singleton.getInstance("mx.core::IEmbeddedFontRegistry"));
            }
            catch(e:Error)
            {
               noEmbeddedFonts = true;
            }
         }
         return _embeddedFontRegistry;
      }
      
      override public function set htmlText(param1:String) : void
      {
         if(!param1)
         {
            param1 = "";
         }
         if(this.isHTML && super.htmlText == param1)
         {
            return;
         }
         if(Boolean(this.cachedTextFormat) && styleSheet == null)
         {
            defaultTextFormat = this.cachedTextFormat;
         }
         super.htmlText = param1;
         this.explicitHTMLText = param1;
         if(this.invalidateDisplayListFlag)
         {
            this.validateNow();
         }
      }
      
      override public function get parent() : DisplayObjectContainer
      {
         return this.mx_internal::_parent ? this.mx_internal::_parent : super.parent;
      }
      
      override public function set text(param1:String) : void
      {
         if(!param1)
         {
            param1 = "";
         }
         if(!this.isHTML && super.text == param1)
         {
            return;
         }
         super.text = param1;
         this.explicitHTMLText = null;
         if(this.invalidateDisplayListFlag)
         {
            this.validateNow();
         }
      }
      
      override public function set textColor(param1:uint) : void
      {
         this.setColor(param1);
      }
      
      public function get automationDelegate() : Object
      {
         return this._automationDelegate;
      }
      
      public function set automationDelegate(param1:Object) : void
      {
         this._automationDelegate = param1 as IAutomationObject;
      }
      
      public function get automationName() : String
      {
         if(this._automationName)
         {
            return this._automationName;
         }
         if(this.automationDelegate)
         {
            return this.automationDelegate.automationName;
         }
         return "";
      }
      
      public function set automationName(param1:String) : void
      {
         this._automationName = param1;
      }
      
      public function get automationValue() : Array
      {
         if(this.automationDelegate)
         {
            return this.automationDelegate.automationValue;
         }
         return [""];
      }
      
      public function get automationOwner() : DisplayObjectContainer
      {
         return this.owner;
      }
      
      public function get automationParent() : DisplayObjectContainer
      {
         return this.parent;
      }
      
      public function get automationEnabled() : Boolean
      {
         return this.enabled;
      }
      
      public function get automationVisible() : Boolean
      {
         return visible;
      }
      
      public function get baselinePosition() : Number
      {
         var _loc1_:TextLineMetrics = null;
         if(!this.parent)
         {
            return NaN;
         }
         var _loc2_:* = text == "";
         if(_loc2_)
         {
            super.text = "Wj";
         }
         _loc1_ = getLineMetrics(0);
         if(_loc2_)
         {
            super.text = "";
         }
         return 2 + _loc1_.ascent;
      }
      
      public function get className() : String
      {
         return NameUtil.getUnqualifiedClassName(this);
      }
      
      public function get document() : Object
      {
         return this._document;
      }
      
      public function set document(param1:Object) : void
      {
         this._document = param1;
      }
      
      public function get enableIME() : Boolean
      {
         return type == TextFieldType.INPUT;
      }
      
      public function get enabled() : Boolean
      {
         return this._enabled;
      }
      
      public function set enabled(param1:Boolean) : void
      {
         mouseEnabled = param1;
         this._enabled = param1;
         this.styleChanged("color");
      }
      
      public function get explicitHeight() : Number
      {
         return this._explicitHeight;
      }
      
      public function set explicitHeight(param1:Number) : void
      {
         this._explicitHeight = param1;
      }
      
      public function get explicitMaxHeight() : Number
      {
         return NaN;
      }
      
      public function get explicitMaxWidth() : Number
      {
         return NaN;
      }
      
      public function get explicitMinHeight() : Number
      {
         return NaN;
      }
      
      public function get explicitMinWidth() : Number
      {
         return NaN;
      }
      
      public function get explicitWidth() : Number
      {
         return this._explicitWidth;
      }
      
      public function set explicitWidth(param1:Number) : void
      {
         this._explicitWidth = param1;
      }
      
      public function get focusPane() : Sprite
      {
         return null;
      }
      
      public function set focusPane(param1:Sprite) : void
      {
      }
      
      public function get ignorePadding() : Boolean
      {
         return this._ignorePadding;
      }
      
      public function set ignorePadding(param1:Boolean) : void
      {
         this._ignorePadding = param1;
         this.styleChanged(null);
      }
      
      public function get imeMode() : String
      {
         return this._imeMode;
      }
      
      public function set imeMode(param1:String) : void
      {
         this._imeMode = param1;
      }
      
      public function get includeInLayout() : Boolean
      {
         return this._includeInLayout;
      }
      
      public function set includeInLayout(param1:Boolean) : void
      {
         var _loc2_:IInvalidating = null;
         if(this._includeInLayout != param1)
         {
            this._includeInLayout = param1;
            _loc2_ = this.parent as IInvalidating;
            if(_loc2_)
            {
               _loc2_.invalidateSize();
               _loc2_.invalidateDisplayList();
            }
         }
      }
      
      public function get inheritingStyles() : Object
      {
         return this._inheritingStyles;
      }
      
      public function set inheritingStyles(param1:Object) : void
      {
         this._inheritingStyles = param1;
      }
      
      public function get initialized() : Boolean
      {
         return this._initialized;
      }
      
      public function set initialized(param1:Boolean) : void
      {
         this._initialized = param1;
      }
      
      private function get isHTML() : Boolean
      {
         return this.explicitHTMLText != null;
      }
      
      public function get isPopUp() : Boolean
      {
         return false;
      }
      
      public function set isPopUp(param1:Boolean) : void
      {
      }
      
      public function get maxHeight() : Number
      {
         return UIComponent.DEFAULT_MAX_HEIGHT;
      }
      
      public function get maxWidth() : Number
      {
         return UIComponent.DEFAULT_MAX_WIDTH;
      }
      
      public function get measuredHeight() : Number
      {
         this.validateNow();
         if(!stage || embedFonts)
         {
            return this.textHeight + mx_internal::TEXT_HEIGHT_PADDING;
         }
         var _loc1_:Matrix = transform.concatenatedMatrix;
         return this.textHeight * _loc1_.a / _loc1_.d + mx_internal::TEXT_HEIGHT_PADDING;
      }
      
      public function get measuredMinHeight() : Number
      {
         return 0;
      }
      
      public function set measuredMinHeight(param1:Number) : void
      {
      }
      
      public function get measuredMinWidth() : Number
      {
         return 0;
      }
      
      public function set measuredMinWidth(param1:Number) : void
      {
      }
      
      public function get measuredWidth() : Number
      {
         this.validateNow();
         if(!stage || embedFonts)
         {
            return textWidth + mx_internal::TEXT_WIDTH_PADDING;
         }
         var _loc1_:Matrix = transform.concatenatedMatrix;
         return textWidth * _loc1_.a / _loc1_.d + mx_internal::TEXT_WIDTH_PADDING;
      }
      
      public function get minHeight() : Number
      {
         return 0;
      }
      
      public function get minWidth() : Number
      {
         return 0;
      }
      
      public function get moduleFactory() : IFlexModuleFactory
      {
         return this._moduleFactory;
      }
      
      public function set moduleFactory(param1:IFlexModuleFactory) : void
      {
         this._moduleFactory = param1;
      }
      
      public function get nestLevel() : int
      {
         return this._nestLevel;
      }
      
      public function set nestLevel(param1:int) : void
      {
         if(param1 > 1 && this._nestLevel != param1)
         {
            this._nestLevel = param1;
            StyleProtoChain.initTextField(this);
            this.mx_internal::styleChangedFlag = true;
            this.validateNow();
         }
      }
      
      public function get nonInheritingStyles() : Object
      {
         return this._nonInheritingStyles;
      }
      
      public function set nonInheritingStyles(param1:Object) : void
      {
         this._nonInheritingStyles = param1;
      }
      
      public function get percentHeight() : Number
      {
         return NaN;
      }
      
      public function set percentHeight(param1:Number) : void
      {
      }
      
      public function get percentWidth() : Number
      {
         return NaN;
      }
      
      public function set percentWidth(param1:Number) : void
      {
      }
      
      public function get processedDescriptors() : Boolean
      {
         return this._processedDescriptors;
      }
      
      public function set processedDescriptors(param1:Boolean) : void
      {
         this._processedDescriptors = param1;
      }
      
      public function get styleManager() : IStyleManager2
      {
         return StyleManager.getStyleManager(this.moduleFactory);
      }
      
      public function get styleName() : Object
      {
         return this._styleName;
      }
      
      public function set styleName(param1:Object) : void
      {
         if(this._styleName === param1)
         {
            return;
         }
         this._styleName = param1;
         if(this.parent)
         {
            StyleProtoChain.initTextField(this);
            this.styleChanged("styleName");
         }
      }
      
      public function get systemManager() : ISystemManager
      {
         var _loc2_:IUIComponent = null;
         var _loc1_:DisplayObject = this.parent;
         while(_loc1_)
         {
            _loc2_ = _loc1_ as IUIComponent;
            if(_loc2_)
            {
               return _loc2_.systemManager;
            }
            _loc1_ = _loc1_.parent;
         }
         return null;
      }
      
      public function set systemManager(param1:ISystemManager) : void
      {
      }
      
      public function get nonZeroTextHeight() : Number
      {
         var _loc1_:Number = NaN;
         if(super.text == "")
         {
            super.text = "Wj";
            _loc1_ = this.textHeight;
            super.text = "";
            return _loc1_;
         }
         return this.textHeight;
      }
      
      override public function get textHeight() : Number
      {
         var _loc1_:Number = super.textHeight;
         if(numLines > 1)
         {
            _loc1_ += getLineMetrics(1).leading;
         }
         return _loc1_;
      }
      
      public function get toolTip() : String
      {
         return this.mx_internal::_toolTip;
      }
      
      public function set toolTip(param1:String) : void
      {
         var _loc2_:String = this.mx_internal::_toolTip;
         this.mx_internal::_toolTip = param1;
         ToolTipManager.mx_internal::registerToolTip(this,_loc2_,param1);
      }
      
      public function get tweeningProperties() : Array
      {
         return null;
      }
      
      public function set tweeningProperties(param1:Array) : void
      {
      }
      
      public function get updateCompletePendingFlag() : Boolean
      {
         return this._updateCompletePendingFlag;
      }
      
      public function set updateCompletePendingFlag(param1:Boolean) : void
      {
         this._updateCompletePendingFlag = param1;
      }
      
      override public function setTextFormat(param1:TextFormat, param2:int = -1, param3:int = -1) : void
      {
         if(styleSheet)
         {
            return;
         }
         super.setTextFormat(param1,param2,param3);
         dispatchEvent(new Event("textFormatChange"));
      }
      
      override public function insertXMLText(param1:int, param2:int, param3:String, param4:Boolean = false) : void
      {
         super.insertXMLText(param1,param2,param3,param4);
         dispatchEvent(new Event("textInsert"));
      }
      
      override public function replaceText(param1:int, param2:int, param3:String) : void
      {
         super.replaceText(param1,param2,param3);
         dispatchEvent(new Event("textReplace"));
      }
      
      public function initialize() : void
      {
      }
      
      public function getExplicitOrMeasuredWidth() : Number
      {
         return !isNaN(this.explicitWidth) ? this.explicitWidth : this.measuredWidth;
      }
      
      public function getExplicitOrMeasuredHeight() : Number
      {
         return !isNaN(this.explicitHeight) ? this.explicitHeight : this.measuredHeight;
      }
      
      public function setVisible(param1:Boolean, param2:Boolean = false) : void
      {
         this.visible = param1;
      }
      
      public function setFocus() : void
      {
         this.systemManager.stage.focus = this;
      }
      
      public function getUITextFormat() : UITextFormat
      {
         this.validateNow();
         var _loc1_:UITextFormat = new UITextFormat(this.creatingSystemManager());
         _loc1_.moduleFactory = this.moduleFactory;
         _loc1_.mx_internal::copyFrom(getTextFormat());
         _loc1_.antiAliasType = antiAliasType;
         _loc1_.gridFitType = gridFitType;
         _loc1_.sharpness = sharpness;
         _loc1_.thickness = thickness;
         return _loc1_;
      }
      
      public function move(param1:Number, param2:Number) : void
      {
         if(this.x != param1)
         {
            this.x = param1;
         }
         if(this.y != param2)
         {
            this.y = param2;
         }
      }
      
      public function setActualSize(param1:Number, param2:Number) : void
      {
         if(width != param1)
         {
            width = param1;
         }
         if(height != param2)
         {
            height = param2;
         }
      }
      
      public function getStyle(param1:String) : *
      {
         if(this.styleManager.inheritingStyles[param1])
         {
            return this.inheritingStyles ? this.inheritingStyles[param1] : IStyleClient(this.parent).getStyle(param1);
         }
         return this.nonInheritingStyles ? this.nonInheritingStyles[param1] : IStyleClient(this.parent).getStyle(param1);
      }
      
      public function setStyle(param1:String, param2:*) : void
      {
      }
      
      public function parentChanged(param1:DisplayObjectContainer) : void
      {
         if(!param1)
         {
            this.mx_internal::_parent = null;
            this._nestLevel = 0;
         }
         else if(param1 is IStyleClient)
         {
            this.mx_internal::_parent = param1;
         }
         else if(param1 is SystemManager)
         {
            this.mx_internal::_parent = param1;
         }
         else
         {
            this.mx_internal::_parent = param1.parent;
         }
      }
      
      public function styleChanged(param1:String) : void
      {
         this.mx_internal::styleChangedFlag = true;
         if(!this.invalidateDisplayListFlag)
         {
            this.invalidateDisplayListFlag = true;
            if("callLater" in this.parent)
            {
               Object(this.parent).callLater(this.validateNow);
            }
         }
      }
      
      public function validateNow() : void
      {
         var _loc1_:TextFormat = null;
         var _loc2_:IFlexModuleFactory = null;
         if(!this.parent)
         {
            return;
         }
         if(!isNaN(this.explicitWidth) && super.width != this.explicitWidth)
         {
            super.width = this.explicitWidth > 4 ? this.explicitWidth : 4;
         }
         if(!isNaN(this.explicitHeight) && super.height != this.explicitHeight)
         {
            super.height = this.explicitHeight;
         }
         if(this.mx_internal::styleChangedFlag)
         {
            _loc1_ = this.getTextStyles();
            if(_loc1_.font)
            {
               _loc2_ = noEmbeddedFonts || !embeddedFontRegistry ? null : embeddedFontRegistry.getAssociatedModuleFactory(_loc1_.font,_loc1_.bold,_loc1_.italic,this,this.moduleFactory,this.creatingSystemManager(),false);
               embedFonts = _loc2_ != null;
            }
            else
            {
               embedFonts = this.getStyle("embedFonts");
            }
            if(this.getStyle("fontAntiAliasType") != undefined)
            {
               antiAliasType = this.getStyle("fontAntiAliasType");
               gridFitType = this.getStyle("fontGridFitType");
               sharpness = this.getStyle("fontSharpness");
               thickness = this.getStyle("fontThickness");
            }
            if(!styleSheet)
            {
               super.setTextFormat(_loc1_);
               defaultTextFormat = _loc1_;
            }
            dispatchEvent(new Event("textFieldStyleChange"));
         }
         this.mx_internal::styleChangedFlag = false;
         this.invalidateDisplayListFlag = false;
      }
      
      public function getTextStyles() : TextFormat
      {
         var _loc1_:TextFormat = new TextFormat();
         var _loc2_:String = this.getStyle("textAlign");
         if(_loc2_ == "start")
         {
            _loc2_ = TextFormatAlign.LEFT;
         }
         else if(_loc2_ == "end")
         {
            _loc2_ = TextFormatAlign.RIGHT;
         }
         _loc1_.align = _loc2_;
         _loc1_.bold = this.getStyle("fontWeight") == "bold";
         if(this.enabled)
         {
            if(this.mx_internal::explicitColor == StyleManager.NOT_A_COLOR)
            {
               _loc1_.color = this.getStyle("color");
            }
            else
            {
               _loc1_.color = this.mx_internal::explicitColor;
            }
         }
         else
         {
            _loc1_.color = this.getStyle("disabledColor");
         }
         _loc1_.font = StringUtil.trimArrayElements(this.getStyle("fontFamily"),",");
         _loc1_.indent = this.getStyle("textIndent");
         _loc1_.italic = this.getStyle("fontStyle") == "italic";
         var _loc3_:* = this.getStyle("kerning");
         if(_loc3_ == "auto" || _loc3_ == "on")
         {
            _loc3_ = true;
         }
         else if(_loc3_ == "default" || _loc3_ == "off")
         {
            _loc3_ = false;
         }
         _loc1_.kerning = _loc3_;
         _loc1_.leading = this.getStyle("leading");
         _loc1_.leftMargin = this.ignorePadding ? 0 : this.getStyle("paddingLeft");
         _loc1_.letterSpacing = this.getStyle("letterSpacing");
         _loc1_.rightMargin = this.ignorePadding ? 0 : this.getStyle("paddingRight");
         _loc1_.size = this.getStyle("fontSize");
         _loc1_.underline = this.getStyle("textDecoration") == "underline";
         this.cachedTextFormat = _loc1_;
         return _loc1_;
      }
      
      public function setColor(param1:uint) : void
      {
         this.mx_internal::explicitColor = param1;
         this.mx_internal::styleChangedFlag = true;
         this.invalidateDisplayListFlag = true;
         this.validateNow();
      }
      
      public function invalidateSize() : void
      {
         this.invalidateDisplayListFlag = true;
      }
      
      public function invalidateDisplayList() : void
      {
         this.invalidateDisplayListFlag = true;
      }
      
      public function invalidateProperties() : void
      {
      }
      
      public function truncateToFit(param1:String = null) : Boolean
      {
         var _loc4_:String = null;
         if(!param1)
         {
            param1 = truncationIndicatorResource;
         }
         this.validateNow();
         var _loc2_:String = super.text;
         this.untruncatedText = _loc2_;
         var _loc3_:Number = width;
         if(_loc2_ != "" && textWidth + mx_internal::TEXT_WIDTH_PADDING > _loc3_ + 1e-14)
         {
            _loc4_ = super.text = _loc2_;
            _loc2_.slice(0,Math.floor(_loc3_ / (textWidth + mx_internal::TEXT_WIDTH_PADDING) * _loc2_.length));
            while(_loc4_.length > 1 && textWidth + mx_internal::TEXT_WIDTH_PADDING > _loc3_)
            {
               _loc4_ = _loc4_.slice(0,-1);
               super.text = _loc4_ + param1;
            }
            return true;
         }
         return false;
      }
      
      private function changeHandler(param1:Event) : void
      {
         this.explicitHTMLText = null;
      }
      
      private function textFieldStyleChangeHandler(param1:Event) : void
      {
         if(this.explicitHTMLText != null)
         {
            super.htmlText = this.explicitHTMLText;
         }
      }
      
      private function resourceManager_changeHandler(param1:Event) : void
      {
         truncationIndicatorResource = this.resourceManager.getString("core","truncationIndicator");
         if(this.untruncatedText != null)
         {
            super.text = this.untruncatedText;
            this.truncateToFit();
         }
      }
      
      public function owns(param1:DisplayObject) : Boolean
      {
         return param1 == this;
      }
      
      public function get owner() : DisplayObjectContainer
      {
         return this._owner ? this._owner : this.parent;
      }
      
      public function set owner(param1:DisplayObjectContainer) : void
      {
         this._owner = param1;
      }
      
      private function creatingSystemManager() : ISystemManager
      {
         return this.moduleFactory != null && this.moduleFactory is ISystemManager ? ISystemManager(this.moduleFactory) : this.systemManager;
      }
      
      public function replayAutomatableEvent(param1:Event) : Boolean
      {
         if(this.automationDelegate)
         {
            return this.automationDelegate.replayAutomatableEvent(param1);
         }
         return false;
      }
      
      public function createAutomationIDPart(param1:IAutomationObject) : Object
      {
         return null;
      }
      
      public function createAutomationIDPartWithRequiredProperties(param1:IAutomationObject, param2:Array) : Object
      {
         return null;
      }
      
      public function resolveAutomationIDPart(param1:Object) : Array
      {
         return [];
      }
      
      public function getAutomationChildAt(param1:int) : IAutomationObject
      {
         return null;
      }
      
      public function getAutomationChildren() : Array
      {
         return null;
      }
      
      public function get numAutomationChildren() : int
      {
         return 0;
      }
      
      public function get showInAutomationHierarchy() : Boolean
      {
         return true;
      }
      
      public function set showInAutomationHierarchy(param1:Boolean) : void
      {
      }
      
      public function get automationTabularData() : Object
      {
         return null;
      }
   }
}

package mx.core
{
   import flash.text.TextFormat;
   import flash.text.TextLineMetrics;
   import mx.managers.ISystemManager;
   
   use namespace mx_internal;
   
   public class UITextFormat extends TextFormat
   {
      
      private static var noEmbeddedFonts:Boolean;
      
      private static var _embeddedFontRegistry:IEmbeddedFontRegistry;
      
      private static var _textFieldFactory:ITextFieldFactory;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var systemManager:ISystemManager;
      
      public var antiAliasType:String;
      
      public var direction:String;
      
      public var gridFitType:String;
      
      public var locale:String;
      
      private var _moduleFactory:IFlexModuleFactory;
      
      public var sharpness:Number;
      
      public var thickness:Number;
      
      public var useFTE:Boolean = false;
      
      public function UITextFormat(param1:ISystemManager, param2:String = null, param3:Object = null, param4:Object = null, param5:Object = null, param6:Object = null, param7:Object = null, param8:String = null, param9:String = null, param10:String = null, param11:Object = null, param12:Object = null, param13:Object = null, param14:Object = null)
      {
         this.systemManager = param1;
         super(param2,param3,param4,param5,param6,param7,param8,param9,param10,param11,param12,param13,param14);
      }
      
      private static function get embeddedFontRegistry() : IEmbeddedFontRegistry
      {
         if(!_embeddedFontRegistry && !noEmbeddedFonts)
         {
            try
            {
               _embeddedFontRegistry = IEmbeddedFontRegistry(Singleton.getInstance("mx.core::IEmbeddedFontRegistry"));
            }
            catch(e:Error)
            {
               noEmbeddedFonts = true;
            }
         }
         return _embeddedFontRegistry;
      }
      
      private static function get textFieldFactory() : ITextFieldFactory
      {
         if(!_textFieldFactory)
         {
            _textFieldFactory = ITextFieldFactory(Singleton.getInstance("mx.core::ITextFieldFactory"));
         }
         return _textFieldFactory;
      }
      
      public function get moduleFactory() : IFlexModuleFactory
      {
         return this._moduleFactory;
      }
      
      public function set moduleFactory(param1:IFlexModuleFactory) : void
      {
         this._moduleFactory = param1;
      }
      
      public function measureText(param1:String, param2:Boolean = true) : TextLineMetrics
      {
         return this.measure(param1,false,param2);
      }
      
      public function measureHTMLText(param1:String, param2:Boolean = true) : TextLineMetrics
      {
         return this.measure(param1,true,param2);
      }
      
      private function measure(param1:String, param2:Boolean, param3:Boolean) : TextLineMetrics
      {
         if(!param1)
         {
            param1 = "";
         }
         var _loc4_:* = false;
         var _loc5_:IFlexModuleFactory = noEmbeddedFonts || !embeddedFontRegistry ? null : embeddedFontRegistry.getAssociatedModuleFactory(font,bold,italic,this,this.moduleFactory,this.systemManager,this.useFTE);
         _loc4_ = _loc5_ != null;
         if(_loc5_ == null)
         {
            _loc5_ = this.systemManager;
         }
         var _loc6_:Object = this.useFTE ? textFieldFactory.createFTETextField(_loc5_) : textFieldFactory.createTextField(_loc5_);
         if(param2)
         {
            _loc6_.htmlText = "";
         }
         else
         {
            _loc6_.text = "";
         }
         _loc6_.defaultTextFormat = this;
         _loc6_.embedFonts = _loc4_;
         if(!this.useFTE)
         {
            _loc6_.antiAliasType = this.antiAliasType;
            _loc6_.gridFitType = this.gridFitType;
            _loc6_.sharpness = this.sharpness;
            _loc6_.thickness = this.thickness;
         }
         else
         {
            _loc6_.direction = this.direction;
            _loc6_.locale = this.locale;
         }
         if(param2)
         {
            _loc6_.htmlText = param1;
         }
         else
         {
            _loc6_.text = param1;
         }
         var _loc7_:TextLineMetrics = _loc6_.getLineMetrics(0);
         if(indent != null)
         {
            _loc7_.width += indent;
         }
         if(param3)
         {
            _loc7_.width = Math.ceil(_loc7_.width);
            _loc7_.height = Math.ceil(_loc7_.height);
         }
         return _loc7_;
      }
      
      mx_internal function copyFrom(param1:TextFormat) : void
      {
         font = param1.font;
         size = param1.size;
         color = param1.color;
         bold = param1.bold;
         italic = param1.italic;
         underline = param1.underline;
         url = param1.url;
         target = param1.target;
         align = param1.align;
         leftMargin = param1.leftMargin;
         rightMargin = param1.rightMargin;
         indent = param1.indent;
         leading = param1.leading;
         letterSpacing = param1.letterSpacing;
         blockIndent = param1.blockIndent;
         bullet = param1.bullet;
         display = param1.display;
         indent = param1.indent;
         kerning = param1.kerning;
         tabStops = param1.tabStops;
      }
   }
}

package mx.effects
{
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import mx.core.FlexVersion;
   import mx.core.IFlexDisplayObject;
   import mx.core.mx_internal;
   import mx.effects.effectClasses.AddRemoveEffectTargetFilter;
   import mx.effects.effectClasses.HideShowEffectTargetFilter;
   import mx.effects.effectClasses.PropertyChanges;
   import mx.events.EffectEvent;
   import mx.managers.LayoutManager;
   import mx.styles.IStyleClient;
   import mx.utils.NameUtil;
   
   use namespace mx_internal;
   
   public class Effect extends EventDispatcher implements IEffect
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      mx_internal var applyEndValuesWhenDone:Boolean = false;
      
      protected var applyTransitionEndProperties:Boolean = FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0 ? false : true;
      
      private var _instances:Array = [];
      
      private var _callValidateNow:Boolean = false;
      
      private var isPaused:Boolean = false;
      
      mx_internal var filterObject:EffectTargetFilter;
      
      mx_internal var applyActualDimensions:Boolean = true;
      
      mx_internal var propertyChangesArray:Array;
      
      private var effectStopped:Boolean;
      
      mx_internal var parentCompositeEffect:Effect;
      
      private var _customFilter:EffectTargetFilter;
      
      private var _duration:Number = 500;
      
      mx_internal var durationExplicitlySet:Boolean = false;
      
      private var _effectTargetHost:IEffectTargetHost;
      
      protected var endValuesCaptured:Boolean = false;
      
      private var _filter:String;
      
      private var _hideFocusRing:Boolean = false;
      
      public var instanceClass:Class = IEffectInstance;
      
      private var _perElementOffset:Number = 0;
      
      private var _relevantProperties:Array;
      
      private var _relevantStyles:Array = [];
      
      public var repeatCount:int = 1;
      
      public var repeatDelay:int = 0;
      
      public var startDelay:int = 0;
      
      public var suspendBackgroundProcessing:Boolean = false;
      
      private var _targets:Array = [];
      
      private var _triggerEvent:Event;
      
      private var _playheadTime:Number = 0;
      
      public function Effect(param1:Object = null)
      {
         super();
         this.target = param1;
      }
      
      private static function mergeArrays(param1:Array, param2:Array) : Array
      {
         var _loc3_:int = 0;
         var _loc4_:Boolean = false;
         var _loc5_:int = 0;
         if(param2)
         {
            _loc3_ = 0;
            while(_loc3_ < param2.length)
            {
               _loc4_ = true;
               _loc5_ = 0;
               while(_loc5_ < param1.length)
               {
                  if(param1[_loc5_] == param2[_loc3_])
                  {
                     _loc4_ = false;
                     break;
                  }
                  _loc5_++;
               }
               if(_loc4_)
               {
                  param1.push(param2[_loc3_]);
               }
               _loc3_++;
            }
         }
         return param1;
      }
      
      private static function stripUnchangedValues(param1:Array) : Array
      {
         var _loc3_:Object = null;
         var _loc2_:int = 0;
         while(_loc2_ < param1.length)
         {
            if(param1[_loc2_].stripUnchangedValues != false)
            {
               for(_loc3_ in param1[_loc2_].start)
               {
                  if(param1[_loc2_].start[_loc3_] == param1[_loc2_].end[_loc3_] || typeof param1[_loc2_].start[_loc3_] == "number" && typeof param1[_loc2_].end[_loc3_] == "number" && isNaN(param1[_loc2_].start[_loc3_]) && isNaN(param1[_loc2_].end[_loc3_]))
                  {
                     delete param1[_loc2_].start[_loc3_];
                     delete param1[_loc2_].end[_loc3_];
                  }
               }
            }
            _loc2_++;
         }
         return param1;
      }
      
      public function get className() : String
      {
         return NameUtil.getUnqualifiedClassName(this);
      }
      
      public function get customFilter() : EffectTargetFilter
      {
         return this._customFilter;
      }
      
      public function set customFilter(param1:EffectTargetFilter) : void
      {
         this._customFilter = param1;
         this.mx_internal::filterObject = param1;
      }
      
      public function get duration() : Number
      {
         if(!this.mx_internal::durationExplicitlySet && Boolean(this.mx_internal::parentCompositeEffect))
         {
            return this.mx_internal::parentCompositeEffect.duration;
         }
         return this._duration;
      }
      
      public function set duration(param1:Number) : void
      {
         this.mx_internal::durationExplicitlySet = true;
         this._duration = param1;
      }
      
      public function get effectTargetHost() : IEffectTargetHost
      {
         return this._effectTargetHost;
      }
      
      public function set effectTargetHost(param1:IEffectTargetHost) : void
      {
         this._effectTargetHost = param1;
      }
      
      public function get filter() : String
      {
         return this._filter;
      }
      
      public function set filter(param1:String) : void
      {
         if(!this.customFilter)
         {
            this._filter = param1;
            switch(param1)
            {
               case "add":
               case "remove":
                  this.mx_internal::filterObject = new AddRemoveEffectTargetFilter();
                  AddRemoveEffectTargetFilter(this.mx_internal::filterObject).add = param1 == "add";
                  break;
               case "hide":
               case "show":
                  this.mx_internal::filterObject = new HideShowEffectTargetFilter();
                  HideShowEffectTargetFilter(this.mx_internal::filterObject).show = param1 == "show";
                  break;
               case "move":
                  this.mx_internal::filterObject = new EffectTargetFilter();
                  this.mx_internal::filterObject.filterProperties = ["x","y"];
                  break;
               case "resize":
                  this.mx_internal::filterObject = new EffectTargetFilter();
                  this.mx_internal::filterObject.filterProperties = ["width","height"];
                  break;
               case "addItem":
                  this.mx_internal::filterObject = new EffectTargetFilter();
                  this.mx_internal::filterObject.requiredSemantics = {"added":true};
                  break;
               case "removeItem":
                  this.mx_internal::filterObject = new EffectTargetFilter();
                  this.mx_internal::filterObject.requiredSemantics = {"removed":true};
                  break;
               case "replacedItem":
                  this.mx_internal::filterObject = new EffectTargetFilter();
                  this.mx_internal::filterObject.requiredSemantics = {"replaced":true};
                  break;
               case "replacementItem":
                  this.mx_internal::filterObject = new EffectTargetFilter();
                  this.mx_internal::filterObject.requiredSemantics = {"replacement":true};
                  break;
               default:
                  this.mx_internal::filterObject = null;
            }
         }
      }
      
      public function get hideFocusRing() : Boolean
      {
         return this._hideFocusRing;
      }
      
      public function set hideFocusRing(param1:Boolean) : void
      {
         this._hideFocusRing = param1;
      }
      
      public function get isPlaying() : Boolean
      {
         return Boolean(this._instances) && this._instances.length > 0;
      }
      
      public function get perElementOffset() : Number
      {
         return this._perElementOffset;
      }
      
      public function set perElementOffset(param1:Number) : void
      {
         this._perElementOffset = param1;
      }
      
      public function get relevantProperties() : Array
      {
         if(this._relevantProperties)
         {
            return this._relevantProperties;
         }
         return this.getAffectedProperties();
      }
      
      public function set relevantProperties(param1:Array) : void
      {
         this._relevantProperties = param1;
      }
      
      public function get relevantStyles() : Array
      {
         return this._relevantStyles;
      }
      
      public function set relevantStyles(param1:Array) : void
      {
         this._relevantStyles = param1;
      }
      
      public function get target() : Object
      {
         if(this._targets.length > 0)
         {
            return this._targets[0];
         }
         return null;
      }
      
      public function set target(param1:Object) : void
      {
         this._targets.splice(0);
         if(param1)
         {
            this._targets[0] = param1;
         }
      }
      
      public function get targets() : Array
      {
         return this._targets;
      }
      
      public function set targets(param1:Array) : void
      {
         var _loc2_:int = int(param1.length);
         var _loc3_:int = _loc2_ - 1;
         while(_loc3_ >= 0)
         {
            if(param1[_loc3_] == null)
            {
               param1.splice(_loc3_,1);
            }
            _loc3_--;
         }
         this._targets = param1;
      }
      
      public function get triggerEvent() : Event
      {
         return this._triggerEvent;
      }
      
      public function set triggerEvent(param1:Event) : void
      {
         this._triggerEvent = param1;
      }
      
      public function get playheadTime() : Number
      {
         var _loc1_:int = 0;
         while(_loc1_ < this._instances.length)
         {
            if(this._instances[_loc1_])
            {
               return IEffectInstance(this._instances[_loc1_]).playheadTime;
            }
            _loc1_++;
         }
         return this._playheadTime;
      }
      
      public function set playheadTime(param1:Number) : void
      {
         var _loc2_:Boolean = false;
         if(this._instances.length == 0)
         {
            this.play();
            _loc2_ = true;
         }
         var _loc3_:int = 0;
         while(_loc3_ < this._instances.length)
         {
            if(this._instances[_loc3_])
            {
               EffectInstance(this._instances[_loc3_]).playheadTime = param1;
            }
            _loc3_++;
         }
         if(_loc2_)
         {
            this.pause();
         }
         this._playheadTime = param1;
      }
      
      public function getAffectedProperties() : Array
      {
         return [];
      }
      
      public function createInstances(param1:Array = null) : Array
      {
         var _loc6_:IEffectInstance = null;
         if(!param1)
         {
            param1 = this.targets;
         }
         var _loc2_:Array = [];
         var _loc3_:int = int(param1.length);
         var _loc4_:Number = 0;
         var _loc5_:int = 0;
         while(_loc5_ < _loc3_)
         {
            _loc6_ = this.createInstance(param1[_loc5_]);
            if(_loc6_)
            {
               _loc6_.startDelay += _loc4_;
               _loc4_ += this.perElementOffset;
               _loc2_.push(_loc6_);
            }
            _loc5_++;
         }
         this.triggerEvent = null;
         return _loc2_;
      }
      
      public function createInstance(param1:Object = null) : IEffectInstance
      {
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         if(!param1)
         {
            param1 = this.target;
         }
         var _loc2_:IEffectInstance = null;
         var _loc3_:PropertyChanges = null;
         var _loc4_:Boolean = true;
         var _loc5_:Boolean = false;
         if(this.mx_internal::propertyChangesArray)
         {
            _loc5_ = true;
            _loc4_ = this.filterInstance(this.mx_internal::propertyChangesArray,param1);
         }
         if(_loc4_)
         {
            _loc2_ = IEffectInstance(new this.instanceClass(param1));
            this.initInstance(_loc2_);
            if(_loc5_)
            {
               _loc6_ = int(this.mx_internal::propertyChangesArray.length);
               _loc7_ = 0;
               while(_loc7_ < _loc6_)
               {
                  if(this.mx_internal::propertyChangesArray[_loc7_].target == param1)
                  {
                     _loc2_.propertyChanges = this.mx_internal::propertyChangesArray[_loc7_];
                  }
                  _loc7_++;
               }
            }
            EventDispatcher(_loc2_).addEventListener(EffectEvent.EFFECT_START,this.effectStartHandler);
            EventDispatcher(_loc2_).addEventListener(EffectEvent.EFFECT_STOP,this.effectStopHandler);
            EventDispatcher(_loc2_).addEventListener(EffectEvent.EFFECT_END,this.effectEndHandler);
            this._instances.push(_loc2_);
            if(this.triggerEvent)
            {
               _loc2_.initEffect(this.triggerEvent);
            }
         }
         return _loc2_;
      }
      
      protected function initInstance(param1:IEffectInstance) : void
      {
         param1.duration = this.duration;
         Object(param1).durationExplicitlySet = this.mx_internal::durationExplicitlySet;
         param1.effect = this;
         param1.effectTargetHost = this.effectTargetHost;
         param1.hideFocusRing = this.hideFocusRing;
         param1.repeatCount = this.repeatCount;
         param1.repeatDelay = this.repeatDelay;
         param1.startDelay = this.startDelay;
         param1.suspendBackgroundProcessing = this.suspendBackgroundProcessing;
      }
      
      public function deleteInstance(param1:IEffectInstance) : void
      {
         EventDispatcher(param1).removeEventListener(EffectEvent.EFFECT_START,this.effectStartHandler);
         EventDispatcher(param1).removeEventListener(EffectEvent.EFFECT_STOP,this.effectStopHandler);
         EventDispatcher(param1).removeEventListener(EffectEvent.EFFECT_END,this.effectEndHandler);
         var _loc2_:int = int(this._instances.length);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            if(this._instances[_loc3_] === param1)
            {
               this._instances.splice(_loc3_,1);
            }
            _loc3_++;
         }
      }
      
      public function play(param1:Array = null, param2:Boolean = false) : Array
      {
         var _loc6_:IEffectInstance = null;
         this.effectStopped = false;
         this.isPaused = false;
         if(param1 == null && this.mx_internal::propertyChangesArray != null)
         {
            if(this._callValidateNow)
            {
               LayoutManager.getInstance().validateNow();
            }
            if(!this.endValuesCaptured)
            {
               this.mx_internal::propertyChangesArray = this.mx_internal::captureValues(this.mx_internal::propertyChangesArray,false);
            }
            this.mx_internal::propertyChangesArray = stripUnchangedValues(this.mx_internal::propertyChangesArray);
            this.mx_internal::applyStartValues(this.mx_internal::propertyChangesArray,this.targets);
            LayoutManager.getInstance().validateNow();
            this.mx_internal::applyEndValuesWhenDone = true;
         }
         var _loc3_:Array = this.createInstances(param1);
         var _loc4_:int = int(_loc3_.length);
         var _loc5_:int = 0;
         while(_loc5_ < _loc4_)
         {
            _loc6_ = IEffectInstance(_loc3_[_loc5_]);
            Object(_loc6_).playReversed = param2;
            _loc6_.startEffect();
            _loc5_++;
         }
         return _loc3_;
      }
      
      public function pause() : void
      {
         var _loc1_:int = 0;
         var _loc2_:int = 0;
         if(this.isPlaying && !this.isPaused)
         {
            this.isPaused = true;
            _loc1_ = int(this._instances.length);
            _loc2_ = 0;
            while(_loc2_ < _loc1_)
            {
               IEffectInstance(this._instances[_loc2_]).pause();
               _loc2_++;
            }
         }
      }
      
      public function stop() : void
      {
         var _loc3_:IEffectInstance = null;
         var _loc1_:int = int(this._instances.length);
         var _loc2_:int = _loc1_;
         while(_loc2_ >= 0)
         {
            _loc3_ = IEffectInstance(this._instances[_loc2_]);
            if(_loc3_)
            {
               _loc3_.stop();
            }
            _loc2_--;
         }
      }
      
      public function resume() : void
      {
         var _loc1_:int = 0;
         var _loc2_:int = 0;
         if(this.isPlaying && this.isPaused)
         {
            this.isPaused = false;
            _loc1_ = int(this._instances.length);
            _loc2_ = 0;
            while(_loc2_ < _loc1_)
            {
               IEffectInstance(this._instances[_loc2_]).resume();
               _loc2_++;
            }
         }
      }
      
      public function reverse() : void
      {
         var _loc1_:int = 0;
         var _loc2_:int = 0;
         if(this.isPlaying)
         {
            _loc1_ = int(this._instances.length);
            _loc2_ = 0;
            while(_loc2_ < _loc1_)
            {
               IEffectInstance(this._instances[_loc2_]).reverse();
               _loc2_++;
            }
         }
      }
      
      public function end(param1:IEffectInstance = null) : void
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         var _loc4_:IEffectInstance = null;
         if(param1)
         {
            param1.end();
         }
         else
         {
            _loc2_ = int(this._instances.length);
            _loc3_ = _loc2_ - 1;
            while(_loc3_ >= 0)
            {
               _loc4_ = IEffectInstance(this._instances[_loc3_]);
               if(_loc4_)
               {
                  _loc4_.end();
               }
               _loc3_--;
            }
         }
      }
      
      protected function filterInstance(param1:Array, param2:Object) : Boolean
      {
         if(this.mx_internal::filterObject)
         {
            return this.mx_internal::filterObject.filterInstance(param1,this.effectTargetHost,param2);
         }
         return true;
      }
      
      public function captureStartValues() : void
      {
         if(this.targets.length > 0)
         {
            this.mx_internal::propertyChangesArray = this.mx_internal::captureValues(null,true);
            this._callValidateNow = true;
         }
         this.endValuesCaptured = false;
      }
      
      public function captureMoreStartValues(param1:Array) : void
      {
         var _loc2_:Array = null;
         if(param1.length > 0)
         {
            _loc2_ = this.mx_internal::captureValues(null,true);
            this.mx_internal::propertyChangesArray = this.mx_internal::propertyChangesArray != null ? this.mx_internal::propertyChangesArray.concat(_loc2_) : _loc2_;
         }
      }
      
      public function captureEndValues() : void
      {
         this.mx_internal::propertyChangesArray = this.mx_internal::captureValues(this.mx_internal::propertyChangesArray,false);
         this.endValuesCaptured = true;
      }
      
      mx_internal function captureValues(param1:Array, param2:Boolean, param3:Array = null) : Array
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc7_:Object = null;
         var _loc8_:Object = null;
         var _loc9_:int = 0;
         var _loc10_:int = 0;
         var _loc12_:* = undefined;
         if(!param1)
         {
            param1 = [];
            _loc4_ = int(this.targets.length);
            _loc5_ = 0;
            while(_loc5_ < _loc4_)
            {
               param1.push(new PropertyChanges(this.targets[_loc5_]));
               _loc5_++;
            }
         }
         var _loc6_:Array = !this.mx_internal::filterObject ? this.relevantProperties : mergeArrays(this.relevantProperties,this.mx_internal::filterObject.filterProperties);
         if((Boolean(_loc6_)) && _loc6_.length > 0)
         {
            _loc4_ = int(param1.length);
            _loc5_ = 0;
            while(_loc5_ < _loc4_)
            {
               _loc8_ = param1[_loc5_].target;
               if(param3 == null || param3.length == 0 || param3.indexOf(_loc8_) >= 0)
               {
                  _loc7_ = param2 ? param1[_loc5_].start : param1[_loc5_].end;
                  _loc9_ = int(_loc6_.length);
                  _loc10_ = 0;
                  while(_loc10_ < _loc9_)
                  {
                     if(_loc7_[_loc6_[_loc10_]] === undefined)
                     {
                        _loc7_[_loc6_[_loc10_]] = this.getValueFromTarget(_loc8_,_loc6_[_loc10_]);
                     }
                     _loc10_++;
                  }
               }
               _loc5_++;
            }
         }
         var _loc11_:Array = !this.mx_internal::filterObject ? this.relevantStyles : mergeArrays(this.relevantStyles,this.mx_internal::filterObject.filterStyles);
         if((Boolean(_loc11_)) && _loc11_.length > 0)
         {
            _loc4_ = int(param1.length);
            _loc5_ = 0;
            while(_loc5_ < _loc4_)
            {
               _loc8_ = param1[_loc5_].target;
               if(param3 == null || param3.length == 0 || param3.indexOf(_loc8_) >= 0)
               {
                  if(_loc8_ is IStyleClient)
                  {
                     _loc7_ = param2 ? param1[_loc5_].start : param1[_loc5_].end;
                     _loc9_ = int(_loc11_.length);
                     _loc10_ = 0;
                     while(_loc10_ < _loc9_)
                     {
                        if(_loc7_[_loc11_[_loc10_]] === undefined)
                        {
                           _loc12_ = _loc8_.getStyle(_loc11_[_loc10_]);
                           _loc7_[_loc11_[_loc10_]] = _loc12_;
                        }
                        _loc10_++;
                     }
                  }
               }
               _loc5_++;
            }
         }
         return param1;
      }
      
      protected function getValueFromTarget(param1:Object, param2:String) : *
      {
         if(param2 in param1)
         {
            return param1[param2];
         }
         return undefined;
      }
      
      mx_internal function applyStartValues(param1:Array, param2:Array) : void
      {
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:Object = null;
         var _loc9_:Boolean = false;
         var _loc10_:String = null;
         var _loc11_:* = undefined;
         var _loc12_:* = undefined;
         var _loc13_:String = null;
         var _loc14_:* = undefined;
         var _loc15_:* = undefined;
         var _loc3_:Array = this.relevantProperties;
         var _loc4_:int = int(param1.length);
         var _loc5_:int = 0;
         while(_loc5_ < _loc4_)
         {
            _loc8_ = param1[_loc5_].target;
            _loc9_ = false;
            _loc6_ = int(param2.length);
            _loc7_ = 0;
            while(_loc7_ < _loc6_)
            {
               if(param2[_loc7_] == _loc8_)
               {
                  _loc9_ = this.filterInstance(param1,_loc8_);
                  break;
               }
               _loc7_++;
            }
            if(_loc9_)
            {
               _loc6_ = int(_loc3_.length);
               _loc7_ = 0;
               while(_loc7_ < _loc6_)
               {
                  _loc10_ = _loc3_[_loc7_];
                  _loc11_ = param1[_loc5_].start[_loc10_];
                  _loc12_ = param1[_loc5_].end[_loc10_];
                  if(_loc10_ in param1[_loc5_].start && _loc12_ != _loc11_ && (!(_loc11_ is Number) || !(isNaN(_loc12_) && isNaN(_loc11_))))
                  {
                     this.applyValueToTarget(_loc8_,_loc3_[_loc7_],param1[_loc5_].start[_loc3_[_loc7_]],param1[_loc5_].start);
                  }
                  _loc7_++;
               }
               _loc6_ = int(this.relevantStyles.length);
               _loc7_ = 0;
               while(_loc7_ < _loc6_)
               {
                  _loc13_ = this.relevantStyles[_loc7_];
                  _loc14_ = param1[_loc5_].start[_loc13_];
                  _loc15_ = param1[_loc5_].end[_loc13_];
                  if(_loc13_ in param1[_loc5_].start && _loc15_ != _loc14_ && (!(_loc14_ is Number) || !(isNaN(_loc15_) && isNaN(_loc14_))) && _loc8_ is IStyleClient)
                  {
                     if(param1[_loc5_].end[this.relevantStyles[_loc7_]] !== undefined)
                     {
                        _loc8_.setStyle(this.relevantStyles[_loc7_],param1[_loc5_].start[this.relevantStyles[_loc7_]]);
                     }
                     else
                     {
                        _loc8_.clearStyle(this.relevantStyles[_loc7_]);
                     }
                  }
                  _loc7_++;
               }
            }
            _loc5_++;
         }
      }
      
      mx_internal function applyEndValues(param1:Array, param2:Array) : void
      {
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:Object = null;
         var _loc9_:Boolean = false;
         var _loc10_:String = null;
         var _loc11_:* = undefined;
         var _loc12_:* = undefined;
         var _loc13_:String = null;
         var _loc14_:* = undefined;
         var _loc15_:* = undefined;
         if(!this.applyTransitionEndProperties)
         {
            return;
         }
         var _loc3_:Array = this.relevantProperties;
         var _loc4_:int = int(param1.length);
         var _loc5_:int = 0;
         while(_loc5_ < _loc4_)
         {
            _loc8_ = param1[_loc5_].target;
            _loc9_ = false;
            _loc6_ = int(param2.length);
            _loc7_ = 0;
            while(_loc7_ < _loc6_)
            {
               if(param2[_loc7_] == _loc8_)
               {
                  _loc9_ = this.filterInstance(param1,_loc8_);
                  break;
               }
               _loc7_++;
            }
            if(_loc9_)
            {
               _loc6_ = int(_loc3_.length);
               _loc7_ = 0;
               while(_loc7_ < _loc6_)
               {
                  _loc10_ = _loc3_[_loc7_];
                  _loc11_ = param1[_loc5_].start[_loc10_];
                  _loc12_ = param1[_loc5_].end[_loc10_];
                  if(_loc10_ in param1[_loc5_].end && _loc12_ != _loc11_ && (!(_loc12_ is Number) || !(isNaN(_loc12_) && isNaN(_loc11_))))
                  {
                     this.applyValueToTarget(_loc8_,_loc10_,param1[_loc5_].end[_loc10_],param1[_loc5_].end);
                  }
                  _loc7_++;
               }
               _loc6_ = int(this.relevantStyles.length);
               _loc7_ = 0;
               while(_loc7_ < _loc6_)
               {
                  _loc13_ = this.relevantStyles[_loc7_];
                  _loc14_ = param1[_loc5_].start[_loc13_];
                  _loc15_ = param1[_loc5_].end[_loc13_];
                  if(_loc13_ in param1[_loc5_].end && _loc15_ != _loc14_ && (!(_loc15_ is Number) || !(isNaN(_loc15_) && isNaN(_loc14_))) && _loc8_ is IStyleClient)
                  {
                     if(param1[_loc5_].end[_loc13_] !== undefined)
                     {
                        _loc8_.setStyle(_loc13_,param1[_loc5_].end[_loc13_]);
                     }
                     else
                     {
                        _loc8_.clearStyle(_loc13_);
                     }
                  }
                  _loc7_++;
               }
            }
            _loc5_++;
         }
      }
      
      protected function applyValueToTarget(param1:Object, param2:String, param3:*, param4:Object) : void
      {
         var target:Object = param1;
         var property:String = param2;
         var value:* = param3;
         var props:Object = param4;
         if(property in target)
         {
            try
            {
               if(this.mx_internal::applyActualDimensions && target is IFlexDisplayObject && property == "height")
               {
                  target.setActualSize(target.width,value);
               }
               else if(this.mx_internal::applyActualDimensions && target is IFlexDisplayObject && property == "width")
               {
                  target.setActualSize(value,target.height);
               }
               else
               {
                  target[property] = value;
               }
            }
            catch(e:Error)
            {
            }
         }
      }
      
      protected function effectStartHandler(param1:EffectEvent) : void
      {
         dispatchEvent(param1);
      }
      
      protected function effectStopHandler(param1:EffectEvent) : void
      {
         dispatchEvent(param1);
         this.effectStopped = true;
      }
      
      protected function effectEndHandler(param1:EffectEvent) : void
      {
         var _loc2_:Boolean = !this._instances || this._instances.length == 1;
         if(this.mx_internal::applyEndValuesWhenDone && !this.effectStopped && _loc2_)
         {
            this.mx_internal::applyEndValues(this.mx_internal::propertyChangesArray,this.targets);
         }
         var _loc3_:IEffectInstance = IEffectInstance(param1.effectInstance);
         this.deleteInstance(_loc3_);
         dispatchEvent(param1);
         if(_loc2_)
         {
            this.mx_internal::propertyChangesArray = null;
            this.mx_internal::applyEndValuesWhenDone = false;
         }
      }
   }
}

package mx.effects
{
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.events.IEventDispatcher;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   import flash.utils.getTimer;
   import mx.core.UIComponent;
   import mx.core.mx_internal;
   import mx.effects.effectClasses.PropertyChanges;
   import mx.events.EffectEvent;
   import mx.events.FlexEvent;
   import mx.utils.NameUtil;
   
   use namespace mx_internal;
   
   public class EffectInstance extends EventDispatcher implements IEffectInstance
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      mx_internal var delayTimer:Timer;
      
      private var delayStartTime:Number = 0;
      
      private var delayElapsedTime:Number = 0;
      
      mx_internal var durationExplicitlySet:Boolean = false;
      
      mx_internal var hideOnEffectEnd:Boolean = false;
      
      mx_internal var parentCompositeEffectInstance:EffectInstance;
      
      protected var playCount:int = 0;
      
      mx_internal var stopRepeat:Boolean = false;
      
      private var _duration:Number = 500;
      
      private var _effect:IEffect;
      
      private var _effectTargetHost:IEffectTargetHost;
      
      private var _hideFocusRing:Boolean;
      
      private var _playReversed:Boolean;
      
      private var _propertyChanges:PropertyChanges;
      
      private var _repeatCount:int = 0;
      
      private var _repeatDelay:int = 0;
      
      private var _startDelay:int = 0;
      
      private var _suspendBackgroundProcessing:Boolean = false;
      
      private var _target:Object;
      
      private var _triggerEvent:Event;
      
      public function EffectInstance(param1:Object)
      {
         super();
         this.target = param1;
      }
      
      mx_internal function get actualDuration() : Number
      {
         var _loc1_:Number = NaN;
         if(this.repeatCount > 0)
         {
            _loc1_ = this.duration * this.repeatCount + this.repeatDelay * (this.repeatCount - 1) + this.startDelay;
         }
         return _loc1_;
      }
      
      public function get className() : String
      {
         return NameUtil.getUnqualifiedClassName(this);
      }
      
      public function get duration() : Number
      {
         if(!this.mx_internal::durationExplicitlySet && Boolean(this.mx_internal::parentCompositeEffectInstance))
         {
            return this.mx_internal::parentCompositeEffectInstance.duration;
         }
         return this._duration;
      }
      
      public function set duration(param1:Number) : void
      {
         this.mx_internal::durationExplicitlySet = true;
         this._duration = param1;
      }
      
      public function get effect() : IEffect
      {
         return this._effect;
      }
      
      public function set effect(param1:IEffect) : void
      {
         this._effect = param1;
      }
      
      public function get effectTargetHost() : IEffectTargetHost
      {
         return this._effectTargetHost;
      }
      
      public function set effectTargetHost(param1:IEffectTargetHost) : void
      {
         this._effectTargetHost = param1;
      }
      
      public function get hideFocusRing() : Boolean
      {
         return this._hideFocusRing;
      }
      
      public function set hideFocusRing(param1:Boolean) : void
      {
         this._hideFocusRing = param1;
      }
      
      public function get playheadTime() : Number
      {
         return Math.max(this.playCount - 1,0) * (this.duration + this.repeatDelay) + (this.mx_internal::playReversed ? 0 : this.startDelay);
      }
      
      public function set playheadTime(param1:Number) : void
      {
         if(Boolean(this.mx_internal::delayTimer) && this.mx_internal::delayTimer.running)
         {
            this.mx_internal::delayTimer.reset();
            if(param1 < this.startDelay)
            {
               this.mx_internal::delayTimer = new Timer(this.startDelay - param1,1);
               this.delayStartTime = getTimer();
               this.mx_internal::delayTimer.addEventListener(TimerEvent.TIMER,this.delayTimerHandler);
               this.mx_internal::delayTimer.start();
            }
            else
            {
               this.playCount = 0;
               this.play();
            }
         }
      }
      
      mx_internal function get playReversed() : Boolean
      {
         return this._playReversed;
      }
      
      mx_internal function set playReversed(param1:Boolean) : void
      {
         this._playReversed = param1;
      }
      
      public function get propertyChanges() : PropertyChanges
      {
         return this._propertyChanges;
      }
      
      public function set propertyChanges(param1:PropertyChanges) : void
      {
         this._propertyChanges = param1;
      }
      
      public function get repeatCount() : int
      {
         return this._repeatCount;
      }
      
      public function set repeatCount(param1:int) : void
      {
         this._repeatCount = param1;
      }
      
      public function get repeatDelay() : int
      {
         return this._repeatDelay;
      }
      
      public function set repeatDelay(param1:int) : void
      {
         this._repeatDelay = param1;
      }
      
      public function get startDelay() : int
      {
         return this._startDelay;
      }
      
      public function set startDelay(param1:int) : void
      {
         this._startDelay = param1;
      }
      
      public function get suspendBackgroundProcessing() : Boolean
      {
         return this._suspendBackgroundProcessing;
      }
      
      public function set suspendBackgroundProcessing(param1:Boolean) : void
      {
         this._suspendBackgroundProcessing = param1;
      }
      
      public function get target() : Object
      {
         return this._target;
      }
      
      public function set target(param1:Object) : void
      {
         this._target = param1;
      }
      
      public function get triggerEvent() : Event
      {
         return this._triggerEvent;
      }
      
      public function set triggerEvent(param1:Event) : void
      {
         this._triggerEvent = param1;
      }
      
      public function initEffect(param1:Event) : void
      {
         this.triggerEvent = param1;
         switch(param1.type)
         {
            case "resizeStart":
            case "resizeEnd":
               if(!this.mx_internal::durationExplicitlySet)
               {
                  this.duration = 250;
               }
               break;
            case FlexEvent.HIDE:
               this.target.setVisible(true,true);
               this.mx_internal::hideOnEffectEnd = true;
               this.target.addEventListener(FlexEvent.SHOW,this.mx_internal::eventHandler);
         }
      }
      
      public function startEffect() : void
      {
         EffectManager.mx_internal::effectStarted(this);
         if(this.target is UIComponent)
         {
            UIComponent(this.target).effectStarted(this);
         }
         if(this.startDelay > 0 && !this.mx_internal::playReversed)
         {
            this.mx_internal::delayTimer = new Timer(this.startDelay,1);
            this.delayStartTime = getTimer();
            this.mx_internal::delayTimer.addEventListener(TimerEvent.TIMER,this.delayTimerHandler);
            this.mx_internal::delayTimer.start();
         }
         else
         {
            this.play();
         }
      }
      
      public function play() : void
      {
         ++this.playCount;
         dispatchEvent(new EffectEvent(EffectEvent.EFFECT_START,false,false,this));
         if(Boolean(this.target) && this.target is IEventDispatcher)
         {
            this.target.dispatchEvent(new EffectEvent(EffectEvent.EFFECT_START,false,false,this));
         }
      }
      
      public function pause() : void
      {
         if(this.mx_internal::delayTimer && this.mx_internal::delayTimer.running && !isNaN(this.delayStartTime))
         {
            this.mx_internal::delayTimer.stop();
            this.delayElapsedTime = getTimer() - this.delayStartTime;
         }
      }
      
      public function stop() : void
      {
         if(this.mx_internal::delayTimer)
         {
            this.mx_internal::delayTimer.reset();
         }
         this.mx_internal::stopRepeat = true;
         dispatchEvent(new EffectEvent(EffectEvent.EFFECT_STOP,false,false,this));
         if(Boolean(this.target) && this.target is IEventDispatcher)
         {
            this.target.dispatchEvent(new EffectEvent(EffectEvent.EFFECT_STOP,false,false,this));
         }
         this.finishEffect();
      }
      
      public function resume() : void
      {
         if(this.mx_internal::delayTimer && !this.mx_internal::delayTimer.running && !isNaN(this.delayElapsedTime))
         {
            this.mx_internal::delayTimer.delay = !this.mx_internal::playReversed ? this.mx_internal::delayTimer.delay - this.delayElapsedTime : this.delayElapsedTime;
            this.mx_internal::delayTimer.start();
         }
      }
      
      public function reverse() : void
      {
         if(this.repeatCount > 0)
         {
            this.playCount = this.repeatCount - this.playCount + 1;
         }
      }
      
      public function end() : void
      {
         if(this.mx_internal::delayTimer)
         {
            this.mx_internal::delayTimer.reset();
         }
         this.mx_internal::stopRepeat = true;
         this.finishEffect();
      }
      
      public function finishEffect() : void
      {
         this.playCount = 0;
         dispatchEvent(new EffectEvent(EffectEvent.EFFECT_END,false,false,this));
         if(Boolean(this.target) && this.target is IEventDispatcher)
         {
            this.target.dispatchEvent(new EffectEvent(EffectEvent.EFFECT_END,false,false,this));
         }
         if(this.target is UIComponent)
         {
            UIComponent(this.target).effectFinished(this);
         }
         EffectManager.mx_internal::effectFinished(this);
      }
      
      public function finishRepeat() : void
      {
         if(!this.mx_internal::stopRepeat && this.playCount != 0 && (this.playCount < this.repeatCount || this.repeatCount == 0))
         {
            if(this.repeatDelay > 0)
            {
               this.mx_internal::delayTimer = new Timer(this.repeatDelay,1);
               this.delayStartTime = getTimer();
               this.mx_internal::delayTimer.addEventListener(TimerEvent.TIMER,this.delayTimerHandler);
               this.mx_internal::delayTimer.start();
            }
            else
            {
               this.play();
            }
         }
         else
         {
            this.finishEffect();
         }
      }
      
      mx_internal function playWithNoDuration() : void
      {
         this.duration = 0;
         this.repeatCount = 1;
         this.repeatDelay = 0;
         this.startDelay = 0;
         this.startEffect();
      }
      
      mx_internal function eventHandler(param1:Event) : void
      {
         if(param1.type == FlexEvent.SHOW && this.mx_internal::hideOnEffectEnd == true)
         {
            this.mx_internal::hideOnEffectEnd = false;
            param1.target.removeEventListener(FlexEvent.SHOW,this.mx_internal::eventHandler);
         }
      }
      
      private function delayTimerHandler(param1:TimerEvent) : void
      {
         this.mx_internal::delayTimer.reset();
         this.delayStartTime = NaN;
         this.delayElapsedTime = NaN;
         this.play();
      }
   }
}

package mx.effects
{
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.events.FocusEvent;
   import flash.system.ApplicationDomain;
   import flash.utils.Dictionary;
   import mx.core.EventPriority;
   import mx.core.FlexGlobals;
   import mx.core.IDeferredInstantiationUIComponent;
   import mx.core.IFlexDisplayObject;
   import mx.core.IUIComponent;
   import mx.core.IVisualElement;
   import mx.core.IVisualElementContainer;
   import mx.core.UIComponent;
   import mx.core.UIComponentCachePolicy;
   import mx.core.mx_internal;
   import mx.events.EffectEvent;
   import mx.events.FlexEvent;
   import mx.events.MoveEvent;
   import mx.events.ResizeEvent;
   import mx.resources.IResourceManager;
   import mx.resources.ResourceManager;
   
   use namespace mx_internal;
   
   public class EffectManager extends EventDispatcher
   {
      
      private static var weakKeys:Dictionary;
      
      private static var _resourceManager:IResourceManager;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      mx_internal static var effectsPlaying:Array = [];
      
      private static var effectTriggersForEvent:Object = {};
      
      private static var eventsForEffectTriggers:Object = {};
      
      private static var targetsInfo:Array = [];
      
      private static var eventHandlingSuspendCount:Number = 0;
      
      private static var effects:Dictionary = new Dictionary(true);
      
      public function EffectManager()
      {
         super();
      }
      
      mx_internal static function set lastEffectCreated(param1:Effect) : void
      {
         weakKeys = new Dictionary(true);
         weakKeys[param1] = true;
      }
      
      mx_internal static function get lastEffectCreated() : Effect
      {
         var _loc1_:* = undefined;
         var _loc2_:int = 0;
         var _loc3_:* = weakKeys;
         for(_loc1_ in _loc3_)
         {
            return _loc1_;
         }
         return null;
      }
      
      private static function get resourceManager() : IResourceManager
      {
         if(!_resourceManager)
         {
            _resourceManager = ResourceManager.getInstance();
         }
         return _resourceManager;
      }
      
      public static function suspendEventHandling() : void
      {
         ++eventHandlingSuspendCount;
      }
      
      public static function resumeEventHandling() : void
      {
         --eventHandlingSuspendCount;
      }
      
      public static function endEffectsForTarget(param1:IUIComponent) : void
      {
         var _loc4_:EffectInstance = null;
         var _loc2_:int = int(mx_internal::effectsPlaying.length);
         var _loc3_:int = _loc2_ - 1;
         while(_loc3_ >= 0)
         {
            _loc4_ = mx_internal::effectsPlaying[_loc3_].instance;
            if(_loc4_.target == param1)
            {
               _loc4_.end();
            }
            _loc3_--;
         }
      }
      
      mx_internal static function setStyle(param1:String, param2:*) : void
      {
         var _loc3_:String = eventsForEffectTriggers[param1];
         if(_loc3_ != null && _loc3_ != "")
         {
            param2.addEventListener(_loc3_,EffectManager.mx_internal::eventHandler,false,EventPriority.EFFECT);
         }
      }
      
      mx_internal static function createEffectForType(param1:Object, param2:String) : Effect
      {
         var value:Object;
         var effectClass:Class = null;
         var cls:Class = null;
         var effectObj:Effect = null;
         var doc:Object = null;
         var appDomain:ApplicationDomain = null;
         var target:Object = param1;
         var type:String = param2;
         var trigger:String = effectTriggersForEvent[type];
         if(trigger == "")
         {
            trigger = type + "Effect";
         }
         value = target.getStyle(trigger);
         if(!value)
         {
            return null;
         }
         if(value is Class)
         {
            cls = Class(value);
            return new cls(target);
         }
         try
         {
            if(value is String)
            {
               doc = target.parentDocument;
               if(!doc)
               {
                  doc = FlexGlobals.topLevelApplication;
               }
               effectObj = doc[value];
            }
            else if(value is Effect)
            {
               effectObj = Effect(value);
            }
            if(effectObj)
            {
               effectObj.target = target;
               return effectObj;
            }
         }
         catch(e:Error)
         {
         }
         if(target is UIComponent && Boolean(target.moduleFactory))
         {
            appDomain = target.moduleFactory.info()["currentDomain"];
            if(appDomain.hasDefinition("mx.effects." + value))
            {
               effectClass = Class(appDomain.getDefinition("mx.effects." + value));
            }
         }
         if(!effectClass)
         {
            effectClass = Class(target.systemManager.getDefinitionByName("mx.effects." + value));
         }
         if(effectClass)
         {
            return new effectClass(target);
         }
         return null;
      }
      
      private static function animateSameProperty(param1:Effect, param2:Effect, param3:EffectInstance) : Boolean
      {
         var _loc4_:Array = null;
         var _loc5_:Array = null;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:int = 0;
         if(param1.target == param3.target)
         {
            _loc4_ = param1.getAffectedProperties();
            _loc5_ = param2.getAffectedProperties();
            _loc6_ = int(_loc4_.length);
            _loc7_ = int(_loc5_.length);
            _loc8_ = 0;
            while(_loc8_ < _loc6_)
            {
               _loc9_ = 0;
               while(_loc9_ < _loc7_)
               {
                  if(_loc4_[_loc8_] == _loc5_[_loc9_])
                  {
                     return true;
                  }
                  _loc9_++;
               }
               _loc8_++;
            }
         }
         return false;
      }
      
      mx_internal static function startBitmapEffect(param1:IUIComponent) : void
      {
         cacheOrUncacheTargetAsBitmap(param1,true,true);
      }
      
      mx_internal static function endBitmapEffect(param1:IUIComponent) : void
      {
         cacheOrUncacheTargetAsBitmap(param1,false,true);
      }
      
      mx_internal static function startVectorEffect(param1:IUIComponent) : void
      {
         cacheOrUncacheTargetAsBitmap(param1,true,false);
      }
      
      mx_internal static function endVectorEffect(param1:IUIComponent) : void
      {
         cacheOrUncacheTargetAsBitmap(param1,false,false);
      }
      
      private static function cacheOrUncacheTargetAsBitmap(param1:IUIComponent, param2:Boolean = true, param3:Boolean = true) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:Object = null;
         _loc4_ = int(targetsInfo.length);
         _loc5_ = 0;
         while(_loc5_ < _loc4_)
         {
            if(targetsInfo[_loc5_].target == param1)
            {
               _loc6_ = targetsInfo[_loc5_];
               break;
            }
            _loc5_++;
         }
         if(!_loc6_)
         {
            _loc6_ = {
               "target":param1,
               "bitmapEffectsCount":0,
               "vectorEffectsCount":0
            };
            targetsInfo.push(_loc6_);
         }
         if(param2)
         {
            if(param3)
            {
               ++_loc6_.bitmapEffectsCount;
               if(_loc6_.vectorEffectsCount == 0 && param1 is IDeferredInstantiationUIComponent)
               {
                  IDeferredInstantiationUIComponent(param1).cacheHeuristic = true;
               }
            }
            else if(_loc6_.vectorEffectsCount++ == 0 && param1 is IDeferredInstantiationUIComponent && IDeferredInstantiationUIComponent(param1).cachePolicy == UIComponentCachePolicy.AUTO)
            {
               param1.cacheAsBitmap = false;
            }
         }
         else
         {
            if(param3)
            {
               if(_loc6_.bitmapEffectsCount != 0)
               {
                  --_loc6_.bitmapEffectsCount;
               }
               if(param1 is IDeferredInstantiationUIComponent)
               {
                  IDeferredInstantiationUIComponent(param1).cacheHeuristic = false;
               }
            }
            else if(_loc6_.vectorEffectsCount != 0)
            {
               if(--_loc6_.vectorEffectsCount == 0 && _loc6_.bitmapEffectsCount != 0)
               {
                  _loc4_ = int(_loc6_.bitmapEffectsCount);
                  _loc5_ = 0;
                  while(_loc5_ < _loc4_)
                  {
                     if(param1 is IDeferredInstantiationUIComponent)
                     {
                        IDeferredInstantiationUIComponent(param1).cacheHeuristic = true;
                     }
                     _loc5_++;
                  }
               }
            }
            if(_loc6_.bitmapEffectsCount == 0 && _loc6_.vectorEffectsCount == 0)
            {
               _loc4_ = int(targetsInfo.length);
               _loc5_ = 0;
               while(_loc5_ < _loc4_)
               {
                  if(targetsInfo[_loc5_].target == param1)
                  {
                     targetsInfo.splice(_loc5_,1);
                     break;
                  }
                  _loc5_++;
               }
            }
         }
      }
      
      mx_internal static function registerEffectTrigger(param1:String, param2:String) : void
      {
         var _loc3_:Number = NaN;
         if(param1 != "")
         {
            if(param2 == "")
            {
               _loc3_ = param1.length;
               if(_loc3_ > 6 && param1.substring(_loc3_ - 6) == "Effect")
               {
                  param2 = param1.substring(0,_loc3_ - 6);
               }
            }
            if(param2 != "")
            {
               effectTriggersForEvent[param2] = param1;
               eventsForEffectTriggers[param1] = param2;
            }
         }
      }
      
      mx_internal static function getEventForEffectTrigger(param1:String) : String
      {
         var effectTrigger:String = param1;
         if(!eventsForEffectTriggers)
         {
            return "";
         }
         try
         {
            return eventsForEffectTriggers[effectTrigger];
         }
         catch(e:Error)
         {
            return "";
         }
      }
      
      mx_internal static function eventHandler(param1:Event) : void
      {
         var _loc2_:FocusEvent = null;
         var _loc3_:DisplayObject = null;
         var _loc4_:int = 0;
         var _loc5_:DisplayObjectContainer = null;
         var _loc6_:int = 0;
         if(!(param1.currentTarget is IFlexDisplayObject))
         {
            return;
         }
         if(eventHandlingSuspendCount > 0)
         {
            return;
         }
         if(param1 is FocusEvent && (param1.type == FocusEvent.FOCUS_OUT || param1.type == FocusEvent.FOCUS_IN))
         {
            _loc2_ = FocusEvent(param1);
            if(Boolean(_loc2_.relatedObject) && (_loc2_.currentTarget.contains(_loc2_.relatedObject) || _loc2_.currentTarget == _loc2_.relatedObject))
            {
               return;
            }
         }
         if((param1.type == Event.ADDED || param1.type == Event.REMOVED) && param1.target != param1.currentTarget)
         {
            return;
         }
         if(param1.type == Event.REMOVED)
         {
            if(param1.target is UIComponent)
            {
               if(UIComponent(param1.target).initialized == false)
               {
                  return;
               }
               if(UIComponent(param1.target).mx_internal::isEffectStarted)
               {
                  _loc4_ = 0;
                  while(_loc4_ < UIComponent(param1.target).mx_internal::_effectsStarted.length)
                  {
                     if(UIComponent(param1.target).mx_internal::_effectsStarted[_loc4_].triggerEvent.type == Event.REMOVED)
                     {
                        return;
                     }
                     _loc4_++;
                  }
               }
            }
            _loc3_ = param1.target as DisplayObject;
            if(_loc3_ != null)
            {
               _loc5_ = _loc3_.parent as DisplayObjectContainer;
               if(_loc5_ != null)
               {
                  _loc6_ = _loc5_.getChildIndex(_loc3_);
                  if(_loc6_ >= 0)
                  {
                     if(_loc3_ is UIComponent)
                     {
                        UIComponent(_loc3_).callLater(removedEffectHandler,[_loc3_,_loc5_,_loc6_,param1]);
                     }
                  }
               }
            }
         }
         else
         {
            createAndPlayEffect(param1,param1.currentTarget);
         }
      }
      
      private static function createAndPlayEffect(param1:Event, param2:Object) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc9_:String = null;
         var _loc10_:String = null;
         var _loc11_:Array = null;
         var _loc12_:Array = null;
         var _loc13_:Array = null;
         var _loc14_:Array = null;
         var _loc15_:EffectInstance = null;
         var _loc3_:Effect = mx_internal::createEffectForType(param2,param1.type);
         if(!_loc3_)
         {
            return;
         }
         if(_loc3_ is Zoom && param1.type == MoveEvent.MOVE)
         {
            _loc9_ = resourceManager.getString("effects","incorrectTrigger");
            throw new Error(_loc9_);
         }
         if(param2.initialized == false)
         {
            _loc10_ = param1.type;
            if(_loc10_ == MoveEvent.MOVE || _loc10_ == ResizeEvent.RESIZE || _loc10_ == FlexEvent.SHOW || _loc10_ == FlexEvent.HIDE || _loc10_ == Event.CHANGE)
            {
               _loc3_ = null;
               return;
            }
         }
         if(_loc3_.target is IUIComponent)
         {
            _loc11_ = IUIComponent(_loc3_.target).tweeningProperties;
            if((Boolean(_loc11_)) && _loc11_.length > 0)
            {
               _loc12_ = _loc3_.getAffectedProperties();
               _loc4_ = int(_loc11_.length);
               _loc6_ = int(_loc12_.length);
               _loc5_ = 0;
               while(_loc5_ < _loc4_)
               {
                  _loc7_ = 0;
                  while(_loc7_ < _loc6_)
                  {
                     if(_loc11_[_loc5_] == _loc12_[_loc7_])
                     {
                        _loc3_ = null;
                        return;
                     }
                     _loc7_++;
                  }
                  _loc5_++;
               }
            }
         }
         if(_loc3_.target is UIComponent && UIComponent(_loc3_.target).mx_internal::isEffectStarted)
         {
            _loc13_ = _loc3_.getAffectedProperties();
            _loc5_ = 0;
            while(_loc5_ < _loc13_.length)
            {
               _loc14_ = _loc3_.target.getEffectsForProperty(_loc13_[_loc5_]);
               if(_loc14_.length > 0)
               {
                  if(param1.type == ResizeEvent.RESIZE)
                  {
                     return;
                  }
                  _loc7_ = 0;
                  while(_loc7_ < _loc14_.length)
                  {
                     _loc15_ = _loc14_[_loc7_];
                     if(param1.type == FlexEvent.SHOW && _loc15_.mx_internal::hideOnEffectEnd)
                     {
                        _loc15_.target.removeEventListener(FlexEvent.SHOW,_loc15_.mx_internal::eventHandler);
                        _loc15_.mx_internal::hideOnEffectEnd = false;
                     }
                     _loc15_.end();
                     _loc7_++;
                  }
               }
               _loc5_++;
            }
         }
         _loc3_.triggerEvent = param1;
         _loc3_.addEventListener(EffectEvent.EFFECT_END,EffectManager.mx_internal::effectEndHandler);
         mx_internal::lastEffectCreated = _loc3_;
         var _loc8_:Array = _loc3_.play();
         _loc4_ = int(_loc8_.length);
         _loc5_ = 0;
         while(_loc5_ < _loc4_)
         {
            mx_internal::effectsPlaying.push(new EffectNode(_loc3_,_loc8_[_loc5_]));
            _loc5_++;
         }
         if(_loc3_.suspendBackgroundProcessing)
         {
            UIComponent.suspendBackgroundProcessing();
         }
      }
      
      private static function removedEffectHandler(param1:DisplayObject, param2:DisplayObjectContainer, param3:int, param4:Event) : void
      {
         suspendEventHandling();
         if(param2 is IVisualElementContainer && param1 is IVisualElement)
         {
            IVisualElementContainer(param2).addElementAt(param1 as IVisualElement,param3);
         }
         else
         {
            param2.addChildAt(param1,param3);
         }
         resumeEventHandling();
         createAndPlayEffect(param4,param1);
      }
      
      mx_internal static function effectEndHandler(param1:EffectEvent) : void
      {
         var _loc5_:DisplayObject = null;
         var _loc6_:DisplayObjectContainer = null;
         var _loc2_:IEffectInstance = param1.effectInstance;
         var _loc3_:int = int(mx_internal::effectsPlaying.length);
         var _loc4_:int = _loc3_ - 1;
         while(_loc4_ >= 0)
         {
            if(mx_internal::effectsPlaying[_loc4_].instance == _loc2_)
            {
               mx_internal::effectsPlaying.splice(_loc4_,1);
               break;
            }
            _loc4_--;
         }
         if(Object(_loc2_).hideOnEffectEnd == true)
         {
            _loc2_.target.removeEventListener(FlexEvent.SHOW,Object(_loc2_).eventHandler);
            _loc2_.target.setVisible(false,true);
         }
         if(Boolean(_loc2_.triggerEvent) && _loc2_.triggerEvent.type == Event.REMOVED)
         {
            _loc5_ = _loc2_.target as DisplayObject;
            if(_loc5_ != null)
            {
               _loc6_ = _loc5_.parent as DisplayObjectContainer;
               if(_loc6_ != null)
               {
                  suspendEventHandling();
                  if(_loc6_ is IVisualElementContainer && _loc5_ is IVisualElement)
                  {
                     IVisualElementContainer(_loc6_).removeElement(_loc5_ as IVisualElement);
                  }
                  else
                  {
                     _loc6_.removeChild(_loc5_);
                  }
                  resumeEventHandling();
               }
            }
         }
         if(_loc2_.suspendBackgroundProcessing)
         {
            UIComponent.resumeBackgroundProcessing();
         }
      }
      
      mx_internal static function effectStarted(param1:EffectInstance) : void
      {
         effects[param1] = 1;
      }
      
      mx_internal static function effectFinished(param1:EffectInstance) : void
      {
         delete effects[param1];
      }
      
      mx_internal static function effectsInEffect() : Boolean
      {
         var _loc1_:* = undefined;
         var _loc2_:int = 0;
         var _loc3_:* = effects;
         for(_loc1_ in _loc3_)
         {
            return true;
         }
         return false;
      }
   }
}

class EffectNode
{
   
   public var factory:Effect;
   
   public var instance:EffectInstance;
   
   public function EffectNode(param1:Effect, param2:EffectInstance)
   {
      super();
      this.factory = param1;
      this.instance = param2;
   }
}
package mx.effects
{
   import mx.core.mx_internal;
   import mx.effects.effectClasses.PropertyChanges;
   
   use namespace mx_internal;
   
   public class EffectTargetFilter
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var filterFunction:Function;
      
      public var filterProperties:Array = [];
      
      public var filterStyles:Array = [];
      
      public var requiredSemantics:Object = null;
      
      public function EffectTargetFilter()
      {
         this.filterFunction = this.defaultFilterFunctionEx;
         super();
      }
      
      public function filterInstance(param1:Array, param2:IEffectTargetHost, param3:Object) : Boolean
      {
         if(this.filterFunction.length == 2)
         {
            return this.filterFunction(param1,param3);
         }
         return this.filterFunction(param1,param2,param3);
      }
      
      protected function defaultFilterFunctionEx(param1:Array, param2:IEffectTargetHost, param3:Object) : Boolean
      {
         var _loc4_:String = null;
         if(this.requiredSemantics)
         {
            for(_loc4_ in this.requiredSemantics)
            {
               if(!param2)
               {
                  return false;
               }
               if(param2.getRendererSemanticValue(param3,_loc4_) != this.requiredSemantics[_loc4_])
               {
                  return false;
               }
            }
            return true;
         }
         return this.defaultFilterFunction(param1,param3);
      }
      
      protected function defaultFilterFunction(param1:Array, param2:Object) : Boolean
      {
         var _loc5_:PropertyChanges = null;
         var _loc6_:Array = null;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc3_:int = int(param1.length);
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_)
         {
            _loc5_ = param1[_loc4_];
            if(_loc5_.target == param2)
            {
               _loc6_ = this.filterProperties.concat(this.filterStyles);
               _loc7_ = int(_loc6_.length);
               _loc8_ = 0;
               while(_loc8_ < _loc7_)
               {
                  if(_loc5_.start[_loc6_[_loc8_]] !== undefined && _loc5_.end[_loc6_[_loc8_]] != _loc5_.start[_loc6_[_loc8_]])
                  {
                     return true;
                  }
                  _loc8_++;
               }
            }
            _loc4_++;
         }
         return false;
      }
   }
}

package mx.effects
{
   import flash.events.IEventDispatcher;
   
   public interface IAbstractEffect extends IEventDispatcher
   {
      
      
   }
}

package mx.effects
{
   import flash.events.Event;
   
   public interface IEffect extends IAbstractEffect
   {
      
      function get className() : String;
      
      function get customFilter() : EffectTargetFilter;
      
      function set customFilter(param1:EffectTargetFilter) : void;
      
      function get duration() : Number;
      
      function set duration(param1:Number) : void;
      
      function get effectTargetHost() : IEffectTargetHost;
      
      function set effectTargetHost(param1:IEffectTargetHost) : void;
      
      function get filter() : String;
      
      function set filter(param1:String) : void;
      
      function get hideFocusRing() : Boolean;
      
      function set hideFocusRing(param1:Boolean) : void;
      
      function get isPlaying() : Boolean;
      
      function get perElementOffset() : Number;
      
      function set perElementOffset(param1:Number) : void;
      
      function get relevantProperties() : Array;
      
      function set relevantProperties(param1:Array) : void;
      
      function get relevantStyles() : Array;
      
      function set relevantStyles(param1:Array) : void;
      
      function get target() : Object;
      
      function set target(param1:Object) : void;
      
      function get targets() : Array;
      
      function set targets(param1:Array) : void;
      
      function get triggerEvent() : Event;
      
      function set triggerEvent(param1:Event) : void;
      
      function get playheadTime() : Number;
      
      function set playheadTime(param1:Number) : void;
      
      function getAffectedProperties() : Array;
      
      function createInstances(param1:Array = null) : Array;
      
      function createInstance(param1:Object = null) : IEffectInstance;
      
      function deleteInstance(param1:IEffectInstance) : void;
      
      function play(param1:Array = null, param2:Boolean = false) : Array;
      
      function pause() : void;
      
      function stop() : void;
      
      function resume() : void;
      
      function reverse() : void;
      
      function end(param1:IEffectInstance = null) : void;
      
      function captureStartValues() : void;
      
      function captureMoreStartValues(param1:Array) : void;
      
      function captureEndValues() : void;
   }
}

package mx.effects
{
   import flash.events.Event;
   import mx.effects.effectClasses.PropertyChanges;
   
   public interface IEffectInstance
   {
      
      function get className() : String;
      
      function get duration() : Number;
      
      function set duration(param1:Number) : void;
      
      function get effect() : IEffect;
      
      function set effect(param1:IEffect) : void;
      
      function get effectTargetHost() : IEffectTargetHost;
      
      function set effectTargetHost(param1:IEffectTargetHost) : void;
      
      function get hideFocusRing() : Boolean;
      
      function set hideFocusRing(param1:Boolean) : void;
      
      function get playheadTime() : Number;
      
      function set playheadTime(param1:Number) : void;
      
      function get propertyChanges() : PropertyChanges;
      
      function set propertyChanges(param1:PropertyChanges) : void;
      
      function get repeatCount() : int;
      
      function set repeatCount(param1:int) : void;
      
      function get repeatDelay() : int;
      
      function set repeatDelay(param1:int) : void;
      
      function get startDelay() : int;
      
      function set startDelay(param1:int) : void;
      
      function get suspendBackgroundProcessing() : Boolean;
      
      function set suspendBackgroundProcessing(param1:Boolean) : void;
      
      function get target() : Object;
      
      function set target(param1:Object) : void;
      
      function get triggerEvent() : Event;
      
      function set triggerEvent(param1:Event) : void;
      
      function initEffect(param1:Event) : void;
      
      function startEffect() : void;
      
      function play() : void;
      
      function pause() : void;
      
      function stop() : void;
      
      function resume() : void;
      
      function reverse() : void;
      
      function end() : void;
      
      function finishEffect() : void;
      
      function finishRepeat() : void;
   }
}

package mx.effects
{
   public interface IEffectTargetHost
   {
      
      function unconstrainRenderer(param1:Object) : void;
      
      function removeDataEffectItem(param1:Object) : void;
      
      function addDataEffectItem(param1:Object) : void;
      
      function getRendererSemanticValue(param1:Object, param2:String) : Object;
   }
}

package mx.effects
{
   import flash.events.EventDispatcher;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   import flash.utils.getTimer;
   import mx.core.UIComponentGlobals;
   import mx.core.mx_internal;
   import mx.events.TweenEvent;
   
   use namespace mx_internal;
   
   public class Tween extends EventDispatcher
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      mx_internal static var activeTweens:Array = [];
      
      private static var interval:Number = 10;
      
      private static var timer:Timer = null;
      
      mx_internal static var intervalTime:Number = NaN;
      
      mx_internal var needToLayout:Boolean = false;
      
      private var id:int;
      
      private var maxDelay:Number = 87.5;
      
      private var arrayMode:Boolean;
      
      private var _doSeek:Boolean = false;
      
      private var _isPlaying:Boolean = true;
      
      private var _doReverse:Boolean = false;
      
      mx_internal var startTime:Number;
      
      private var previousUpdateTime:Number;
      
      private var userEquation:Function;
      
      private var updateFunction:Function;
      
      private var endFunction:Function;
      
      private var endValue:Object;
      
      private var startValue:Object;
      
      private var started:Boolean = false;
      
      public var duration:Number = 3000;
      
      public var listener:Object;
      
      private var _playheadTime:Number = 0;
      
      private var _invertValues:Boolean = false;
      
      public function Tween(param1:Object, param2:Object, param3:Object, param4:Number = -1, param5:Number = -1, param6:Function = null, param7:Function = null)
      {
         this.userEquation = this.defaultEasingFunction;
         super();
         if(!param1)
         {
            return;
         }
         if(param2 is Array)
         {
            this.arrayMode = true;
         }
         this.listener = param1;
         this.startValue = param2;
         this.endValue = param3;
         if(!isNaN(param4) && param4 != -1)
         {
            this.duration = param4;
         }
         if(!isNaN(param5) && param5 != -1)
         {
            this.maxDelay = 1000 / param5;
         }
         this.updateFunction = param6;
         this.endFunction = param7;
         if(param4 == 0)
         {
            this.id = -1;
            this.endTween();
         }
         else
         {
            Tween.addTween(this);
         }
      }
      
      private static function addTween(param1:Tween) : void
      {
         param1.id = mx_internal::activeTweens.length;
         mx_internal::activeTweens.push(param1);
         if(!timer)
         {
            timer = new Timer(interval);
            timer.addEventListener(TimerEvent.TIMER,timerHandler);
            timer.start();
         }
         else
         {
            timer.start();
         }
         if(isNaN(mx_internal::intervalTime))
         {
            mx_internal::intervalTime = getTimer();
         }
         param1.mx_internal::startTime = param1.previousUpdateTime = mx_internal::intervalTime;
      }
      
      private static function removeTweenAt(param1:int) : void
      {
         var _loc4_:Tween = null;
         if(param1 >= mx_internal::activeTweens.length || param1 < 0)
         {
            return;
         }
         mx_internal::activeTweens.splice(param1,1);
         var _loc2_:int = int(mx_internal::activeTweens.length);
         var _loc3_:int = param1;
         while(_loc3_ < _loc2_)
         {
            _loc4_ = Tween(mx_internal::activeTweens[_loc3_]);
            --_loc4_.id;
            _loc3_++;
         }
         if(_loc2_ == 0)
         {
            mx_internal::intervalTime = NaN;
            timer.reset();
         }
      }
      
      mx_internal static function removeTween(param1:Tween) : void
      {
         removeTweenAt(param1.id);
      }
      
      private static function timerHandler(param1:TimerEvent) : void
      {
         var _loc6_:Tween = null;
         var _loc2_:Boolean = false;
         var _loc3_:Number = mx_internal::intervalTime;
         mx_internal::intervalTime = getTimer();
         var _loc4_:int;
         var _loc5_:int = _loc4_ = int(mx_internal::activeTweens.length);
         while(_loc5_ >= 0)
         {
            _loc6_ = Tween(mx_internal::activeTweens[_loc5_]);
            if(_loc6_)
            {
               _loc6_.mx_internal::needToLayout = false;
               _loc6_.mx_internal::doInterval();
               if(_loc6_.mx_internal::needToLayout)
               {
                  _loc2_ = true;
               }
            }
            _loc5_--;
         }
         if(_loc2_)
         {
            UIComponentGlobals.mx_internal::layoutManager.validateNow();
         }
         param1.updateAfterEvent();
      }
      
      mx_internal function get playheadTime() : Number
      {
         return this._playheadTime;
      }
      
      mx_internal function get playReversed() : Boolean
      {
         return this._invertValues;
      }
      
      mx_internal function set playReversed(param1:Boolean) : void
      {
         this._invertValues = param1;
      }
      
      public function setTweenHandlers(param1:Function, param2:Function) : void
      {
         this.updateFunction = param1;
         this.endFunction = param2;
      }
      
      public function set easingFunction(param1:Function) : void
      {
         this.userEquation = param1;
      }
      
      public function endTween() : void
      {
         var _loc1_:TweenEvent = new TweenEvent(TweenEvent.TWEEN_END);
         var _loc2_:Object = this.mx_internal::getCurrentValue(this.duration);
         _loc1_.value = _loc2_;
         dispatchEvent(_loc1_);
         if(this.endFunction != null)
         {
            this.endFunction(_loc2_);
         }
         else
         {
            this.listener.onTweenEnd(_loc2_);
         }
         if(this.id >= 0)
         {
            Tween.removeTweenAt(this.id);
         }
      }
      
      mx_internal function doInterval() : Boolean
      {
         var _loc2_:Number = NaN;
         var _loc3_:Object = null;
         var _loc4_:TweenEvent = null;
         var _loc5_:TweenEvent = null;
         var _loc1_:Boolean = false;
         this.previousUpdateTime = mx_internal::intervalTime;
         if(this._isPlaying || this._doSeek)
         {
            _loc2_ = mx_internal::intervalTime - this.mx_internal::startTime;
            this._playheadTime = _loc2_;
            _loc3_ = this.mx_internal::getCurrentValue(_loc2_);
            if(_loc2_ >= this.duration && !this._doSeek)
            {
               this.endTween();
               _loc1_ = true;
            }
            else
            {
               if(!this.started)
               {
                  _loc5_ = new TweenEvent(TweenEvent.TWEEN_START);
                  dispatchEvent(_loc5_);
                  this.started = true;
               }
               _loc4_ = new TweenEvent(TweenEvent.TWEEN_UPDATE);
               _loc4_.value = _loc3_;
               dispatchEvent(_loc4_);
               if(this.updateFunction != null)
               {
                  this.updateFunction(_loc3_);
               }
               else
               {
                  this.listener.onTweenUpdate(_loc3_);
               }
            }
            this._doSeek = false;
         }
         return _loc1_;
      }
      
      mx_internal function getCurrentValue(param1:Number) : Object
      {
         var _loc2_:Array = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         if(this.duration == 0)
         {
            return this.endValue;
         }
         if(this._invertValues)
         {
            param1 = this.duration - param1;
         }
         if(this.arrayMode)
         {
            _loc2_ = [];
            _loc3_ = int(this.startValue.length);
            _loc4_ = 0;
            while(_loc4_ < _loc3_)
            {
               _loc2_[_loc4_] = this.userEquation(param1,this.startValue[_loc4_],this.endValue[_loc4_] - this.startValue[_loc4_],this.duration);
               _loc4_++;
            }
            return _loc2_;
         }
         return this.userEquation(param1,this.startValue,Number(this.endValue) - Number(this.startValue),this.duration);
      }
      
      private function defaultEasingFunction(param1:Number, param2:Number, param3:Number, param4:Number) : Number
      {
         return param3 / 2 * (Math.sin(Math.PI * (param1 / param4 - 0.5)) + 1) + param2;
      }
      
      public function seek(param1:Number) : void
      {
         var _loc2_:Number = mx_internal::intervalTime;
         this.previousUpdateTime = _loc2_;
         this.mx_internal::startTime = _loc2_ - param1;
         this._doSeek = true;
         this.mx_internal::doInterval();
      }
      
      public function reverse() : void
      {
         if(this._isPlaying)
         {
            this._doReverse = false;
            this.seek(this.duration - this._playheadTime);
            this._invertValues = !this._invertValues;
         }
         else
         {
            this._doReverse = !this._doReverse;
         }
      }
      
      public function pause() : void
      {
         this._isPlaying = false;
      }
      
      public function stop() : void
      {
         if(this.id >= 0)
         {
            Tween.removeTweenAt(this.id);
         }
      }
      
      public function resume() : void
      {
         this._isPlaying = true;
         this.mx_internal::startTime = mx_internal::intervalTime - this._playheadTime;
         if(this._doReverse)
         {
            this.reverse();
            this._doReverse = false;
         }
      }
   }
}

package mx.effects
{
   import flash.events.EventDispatcher;
   import mx.core.mx_internal;
   import mx.effects.effectClasses.TweenEffectInstance;
   import mx.events.TweenEvent;
   
   use namespace mx_internal;
   
   public class TweenEffect extends Effect
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var easingFunction:Function = null;
      
      public function TweenEffect(param1:Object = null)
      {
         super(param1);
         instanceClass = TweenEffectInstance;
      }
      
      override protected function initInstance(param1:IEffectInstance) : void
      {
         super.initInstance(param1);
         TweenEffectInstance(param1).easingFunction = this.easingFunction;
         EventDispatcher(param1).addEventListener(TweenEvent.TWEEN_START,this.tweenEventHandler);
         EventDispatcher(param1).addEventListener(TweenEvent.TWEEN_UPDATE,this.tweenEventHandler);
         EventDispatcher(param1).addEventListener(TweenEvent.TWEEN_END,this.tweenEventHandler);
      }
      
      protected function tweenEventHandler(param1:TweenEvent) : void
      {
         dispatchEvent(param1);
      }
   }
}

package mx.effects
{
   import mx.core.mx_internal;
   import mx.effects.effectClasses.ZoomInstance;
   
   use namespace mx_internal;
   
   public class Zoom extends TweenEffect
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static var AFFECTED_PROPERTIES:Array = ["scaleX","scaleY","x","y","width","height"];
      
      public var captureRollEvents:Boolean;
      
      public var originX:Number;
      
      public var originY:Number;
      
      public var zoomHeightFrom:Number;
      
      public var zoomHeightTo:Number;
      
      public var zoomWidthFrom:Number;
      
      public var zoomWidthTo:Number;
      
      public function Zoom(param1:Object = null)
      {
         super(param1);
         instanceClass = ZoomInstance;
         mx_internal::applyActualDimensions = false;
         relevantProperties = ["scaleX","scaleY","width","height","visible"];
      }
      
      override public function getAffectedProperties() : Array
      {
         return AFFECTED_PROPERTIES;
      }
      
      override protected function initInstance(param1:IEffectInstance) : void
      {
         var _loc2_:ZoomInstance = null;
         super.initInstance(param1);
         _loc2_ = ZoomInstance(param1);
         _loc2_.zoomWidthFrom = this.zoomWidthFrom;
         _loc2_.zoomWidthTo = this.zoomWidthTo;
         _loc2_.zoomHeightFrom = this.zoomHeightFrom;
         _loc2_.zoomHeightTo = this.zoomHeightTo;
         _loc2_.originX = this.originX;
         _loc2_.originY = this.originY;
         _loc2_.captureRollEvents = this.captureRollEvents;
      }
   }
}

package mx.effects.effectClasses
{
   import mx.core.mx_internal;
   import mx.effects.EffectTargetFilter;
   
   use namespace mx_internal;
   
   public class AddRemoveEffectTargetFilter extends EffectTargetFilter
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var add:Boolean = true;
      
      public function AddRemoveEffectTargetFilter()
      {
         super();
         filterProperties = ["parent"];
      }
      
      override protected function defaultFilterFunction(param1:Array, param2:Object) : Boolean
      {
         var _loc5_:PropertyChanges = null;
         var _loc3_:int = int(param1.length);
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_)
         {
            _loc5_ = param1[_loc4_];
            if(_loc5_.target == param2)
            {
               if(this.add)
               {
                  return _loc5_.start["parent"] == null && _loc5_.end["parent"] != null;
               }
               return _loc5_.start["parent"] != null && _loc5_.end["parent"] == null;
            }
            _loc4_++;
         }
         return false;
      }
   }
}

package mx.effects.effectClasses
{
   import mx.core.mx_internal;
   import mx.effects.EffectTargetFilter;
   
   use namespace mx_internal;
   
   public class HideShowEffectTargetFilter extends EffectTargetFilter
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var show:Boolean = true;
      
      public function HideShowEffectTargetFilter()
      {
         super();
         filterProperties = ["visible"];
      }
      
      override protected function defaultFilterFunction(param1:Array, param2:Object) : Boolean
      {
         var _loc5_:PropertyChanges = null;
         var _loc3_:int = int(param1.length);
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_)
         {
            _loc5_ = param1[_loc4_];
            if(_loc5_.target == param2)
            {
               return _loc5_.end["visible"] == this.show;
            }
            _loc4_++;
         }
         return false;
      }
   }
}

package mx.effects.effectClasses
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class PropertyChanges
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var end:Object = {};
      
      public var start:Object = {};
      
      public var target:Object;
      
      public var stripUnchangedValues:Boolean = true;
      
      public function PropertyChanges(param1:Object)
      {
         super();
         this.target = param1;
      }
   }
}

package mx.effects.effectClasses
{
   import mx.core.UIComponentGlobals;
   import mx.core.mx_internal;
   import mx.effects.EffectInstance;
   import mx.effects.Tween;
   import mx.events.TweenEvent;
   
   use namespace mx_internal;
   
   public class TweenEffectInstance extends EffectInstance
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      mx_internal var needToLayout:Boolean = false;
      
      private var _seekTime:Number = 0;
      
      public var easingFunction:Function;
      
      public var tween:Tween;
      
      public function TweenEffectInstance(param1:Object)
      {
         super(param1);
      }
      
      override mx_internal function set playReversed(param1:Boolean) : void
      {
         super.mx_internal::playReversed = param1;
         if(this.tween)
         {
            this.tween.mx_internal::playReversed = param1;
         }
      }
      
      override public function get playheadTime() : Number
      {
         if(this.tween)
         {
            return this.tween.mx_internal::playheadTime + super.playheadTime;
         }
         return 0;
      }
      
      override public function set playheadTime(param1:Number) : void
      {
         if(this.tween)
         {
            this.tween.seek(param1);
         }
         else
         {
            this._seekTime = param1;
         }
      }
      
      override public function pause() : void
      {
         super.pause();
         if(this.tween)
         {
            this.tween.pause();
         }
      }
      
      override public function stop() : void
      {
         super.stop();
         if(this.tween)
         {
            this.tween.stop();
         }
      }
      
      override public function resume() : void
      {
         super.resume();
         if(this.tween)
         {
            this.tween.resume();
         }
      }
      
      override public function reverse() : void
      {
         super.reverse();
         if(this.tween)
         {
            this.tween.reverse();
         }
         super.mx_internal::playReversed = !mx_internal::playReversed;
      }
      
      override public function end() : void
      {
         mx_internal::stopRepeat = true;
         if(mx_internal::delayTimer)
         {
            mx_internal::delayTimer.reset();
         }
         if(this.tween)
         {
            this.tween.endTween();
            this.tween = null;
         }
      }
      
      protected function createTween(param1:Object, param2:Object, param3:Object, param4:Number = -1, param5:Number = -1) : Tween
      {
         var _loc6_:Tween = new Tween(param1,param2,param3,param4,param5);
         _loc6_.addEventListener(TweenEvent.TWEEN_START,this.tweenEventHandler);
         _loc6_.addEventListener(TweenEvent.TWEEN_UPDATE,this.tweenEventHandler);
         _loc6_.addEventListener(TweenEvent.TWEEN_END,this.tweenEventHandler);
         if(this.easingFunction != null)
         {
            _loc6_.easingFunction = this.easingFunction;
         }
         if(this._seekTime > 0)
         {
            _loc6_.seek(this._seekTime);
         }
         _loc6_.mx_internal::playReversed = mx_internal::playReversed;
         return _loc6_;
      }
      
      mx_internal function applyTweenStartValues() : void
      {
         if(duration > 0)
         {
            this.onTweenUpdate(this.tween.mx_internal::getCurrentValue(0));
         }
      }
      
      private function tweenEventHandler(param1:TweenEvent) : void
      {
         dispatchEvent(param1);
      }
      
      public function onTweenUpdate(param1:Object) : void
      {
      }
      
      public function onTweenEnd(param1:Object) : void
      {
         this.onTweenUpdate(param1);
         this.tween = null;
         if(this.mx_internal::needToLayout)
         {
            UIComponentGlobals.mx_internal::layoutManager.validateNow();
         }
         finishRepeat();
      }
   }
}

package mx.effects.effectClasses
{
   import flash.events.Event;
   import flash.events.MouseEvent;
   import mx.core.mx_internal;
   import mx.effects.EffectManager;
   import mx.events.FlexEvent;
   
   use namespace mx_internal;
   
   public class ZoomInstance extends TweenEffectInstance
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var origScaleX:Number;
      
      private var origScaleY:Number;
      
      private var origX:Number;
      
      private var origY:Number;
      
      private var newX:Number;
      
      private var newY:Number;
      
      private var scaledOriginX:Number;
      
      private var scaledOriginY:Number;
      
      private var origPercentWidth:Number;
      
      private var origPercentHeight:Number;
      
      private var _mouseHasMoved:Boolean = false;
      
      private var show:Boolean = true;
      
      public var captureRollEvents:Boolean;
      
      public var originX:Number;
      
      public var originY:Number;
      
      public var zoomHeightFrom:Number;
      
      public var zoomHeightTo:Number;
      
      public var zoomWidthFrom:Number;
      
      public var zoomWidthTo:Number;
      
      public function ZoomInstance(param1:Object)
      {
         super(param1);
      }
      
      override public function initEffect(param1:Event) : void
      {
         super.initEffect(param1);
         if(param1.type == FlexEvent.HIDE || param1.type == Event.REMOVED)
         {
            this.show = false;
         }
      }
      
      override public function play() : void
      {
         super.play();
         this.applyPropertyChanges();
         if(isNaN(this.zoomWidthFrom) && isNaN(this.zoomWidthTo) && isNaN(this.zoomHeightFrom) && isNaN(this.zoomHeightTo))
         {
            if(this.show)
            {
               this.zoomWidthFrom = this.zoomHeightFrom = 0;
               this.zoomWidthTo = target.scaleX;
               this.zoomHeightTo = target.scaleY;
            }
            else
            {
               this.zoomWidthFrom = target.scaleX;
               this.zoomHeightFrom = target.scaleY;
               this.zoomWidthTo = this.zoomHeightTo = 0;
            }
         }
         else
         {
            if(isNaN(this.zoomWidthFrom) && isNaN(this.zoomWidthTo))
            {
               this.zoomWidthFrom = this.zoomWidthTo = target.scaleX;
            }
            else if(isNaN(this.zoomHeightFrom) && isNaN(this.zoomHeightTo))
            {
               this.zoomHeightFrom = this.zoomHeightTo = target.scaleY;
            }
            if(isNaN(this.zoomWidthFrom))
            {
               this.zoomWidthFrom = target.scaleX;
            }
            else if(isNaN(this.zoomWidthTo))
            {
               this.zoomWidthTo = this.zoomWidthFrom == 1 ? 0 : 1;
            }
            if(isNaN(this.zoomHeightFrom))
            {
               this.zoomHeightFrom = target.scaleY;
            }
            else if(isNaN(this.zoomHeightTo))
            {
               this.zoomHeightTo = this.zoomHeightFrom == 1 ? 0 : 1;
            }
         }
         if(this.zoomWidthFrom < 0.01)
         {
            this.zoomWidthFrom = 0.01;
         }
         if(this.zoomWidthTo < 0.01)
         {
            this.zoomWidthTo = 0.01;
         }
         if(this.zoomHeightFrom < 0.01)
         {
            this.zoomHeightFrom = 0.01;
         }
         if(this.zoomHeightTo < 0.01)
         {
            this.zoomHeightTo = 0.01;
         }
         this.origScaleX = target.scaleX;
         this.origScaleY = target.scaleY;
         this.newX = this.origX = target.x;
         this.newY = this.origY = target.y;
         if(isNaN(this.originX))
         {
            this.scaledOriginX = target.width / 2;
         }
         else
         {
            this.scaledOriginX = this.originX * this.origScaleX;
         }
         if(isNaN(this.originY))
         {
            this.scaledOriginY = target.height / 2;
         }
         else
         {
            this.scaledOriginY = this.originY * this.origScaleY;
         }
         this.scaledOriginX = Number(this.scaledOriginX.toFixed(1));
         this.scaledOriginY = Number(this.scaledOriginY.toFixed(1));
         this.origPercentWidth = target.percentWidth;
         if(!isNaN(this.origPercentWidth))
         {
            target.width = target.width;
         }
         this.origPercentHeight = target.percentHeight;
         if(!isNaN(this.origPercentHeight))
         {
            target.height = target.height;
         }
         tween = createTween(this,[this.zoomWidthFrom,this.zoomHeightFrom],[this.zoomWidthTo,this.zoomHeightTo],duration);
         if(this.captureRollEvents)
         {
            target.addEventListener(MouseEvent.ROLL_OVER,this.mouseEventHandler,false);
            target.addEventListener(MouseEvent.ROLL_OUT,this.mouseEventHandler,false);
            target.addEventListener(MouseEvent.MOUSE_MOVE,this.mouseEventHandler,false);
         }
      }
      
      override public function onTweenUpdate(param1:Object) : void
      {
         EffectManager.suspendEventHandling();
         if(Math.abs(this.newX - target.x) > 0.1)
         {
            this.origX += Number(target.x.toFixed(1)) - this.newX;
         }
         if(Math.abs(this.newY - target.y) > 0.1)
         {
            this.origY += Number(target.y.toFixed(1)) - this.newY;
         }
         target.scaleX = param1[0];
         target.scaleY = param1[1];
         var _loc2_:Number = param1[0] / this.origScaleX;
         var _loc3_:Number = param1[1] / this.origScaleY;
         var _loc4_:Number = this.scaledOriginX * _loc2_;
         var _loc5_:Number = this.scaledOriginY * _loc3_;
         this.newX = this.scaledOriginX - _loc4_ + this.origX;
         this.newY = this.scaledOriginY - _loc5_ + this.origY;
         this.newX = Number(this.newX.toFixed(1));
         this.newY = Number(this.newY.toFixed(1));
         target.move(this.newX,this.newY);
         if(tween)
         {
            tween.mx_internal::needToLayout = true;
         }
         else
         {
            mx_internal::needToLayout = true;
         }
         EffectManager.resumeEventHandling();
      }
      
      override public function onTweenEnd(param1:Object) : void
      {
         var _loc2_:Number = NaN;
         var _loc3_:Number = NaN;
         if(!isNaN(this.origPercentWidth))
         {
            _loc2_ = Number(target.width);
            target.percentWidth = this.origPercentWidth;
            if(Boolean(target.parent) && target.parent.autoLayout == false)
            {
               target._width = _loc2_;
            }
         }
         if(!isNaN(this.origPercentHeight))
         {
            _loc3_ = Number(target.height);
            target.percentHeight = this.origPercentHeight;
            if(Boolean(target.parent) && target.parent.autoLayout == false)
            {
               target._height = _loc3_;
            }
         }
         super.onTweenEnd(param1);
         if(mx_internal::hideOnEffectEnd)
         {
            EffectManager.suspendEventHandling();
            target.scaleX = this.origScaleX;
            target.scaleY = this.origScaleY;
            target.move(this.origX,this.origY);
            EffectManager.resumeEventHandling();
         }
      }
      
      override public function finishEffect() : void
      {
         if(this.captureRollEvents)
         {
            target.removeEventListener(MouseEvent.ROLL_OVER,this.mouseEventHandler,false);
            target.removeEventListener(MouseEvent.ROLL_OUT,this.mouseEventHandler,false);
            target.removeEventListener(MouseEvent.MOUSE_MOVE,this.mouseEventHandler,false);
         }
         super.finishEffect();
      }
      
      private function applyPropertyChanges() : void
      {
         var _loc2_:Boolean = false;
         var _loc3_:Boolean = false;
         var _loc1_:PropertyChanges = propertyChanges;
         if(_loc1_)
         {
            _loc2_ = false;
            _loc3_ = false;
            if(_loc1_.end["scaleX"] !== undefined)
            {
               this.zoomWidthFrom = isNaN(this.zoomWidthFrom) ? Number(target.scaleX) : this.zoomWidthFrom;
               this.zoomWidthTo = isNaN(this.zoomWidthTo) ? Number(_loc1_.end["scaleX"]) : this.zoomWidthTo;
               _loc3_ = true;
            }
            if(_loc1_.end["scaleY"] !== undefined)
            {
               this.zoomHeightFrom = isNaN(this.zoomHeightFrom) ? Number(target.scaleY) : this.zoomHeightFrom;
               this.zoomHeightTo = isNaN(this.zoomHeightTo) ? Number(_loc1_.end["scaleY"]) : this.zoomHeightTo;
               _loc3_ = true;
            }
            if(_loc3_)
            {
               return;
            }
            if(_loc1_.end["width"] !== undefined)
            {
               this.zoomWidthFrom = isNaN(this.zoomWidthFrom) ? this.getScaleFromWidth(target.width) : this.zoomWidthFrom;
               this.zoomWidthTo = isNaN(this.zoomWidthTo) ? this.getScaleFromWidth(_loc1_.end["width"]) : this.zoomWidthTo;
               _loc2_ = true;
            }
            if(_loc1_.end["height"] !== undefined)
            {
               this.zoomHeightFrom = isNaN(this.zoomHeightFrom) ? this.getScaleFromHeight(target.height) : this.zoomHeightFrom;
               this.zoomHeightTo = isNaN(this.zoomHeightTo) ? this.getScaleFromHeight(_loc1_.end["height"]) : this.zoomHeightTo;
               _loc2_ = true;
            }
            if(_loc2_)
            {
               return;
            }
            if(_loc1_.end["visible"] !== undefined)
            {
               this.show = _loc1_.end["visible"];
            }
         }
      }
      
      private function getScaleFromWidth(param1:Number) : Number
      {
         return param1 / (target.width / Math.abs(target.scaleX));
      }
      
      private function getScaleFromHeight(param1:Number) : Number
      {
         return param1 / (target.height / Math.abs(target.scaleY));
      }
      
      private function mouseEventHandler(param1:MouseEvent) : void
      {
         if(param1.type == MouseEvent.MOUSE_MOVE)
         {
            this._mouseHasMoved = true;
         }
         else if(param1.type == MouseEvent.ROLL_OUT || param1.type == MouseEvent.ROLL_OVER)
         {
            if(!this._mouseHasMoved)
            {
               param1.stopImmediatePropagation();
            }
            this._mouseHasMoved = false;
         }
      }
   }
}

package mx.events
{
   import flash.display.DisplayObject;
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class ChildExistenceChangedEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const CHILD_ADD:String = "childAdd";
      
      public static const CHILD_REMOVE:String = "childRemove";
      
      public static const OVERLAY_CREATED:String = "overlayCreated";
      
      public var relatedObject:DisplayObject;
      
      public function ChildExistenceChangedEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:DisplayObject = null)
      {
         super(param1,param2,param3);
         this.relatedObject = param4;
      }
      
      override public function clone() : Event
      {
         return new ChildExistenceChangedEvent(type,bubbles,cancelable,this.relatedObject);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class CollectionEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const COLLECTION_CHANGE:String = "collectionChange";
      
      public var kind:String;
      
      public var items:Array;
      
      public var location:int;
      
      public var oldLocation:int;
      
      public function CollectionEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:String = null, param5:int = -1, param6:int = -1, param7:Array = null)
      {
         super(param1,param2,param3);
         this.kind = param4;
         this.location = param5;
         this.oldLocation = param6;
         this.items = param7 ? param7 : [];
      }
      
      override public function toString() : String
      {
         return formatToString("CollectionEvent","kind","location","oldLocation","type","bubbles","cancelable","eventPhase");
      }
      
      override public function clone() : Event
      {
         return new CollectionEvent(type,bubbles,cancelable,this.kind,this.location,this.oldLocation,this.items);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import flash.events.MouseEvent;
   import mx.core.DragSource;
   import mx.core.IUIComponent;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class DragEvent extends MouseEvent
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const DRAG_COMPLETE:String = "dragComplete";
      
      public static const DRAG_DROP:String = "dragDrop";
      
      public static const DRAG_ENTER:String = "dragEnter";
      
      public static const DRAG_EXIT:String = "dragExit";
      
      public static const DRAG_OVER:String = "dragOver";
      
      public static const DRAG_START:String = "dragStart";
      
      public var action:String;
      
      public var draggedItem:Object;
      
      public var dragInitiator:IUIComponent;
      
      public var dragSource:DragSource;
      
      public function DragEvent(param1:String, param2:Boolean = false, param3:Boolean = true, param4:IUIComponent = null, param5:DragSource = null, param6:String = null, param7:Boolean = false, param8:Boolean = false, param9:Boolean = false)
      {
         super(param1,param2,param3);
         this.dragInitiator = param4;
         this.dragSource = param5;
         this.action = param6;
         this.ctrlKey = param7;
         this.altKey = param8;
         this.shiftKey = param9;
      }
      
      override public function clone() : Event
      {
         var _loc1_:DragEvent = new DragEvent(type,bubbles,cancelable,this.dragInitiator,this.dragSource,this.action,ctrlKey,altKey,shiftKey);
         _loc1_.relatedObject = this.relatedObject;
         _loc1_.localX = this.localX;
         _loc1_.localY = this.localY;
         return _loc1_;
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public dynamic class DynamicEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function DynamicEvent(param1:String, param2:Boolean = false, param3:Boolean = false)
      {
         super(param1,param2,param3);
      }
      
      override public function clone() : Event
      {
         var _loc2_:String = null;
         var _loc1_:DynamicEvent = new DynamicEvent(type,bubbles,cancelable);
         for(_loc2_ in this)
         {
            _loc1_[_loc2_] = this[_loc2_];
         }
         return _loc1_;
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   import mx.effects.IEffectInstance;
   
   use namespace mx_internal;
   
   public class EffectEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const EFFECT_END:String = "effectEnd";
      
      public static const EFFECT_STOP:String = "effectStop";
      
      public static const EFFECT_START:String = "effectStart";
      
      public static const EFFECT_REPEAT:String = "effectRepeat";
      
      public static const EFFECT_UPDATE:String = "effectUpdate";
      
      public var effectInstance:IEffectInstance;
      
      public function EffectEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:IEffectInstance = null)
      {
         super(param1,param2,param3);
         this.effectInstance = param4;
      }
      
      override public function clone() : Event
      {
         return new EffectEvent(type,bubbles,cancelable,this.effectInstance);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class FlexChangeEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const ADD_CHILD_BRIDGE:String = "addChildBridge";
      
      public static const REMOVE_CHILD_BRIDGE:String = "removeChildBridge";
      
      public static const STYLE_MANAGER_CHANGE:String = "styleManagerChange";
      
      public var data:Object;
      
      public function FlexChangeEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:Object = null)
      {
         super(param1,param2,param3);
         this.data = param4;
      }
      
      override public function clone() : Event
      {
         return new FlexChangeEvent(type,bubbles,cancelable,this.data);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class FlexEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const ADD:String = "add";
      
      public static const ADD_FOCUS_MANAGER:String = "addFocusManager";
      
      public static const APPLICATION_COMPLETE:String = "applicationComplete";
      
      public static const BUTTON_DOWN:String = "buttonDown";
      
      public static const CHANGE_END:String = "changeEnd";
      
      public static const CHANGE_START:String = "changeStart";
      
      public static const CHANGING:String = "changing";
      
      public static const CREATION_COMPLETE:String = "creationComplete";
      
      public static const CONTENT_CREATION_COMPLETE:String = "contentCreationComplete";
      
      public static const CURSOR_UPDATE:String = "cursorUpdate";
      
      public static const DATA_CHANGE:String = "dataChange";
      
      public static const ENTER:String = "enter";
      
      public static const ENTER_FRAME:String = "flexEventEnterFrame";
      
      public static const ENTER_STATE:String = "enterState";
      
      public static const EXIT_STATE:String = "exitState";
      
      public static const FLEX_WINDOW_ACTIVATE:String = "flexWindowActivate";
      
      public static const FLEX_WINDOW_DEACTIVATE:String = "flexWindowDeactivate";
      
      public static const HIDE:String = "hide";
      
      public static const IDLE:String = "idle";
      
      public static const INIT_COMPLETE:String = "initComplete";
      
      public static const INIT_PROGRESS:String = "initProgress";
      
      public static const INITIALIZE:String = "initialize";
      
      public static const INVALID:String = "invalid";
      
      public static const LOADING:String = "loading";
      
      public static const MUTED_CHANGE:String = "mutedChange";
      
      public static const NEW_CHILD_APPLICATION:String = "newChildApplication";
      
      public static const PREINITIALIZE:String = "preinitialize";
      
      public static const PRELOADER_DONE:String = "preloaderDone";
      
      public static const PRELOADER_DOC_FRAME_READY:String = "preloaderDocFrameReady";
      
      public static const RENDER:String = "flexEventRender";
      
      public static const REMOVE:String = "remove";
      
      public static const REPEAT:String = "repeat";
      
      public static const REPEAT_END:String = "repeatEnd";
      
      public static const REPEAT_START:String = "repeatStart";
      
      public static const SELECTION_CHANGE:String = "selectionChange";
      
      public static const SHOW:String = "show";
      
      public static const TRANSFORM_CHANGE:String = "transformChange";
      
      public static const UPDATE_COMPLETE:String = "updateComplete";
      
      public static const URL_CHANGED:String = "urlChanged";
      
      public static const VALID:String = "valid";
      
      public static const VALUE_COMMIT:String = "valueCommit";
      
      public function FlexEvent(param1:String, param2:Boolean = false, param3:Boolean = false)
      {
         super(param1,param2,param3);
      }
      
      override public function clone() : Event
      {
         return new FlexEvent(type,bubbles,cancelable);
      }
   }
}

package mx.events
{
   import flash.display.InteractiveObject;
   import flash.events.Event;
   import flash.events.MouseEvent;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class FlexMouseEvent extends MouseEvent
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const MOUSE_DOWN_OUTSIDE:String = "mouseDownOutside";
      
      public static const MOUSE_WHEEL_OUTSIDE:String = "mouseWheelOutside";
      
      public function FlexMouseEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:Number = 0, param5:Number = 0, param6:InteractiveObject = null, param7:Boolean = false, param8:Boolean = false, param9:Boolean = false, param10:Boolean = false, param11:int = 0)
      {
         super(param1,param2,param3,param4,param5,param6,param7,param8,param9,param10,param11);
      }
      
      override public function clone() : Event
      {
         return new FlexMouseEvent(type,bubbles,cancelable,localX,localY,relatedObject,ctrlKey,altKey,shiftKey,buttonDown,delta);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class InterManagerRequest extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const CURSOR_MANAGER_REQUEST:String = "cursorManagerRequest";
      
      public static const DRAG_MANAGER_REQUEST:String = "dragManagerRequest";
      
      public static const INIT_MANAGER_REQUEST:String = "initManagerRequest";
      
      public static const SYSTEM_MANAGER_REQUEST:String = "systemManagerRequest";
      
      public static const TOOLTIP_MANAGER_REQUEST:String = "tooltipManagerRequest";
      
      public var name:String;
      
      public var value:Object;
      
      public function InterManagerRequest(param1:String, param2:Boolean = false, param3:Boolean = false, param4:String = null, param5:Object = null)
      {
         super(param1,param2,param3);
         this.name = param4;
         this.value = param5;
      }
      
      override public function clone() : Event
      {
         return new InterManagerRequest(type,bubbles,cancelable,this.name,this.value);
      }
   }
}

package mx.events
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public final class InvalidateRequestData
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const PROPERTIES:uint = 2;
      
      public static const SIZE:uint = 4;
      
      public static const DISPLAY_LIST:uint = 1;
      
      public function InvalidateRequestData()
      {
         super();
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import flash.events.ProgressEvent;
   import mx.core.mx_internal;
   import mx.modules.IModuleInfo;
   
   use namespace mx_internal;
   
   public class ModuleEvent extends ProgressEvent
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const ERROR:String = "error";
      
      public static const PROGRESS:String = "progress";
      
      public static const READY:String = "ready";
      
      public static const SETUP:String = "setup";
      
      public static const UNLOAD:String = "unload";
      
      public var errorText:String;
      
      private var _module:IModuleInfo;
      
      public function ModuleEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:uint = 0, param5:uint = 0, param6:String = null, param7:IModuleInfo = null)
      {
         super(param1,param2,param3,param4,param5);
         this.errorText = param6;
         this._module = param7;
      }
      
      public function get module() : IModuleInfo
      {
         if(this._module)
         {
            return this._module;
         }
         return target as IModuleInfo;
      }
      
      override public function clone() : Event
      {
         return new ModuleEvent(type,bubbles,cancelable,bytesLoaded,bytesTotal,this.errorText,this.module);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class MoveEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const MOVE:String = "move";
      
      public var oldX:Number;
      
      public var oldY:Number;
      
      public function MoveEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:Number = NaN, param5:Number = NaN)
      {
         super(param1,param2,param3);
         this.oldX = param4;
         this.oldY = param5;
      }
      
      override public function clone() : Event
      {
         return new MoveEvent(type,bubbles,cancelable,this.oldX,this.oldY);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class PropertyChangeEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const PROPERTY_CHANGE:String = "propertyChange";
      
      public var kind:String;
      
      public var newValue:Object;
      
      public var oldValue:Object;
      
      public var property:Object;
      
      public var source:Object;
      
      public function PropertyChangeEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:String = null, param5:Object = null, param6:Object = null, param7:Object = null, param8:Object = null)
      {
         super(param1,param2,param3);
         this.kind = param4;
         this.property = param5;
         this.oldValue = param6;
         this.newValue = param7;
         this.source = param8;
      }
      
      public static function createUpdateEvent(param1:Object, param2:Object, param3:Object, param4:Object) : PropertyChangeEvent
      {
         var _loc5_:PropertyChangeEvent = new PropertyChangeEvent(PROPERTY_CHANGE);
         _loc5_.kind = PropertyChangeEventKind.UPDATE;
         _loc5_.oldValue = param3;
         _loc5_.newValue = param4;
         _loc5_.source = param1;
         _loc5_.property = param2;
         return _loc5_;
      }
      
      override public function clone() : Event
      {
         return new PropertyChangeEvent(type,bubbles,cancelable,this.kind,this.property,this.oldValue,this.newValue,this.source);
      }
   }
}

package mx.events
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public final class PropertyChangeEventKind
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const UPDATE:String = "update";
      
      public static const DELETE:String = "delete";
      
      public function PropertyChangeEventKind()
      {
         super();
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class Request extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const GET_PARENT_FLEX_MODULE_FACTORY_REQUEST:String = "getParentFlexModuleFactoryRequest";
      
      public var value:Object;
      
      public function Request(param1:String, param2:Boolean = false, param3:Boolean = false, param4:Object = null)
      {
         super(param1,param2,param3);
         this.value = param4;
      }
      
      override public function clone() : Event
      {
         return new Request(type,bubbles,cancelable,this.value);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class ResizeEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const RESIZE:String = "resize";
      
      public var oldHeight:Number;
      
      public var oldWidth:Number;
      
      public function ResizeEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:Number = NaN, param5:Number = NaN)
      {
         super(param1,param2,param3);
         this.oldWidth = param4;
         this.oldHeight = param5;
      }
      
      override public function clone() : Event
      {
         return new ResizeEvent(type,bubbles,cancelable,this.oldWidth,this.oldHeight);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import flash.events.ProgressEvent;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class ResourceEvent extends ProgressEvent
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const COMPLETE:String = "complete";
      
      public static const ERROR:String = "error";
      
      public static const PROGRESS:String = "progress";
      
      public var errorText:String;
      
      public function ResourceEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:uint = 0, param5:uint = 0, param6:String = null)
      {
         super(param1,param2,param3,param4,param5);
         this.errorText = param6;
      }
      
      override public function clone() : Event
      {
         return new ResourceEvent(type,bubbles,cancelable,bytesLoaded,bytesTotal,this.errorText);
      }
   }
}

package mx.events
{
   import flash.display.LoaderInfo;
   import flash.events.Event;
   import flash.events.ProgressEvent;
   import flash.net.URLRequest;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class RSLEvent extends ProgressEvent
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const RSL_COMPLETE:String = "rslComplete";
      
      public static const RSL_ERROR:String = "rslError";
      
      public static const RSL_PROGRESS:String = "rslProgress";
      
      public var errorText:String;
      
      public var isResourceModule:Boolean;
      
      public var loaderInfo:LoaderInfo;
      
      public var rslIndex:int;
      
      public var rslTotal:int;
      
      public var url:URLRequest;
      
      public function RSLEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:int = -1, param5:int = -1, param6:int = -1, param7:int = -1, param8:URLRequest = null, param9:String = null, param10:Boolean = false)
      {
         super(param1,param2,param3,param4,param5);
         this.rslIndex = param6;
         this.rslTotal = param7;
         this.url = param8;
         this.errorText = param9;
         this.isResourceModule = param10;
      }
      
      override public function clone() : Event
      {
         return new RSLEvent(type,bubbles,cancelable,bytesLoaded,bytesTotal,this.rslIndex,this.rslTotal,this.url,this.errorText,this.isResourceModule);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class SandboxMouseEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const CLICK_SOMEWHERE:String = "clickSomewhere";
      
      public static const DOUBLE_CLICK_SOMEWHERE:String = "coubleClickSomewhere";
      
      public static const MOUSE_DOWN_SOMEWHERE:String = "mouseDownSomewhere";
      
      public static const MOUSE_MOVE_SOMEWHERE:String = "mouseMoveSomewhere";
      
      public static const MOUSE_UP_SOMEWHERE:String = "mouseUpSomewhere";
      
      public static const MOUSE_WHEEL_SOMEWHERE:String = "mouseWheelSomewhere";
      
      public var altKey:Boolean;
      
      public var buttonDown:Boolean;
      
      public var ctrlKey:Boolean;
      
      public var shiftKey:Boolean;
      
      public function SandboxMouseEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:Boolean = false, param5:Boolean = false, param6:Boolean = false, param7:Boolean = false)
      {
         super(param1,param2,param3);
         this.ctrlKey = param4;
         this.altKey = param5;
         this.shiftKey = param6;
         this.buttonDown = param7;
      }
      
      public static function marshal(param1:Event) : SandboxMouseEvent
      {
         var _loc2_:Object = param1;
         return new SandboxMouseEvent(_loc2_.type,_loc2_.bubbles,_loc2_.cancelable,_loc2_.ctrlKey,_loc2_.altKey,_loc2_.shiftKey,_loc2_.buttonDown);
      }
      
      override public function clone() : Event
      {
         return new SandboxMouseEvent(type,bubbles,cancelable,this.ctrlKey,this.altKey,this.shiftKey,this.buttonDown);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class StateChangeEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const CURRENT_STATE_CHANGE:String = "currentStateChange";
      
      public static const CURRENT_STATE_CHANGING:String = "currentStateChanging";
      
      public var newState:String;
      
      public var oldState:String;
      
      public function StateChangeEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:String = null, param5:String = null)
      {
         super(param1,param2,param3);
         this.oldState = param4;
         this.newState = param5;
      }
      
      override public function clone() : Event
      {
         return new StateChangeEvent(type,bubbles,cancelable,this.oldState,this.newState);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import flash.events.ProgressEvent;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class StyleEvent extends ProgressEvent
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const COMPLETE:String = "complete";
      
      public static const ERROR:String = "error";
      
      public static const PROGRESS:String = "progress";
      
      public var errorText:String;
      
      public function StyleEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:uint = 0, param5:uint = 0, param6:String = null)
      {
         super(param1,param2,param3,param4,param5);
         this.errorText = param6;
      }
      
      override public function clone() : Event
      {
         return new StyleEvent(type,bubbles,cancelable,bytesLoaded,bytesTotal,this.errorText);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class SWFBridgeEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const BRIDGE_APPLICATION_ACTIVATE:String = "bridgeApplicationActivate";
      
      public static const BRIDGE_APPLICATION_UNLOADING:String = "bridgeApplicationUnloading";
      
      public static const BRIDGE_FOCUS_MANAGER_ACTIVATE:String = "bridgeFocusManagerActivate";
      
      public static const BRIDGE_NEW_APPLICATION:String = "bridgeNewApplication";
      
      public static const BRIDGE_WINDOW_ACTIVATE:String = "bridgeWindowActivate";
      
      public static const BRIDGE_WINDOW_DEACTIVATE:String = "brdigeWindowDeactivate";
      
      public static const BRIDGE_AIR_WINDOW_ACTIVATE:String = "bridgeAIRWindowActivate";
      
      public static const BRIDGE_AIR_WINDOW_DEACTIVATE:String = "bridgeAIRWindowDeactivate";
      
      public var data:Object;
      
      public function SWFBridgeEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:Object = null)
      {
         super(param1,param2,param3);
         this.data = param4;
      }
      
      public static function marshal(param1:Event) : SWFBridgeEvent
      {
         var _loc2_:Object = param1;
         return new SWFBridgeEvent(_loc2_.type,_loc2_.bubbles,_loc2_.cancelable,_loc2_.data);
      }
      
      override public function clone() : Event
      {
         return new SWFBridgeEvent(type,bubbles,cancelable,this.data);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import flash.events.IEventDispatcher;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class SWFBridgeRequest extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const ACTIVATE_POP_UP_REQUEST:String = "activatePopUpRequest";
      
      public static const CAN_ACTIVATE_POP_UP_REQUEST:String = "canActivateRequestPopUpRequest";
      
      public static const DEACTIVATE_POP_UP_REQUEST:String = "deactivatePopUpRequest";
      
      public static const GET_VISIBLE_RECT_REQUEST:String = "getVisibleRectRequest";
      
      public static const IS_BRIDGE_CHILD_REQUEST:String = "isBridgeChildRequest";
      
      public static const INVALIDATE_REQUEST:String = "invalidateRequest";
      
      public static const HIDE_MOUSE_CURSOR_REQUEST:String = "hideMouseCursorRequest";
      
      public static const SHOW_MOUSE_CURSOR_REQUEST:String = "showMouseCursorRequest";
      
      public static const RESET_MOUSE_CURSOR_REQUEST:String = "resetMouseCursorRequest";
      
      public static const ACTIVATE_FOCUS_REQUEST:String = "activateFocusRequest";
      
      public static const DEACTIVATE_FOCUS_REQUEST:String = "deactivateFocusRequest";
      
      public static const MOVE_FOCUS_REQUEST:String = "moveFocusRequest";
      
      public static const CREATE_MODAL_WINDOW_REQUEST:String = "createModalWindowRequest";
      
      public static const SHOW_MODAL_WINDOW_REQUEST:String = "showModalWindowRequest";
      
      public static const HIDE_MODAL_WINDOW_REQUEST:String = "hideModalWindowRequest";
      
      public static const ADD_POP_UP_REQUEST:String = "addPopUpRequest";
      
      public static const REMOVE_POP_UP_REQUEST:String = "removePopUpRequest";
      
      public static const ADD_POP_UP_PLACE_HOLDER_REQUEST:String = "addPopUpPlaceHolderRequest";
      
      public static const REMOVE_POP_UP_PLACE_HOLDER_REQUEST:String = "removePopUpPlaceHolderRequest";
      
      public static const GET_SIZE_REQUEST:String = "getSizeRequest";
      
      public static const SET_ACTUAL_SIZE_REQUEST:String = "setActualSizeRequest";
      
      public static const SET_SHOW_FOCUS_INDICATOR_REQUEST:String = "setShowFocusIndicatorRequest";
      
      public var data:Object;
      
      public var requestor:IEventDispatcher;
      
      public function SWFBridgeRequest(param1:String, param2:Boolean = false, param3:Boolean = false, param4:IEventDispatcher = null, param5:Object = null)
      {
         super(param1,param2,param3);
         this.requestor = param4;
         this.data = param5;
      }
      
      public static function marshal(param1:Event) : SWFBridgeRequest
      {
         var _loc2_:Object = param1;
         return new SWFBridgeRequest(_loc2_.type,_loc2_.bubbles,_loc2_.cancelable,_loc2_.requestor,_loc2_.data);
      }
      
      override public function clone() : Event
      {
         return new SWFBridgeRequest(type,bubbles,cancelable,this.requestor,this.data);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.IToolTip;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class ToolTipEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const TOOL_TIP_CREATE:String = "toolTipCreate";
      
      public static const TOOL_TIP_END:String = "toolTipEnd";
      
      public static const TOOL_TIP_HIDE:String = "toolTipHide";
      
      public static const TOOL_TIP_SHOW:String = "toolTipShow";
      
      public static const TOOL_TIP_SHOWN:String = "toolTipShown";
      
      public static const TOOL_TIP_START:String = "toolTipStart";
      
      public var toolTip:IToolTip;
      
      public function ToolTipEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:IToolTip = null)
      {
         super(param1,param2,param3);
         this.toolTip = param4;
      }
      
      override public function clone() : Event
      {
         return new ToolTipEvent(type,bubbles,cancelable,this.toolTip);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class TweenEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const TWEEN_END:String = "tweenEnd";
      
      public static const TWEEN_START:String = "tweenStart";
      
      public static const TWEEN_UPDATE:String = "tweenUpdate";
      
      public var value:Object;
      
      public function TweenEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:Object = null)
      {
         super(param1,param2,param3);
         this.value = param4;
      }
      
      override public function clone() : Event
      {
         return new TweenEvent(type,bubbles,cancelable,this.value);
      }
   }
}

package mx.events
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class ValidationResultEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const INVALID:String = "invalid";
      
      public static const VALID:String = "valid";
      
      public var field:String;
      
      public var results:Array;
      
      public function ValidationResultEvent(param1:String, param2:Boolean = false, param3:Boolean = false, param4:String = null, param5:Array = null)
      {
         super(param1,param2,param3);
         this.field = param4;
         this.results = param5;
      }
      
      public function get message() : String
      {
         var _loc1_:String = "";
         var _loc2_:int = int(this.results.length);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            if(this.results[_loc3_].isError)
            {
               _loc1_ += _loc1_ == "" ? "" : "\n";
               _loc1_ += this.results[_loc3_].errorMessage;
            }
            _loc3_++;
         }
         return _loc1_;
      }
      
      override public function clone() : Event
      {
         return new ValidationResultEvent(type,bubbles,cancelable,this.field,this.results);
      }
   }
}

package mx.filters
{
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.events.IEventDispatcher;
   
   public class BaseFilter extends EventDispatcher
   {
      
      public static const CHANGE:String = "change";
      
      public function BaseFilter(param1:IEventDispatcher = null)
      {
         super(param1);
      }
      
      public function notifyFilterChanged() : void
      {
         dispatchEvent(new Event(CHANGE));
      }
   }
}

package mx.filters
{
   import flash.filters.BitmapFilter;
   
   public interface IBitmapFilter
   {
      
      function clone() : BitmapFilter;
   }
}

package mx.formatters
{
   import flash.events.Event;
   import mx.core.mx_internal;
   import mx.resources.IResourceManager;
   import mx.resources.ResourceManager;
   
   use namespace mx_internal;
   
   public class Formatter
   {
      
      private static var _static_resourceManager:IResourceManager;
      
      private static var _defaultInvalidFormatError:String;
      
      private static var defaultInvalidFormatErrorOverride:String;
      
      private static var _defaultInvalidValueError:String;
      
      private static var defaultInvalidValueErrorOverride:String;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static var initialized:Boolean = false;
      
      public var error:String;
      
      private var _resourceManager:IResourceManager = ResourceManager.getInstance();
      
      public function Formatter()
      {
         super();
         this.resourceManager.addEventListener(Event.CHANGE,this.resourceManager_changeHandler,false,0,true);
         this.resourcesChanged();
      }
      
      private static function get static_resourceManager() : IResourceManager
      {
         if(!_static_resourceManager)
         {
            _static_resourceManager = ResourceManager.getInstance();
         }
         return _static_resourceManager;
      }
      
      public static function get defaultInvalidFormatError() : String
      {
         initialize();
         return _defaultInvalidFormatError;
      }
      
      public static function set defaultInvalidFormatError(param1:String) : void
      {
         defaultInvalidFormatErrorOverride = param1;
         _defaultInvalidFormatError = param1 != null ? param1 : static_resourceManager.getString("formatters","defaultInvalidFormatError");
      }
      
      public static function get defaultInvalidValueError() : String
      {
         initialize();
         return _defaultInvalidValueError;
      }
      
      public static function set defaultInvalidValueError(param1:String) : void
      {
         defaultInvalidValueErrorOverride = param1;
         _defaultInvalidValueError = param1 != null ? param1 : static_resourceManager.getString("formatters","defaultInvalidValueError");
      }
      
      private static function initialize() : void
      {
         if(!initialized)
         {
            static_resourceManager.addEventListener(Event.CHANGE,static_resourceManager_changeHandler,false,0,true);
            static_resourcesChanged();
            initialized = true;
         }
      }
      
      private static function static_resourcesChanged() : void
      {
         defaultInvalidFormatError = defaultInvalidFormatErrorOverride;
         defaultInvalidValueError = defaultInvalidValueErrorOverride;
      }
      
      private static function static_resourceManager_changeHandler(param1:Event) : void
      {
         static_resourcesChanged();
      }
      
      [Bindable("unused")]
      protected function get resourceManager() : IResourceManager
      {
         return this._resourceManager;
      }
      
      protected function resourcesChanged() : void
      {
      }
      
      public function format(param1:Object) : String
      {
         this.error = "This format function is abstract. " + "Subclasses must override it.";
         return "";
      }
      
      private function resourceManager_changeHandler(param1:Event) : void
      {
         this.resourcesChanged();
      }
   }
}

package mx.formatters
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class NumberBase
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var decimalSeparatorFrom:String;
      
      public var decimalSeparatorTo:String;
      
      public var isValid:Boolean = false;
      
      public var thousandsSeparatorFrom:String;
      
      public var thousandsSeparatorTo:String;
      
      public function NumberBase(param1:String = ".", param2:String = ",", param3:String = ".", param4:String = ",")
      {
         super();
         this.decimalSeparatorFrom = param1;
         this.thousandsSeparatorFrom = param2;
         this.decimalSeparatorTo = param3;
         this.thousandsSeparatorTo = param4;
         this.isValid = true;
      }
      
      public function formatRounding(param1:String, param2:String) : String
      {
         var _loc3_:Number = Number(param1);
         if(param2 != NumberBaseRoundType.NONE)
         {
            if(param2 == NumberBaseRoundType.UP)
            {
               _loc3_ = Math.ceil(_loc3_);
            }
            else if(param2 == NumberBaseRoundType.DOWN)
            {
               _loc3_ = Math.floor(_loc3_);
            }
            else
            {
               if(param2 != NumberBaseRoundType.NEAREST)
               {
                  this.isValid = false;
                  return "";
               }
               _loc3_ = Math.round(_loc3_);
            }
         }
         return _loc3_.toString();
      }
      
      public function formatRoundingWithPrecision(param1:String, param2:String, param3:int) : String
      {
         var _loc4_:Number = Number(param1);
         if(param2 == NumberBaseRoundType.NONE)
         {
            if(param3 == -1)
            {
               return _loc4_.toString();
            }
         }
         else
         {
            if(param3 < 0)
            {
               param3 = 0;
            }
            _loc4_ *= Math.pow(10,param3);
            _loc4_ = Number(_loc4_.toString());
            if(param2 == NumberBaseRoundType.UP)
            {
               _loc4_ = Math.ceil(_loc4_);
            }
            else if(param2 == NumberBaseRoundType.DOWN)
            {
               _loc4_ = Math.floor(_loc4_);
            }
            else
            {
               if(param2 != NumberBaseRoundType.NEAREST)
               {
                  this.isValid = false;
                  return "";
               }
               _loc4_ = Math.round(_loc4_);
            }
            _loc4_ /= Math.pow(10,param3);
         }
         return _loc4_.toString();
      }
      
      public function formatDecimal(param1:String) : String
      {
         var _loc2_:Array = param1.split(".");
         return _loc2_.join(this.decimalSeparatorTo);
      }
      
      public function formatThousands(param1:String) : String
      {
         var _loc8_:int = 0;
         var _loc9_:int = 0;
         var _loc10_:int = 0;
         var _loc11_:Array = null;
         var _loc12_:int = 0;
         var _loc2_:Number = Number(param1);
         var _loc3_:* = _loc2_ < 0;
         var _loc4_:String = Math.abs(_loc2_).toString();
         _loc4_.toLowerCase();
         var _loc5_:int = int(_loc4_.indexOf("e"));
         if(_loc5_ != -1)
         {
            _loc4_ = this.expandExponents(_loc4_);
         }
         var _loc6_:Array = _loc4_.split(_loc4_.indexOf(this.decimalSeparatorTo) != -1 ? this.decimalSeparatorTo : ".");
         var _loc7_:int = String(_loc6_[0]).length;
         if(_loc7_ > 3)
         {
            _loc8_ = int(Math.floor(_loc7_ / 3));
            if(_loc7_ % 3 == 0)
            {
               _loc8_--;
            }
            _loc9_ = _loc7_;
            _loc10_ = _loc9_ - 3;
            _loc11_ = [];
            _loc12_ = 0;
            while(_loc12_ <= _loc8_)
            {
               _loc11_[_loc12_] = _loc6_[0].slice(_loc10_,_loc9_);
               _loc10_ = int(Math.max(_loc10_ - 3,0));
               _loc9_ = int(Math.max(_loc9_ - 3,1));
               _loc12_++;
            }
            _loc11_.reverse();
            _loc6_[0] = _loc11_.join(this.thousandsSeparatorTo);
         }
         _loc4_ = _loc6_.join(this.decimalSeparatorTo);
         if(_loc3_)
         {
            _loc4_ = "-" + _loc4_;
         }
         return _loc4_.toString();
      }
      
      public function formatPrecision(param1:String, param2:int) : String
      {
         var _loc4_:String = null;
         var _loc5_:* = null;
         if(param2 == -1)
         {
            return param1;
         }
         var _loc3_:Array = param1.split(this.decimalSeparatorTo);
         _loc3_[0] = _loc3_[0].length == 0 ? "0" : _loc3_[0];
         if(param2 > 0)
         {
            _loc4_ = _loc3_[1] ? String(_loc3_[1]) : "";
            _loc5_ = _loc4_ + "000000000000000000000000000000000";
            param1 = _loc3_[0] + this.decimalSeparatorTo + _loc5_.substr(0,param2);
         }
         else
         {
            param1 = String(_loc3_[0]);
         }
         return param1.toString();
      }
      
      public function formatNegative(param1:String, param2:Boolean) : String
      {
         if(param2)
         {
            if(param1.charAt(0) != "-")
            {
               param1 = "-" + param1;
            }
         }
         else
         {
            if(param2)
            {
               this.isValid = false;
               return "";
            }
            if(param1.charAt(0) == "-")
            {
               param1 = param1.substr(1,param1.length - 1);
            }
            param1 = "(" + param1 + ")";
         }
         return param1;
      }
      
      public function parseNumberString(param1:String) : String
      {
         var _loc5_:String = null;
         var _loc6_:* = null;
         var _loc8_:String = null;
         var _loc9_:int = 0;
         var _loc10_:Number = NaN;
         var _loc2_:Array = param1.split(this.decimalSeparatorFrom);
         if(_loc2_.length > 2)
         {
            return null;
         }
         var _loc3_:int = param1.length;
         var _loc4_:int = 0;
         var _loc7_:Boolean = false;
         while(_loc4_ < _loc3_)
         {
            _loc5_ = param1.charAt(_loc4_);
            _loc4_++;
            if("0" <= _loc5_ && _loc5_ <= "9" || _loc5_ == this.decimalSeparatorFrom)
            {
               _loc8_ = param1.charAt(_loc4_ - 2);
               if(_loc8_ == "-" || param1.charAt(0) == "-")
               {
                  _loc7_ = true;
               }
               _loc6_ = "";
               _loc9_ = --_loc4_;
               while(_loc9_ < _loc3_)
               {
                  _loc5_ = param1.charAt(_loc4_);
                  _loc4_++;
                  if("0" <= _loc5_ && _loc5_ <= "9")
                  {
                     _loc6_ += _loc5_;
                  }
                  else if(_loc5_ == this.decimalSeparatorFrom)
                  {
                     _loc6_ += ".";
                  }
                  else if(_loc5_ != this.thousandsSeparatorFrom || _loc4_ >= _loc3_)
                  {
                     break;
                  }
                  _loc9_++;
               }
            }
         }
         if(_loc6_ != null && param1 != "")
         {
            _loc10_ = Number(_loc6_);
            if(_loc10_ == 0)
            {
               return "0";
            }
         }
         if(_loc6_)
         {
            if(_loc6_.charAt(_loc6_.length - 1) == ".")
            {
               if(_loc6_.length >= 2)
               {
                  _loc6_ = _loc6_.substring(0,_loc6_.length - 1);
               }
               else if(_loc6_.length == 1)
               {
                  _loc6_ = "";
                  _loc7_ = false;
               }
            }
         }
         return _loc7_ ? "-" + _loc6_ : _loc6_;
      }
      
      public function expandExponents(param1:String) : String
      {
         var _loc10_:Number = NaN;
         var _loc11_:Number = NaN;
         var _loc2_:RegExp = /^([+-])?(\d+).?(\d*)[eE]([-+]?\d+)$/;
         var _loc3_:Array = _loc2_.exec(param1);
         var _loc4_:String = _loc3_[1];
         var _loc5_:String = _loc3_[2];
         var _loc6_:String = _loc3_[3];
         var _loc7_:int = int(_loc3_[4]);
         if(!_loc7_)
         {
            return (_loc4_ ? _loc4_ : "") + (_loc5_ ? _loc5_ : "0") + (_loc6_ ? "." + _loc6_ : "");
         }
         var _loc8_:String = _loc5_ + _loc6_;
         var _loc9_:* = _loc7_ < 0;
         if(_loc9_)
         {
            _loc10_ = -1 * (_loc5_.length + _loc7_) + 1;
            return (_loc4_ ? _loc4_ : "") + "0." + new Array(_loc10_).join("0") + _loc8_;
         }
         _loc11_ = _loc7_ + _loc5_.length;
         if(_loc11_ >= _loc8_.length)
         {
            return (_loc4_ ? _loc4_ : "") + _loc8_ + new Array(_loc11_ - _loc8_.length + 1).join("0");
         }
         return (_loc4_ ? _loc4_ : "") + _loc8_.substr(0,_loc11_) + "." + _loc8_.substr(_loc11_);
      }
   }
}

package mx.formatters
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public final class NumberBaseRoundType
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const DOWN:String = "down";
      
      public static const NEAREST:String = "nearest";
      
      public static const NONE:String = "none";
      
      public static const UP:String = "up";
      
      public function NumberBaseRoundType()
      {
         super();
      }
   }
}

package mx.formatters
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class NumberFormatter extends Formatter
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var _decimalSeparatorFrom:String;
      
      private var decimalSeparatorFromOverride:String;
      
      private var _decimalSeparatorTo:String;
      
      private var decimalSeparatorToOverride:String;
      
      private var _precision:Object;
      
      private var precisionOverride:Object;
      
      private var _rounding:String;
      
      private var roundingOverride:String;
      
      private var _thousandsSeparatorFrom:String;
      
      private var thousandsSeparatorFromOverride:String;
      
      private var _thousandsSeparatorTo:String;
      
      private var thousandsSeparatorToOverride:String;
      
      private var _useNegativeSign:Object;
      
      private var useNegativeSignOverride:Object;
      
      private var _useThousandsSeparator:Object;
      
      private var useThousandsSeparatorOverride:Object;
      
      public function NumberFormatter()
      {
         super();
      }
      
      public function get decimalSeparatorFrom() : String
      {
         return this._decimalSeparatorFrom;
      }
      
      public function set decimalSeparatorFrom(param1:String) : void
      {
         this.decimalSeparatorFromOverride = param1;
         this._decimalSeparatorFrom = param1 != null ? param1 : resourceManager.getString("SharedResources","decimalSeparatorFrom");
      }
      
      public function get decimalSeparatorTo() : String
      {
         return this._decimalSeparatorTo;
      }
      
      public function set decimalSeparatorTo(param1:String) : void
      {
         this.decimalSeparatorToOverride = param1;
         this._decimalSeparatorTo = param1 != null ? param1 : resourceManager.getString("SharedResources","decimalSeparatorTo");
      }
      
      public function get precision() : Object
      {
         return this._precision;
      }
      
      public function set precision(param1:Object) : void
      {
         this.precisionOverride = param1;
         this._precision = param1 != null ? int(param1) : resourceManager.getInt("formatters","numberFormatterPrecision");
      }
      
      public function get rounding() : String
      {
         return this._rounding;
      }
      
      public function set rounding(param1:String) : void
      {
         this.roundingOverride = param1;
         this._rounding = param1 != null ? param1 : resourceManager.getString("formatters","rounding");
      }
      
      public function get thousandsSeparatorFrom() : String
      {
         return this._thousandsSeparatorFrom;
      }
      
      public function set thousandsSeparatorFrom(param1:String) : void
      {
         this.thousandsSeparatorFromOverride = param1;
         this._thousandsSeparatorFrom = param1 != null ? param1 : resourceManager.getString("SharedResources","thousandsSeparatorFrom");
      }
      
      public function get thousandsSeparatorTo() : String
      {
         return this._thousandsSeparatorTo;
      }
      
      public function set thousandsSeparatorTo(param1:String) : void
      {
         this.thousandsSeparatorToOverride = param1;
         this._thousandsSeparatorTo = param1 != null ? param1 : resourceManager.getString("SharedResources","thousandsSeparatorTo");
      }
      
      public function get useNegativeSign() : Object
      {
         return this._useNegativeSign;
      }
      
      public function set useNegativeSign(param1:Object) : void
      {
         this.useNegativeSignOverride = param1;
         this._useNegativeSign = param1 != null ? Boolean(param1) : resourceManager.getBoolean("formatters","useNegativeSignInNumber");
      }
      
      public function get useThousandsSeparator() : Object
      {
         return this._useThousandsSeparator;
      }
      
      public function set useThousandsSeparator(param1:Object) : void
      {
         this.useThousandsSeparatorOverride = param1;
         this._useThousandsSeparator = param1 != null ? Boolean(param1) : resourceManager.getBoolean("formatters","useThousandsSeparator");
      }
      
      override protected function resourcesChanged() : void
      {
         super.resourcesChanged();
         this.decimalSeparatorFrom = this.decimalSeparatorFromOverride;
         this.decimalSeparatorTo = this.decimalSeparatorToOverride;
         this.precision = this.precisionOverride;
         this.rounding = this.roundingOverride;
         this.thousandsSeparatorFrom = this.thousandsSeparatorFromOverride;
         this.thousandsSeparatorTo = this.thousandsSeparatorToOverride;
         this.useNegativeSign = this.useNegativeSignOverride;
         this.useThousandsSeparator = this.useThousandsSeparatorOverride;
      }
      
      override public function format(param1:Object) : String
      {
         var _loc9_:String = null;
         var _loc10_:Number = NaN;
         if(error)
         {
            error = null;
         }
         if(Boolean(this.useThousandsSeparator) && (this.decimalSeparatorFrom == this.thousandsSeparatorFrom || this.decimalSeparatorTo == this.thousandsSeparatorTo))
         {
            error = defaultInvalidFormatError;
            return "";
         }
         if(this.decimalSeparatorTo == "" || !isNaN(Number(this.decimalSeparatorTo)))
         {
            error = defaultInvalidFormatError;
            return "";
         }
         var _loc2_:NumberBase = new NumberBase(this.decimalSeparatorFrom,this.thousandsSeparatorFrom,this.decimalSeparatorTo,this.thousandsSeparatorTo);
         if(param1 is String)
         {
            param1 = _loc2_.parseNumberString(String(param1));
         }
         if(param1 === null || isNaN(Number(param1)))
         {
            error = defaultInvalidValueError;
            return "";
         }
         var _loc3_:* = Number(param1) < 0;
         var _loc4_:String = param1.toString();
         _loc4_.toLowerCase();
         var _loc5_:int = int(_loc4_.indexOf("e"));
         if(_loc5_ != -1)
         {
            _loc4_ = _loc2_.expandExponents(_loc4_);
         }
         var _loc6_:Array = _loc4_.split(".");
         var _loc7_:int = _loc6_[1] ? String(_loc6_[1]).length : 0;
         if(this.precision <= _loc7_)
         {
            if(this.rounding != NumberBaseRoundType.NONE)
            {
               _loc4_ = _loc2_.formatRoundingWithPrecision(_loc4_,this.rounding,int(this.precision));
            }
         }
         var _loc8_:Number = Number(_loc4_);
         if(Math.abs(_loc8_) >= 1)
         {
            _loc6_ = _loc4_.split(".");
            _loc9_ = this.useThousandsSeparator ? _loc2_.formatThousands(String(_loc6_[0])) : String(_loc6_[0]);
            if(_loc6_[1] != null && _loc6_[1] != "")
            {
               _loc4_ = _loc9_ + this.decimalSeparatorTo + _loc6_[1];
            }
            else
            {
               _loc4_ = _loc9_;
            }
         }
         else if(Math.abs(_loc8_) > 0)
         {
            if(_loc4_.indexOf("e") != -1)
            {
               _loc10_ = Math.abs(_loc8_) + 1;
               _loc4_ = _loc10_.toString();
            }
            _loc4_ = this.decimalSeparatorTo + _loc4_.substring(_loc4_.indexOf(".") + 1);
         }
         _loc4_ = _loc2_.formatPrecision(_loc4_,int(this.precision));
         if(Number(_loc4_) == 0)
         {
            _loc3_ = false;
         }
         if(_loc3_)
         {
            _loc4_ = _loc2_.formatNegative(_loc4_,this.useNegativeSign);
         }
         if(!_loc2_.isValid)
         {
            error = defaultInvalidFormatError;
            return "";
         }
         return _loc4_;
      }
   }
}

package mx.geom
{
   import flash.geom.Matrix;
   import flash.geom.Matrix3D;
   import flash.geom.Vector3D;
   import mx.core.AdvancedLayoutFeatures;
   import mx.utils.MatrixUtil;
   
   public class CompoundTransform
   {
      
      private static const MATRIX_VALID:uint = 32;
      
      private static const MATRIX3D_VALID:uint = 64;
      
      private static const PROPERTIES_VALID:uint = 128;
      
      private static const IS_3D:uint = 512;
      
      private static const M3D_FLAGS_VALID:uint = 1024;
      
      public static const SOURCE_PROPERTIES:uint = 1;
      
      public static const SOURCE_MATRIX:uint = 2;
      
      public static const SOURCE_MATRIX3D:uint = 3;
      
      private static const INVALIDATE_FROM_NONE:uint = 0;
      
      private static const INVALIDATE_FROM_PROPERTY:uint = 4;
      
      private static const INVALIDATE_FROM_MATRIX:uint = 5;
      
      private static const INVALIDATE_FROM_MATRIX3D:uint = 6;
      
      private static var decomposition:Vector.<Number> = new Vector.<Number>();
      
      private static const RADIANS_PER_DEGREES:Number = Math.PI / 180;
      
      private static const EPSILON:Number = 0.001;
      
      decomposition.push(0);
      decomposition.push(0);
      decomposition.push(0);
      decomposition.push(0);
      decomposition.push(0);
      
      private var _rotationX:Number = 0;
      
      private var _rotationY:Number = 0;
      
      private var _rotationZ:Number = 0;
      
      private var _scaleX:Number = 1;
      
      private var _scaleY:Number = 1;
      
      private var _scaleZ:Number = 1;
      
      private var _x:Number = 0;
      
      private var _y:Number = 0;
      
      private var _z:Number = 0;
      
      private var _transformX:Number = 0;
      
      private var _transformY:Number = 0;
      
      private var _transformZ:Number = 0;
      
      private var _matrix:Matrix;
      
      private var _matrix3D:Matrix3D;
      
      public var sourceOfTruth:uint = 1;
      
      private var _flags:uint = 128;
      
      public function CompoundTransform()
      {
         super();
      }
      
      public function set x(param1:Number) : void
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._x)
         {
            return;
         }
         this.translateBy(param1 - this._x,0,0);
         this.invalidate(INVALIDATE_FROM_NONE,false);
      }
      
      public function get x() : Number
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         return this._x;
      }
      
      public function set y(param1:Number) : void
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._y)
         {
            return;
         }
         this.translateBy(0,param1 - this._y,0);
         this.invalidate(INVALIDATE_FROM_NONE,false);
      }
      
      public function get y() : Number
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         return this._y;
      }
      
      public function set z(param1:Number) : void
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._z)
         {
            return;
         }
         this.translateBy(0,0,param1 - this._z);
         this.invalidate(INVALIDATE_FROM_NONE,true);
      }
      
      public function get z() : Number
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         return this._z;
      }
      
      public function set rotationX(param1:Number) : void
      {
         param1 = MatrixUtil.clampRotation(param1);
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._rotationX)
         {
            return;
         }
         this._rotationX = param1;
         this.invalidate(INVALIDATE_FROM_PROPERTY,true);
      }
      
      public function get rotationX() : Number
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         return this._rotationX;
      }
      
      public function set rotationY(param1:Number) : void
      {
         param1 = MatrixUtil.clampRotation(param1);
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._rotationY)
         {
            return;
         }
         this._rotationY = param1;
         this.invalidate(INVALIDATE_FROM_PROPERTY,true);
      }
      
      public function get rotationY() : Number
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         return this._rotationY;
      }
      
      public function set rotationZ(param1:Number) : void
      {
         param1 = MatrixUtil.clampRotation(param1);
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._rotationZ)
         {
            return;
         }
         this._rotationZ = param1;
         this.invalidate(INVALIDATE_FROM_PROPERTY,false);
      }
      
      public function get rotationZ() : Number
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         return this._rotationZ;
      }
      
      public function set scaleX(param1:Number) : void
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._scaleX)
         {
            return;
         }
         this._scaleX = param1;
         this.invalidate(INVALIDATE_FROM_PROPERTY,false);
      }
      
      public function get scaleX() : Number
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         return this._scaleX;
      }
      
      public function set scaleY(param1:Number) : void
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._scaleY)
         {
            return;
         }
         this._scaleY = param1;
         this.invalidate(INVALIDATE_FROM_PROPERTY,false);
      }
      
      public function get scaleY() : Number
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         return this._scaleY;
      }
      
      public function set scaleZ(param1:Number) : void
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._scaleZ)
         {
            return;
         }
         this._scaleZ = param1;
         this.invalidate(INVALIDATE_FROM_PROPERTY,true);
      }
      
      public function get scaleZ() : Number
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         return this._scaleZ;
      }
      
      public function get is3D() : Boolean
      {
         if((this._flags & M3D_FLAGS_VALID) == 0)
         {
            this.update3DFlags();
         }
         return (this._flags & IS_3D) != 0;
      }
      
      public function set transformX(param1:Number) : void
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._transformX)
         {
            return;
         }
         this._transformX = param1;
         this.invalidate(INVALIDATE_FROM_PROPERTY,true);
      }
      
      public function get transformX() : Number
      {
         return this._transformX;
      }
      
      public function set transformY(param1:Number) : void
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._transformY)
         {
            return;
         }
         this._transformY = param1;
         this.invalidate(INVALIDATE_FROM_PROPERTY,true);
      }
      
      public function get transformY() : Number
      {
         return this._transformY;
      }
      
      public function set transformZ(param1:Number) : void
      {
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         if(param1 == this._transformZ)
         {
            return;
         }
         this._transformZ = param1;
         this.invalidate(INVALIDATE_FROM_PROPERTY,true);
      }
      
      public function get transformZ() : Number
      {
         return this._transformZ;
      }
      
      private function invalidate(param1:uint, param2:Boolean) : void
      {
         switch(param1)
         {
            case INVALIDATE_FROM_PROPERTY:
               this.sourceOfTruth = SOURCE_PROPERTIES;
               this._flags |= PROPERTIES_VALID;
               this._flags &= ~MATRIX_VALID;
               this._flags &= ~MATRIX3D_VALID;
               break;
            case INVALIDATE_FROM_MATRIX:
               this.sourceOfTruth = SOURCE_MATRIX;
               this._flags |= MATRIX_VALID;
               this._flags &= ~PROPERTIES_VALID;
               this._flags &= ~MATRIX3D_VALID;
               break;
            case INVALIDATE_FROM_MATRIX3D:
               this.sourceOfTruth = SOURCE_MATRIX3D;
               this._flags |= MATRIX3D_VALID;
               this._flags &= ~PROPERTIES_VALID;
               this._flags &= ~MATRIX_VALID;
         }
         if(param2)
         {
            this._flags &= ~M3D_FLAGS_VALID;
         }
      }
      
      private function update3DFlags() : void
      {
         var _loc1_:Boolean = false;
         var _loc2_:Vector.<Number> = null;
         if((this._flags & M3D_FLAGS_VALID) == 0)
         {
            _loc1_ = false;
            switch(this.sourceOfTruth)
            {
               case SOURCE_PROPERTIES:
                  _loc1_ = Math.abs(this._scaleZ - 1) > EPSILON || (Math.abs(this._rotationX) + EPSILON) % 360 > 2 * EPSILON || (Math.abs(this._rotationY) + EPSILON) % 360 > 2 * EPSILON || Math.abs(this._z) > EPSILON;
                  break;
               case SOURCE_MATRIX:
                  _loc1_ = false;
                  break;
               case SOURCE_MATRIX3D:
                  _loc2_ = this._matrix3D.rawData;
                  _loc1_ = _loc2_[2] != 0 || _loc2_[6] != 0 || _loc2_[8] != 0 || _loc2_[10] != 1 || _loc2_[14] != 0;
            }
            if(_loc1_)
            {
               this._flags |= IS_3D;
            }
            else
            {
               this._flags &= ~IS_3D;
            }
            this._flags |= M3D_FLAGS_VALID;
         }
      }
      
      public function translateBy(param1:Number, param2:Number, param3:Number = 0) : void
      {
         var _loc4_:Vector.<Number> = null;
         if(this._flags & MATRIX_VALID)
         {
            this._matrix.tx += param1;
            this._matrix.ty += param2;
         }
         if(this._flags & PROPERTIES_VALID)
         {
            this._x += param1;
            this._y += param2;
            this._z += param3;
         }
         if(this._flags & MATRIX3D_VALID)
         {
            _loc4_ = this._matrix3D.rawData;
            _loc4_[12] = _loc4_[12] + param1;
            _loc4_[13] += param2;
            _loc4_[14] += param3;
            this._matrix3D.rawData = _loc4_;
         }
         this.invalidate(INVALIDATE_FROM_NONE,param3 != 0);
      }
      
      public function get matrix() : Matrix
      {
         if(this._flags & MATRIX_VALID)
         {
            return this._matrix;
         }
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         var _loc1_:Matrix = this._matrix;
         if(_loc1_ == null)
         {
            _loc1_ = this._matrix = new Matrix();
         }
         else
         {
            _loc1_.identity();
         }
         AdvancedLayoutFeatures.build2DMatrix(_loc1_,this._transformX,this._transformY,this._scaleX,this._scaleY,this._rotationZ,this._x,this._y);
         this._flags |= MATRIX_VALID;
         return _loc1_;
      }
      
      public function set matrix(param1:Matrix) : void
      {
         if(this._matrix == null)
         {
            this._matrix = param1.clone();
         }
         else
         {
            this._matrix.identity();
            this._matrix.concat(param1);
         }
         this.invalidate(INVALIDATE_FROM_MATRIX,false);
      }
      
      private function validatePropertiesFromMatrix() : void
      {
         var _loc1_:Vector.<Vector3D> = null;
         var _loc2_:Vector3D = null;
         if(this.sourceOfTruth == SOURCE_MATRIX3D)
         {
            _loc1_ = this._matrix3D.decompose();
            this._rotationX = _loc1_[1].x / RADIANS_PER_DEGREES;
            this._rotationY = _loc1_[1].y / RADIANS_PER_DEGREES;
            this._rotationZ = _loc1_[1].z / RADIANS_PER_DEGREES;
            this._scaleX = _loc1_[2].x;
            this._scaleY = _loc1_[2].y;
            this._scaleZ = _loc1_[2].z;
            if(this._transformX != 0 || this._transformY != 0 || this._transformZ != 0)
            {
               _loc2_ = this._matrix3D.transformVector(new Vector3D(this._transformX,this._transformY,this._transformZ));
               this._x = _loc2_.x - this._transformX;
               this._y = _loc2_.y - this._transformY;
               this._z = _loc2_.z - this._transformZ;
            }
            else
            {
               this._x = _loc1_[0].x;
               this._y = _loc1_[0].y;
               this._z = _loc1_[0].z;
            }
         }
         else if(this.sourceOfTruth == SOURCE_MATRIX)
         {
            MatrixUtil.decomposeMatrix(decomposition,this._matrix,this._transformX,this._transformY);
            this._x = decomposition[0];
            this._y = decomposition[1];
            this._z = 0;
            this._rotationX = 0;
            this._rotationY = 0;
            this._rotationZ = decomposition[2];
            this._scaleX = decomposition[3];
            this._scaleY = decomposition[4];
            this._scaleZ = 1;
         }
         this._flags |= PROPERTIES_VALID;
      }
      
      public function get matrix3D() : Matrix3D
      {
         if(this._flags & MATRIX3D_VALID)
         {
            return this._matrix3D;
         }
         if((this._flags & PROPERTIES_VALID) == false)
         {
            this.validatePropertiesFromMatrix();
         }
         var _loc1_:Matrix3D = this._matrix3D;
         if(_loc1_ == null)
         {
            _loc1_ = this._matrix3D = new Matrix3D();
         }
         else
         {
            _loc1_.identity();
         }
         AdvancedLayoutFeatures.build3DMatrix(_loc1_,this.transformX,this.transformY,this.transformZ,this._scaleX,this._scaleY,this._scaleZ,this._rotationX,this._rotationY,this._rotationZ,this._x,this._y,this._z);
         this._flags |= MATRIX3D_VALID;
         return _loc1_;
      }
      
      public function set matrix3D(param1:Matrix3D) : void
      {
         if(this._matrix3D == null)
         {
            this._matrix3D = param1.clone();
         }
         else
         {
            this._matrix3D.identity();
            this._matrix3D.append(param1);
         }
         this.invalidate(INVALIDATE_FROM_MATRIX3D,true);
      }
   }
}

package mx.geom
{
   import flash.geom.Rectangle;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class RoundedRectangle extends Rectangle
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var cornerRadius:Number = 0;
      
      public function RoundedRectangle(param1:Number = 0, param2:Number = 0, param3:Number = 0, param4:Number = 0, param5:Number = 0)
      {
         super(param1,param2,param3,param4);
         this.cornerRadius = param5;
      }
   }
}

package mx.geom
{
   import flash.display.DisplayObject;
   import flash.display.Shape;
   import flash.geom.ColorTransform;
   import flash.geom.Matrix;
   import flash.geom.Matrix3D;
   import flash.geom.PerspectiveProjection;
   import flash.geom.Rectangle;
   import flash.geom.Transform;
   import mx.core.ILayoutElement;
   import mx.core.IVisualElement;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class Transform extends flash.geom.Transform
   {
      
      mx_internal var applyColorTransformAlpha:Boolean = false;
      
      mx_internal var applyMatrix:Boolean = false;
      
      mx_internal var applyMatrix3D:Boolean = false;
      
      private var _target:IVisualElement;
      
      public function Transform(param1:DisplayObject = null)
      {
         if(param1 == null)
         {
            param1 = new Shape();
         }
         super(param1);
      }
      
      override public function set colorTransform(param1:ColorTransform) : void
      {
         if(Boolean(this.target) && "$transform" in this.target)
         {
            this.target["$transform"]["colorTransform"] = param1;
         }
         else if(Boolean(this.target) && "setColorTransform" in this.target)
         {
            this.target["setColorTransform"](param1);
         }
         else
         {
            super.colorTransform = param1;
         }
         this.mx_internal::applyColorTransformAlpha = true;
      }
      
      override public function get colorTransform() : ColorTransform
      {
         if(Boolean(this.target) && "$transform" in this.target)
         {
            return this.target["$transform"]["colorTransform"];
         }
         if(this.target && "displayObject" in this.target && this.target["displayObject"] != null)
         {
            return this.target["displayObject"]["transform"]["colorTransform"];
         }
         return super.colorTransform;
      }
      
      override public function get concatenatedColorTransform() : ColorTransform
      {
         if(Boolean(this.target) && "$transform" in this.target)
         {
            return this.target["$transform"]["concatenatedColorTransform"];
         }
         if(this.target && "displayObject" in this.target && this.target["displayObject"] != null)
         {
            return this.target["displayObject"]["transform"]["concatenatedColorTransform"];
         }
         return super.concatenatedColorTransform;
      }
      
      override public function get concatenatedMatrix() : Matrix
      {
         if(Boolean(this.target) && "$transform" in this.target)
         {
            return this.target["$transform"]["concatenatedMatrix"];
         }
         if(this.target && "displayObject" in this.target && this.target["displayObject"] != null)
         {
            return this.target["displayObject"]["transform"]["concatenatedMatrix"];
         }
         return super.concatenatedMatrix;
      }
      
      override public function set matrix(param1:Matrix) : void
      {
         if(this.target is ILayoutElement && param1 != null)
         {
            ILayoutElement(this.target).setLayoutMatrix(param1,true);
         }
         else
         {
            super.matrix = param1;
         }
         this.mx_internal::applyMatrix = param1 != null;
         this.mx_internal::applyMatrix3D = false;
      }
      
      override public function get matrix() : Matrix
      {
         if(this.target is ILayoutElement)
         {
            return ILayoutElement(this.target).getLayoutMatrix();
         }
         return super.matrix;
      }
      
      override public function set matrix3D(param1:Matrix3D) : *
      {
         if(this.target is ILayoutElement && param1 != null)
         {
            ILayoutElement(this.target).setLayoutMatrix3D(param1,true);
         }
         else
         {
            super.matrix3D = param1;
         }
         this.mx_internal::applyMatrix3D = param1 != null;
         this.mx_internal::applyMatrix = false;
      }
      
      override public function get matrix3D() : Matrix3D
      {
         if(this.target is ILayoutElement)
         {
            return ILayoutElement(this.target).getLayoutMatrix3D();
         }
         return super.matrix3D;
      }
      
      override public function set perspectiveProjection(param1:PerspectiveProjection) : void
      {
         var _loc2_:PerspectiveProjection = super.perspectiveProjection;
         super.perspectiveProjection = param1;
      }
      
      override public function get perspectiveProjection() : PerspectiveProjection
      {
         if(Boolean(this.target) && "$transform" in this.target)
         {
            return this.target["$transform"]["perspectiveProjection"];
         }
         if(this.target && "displayObject" in this.target && this.target["displayObject"] != null)
         {
            return this.target["displayObject"]["transform"]["perspectiveProjection"];
         }
         return super.perspectiveProjection;
      }
      
      override public function get pixelBounds() : Rectangle
      {
         if(Boolean(this.target) && "$transform" in this.target)
         {
            return this.target["$transform"]["pixelBounds"];
         }
         if(this.target && "displayObject" in this.target && this.target["displayObject"] != null)
         {
            return this.target["displayObject"]["transform"]["pixelBounds"];
         }
         return super.pixelBounds;
      }
      
      public function set target(param1:IVisualElement) : void
      {
         if(param1 !== this._target)
         {
            this._target = param1;
         }
      }
      
      public function get target() : IVisualElement
      {
         return this._target;
      }
      
      override public function getRelativeMatrix3D(param1:DisplayObject) : Matrix3D
      {
         if(Boolean(this.target) && "$transform" in this.target)
         {
            return this.target["$transform"]["getRelativeMatrix3D"](param1);
         }
         if(this.target && "displayObject" in this.target && this.target["displayObject"] != null)
         {
            return this.target["displayObject"]["transform"]["getRelativeMatrix3D"](param1);
         }
         return super.getRelativeMatrix3D(param1);
      }
   }
}

package mx.geom
{
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import mx.core.AdvancedLayoutFeatures;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class TransformOffsets extends EventDispatcher
   {
      
      private static const IS_3D:uint = 512;
      
      private static const M3D_FLAGS_VALID:uint = 1024;
      
      private static const EPSILON:Number = 0.001;
      
      private var _rotationX:Number = 0;
      
      private var _rotationY:Number = 0;
      
      private var _rotationZ:Number = 0;
      
      private var _scaleX:Number = 1;
      
      private var _scaleY:Number = 1;
      
      private var _scaleZ:Number = 1;
      
      private var _x:Number = 0;
      
      private var _y:Number = 0;
      
      private var _z:Number = 0;
      
      private var _flags:uint = 0;
      
      mx_internal var owner:AdvancedLayoutFeatures;
      
      public function TransformOffsets()
      {
         super();
      }
      
      public function set x(param1:Number) : void
      {
         if(param1 == this._x)
         {
            return;
         }
         this._x = param1;
         this.invalidate(false);
      }
      
      public function get x() : Number
      {
         return this._x;
      }
      
      public function set y(param1:Number) : void
      {
         if(param1 == this._y)
         {
            return;
         }
         this._y = param1;
         this.invalidate(false);
      }
      
      public function get y() : Number
      {
         return this._y;
      }
      
      public function set z(param1:Number) : void
      {
         if(param1 == this._z)
         {
            return;
         }
         this._z = param1;
         this.invalidate(true);
      }
      
      public function get z() : Number
      {
         return this._z;
      }
      
      public function set rotationX(param1:Number) : void
      {
         if(param1 == this._rotationX)
         {
            return;
         }
         this._rotationX = param1;
         this.invalidate(true);
      }
      
      public function get rotationX() : Number
      {
         return this._rotationX;
      }
      
      public function set rotationY(param1:Number) : void
      {
         if(param1 == this._rotationY)
         {
            return;
         }
         this._rotationY = param1;
         this.invalidate(true);
      }
      
      public function get rotationY() : Number
      {
         return this._rotationY;
      }
      
      public function set rotationZ(param1:Number) : void
      {
         if(param1 == this._rotationZ)
         {
            return;
         }
         this._rotationZ = param1;
         this.invalidate(false);
      }
      
      public function get rotationZ() : Number
      {
         return this._rotationZ;
      }
      
      public function set scaleX(param1:Number) : void
      {
         if(param1 == this._scaleX)
         {
            return;
         }
         this._scaleX = param1;
         this.invalidate(false);
      }
      
      public function get scaleX() : Number
      {
         return this._scaleX;
      }
      
      public function set scaleY(param1:Number) : void
      {
         if(param1 == this._scaleY)
         {
            return;
         }
         this._scaleY = param1;
         this.invalidate(false);
      }
      
      public function get scaleY() : Number
      {
         return this._scaleY;
      }
      
      public function set scaleZ(param1:Number) : void
      {
         if(param1 == this._scaleZ)
         {
            return;
         }
         this._scaleZ = param1;
         this.invalidate(true);
      }
      
      public function get scaleZ() : Number
      {
         return this._scaleZ;
      }
      
      mx_internal function get is3D() : Boolean
      {
         if((this._flags & M3D_FLAGS_VALID) == 0)
         {
            this.update3DFlags();
         }
         return (this._flags & IS_3D) != 0;
      }
      
      private function invalidate(param1:Boolean, param2:Boolean = true) : void
      {
         if(param1)
         {
            this._flags &= ~M3D_FLAGS_VALID;
         }
         if(param2)
         {
            dispatchEvent(new Event(Event.CHANGE));
         }
      }
      
      private function update3DFlags() : void
      {
         var _loc1_:Boolean = false;
         if((this._flags & M3D_FLAGS_VALID) == 0)
         {
            _loc1_ = Math.abs(this._scaleZ - 1) > EPSILON || (Math.abs(this._rotationX) + EPSILON) % 360 > 2 * EPSILON || (Math.abs(this._rotationY) + EPSILON) % 360 > 2 * EPSILON || Math.abs(this._z) > EPSILON;
            if(_loc1_)
            {
               this._flags |= IS_3D;
            }
            else
            {
               this._flags &= ~IS_3D;
            }
            this._flags |= M3D_FLAGS_VALID;
         }
      }
   }
}

package mx.graphics.shaderClasses
{
   import flash.display.Shader;
   
   public class ColorBurnShader extends Shader
   {
      
      private static var ShaderClass:Class = ColorBurnShader_ShaderClass;
      
      public function ColorBurnShader()
      {
         super(new ShaderClass());
      }
   }
}

package mx.graphics.shaderClasses
{
   import mx.core.ByteArrayAsset;
   
   [Embed(source="/_assets/147_mx.graphics.shaderClasses.ColorBurnShader_ShaderClass_mx.graphics.shaderClasses.ColorBurnShader_ShaderClass.bin", mimeType="application/octet-stream")]
   public class ColorBurnShader_ShaderClass extends ByteArrayAsset
   {
      
      public function ColorBurnShader_ShaderClass()
      {
         super();
      }
   }
}

package mx.graphics.shaderClasses
{
   import flash.display.Shader;
   
   public class ColorDodgeShader extends Shader
   {
      
      private static var ShaderClass:Class = ColorDodgeShader_ShaderClass;
      
      public function ColorDodgeShader()
      {
         super(new ShaderClass());
      }
   }
}

package mx.graphics.shaderClasses
{
   import mx.core.ByteArrayAsset;
   
   [Embed(source="/_assets/144_mx.graphics.shaderClasses.ColorDodgeShader_ShaderClass_mx.graphics.shaderClasses.ColorDodgeShader_ShaderClass.bin", mimeType="application/octet-stream")]
   public class ColorDodgeShader_ShaderClass extends ByteArrayAsset
   {
      
      public function ColorDodgeShader_ShaderClass()
      {
         super();
      }
   }
}

package mx.graphics.shaderClasses
{
   import flash.display.Shader;
   
   public class ColorShader extends Shader
   {
      
      private static var ShaderClass:Class = ColorShader_ShaderClass;
      
      public function ColorShader()
      {
         super(new ShaderClass());
      }
   }
}

package mx.graphics.shaderClasses
{
   import mx.core.ByteArrayAsset;
   
   [Embed(source="/_assets/145_mx.graphics.shaderClasses.ColorShader_ShaderClass_mx.graphics.shaderClasses.ColorShader_ShaderClass.bin", mimeType="application/octet-stream")]
   public class ColorShader_ShaderClass extends ByteArrayAsset
   {
      
      public function ColorShader_ShaderClass()
      {
         super();
      }
   }
}

package mx.graphics.shaderClasses
{
   import flash.display.Shader;
   
   public class ExclusionShader extends Shader
   {
      
      private static var ShaderClass:Class = ExclusionShader_ShaderClass;
      
      public function ExclusionShader()
      {
         super(new ShaderClass());
      }
   }
}

package mx.graphics.shaderClasses
{
   import mx.core.ByteArrayAsset;
   
   [Embed(source="/_assets/148_mx.graphics.shaderClasses.ExclusionShader_ShaderClass_mx.graphics.shaderClasses.ExclusionShader_ShaderClass.bin", mimeType="application/octet-stream")]
   public class ExclusionShader_ShaderClass extends ByteArrayAsset
   {
      
      public function ExclusionShader_ShaderClass()
      {
         super();
      }
   }
}

package mx.graphics.shaderClasses
{
   import flash.display.Shader;
   
   public class HueShader extends Shader
   {
      
      private static var ShaderClass:Class = HueShader_ShaderClass;
      
      public function HueShader()
      {
         super(new ShaderClass());
      }
   }
}

package mx.graphics.shaderClasses
{
   import mx.core.ByteArrayAsset;
   
   [Embed(source="/_assets/146_mx.graphics.shaderClasses.HueShader_ShaderClass_mx.graphics.shaderClasses.HueShader_ShaderClass.bin", mimeType="application/octet-stream")]
   public class HueShader_ShaderClass extends ByteArrayAsset
   {
      
      public function HueShader_ShaderClass()
      {
         super();
      }
   }
}

package mx.graphics.shaderClasses
{
   import flash.display.Shader;
   
   public class LuminosityShader extends Shader
   {
      
      private static var ShaderClass:Class = LuminosityShader_ShaderClass;
      
      public function LuminosityShader()
      {
         super(new ShaderClass());
      }
   }
}

package mx.graphics.shaderClasses
{
   import mx.core.ByteArrayAsset;
   
   [Embed(source="/_assets/143_mx.graphics.shaderClasses.LuminosityShader_ShaderClass_mx.graphics.shaderClasses.LuminosityShader_ShaderClass.bin", mimeType="application/octet-stream")]
   public class LuminosityShader_ShaderClass extends ByteArrayAsset
   {
      
      public function LuminosityShader_ShaderClass()
      {
         super();
      }
   }
}

package mx.graphics.shaderClasses
{
   import flash.display.Shader;
   
   public class SaturationShader extends Shader
   {
      
      private static var ShaderClass:Class = SaturationShader_ShaderClass;
      
      public function SaturationShader()
      {
         super(new ShaderClass());
      }
   }
}

package mx.graphics.shaderClasses
{
   import mx.core.ByteArrayAsset;
   
   [Embed(source="/_assets/149_mx.graphics.shaderClasses.SaturationShader_ShaderClass_mx.graphics.shaderClasses.SaturationShader_ShaderClass.bin", mimeType="application/octet-stream")]
   public class SaturationShader_ShaderClass extends ByteArrayAsset
   {
      
      public function SaturationShader_ShaderClass()
      {
         super();
      }
   }
}

package mx.graphics.shaderClasses
{
   import flash.display.Shader;
   
   public class SoftLightShader extends Shader
   {
      
      private static var ShaderClass:Class = SoftLightShader_ShaderClass;
      
      public function SoftLightShader()
      {
         super(new ShaderClass());
      }
   }
}

package mx.graphics.shaderClasses
{
   import mx.core.ByteArrayAsset;
   
   [Embed(source="/_assets/150_mx.graphics.shaderClasses.SoftLightShader_ShaderClass_mx.graphics.shaderClasses.SoftLightShader_ShaderClass.bin", mimeType="application/octet-stream")]
   public class SoftLightShader_ShaderClass extends ByteArrayAsset
   {
      
      public function SoftLightShader_ShaderClass()
      {
         super();
      }
   }
}

package mx.logging
{
   import mx.core.IMXMLObject;
   import mx.core.mx_internal;
   import mx.logging.errors.InvalidFilterError;
   import mx.resources.IResourceManager;
   import mx.resources.ResourceManager;
   import mx.utils.UIDUtil;
   
   use namespace mx_internal;
   
   public class AbstractTarget implements ILoggingTarget, IMXMLObject
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var _loggerCount:uint = 0;
      
      private var resourceManager:IResourceManager = ResourceManager.getInstance();
      
      private var _filters:Array = ["*"];
      
      private var _id:String;
      
      private var _level:int = 0;
      
      public function AbstractTarget()
      {
         super();
         this._id = UIDUtil.createUID();
      }
      
      public function get filters() : Array
      {
         return this._filters;
      }
      
      public function set filters(param1:Array) : void
      {
         var _loc2_:String = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:uint = 0;
         if(Boolean(param1) && param1.length > 0)
         {
            _loc5_ = 0;
            while(_loc5_ < param1.length)
            {
               _loc2_ = param1[_loc5_];
               if(Log.hasIllegalCharacters(_loc2_))
               {
                  _loc4_ = this.resourceManager.getString("logging","charsInvalid",[_loc2_]);
                  throw new InvalidFilterError(_loc4_);
               }
               _loc3_ = int(_loc2_.indexOf("*"));
               if(_loc3_ >= 0 && _loc3_ != _loc2_.length - 1)
               {
                  _loc4_ = this.resourceManager.getString("logging","charPlacement",[_loc2_]);
                  throw new InvalidFilterError(_loc4_);
               }
               _loc5_++;
            }
         }
         else
         {
            param1 = ["*"];
         }
         if(this._loggerCount > 0)
         {
            Log.removeTarget(this);
            this._filters = param1;
            Log.addTarget(this);
         }
         else
         {
            this._filters = param1;
         }
      }
      
      public function get id() : String
      {
         return this._id;
      }
      
      public function get level() : int
      {
         return this._level;
      }
      
      public function set level(param1:int) : void
      {
         Log.removeTarget(this);
         this._level = param1;
         Log.addTarget(this);
      }
      
      public function addLogger(param1:ILogger) : void
      {
         if(param1)
         {
            ++this._loggerCount;
            param1.addEventListener(LogEvent.LOG,this.logHandler);
         }
      }
      
      public function removeLogger(param1:ILogger) : void
      {
         if(param1)
         {
            --this._loggerCount;
            param1.removeEventListener(LogEvent.LOG,this.logHandler);
         }
      }
      
      public function initialized(param1:Object, param2:String) : void
      {
         this._id = param2;
         Log.addTarget(this);
      }
      
      public function logEvent(param1:LogEvent) : void
      {
      }
      
      private function logHandler(param1:LogEvent) : void
      {
         if(param1.level >= this.level)
         {
            this.logEvent(param1);
         }
      }
   }
}

package mx.logging
{
   import flash.events.IEventDispatcher;
   
   public interface ILogger extends IEventDispatcher
   {
      
      function get category() : String;
      
      function log(param1:int, param2:String, ... rest) : void;
      
      function debug(param1:String, ... rest) : void;
      
      function error(param1:String, ... rest) : void;
      
      function fatal(param1:String, ... rest) : void;
      
      function info(param1:String, ... rest) : void;
      
      function warn(param1:String, ... rest) : void;
   }
}

package mx.logging
{
   public interface ILoggingTarget
   {
      
      function get filters() : Array;
      
      function set filters(param1:Array) : void;
      
      function get level() : int;
      
      function set level(param1:int) : void;
      
      function addLogger(param1:ILogger) : void;
      
      function removeLogger(param1:ILogger) : void;
   }
}

package mx.logging
{
   import mx.core.mx_internal;
   import mx.logging.errors.InvalidCategoryError;
   import mx.resources.IResourceManager;
   import mx.resources.ResourceManager;
   
   use namespace mx_internal;
   
   public class Log
   {
      
      private static var _loggers:Array;
      
      private static var _resourceManager:IResourceManager;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static var NONE:int = int.MAX_VALUE;
      
      private static var _targetLevel:int = NONE;
      
      private static var _targets:Array = [];
      
      public function Log()
      {
         super();
      }
      
      private static function get resourceManager() : IResourceManager
      {
         if(!_resourceManager)
         {
            _resourceManager = ResourceManager.getInstance();
         }
         return _resourceManager;
      }
      
      public static function isFatal() : Boolean
      {
         return _targetLevel <= LogEventLevel.FATAL ? true : false;
      }
      
      public static function isError() : Boolean
      {
         return _targetLevel <= LogEventLevel.ERROR ? true : false;
      }
      
      public static function isWarn() : Boolean
      {
         return _targetLevel <= LogEventLevel.WARN ? true : false;
      }
      
      public static function isInfo() : Boolean
      {
         return _targetLevel <= LogEventLevel.INFO ? true : false;
      }
      
      public static function isDebug() : Boolean
      {
         return _targetLevel <= LogEventLevel.DEBUG ? true : false;
      }
      
      public static function addTarget(param1:ILoggingTarget) : void
      {
         var _loc2_:Array = null;
         var _loc3_:ILogger = null;
         var _loc4_:String = null;
         var _loc5_:String = null;
         if(param1)
         {
            _loc2_ = param1.filters;
            for(_loc4_ in _loggers)
            {
               if(categoryMatchInFilterList(_loc4_,_loc2_))
               {
                  param1.addLogger(ILogger(_loggers[_loc4_]));
               }
            }
            _targets.push(param1);
            if(_targetLevel == NONE)
            {
               _targetLevel = param1.level;
            }
            else if(param1.level < _targetLevel)
            {
               _targetLevel = param1.level;
            }
            return;
         }
         _loc5_ = resourceManager.getString("logging","invalidTarget");
         throw new ArgumentError(_loc5_);
      }
      
      public static function removeTarget(param1:ILoggingTarget) : void
      {
         var _loc2_:Array = null;
         var _loc3_:ILogger = null;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         var _loc6_:String = null;
         if(param1)
         {
            _loc2_ = param1.filters;
            for(_loc4_ in _loggers)
            {
               if(categoryMatchInFilterList(_loc4_,_loc2_))
               {
                  param1.removeLogger(ILogger(_loggers[_loc4_]));
               }
            }
            _loc5_ = 0;
            while(_loc5_ < _targets.length)
            {
               if(param1 == _targets[_loc5_])
               {
                  _targets.splice(_loc5_,1);
                  _loc5_--;
               }
               _loc5_++;
            }
            resetTargetLevel();
            return;
         }
         _loc6_ = resourceManager.getString("logging","invalidTarget");
         throw new ArgumentError(_loc6_);
      }
      
      public static function getLogger(param1:String) : ILogger
      {
         var _loc3_:ILoggingTarget = null;
         checkCategory(param1);
         if(!_loggers)
         {
            _loggers = [];
         }
         var _loc2_:ILogger = _loggers[param1];
         if(_loc2_ == null)
         {
            _loc2_ = new LogLogger(param1);
            _loggers[param1] = _loc2_;
         }
         var _loc4_:int = 0;
         while(_loc4_ < _targets.length)
         {
            _loc3_ = ILoggingTarget(_targets[_loc4_]);
            if(categoryMatchInFilterList(param1,_loc3_.filters))
            {
               _loc3_.addLogger(_loc2_);
            }
            _loc4_++;
         }
         return _loc2_;
      }
      
      public static function flush() : void
      {
         _loggers = [];
         _targets = [];
         _targetLevel = NONE;
      }
      
      public static function hasIllegalCharacters(param1:String) : Boolean
      {
         return param1.search(/[\[\]\~\$\^\&\\(\)\{\}\+\?\/=`!@#%,:;'"<>\s]/) != -1;
      }
      
      private static function categoryMatchInFilterList(param1:String, param2:Array) : Boolean
      {
         var _loc4_:String = null;
         var _loc3_:Boolean = false;
         var _loc5_:int = -1;
         var _loc6_:uint = 0;
         while(_loc6_ < param2.length)
         {
            _loc4_ = param2[_loc6_];
            _loc5_ = int(_loc4_.indexOf("*"));
            if(_loc5_ == 0)
            {
               return true;
            }
            _loc5_ = param1.length;
            _loc5_ = _loc5_ < 0 ? (_loc5_) : _loc5_ - 1;
            if(param1.substring(0,_loc5_) == _loc4_.substring(0,_loc5_))
            {
               return true;
            }
            _loc6_++;
         }
         return false;
      }
      
      private static function checkCategory(param1:String) : void
      {
         var _loc2_:String = null;
         if(param1 == null || param1.length == 0)
         {
            _loc2_ = resourceManager.getString("logging","invalidLen");
            throw new InvalidCategoryError(_loc2_);
         }
         if(hasIllegalCharacters(param1) || param1.indexOf("*") != -1)
         {
            _loc2_ = resourceManager.getString("logging","invalidChars");
            throw new InvalidCategoryError(_loc2_);
         }
      }
      
      private static function resetTargetLevel() : void
      {
         var _loc1_:int = NONE;
         var _loc2_:int = 0;
         while(_loc2_ < _targets.length)
         {
            if(_loc1_ == NONE || _targets[_loc2_].level < _loc1_)
            {
               _loc1_ = int(_targets[_loc2_].level);
            }
            _loc2_++;
         }
         _targetLevel = _loc1_;
      }
   }
}

package mx.logging
{
   import flash.events.Event;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class LogEvent extends Event
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const LOG:String = "log";
      
      public var level:int;
      
      public var message:String;
      
      public function LogEvent(param1:String = "", param2:int = 0)
      {
         super(LogEvent.LOG,false,false);
         this.message = param1;
         this.level = param2;
      }
      
      public static function getLevelString(param1:uint) : String
      {
         switch(param1)
         {
            case LogEventLevel.INFO:
               return "INFO";
            case LogEventLevel.DEBUG:
               return "DEBUG";
            case LogEventLevel.ERROR:
               return "ERROR";
            case LogEventLevel.WARN:
               return "WARN";
            case LogEventLevel.FATAL:
               return "FATAL";
            case LogEventLevel.ALL:
               return "ALL";
            default:
               return "UNKNOWN";
         }
      }
      
      override public function clone() : Event
      {
         return new LogEvent(this.message,this.level);
      }
   }
}

package mx.logging
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public final class LogEventLevel
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const FATAL:int = 1000;
      
      public static const ERROR:int = 8;
      
      public static const WARN:int = 6;
      
      public static const INFO:int = 4;
      
      public static const DEBUG:int = 2;
      
      public static const ALL:int = 0;
      
      public function LogEventLevel()
      {
         super();
      }
   }
}

package mx.logging
{
   import flash.events.EventDispatcher;
   import mx.core.mx_internal;
   import mx.resources.IResourceManager;
   import mx.resources.ResourceManager;
   
   use namespace mx_internal;
   
   public class LogLogger extends EventDispatcher implements ILogger
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var resourceManager:IResourceManager = ResourceManager.getInstance();
      
      private var _category:String;
      
      public function LogLogger(param1:String)
      {
         super();
         this._category = param1;
      }
      
      public function get category() : String
      {
         return this._category;
      }
      
      public function log(param1:int, param2:String, ... rest) : void
      {
         var _loc4_:String = null;
         var _loc5_:int = 0;
         if(param1 < LogEventLevel.DEBUG)
         {
            _loc4_ = this.resourceManager.getString("logging","levelLimit");
            throw new ArgumentError(_loc4_);
         }
         if(hasEventListener(LogEvent.LOG))
         {
            _loc5_ = 0;
            while(_loc5_ < rest.length)
            {
               param2 = param2.replace(new RegExp("\\{" + _loc5_ + "\\}","g"),rest[_loc5_]);
               _loc5_++;
            }
            dispatchEvent(new LogEvent(param2,param1));
         }
      }
      
      public function debug(param1:String, ... rest) : void
      {
         var _loc3_:int = 0;
         if(hasEventListener(LogEvent.LOG))
         {
            _loc3_ = 0;
            while(_loc3_ < rest.length)
            {
               param1 = param1.replace(new RegExp("\\{" + _loc3_ + "\\}","g"),rest[_loc3_]);
               _loc3_++;
            }
            dispatchEvent(new LogEvent(param1,LogEventLevel.DEBUG));
         }
      }
      
      public function error(param1:String, ... rest) : void
      {
         var _loc3_:int = 0;
         if(hasEventListener(LogEvent.LOG))
         {
            _loc3_ = 0;
            while(_loc3_ < rest.length)
            {
               param1 = param1.replace(new RegExp("\\{" + _loc3_ + "\\}","g"),rest[_loc3_]);
               _loc3_++;
            }
            dispatchEvent(new LogEvent(param1,LogEventLevel.ERROR));
         }
      }
      
      public function fatal(param1:String, ... rest) : void
      {
         var _loc3_:int = 0;
         if(hasEventListener(LogEvent.LOG))
         {
            _loc3_ = 0;
            while(_loc3_ < rest.length)
            {
               param1 = param1.replace(new RegExp("\\{" + _loc3_ + "\\}","g"),rest[_loc3_]);
               _loc3_++;
            }
            dispatchEvent(new LogEvent(param1,LogEventLevel.FATAL));
         }
      }
      
      public function info(param1:String, ... rest) : void
      {
         var _loc3_:int = 0;
         if(hasEventListener(LogEvent.LOG))
         {
            _loc3_ = 0;
            while(_loc3_ < rest.length)
            {
               param1 = param1.replace(new RegExp("\\{" + _loc3_ + "\\}","g"),rest[_loc3_]);
               _loc3_++;
            }
            dispatchEvent(new LogEvent(param1,LogEventLevel.INFO));
         }
      }
      
      public function warn(param1:String, ... rest) : void
      {
         var _loc3_:int = 0;
         if(hasEventListener(LogEvent.LOG))
         {
            _loc3_ = 0;
            while(_loc3_ < rest.length)
            {
               param1 = param1.replace(new RegExp("\\{" + _loc3_ + "\\}","g"),rest[_loc3_]);
               _loc3_++;
            }
            dispatchEvent(new LogEvent(param1,LogEventLevel.WARN));
         }
      }
   }
}

package mx.logging.errors
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class InvalidCategoryError extends Error
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function InvalidCategoryError(param1:String)
      {
         super(param1);
      }
      
      public function toString() : String
      {
         return String(message);
      }
   }
}

package mx.logging.errors
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class InvalidFilterError extends Error
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function InvalidFilterError(param1:String)
      {
         super(param1);
      }
      
      public function toString() : String
      {
         return String(message);
      }
   }
}

package mx.logging.targets
{
   import mx.core.mx_internal;
   import mx.logging.AbstractTarget;
   import mx.logging.ILogger;
   import mx.logging.LogEvent;
   
   use namespace mx_internal;
   
   public class LineFormattedTarget extends AbstractTarget
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var fieldSeparator:String = " ";
      
      public var includeCategory:Boolean;
      
      public var includeDate:Boolean;
      
      public var includeLevel:Boolean;
      
      public var includeTime:Boolean;
      
      public function LineFormattedTarget()
      {
         super();
         this.includeTime = false;
         this.includeDate = false;
         this.includeCategory = false;
         this.includeLevel = false;
      }
      
      override public function logEvent(param1:LogEvent) : void
      {
         var _loc5_:Date = null;
         var _loc2_:String = "";
         if(this.includeDate || this.includeTime)
         {
            _loc5_ = new Date();
            if(this.includeDate)
            {
               _loc2_ = Number(_loc5_.getMonth() + 1).toString() + "/" + _loc5_.getDate().toString() + "/" + _loc5_.getFullYear() + this.fieldSeparator;
            }
            if(this.includeTime)
            {
               _loc2_ += this.padTime(_loc5_.getHours()) + ":" + this.padTime(_loc5_.getMinutes()) + ":" + this.padTime(_loc5_.getSeconds()) + "." + this.padTime(_loc5_.getMilliseconds(),true) + this.fieldSeparator;
            }
         }
         var _loc3_:String = "";
         if(this.includeLevel)
         {
            _loc3_ = "[" + LogEvent.getLevelString(param1.level) + "]" + this.fieldSeparator;
         }
         var _loc4_:String = this.includeCategory ? ILogger(param1.target).category + this.fieldSeparator : "";
         this.mx_internal::internalLog(_loc2_ + _loc3_ + _loc4_ + param1.message);
      }
      
      private function padTime(param1:Number, param2:Boolean = false) : String
      {
         if(param2)
         {
            if(param1 < 10)
            {
               return "00" + param1.toString();
            }
            if(param1 < 100)
            {
               return "0" + param1.toString();
            }
            return param1.toString();
         }
         return param1 > 9 ? param1.toString() : "0" + param1.toString();
      }
      
      mx_internal function internalLog(param1:String) : void
      {
      }
   }
}

package mx.managers
{
   import mx.core.Singleton;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class CursorManager
   {
      
      private static var implClassDependency:CursorManagerImpl;
      
      private static var _impl:ICursorManager;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const NO_CURSOR:int = 0;
      
      public function CursorManager()
      {
         super();
      }
      
      private static function get impl() : ICursorManager
      {
         if(!_impl)
         {
            _impl = ICursorManager(Singleton.getInstance("mx.managers::ICursorManager"));
         }
         return _impl;
      }
      
      public static function getInstance() : ICursorManager
      {
         return impl;
      }
      
      public static function get currentCursorID() : int
      {
         return impl.currentCursorID;
      }
      
      public static function set currentCursorID(param1:int) : void
      {
         impl.currentCursorID = param1;
      }
      
      public static function get currentCursorXOffset() : Number
      {
         return impl.currentCursorXOffset;
      }
      
      public static function set currentCursorXOffset(param1:Number) : void
      {
         impl.currentCursorXOffset = param1;
      }
      
      public static function get currentCursorYOffset() : Number
      {
         return impl.currentCursorYOffset;
      }
      
      public static function set currentCursorYOffset(param1:Number) : void
      {
         impl.currentCursorYOffset = param1;
      }
      
      public static function showCursor() : void
      {
         impl.showCursor();
      }
      
      public static function hideCursor() : void
      {
         impl.hideCursor();
      }
      
      public static function setCursor(param1:Class, param2:int = 2, param3:Number = 0, param4:Number = 0) : int
      {
         return impl.setCursor(param1,param2,param3,param4);
      }
      
      public static function removeCursor(param1:int) : void
      {
         impl.removeCursor(param1);
      }
      
      public static function removeAllCursors() : void
      {
         impl.removeAllCursors();
      }
      
      public static function setBusyCursor() : void
      {
         impl.setBusyCursor();
      }
      
      public static function removeBusyCursor() : void
      {
         impl.removeBusyCursor();
      }
      
      mx_internal static function registerToUseBusyCursor(param1:Object) : void
      {
         impl.registerToUseBusyCursor(param1);
      }
      
      mx_internal static function unRegisterToUseBusyCursor(param1:Object) : void
      {
         impl.unRegisterToUseBusyCursor(param1);
      }
   }
}

package mx.managers
{
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.display.InteractiveObject;
   import flash.display.Sprite;
   import flash.events.ContextMenuEvent;
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.events.IEventDispatcher;
   import flash.events.IOErrorEvent;
   import flash.events.MouseEvent;
   import flash.events.ProgressEvent;
   import flash.geom.Point;
   import flash.text.TextField;
   import flash.text.TextFieldType;
   import flash.ui.Mouse;
   import mx.core.EventPriority;
   import mx.core.FlexGlobals;
   import mx.core.FlexSprite;
   import mx.core.IFlexModuleFactory;
   import mx.core.ISystemCursorClient;
   import mx.core.mx_internal;
   import mx.events.Request;
   import mx.styles.CSSStyleDeclaration;
   import mx.styles.StyleManager;
   
   use namespace mx_internal;
   
   public class CursorManagerImpl extends EventDispatcher implements ICursorManager
   {
      
      private static var instance:ICursorManager;
      
      public static var mixins:Array;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var nextCursorID:int = 1;
      
      private var cursorList:Array;
      
      private var busyCursorList:Array;
      
      mx_internal var initialized:Boolean = false;
      
      mx_internal var cursorHolder:Sprite;
      
      private var currentCursor:DisplayObject;
      
      private var listenForContextMenu:Boolean = false;
      
      private var overTextField:Boolean = false;
      
      private var overLink:Boolean = false;
      
      private var showSystemCursor:Boolean = false;
      
      private var showCustomCursor:Boolean = false;
      
      private var customCursorLeftStage:Boolean = false;
      
      mx_internal var systemManager:ISystemManager = null;
      
      mx_internal var sandboxRoot:IEventDispatcher = null;
      
      private var sourceArray:Array;
      
      mx_internal var _currentCursorID:int = 0;
      
      mx_internal var _currentCursorXOffset:Number = 0;
      
      mx_internal var _currentCursorYOffset:Number = 0;
      
      public function CursorManagerImpl(param1:ISystemManager = null)
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         this.cursorList = [];
         this.busyCursorList = [];
         this.sourceArray = [];
         super();
         if(Boolean(instance) && !param1)
         {
            throw new Error("Instance already exists.");
         }
         if(param1)
         {
            this.mx_internal::systemManager = param1 as ISystemManager;
         }
         else
         {
            this.mx_internal::systemManager = SystemManagerGlobals.topLevelSystemManagers[0] as ISystemManager;
         }
         if(mixins)
         {
            _loc2_ = int(mixins.length);
            _loc3_ = 0;
            while(_loc3_ < _loc2_)
            {
               new mixins[_loc3_](this);
               _loc3_++;
            }
         }
      }
      
      public static function getInstance() : ICursorManager
      {
         if(!instance)
         {
            instance = new CursorManagerImpl();
         }
         return instance;
      }
      
      public function get currentCursorID() : int
      {
         return this.mx_internal::_currentCursorID;
      }
      
      public function set currentCursorID(param1:int) : void
      {
         this.mx_internal::_currentCursorID = param1;
         if(hasEventListener("currentCursorID"))
         {
            dispatchEvent(new Event("currentCursorID"));
         }
      }
      
      public function get currentCursorXOffset() : Number
      {
         return this.mx_internal::_currentCursorXOffset;
      }
      
      public function set currentCursorXOffset(param1:Number) : void
      {
         this.mx_internal::_currentCursorXOffset = param1;
         if(hasEventListener("currentCursorXOffset"))
         {
            dispatchEvent(new Event("currentCursorXOffset"));
         }
      }
      
      public function get currentCursorYOffset() : Number
      {
         return this.mx_internal::_currentCursorYOffset;
      }
      
      public function set currentCursorYOffset(param1:Number) : void
      {
         this.mx_internal::_currentCursorYOffset = param1;
         if(hasEventListener("currentCursorYOffset"))
         {
            dispatchEvent(new Event("currentCursorYOffset"));
         }
      }
      
      public function showCursor() : void
      {
         if(this.mx_internal::cursorHolder)
         {
            this.mx_internal::cursorHolder.visible = true;
         }
         if(hasEventListener("showCursor"))
         {
            dispatchEvent(new Event("showCursor"));
         }
      }
      
      public function hideCursor() : void
      {
         if(this.mx_internal::cursorHolder)
         {
            this.mx_internal::cursorHolder.visible = false;
         }
         if(hasEventListener("hideCursor"))
         {
            dispatchEvent(new Event("hideCursor"));
         }
      }
      
      public function setCursor(param1:Class, param2:int = 2, param3:Number = 0, param4:Number = 0) : int
      {
         var _loc7_:Request = null;
         if(hasEventListener("setCursor"))
         {
            _loc7_ = new Request("setCursor",false,true);
            _loc7_.value = [param1,param2,param3,param4];
            if(!dispatchEvent(_loc7_))
            {
               return this.currentCursorID;
            }
         }
         var _loc5_:int = this.nextCursorID++;
         var _loc6_:CursorQueueItem = new CursorQueueItem();
         _loc6_.cursorID = _loc5_;
         _loc6_.cursorClass = param1;
         _loc6_.priority = param2;
         _loc6_.x = param3;
         _loc6_.y = param4;
         if(this.mx_internal::systemManager)
         {
            _loc6_.systemManager = this.mx_internal::systemManager;
         }
         else
         {
            _loc6_.systemManager = FlexGlobals.topLevelApplication.systemManager;
         }
         this.cursorList.push(_loc6_);
         this.cursorList.sort(this.priorityCompare);
         this.showCurrentCursor();
         return _loc5_;
      }
      
      private function priorityCompare(param1:CursorQueueItem, param2:CursorQueueItem) : int
      {
         if(param1.priority < param2.priority)
         {
            return -1;
         }
         if(param1.priority == param2.priority)
         {
            return 0;
         }
         return 1;
      }
      
      public function removeCursor(param1:int) : void
      {
         var _loc2_:Object = null;
         var _loc3_:CursorQueueItem = null;
         if(hasEventListener("removeCursor"))
         {
            if(!dispatchEvent(new Request("removeCursor",false,true,param1)))
            {
               return;
            }
         }
         for(_loc2_ in this.cursorList)
         {
            _loc3_ = this.cursorList[_loc2_];
            if(_loc3_.cursorID == param1)
            {
               this.cursorList.splice(_loc2_,1);
               this.showCurrentCursor();
               break;
            }
         }
      }
      
      public function removeAllCursors() : void
      {
         if(hasEventListener("removeAllCursors"))
         {
            if(!dispatchEvent(new Event("removeAllCursors",false,true)))
            {
               return;
            }
         }
         this.cursorList.splice(0);
         this.showCurrentCursor();
      }
      
      public function setBusyCursor() : void
      {
         if(hasEventListener("setBusyCursor"))
         {
            if(!dispatchEvent(new Event("setBusyCursor",false,true)))
            {
               return;
            }
         }
         var _loc1_:CSSStyleDeclaration = StyleManager.getStyleManager(this.mx_internal::systemManager as IFlexModuleFactory).getMergedStyleDeclaration("mx.managers.CursorManager");
         var _loc2_:Class = _loc1_.getStyle("busyCursor");
         this.busyCursorList.push(this.setCursor(_loc2_,CursorManagerPriority.LOW));
      }
      
      public function removeBusyCursor() : void
      {
         if(hasEventListener("removeBusyCursor"))
         {
            if(!dispatchEvent(new Event("removeBusyCursor",false,true)))
            {
               return;
            }
         }
         if(this.busyCursorList.length > 0)
         {
            this.removeCursor(int(this.busyCursorList.pop()));
         }
      }
      
      private function showCurrentCursor() : void
      {
         var _loc1_:CursorQueueItem = null;
         var _loc2_:Event = null;
         var _loc3_:Point = null;
         var _loc4_:Event = null;
         var _loc5_:Event = null;
         var _loc6_:Event = null;
         var _loc7_:Event = null;
         if(this.cursorList.length > 0)
         {
            if(!this.mx_internal::initialized)
            {
               this.mx_internal::initialized = true;
               if(hasEventListener("initialize"))
               {
                  _loc2_ = new Event("initialize",false,true);
               }
               if(!_loc2_ || dispatchEvent(_loc2_))
               {
                  this.mx_internal::cursorHolder = new FlexSprite();
                  this.mx_internal::cursorHolder.name = "cursorHolder";
                  this.mx_internal::cursorHolder.mouseEnabled = false;
                  this.mx_internal::cursorHolder.mouseChildren = false;
                  this.mx_internal::systemManager.cursorChildren.addChild(this.mx_internal::cursorHolder);
               }
            }
            _loc1_ = this.cursorList[0];
            if(this.currentCursorID == CursorManager.NO_CURSOR)
            {
               Mouse.hide();
            }
            if(_loc1_.cursorID != this.currentCursorID)
            {
               if(this.mx_internal::cursorHolder.numChildren > 0)
               {
                  this.mx_internal::cursorHolder.removeChildAt(0);
               }
               this.currentCursor = new _loc1_.cursorClass();
               if(this.currentCursor)
               {
                  if(this.currentCursor is InteractiveObject)
                  {
                     InteractiveObject(this.currentCursor).mouseEnabled = false;
                  }
                  if(this.currentCursor is DisplayObjectContainer)
                  {
                     DisplayObjectContainer(this.currentCursor).mouseChildren = false;
                  }
                  this.mx_internal::cursorHolder.addChild(this.currentCursor);
                  this.addContextMenuHandlers();
                  if(this.mx_internal::systemManager is SystemManager)
                  {
                     _loc3_ = new Point(SystemManager(this.mx_internal::systemManager).mouseX + _loc1_.x,SystemManager(this.mx_internal::systemManager).mouseY + _loc1_.y);
                     _loc3_ = SystemManager(this.mx_internal::systemManager).localToGlobal(_loc3_);
                     _loc3_ = this.mx_internal::cursorHolder.parent.globalToLocal(_loc3_);
                     this.mx_internal::cursorHolder.x = _loc3_.x;
                     this.mx_internal::cursorHolder.y = _loc3_.y;
                  }
                  else if(this.mx_internal::systemManager is DisplayObject)
                  {
                     _loc3_ = new Point(DisplayObject(this.mx_internal::systemManager).mouseX + _loc1_.x,DisplayObject(this.mx_internal::systemManager).mouseY + _loc1_.y);
                     _loc3_ = DisplayObject(this.mx_internal::systemManager).localToGlobal(_loc3_);
                     _loc3_ = this.mx_internal::cursorHolder.parent.globalToLocal(_loc3_);
                     this.mx_internal::cursorHolder.x = DisplayObject(this.mx_internal::systemManager).mouseX + _loc1_.x;
                     this.mx_internal::cursorHolder.y = DisplayObject(this.mx_internal::systemManager).mouseY + _loc1_.y;
                  }
                  else
                  {
                     this.mx_internal::cursorHolder.x = _loc1_.x;
                     this.mx_internal::cursorHolder.y = _loc1_.y;
                  }
                  if(hasEventListener("addMouseMoveListener"))
                  {
                     _loc4_ = new Event("addMouseMoveListener",false,true);
                  }
                  if(!_loc4_ || dispatchEvent(_loc4_))
                  {
                     this.mx_internal::systemManager.stage.addEventListener(MouseEvent.MOUSE_MOVE,this.mx_internal::mouseMoveHandler,true,EventPriority.CURSOR_MANAGEMENT);
                  }
                  if(hasEventListener("addMouseOutListener"))
                  {
                     _loc5_ = new Event("addMouseOutListener",false,true);
                  }
                  if(!_loc5_ || dispatchEvent(_loc5_))
                  {
                     this.mx_internal::systemManager.stage.addEventListener(MouseEvent.MOUSE_OUT,this.mx_internal::mouseOutHandler,true,EventPriority.CURSOR_MANAGEMENT);
                  }
               }
               this.currentCursorID = _loc1_.cursorID;
               this.currentCursorXOffset = _loc1_.x;
               this.currentCursorYOffset = _loc1_.y;
            }
         }
         else
         {
            this.showCustomCursor = false;
            if(this.currentCursorID != CursorManager.NO_CURSOR)
            {
               this.currentCursorID = CursorManager.NO_CURSOR;
               this.currentCursorXOffset = 0;
               this.currentCursorYOffset = 0;
               if(hasEventListener("removeMouseMoveListener"))
               {
                  _loc6_ = new Event("removeMouseMoveListener",false,true);
               }
               if(!_loc6_ || dispatchEvent(_loc6_))
               {
                  this.mx_internal::systemManager.stage.removeEventListener(MouseEvent.MOUSE_MOVE,this.mx_internal::mouseMoveHandler,true);
               }
               if(hasEventListener("removeMouseMoveListener"))
               {
                  _loc7_ = new Event("removeMouseOutListener",false,true);
               }
               if(!_loc7_ || dispatchEvent(_loc7_))
               {
                  this.mx_internal::systemManager.stage.removeEventListener(MouseEvent.MOUSE_OUT,this.mx_internal::mouseOutHandler,true);
               }
               this.mx_internal::cursorHolder.removeChild(this.currentCursor);
               this.removeContextMenuHandlers();
            }
            Mouse.show();
         }
      }
      
      private function addContextMenuHandlers() : void
      {
         var _loc1_:InteractiveObject = null;
         var _loc2_:InteractiveObject = null;
         if(!this.listenForContextMenu)
         {
            _loc1_ = this.mx_internal::systemManager.document as InteractiveObject;
            _loc2_ = this.mx_internal::systemManager as InteractiveObject;
            if(Boolean(_loc1_) && Boolean(_loc1_.contextMenu))
            {
               _loc1_.contextMenu.addEventListener(ContextMenuEvent.MENU_SELECT,this.contextMenu_menuSelectHandler,true,EventPriority.CURSOR_MANAGEMENT);
               this.listenForContextMenu = true;
            }
            if(Boolean(_loc2_) && Boolean(_loc2_.contextMenu))
            {
               _loc2_.contextMenu.addEventListener(ContextMenuEvent.MENU_SELECT,this.contextMenu_menuSelectHandler,true,EventPriority.CURSOR_MANAGEMENT);
               this.listenForContextMenu = true;
            }
         }
      }
      
      private function removeContextMenuHandlers() : void
      {
         var _loc1_:InteractiveObject = null;
         var _loc2_:InteractiveObject = null;
         if(this.listenForContextMenu)
         {
            _loc1_ = this.mx_internal::systemManager.document as InteractiveObject;
            _loc2_ = this.mx_internal::systemManager as InteractiveObject;
            if(Boolean(_loc1_) && Boolean(_loc1_.contextMenu))
            {
               _loc1_.contextMenu.removeEventListener(ContextMenuEvent.MENU_SELECT,this.contextMenu_menuSelectHandler,true);
            }
            if(Boolean(_loc2_) && Boolean(_loc2_.contextMenu))
            {
               _loc2_.contextMenu.removeEventListener(ContextMenuEvent.MENU_SELECT,this.contextMenu_menuSelectHandler,true);
            }
            this.listenForContextMenu = false;
         }
      }
      
      public function registerToUseBusyCursor(param1:Object) : void
      {
         if(hasEventListener("registerToUseBusyCursor"))
         {
            if(!dispatchEvent(new Request("registerToUseBusyCursor",false,true,param1)))
            {
               return;
            }
         }
         if(Boolean(param1) && param1 is EventDispatcher)
         {
            param1.addEventListener(ProgressEvent.PROGRESS,this.progressHandler);
            param1.addEventListener(Event.COMPLETE,this.completeHandler);
            param1.addEventListener(IOErrorEvent.IO_ERROR,this.completeHandler);
         }
      }
      
      public function unRegisterToUseBusyCursor(param1:Object) : void
      {
         if(hasEventListener("unRegisterToUseBusyCursor"))
         {
            if(!dispatchEvent(new Request("unRegisterToUseBusyCursor",false,true,param1)))
            {
               return;
            }
         }
         if(Boolean(param1) && param1 is EventDispatcher)
         {
            param1.removeEventListener(ProgressEvent.PROGRESS,this.progressHandler);
            param1.removeEventListener(Event.COMPLETE,this.completeHandler);
            param1.removeEventListener(IOErrorEvent.IO_ERROR,this.completeHandler);
         }
      }
      
      private function contextMenu_menuSelectHandler(param1:ContextMenuEvent) : void
      {
         this.showCustomCursor = true;
         this.mx_internal::sandboxRoot.addEventListener(MouseEvent.MOUSE_OVER,this.mouseOverHandler);
      }
      
      private function mouseOverHandler(param1:MouseEvent) : void
      {
         this.mx_internal::sandboxRoot.removeEventListener(MouseEvent.MOUSE_OVER,this.mouseOverHandler);
         this.mx_internal::mouseMoveHandler(param1);
      }
      
      private function findSource(param1:Object) : int
      {
         var _loc2_:int = int(this.sourceArray.length);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            if(this.sourceArray[_loc3_] === param1)
            {
               return _loc3_;
            }
            _loc3_++;
         }
         return -1;
      }
      
      mx_internal function mouseOutHandler(param1:MouseEvent) : void
      {
         if(param1.relatedObject == null && this.cursorList.length > 0)
         {
            this.customCursorLeftStage = true;
            this.hideCursor();
            Mouse.show();
         }
      }
      
      mx_internal function mouseMoveHandler(param1:MouseEvent) : void
      {
         var _loc2_:Point = new Point(param1.stageX,param1.stageY);
         _loc2_ = this.mx_internal::cursorHolder.parent.globalToLocal(_loc2_);
         _loc2_.x += this.currentCursorXOffset;
         _loc2_.y += this.currentCursorYOffset;
         this.mx_internal::cursorHolder.x = _loc2_.x;
         this.mx_internal::cursorHolder.y = _loc2_.y;
         var _loc3_:Object = param1.target;
         var _loc4_:Boolean = _loc3_ is TextField && _loc3_.type == TextFieldType.INPUT || _loc3_ is ISystemCursorClient && ISystemCursorClient(_loc3_).showSystemCursor;
         if(!this.overTextField && _loc4_)
         {
            this.overTextField = true;
            this.showSystemCursor = true;
         }
         else if(this.overTextField && !_loc4_)
         {
            this.overTextField = false;
            this.showCustomCursor = true;
         }
         else
         {
            this.showCustomCursor = true;
         }
         if(this.showSystemCursor)
         {
            this.showSystemCursor = false;
            this.mx_internal::cursorHolder.visible = false;
            Mouse.show();
         }
         if(this.showCustomCursor)
         {
            this.showCustomCursor = false;
            this.mx_internal::cursorHolder.visible = true;
            Mouse.hide();
            if(hasEventListener("showCustomCursor"))
            {
               dispatchEvent(new Event("showCustomCursor"));
            }
         }
      }
      
      private function progressHandler(param1:ProgressEvent) : void
      {
         var _loc2_:int = this.findSource(param1.target);
         if(_loc2_ == -1)
         {
            this.sourceArray.push(param1.target);
            this.setBusyCursor();
         }
      }
      
      private function completeHandler(param1:Event) : void
      {
         var _loc2_:int = this.findSource(param1.target);
         if(_loc2_ != -1)
         {
            this.sourceArray.splice(_loc2_,1);
            this.removeBusyCursor();
         }
      }
   }
}

import mx.core.mx_internal;

use namespace mx_internal;

class CursorQueueItem
{
   
   mx_internal static const VERSION:String = "4.0.0.14159";
   
   public var cursorID:int = 0;
   
   public var cursorClass:Class = null;
   
   public var priority:int = 2;
   
   public var systemManager:ISystemManager;
   
   public var x:Number;
   
   public var y:Number;
   
   public function CursorQueueItem()
   {
      super();
   }
}
package mx.managers
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public final class CursorManagerPriority
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const HIGH:int = 1;
      
      public static const MEDIUM:int = 2;
      
      public static const LOW:int = 3;
      
      public function CursorManagerPriority()
      {
         super();
      }
   }
}

package mx.managers
{
   public interface ICursorManager
   {
      
      function get currentCursorID() : int;
      
      function set currentCursorID(param1:int) : void;
      
      function get currentCursorXOffset() : Number;
      
      function set currentCursorXOffset(param1:Number) : void;
      
      function get currentCursorYOffset() : Number;
      
      function set currentCursorYOffset(param1:Number) : void;
      
      function showCursor() : void;
      
      function hideCursor() : void;
      
      function setCursor(param1:Class, param2:int = 2, param3:Number = 0, param4:Number = 0) : int;
      
      function removeCursor(param1:int) : void;
      
      function removeAllCursors() : void;
      
      function setBusyCursor() : void;
      
      function removeBusyCursor() : void;
      
      function registerToUseBusyCursor(param1:Object) : void;
      
      function unRegisterToUseBusyCursor(param1:Object) : void;
   }
}

package mx.managers
{
   import flash.display.InteractiveObject;
   import flash.display.Sprite;
   import flash.events.IEventDispatcher;
   import mx.core.IButton;
   
   public interface IFocusManager extends IEventDispatcher
   {
      
      function get defaultButton() : IButton;
      
      function set defaultButton(param1:IButton) : void;
      
      function get defaultButtonEnabled() : Boolean;
      
      function set defaultButtonEnabled(param1:Boolean) : void;
      
      function get focusPane() : Sprite;
      
      function set focusPane(param1:Sprite) : void;
      
      function get nextTabIndex() : int;
      
      function get showFocusIndicator() : Boolean;
      
      function set showFocusIndicator(param1:Boolean) : void;
      
      function getFocus() : IFocusManagerComponent;
      
      function setFocus(param1:IFocusManagerComponent) : void;
      
      function showFocus() : void;
      
      function hideFocus() : void;
      
      function activate() : void;
      
      function deactivate() : void;
      
      function findFocusManagerComponent(param1:InteractiveObject) : IFocusManagerComponent;
      
      function getNextFocusManagerComponent(param1:Boolean = false) : IFocusManagerComponent;
   }
}

package mx.managers
{
   public interface IFocusManagerComponent
   {
      
      function get focusEnabled() : Boolean;
      
      function set focusEnabled(param1:Boolean) : void;
      
      function get hasFocusableChildren() : Boolean;
      
      function set hasFocusableChildren(param1:Boolean) : void;
      
      function get mouseFocusEnabled() : Boolean;
      
      function get tabFocusEnabled() : Boolean;
      
      function get tabIndex() : int;
      
      function set tabIndex(param1:int) : void;
      
      function setFocus() : void;
      
      function drawFocus(param1:Boolean) : void;
   }
}

package mx.managers
{
   import flash.display.DisplayObject;
   import flash.events.IEventDispatcher;
   import mx.core.IFlexDisplayObject;
   
   public interface IFocusManagerContainer extends IEventDispatcher
   {
      
      function get focusManager() : IFocusManager;
      
      function set focusManager(param1:IFocusManager) : void;
      
      function get defaultButton() : IFlexDisplayObject;
      
      function set defaultButton(param1:IFlexDisplayObject) : void;
      
      function get systemManager() : ISystemManager;
      
      function contains(param1:DisplayObject) : Boolean;
   }
}

package mx.managers
{
   import flash.events.IEventDispatcher;
   
   public interface ILayoutManager extends IEventDispatcher
   {
      
      function get usePhasedInstantiation() : Boolean;
      
      function set usePhasedInstantiation(param1:Boolean) : void;
      
      function invalidateProperties(param1:ILayoutManagerClient) : void;
      
      function invalidateSize(param1:ILayoutManagerClient) : void;
      
      function invalidateDisplayList(param1:ILayoutManagerClient) : void;
      
      function validateNow() : void;
      
      function validateClient(param1:ILayoutManagerClient, param2:Boolean = false) : void;
      
      function isInvalid() : Boolean;
   }
}

package mx.managers
{
   import flash.events.IEventDispatcher;
   
   public interface ILayoutManagerClient extends IEventDispatcher
   {
      
      function get initialized() : Boolean;
      
      function set initialized(param1:Boolean) : void;
      
      function get nestLevel() : int;
      
      function set nestLevel(param1:int) : void;
      
      function get processedDescriptors() : Boolean;
      
      function set processedDescriptors(param1:Boolean) : void;
      
      function get updateCompletePendingFlag() : Boolean;
      
      function set updateCompletePendingFlag(param1:Boolean) : void;
      
      function validateProperties() : void;
      
      function validateSize(param1:Boolean = false) : void;
      
      function validateDisplayList() : void;
   }
}

package mx.managers
{
   import flash.display.DisplayObject;
   import flash.events.Event;
   import flash.events.IEventDispatcher;
   import mx.core.ISWFBridgeGroup;
   
   public interface IMarshalSystemManager
   {
      
      function get swfBridgeGroup() : ISWFBridgeGroup;
      
      function set swfBridgeGroup(param1:ISWFBridgeGroup) : void;
      
      function addChildBridge(param1:IEventDispatcher, param2:DisplayObject) : void;
      
      function removeChildBridge(param1:IEventDispatcher) : void;
      
      function dispatchEventFromSWFBridges(param1:Event, param2:IEventDispatcher = null, param3:Boolean = false, param4:Boolean = false) : void;
      
      function useSWFBridge() : Boolean;
      
      function addChildToSandboxRoot(param1:String, param2:DisplayObject) : void;
      
      function removeChildFromSandboxRoot(param1:String, param2:DisplayObject) : void;
      
      function isDisplayObjectInABridgedApplication(param1:DisplayObject) : Boolean;
      
      function dispatchActivatedWindowEvent(param1:DisplayObject) : void;
   }
}

package mx.managers
{
   import flash.display.DisplayObject;
   import flash.display.LoaderInfo;
   import flash.display.Sprite;
   import flash.display.Stage;
   import flash.events.IEventDispatcher;
   import flash.geom.Rectangle;
   import flash.text.TextFormat;
   import mx.core.IChildList;
   import mx.core.IFlexModuleFactory;
   
   public interface ISystemManager extends IEventDispatcher, IChildList, IFlexModuleFactory
   {
      
      function get cursorChildren() : IChildList;
      
      function get document() : Object;
      
      function set document(param1:Object) : void;
      
      function get embeddedFontList() : Object;
      
      function get focusPane() : Sprite;
      
      function set focusPane(param1:Sprite) : void;
      
      function get isProxy() : Boolean;
      
      function get loaderInfo() : LoaderInfo;
      
      function get numModalWindows() : int;
      
      function set numModalWindows(param1:int) : void;
      
      function get popUpChildren() : IChildList;
      
      function get rawChildren() : IChildList;
      
      function get screen() : Rectangle;
      
      function get stage() : Stage;
      
      function get toolTipChildren() : IChildList;
      
      function get topLevelSystemManager() : ISystemManager;
      
      function getDefinitionByName(param1:String) : Object;
      
      function isTopLevel() : Boolean;
      
      function isFontFaceEmbedded(param1:TextFormat) : Boolean;
      
      function isTopLevelRoot() : Boolean;
      
      function getTopLevelRoot() : DisplayObject;
      
      function getSandboxRoot() : DisplayObject;
      
      function getVisibleApplicationRect(param1:Rectangle = null) : Rectangle;
      
      function deployMouseShields(param1:Boolean) : void;
      
      function invalidateParentSizeAndDisplayList() : void;
   }
}

package mx.managers
{
   import flash.display.DisplayObject;
   
   public interface ISystemManagerChildManager
   {
      
      function addingChild(param1:DisplayObject) : void;
      
      function childAdded(param1:DisplayObject) : void;
      
      function childRemoved(param1:DisplayObject) : void;
      
      function removingChild(param1:DisplayObject) : void;
      
      function initializeTopLevelWindow(param1:Number, param2:Number) : void;
   }
}

package mx.managers
{
   import flash.display.DisplayObject;
   import mx.core.IToolTip;
   import mx.core.IUIComponent;
   import mx.effects.IAbstractEffect;
   
   public interface IToolTipManager2
   {
      
      function get currentTarget() : DisplayObject;
      
      function set currentTarget(param1:DisplayObject) : void;
      
      function get currentToolTip() : IToolTip;
      
      function set currentToolTip(param1:IToolTip) : void;
      
      function get enabled() : Boolean;
      
      function set enabled(param1:Boolean) : void;
      
      function get hideDelay() : Number;
      
      function set hideDelay(param1:Number) : void;
      
      function get hideEffect() : IAbstractEffect;
      
      function set hideEffect(param1:IAbstractEffect) : void;
      
      function get scrubDelay() : Number;
      
      function set scrubDelay(param1:Number) : void;
      
      function get showDelay() : Number;
      
      function set showDelay(param1:Number) : void;
      
      function get showEffect() : IAbstractEffect;
      
      function set showEffect(param1:IAbstractEffect) : void;
      
      function get toolTipClass() : Class;
      
      function set toolTipClass(param1:Class) : void;
      
      function registerToolTip(param1:DisplayObject, param2:String, param3:String) : void;
      
      function registerErrorString(param1:DisplayObject, param2:String, param3:String) : void;
      
      function sizeTip(param1:IToolTip) : void;
      
      function createToolTip(param1:String, param2:Number, param3:Number, param4:String = null, param5:IUIComponent = null) : IToolTip;
      
      function destroyToolTip(param1:IToolTip) : void;
   }
}

package mx.managers
{
   import mx.core.IFlexDisplayObject;
   
   public interface IToolTipManagerClient extends IFlexDisplayObject
   {
      
      function get toolTip() : String;
      
      function set toolTip(param1:String) : void;
   }
}

package mx.managers
{
   import flash.display.Stage;
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import mx.core.UIComponentGlobals;
   import mx.core.mx_internal;
   import mx.events.DynamicEvent;
   import mx.events.FlexEvent;
   import mx.managers.layoutClasses.PriorityQueue;
   
   use namespace mx_internal;
   
   public class LayoutManager extends EventDispatcher implements ILayoutManager
   {
      
      private static var instance:LayoutManager;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var updateCompleteQueue:PriorityQueue = new PriorityQueue();
      
      private var invalidatePropertiesQueue:PriorityQueue = new PriorityQueue();
      
      private var invalidatePropertiesFlag:Boolean = false;
      
      private var invalidateClientPropertiesFlag:Boolean = false;
      
      private var invalidateSizeQueue:PriorityQueue = new PriorityQueue();
      
      private var invalidateSizeFlag:Boolean = false;
      
      private var invalidateClientSizeFlag:Boolean = false;
      
      private var invalidateDisplayListQueue:PriorityQueue = new PriorityQueue();
      
      private var invalidateDisplayListFlag:Boolean = false;
      
      private var waitedAFrame:Boolean = false;
      
      private var listenersAttached:Boolean = false;
      
      private var originalFrameRate:Number;
      
      private var targetLevel:int = 2147483647;
      
      private var systemManager:ISystemManager;
      
      private var _usePhasedInstantiation:Boolean = false;
      
      private var _usingBridge:int = -1;
      
      public function LayoutManager()
      {
         super();
         this.systemManager = SystemManagerGlobals.topLevelSystemManagers[0];
      }
      
      public static function getInstance() : LayoutManager
      {
         if(!instance)
         {
            instance = new LayoutManager();
         }
         return instance;
      }
      
      public function get usePhasedInstantiation() : Boolean
      {
         return this._usePhasedInstantiation;
      }
      
      public function set usePhasedInstantiation(param1:Boolean) : void
      {
         var stage:Stage = null;
         var value:Boolean = param1;
         if(this._usePhasedInstantiation != value)
         {
            this._usePhasedInstantiation = value;
            try
            {
               stage = this.systemManager.stage;
               if(stage)
               {
                  if(value)
                  {
                     this.originalFrameRate = stage.frameRate;
                     stage.frameRate = 1000;
                  }
                  else
                  {
                     stage.frameRate = this.originalFrameRate;
                  }
               }
            }
            catch(e:SecurityError)
            {
            }
         }
      }
      
      public function invalidateProperties(param1:ILayoutManagerClient) : void
      {
         if(!this.invalidatePropertiesFlag && Boolean(this.systemManager))
         {
            this.invalidatePropertiesFlag = true;
            if(!this.listenersAttached)
            {
               this.attachListeners(this.systemManager);
            }
         }
         if(this.targetLevel <= param1.nestLevel)
         {
            this.invalidateClientPropertiesFlag = true;
         }
         this.invalidatePropertiesQueue.addObject(param1,param1.nestLevel);
      }
      
      public function invalidateSize(param1:ILayoutManagerClient) : void
      {
         if(!this.invalidateSizeFlag && Boolean(this.systemManager))
         {
            this.invalidateSizeFlag = true;
            if(!this.listenersAttached)
            {
               this.attachListeners(this.systemManager);
            }
         }
         if(this.targetLevel <= param1.nestLevel)
         {
            this.invalidateClientSizeFlag = true;
         }
         this.invalidateSizeQueue.addObject(param1,param1.nestLevel);
      }
      
      public function invalidateDisplayList(param1:ILayoutManagerClient) : void
      {
         if(!this.invalidateDisplayListFlag && Boolean(this.systemManager))
         {
            this.invalidateDisplayListFlag = true;
            if(!this.listenersAttached)
            {
               this.attachListeners(this.systemManager);
            }
         }
         else if(!this.invalidateDisplayListFlag && !this.systemManager)
         {
         }
         this.invalidateDisplayListQueue.addObject(param1,param1.nestLevel);
      }
      
      private function validateProperties() : void
      {
         var _loc1_:ILayoutManagerClient = ILayoutManagerClient(this.invalidatePropertiesQueue.removeSmallest());
         while(_loc1_)
         {
            _loc1_.validateProperties();
            if(!_loc1_.updateCompletePendingFlag)
            {
               this.updateCompleteQueue.addObject(_loc1_,_loc1_.nestLevel);
               _loc1_.updateCompletePendingFlag = true;
            }
            _loc1_ = ILayoutManagerClient(this.invalidatePropertiesQueue.removeSmallest());
         }
         if(this.invalidatePropertiesQueue.isEmpty())
         {
            this.invalidatePropertiesFlag = false;
         }
      }
      
      private function validateSize() : void
      {
         var _loc1_:ILayoutManagerClient = ILayoutManagerClient(this.invalidateSizeQueue.removeLargest());
         while(_loc1_)
         {
            _loc1_.validateSize();
            if(!_loc1_.updateCompletePendingFlag)
            {
               this.updateCompleteQueue.addObject(_loc1_,_loc1_.nestLevel);
               _loc1_.updateCompletePendingFlag = true;
            }
            _loc1_ = ILayoutManagerClient(this.invalidateSizeQueue.removeLargest());
         }
         if(this.invalidateSizeQueue.isEmpty())
         {
            this.invalidateSizeFlag = false;
         }
      }
      
      private function validateDisplayList() : void
      {
         var _loc1_:ILayoutManagerClient = ILayoutManagerClient(this.invalidateDisplayListQueue.removeSmallest());
         while(_loc1_)
         {
            _loc1_.validateDisplayList();
            if(!_loc1_.updateCompletePendingFlag)
            {
               this.updateCompleteQueue.addObject(_loc1_,_loc1_.nestLevel);
               _loc1_.updateCompletePendingFlag = true;
            }
            _loc1_ = ILayoutManagerClient(this.invalidateDisplayListQueue.removeSmallest());
         }
         if(this.invalidateDisplayListQueue.isEmpty())
         {
            this.invalidateDisplayListFlag = false;
         }
      }
      
      private function doPhasedInstantiation() : void
      {
         var _loc1_:ILayoutManagerClient = null;
         if(this.usePhasedInstantiation)
         {
            if(this.invalidatePropertiesFlag)
            {
               this.validateProperties();
               this.systemManager.document.dispatchEvent(new Event("validatePropertiesComplete"));
            }
            else if(this.invalidateSizeFlag)
            {
               this.validateSize();
               this.systemManager.document.dispatchEvent(new Event("validateSizeComplete"));
            }
            else if(this.invalidateDisplayListFlag)
            {
               this.validateDisplayList();
               this.systemManager.document.dispatchEvent(new Event("validateDisplayListComplete"));
            }
         }
         else
         {
            if(this.invalidatePropertiesFlag)
            {
               this.validateProperties();
            }
            if(this.invalidateSizeFlag)
            {
               this.validateSize();
            }
            if(this.invalidateDisplayListFlag)
            {
               this.validateDisplayList();
            }
         }
         if(this.invalidatePropertiesFlag || this.invalidateSizeFlag || this.invalidateDisplayListFlag)
         {
            this.attachListeners(this.systemManager);
         }
         else
         {
            this.usePhasedInstantiation = false;
            this.listenersAttached = false;
            _loc1_ = ILayoutManagerClient(this.updateCompleteQueue.removeLargest());
            while(_loc1_)
            {
               if(!_loc1_.initialized && _loc1_.processedDescriptors)
               {
                  _loc1_.initialized = true;
               }
               if(_loc1_.hasEventListener(FlexEvent.UPDATE_COMPLETE))
               {
                  _loc1_.dispatchEvent(new FlexEvent(FlexEvent.UPDATE_COMPLETE));
               }
               _loc1_.updateCompletePendingFlag = false;
               _loc1_ = ILayoutManagerClient(this.updateCompleteQueue.removeLargest());
            }
            dispatchEvent(new FlexEvent(FlexEvent.UPDATE_COMPLETE));
         }
      }
      
      public function validateNow() : void
      {
         var _loc1_:int = 0;
         if(!this.usePhasedInstantiation)
         {
            _loc1_ = 0;
            while(this.listenersAttached && _loc1_++ < 100)
            {
               this.doPhasedInstantiation();
            }
         }
      }
      
      public function validateClient(param1:ILayoutManagerClient, param2:Boolean = false) : void
      {
         var _loc3_:ILayoutManagerClient = null;
         var _loc4_:int = 0;
         var _loc5_:Boolean = false;
         var _loc6_:int = this.targetLevel;
         if(this.targetLevel == int.MAX_VALUE)
         {
            this.targetLevel = param1.nestLevel;
         }
         while(!_loc5_)
         {
            _loc5_ = true;
            _loc3_ = ILayoutManagerClient(this.invalidatePropertiesQueue.removeSmallestChild(param1));
            while(_loc3_)
            {
               _loc3_.validateProperties();
               if(!_loc3_.updateCompletePendingFlag)
               {
                  this.updateCompleteQueue.addObject(_loc3_,_loc3_.nestLevel);
                  _loc3_.updateCompletePendingFlag = true;
               }
               _loc3_ = ILayoutManagerClient(this.invalidatePropertiesQueue.removeSmallestChild(param1));
            }
            if(this.invalidatePropertiesQueue.isEmpty())
            {
               this.invalidatePropertiesFlag = false;
               this.invalidateClientPropertiesFlag = false;
            }
            _loc3_ = ILayoutManagerClient(this.invalidateSizeQueue.removeLargestChild(param1));
            while(_loc3_)
            {
               _loc3_.validateSize();
               if(!_loc3_.updateCompletePendingFlag)
               {
                  this.updateCompleteQueue.addObject(_loc3_,_loc3_.nestLevel);
                  _loc3_.updateCompletePendingFlag = true;
               }
               if(this.invalidateClientPropertiesFlag)
               {
                  _loc3_ = ILayoutManagerClient(this.invalidatePropertiesQueue.removeSmallestChild(param1));
                  if(_loc3_)
                  {
                     this.invalidatePropertiesQueue.addObject(_loc3_,_loc3_.nestLevel);
                     _loc5_ = false;
                     break;
                  }
               }
               _loc3_ = ILayoutManagerClient(this.invalidateSizeQueue.removeLargestChild(param1));
            }
            if(this.invalidateSizeQueue.isEmpty())
            {
               this.invalidateSizeFlag = false;
               this.invalidateClientSizeFlag = false;
            }
            if(!param2)
            {
               _loc3_ = ILayoutManagerClient(this.invalidateDisplayListQueue.removeSmallestChild(param1));
               while(_loc3_)
               {
                  _loc3_.validateDisplayList();
                  if(!_loc3_.updateCompletePendingFlag)
                  {
                     this.updateCompleteQueue.addObject(_loc3_,_loc3_.nestLevel);
                     _loc3_.updateCompletePendingFlag = true;
                  }
                  if(this.invalidateClientPropertiesFlag)
                  {
                     _loc3_ = ILayoutManagerClient(this.invalidatePropertiesQueue.removeSmallestChild(param1));
                     if(_loc3_)
                     {
                        this.invalidatePropertiesQueue.addObject(_loc3_,_loc3_.nestLevel);
                        _loc5_ = false;
                        break;
                     }
                  }
                  if(this.invalidateClientSizeFlag)
                  {
                     _loc3_ = ILayoutManagerClient(this.invalidateSizeQueue.removeLargestChild(param1));
                     if(_loc3_)
                     {
                        this.invalidateSizeQueue.addObject(_loc3_,_loc3_.nestLevel);
                        _loc5_ = false;
                        break;
                     }
                  }
                  _loc3_ = ILayoutManagerClient(this.invalidateDisplayListQueue.removeSmallestChild(param1));
               }
               if(this.invalidateDisplayListQueue.isEmpty())
               {
                  this.invalidateDisplayListFlag = false;
               }
            }
         }
         if(_loc6_ == int.MAX_VALUE)
         {
            this.targetLevel = int.MAX_VALUE;
            if(!param2)
            {
               _loc3_ = ILayoutManagerClient(this.updateCompleteQueue.removeLargestChild(param1));
               while(_loc3_)
               {
                  if(!_loc3_.initialized)
                  {
                     _loc3_.initialized = true;
                  }
                  if(_loc3_.hasEventListener(FlexEvent.UPDATE_COMPLETE))
                  {
                     _loc3_.dispatchEvent(new FlexEvent(FlexEvent.UPDATE_COMPLETE));
                  }
                  _loc3_.updateCompletePendingFlag = false;
                  _loc3_ = ILayoutManagerClient(this.updateCompleteQueue.removeLargestChild(param1));
               }
            }
         }
      }
      
      public function isInvalid() : Boolean
      {
         return this.invalidatePropertiesFlag || this.invalidateSizeFlag || this.invalidateDisplayListFlag;
      }
      
      private function waitAFrame(param1:Event) : void
      {
         this.systemManager.removeEventListener(Event.ENTER_FRAME,this.waitAFrame);
         this.systemManager.addEventListener(Event.ENTER_FRAME,this.doPhasedInstantiationCallback);
         this.waitedAFrame = true;
      }
      
      private function attachListeners(param1:ISystemManager) : void
      {
         if(!this.waitedAFrame)
         {
            param1.addEventListener(Event.ENTER_FRAME,this.waitAFrame);
         }
         else
         {
            param1.addEventListener(Event.ENTER_FRAME,this.doPhasedInstantiationCallback);
            if(!this.usePhasedInstantiation)
            {
               if(Boolean(param1) && (param1.stage || this.usingBridge(param1)))
               {
                  param1.addEventListener(Event.RENDER,this.doPhasedInstantiationCallback);
                  if(param1.stage)
                  {
                     param1.stage.invalidate();
                  }
               }
            }
         }
         this.listenersAttached = true;
      }
      
      private function doPhasedInstantiationCallback(param1:Event) : void
      {
         var callLaterErrorEvent:DynamicEvent = null;
         var event:Event = param1;
         if(UIComponentGlobals.mx_internal::callLaterSuspendCount > 0)
         {
            return;
         }
         this.systemManager.removeEventListener(Event.ENTER_FRAME,this.doPhasedInstantiationCallback);
         this.systemManager.removeEventListener(Event.RENDER,this.doPhasedInstantiationCallback);
         if(!UIComponentGlobals.catchCallLaterExceptions)
         {
            this.doPhasedInstantiation();
         }
         else
         {
            try
            {
               this.doPhasedInstantiation();
            }
            catch(e:Error)
            {
               callLaterErrorEvent = new DynamicEvent("callLaterError");
               callLaterErrorEvent.error = e;
               callLaterErrorEvent.source = this;
               systemManager.dispatchEvent(callLaterErrorEvent);
            }
         }
      }
      
      private function usingBridge(param1:ISystemManager) : Boolean
      {
         if(this._usingBridge == 0)
         {
            return false;
         }
         if(this._usingBridge == 1)
         {
            return true;
         }
         if(!param1)
         {
            return false;
         }
         var _loc2_:Object = param1.getImplementation("mx.managers::IMarshalSystemManager");
         if(!_loc2_)
         {
            this._usingBridge = 0;
            return false;
         }
         if(_loc2_.useSWFBridge())
         {
            this._usingBridge = 1;
            return true;
         }
         this._usingBridge = 0;
         return false;
      }
   }
}

package mx.managers
{
   import flash.display.DisplayObject;
   import flash.geom.Point;
   import mx.core.IChildList;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class SystemChildrenList implements IChildList
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var owner:SystemManager;
      
      private var lowerBoundReference:QName;
      
      private var upperBoundReference:QName;
      
      public function SystemChildrenList(param1:SystemManager, param2:QName, param3:QName)
      {
         super();
         this.owner = param1;
         this.lowerBoundReference = param2;
         this.upperBoundReference = param3;
      }
      
      public function get numChildren() : int
      {
         return this.owner[this.upperBoundReference] - this.owner[this.lowerBoundReference];
      }
      
      public function addChild(param1:DisplayObject) : DisplayObject
      {
         this.owner.mx_internal::rawChildren_addChildAt(param1,this.owner[this.upperBoundReference]);
         ++this.owner[this.upperBoundReference];
         return param1;
      }
      
      public function addChildAt(param1:DisplayObject, param2:int) : DisplayObject
      {
         this.owner.mx_internal::rawChildren_addChildAt(param1,this.owner[this.lowerBoundReference] + param2);
         ++this.owner[this.upperBoundReference];
         return param1;
      }
      
      public function removeChild(param1:DisplayObject) : DisplayObject
      {
         var _loc2_:int = this.owner.mx_internal::rawChildren_getChildIndex(param1);
         if(this.owner[this.lowerBoundReference] <= _loc2_ && _loc2_ < this.owner[this.upperBoundReference])
         {
            this.owner.mx_internal::rawChildren_removeChild(param1);
            --this.owner[this.upperBoundReference];
         }
         return param1;
      }
      
      public function removeChildAt(param1:int) : DisplayObject
      {
         var _loc2_:DisplayObject = this.owner.mx_internal::rawChildren_removeChildAt(param1 + this.owner[this.lowerBoundReference]);
         --this.owner[this.upperBoundReference];
         return _loc2_;
      }
      
      public function getChildAt(param1:int) : DisplayObject
      {
         return this.owner.mx_internal::rawChildren_getChildAt(this.owner[this.lowerBoundReference] + param1);
      }
      
      public function getChildByName(param1:String) : DisplayObject
      {
         return this.owner.mx_internal::rawChildren_getChildByName(param1);
      }
      
      public function getChildIndex(param1:DisplayObject) : int
      {
         var _loc2_:int = this.owner.mx_internal::rawChildren_getChildIndex(param1);
         return int(_loc2_ - this.owner[this.lowerBoundReference]);
      }
      
      public function setChildIndex(param1:DisplayObject, param2:int) : void
      {
         this.owner.mx_internal::rawChildren_setChildIndex(param1,this.owner[this.lowerBoundReference] + param2);
      }
      
      public function getObjectsUnderPoint(param1:Point) : Array
      {
         return this.owner.mx_internal::rawChildren_getObjectsUnderPoint(param1);
      }
      
      public function contains(param1:DisplayObject) : Boolean
      {
         var _loc2_:int = 0;
         if(param1 != this.owner && this.owner.mx_internal::rawChildren_contains(param1))
         {
            while(param1.parent != this.owner)
            {
               param1 = param1.parent;
            }
            _loc2_ = this.owner.mx_internal::rawChildren_getChildIndex(param1);
            if(_loc2_ >= this.owner[this.lowerBoundReference] && _loc2_ < this.owner[this.upperBoundReference])
            {
               return true;
            }
         }
         return false;
      }
   }
}

package mx.managers
{
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.display.Graphics;
   import flash.display.Loader;
   import flash.display.LoaderInfo;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.display.Stage;
   import flash.display.StageAlign;
   import flash.display.StageScaleMode;
   import flash.events.Event;
   import flash.events.FocusEvent;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.events.TimerEvent;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.system.ApplicationDomain;
   import flash.text.Font;
   import flash.text.TextFormat;
   import flash.ui.Keyboard;
   import flash.utils.Dictionary;
   import flash.utils.Timer;
   import flash.utils.getQualifiedClassName;
   import mx.core.FlexSprite;
   import mx.core.IChildList;
   import mx.core.IFlexDisplayObject;
   import mx.core.IFlexModuleFactory;
   import mx.core.IInvalidating;
   import mx.core.IRawChildrenContainer;
   import mx.core.IUIComponent;
   import mx.core.RSLItem;
   import mx.core.Singleton;
   import mx.core.mx_internal;
   import mx.events.DynamicEvent;
   import mx.events.FlexEvent;
   import mx.events.RSLEvent;
   import mx.events.Request;
   import mx.events.SandboxMouseEvent;
   import mx.preloaders.Preloader;
   import mx.utils.LoaderUtil;
   
   use namespace mx_internal;
   
   public class SystemManager extends MovieClip implements IChildList, IFlexDisplayObject, IFlexModuleFactory, ISystemManager
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static const IDLE_THRESHOLD:Number = 1000;
      
      private static const IDLE_INTERVAL:Number = 100;
      
      mx_internal static var allSystemManagers:Dictionary = new Dictionary(true);
      
      mx_internal var topLevel:Boolean = true;
      
      private var isDispatchingResizeEvent:Boolean;
      
      mx_internal var isStageRoot:Boolean = true;
      
      mx_internal var isBootstrapRoot:Boolean = false;
      
      private var _topLevelSystemManager:ISystemManager;
      
      mx_internal var childManager:ISystemManagerChildManager;
      
      private var _stage:Stage;
      
      mx_internal var nestLevel:int = 0;
      
      mx_internal var preloader:Preloader;
      
      private var mouseCatcher:Sprite;
      
      mx_internal var topLevelWindow:IUIComponent;
      
      mx_internal var idleCounter:int = 0;
      
      private var idleTimer:Timer;
      
      private var nextFrameTimer:Timer = null;
      
      private var lastFrame:int;
      
      private var readyForKickOff:Boolean;
      
      private var _height:Number;
      
      private var _width:Number;
      
      private var _applicationIndex:int = 1;
      
      private var _cursorChildren:SystemChildrenList;
      
      private var _cursorIndex:int = 0;
      
      private var _document:Object;
      
      private var _fontList:Object = null;
      
      private var _explicitHeight:Number;
      
      private var _explicitWidth:Number;
      
      private var _focusPane:Sprite;
      
      private var _noTopMostIndex:int = 0;
      
      private var _numModalWindows:int = 0;
      
      private var _popUpChildren:SystemChildrenList;
      
      private var _rawChildren:SystemRawChildrenList;
      
      mx_internal var _screen:Rectangle;
      
      private var _toolTipChildren:SystemChildrenList;
      
      private var _toolTipIndex:int = 0;
      
      private var _topMostIndex:int = 0;
      
      mx_internal var _mouseX:*;
      
      mx_internal var _mouseY:*;
      
      private var implMap:Object = {};
      
      public function SystemManager()
      {
         super();
         if(this.stage)
         {
            this.stage.scaleMode = StageScaleMode.NO_SCALE;
            this.stage.align = StageAlign.TOP_LEFT;
         }
         if(SystemManagerGlobals.topLevelSystemManagers.length > 0 && !this.stage)
         {
            this.mx_internal::topLevel = false;
         }
         if(!this.stage)
         {
            this.mx_internal::isStageRoot = false;
         }
         if(this.mx_internal::topLevel)
         {
            SystemManagerGlobals.topLevelSystemManagers.push(this);
         }
         stop();
         if(Boolean(root) && Boolean(root.loaderInfo))
         {
            root.loaderInfo.addEventListener(Event.INIT,this.initHandler);
         }
      }
      
      public static function getSWFRoot(param1:Object) : DisplayObject
      {
         var p:* = undefined;
         var sm:ISystemManager = null;
         var domain:ApplicationDomain = null;
         var cls:Class = null;
         var object:Object = param1;
         var className:String = getQualifiedClassName(object);
         for(p in mx_internal::allSystemManagers)
         {
            sm = p as ISystemManager;
            domain = sm.loaderInfo.applicationDomain;
            try
            {
               cls = Class(domain.getDefinition(className));
               if(object is cls)
               {
                  return sm as DisplayObject;
               }
            }
            catch(e:Error)
            {
            }
         }
         return null;
      }
      
      private static function getChildListIndex(param1:IChildList, param2:Object) : int
      {
         var childList:IChildList = param1;
         var f:Object = param2;
         var index:int = -1;
         try
         {
            index = childList.getChildIndex(DisplayObject(f));
         }
         catch(e:ArgumentError)
         {
         }
         return index;
      }
      
      private function deferredNextFrame() : void
      {
         if(currentFrame + 1 > totalFrames)
         {
            return;
         }
         if(currentFrame + 1 <= framesLoaded)
         {
            nextFrame();
         }
         else
         {
            this.nextFrameTimer = new Timer(100);
            this.nextFrameTimer.addEventListener(TimerEvent.TIMER,this.nextFrameTimerHandler);
            this.nextFrameTimer.start();
         }
      }
      
      override public function get height() : Number
      {
         return this._height;
      }
      
      override public function get stage() : Stage
      {
         var _loc2_:DisplayObject = null;
         if(this._stage)
         {
            return this._stage;
         }
         var _loc1_:Stage = super.stage;
         if(_loc1_)
         {
            this._stage = _loc1_;
            return _loc1_;
         }
         if(!this.mx_internal::topLevel && Boolean(this._topLevelSystemManager))
         {
            this._stage = this._topLevelSystemManager.stage;
            return this._stage;
         }
         if(!this.mx_internal::isStageRoot && this.mx_internal::topLevel)
         {
            _loc2_ = this.getTopLevelRoot();
            if(_loc2_)
            {
               this._stage = _loc2_.stage;
               return this._stage;
            }
         }
         return null;
      }
      
      override public function get width() : Number
      {
         return this._width;
      }
      
      override public function get numChildren() : int
      {
         return this.mx_internal::noTopMostIndex - this.mx_internal::applicationIndex;
      }
      
      public function get application() : IUIComponent
      {
         return IUIComponent(this._document);
      }
      
      mx_internal function get applicationIndex() : int
      {
         return this._applicationIndex;
      }
      
      mx_internal function set applicationIndex(param1:int) : void
      {
         this._applicationIndex = param1;
      }
      
      public function get cursorChildren() : IChildList
      {
         if(!this.mx_internal::topLevel)
         {
            return this._topLevelSystemManager.cursorChildren;
         }
         if(!this._cursorChildren)
         {
            this._cursorChildren = new SystemChildrenList(this,new QName(mx_internal,"toolTipIndex"),new QName(mx_internal,"cursorIndex"));
         }
         return this._cursorChildren;
      }
      
      mx_internal function get cursorIndex() : int
      {
         return this._cursorIndex;
      }
      
      mx_internal function set cursorIndex(param1:int) : void
      {
         var _loc2_:int = param1 - this._cursorIndex;
         this._cursorIndex = param1;
      }
      
      public function get document() : Object
      {
         return this._document;
      }
      
      public function set document(param1:Object) : void
      {
         this._document = param1;
      }
      
      public function get embeddedFontList() : Object
      {
         var _loc1_:Object = null;
         var _loc2_:String = null;
         var _loc3_:Object = null;
         if(this._fontList == null)
         {
            this._fontList = {};
            _loc1_ = this.info()["fonts"];
            for(_loc2_ in _loc1_)
            {
               this._fontList[_loc2_] = _loc1_[_loc2_];
            }
            if(!this.mx_internal::topLevel && Boolean(this._topLevelSystemManager))
            {
               _loc3_ = this._topLevelSystemManager.embeddedFontList;
               for(_loc2_ in _loc3_)
               {
                  this._fontList[_loc2_] = _loc3_[_loc2_];
               }
            }
         }
         return this._fontList;
      }
      
      public function get explicitHeight() : Number
      {
         return this._explicitHeight;
      }
      
      public function set explicitHeight(param1:Number) : void
      {
         this._explicitHeight = param1;
      }
      
      public function get explicitWidth() : Number
      {
         return this._explicitWidth;
      }
      
      public function set explicitWidth(param1:Number) : void
      {
         this._explicitWidth = param1;
      }
      
      public function get focusPane() : Sprite
      {
         return this._focusPane;
      }
      
      public function set focusPane(param1:Sprite) : void
      {
         if(param1)
         {
            this.addChild(param1);
            param1.x = 0;
            param1.y = 0;
            param1.scrollRect = null;
            this._focusPane = param1;
         }
         else
         {
            this.removeChild(this._focusPane);
            this._focusPane = null;
         }
      }
      
      public function get isProxy() : Boolean
      {
         return false;
      }
      
      public function get measuredHeight() : Number
      {
         return this.mx_internal::topLevelWindow ? this.mx_internal::topLevelWindow.getExplicitOrMeasuredHeight() : loaderInfo.height;
      }
      
      public function get measuredWidth() : Number
      {
         return this.mx_internal::topLevelWindow ? this.mx_internal::topLevelWindow.getExplicitOrMeasuredWidth() : loaderInfo.width;
      }
      
      mx_internal function get noTopMostIndex() : int
      {
         return this._noTopMostIndex;
      }
      
      mx_internal function set noTopMostIndex(param1:int) : void
      {
         var _loc2_:int = param1 - this._noTopMostIndex;
         this._noTopMostIndex = param1;
         this.mx_internal::topMostIndex += _loc2_;
      }
      
      final mx_internal function get $numChildren() : int
      {
         return super.numChildren;
      }
      
      public function get numModalWindows() : int
      {
         return this._numModalWindows;
      }
      
      public function set numModalWindows(param1:int) : void
      {
         this._numModalWindows = param1;
      }
      
      public function get preloadedRSLs() : Dictionary
      {
         return null;
      }
      
      public function get preloaderBackgroundAlpha() : Number
      {
         return this.info()["backgroundAlpha"];
      }
      
      public function get preloaderBackgroundColor() : uint
      {
         var _loc1_:* = this.info()["backgroundColor"];
         if(_loc1_ == undefined)
         {
            return 4294967295;
         }
         return _loc1_;
      }
      
      public function get preloaderBackgroundImage() : Object
      {
         return this.info()["backgroundImage"];
      }
      
      public function get preloaderBackgroundSize() : String
      {
         return this.info()["backgroundSize"];
      }
      
      public function get popUpChildren() : IChildList
      {
         if(!this.mx_internal::topLevel)
         {
            return this._topLevelSystemManager.popUpChildren;
         }
         if(!this._popUpChildren)
         {
            this._popUpChildren = new SystemChildrenList(this,new QName(mx_internal,"noTopMostIndex"),new QName(mx_internal,"topMostIndex"));
         }
         return this._popUpChildren;
      }
      
      public function get rawChildren() : IChildList
      {
         if(!this._rawChildren)
         {
            this._rawChildren = new SystemRawChildrenList(this);
         }
         return this._rawChildren;
      }
      
      public function get screen() : Rectangle
      {
         if(!this.mx_internal::_screen)
         {
            this.Stage_resizeHandler();
         }
         if(!this.mx_internal::isStageRoot)
         {
            this.Stage_resizeHandler();
         }
         return this.mx_internal::_screen;
      }
      
      public function get toolTipChildren() : IChildList
      {
         if(!this.mx_internal::topLevel)
         {
            return this._topLevelSystemManager.toolTipChildren;
         }
         if(!this._toolTipChildren)
         {
            this._toolTipChildren = new SystemChildrenList(this,new QName(mx_internal,"topMostIndex"),new QName(mx_internal,"toolTipIndex"));
         }
         return this._toolTipChildren;
      }
      
      mx_internal function get toolTipIndex() : int
      {
         return this._toolTipIndex;
      }
      
      mx_internal function set toolTipIndex(param1:int) : void
      {
         var _loc2_:int = param1 - this._toolTipIndex;
         this._toolTipIndex = param1;
         this.mx_internal::cursorIndex += _loc2_;
      }
      
      public function get topLevelSystemManager() : ISystemManager
      {
         if(this.mx_internal::topLevel)
         {
            return this;
         }
         return this._topLevelSystemManager;
      }
      
      mx_internal function get topMostIndex() : int
      {
         return this._topMostIndex;
      }
      
      mx_internal function set topMostIndex(param1:int) : void
      {
         var _loc2_:int = param1 - this._topMostIndex;
         this._topMostIndex = param1;
         this.mx_internal::toolTipIndex += _loc2_;
      }
      
      final mx_internal function $addEventListener(param1:String, param2:Function, param3:Boolean = false, param4:int = 0, param5:Boolean = false) : void
      {
         super.addEventListener(param1,param2,param3,param4,param5);
      }
      
      public function get childAllowsParent() : Boolean
      {
         try
         {
            return loaderInfo.childAllowsParent;
         }
         catch(error:Error)
         {
         }
         return false;
      }
      
      public function get parentAllowsChild() : Boolean
      {
         try
         {
            return loaderInfo.parentAllowsChild;
         }
         catch(error:Error)
         {
         }
         return false;
      }
      
      override public function addEventListener(param1:String, param2:Function, param3:Boolean = false, param4:int = 0, param5:Boolean = false) : void
      {
         var request:DynamicEvent = null;
         var type:String = param1;
         var listener:Function = param2;
         var useCapture:Boolean = param3;
         var priority:int = param4;
         var useWeakReference:Boolean = param5;
         if(type == MouseEvent.MOUSE_MOVE || type == MouseEvent.MOUSE_UP || type == MouseEvent.MOUSE_DOWN || type == Event.ACTIVATE || type == Event.DEACTIVATE)
         {
            try
            {
               if(this.stage)
               {
                  this.stage.addEventListener(type,this.stageEventHandler,false,0,true);
               }
            }
            catch(error:SecurityError)
            {
            }
         }
         if(hasEventListener("addEventListener"))
         {
            request = new DynamicEvent("addEventListener",false,true);
            request.eventType = type;
            request.listener = listener;
            request.useCapture = useCapture;
            request.priority = priority;
            request.useWeakReference = useWeakReference;
            if(!dispatchEvent(request))
            {
               return;
            }
         }
         if(type == SandboxMouseEvent.MOUSE_UP_SOMEWHERE)
         {
            try
            {
               if(this.stage)
               {
                  this.stage.addEventListener(Event.MOUSE_LEAVE,this.mouseLeaveHandler,false,0,true);
               }
               else
               {
                  super.addEventListener(Event.MOUSE_LEAVE,this.mouseLeaveHandler,false,0,true);
               }
            }
            catch(error:SecurityError)
            {
               super.addEventListener(Event.MOUSE_LEAVE,mouseLeaveHandler,false,0,true);
            }
         }
         if(type == FlexEvent.RENDER || type == FlexEvent.ENTER_FRAME)
         {
            if(type == FlexEvent.RENDER)
            {
               type = Event.RENDER;
            }
            else
            {
               type = Event.ENTER_FRAME;
            }
            try
            {
               if(this.stage)
               {
                  this.stage.addEventListener(type,listener,useCapture,priority,useWeakReference);
               }
               else
               {
                  super.addEventListener(type,listener,useCapture,priority,useWeakReference);
               }
            }
            catch(error:SecurityError)
            {
               super.addEventListener(type,listener,useCapture,priority,useWeakReference);
            }
            if(Boolean(this.stage) && type == Event.RENDER)
            {
               this.stage.invalidate();
            }
            return;
         }
         if(type == FlexEvent.IDLE && !this.idleTimer)
         {
            this.idleTimer = new Timer(IDLE_INTERVAL);
            this.idleTimer.addEventListener(TimerEvent.TIMER,this.idleTimer_timerHandler);
            this.idleTimer.start();
            this.addEventListener(MouseEvent.MOUSE_MOVE,this.mouseMoveHandler,true);
            this.addEventListener(MouseEvent.MOUSE_UP,this.mouseUpHandler,true);
         }
         super.addEventListener(type,listener,useCapture,priority,useWeakReference);
      }
      
      final mx_internal function $removeEventListener(param1:String, param2:Function, param3:Boolean = false) : void
      {
         super.removeEventListener(param1,param2,param3);
      }
      
      override public function removeEventListener(param1:String, param2:Function, param3:Boolean = false) : void
      {
         var request:DynamicEvent = null;
         var type:String = param1;
         var listener:Function = param2;
         var useCapture:Boolean = param3;
         if(hasEventListener("removeEventListener"))
         {
            request = new DynamicEvent("removeEventListener",false,true);
            request.eventType = type;
            request.listener = listener;
            request.useCapture = useCapture;
            if(!dispatchEvent(request))
            {
               return;
            }
         }
         if(type == FlexEvent.RENDER || type == FlexEvent.ENTER_FRAME)
         {
            if(type == FlexEvent.RENDER)
            {
               type = Event.RENDER;
            }
            else
            {
               type = Event.ENTER_FRAME;
            }
            try
            {
               if(this.stage)
               {
                  this.stage.removeEventListener(type,listener,useCapture);
               }
            }
            catch(error:SecurityError)
            {
            }
            super.removeEventListener(type,listener,useCapture);
            return;
         }
         if(type == FlexEvent.IDLE)
         {
            super.removeEventListener(type,listener,useCapture);
            if(!hasEventListener(FlexEvent.IDLE) && Boolean(this.idleTimer))
            {
               this.idleTimer.stop();
               this.idleTimer = null;
               this.removeEventListener(MouseEvent.MOUSE_MOVE,this.mouseMoveHandler);
               this.removeEventListener(MouseEvent.MOUSE_UP,this.mouseUpHandler);
            }
         }
         else
         {
            super.removeEventListener(type,listener,useCapture);
         }
         if(type == MouseEvent.MOUSE_MOVE || type == MouseEvent.MOUSE_UP || type == MouseEvent.MOUSE_DOWN || type == Event.ACTIVATE || type == Event.DEACTIVATE)
         {
            if(!hasEventListener(type))
            {
               try
               {
                  if(this.stage)
                  {
                     this.stage.removeEventListener(type,this.stageEventHandler,false);
                  }
               }
               catch(error:SecurityError)
               {
               }
            }
         }
         if(type == SandboxMouseEvent.MOUSE_UP_SOMEWHERE)
         {
            if(!hasEventListener(SandboxMouseEvent.MOUSE_UP_SOMEWHERE))
            {
               try
               {
                  if(this.stage)
                  {
                     this.stage.removeEventListener(Event.MOUSE_LEAVE,this.mouseLeaveHandler);
                  }
               }
               catch(error:SecurityError)
               {
               }
               super.removeEventListener(Event.MOUSE_LEAVE,this.mouseLeaveHandler);
            }
         }
      }
      
      override public function addChild(param1:DisplayObject) : DisplayObject
      {
         var _loc2_:int = this.numChildren;
         if(param1.parent == this)
         {
            _loc2_--;
         }
         return this.addChildAt(param1,_loc2_);
      }
      
      override public function addChildAt(param1:DisplayObject, param2:int) : DisplayObject
      {
         ++this.mx_internal::noTopMostIndex;
         var _loc3_:DisplayObjectContainer = param1.parent;
         if(_loc3_)
         {
            _loc3_.removeChild(param1);
         }
         return this.mx_internal::rawChildren_addChildAt(param1,this.mx_internal::applicationIndex + param2);
      }
      
      final mx_internal function $addChildAt(param1:DisplayObject, param2:int) : DisplayObject
      {
         return super.addChildAt(param1,param2);
      }
      
      final mx_internal function $removeChildAt(param1:int) : DisplayObject
      {
         return super.removeChildAt(param1);
      }
      
      override public function removeChild(param1:DisplayObject) : DisplayObject
      {
         --this.mx_internal::noTopMostIndex;
         return this.mx_internal::rawChildren_removeChild(param1);
      }
      
      override public function removeChildAt(param1:int) : DisplayObject
      {
         --this.mx_internal::noTopMostIndex;
         return this.mx_internal::rawChildren_removeChildAt(this.mx_internal::applicationIndex + param1);
      }
      
      override public function getChildAt(param1:int) : DisplayObject
      {
         return super.getChildAt(this.mx_internal::applicationIndex + param1);
      }
      
      override public function getChildByName(param1:String) : DisplayObject
      {
         return super.getChildByName(param1);
      }
      
      override public function getChildIndex(param1:DisplayObject) : int
      {
         return super.getChildIndex(param1) - this.mx_internal::applicationIndex;
      }
      
      override public function setChildIndex(param1:DisplayObject, param2:int) : void
      {
         super.setChildIndex(param1,this.mx_internal::applicationIndex + param2);
      }
      
      override public function getObjectsUnderPoint(param1:Point) : Array
      {
         var _loc5_:DisplayObject = null;
         var _loc6_:Array = null;
         var _loc2_:Array = [];
         var _loc3_:int = this.mx_internal::topMostIndex;
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_)
         {
            _loc5_ = super.getChildAt(_loc4_);
            if(_loc5_ is DisplayObjectContainer)
            {
               _loc6_ = DisplayObjectContainer(_loc5_).getObjectsUnderPoint(param1);
               if(_loc6_)
               {
                  _loc2_ = _loc2_.concat(_loc6_);
               }
            }
            _loc4_++;
         }
         return _loc2_;
      }
      
      override public function contains(param1:DisplayObject) : Boolean
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         var _loc4_:DisplayObject = null;
         if(super.contains(param1))
         {
            if(param1.parent == this)
            {
               _loc2_ = super.getChildIndex(param1);
               if(_loc2_ < this.mx_internal::noTopMostIndex)
               {
                  return true;
               }
            }
            else
            {
               _loc3_ = 0;
               while(_loc3_ < this.mx_internal::noTopMostIndex)
               {
                  _loc4_ = super.getChildAt(_loc3_);
                  if(_loc4_ is IRawChildrenContainer)
                  {
                     if(IRawChildrenContainer(_loc4_).rawChildren.contains(param1))
                     {
                        return true;
                     }
                  }
                  if(_loc4_ is DisplayObjectContainer)
                  {
                     if(DisplayObjectContainer(_loc4_).contains(param1))
                     {
                        return true;
                     }
                  }
                  _loc3_++;
               }
            }
         }
         return false;
      }
      
      public function callInContext(param1:Function, param2:Object, param3:Array, param4:Boolean = true) : *
      {
         return undefined;
      }
      
      public function create(... rest) : Object
      {
         var _loc4_:String = null;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc2_:String = this.info()["mainClassName"];
         if(_loc2_ == null)
         {
            _loc4_ = loaderInfo.loaderURL;
            _loc5_ = int(_loc4_.lastIndexOf("."));
            _loc6_ = int(_loc4_.lastIndexOf("/"));
            _loc2_ = _loc4_.substring(_loc6_ + 1,_loc5_);
         }
         var _loc3_:Class = Class(this.getDefinitionByName(_loc2_));
         return _loc3_ ? new _loc3_() : null;
      }
      
      public function info() : Object
      {
         return {};
      }
      
      mx_internal function initialize() : void
      {
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc11_:String = null;
         var _loc12_:Class = null;
         var _loc13_:Object = null;
         var _loc14_:RSLItem = null;
         if(this.mx_internal::isStageRoot)
         {
            this._width = this.stage.stageWidth;
            this._height = this.stage.stageHeight;
         }
         else
         {
            this._width = loaderInfo.width;
            this._height = loaderInfo.height;
         }
         this.mx_internal::preloader = new Preloader();
         this.mx_internal::preloader.addEventListener(FlexEvent.PRELOADER_DOC_FRAME_READY,this.preloader_preloaderDocFrameReadyHandler);
         this.mx_internal::preloader.addEventListener(Event.COMPLETE,this.mx_internal::preloader_completeHandler);
         this.mx_internal::preloader.addEventListener(FlexEvent.PRELOADER_DONE,this.preloader_preloaderDoneHandler);
         this.mx_internal::preloader.addEventListener(RSLEvent.RSL_COMPLETE,this.preloader_rslCompleteHandler);
         if(!this._popUpChildren)
         {
            this._popUpChildren = new SystemChildrenList(this,new QName(mx_internal,"noTopMostIndex"),new QName(mx_internal,"topMostIndex"));
         }
         this._popUpChildren.addChild(this.mx_internal::preloader);
         var _loc1_:Array = this.info()["rsls"];
         var _loc2_:Array = this.info()["cdRsls"];
         var _loc3_:Boolean = true;
         if(this.info()["usePreloader"] != undefined)
         {
            _loc3_ = Boolean(this.info()["usePreloader"]);
         }
         var _loc4_:Class = this.info()["preloader"] as Class;
         var _loc5_:Array = [];
         if(Boolean(_loc2_) && _loc2_.length > 0)
         {
            _loc11_ = LoaderUtil.normalizeURL(this.loaderInfo);
            _loc12_ = Class(this.getDefinitionByName("mx.core::CrossDomainRSLItem"));
            _loc6_ = int(_loc2_.length);
            _loc7_ = 0;
            while(_loc7_ < _loc6_)
            {
               _loc13_ = new _loc12_(_loc2_[_loc7_]["rsls"],_loc2_[_loc7_]["policyFiles"],_loc2_[_loc7_]["digests"],_loc2_[_loc7_]["types"],_loc2_[_loc7_]["isSigned"],_loc11_,this);
               _loc5_.push(_loc13_);
               _loc7_++;
            }
         }
         if(_loc1_ != null && _loc1_.length > 0)
         {
            if(_loc11_ == null)
            {
               _loc11_ = LoaderUtil.normalizeURL(this.loaderInfo);
            }
            _loc6_ = int(_loc1_.length);
            _loc7_ = 0;
            while(_loc7_ < _loc6_)
            {
               _loc14_ = new RSLItem(_loc1_[_loc7_].url,_loc11_,this);
               _loc5_.push(_loc14_);
               _loc7_++;
            }
         }
         var _loc8_:String = loaderInfo.parameters["resourceModuleURLs"];
         var _loc9_:Array = _loc8_ ? _loc8_.split(",") : null;
         var _loc10_:ApplicationDomain = !this.mx_internal::topLevel && this.parent is Loader ? Loader(this.parent).contentLoaderInfo.applicationDomain : this.info()["currentDomain"] as ApplicationDomain;
         this.mx_internal::preloader.initialize(_loc3_,_loc4_,this.preloaderBackgroundColor,this.preloaderBackgroundAlpha,this.preloaderBackgroundImage,this.preloaderBackgroundSize,this.mx_internal::isStageRoot ? this.stage.stageWidth : loaderInfo.width,this.mx_internal::isStageRoot ? this.stage.stageHeight : loaderInfo.height,null,null,_loc5_,_loc9_,_loc10_);
      }
      
      mx_internal function rawChildren_addChild(param1:DisplayObject) : DisplayObject
      {
         this.mx_internal::childManager.addingChild(param1);
         super.addChild(param1);
         this.mx_internal::childManager.childAdded(param1);
         return param1;
      }
      
      mx_internal function rawChildren_addChildAt(param1:DisplayObject, param2:int) : DisplayObject
      {
         if(this.mx_internal::childManager)
         {
            this.mx_internal::childManager.addingChild(param1);
         }
         super.addChildAt(param1,param2);
         if(this.mx_internal::childManager)
         {
            this.mx_internal::childManager.childAdded(param1);
         }
         return param1;
      }
      
      mx_internal function rawChildren_removeChild(param1:DisplayObject) : DisplayObject
      {
         this.mx_internal::childManager.removingChild(param1);
         super.removeChild(param1);
         this.mx_internal::childManager.childRemoved(param1);
         return param1;
      }
      
      mx_internal function rawChildren_removeChildAt(param1:int) : DisplayObject
      {
         var _loc2_:DisplayObject = super.getChildAt(param1);
         this.mx_internal::childManager.removingChild(_loc2_);
         super.removeChildAt(param1);
         this.mx_internal::childManager.childRemoved(_loc2_);
         return _loc2_;
      }
      
      mx_internal function rawChildren_getChildAt(param1:int) : DisplayObject
      {
         return super.getChildAt(param1);
      }
      
      mx_internal function rawChildren_getChildByName(param1:String) : DisplayObject
      {
         return super.getChildByName(param1);
      }
      
      mx_internal function rawChildren_getChildIndex(param1:DisplayObject) : int
      {
         return super.getChildIndex(param1);
      }
      
      mx_internal function rawChildren_setChildIndex(param1:DisplayObject, param2:int) : void
      {
         super.setChildIndex(param1,param2);
      }
      
      mx_internal function rawChildren_getObjectsUnderPoint(param1:Point) : Array
      {
         return super.getObjectsUnderPoint(param1);
      }
      
      mx_internal function rawChildren_contains(param1:DisplayObject) : Boolean
      {
         return super.contains(param1);
      }
      
      public function allowDomain(... rest) : void
      {
      }
      
      public function allowInsecureDomain(... rest) : void
      {
      }
      
      public function getExplicitOrMeasuredWidth() : Number
      {
         return !isNaN(this.explicitWidth) ? this.explicitWidth : this.measuredWidth;
      }
      
      public function getExplicitOrMeasuredHeight() : Number
      {
         return !isNaN(this.explicitHeight) ? this.explicitHeight : this.measuredHeight;
      }
      
      public function move(param1:Number, param2:Number) : void
      {
      }
      
      public function setActualSize(param1:Number, param2:Number) : void
      {
         if(this.mx_internal::isStageRoot)
         {
            return;
         }
         if(this.mouseCatcher)
         {
            this.mouseCatcher.width = param1;
            this.mouseCatcher.height = param2;
         }
         if(this._width != param1 || this._height != param2)
         {
            this._width = param1;
            this._height = param2;
            dispatchEvent(new Event(Event.RESIZE));
         }
      }
      
      public function getDefinitionByName(param1:String) : Object
      {
         var _loc3_:Object = null;
         var _loc2_:ApplicationDomain = !this.mx_internal::topLevel && this.parent is Loader ? Loader(this.parent).contentLoaderInfo.applicationDomain : this.info()["currentDomain"] as ApplicationDomain;
         if(_loc2_.hasDefinition(param1))
         {
            _loc3_ = _loc2_.getDefinition(param1);
         }
         return _loc3_;
      }
      
      public function isTopLevel() : Boolean
      {
         return this.mx_internal::topLevel;
      }
      
      public function isTopLevelRoot() : Boolean
      {
         return this.mx_internal::isStageRoot || this.mx_internal::isBootstrapRoot;
      }
      
      public function isTopLevelWindow(param1:DisplayObject) : Boolean
      {
         return param1 is IUIComponent && IUIComponent(param1) == this.mx_internal::topLevelWindow;
      }
      
      public function isFontFaceEmbedded(param1:TextFormat) : Boolean
      {
         var _loc9_:Font = null;
         var _loc10_:String = null;
         var _loc2_:String = param1.font;
         var _loc3_:Boolean = Boolean(param1.bold);
         var _loc4_:Boolean = Boolean(param1.italic);
         var _loc5_:Array = Font.enumerateFonts();
         var _loc6_:int = int(_loc5_.length);
         var _loc7_:int = 0;
         while(_loc7_ < _loc6_)
         {
            _loc9_ = Font(_loc5_[_loc7_]);
            if(_loc9_.fontName == _loc2_)
            {
               _loc10_ = "regular";
               if(_loc3_ && _loc4_)
               {
                  _loc10_ = "boldItalic";
               }
               else if(_loc3_)
               {
                  _loc10_ = "bold";
               }
               else if(_loc4_)
               {
                  _loc10_ = "italic";
               }
               if(_loc9_.fontStyle == _loc10_)
               {
                  return true;
               }
            }
            _loc7_++;
         }
         if(!_loc2_ || !this.embeddedFontList || !this.embeddedFontList[_loc2_])
         {
            return false;
         }
         var _loc8_:Object = this.embeddedFontList[_loc2_];
         return !(_loc3_ && !_loc8_.bold || _loc4_ && !_loc8_.italic || !_loc3_ && !_loc4_ && !_loc8_.regular);
      }
      
      private function resizeMouseCatcher() : void
      {
         var g:Graphics = null;
         var s:Rectangle = null;
         if(this.mouseCatcher)
         {
            try
            {
               g = this.mouseCatcher.graphics;
               s = this.screen;
               g.clear();
               g.beginFill(0,0);
               g.drawRect(0,0,s.width,s.height);
               g.endFill();
            }
            catch(e:SecurityError)
            {
            }
         }
      }
      
      private function initHandler(param1:Event) : void
      {
         var docFrame:int;
         var event:Event = param1;
         if(!this.mx_internal::isStageRoot)
         {
            if(root.loaderInfo.parentAllowsChild)
            {
               try
               {
                  if(!this.parent.dispatchEvent(new Event("mx.managers.SystemManager.isBootstrapRoot",false,true)) || !root.loaderInfo.sharedEvents.hasEventListener("bridgeNewApplication"))
                  {
                     this.mx_internal::isBootstrapRoot = true;
                  }
               }
               catch(e:Error)
               {
               }
            }
         }
         mx_internal::allSystemManagers[this] = this.loaderInfo.url;
         root.loaderInfo.removeEventListener(Event.INIT,this.initHandler);
         if(!SystemManagerGlobals.info)
         {
            SystemManagerGlobals.info = this.info();
         }
         if(!SystemManagerGlobals.parameters)
         {
            SystemManagerGlobals.parameters = loaderInfo.parameters;
         }
         if(this.getSandboxRoot() == this)
         {
            this.addEventListener(KeyboardEvent.KEY_DOWN,this.keyDownHandler,true,1000);
            this.addEventListener(MouseEvent.MOUSE_WHEEL,this.mouseWheelHandler,true,1000);
         }
         if(this.isTopLevelRoot() && Boolean(this.stage))
         {
            this.stage.addEventListener(KeyboardEvent.KEY_DOWN,this.keyDownHandler,false,1000);
            this.stage.addEventListener(MouseEvent.MOUSE_WHEEL,this.mouseWheelHandler,false,1000);
         }
         docFrame = totalFrames == 1 ? 0 : 1;
         this.addEventListener(Event.ENTER_FRAME,this.docFrameListener);
         this.mx_internal::initialize();
      }
      
      private function docFrameListener(param1:Event) : void
      {
         if(currentFrame == 2)
         {
            this.removeEventListener(Event.ENTER_FRAME,this.docFrameListener);
            if(totalFrames > 2)
            {
               this.addEventListener(Event.ENTER_FRAME,this.extraFrameListener);
            }
            this.mx_internal::docFrameHandler();
         }
      }
      
      private function extraFrameListener(param1:Event) : void
      {
         if(this.lastFrame == currentFrame)
         {
            return;
         }
         this.lastFrame = currentFrame;
         if(currentFrame + 1 > totalFrames)
         {
            this.removeEventListener(Event.ENTER_FRAME,this.extraFrameListener);
         }
         this.extraFrameHandler();
      }
      
      private function preloader_preloaderDocFrameReadyHandler(param1:Event) : void
      {
         this.mx_internal::preloader.removeEventListener(FlexEvent.PRELOADER_DOC_FRAME_READY,this.preloader_preloaderDocFrameReadyHandler);
         this.deferredNextFrame();
      }
      
      private function preloader_preloaderDoneHandler(param1:Event) : void
      {
         var _loc2_:IUIComponent = this.mx_internal::topLevelWindow;
         this.mx_internal::preloader.removeEventListener(FlexEvent.PRELOADER_DONE,this.preloader_preloaderDoneHandler);
         this.mx_internal::preloader.removeEventListener(RSLEvent.RSL_COMPLETE,this.preloader_rslCompleteHandler);
         this._popUpChildren.removeChild(this.mx_internal::preloader);
         this.mx_internal::preloader = null;
         this.mouseCatcher = new FlexSprite();
         this.mouseCatcher.name = "mouseCatcher";
         ++this.mx_internal::noTopMostIndex;
         super.addChildAt(this.mouseCatcher,0);
         this.resizeMouseCatcher();
         if(!this.mx_internal::topLevel)
         {
            this.mouseCatcher.visible = false;
            mask = this.mouseCatcher;
         }
         ++this.mx_internal::noTopMostIndex;
         super.addChildAt(DisplayObject(_loc2_),1);
         _loc2_.dispatchEvent(new FlexEvent(FlexEvent.APPLICATION_COMPLETE));
         dispatchEvent(new FlexEvent(FlexEvent.APPLICATION_COMPLETE));
      }
      
      private function preloader_rslCompleteHandler(param1:RSLEvent) : void
      {
         if(param1.loaderInfo)
         {
            this.preloadedRSLs[param1.loaderInfo] = param1.url.url;
         }
      }
      
      mx_internal function docFrameHandler(param1:Event = null) : void
      {
         if(this.readyForKickOff)
         {
            this.mx_internal::kickOff();
         }
      }
      
      mx_internal function preloader_completeHandler(param1:Event) : void
      {
         this.mx_internal::preloader.removeEventListener(Event.COMPLETE,this.mx_internal::preloader_completeHandler);
         this.readyForKickOff = true;
         if(currentFrame >= 2)
         {
            this.mx_internal::kickOff();
         }
      }
      
      mx_internal function kickOff() : void
      {
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:Class = null;
         if(this.document)
         {
            return;
         }
         if(!this.isTopLevel())
         {
            SystemManagerGlobals.topLevelSystemManagers[0].dispatchEvent(new FocusEvent(FlexEvent.NEW_CHILD_APPLICATION,false,false,this));
         }
         Singleton.registerClass("mx.core::IEmbeddedFontRegistry",Class(this.getDefinitionByName("mx.core::EmbeddedFontRegistry")));
         Singleton.registerClass("mx.styles::IStyleManager",Class(this.getDefinitionByName("mx.styles::StyleManagerImpl")));
         Singleton.registerClass("mx.styles::IStyleManager2",Class(this.getDefinitionByName("mx.styles::StyleManagerImpl")));
         Singleton.registerClass("mx.managers::IBrowserManager",Class(this.getDefinitionByName("mx.managers::BrowserManagerImpl")));
         Singleton.registerClass("mx.managers::ICursorManager",Class(this.getDefinitionByName("mx.managers::CursorManagerImpl")));
         Singleton.registerClass("mx.managers::IHistoryManager",Class(this.getDefinitionByName("mx.managers::HistoryManagerImpl")));
         Singleton.registerClass("mx.managers::ILayoutManager",Class(this.getDefinitionByName("mx.managers::LayoutManager")));
         Singleton.registerClass("mx.managers::IPopUpManager",Class(this.getDefinitionByName("mx.managers::PopUpManagerImpl")));
         Singleton.registerClass("mx.managers::IToolTipManager2",Class(this.getDefinitionByName("mx.managers::ToolTipManagerImpl")));
         var _loc1_:Class = null;
         var _loc2_:Object = this.info()["useNativeDragManager"];
         var _loc3_:Boolean = _loc2_ == null ? true : String(_loc2_) == "true";
         if(_loc3_)
         {
            _loc1_ = Class(this.getDefinitionByName("mx.managers::NativeDragManagerImpl"));
         }
         if(_loc1_ == null)
         {
            _loc1_ = Class(this.getDefinitionByName("mx.managers::DragManagerImpl"));
         }
         Singleton.registerClass("mx.managers::IDragManager",_loc1_);
         Singleton.registerClass("mx.core::ITextFieldFactory",Class(this.getDefinitionByName("mx.core::TextFieldFactory")));
         var _loc4_:Array = this.info()["mixins"];
         if((Boolean(_loc4_)) && _loc4_.length > 0)
         {
            _loc5_ = int(_loc4_.length);
            _loc6_ = 0;
            while(_loc6_ < _loc5_)
            {
               _loc7_ = Class(this.getDefinitionByName(_loc4_[_loc6_]));
               _loc7_["init"](this);
               _loc6_++;
            }
         }
         _loc7_ = Singleton.getClass("mx.managers::IActiveWindowManager");
         if(_loc7_)
         {
            this.registerImplementation("mx.managers::IActiveWindowManager",new _loc7_(this));
         }
         _loc7_ = Singleton.getClass("mx.managers::IMarshalSystemManager");
         if(_loc7_)
         {
            this.registerImplementation("mx.managers::IMarshalSystemManager",new _loc7_(this));
         }
         this.initializeTopLevelWindow(null);
         this.deferredNextFrame();
      }
      
      private function keyDownHandler(param1:KeyboardEvent) : void
      {
         var _loc2_:KeyboardEvent = null;
         if(!param1.cancelable)
         {
            switch(param1.keyCode)
            {
               case Keyboard.UP:
               case Keyboard.DOWN:
               case Keyboard.PAGE_UP:
               case Keyboard.PAGE_DOWN:
               case Keyboard.HOME:
               case Keyboard.END:
               case Keyboard.LEFT:
               case Keyboard.RIGHT:
               case Keyboard.ENTER:
                  param1.stopImmediatePropagation();
                  _loc2_ = new KeyboardEvent(param1.type,param1.bubbles,true,param1.charCode,param1.keyCode,param1.keyLocation,param1.ctrlKey,param1.altKey,param1.shiftKey);
                  param1.target.dispatchEvent(_loc2_);
            }
         }
      }
      
      private function mouseWheelHandler(param1:MouseEvent) : void
      {
         var _loc2_:MouseEvent = null;
         if(!param1.cancelable)
         {
            param1.stopImmediatePropagation();
            _loc2_ = new MouseEvent(param1.type,param1.bubbles,true,param1.localX,param1.localY,param1.relatedObject,param1.ctrlKey,param1.altKey,param1.shiftKey,param1.buttonDown,param1.delta);
            param1.target.dispatchEvent(_loc2_);
         }
      }
      
      private function extraFrameHandler(param1:Event = null) : void
      {
         var _loc3_:Class = null;
         var _loc2_:Object = this.info()["frames"];
         if(Boolean(_loc2_) && Boolean(_loc2_[currentLabel]))
         {
            _loc3_ = Class(this.getDefinitionByName(_loc2_[currentLabel]));
            _loc3_["frame"](this);
         }
         this.deferredNextFrame();
      }
      
      private function nextFrameTimerHandler(param1:TimerEvent) : void
      {
         if(currentFrame + 1 <= framesLoaded)
         {
            nextFrame();
            this.nextFrameTimer.removeEventListener(TimerEvent.TIMER,this.nextFrameTimerHandler);
            this.nextFrameTimer.reset();
         }
      }
      
      private function initializeTopLevelWindow(param1:Event) : void
      {
         var _loc2_:Number = NaN;
         var _loc3_:Number = NaN;
         var _loc4_:DisplayObjectContainer = null;
         var _loc5_:ISystemManager = null;
         var _loc6_:DisplayObject = null;
         if(!this.parent && this.parentAllowsChild)
         {
            return;
         }
         if(!this.mx_internal::topLevel)
         {
            if(!this.parent)
            {
               return;
            }
            _loc4_ = this.parent.parent;
            if(!_loc4_)
            {
               return;
            }
            while(_loc4_)
            {
               if(_loc4_ is IUIComponent)
               {
                  _loc5_ = IUIComponent(_loc4_).systemManager;
                  if((Boolean(_loc5_)) && !_loc5_.isTopLevel())
                  {
                     _loc5_ = _loc5_.topLevelSystemManager;
                  }
                  this._topLevelSystemManager = _loc5_;
                  break;
               }
               _loc4_ = _loc4_.parent;
            }
         }
         if(this.isTopLevelRoot() && Boolean(this.stage))
         {
            this.stage.addEventListener(Event.RESIZE,this.Stage_resizeHandler,false,0,true);
         }
         else if(this.mx_internal::topLevel && Boolean(this.stage))
         {
            _loc6_ = this.getSandboxRoot();
            if(_loc6_ != this)
            {
               _loc6_.addEventListener(Event.RESIZE,this.Stage_resizeHandler,false,0,true);
            }
         }
         if(this.mx_internal::isStageRoot && Boolean(this.stage))
         {
            this._width = this.stage.stageWidth;
            this._height = this.stage.stageHeight;
            if(this._width == 0 && this._height == 0 && loaderInfo.width != this._width && loaderInfo.height != this._height)
            {
               this._width = loaderInfo.width;
               this._height = loaderInfo.height;
            }
            _loc2_ = this._width;
            _loc3_ = this._height;
         }
         else
         {
            _loc2_ = loaderInfo.width;
            _loc3_ = loaderInfo.height;
         }
         this.mx_internal::childManager.initializeTopLevelWindow(_loc2_,_loc3_);
      }
      
      private function appCreationCompleteHandler(param1:FlexEvent) : void
      {
         this.invalidateParentSizeAndDisplayList();
      }
      
      public function invalidateParentSizeAndDisplayList() : void
      {
         var _loc1_:DisplayObjectContainer = null;
         if(!this.mx_internal::topLevel && Boolean(this.parent))
         {
            _loc1_ = this.parent.parent;
            while(_loc1_)
            {
               if(_loc1_ is IInvalidating)
               {
                  IInvalidating(_loc1_).invalidateSize();
                  IInvalidating(_loc1_).invalidateDisplayList();
                  return;
               }
               _loc1_ = _loc1_.parent;
            }
         }
         dispatchEvent(new Event("invalidateParentSizeAndDisplayList"));
      }
      
      private function Stage_resizeHandler(param1:Event = null) : void
      {
         var w:Number;
         var h:Number;
         var align:String;
         var x:Number;
         var y:Number;
         var m:Number = NaN;
         var n:Number = NaN;
         var event:Event = param1;
         if(this.isDispatchingResizeEvent)
         {
            return;
         }
         w = 0;
         h = 0;
         try
         {
            m = loaderInfo.width;
            n = loaderInfo.height;
         }
         catch(error:Error)
         {
            if(!mx_internal::_screen)
            {
               mx_internal::_screen = new Rectangle();
            }
            return;
         }
         align = StageAlign.TOP_LEFT;
         try
         {
            if(this.stage)
            {
               w = this.stage.stageWidth;
               h = this.stage.stageHeight;
               align = this.stage.align;
            }
         }
         catch(error:SecurityError)
         {
            if(hasEventListener("getScreen"))
            {
               dispatchEvent(new Event("getScreen"));
               if(mx_internal::_screen)
               {
                  w = mx_internal::_screen.width;
                  h = mx_internal::_screen.height;
               }
            }
         }
         x = (m - w) / 2;
         y = (n - h) / 2;
         if(align == StageAlign.TOP)
         {
            y = 0;
         }
         else if(align == StageAlign.BOTTOM)
         {
            y = n - h;
         }
         else if(align == StageAlign.LEFT)
         {
            x = 0;
         }
         else if(align == StageAlign.RIGHT)
         {
            x = m - w;
         }
         else if(align == StageAlign.TOP_LEFT || align == "LT")
         {
            y = 0;
            x = 0;
         }
         else if(align == StageAlign.TOP_RIGHT)
         {
            y = 0;
            x = m - w;
         }
         else if(align == StageAlign.BOTTOM_LEFT)
         {
            y = n - h;
            x = 0;
         }
         else if(align == StageAlign.BOTTOM_RIGHT)
         {
            y = n - h;
            x = m - w;
         }
         if(!this.mx_internal::_screen)
         {
            this.mx_internal::_screen = new Rectangle();
         }
         this.mx_internal::_screen.x = x;
         this.mx_internal::_screen.y = y;
         this.mx_internal::_screen.width = w;
         this.mx_internal::_screen.height = h;
         if(this.mx_internal::isStageRoot)
         {
            this._width = this.stage.stageWidth;
            this._height = this.stage.stageHeight;
         }
         if(event)
         {
            this.resizeMouseCatcher();
            this.isDispatchingResizeEvent = true;
            dispatchEvent(event);
            this.isDispatchingResizeEvent = false;
         }
      }
      
      private function mouseMoveHandler(param1:MouseEvent) : void
      {
         this.mx_internal::idleCounter = 0;
      }
      
      private function mouseUpHandler(param1:MouseEvent) : void
      {
         this.mx_internal::idleCounter = 0;
      }
      
      private function idleTimer_timerHandler(param1:TimerEvent) : void
      {
         ++this.mx_internal::idleCounter;
         if(this.mx_internal::idleCounter * IDLE_INTERVAL > IDLE_THRESHOLD)
         {
            dispatchEvent(new FlexEvent(FlexEvent.IDLE));
         }
      }
      
      override public function get mouseX() : Number
      {
         if(this.mx_internal::_mouseX === undefined)
         {
            return super.mouseX;
         }
         return this.mx_internal::_mouseX;
      }
      
      override public function get mouseY() : Number
      {
         if(this.mx_internal::_mouseY === undefined)
         {
            return super.mouseY;
         }
         return this.mx_internal::_mouseY;
      }
      
      private function getTopLevelSystemManager(param1:DisplayObject) : ISystemManager
      {
         var _loc3_:ISystemManager = null;
         var _loc2_:DisplayObjectContainer = DisplayObjectContainer(param1.root);
         if((!_loc2_ || _loc2_ is Stage) && param1 is IUIComponent)
         {
            _loc2_ = DisplayObjectContainer(IUIComponent(param1).systemManager);
         }
         if(_loc2_ is ISystemManager)
         {
            _loc3_ = ISystemManager(_loc2_);
            if(!_loc3_.isTopLevel())
            {
               _loc3_ = _loc3_.topLevelSystemManager;
            }
         }
         return _loc3_;
      }
      
      override public function get parent() : DisplayObjectContainer
      {
         try
         {
            return super.parent;
         }
         catch(e:SecurityError)
         {
         }
         return null;
      }
      
      public function getTopLevelRoot() : DisplayObject
      {
         var sm:ISystemManager = null;
         var parent:DisplayObject = null;
         var lastParent:DisplayObject = null;
         try
         {
            sm = this;
            if(sm.topLevelSystemManager)
            {
               sm = sm.topLevelSystemManager;
            }
            parent = DisplayObject(sm).parent;
            lastParent = DisplayObject(sm);
            while(parent)
            {
               if(parent is Stage)
               {
                  return lastParent;
               }
               lastParent = parent;
               parent = parent.parent;
            }
         }
         catch(error:SecurityError)
         {
         }
         return null;
      }
      
      public function getSandboxRoot() : DisplayObject
      {
         var parent:DisplayObject = null;
         var lastParent:DisplayObject = null;
         var loader:Loader = null;
         var loaderInfo:LoaderInfo = null;
         var sm:ISystemManager = this;
         try
         {
            if(sm.topLevelSystemManager)
            {
               sm = sm.topLevelSystemManager;
            }
            parent = DisplayObject(sm).parent;
            if(parent is Stage)
            {
               return DisplayObject(sm);
            }
            if(Boolean(parent) && !parent.dispatchEvent(new Event("mx.managers.SystemManager.isBootstrapRoot",false,true)))
            {
               return this;
            }
            lastParent = this;
            while(parent)
            {
               if(parent is Stage)
               {
                  return lastParent;
               }
               if(!parent.dispatchEvent(new Event("mx.managers.SystemManager.isBootstrapRoot",false,true)))
               {
                  return lastParent;
               }
               if(parent is Loader)
               {
                  loader = Loader(parent);
                  loaderInfo = loader.contentLoaderInfo;
                  if(!loaderInfo.childAllowsParent)
                  {
                     return loaderInfo.content;
                  }
               }
               if(parent.hasEventListener("systemManagerRequest"))
               {
                  lastParent = parent;
               }
               parent = parent.parent;
            }
         }
         catch(error:Error)
         {
         }
         return lastParent != null ? lastParent : DisplayObject(sm);
      }
      
      public function registerImplementation(param1:String, param2:Object) : void
      {
         var _loc3_:Object = this.implMap[param1];
         if(!_loc3_)
         {
            this.implMap[param1] = param2;
         }
      }
      
      public function getImplementation(param1:String) : Object
      {
         return this.implMap[param1];
      }
      
      public function getVisibleApplicationRect(param1:Rectangle = null) : Rectangle
      {
         var _loc2_:Request = null;
         var _loc3_:Rectangle = null;
         var _loc4_:Point = null;
         if(hasEventListener("getVisibleApplicationRect"))
         {
            _loc2_ = new Request("getVisibleApplicationRect",false,true);
            if(!dispatchEvent(_loc2_))
            {
               return Rectangle(_loc2_.value);
            }
         }
         if(!param1)
         {
            param1 = getBounds(DisplayObject(this));
            _loc3_ = this.screen;
            _loc4_ = new Point(Math.max(0,param1.x),Math.max(0,param1.y));
            _loc4_ = localToGlobal(_loc4_);
            param1.x = _loc4_.x;
            param1.y = _loc4_.y;
            param1.width = _loc3_.width;
            param1.height = _loc3_.height;
         }
         return param1;
      }
      
      public function deployMouseShields(param1:Boolean) : void
      {
         var _loc2_:DynamicEvent = null;
         if(hasEventListener("deployMouseShields"))
         {
            _loc2_ = new DynamicEvent("deployMouseShields");
            _loc2_.deploy = param1;
            dispatchEvent(_loc2_);
         }
      }
      
      private function stageEventHandler(param1:Event) : void
      {
         if(param1.target is Stage && Boolean(this.mouseCatcher))
         {
            this.mouseCatcher.dispatchEvent(param1);
         }
      }
      
      private function mouseLeaveHandler(param1:Event) : void
      {
         dispatchEvent(new SandboxMouseEvent(SandboxMouseEvent.MOUSE_UP_SOMEWHERE));
      }
   }
}

package mx.managers
{
   public class SystemManagerGlobals
   {
      
      public static var bootstrapLoaderInfoURL:String;
      
      public static var showMouseCursor:Boolean;
      
      public static var changingListenersInOtherSystemManagers:Boolean;
      
      public static var dispatchingEventToOtherSystemManagers:Boolean;
      
      public static var info:Object;
      
      public static var parameters:Object;
      
      public static var topLevelSystemManagers:Array = [];
      
      public function SystemManagerGlobals()
      {
         super();
      }
   }
}

package mx.managers
{
   import flash.display.DisplayObject;
   import flash.geom.Point;
   import mx.core.IChildList;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class SystemRawChildrenList implements IChildList
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var owner:SystemManager;
      
      public function SystemRawChildrenList(param1:SystemManager)
      {
         super();
         this.owner = param1;
      }
      
      public function get numChildren() : int
      {
         return this.owner.mx_internal::$numChildren;
      }
      
      public function getChildAt(param1:int) : DisplayObject
      {
         return this.owner.mx_internal::rawChildren_getChildAt(param1);
      }
      
      public function addChild(param1:DisplayObject) : DisplayObject
      {
         return this.owner.mx_internal::rawChildren_addChild(param1);
      }
      
      public function addChildAt(param1:DisplayObject, param2:int) : DisplayObject
      {
         return this.owner.mx_internal::rawChildren_addChildAt(param1,param2);
      }
      
      public function removeChild(param1:DisplayObject) : DisplayObject
      {
         return this.owner.mx_internal::rawChildren_removeChild(param1);
      }
      
      public function removeChildAt(param1:int) : DisplayObject
      {
         return this.owner.mx_internal::rawChildren_removeChildAt(param1);
      }
      
      public function getChildByName(param1:String) : DisplayObject
      {
         return this.owner.mx_internal::rawChildren_getChildByName(param1);
      }
      
      public function getChildIndex(param1:DisplayObject) : int
      {
         return this.owner.mx_internal::rawChildren_getChildIndex(param1);
      }
      
      public function setChildIndex(param1:DisplayObject, param2:int) : void
      {
         this.owner.mx_internal::rawChildren_setChildIndex(param1,param2);
      }
      
      public function getObjectsUnderPoint(param1:Point) : Array
      {
         return this.owner.mx_internal::rawChildren_getObjectsUnderPoint(param1);
      }
      
      public function contains(param1:DisplayObject) : Boolean
      {
         return this.owner.mx_internal::rawChildren_contains(param1);
      }
   }
}

package mx.managers
{
   import flash.display.DisplayObject;
   import flash.events.EventDispatcher;
   import mx.core.IToolTip;
   import mx.core.IUIComponent;
   import mx.core.Singleton;
   import mx.core.mx_internal;
   import mx.effects.IAbstractEffect;
   
   use namespace mx_internal;
   
   public class ToolTipManager extends EventDispatcher
   {
      
      private static var implClassDependency:ToolTipManagerImpl;
      
      private static var _impl:IToolTipManager2;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function ToolTipManager()
      {
         super();
      }
      
      private static function get impl() : IToolTipManager2
      {
         if(!_impl)
         {
            _impl = IToolTipManager2(Singleton.getInstance("mx.managers::IToolTipManager2"));
         }
         return _impl;
      }
      
      public static function get currentTarget() : DisplayObject
      {
         return impl.currentTarget;
      }
      
      public static function set currentTarget(param1:DisplayObject) : void
      {
         impl.currentTarget = param1;
      }
      
      public static function get currentToolTip() : IToolTip
      {
         return impl.currentToolTip;
      }
      
      public static function set currentToolTip(param1:IToolTip) : void
      {
         impl.currentToolTip = param1;
      }
      
      public static function get enabled() : Boolean
      {
         return impl.enabled;
      }
      
      public static function set enabled(param1:Boolean) : void
      {
         impl.enabled = param1;
      }
      
      public static function get hideDelay() : Number
      {
         return impl.hideDelay;
      }
      
      public static function set hideDelay(param1:Number) : void
      {
         impl.hideDelay = param1;
      }
      
      public static function get hideEffect() : IAbstractEffect
      {
         return impl.hideEffect;
      }
      
      public static function set hideEffect(param1:IAbstractEffect) : void
      {
         impl.hideEffect = param1;
      }
      
      public static function get scrubDelay() : Number
      {
         return impl.scrubDelay;
      }
      
      public static function set scrubDelay(param1:Number) : void
      {
         impl.scrubDelay = param1;
      }
      
      public static function get showDelay() : Number
      {
         return impl.showDelay;
      }
      
      public static function set showDelay(param1:Number) : void
      {
         impl.showDelay = param1;
      }
      
      public static function get showEffect() : IAbstractEffect
      {
         return impl.showEffect;
      }
      
      public static function set showEffect(param1:IAbstractEffect) : void
      {
         impl.showEffect = param1;
      }
      
      public static function get toolTipClass() : Class
      {
         return impl.toolTipClass;
      }
      
      public static function set toolTipClass(param1:Class) : void
      {
         impl.toolTipClass = param1;
      }
      
      mx_internal static function registerToolTip(param1:DisplayObject, param2:String, param3:String) : void
      {
         impl.registerToolTip(param1,param2,param3);
      }
      
      mx_internal static function registerErrorString(param1:DisplayObject, param2:String, param3:String) : void
      {
         impl.registerErrorString(param1,param2,param3);
      }
      
      mx_internal static function sizeTip(param1:IToolTip) : void
      {
         impl.sizeTip(param1);
      }
      
      public static function createToolTip(param1:String, param2:Number, param3:Number, param4:String = null, param5:IUIComponent = null) : IToolTip
      {
         return impl.createToolTip(param1,param2,param3,param4,param5);
      }
      
      public static function destroyToolTip(param1:IToolTip) : void
      {
         return impl.destroyToolTip(param1);
      }
   }
}

package mx.managers
{
   import flash.display.DisplayObject;
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.events.MouseEvent;
   import flash.events.TimerEvent;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.utils.Timer;
   import mx.controls.ToolTip;
   import mx.core.FlexGlobals;
   import mx.core.IFlexModule;
   import mx.core.IInvalidating;
   import mx.core.IToolTip;
   import mx.core.IUIComponent;
   import mx.core.mx_internal;
   import mx.effects.EffectManager;
   import mx.effects.IAbstractEffect;
   import mx.events.DynamicEvent;
   import mx.events.EffectEvent;
   import mx.events.ToolTipEvent;
   import mx.styles.IStyleClient;
   import mx.validators.IValidatorListener;
   
   use namespace mx_internal;
   
   public class ToolTipManagerImpl extends EventDispatcher implements IToolTipManager2
   {
      
      private static var instance:IToolTipManager2;
      
      public static var mixins:Array;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      mx_internal var initialized:Boolean = false;
      
      mx_internal var showTimer:Timer;
      
      mx_internal var hideTimer:Timer;
      
      mx_internal var scrubTimer:Timer;
      
      mx_internal var currentText:String;
      
      mx_internal var isError:Boolean;
      
      mx_internal var previousTarget:DisplayObject;
      
      private var _currentTarget:DisplayObject;
      
      mx_internal var _currentToolTip:DisplayObject;
      
      private var _enabled:Boolean = true;
      
      private var _hideDelay:Number = 10000;
      
      private var _hideEffect:IAbstractEffect;
      
      private var _scrubDelay:Number = 100;
      
      private var _showDelay:Number = 500;
      
      private var _showEffect:IAbstractEffect;
      
      private var _toolTipClass:Class;
      
      public function ToolTipManagerImpl()
      {
         var _loc1_:int = 0;
         var _loc2_:int = 0;
         this._toolTipClass = ToolTip;
         super();
         if(instance)
         {
            throw new Error("Instance already exists.");
         }
         if(mixins)
         {
            _loc1_ = int(mixins.length);
            _loc2_ = 0;
            while(_loc2_ < _loc1_)
            {
               new mixins[_loc2_](this);
               _loc2_++;
            }
         }
         if(hasEventListener("initialize"))
         {
            dispatchEvent(new Event("initialize"));
         }
      }
      
      public static function getInstance() : IToolTipManager2
      {
         if(!instance)
         {
            instance = new ToolTipManagerImpl();
         }
         return instance;
      }
      
      public function get currentTarget() : DisplayObject
      {
         return this._currentTarget;
      }
      
      public function set currentTarget(param1:DisplayObject) : void
      {
         this._currentTarget = param1;
      }
      
      public function get currentToolTip() : IToolTip
      {
         return this.mx_internal::_currentToolTip as IToolTip;
      }
      
      public function set currentToolTip(param1:IToolTip) : void
      {
         this.mx_internal::_currentToolTip = param1 as DisplayObject;
         if(hasEventListener("currentToolTip"))
         {
            dispatchEvent(new Event("currentToolTip"));
         }
      }
      
      public function get enabled() : Boolean
      {
         return this._enabled;
      }
      
      public function set enabled(param1:Boolean) : void
      {
         this._enabled = param1;
      }
      
      public function get hideDelay() : Number
      {
         return this._hideDelay;
      }
      
      public function set hideDelay(param1:Number) : void
      {
         this._hideDelay = param1;
      }
      
      public function get hideEffect() : IAbstractEffect
      {
         return this._hideEffect;
      }
      
      public function set hideEffect(param1:IAbstractEffect) : void
      {
         this._hideEffect = param1 as IAbstractEffect;
      }
      
      public function get scrubDelay() : Number
      {
         return this._scrubDelay;
      }
      
      public function set scrubDelay(param1:Number) : void
      {
         this._scrubDelay = param1;
      }
      
      public function get showDelay() : Number
      {
         return this._showDelay;
      }
      
      public function set showDelay(param1:Number) : void
      {
         this._showDelay = param1;
      }
      
      public function get showEffect() : IAbstractEffect
      {
         return this._showEffect;
      }
      
      public function set showEffect(param1:IAbstractEffect) : void
      {
         this._showEffect = param1 as IAbstractEffect;
      }
      
      public function get toolTipClass() : Class
      {
         return this._toolTipClass;
      }
      
      public function set toolTipClass(param1:Class) : void
      {
         this._toolTipClass = param1;
      }
      
      mx_internal function initialize() : void
      {
         if(!this.mx_internal::showTimer)
         {
            this.mx_internal::showTimer = new Timer(0,1);
            this.mx_internal::showTimer.addEventListener(TimerEvent.TIMER,this.mx_internal::showTimer_timerHandler);
         }
         if(!this.mx_internal::hideTimer)
         {
            this.mx_internal::hideTimer = new Timer(0,1);
            this.mx_internal::hideTimer.addEventListener(TimerEvent.TIMER,this.mx_internal::hideTimer_timerHandler);
         }
         if(!this.mx_internal::scrubTimer)
         {
            this.mx_internal::scrubTimer = new Timer(0,1);
         }
         this.mx_internal::initialized = true;
      }
      
      public function registerToolTip(param1:DisplayObject, param2:String, param3:String) : void
      {
         if(!param2 && Boolean(param3))
         {
            param1.addEventListener(MouseEvent.MOUSE_OVER,this.mx_internal::toolTipMouseOverHandler);
            param1.addEventListener(MouseEvent.MOUSE_OUT,this.mx_internal::toolTipMouseOutHandler);
            if(this.mouseIsOver(param1))
            {
               this.showImmediately(param1);
            }
         }
         else if(Boolean(param2) && !param3)
         {
            param1.removeEventListener(MouseEvent.MOUSE_OVER,this.mx_internal::toolTipMouseOverHandler);
            param1.removeEventListener(MouseEvent.MOUSE_OUT,this.mx_internal::toolTipMouseOutHandler);
            if(this.mouseIsOver(param1))
            {
               this.hideImmediately(param1);
            }
         }
      }
      
      public function registerErrorString(param1:DisplayObject, param2:String, param3:String) : void
      {
         if(!param2 && Boolean(param3))
         {
            param1.addEventListener(MouseEvent.MOUSE_OVER,this.mx_internal::errorTipMouseOverHandler);
            param1.addEventListener(MouseEvent.MOUSE_OUT,this.mx_internal::errorTipMouseOutHandler);
            if(this.mouseIsOver(param1))
            {
               this.showImmediately(param1);
            }
         }
         else if(Boolean(param2) && !param3)
         {
            param1.removeEventListener(MouseEvent.MOUSE_OVER,this.mx_internal::errorTipMouseOverHandler);
            param1.removeEventListener(MouseEvent.MOUSE_OUT,this.mx_internal::errorTipMouseOutHandler);
            if(this.mouseIsOver(param1))
            {
               this.hideImmediately(param1);
            }
         }
      }
      
      private function mouseIsOver(param1:DisplayObject) : Boolean
      {
         if(!param1 || !param1.stage)
         {
            return false;
         }
         if(param1.stage.mouseX == 0 && param1.stage.mouseY == 0)
         {
            return false;
         }
         return param1.hitTestPoint(param1.stage.mouseX,param1.stage.mouseY,true);
      }
      
      private function showImmediately(param1:DisplayObject) : void
      {
         var _loc2_:Number = ToolTipManager.showDelay;
         ToolTipManager.showDelay = 0;
         this.mx_internal::checkIfTargetChanged(param1);
         ToolTipManager.showDelay = _loc2_;
      }
      
      private function hideImmediately(param1:DisplayObject) : void
      {
         this.mx_internal::checkIfTargetChanged(null);
      }
      
      mx_internal function checkIfTargetChanged(param1:DisplayObject) : void
      {
         if(!this.enabled)
         {
            return;
         }
         this.mx_internal::findTarget(param1);
         if(this.currentTarget != this.mx_internal::previousTarget)
         {
            this.mx_internal::targetChanged();
            this.mx_internal::previousTarget = this.currentTarget;
         }
      }
      
      mx_internal function findTarget(param1:DisplayObject) : void
      {
         while(param1)
         {
            if(param1 is IValidatorListener)
            {
               this.mx_internal::currentText = IValidatorListener(param1).errorString;
               if(this.mx_internal::currentText != null && this.mx_internal::currentText != "")
               {
                  this.currentTarget = param1;
                  this.mx_internal::isError = true;
                  return;
               }
            }
            if(param1 is IToolTipManagerClient)
            {
               this.mx_internal::currentText = IToolTipManagerClient(param1).toolTip;
               if(this.mx_internal::currentText != null)
               {
                  this.currentTarget = param1;
                  this.mx_internal::isError = false;
                  return;
               }
            }
            param1 = param1.parent;
         }
         this.mx_internal::currentText = null;
         this.currentTarget = null;
      }
      
      mx_internal function targetChanged() : void
      {
         var _loc1_:ToolTipEvent = null;
         if(!this.mx_internal::initialized)
         {
            this.mx_internal::initialize();
         }
         if(Boolean(this.mx_internal::previousTarget) && Boolean(this.currentToolTip))
         {
            if(this.currentToolTip is IToolTip)
            {
               _loc1_ = new ToolTipEvent(ToolTipEvent.TOOL_TIP_HIDE);
               _loc1_.toolTip = this.currentToolTip;
               this.mx_internal::previousTarget.dispatchEvent(_loc1_);
            }
            else if(hasEventListener(ToolTipEvent.TOOL_TIP_HIDE))
            {
               dispatchEvent(new Event(ToolTipEvent.TOOL_TIP_HIDE));
            }
         }
         this.mx_internal::reset();
         if(this.currentTarget)
         {
            if(this.mx_internal::currentText == "")
            {
               return;
            }
            _loc1_ = new ToolTipEvent(ToolTipEvent.TOOL_TIP_START);
            this.currentTarget.dispatchEvent(_loc1_);
            if(this.showDelay == 0 || this.mx_internal::scrubTimer.running)
            {
               this.mx_internal::createTip();
               this.mx_internal::initializeTip();
               this.mx_internal::positionTip();
               this.mx_internal::showTip();
            }
            else
            {
               this.mx_internal::showTimer.delay = this.showDelay;
               this.mx_internal::showTimer.start();
            }
         }
      }
      
      mx_internal function createTip() : void
      {
         var _loc1_:ToolTipEvent = new ToolTipEvent(ToolTipEvent.TOOL_TIP_CREATE);
         this.currentTarget.dispatchEvent(_loc1_);
         if(_loc1_.toolTip)
         {
            this.currentToolTip = _loc1_.toolTip;
         }
         else
         {
            this.currentToolTip = new this.toolTipClass();
         }
         this.currentToolTip.visible = false;
         if(this.currentToolTip is IFlexModule && IFlexModule(this.currentToolTip).moduleFactory == null && this.currentTarget is IFlexModule)
         {
            IFlexModule(this.currentToolTip).moduleFactory = IFlexModule(this.currentTarget).moduleFactory;
         }
         if(hasEventListener("createTip"))
         {
            if(!dispatchEvent(new Event("createTip",false,true)))
            {
               return;
            }
         }
         var _loc2_:ISystemManager = this.mx_internal::getSystemManager(this.currentTarget) as ISystemManager;
         _loc2_.topLevelSystemManager.toolTipChildren.addChild(this.currentToolTip as DisplayObject);
      }
      
      mx_internal function initializeTip() : void
      {
         if(this.currentToolTip is IToolTip)
         {
            IToolTip(this.currentToolTip).text = this.mx_internal::currentText;
         }
         if(this.mx_internal::isError && this.currentToolTip is IStyleClient)
         {
            IStyleClient(this.currentToolTip).setStyle("styleName","errorTip");
         }
         this.sizeTip(this.currentToolTip);
         if(this.currentToolTip is IStyleClient)
         {
            if(this.showEffect)
            {
               IStyleClient(this.currentToolTip).setStyle("showEffect",this.showEffect);
            }
            if(this.hideEffect)
            {
               IStyleClient(this.currentToolTip).setStyle("hideEffect",this.hideEffect);
            }
         }
         if(Boolean(this.showEffect) || Boolean(this.hideEffect))
         {
            this.currentToolTip.addEventListener(EffectEvent.EFFECT_END,this.mx_internal::effectEndHandler);
         }
      }
      
      public function sizeTip(param1:IToolTip) : void
      {
         if(param1 is IInvalidating)
         {
            IInvalidating(param1).validateNow();
         }
         param1.setActualSize(param1.getExplicitOrMeasuredWidth(),param1.getExplicitOrMeasuredHeight());
      }
      
      mx_internal function positionTip() : void
      {
         var _loc1_:Number = NaN;
         var _loc2_:Number = NaN;
         var _loc5_:Rectangle = null;
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         var _loc8_:ISystemManager = null;
         var _loc9_:Number = NaN;
         var _loc10_:Number = NaN;
         var _loc11_:Point = null;
         var _loc3_:Number = this.currentToolTip.screen.width;
         var _loc4_:Number = this.currentToolTip.screen.height;
         if(this.mx_internal::isError)
         {
            _loc5_ = this.getGlobalBounds(this.currentTarget,this.currentToolTip.root);
            _loc1_ = _loc5_.right + 4;
            _loc2_ = _loc5_.top - 1;
            if(_loc1_ + this.currentToolTip.width > _loc3_)
            {
               _loc6_ = NaN;
               _loc7_ = NaN;
               _loc1_ = _loc5_.left - 2;
               if(_loc1_ + this.currentToolTip.width + 4 > _loc3_)
               {
                  _loc6_ = _loc3_ - _loc1_ - 4;
                  _loc7_ = Number(Object(this.toolTipClass).maxWidth);
                  Object(this.toolTipClass).maxWidth = _loc6_;
                  if(this.currentToolTip is IStyleClient)
                  {
                     IStyleClient(this.currentToolTip).setStyle("borderStyle","errorTipAbove");
                  }
                  this.currentToolTip["text"] = this.currentToolTip["text"];
               }
               else
               {
                  if(this.currentToolTip is IStyleClient)
                  {
                     IStyleClient(this.currentToolTip).setStyle("borderStyle","errorTipAbove");
                  }
                  this.currentToolTip["text"] = this.currentToolTip["text"];
               }
               if(this.currentToolTip.height + 2 < _loc5_.top)
               {
                  _loc2_ = _loc5_.top - (this.currentToolTip.height + 2);
               }
               else
               {
                  _loc2_ = _loc5_.bottom + 2;
                  if(!isNaN(_loc6_))
                  {
                     Object(this.toolTipClass).maxWidth = _loc6_;
                  }
                  if(this.currentToolTip is IStyleClient)
                  {
                     IStyleClient(this.currentToolTip).setStyle("borderStyle","errorTipBelow");
                  }
                  this.currentToolTip["text"] = this.currentToolTip["text"];
               }
            }
            this.sizeTip(this.currentToolTip);
            if(!isNaN(_loc7_))
            {
               Object(this.toolTipClass).maxWidth = _loc7_;
            }
         }
         else
         {
            _loc8_ = this.mx_internal::getSystemManager(this.currentTarget);
            _loc1_ = DisplayObject(_loc8_).mouseX + 11;
            _loc2_ = DisplayObject(_loc8_).mouseY + 22;
            _loc9_ = Number(this.currentToolTip.width);
            if(_loc1_ + _loc9_ > _loc3_)
            {
               _loc1_ = _loc3_ - _loc9_;
            }
            _loc10_ = Number(this.currentToolTip.height);
            if(_loc2_ + _loc10_ > _loc4_)
            {
               _loc2_ = _loc4_ - _loc10_;
            }
            _loc11_ = new Point(_loc1_,_loc2_);
            _loc11_ = DisplayObject(_loc8_).localToGlobal(_loc11_);
            _loc11_ = DisplayObject(_loc8_.getSandboxRoot()).globalToLocal(_loc11_);
            _loc1_ = _loc11_.x;
            _loc2_ = _loc11_.y;
         }
         this.currentToolTip.move(_loc1_,_loc2_);
      }
      
      mx_internal function showTip() : void
      {
         var _loc2_:ISystemManager = null;
         var _loc1_:ToolTipEvent = new ToolTipEvent(ToolTipEvent.TOOL_TIP_SHOW);
         _loc1_.toolTip = this.currentToolTip;
         this.currentTarget.dispatchEvent(_loc1_);
         if(this.mx_internal::isError)
         {
            this.currentTarget.addEventListener(Event.CHANGE,this.mx_internal::changeHandler);
         }
         else
         {
            _loc2_ = this.mx_internal::getSystemManager(this.currentTarget);
            _loc2_.addEventListener(MouseEvent.MOUSE_DOWN,this.mx_internal::systemManager_mouseDownHandler);
         }
         this.currentToolTip.visible = true;
         if(!this.showEffect)
         {
            this.mx_internal::showEffectEnded();
         }
      }
      
      mx_internal function hideTip() : void
      {
         var _loc1_:ToolTipEvent = null;
         var _loc2_:ISystemManager = null;
         if(this.mx_internal::previousTarget)
         {
            _loc1_ = new ToolTipEvent(ToolTipEvent.TOOL_TIP_HIDE);
            _loc1_.toolTip = this.currentToolTip;
            this.mx_internal::previousTarget.dispatchEvent(_loc1_);
         }
         if(this.currentToolTip)
         {
            this.currentToolTip.visible = false;
         }
         if(this.mx_internal::isError)
         {
            if(this.currentTarget)
            {
               this.currentTarget.removeEventListener(Event.CHANGE,this.mx_internal::changeHandler);
            }
         }
         else if(this.mx_internal::previousTarget)
         {
            _loc2_ = this.mx_internal::getSystemManager(this.mx_internal::previousTarget);
            _loc2_.removeEventListener(MouseEvent.MOUSE_DOWN,this.mx_internal::systemManager_mouseDownHandler);
         }
         if(!this.hideEffect)
         {
            this.mx_internal::hideEffectEnded();
         }
      }
      
      mx_internal function reset() : void
      {
         var _loc1_:DynamicEvent = null;
         var _loc2_:ISystemManager = null;
         this.mx_internal::showTimer.reset();
         this.mx_internal::hideTimer.reset();
         if(this.currentToolTip)
         {
            if(Boolean(this.showEffect) || Boolean(this.hideEffect))
            {
               this.currentToolTip.removeEventListener(EffectEvent.EFFECT_END,this.mx_internal::effectEndHandler);
            }
            EffectManager.endEffectsForTarget(this.currentToolTip);
            if(hasEventListener("removeChild"))
            {
               _loc1_ = new DynamicEvent("removeChild",false,true);
               _loc1_.sm = this.currentToolTip.systemManager;
               _loc1_.toolTip = this.currentToolTip;
            }
            if(!_loc1_ || dispatchEvent(_loc1_))
            {
               _loc2_ = this.currentToolTip.systemManager as ISystemManager;
               _loc2_.topLevelSystemManager.toolTipChildren.removeChild(this.currentToolTip as DisplayObject);
            }
            this.currentToolTip = null;
            this.mx_internal::scrubTimer.delay = this.scrubDelay;
            this.mx_internal::scrubTimer.reset();
            if(this.scrubDelay > 0)
            {
               this.mx_internal::scrubTimer.delay = this.scrubDelay;
               this.mx_internal::scrubTimer.start();
            }
         }
      }
      
      public function createToolTip(param1:String, param2:Number, param3:Number, param4:String = null, param5:IUIComponent = null) : IToolTip
      {
         var _loc8_:DynamicEvent = null;
         var _loc6_:ToolTip = new ToolTip();
         var _loc7_:ISystemManager = param5 ? param5.systemManager as ISystemManager : FlexGlobals.topLevelApplication.systemManager as ISystemManager;
         if(param5 is IFlexModule)
         {
            _loc6_.moduleFactory = IFlexModule(param5).moduleFactory;
         }
         else
         {
            _loc6_.moduleFactory = _loc7_;
         }
         if(hasEventListener("addChild"))
         {
            _loc8_ = new DynamicEvent("addChild",false,true);
            _loc8_.sm = _loc7_;
            _loc8_.toolTip = _loc6_;
         }
         if(!_loc8_ || dispatchEvent(_loc8_))
         {
            _loc7_.topLevelSystemManager.toolTipChildren.addChild(_loc6_ as DisplayObject);
         }
         if(param4)
         {
            _loc6_.setStyle("styleName","errorTip");
            _loc6_.setStyle("borderStyle",param4);
         }
         _loc6_.text = param1;
         this.sizeTip(_loc6_);
         _loc6_.move(param2,param3);
         return _loc6_ as IToolTip;
      }
      
      public function destroyToolTip(param1:IToolTip) : void
      {
         var _loc2_:DynamicEvent = null;
         var _loc3_:ISystemManager = null;
         if(hasEventListener("removeChild"))
         {
            _loc2_ = new DynamicEvent("removeChild",false,true);
            _loc2_.sm = param1.systemManager;
            _loc2_.toolTip = param1;
         }
         if(!_loc2_ || dispatchEvent(_loc2_))
         {
            _loc3_ = param1.systemManager as ISystemManager;
            _loc3_.topLevelSystemManager.toolTipChildren.removeChild(param1 as DisplayObject);
         }
      }
      
      mx_internal function showEffectEnded() : void
      {
         var _loc1_:ToolTipEvent = null;
         if(this.hideDelay == 0)
         {
            this.mx_internal::hideTip();
         }
         else if(this.hideDelay < Infinity)
         {
            this.mx_internal::hideTimer.delay = this.hideDelay;
            this.mx_internal::hideTimer.start();
         }
         if(this.currentTarget)
         {
            _loc1_ = new ToolTipEvent(ToolTipEvent.TOOL_TIP_SHOWN);
            _loc1_.toolTip = this.currentToolTip;
            this.currentTarget.dispatchEvent(_loc1_);
         }
      }
      
      mx_internal function hideEffectEnded() : void
      {
         var _loc1_:ToolTipEvent = null;
         this.mx_internal::reset();
         if(this.mx_internal::previousTarget)
         {
            _loc1_ = new ToolTipEvent(ToolTipEvent.TOOL_TIP_END);
            _loc1_.toolTip = this.currentToolTip;
            this.mx_internal::previousTarget.dispatchEvent(_loc1_);
         }
      }
      
      mx_internal function getSystemManager(param1:DisplayObject) : ISystemManager
      {
         return param1 is IUIComponent ? IUIComponent(param1).systemManager : null;
      }
      
      private function getGlobalBounds(param1:DisplayObject, param2:DisplayObject) : Rectangle
      {
         var _loc3_:Point = new Point(0,0);
         _loc3_ = param1.localToGlobal(_loc3_);
         _loc3_ = param2.globalToLocal(_loc3_);
         return new Rectangle(_loc3_.x,_loc3_.y,param1.width,param1.height);
      }
      
      mx_internal function toolTipMouseOverHandler(param1:MouseEvent) : void
      {
         this.mx_internal::checkIfTargetChanged(DisplayObject(param1.target));
      }
      
      mx_internal function toolTipMouseOutHandler(param1:MouseEvent) : void
      {
         this.mx_internal::checkIfTargetChanged(param1.relatedObject);
      }
      
      mx_internal function errorTipMouseOverHandler(param1:MouseEvent) : void
      {
         this.mx_internal::checkIfTargetChanged(DisplayObject(param1.target));
      }
      
      mx_internal function errorTipMouseOutHandler(param1:MouseEvent) : void
      {
         this.mx_internal::checkIfTargetChanged(param1.relatedObject);
      }
      
      mx_internal function showTimer_timerHandler(param1:TimerEvent) : void
      {
         if(this.currentTarget)
         {
            this.mx_internal::createTip();
            this.mx_internal::initializeTip();
            this.mx_internal::positionTip();
            this.mx_internal::showTip();
         }
      }
      
      mx_internal function hideTimer_timerHandler(param1:TimerEvent) : void
      {
         this.mx_internal::hideTip();
      }
      
      mx_internal function effectEndHandler(param1:EffectEvent) : void
      {
         if(param1.effectInstance.effect == this.showEffect)
         {
            this.mx_internal::showEffectEnded();
         }
         else if(param1.effectInstance.effect == this.hideEffect)
         {
            this.mx_internal::hideEffectEnded();
         }
      }
      
      mx_internal function systemManager_mouseDownHandler(param1:MouseEvent) : void
      {
         this.mx_internal::reset();
      }
      
      mx_internal function changeHandler(param1:Event) : void
      {
         this.mx_internal::reset();
      }
   }
}

package mx.managers.layoutClasses
{
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.utils.Dictionary;
   import mx.core.IChildList;
   import mx.core.IRawChildrenContainer;
   import mx.core.mx_internal;
   import mx.managers.ILayoutManagerClient;
   
   use namespace mx_internal;
   
   public class PriorityQueue
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var arrayOfDictionaries:Array = [];
      
      private var minPriority:int = 0;
      
      private var maxPriority:int = -1;
      
      public var generation:int = 0;
      
      public function PriorityQueue()
      {
         super();
      }
      
      public function addObject(param1:Object, param2:int) : void
      {
         if(!this.arrayOfDictionaries[param2])
         {
            this.arrayOfDictionaries[param2] = new Object();
            this.arrayOfDictionaries[param2].length = 0;
            this.arrayOfDictionaries[param2].items = new Dictionary(false);
         }
         if(this.arrayOfDictionaries[param2].items[param1] == null)
         {
            this.arrayOfDictionaries[param2].items[param1] = true;
            ++this.arrayOfDictionaries[param2].length;
         }
         if(this.maxPriority < this.minPriority)
         {
            this.minPriority = this.maxPriority = param2;
         }
         else
         {
            if(param2 < this.minPriority)
            {
               this.minPriority = param2;
            }
            if(param2 > this.maxPriority)
            {
               this.maxPriority = param2;
            }
         }
         ++this.generation;
      }
      
      public function removeLargest() : Object
      {
         var _loc2_:Object = null;
         var _loc1_:Object = null;
         if(this.minPriority <= this.maxPriority)
         {
            while(!this.arrayOfDictionaries[this.maxPriority] || this.arrayOfDictionaries[this.maxPriority].length == 0)
            {
               --this.maxPriority;
               if(this.maxPriority < this.minPriority)
               {
                  return null;
               }
            }
            var _loc3_:int = 0;
            var _loc4_:* = this.arrayOfDictionaries[this.maxPriority].items;
            for(_loc2_ in _loc4_)
            {
               _loc1_ = _loc2_;
               this.removeChild(ILayoutManagerClient(_loc2_),this.maxPriority);
            }
            while(!this.arrayOfDictionaries[this.maxPriority] || this.arrayOfDictionaries[this.maxPriority].length == 0)
            {
               --this.maxPriority;
               if(this.maxPriority < this.minPriority)
               {
                  break;
               }
            }
         }
         return _loc1_;
      }
      
      public function removeLargestChild(param1:ILayoutManagerClient) : Object
      {
         var _loc4_:Object = null;
         var _loc2_:int = this.maxPriority;
         var _loc3_:int = param1.nestLevel;
         while(_loc3_ <= _loc2_)
         {
            if(Boolean(this.arrayOfDictionaries[_loc2_]) && this.arrayOfDictionaries[_loc2_].length > 0)
            {
               if(_loc2_ == param1.nestLevel)
               {
                  if(this.arrayOfDictionaries[_loc2_].items[param1])
                  {
                     this.removeChild(ILayoutManagerClient(param1),_loc2_);
                     return param1;
                  }
               }
               else
               {
                  for(_loc4_ in this.arrayOfDictionaries[_loc2_].items)
                  {
                     if(_loc4_ is DisplayObject && this.contains(DisplayObject(param1),DisplayObject(_loc4_)))
                     {
                        this.removeChild(ILayoutManagerClient(_loc4_),_loc2_);
                        return _loc4_;
                     }
                  }
               }
               _loc2_--;
            }
            else
            {
               if(_loc2_ == this.maxPriority)
               {
                  --this.maxPriority;
               }
               _loc2_--;
               if(_loc2_ < _loc3_)
               {
                  break;
               }
            }
         }
         return null;
      }
      
      public function removeSmallest() : Object
      {
         var _loc2_:Object = null;
         var _loc1_:Object = null;
         if(this.minPriority <= this.maxPriority)
         {
            while(!this.arrayOfDictionaries[this.minPriority] || this.arrayOfDictionaries[this.minPriority].length == 0)
            {
               ++this.minPriority;
               if(this.minPriority > this.maxPriority)
               {
                  return null;
               }
            }
            var _loc3_:int = 0;
            var _loc4_:* = this.arrayOfDictionaries[this.minPriority].items;
            for(_loc2_ in _loc4_)
            {
               _loc1_ = _loc2_;
               this.removeChild(ILayoutManagerClient(_loc2_),this.minPriority);
            }
            while(!this.arrayOfDictionaries[this.minPriority] || this.arrayOfDictionaries[this.minPriority].length == 0)
            {
               ++this.minPriority;
               if(this.minPriority > this.maxPriority)
               {
                  break;
               }
            }
         }
         return _loc1_;
      }
      
      public function removeSmallestChild(param1:ILayoutManagerClient) : Object
      {
         var _loc3_:Object = null;
         var _loc2_:int = param1.nestLevel;
         while(_loc2_ <= this.maxPriority)
         {
            if(Boolean(this.arrayOfDictionaries[_loc2_]) && this.arrayOfDictionaries[_loc2_].length > 0)
            {
               if(_loc2_ == param1.nestLevel)
               {
                  if(this.arrayOfDictionaries[_loc2_].items[param1])
                  {
                     this.removeChild(ILayoutManagerClient(param1),_loc2_);
                     return param1;
                  }
               }
               else
               {
                  for(_loc3_ in this.arrayOfDictionaries[_loc2_].items)
                  {
                     if(_loc3_ is DisplayObject && this.contains(DisplayObject(param1),DisplayObject(_loc3_)))
                     {
                        this.removeChild(ILayoutManagerClient(_loc3_),_loc2_);
                        return _loc3_;
                     }
                  }
               }
               _loc2_++;
            }
            else
            {
               if(_loc2_ == this.minPriority)
               {
                  ++this.minPriority;
               }
               if(++_loc2_ > this.maxPriority)
               {
                  break;
               }
            }
         }
         return null;
      }
      
      public function removeChild(param1:ILayoutManagerClient, param2:int = -1) : Object
      {
         var _loc3_:int = param2 >= 0 ? param2 : param1.nestLevel;
         if(Boolean(this.arrayOfDictionaries[_loc3_]) && this.arrayOfDictionaries[_loc3_].items[param1] != null)
         {
            delete this.arrayOfDictionaries[_loc3_].items[param1];
            --this.arrayOfDictionaries[_loc3_].length;
            ++this.generation;
            return param1;
         }
         return null;
      }
      
      public function removeAll() : void
      {
         this.arrayOfDictionaries.splice(0);
         this.minPriority = 0;
         this.maxPriority = -1;
         this.generation += 1;
      }
      
      public function isEmpty() : Boolean
      {
         return this.minPriority > this.maxPriority;
      }
      
      private function contains(param1:DisplayObject, param2:DisplayObject) : Boolean
      {
         var _loc3_:IChildList = null;
         if(param1 is IRawChildrenContainer)
         {
            _loc3_ = IRawChildrenContainer(param1).rawChildren;
            return _loc3_.contains(param2);
         }
         if(param1 is DisplayObjectContainer)
         {
            return DisplayObjectContainer(param1).contains(param2);
         }
         return param1 == param2;
      }
   }
}

package mx.modules
{
   public interface IModule
   {
      
      
   }
}

package mx.modules
{
   import flash.events.IEventDispatcher;
   import flash.system.ApplicationDomain;
   import flash.system.SecurityDomain;
   import flash.utils.ByteArray;
   import mx.core.IFlexModuleFactory;
   
   public interface IModuleInfo extends IEventDispatcher
   {
      
      function get data() : Object;
      
      function set data(param1:Object) : void;
      
      function get error() : Boolean;
      
      function get factory() : IFlexModuleFactory;
      
      function get loaded() : Boolean;
      
      function get ready() : Boolean;
      
      function get setup() : Boolean;
      
      function get url() : String;
      
      function load(param1:ApplicationDomain = null, param2:SecurityDomain = null, param3:ByteArray = null, param4:IFlexModuleFactory = null) : void;
      
      function release() : void;
      
      function unload() : void;
      
      function publish(param1:IFlexModuleFactory) : void;
   }
}

package mx.modules
{
   import mx.core.IFlexModuleFactory;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class ModuleManager
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function ModuleManager()
      {
         super();
      }
      
      public static function getModule(param1:String) : IModuleInfo
      {
         return getSingleton().getModule(param1);
      }
      
      public static function getAssociatedFactory(param1:Object) : IFlexModuleFactory
      {
         return getSingleton().getAssociatedFactory(param1);
      }
      
      private static function getSingleton() : Object
      {
         if(!ModuleManagerGlobals.managerSingleton)
         {
            ModuleManagerGlobals.managerSingleton = new ModuleManagerImpl();
         }
         return ModuleManagerGlobals.managerSingleton;
      }
   }
}

import flash.display.Loader;
import flash.events.ErrorEvent;
import flash.events.Event;
import flash.events.EventDispatcher;
import flash.events.IOErrorEvent;
import flash.events.ProgressEvent;
import flash.events.SecurityErrorEvent;
import flash.net.URLRequest;
import flash.system.ApplicationDomain;
import flash.system.LoaderContext;
import flash.system.Security;
import flash.system.SecurityDomain;
import flash.utils.ByteArray;
import flash.utils.Dictionary;
import flash.utils.getQualifiedClassName;
import mx.core.IFlexModuleFactory;
import mx.events.ModuleEvent;
import mx.events.Request;

class ModuleManagerImpl extends EventDispatcher
{
   
   private var moduleList:Object = {};
   
   public function ModuleManagerImpl()
   {
      super();
   }
   
   public function getAssociatedFactory(param1:Object) : IFlexModuleFactory
   {
      var m:Object = null;
      var info:ModuleInfo = null;
      var domain:ApplicationDomain = null;
      var cls:Class = null;
      var object:Object = param1;
      var className:String = getQualifiedClassName(object);
      for each(m in this.moduleList)
      {
         info = m as ModuleInfo;
         if(info.ready)
         {
            domain = info.applicationDomain;
            try
            {
               cls = Class(domain.getDefinition(className));
               if(object is cls)
               {
                  return info.factory;
               }
            }
            catch(error:Error)
            {
            }
         }
      }
      return null;
   }
   
   public function getModule(param1:String) : IModuleInfo
   {
      var _loc2_:ModuleInfo = this.moduleList[param1] as ModuleInfo;
      if(!_loc2_)
      {
         _loc2_ = new ModuleInfo(param1);
         this.moduleList[param1] = _loc2_;
      }
      return new ModuleInfoProxy(_loc2_);
   }
}

class ModuleInfo extends EventDispatcher
{
   
   private var factoryInfo:FactoryInfo;
   
   private var limbo:Dictionary;
   
   private var loader:Loader;
   
   private var numReferences:int = 0;
   
   private var parentModuleFactory:IFlexModuleFactory;
   
   private var _error:Boolean = false;
   
   private var _loaded:Boolean = false;
   
   private var _ready:Boolean = false;
   
   private var _setup:Boolean = false;
   
   private var _url:String;
   
   public function ModuleInfo(param1:String)
   {
      super();
      this._url = param1;
   }
   
   public function get applicationDomain() : ApplicationDomain
   {
      return !this.limbo && Boolean(this.factoryInfo) ? this.factoryInfo.applicationDomain : null;
   }
   
   public function get error() : Boolean
   {
      return !this.limbo ? Boolean(this._error) : false;
   }
   
   public function get factory() : IFlexModuleFactory
   {
      return !this.limbo && Boolean(this.factoryInfo) ? this.factoryInfo.factory : null;
   }
   
   public function get loaded() : Boolean
   {
      return !this.limbo ? Boolean(this._loaded) : false;
   }
   
   public function get ready() : Boolean
   {
      return !this.limbo ? Boolean(this._ready) : false;
   }
   
   public function get setup() : Boolean
   {
      return !this.limbo ? Boolean(this._setup) : false;
   }
   
   public function get size() : int
   {
      return !this.limbo && Boolean(this.factoryInfo) ? int(this.factoryInfo.bytesTotal) : 0;
   }
   
   public function get url() : String
   {
      return this._url;
   }
   
   public function load(param1:ApplicationDomain = null, param2:SecurityDomain = null, param3:ByteArray = null, param4:IFlexModuleFactory = null) : void
   {
      if(this._loaded)
      {
         return;
      }
      this._loaded = true;
      this.limbo = null;
      this.parentModuleFactory = param4;
      if(param3)
      {
         this.loadBytes(param1,param3);
         return;
      }
      if(this._url.indexOf("published://") == 0)
      {
         return;
      }
      var _loc5_:URLRequest = new URLRequest(this._url);
      var _loc6_:LoaderContext = new LoaderContext();
      _loc6_.applicationDomain = param1 ? param1 : new ApplicationDomain(ApplicationDomain.currentDomain);
      _loc6_.securityDomain = param2;
      if(param2 == null && Security.sandboxType == Security.REMOTE)
      {
         _loc6_.securityDomain = SecurityDomain.currentDomain;
      }
      this.loader = new Loader();
      this.loader.contentLoaderInfo.addEventListener(Event.INIT,this.initHandler);
      this.loader.contentLoaderInfo.addEventListener(Event.COMPLETE,this.completeHandler);
      this.loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS,this.progressHandler);
      this.loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR,this.errorHandler);
      this.loader.contentLoaderInfo.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.errorHandler);
      this.loader.load(_loc5_,_loc6_);
   }
   
   private function loadBytes(param1:ApplicationDomain, param2:ByteArray) : void
   {
      var _loc3_:LoaderContext = new LoaderContext();
      _loc3_.applicationDomain = param1 ? param1 : new ApplicationDomain(ApplicationDomain.currentDomain);
      if("allowLoadBytesCodeExecution" in _loc3_)
      {
         _loc3_["allowLoadBytesCodeExecution"] = true;
      }
      this.loader = new Loader();
      this.loader.contentLoaderInfo.addEventListener(Event.INIT,this.initHandler);
      this.loader.contentLoaderInfo.addEventListener(Event.COMPLETE,this.completeHandler);
      this.loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR,this.errorHandler);
      this.loader.contentLoaderInfo.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.errorHandler);
      this.loader.loadBytes(param2,_loc3_);
   }
   
   public function resurrect() : void
   {
      var _loc1_:Object = null;
      if(!this._ready)
      {
         return;
      }
      if(!this.factoryInfo && Boolean(this.limbo))
      {
         var _loc2_:int = 0;
         var _loc3_:* = this.limbo;
         for(_loc1_ in _loc3_)
         {
            this.factoryInfo = _loc1_ as FactoryInfo;
         }
         this.limbo = null;
      }
      if(!this.factoryInfo)
      {
         if(this._loaded)
         {
            dispatchEvent(new ModuleEvent(ModuleEvent.UNLOAD));
         }
         this.loader = null;
         this._loaded = false;
         this._setup = false;
         this._ready = false;
         this._error = false;
      }
   }
   
   public function release() : void
   {
      if(Boolean(this._ready) && !this.limbo)
      {
         this.limbo = new Dictionary(true);
         this.limbo[this.factoryInfo] = 1;
         this.factoryInfo = null;
      }
      else
      {
         this.unload();
      }
   }
   
   private function clearLoader() : void
   {
      if(this.loader)
      {
         if(this.loader.contentLoaderInfo)
         {
            this.loader.contentLoaderInfo.removeEventListener(Event.INIT,this.initHandler);
            this.loader.contentLoaderInfo.removeEventListener(Event.COMPLETE,this.completeHandler);
            this.loader.contentLoaderInfo.removeEventListener(ProgressEvent.PROGRESS,this.progressHandler);
            this.loader.contentLoaderInfo.removeEventListener(IOErrorEvent.IO_ERROR,this.errorHandler);
            this.loader.contentLoaderInfo.removeEventListener(SecurityErrorEvent.SECURITY_ERROR,this.errorHandler);
         }
         try
         {
            if(this.loader.content)
            {
               this.loader.content.removeEventListener("ready",this.readyHandler);
               this.loader.content.removeEventListener("error",this.moduleErrorHandler);
               this.loader.content.removeEventListener(Request.GET_PARENT_FLEX_MODULE_FACTORY_REQUEST,this.getFlexModuleFactoryRequestHandler);
            }
         }
         catch(error:Error)
         {
         }
         if(this._loaded)
         {
            try
            {
               this.loader.close();
            }
            catch(error:Error)
            {
            }
         }
         try
         {
            this.loader.unload();
         }
         catch(error:Error)
         {
         }
         this.loader = null;
      }
   }
   
   public function unload() : void
   {
      this.clearLoader();
      if(this._loaded)
      {
         dispatchEvent(new ModuleEvent(ModuleEvent.UNLOAD));
      }
      this.limbo = null;
      this.factoryInfo = null;
      this.parentModuleFactory = null;
      this._loaded = false;
      this._setup = false;
      this._ready = false;
      this._error = false;
   }
   
   public function publish(param1:IFlexModuleFactory) : void
   {
      if(this.factoryInfo)
      {
         return;
      }
      if(this._url.indexOf("published://") != 0)
      {
         return;
      }
      this.factoryInfo = new FactoryInfo();
      this.factoryInfo.factory = param1;
      this._loaded = true;
      this._setup = true;
      this._ready = true;
      this._error = false;
      dispatchEvent(new ModuleEvent(ModuleEvent.SETUP));
      dispatchEvent(new ModuleEvent(ModuleEvent.PROGRESS));
      dispatchEvent(new ModuleEvent(ModuleEvent.READY));
   }
   
   public function addReference() : void
   {
      ++this.numReferences;
   }
   
   public function removeReference() : void
   {
      --this.numReferences;
      if(this.numReferences == 0)
      {
         this.release();
      }
   }
   
   public function initHandler(param1:Event) : void
   {
      var moduleEvent:ModuleEvent = null;
      var event:Event = param1;
      this.factoryInfo = new FactoryInfo();
      try
      {
         this.factoryInfo.factory = this.loader.content as IFlexModuleFactory;
      }
      catch(error:Error)
      {
      }
      if(!this.factoryInfo.factory)
      {
         moduleEvent = new ModuleEvent(ModuleEvent.ERROR,event.bubbles,event.cancelable);
         moduleEvent.bytesLoaded = 0;
         moduleEvent.bytesTotal = 0;
         moduleEvent.errorText = "SWF is not a loadable module";
         dispatchEvent(moduleEvent);
         return;
      }
      this.loader.content.addEventListener("ready",this.readyHandler);
      this.loader.content.addEventListener("error",this.moduleErrorHandler);
      this.loader.content.addEventListener(Request.GET_PARENT_FLEX_MODULE_FACTORY_REQUEST,this.getFlexModuleFactoryRequestHandler);
      try
      {
         this.factoryInfo.applicationDomain = this.loader.contentLoaderInfo.applicationDomain;
      }
      catch(error:Error)
      {
      }
      this._setup = true;
      dispatchEvent(new ModuleEvent(ModuleEvent.SETUP));
   }
   
   public function progressHandler(param1:ProgressEvent) : void
   {
      var _loc2_:ModuleEvent = new ModuleEvent(ModuleEvent.PROGRESS,param1.bubbles,param1.cancelable);
      _loc2_.bytesLoaded = param1.bytesLoaded;
      _loc2_.bytesTotal = param1.bytesTotal;
      dispatchEvent(_loc2_);
   }
   
   public function completeHandler(param1:Event) : void
   {
      var _loc2_:ModuleEvent = new ModuleEvent(ModuleEvent.PROGRESS,param1.bubbles,param1.cancelable);
      _loc2_.bytesLoaded = this.loader.contentLoaderInfo.bytesLoaded;
      _loc2_.bytesTotal = this.loader.contentLoaderInfo.bytesTotal;
      dispatchEvent(_loc2_);
   }
   
   public function errorHandler(param1:ErrorEvent) : void
   {
      this._error = true;
      var _loc2_:ModuleEvent = new ModuleEvent(ModuleEvent.ERROR,param1.bubbles,param1.cancelable);
      _loc2_.bytesLoaded = 0;
      _loc2_.bytesTotal = 0;
      _loc2_.errorText = param1.text;
      dispatchEvent(_loc2_);
   }
   
   public function getFlexModuleFactoryRequestHandler(param1:Request) : void
   {
      param1.value = this.parentModuleFactory;
   }
   
   public function readyHandler(param1:Event) : void
   {
      this._ready = true;
      this.factoryInfo.bytesTotal = this.loader.contentLoaderInfo.bytesTotal;
      var _loc2_:ModuleEvent = new ModuleEvent(ModuleEvent.READY);
      _loc2_.bytesLoaded = this.loader.contentLoaderInfo.bytesLoaded;
      _loc2_.bytesTotal = this.loader.contentLoaderInfo.bytesTotal;
      this.clearLoader();
      dispatchEvent(_loc2_);
   }
   
   public function moduleErrorHandler(param1:Event) : void
   {
      var _loc2_:ModuleEvent = null;
      this._ready = true;
      this.factoryInfo.bytesTotal = this.loader.contentLoaderInfo.bytesTotal;
      this.clearLoader();
      if(param1 is ModuleEvent)
      {
         _loc2_ = ModuleEvent(param1);
      }
      else
      {
         _loc2_ = new ModuleEvent(ModuleEvent.ERROR);
      }
      dispatchEvent(_loc2_);
   }
}

class FactoryInfo
{
   
   public var factory:IFlexModuleFactory;
   
   public var applicationDomain:ApplicationDomain;
   
   public var bytesTotal:int = 0;
   
   public function FactoryInfo()
   {
      super();
   }
}

class ModuleInfoProxy extends EventDispatcher implements IModuleInfo
{
   
   private var info:ModuleInfo;
   
   private var referenced:Boolean = false;
   
   private var _data:Object;
   
   public function ModuleInfoProxy(param1:ModuleInfo)
   {
      super();
      this.info = param1;
      param1.addEventListener(ModuleEvent.SETUP,this.moduleEventHandler,false,0,true);
      param1.addEventListener(ModuleEvent.PROGRESS,this.moduleEventHandler,false,0,true);
      param1.addEventListener(ModuleEvent.READY,this.moduleEventHandler,false,0,true);
      param1.addEventListener(ModuleEvent.ERROR,this.moduleEventHandler,false,0,true);
      param1.addEventListener(ModuleEvent.UNLOAD,this.moduleEventHandler,false,0,true);
   }
   
   public function get data() : Object
   {
      return this._data;
   }
   
   public function set data(param1:Object) : void
   {
      this._data = param1;
   }
   
   public function get error() : Boolean
   {
      return this.info.error;
   }
   
   public function get factory() : IFlexModuleFactory
   {
      return this.info.factory;
   }
   
   public function get loaded() : Boolean
   {
      return this.info.loaded;
   }
   
   public function get ready() : Boolean
   {
      return this.info.ready;
   }
   
   public function get setup() : Boolean
   {
      return this.info.setup;
   }
   
   public function get url() : String
   {
      return this.info.url;
   }
   
   public function publish(param1:IFlexModuleFactory) : void
   {
      this.info.publish(param1);
   }
   
   public function load(param1:ApplicationDomain = null, param2:SecurityDomain = null, param3:ByteArray = null, param4:IFlexModuleFactory = null) : void
   {
      var _loc5_:ModuleEvent = null;
      this.info.resurrect();
      if(!this.referenced)
      {
         this.info.addReference();
         this.referenced = true;
      }
      if(this.info.error)
      {
         dispatchEvent(new ModuleEvent(ModuleEvent.ERROR));
      }
      else if(this.info.loaded)
      {
         if(this.info.setup)
         {
            dispatchEvent(new ModuleEvent(ModuleEvent.SETUP));
            if(this.info.ready)
            {
               _loc5_ = new ModuleEvent(ModuleEvent.PROGRESS);
               _loc5_.bytesLoaded = this.info.size;
               _loc5_.bytesTotal = this.info.size;
               dispatchEvent(_loc5_);
               dispatchEvent(new ModuleEvent(ModuleEvent.READY));
            }
         }
      }
      else
      {
         this.info.load(param1,param2,param3,param4);
      }
   }
   
   public function release() : void
   {
      if(this.referenced)
      {
         this.info.removeReference();
         this.referenced = false;
      }
   }
   
   public function unload() : void
   {
      this.info.unload();
      this.info.removeEventListener(ModuleEvent.SETUP,this.moduleEventHandler);
      this.info.removeEventListener(ModuleEvent.PROGRESS,this.moduleEventHandler);
      this.info.removeEventListener(ModuleEvent.READY,this.moduleEventHandler);
      this.info.removeEventListener(ModuleEvent.ERROR,this.moduleEventHandler);
      this.info.removeEventListener(ModuleEvent.UNLOAD,this.moduleEventHandler);
   }
   
   private function moduleEventHandler(param1:ModuleEvent) : void
   {
      dispatchEvent(param1);
   }
}
package mx.modules
{
   public class ModuleManagerGlobals
   {
      
      public static var managerSingleton:Object = null;
      
      public function ModuleManagerGlobals()
      {
         super();
      }
   }
}

package mx.preloaders
{
   import flash.display.Sprite;
   import flash.events.IEventDispatcher;
   
   public interface IPreloaderDisplay extends IEventDispatcher
   {
      
      function get backgroundAlpha() : Number;
      
      function set backgroundAlpha(param1:Number) : void;
      
      function get backgroundColor() : uint;
      
      function set backgroundColor(param1:uint) : void;
      
      function get backgroundImage() : Object;
      
      function set backgroundImage(param1:Object) : void;
      
      function get backgroundSize() : String;
      
      function set backgroundSize(param1:String) : void;
      
      function set preloader(param1:Sprite) : void;
      
      function get stageHeight() : Number;
      
      function set stageHeight(param1:Number) : void;
      
      function get stageWidth() : Number;
      
      function set stageWidth(param1:Number) : void;
      
      function initialize() : void;
   }
}

package mx.preloaders
{
   import flash.display.DisplayObject;
   import flash.display.LoaderInfo;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.ErrorEvent;
   import flash.events.Event;
   import flash.events.IEventDispatcher;
   import flash.events.IOErrorEvent;
   import flash.events.ProgressEvent;
   import flash.events.TimerEvent;
   import flash.system.ApplicationDomain;
   import flash.utils.Timer;
   import mx.core.RSLItem;
   import mx.core.RSLListLoader;
   import mx.core.ResourceModuleRSLItem;
   import mx.core.mx_internal;
   import mx.events.FlexEvent;
   import mx.events.RSLEvent;
   
   use namespace mx_internal;
   
   public class Preloader extends Sprite
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var displayClass:IPreloaderDisplay = null;
      
      private var timer:Timer;
      
      private var showDisplay:Boolean;
      
      private var rslListLoader:RSLListLoader;
      
      private var resourceModuleListLoader:RSLListLoader;
      
      private var rslDone:Boolean = false;
      
      private var loadingRSLs:Boolean = false;
      
      private var waitingToLoadResourceModules:Boolean = false;
      
      private var sentDocFrameReady:Boolean = false;
      
      private var app:IEventDispatcher = null;
      
      private var applicationDomain:ApplicationDomain = null;
      
      public function Preloader()
      {
         super();
      }
      
      public function initialize(param1:Boolean, param2:Class, param3:uint, param4:Number, param5:Object, param6:String, param7:Number, param8:Number, param9:Array = null, param10:Array = null, param11:Array = null, param12:Array = null, param13:ApplicationDomain = null) : void
      {
         var _loc14_:int = 0;
         var _loc15_:int = 0;
         var _loc17_:RSLItem = null;
         var _loc18_:ResourceModuleRSLItem = null;
         if((param9 != null || param10 != null) && param11 != null)
         {
            throw new Error("RSLs may only be specified by using libs and sizes or rslList, not both.");
         }
         this.applicationDomain = param13;
         root.loaderInfo.addEventListener(IOErrorEvent.IO_ERROR,this.ioErrorHandler);
         if(Boolean(param9) && param9.length > 0)
         {
            if(param11 == null)
            {
               param11 = [];
            }
            _loc14_ = int(param9.length);
            _loc15_ = 0;
            while(_loc15_ < _loc14_)
            {
               _loc17_ = new RSLItem(param9[_loc15_]);
               param11.push(_loc17_);
               _loc15_++;
            }
         }
         var _loc16_:Array = [];
         if(Boolean(param12) && param12.length > 0)
         {
            _loc14_ = int(param12.length);
            _loc15_ = 0;
            while(_loc15_ < _loc14_)
            {
               _loc18_ = new ResourceModuleRSLItem(param12[_loc15_],param13);
               _loc16_.push(_loc18_);
               _loc15_++;
            }
         }
         this.rslListLoader = new RSLListLoader(param11);
         if(_loc16_.length)
         {
            this.resourceModuleListLoader = new RSLListLoader(_loc16_);
         }
         this.showDisplay = param1;
         this.timer = new Timer(10);
         this.timer.addEventListener(TimerEvent.TIMER,this.timerHandler);
         this.timer.start();
         if(param1)
         {
            this.displayClass = new param2();
            this.displayClass.addEventListener(Event.COMPLETE,this.displayClassCompleteHandler);
            addChild(DisplayObject(this.displayClass));
            this.displayClass.backgroundColor = param3;
            this.displayClass.backgroundAlpha = param4;
            this.displayClass.backgroundImage = param5;
            this.displayClass.backgroundSize = param6;
            this.displayClass.stageWidth = param7;
            this.displayClass.stageHeight = param8;
            this.displayClass.initialize();
            this.displayClass.preloader = this;
         }
         if(this.rslListLoader.getItemCount() > 0)
         {
            this.rslListLoader.load(this.mx_internal::rslProgressHandler,this.mx_internal::rslCompleteHandler,this.mx_internal::rslErrorHandler,this.mx_internal::rslErrorHandler,this.mx_internal::rslErrorHandler);
            this.loadingRSLs = true;
         }
         else if(Boolean(this.resourceModuleListLoader) && this.resourceModuleListLoader.getItemCount() > 0)
         {
            if(param13.hasDefinition("mx.resources::ResourceManager"))
            {
               this.rslListLoader = this.resourceModuleListLoader;
               this.rslListLoader.load(this.mx_internal::rslProgressHandler,this.mx_internal::rslCompleteHandler,this.mx_internal::rslErrorHandler,this.mx_internal::rslErrorHandler,this.mx_internal::rslErrorHandler);
            }
            else
            {
               this.waitingToLoadResourceModules = true;
               this.rslDone = true;
            }
         }
         else
         {
            this.rslDone = true;
         }
      }
      
      public function registerApplication(param1:IEventDispatcher) : void
      {
         param1.addEventListener("validatePropertiesComplete",this.appProgressHandler);
         param1.addEventListener("validateSizeComplete",this.appProgressHandler);
         param1.addEventListener("validateDisplayListComplete",this.appProgressHandler);
         param1.addEventListener(FlexEvent.CREATION_COMPLETE,this.appCreationCompleteHandler);
         this.app = param1;
      }
      
      private function getByteValues() : Object
      {
         var _loc1_:LoaderInfo = root.loaderInfo;
         var _loc2_:int = int(_loc1_.bytesLoaded);
         var _loc3_:int = int(_loc1_.bytesTotal);
         var _loc4_:int = this.rslListLoader ? this.rslListLoader.getItemCount() : 0;
         var _loc5_:int = 0;
         while(_loc5_ < _loc4_)
         {
            _loc2_ += this.rslListLoader.getItem(_loc5_).loaded;
            _loc3_ += this.rslListLoader.getItem(_loc5_).total;
            _loc5_++;
         }
         return {
            "loaded":_loc2_,
            "total":_loc3_
         };
      }
      
      private function dispatchAppEndEvent(param1:Object = null) : void
      {
         dispatchEvent(new FlexEvent(FlexEvent.INIT_COMPLETE));
         if(!this.showDisplay)
         {
            this.displayClassCompleteHandler(null);
         }
      }
      
      mx_internal function rslProgressHandler(param1:ProgressEvent) : void
      {
         var _loc2_:int = this.rslListLoader.getIndex();
         var _loc3_:RSLItem = this.rslListLoader.getItem(_loc2_);
         var _loc4_:RSLEvent = new RSLEvent(RSLEvent.RSL_PROGRESS);
         _loc4_.isResourceModule = this.rslListLoader == this.resourceModuleListLoader;
         _loc4_.bytesLoaded = param1.bytesLoaded;
         _loc4_.bytesTotal = param1.bytesTotal;
         _loc4_.rslIndex = _loc2_;
         _loc4_.rslTotal = this.rslListLoader.getItemCount();
         _loc4_.url = _loc3_.urlRequest;
         dispatchEvent(_loc4_);
      }
      
      mx_internal function rslCompleteHandler(param1:Event) : void
      {
         var _loc2_:int = this.rslListLoader.getIndex();
         var _loc3_:RSLItem = this.rslListLoader.getItem(_loc2_);
         var _loc4_:RSLEvent = new RSLEvent(RSLEvent.RSL_COMPLETE);
         _loc4_.isResourceModule = this.rslListLoader == this.resourceModuleListLoader;
         _loc4_.bytesLoaded = _loc3_.total;
         _loc4_.bytesTotal = _loc3_.total;
         _loc4_.loaderInfo = param1.target as LoaderInfo;
         _loc4_.rslIndex = _loc2_;
         _loc4_.rslTotal = this.rslListLoader.getItemCount();
         _loc4_.url = _loc3_.urlRequest;
         dispatchEvent(_loc4_);
         if(this.loadingRSLs && this.resourceModuleListLoader && _loc2_ + 1 == _loc4_.rslTotal)
         {
            this.loadingRSLs = false;
            this.waitingToLoadResourceModules = true;
         }
         this.rslDone = _loc2_ + 1 == _loc4_.rslTotal;
      }
      
      mx_internal function rslErrorHandler(param1:ErrorEvent) : void
      {
         var _loc2_:int = this.rslListLoader.getIndex();
         var _loc3_:RSLItem = this.rslListLoader.getItem(_loc2_);
         var _loc4_:RSLEvent = new RSLEvent(RSLEvent.RSL_ERROR);
         _loc4_.isResourceModule = this.rslListLoader == this.resourceModuleListLoader;
         _loc4_.bytesLoaded = 0;
         _loc4_.bytesTotal = 0;
         _loc4_.rslIndex = _loc2_;
         _loc4_.rslTotal = this.rslListLoader.getItemCount();
         _loc4_.url = _loc3_.urlRequest;
         _loc4_.errorText = decodeURI(param1.text);
         dispatchEvent(_loc4_);
      }
      
      private function timerHandler(param1:TimerEvent) : void
      {
         if(!root)
         {
            return;
         }
         var _loc2_:Object = this.getByteValues();
         var _loc3_:int = int(_loc2_.loaded);
         var _loc4_:int = int(_loc2_.total);
         dispatchEvent(new ProgressEvent(ProgressEvent.PROGRESS,false,false,_loc3_,_loc4_));
         if(this.waitingToLoadResourceModules)
         {
            if(this.applicationDomain.hasDefinition("mx.resources::ResourceManager"))
            {
               this.waitingToLoadResourceModules = false;
               this.rslListLoader = this.resourceModuleListLoader;
               this.rslDone = false;
               this.rslListLoader.load(this.mx_internal::rslProgressHandler,this.mx_internal::rslCompleteHandler,this.mx_internal::rslErrorHandler,this.mx_internal::rslErrorHandler,this.mx_internal::rslErrorHandler);
            }
         }
         if(this.rslDone && (_loc3_ >= _loc4_ && _loc4_ > 0 || _loc4_ == 0 && _loc3_ > 0 || root is MovieClip && MovieClip(root).totalFrames > 2 && MovieClip(root).framesLoaded >= 2))
         {
            if(!this.sentDocFrameReady)
            {
               this.sentDocFrameReady = true;
               dispatchEvent(new FlexEvent(FlexEvent.PRELOADER_DOC_FRAME_READY));
               return;
            }
            if(this.waitingToLoadResourceModules)
            {
               if(this.applicationDomain.hasDefinition("mx.resources::ResourceManager"))
               {
                  this.waitingToLoadResourceModules = false;
                  this.rslListLoader = this.resourceModuleListLoader;
                  this.rslDone = false;
                  this.rslListLoader.load(this.mx_internal::rslProgressHandler,this.mx_internal::rslCompleteHandler,this.mx_internal::rslErrorHandler,this.mx_internal::rslErrorHandler,this.mx_internal::rslErrorHandler);
                  return;
               }
            }
            this.timer.removeEventListener(TimerEvent.TIMER,this.timerHandler);
            this.timer.reset();
            dispatchEvent(new Event(Event.COMPLETE));
            dispatchEvent(new FlexEvent(FlexEvent.INIT_PROGRESS));
         }
      }
      
      private function ioErrorHandler(param1:IOErrorEvent) : void
      {
      }
      
      private function displayClassCompleteHandler(param1:Event) : void
      {
         if(this.displayClass)
         {
            this.displayClass.removeEventListener(Event.COMPLETE,this.displayClassCompleteHandler);
         }
         if(root)
         {
            root.loaderInfo.removeEventListener(IOErrorEvent.IO_ERROR,this.ioErrorHandler);
         }
         if(this.app)
         {
            this.app.removeEventListener("validatePropertiesComplete",this.appProgressHandler);
            this.app.removeEventListener("validateSizeComplete",this.appProgressHandler);
            this.app.removeEventListener("validateDisplayListComplete",this.appProgressHandler);
            this.app.removeEventListener(FlexEvent.CREATION_COMPLETE,this.appCreationCompleteHandler);
            this.app = null;
         }
         dispatchEvent(new FlexEvent(FlexEvent.PRELOADER_DONE));
      }
      
      private function appCreationCompleteHandler(param1:FlexEvent) : void
      {
         this.dispatchAppEndEvent();
      }
      
      private function appProgressHandler(param1:Event) : void
      {
         dispatchEvent(new FlexEvent(FlexEvent.INIT_PROGRESS));
      }
   }
}

package mx.resources
{
   public interface IResourceBundle
   {
      
      function get bundleName() : String;
      
      function get content() : Object;
      
      function get locale() : String;
   }
}

package mx.resources
{
   import flash.events.IEventDispatcher;
   import flash.system.ApplicationDomain;
   import flash.system.SecurityDomain;
   
   public interface IResourceManager extends IEventDispatcher
   {
      
      function get localeChain() : Array;
      
      function set localeChain(param1:Array) : void;
      
      function loadResourceModule(param1:String, param2:Boolean = true, param3:ApplicationDomain = null, param4:SecurityDomain = null) : IEventDispatcher;
      
      function unloadResourceModule(param1:String, param2:Boolean = true) : void;
      
      function addResourceBundle(param1:IResourceBundle) : void;
      
      function removeResourceBundle(param1:String, param2:String) : void;
      
      function removeResourceBundlesForLocale(param1:String) : void;
      
      function update() : void;
      
      function getLocales() : Array;
      
      function getPreferredLocaleChain() : Array;
      
      function getBundleNamesForLocale(param1:String) : Array;
      
      function getResourceBundle(param1:String, param2:String) : IResourceBundle;
      
      function findResourceBundleWithResource(param1:String, param2:String) : IResourceBundle;
      
      [Bindable("change")]
      function getObject(param1:String, param2:String, param3:String = null) : *;
      
      [Bindable("change")]
      function getString(param1:String, param2:String, param3:Array = null, param4:String = null) : String;
      
      [Bindable("change")]
      function getStringArray(param1:String, param2:String, param3:String = null) : Array;
      
      [Bindable("change")]
      function getNumber(param1:String, param2:String, param3:String = null) : Number;
      
      [Bindable("change")]
      function getInt(param1:String, param2:String, param3:String = null) : int;
      
      [Bindable("change")]
      function getUint(param1:String, param2:String, param3:String = null) : uint;
      
      [Bindable("change")]
      function getBoolean(param1:String, param2:String, param3:String = null) : Boolean;
      
      [Bindable("change")]
      function getClass(param1:String, param2:String, param3:String = null) : Class;
      
      function installCompiledResourceBundles(param1:ApplicationDomain, param2:Array, param3:Array) : void;
      
      function initializeLocaleChain(param1:Array) : void;
   }
}

package mx.resources
{
   public interface IResourceModule
   {
      
      function get resourceBundles() : Array;
   }
}

package mx.resources
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class LocaleSorter
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function LocaleSorter()
      {
         super();
      }
      
      public static function sortLocalesByPreference(param1:Array, param2:Array, param3:String = null, param4:Boolean = false) : Array
      {
         var result:Array = null;
         var hasLocale:Object = null;
         var i:int = 0;
         var j:int = 0;
         var k:int = 0;
         var l:int = 0;
         var locale:String = null;
         var plocale:LocaleID = null;
         var appLocales:Array = param1;
         var systemPreferences:Array = param2;
         var ultimateFallbackLocale:String = param3;
         var addAll:Boolean = param4;
         var promote:Function = function(param1:String):void
         {
            if(typeof hasLocale[param1] != "undefined")
            {
               result.push(appLocales[hasLocale[param1]]);
               delete hasLocale[param1];
            }
         };
         result = [];
         hasLocale = {};
         var locales:Array = trimAndNormalize(appLocales);
         var preferenceLocales:Array = trimAndNormalize(systemPreferences);
         addUltimateFallbackLocale(preferenceLocales,ultimateFallbackLocale);
         j = 0;
         while(j < locales.length)
         {
            hasLocale[locales[j]] = j;
            j++;
         }
         i = 0;
         l = int(preferenceLocales.length);
         while(i < l)
         {
            plocale = LocaleID.fromString(preferenceLocales[i]);
            promote(preferenceLocales[i]);
            promote(plocale.toString());
            while(plocale.transformToParent())
            {
               promote(plocale.toString());
            }
            plocale = LocaleID.fromString(preferenceLocales[i]);
            j = 0;
            while(j < l)
            {
               locale = preferenceLocales[j];
               if(plocale.isSiblingOf(LocaleID.fromString(locale)))
               {
                  promote(locale);
               }
               j++;
            }
            j = 0;
            k = int(locales.length);
            while(j < k)
            {
               locale = locales[j];
               if(plocale.isSiblingOf(LocaleID.fromString(locale)))
               {
                  promote(locale);
               }
               j++;
            }
            i++;
         }
         if(addAll)
         {
            j = 0;
            k = int(locales.length);
            while(j < k)
            {
               promote(locales[j]);
               j++;
            }
         }
         return result;
      }
      
      private static function trimAndNormalize(param1:Array) : Array
      {
         var _loc2_:Array = [];
         var _loc3_:int = 0;
         while(_loc3_ < param1.length)
         {
            _loc2_.push(normalizeLocale(param1[_loc3_]));
            _loc3_++;
         }
         return _loc2_;
      }
      
      private static function normalizeLocale(param1:String) : String
      {
         return param1.toLowerCase().replace(/-/g,"_");
      }
      
      private static function addUltimateFallbackLocale(param1:Array, param2:String) : void
      {
         var _loc3_:String = null;
         if(param2 != null && param2 != "")
         {
            _loc3_ = normalizeLocale(param2);
            if(param1.indexOf(_loc3_) == -1)
            {
               param1.push(_loc3_);
            }
         }
      }
   }
}

class LocaleID
{
   
   public static const STATE_PRIMARY_LANGUAGE:int = 0;
   
   public static const STATE_EXTENDED_LANGUAGES:int = 1;
   
   public static const STATE_SCRIPT:int = 2;
   
   public static const STATE_REGION:int = 3;
   
   public static const STATE_VARIANTS:int = 4;
   
   public static const STATE_EXTENSIONS:int = 5;
   
   public static const STATE_PRIVATES:int = 6;
   
   private var lang:String = "";
   
   private var script:String = "";
   
   private var region:String = "";
   
   private var extended_langs:Array = [];
   
   private var variants:Array = [];
   
   private var extensions:Object = {};
   
   private var privates:Array = [];
   
   private var privateLangs:Boolean = false;
   
   public function LocaleID()
   {
      super();
   }
   
   private static function appendElements(param1:Array, param2:Array) : void
   {
      var _loc3_:uint = 0;
      var _loc4_:uint = param2.length;
      while(_loc3_ < _loc4_)
      {
         param1.push(param2[_loc3_]);
         _loc3_++;
      }
   }
   
   public static function fromString(param1:String) : LocaleID
   {
      var _loc5_:Array = null;
      var _loc8_:String = null;
      var _loc9_:int = 0;
      var _loc10_:String = null;
      var _loc2_:LocaleID = new LocaleID();
      var _loc3_:int = int(STATE_PRIMARY_LANGUAGE);
      var _loc4_:Array = param1.replace(/-/g,"_").split("_");
      var _loc6_:int = 0;
      var _loc7_:int = int(_loc4_.length);
      while(_loc6_ < _loc7_)
      {
         _loc8_ = _loc4_[_loc6_].toLowerCase();
         if(_loc3_ == STATE_PRIMARY_LANGUAGE)
         {
            if(_loc8_ == "x")
            {
               _loc2_.privateLangs = true;
            }
            else if(_loc8_ == "i")
            {
               _loc2_.lang += "i-";
            }
            else
            {
               _loc2_.lang += _loc8_;
               _loc3_ = int(STATE_EXTENDED_LANGUAGES);
            }
         }
         else
         {
            _loc9_ = _loc8_.length;
            if(_loc9_ != 0)
            {
               _loc10_ = _loc8_.charAt(0).toLowerCase();
               if(_loc3_ <= STATE_EXTENDED_LANGUAGES && _loc9_ == 3)
               {
                  _loc2_.extended_langs.push(_loc8_);
                  if(_loc2_.extended_langs.length == 3)
                  {
                     _loc3_ = int(STATE_SCRIPT);
                  }
               }
               else if(_loc3_ <= STATE_SCRIPT && _loc9_ == 4)
               {
                  _loc2_.script = _loc8_;
                  _loc3_ = int(STATE_REGION);
               }
               else if(_loc3_ <= STATE_REGION && (_loc9_ == 2 || _loc9_ == 3))
               {
                  _loc2_.region = _loc8_;
                  _loc3_ = int(STATE_VARIANTS);
               }
               else if(_loc3_ <= STATE_VARIANTS && (_loc10_ >= "a" && _loc10_ <= "z" && _loc9_ >= 5 || _loc10_ >= "0" && _loc10_ <= "9" && _loc9_ >= 4))
               {
                  _loc2_.variants.push(_loc8_);
                  _loc3_ = int(STATE_VARIANTS);
               }
               else if(_loc3_ < STATE_PRIVATES && _loc9_ == 1)
               {
                  if(_loc8_ == "x")
                  {
                     _loc3_ = int(STATE_PRIVATES);
                     _loc5_ = _loc2_.privates;
                  }
                  else
                  {
                     _loc3_ = int(STATE_EXTENSIONS);
                     _loc5_ = _loc2_.extensions[_loc8_] || [];
                     _loc2_.extensions[_loc8_] = _loc5_;
                  }
               }
               else if(_loc3_ >= STATE_EXTENSIONS)
               {
                  _loc5_.push(_loc8_);
               }
            }
         }
         _loc6_++;
      }
      _loc2_.canonicalize();
      return _loc2_;
   }
   
   public function canonicalize() : void
   {
      var _loc1_:String = null;
      for(_loc1_ in this.extensions)
      {
         if(this.extensions.hasOwnProperty(_loc1_))
         {
            if(this.extensions[_loc1_].length == 0)
            {
               delete this.extensions[_loc1_];
            }
            else
            {
               this.extensions[_loc1_] = this.extensions[_loc1_].sort();
            }
         }
      }
      this.extended_langs = this.extended_langs.sort();
      this.variants = this.variants.sort();
      this.privates = this.privates.sort();
      if(this.script == "")
      {
         this.script = LocaleRegistry.getScriptByLang(this.lang);
      }
      if(this.script == "" && this.region != "")
      {
         this.script = LocaleRegistry.getScriptByLangAndRegion(this.lang,this.region);
      }
      if(this.region == "" && this.script != "")
      {
         this.region = LocaleRegistry.getDefaultRegionForLangAndScript(this.lang,this.script);
      }
   }
   
   public function toString() : String
   {
      var _loc2_:String = null;
      var _loc1_:Array = [this.lang];
      appendElements(_loc1_,this.extended_langs);
      if(this.script != "")
      {
         _loc1_.push(this.script);
      }
      if(this.region != "")
      {
         _loc1_.push(this.region);
      }
      appendElements(_loc1_,this.variants);
      for(_loc2_ in this.extensions)
      {
         if(this.extensions.hasOwnProperty(_loc2_))
         {
            _loc1_.push(_loc2_);
            appendElements(_loc1_,this.extensions[_loc2_]);
         }
      }
      if(this.privates.length > 0)
      {
         _loc1_.push("x");
         appendElements(_loc1_,this.privates);
      }
      return _loc1_.join("_");
   }
   
   public function equals(param1:LocaleID) : Boolean
   {
      return this.toString() == param1.toString();
   }
   
   public function isSiblingOf(param1:LocaleID) : Boolean
   {
      return this.lang == param1.lang && this.script == param1.script;
   }
   
   public function transformToParent() : Boolean
   {
      var _loc2_:String = null;
      var _loc3_:Array = null;
      var _loc4_:String = null;
      if(this.privates.length > 0)
      {
         this.privates.splice(this.privates.length - 1,1);
         return true;
      }
      var _loc1_:String = null;
      for(_loc2_ in this.extensions)
      {
         if(this.extensions.hasOwnProperty(_loc2_))
         {
            _loc1_ = _loc2_;
         }
      }
      if(_loc1_)
      {
         _loc3_ = this.extensions[_loc1_];
         if(_loc3_.length == 1)
         {
            delete this.extensions[_loc1_];
            return true;
         }
         _loc3_.splice(_loc3_.length - 1,1);
         return true;
      }
      if(this.variants.length > 0)
      {
         this.variants.splice(this.variants.length - 1,1);
         return true;
      }
      if(this.script != "")
      {
         if(LocaleRegistry.getScriptByLang(this.lang) != "")
         {
            this.script = "";
            return true;
         }
         if(this.region == "")
         {
            _loc4_ = LocaleRegistry.getDefaultRegionForLangAndScript(this.lang,this.script);
            if(_loc4_ != "")
            {
               this.region = _loc4_;
               this.script = "";
               return true;
            }
         }
      }
      if(this.region != "")
      {
         if(!(this.script == "" && LocaleRegistry.getScriptByLang(this.lang) == ""))
         {
            this.region = "";
            return true;
         }
      }
      if(this.extended_langs.length > 0)
      {
         this.extended_langs.splice(this.extended_langs.length - 1,1);
         return true;
      }
      return false;
   }
}

class LocaleRegistry
{
   
   private static const SCRIPTS:Array = ["","latn","ethi","arab","beng","cyrl","thaa","tibt","grek","gujr","hebr","deva","armn","jpan","geor","khmr","knda","kore","laoo","mlym","mymr","orya","guru","sinh","taml","telu","thai","nkoo","blis","hans","hant","mong","syrc"];
   
   private static const SCRIPT_BY_ID:Object = {
      "latn":1,
      "ethi":2,
      "arab":3,
      "beng":4,
      "cyrl":5,
      "thaa":6,
      "tibt":7,
      "grek":8,
      "gujr":9,
      "hebr":10,
      "deva":11,
      "armn":12,
      "jpan":13,
      "geor":14,
      "khmr":15,
      "knda":16,
      "kore":17,
      "laoo":18,
      "mlym":19,
      "mymr":20,
      "orya":21,
      "guru":22,
      "sinh":23,
      "taml":24,
      "telu":25,
      "thai":26,
      "nkoo":27,
      "blis":28,
      "hans":29,
      "hant":30,
      "mong":31,
      "syrc":32
   };
   
   private static const DEFAULT_REGION_BY_LANG_AND_SCRIPT:Object = {
      "bg":{5:"bg"},
      "ca":{1:"es"},
      "zh":{
         30:"tw",
         29:"cn"
      },
      "cs":{1:"cz"},
      "da":{1:"dk"},
      "de":{1:"de"},
      "el":{8:"gr"},
      "en":{1:"us"},
      "es":{1:"es"},
      "fi":{1:"fi"},
      "fr":{1:"fr"},
      "he":{10:"il"},
      "hu":{1:"hu"},
      "is":{1:"is"},
      "it":{1:"it"},
      "ja":{13:"jp"},
      "ko":{17:"kr"},
      "nl":{1:"nl"},
      "nb":{1:"no"},
      "pl":{1:"pl"},
      "pt":{1:"br"},
      "ro":{1:"ro"},
      "ru":{5:"ru"},
      "hr":{1:"hr"},
      "sk":{1:"sk"},
      "sq":{1:"al"},
      "sv":{1:"se"},
      "th":{26:"th"},
      "tr":{1:"tr"},
      "ur":{3:"pk"},
      "id":{1:"id"},
      "uk":{5:"ua"},
      "be":{5:"by"},
      "sl":{1:"si"},
      "et":{1:"ee"},
      "lv":{1:"lv"},
      "lt":{1:"lt"},
      "fa":{3:"ir"},
      "vi":{1:"vn"},
      "hy":{12:"am"},
      "az":{
         1:"az",
         5:"az"
      },
      "eu":{1:"es"},
      "mk":{5:"mk"},
      "af":{1:"za"},
      "ka":{14:"ge"},
      "fo":{1:"fo"},
      "hi":{11:"in"},
      "ms":{1:"my"},
      "kk":{5:"kz"},
      "ky":{5:"kg"},
      "sw":{1:"ke"},
      "uz":{
         1:"uz",
         5:"uz"
      },
      "tt":{5:"ru"},
      "pa":{22:"in"},
      "gu":{9:"in"},
      "ta":{24:"in"},
      "te":{25:"in"},
      "kn":{16:"in"},
      "mr":{11:"in"},
      "sa":{11:"in"},
      "mn":{5:"mn"},
      "gl":{1:"es"},
      "kok":{11:"in"},
      "syr":{32:"sy"},
      "dv":{6:"mv"},
      "nn":{1:"no"},
      "sr":{
         1:"cs",
         5:"cs"
      },
      "cy":{1:"gb"},
      "mi":{1:"nz"},
      "mt":{1:"mt"},
      "quz":{1:"bo"},
      "tn":{1:"za"},
      "xh":{1:"za"},
      "zu":{1:"za"},
      "nso":{1:"za"},
      "se":{1:"no"},
      "smj":{1:"no"},
      "sma":{1:"no"},
      "sms":{1:"fi"},
      "smn":{1:"fi"},
      "bs":{1:"ba"}
   };
   
   private static const SCRIPT_ID_BY_LANG:Object = {
      "ab":5,
      "af":1,
      "am":2,
      "ar":3,
      "as":4,
      "ay":1,
      "be":5,
      "bg":5,
      "bn":4,
      "bs":1,
      "ca":1,
      "ch":1,
      "cs":1,
      "cy":1,
      "da":1,
      "de":1,
      "dv":6,
      "dz":7,
      "el":8,
      "en":1,
      "eo":1,
      "es":1,
      "et":1,
      "eu":1,
      "fa":3,
      "fi":1,
      "fj":1,
      "fo":1,
      "fr":1,
      "frr":1,
      "fy":1,
      "ga":1,
      "gl":1,
      "gn":1,
      "gu":9,
      "gv":1,
      "he":10,
      "hi":11,
      "hr":1,
      "ht":1,
      "hu":1,
      "hy":12,
      "id":1,
      "in":1,
      "is":1,
      "it":1,
      "iw":10,
      "ja":13,
      "ka":14,
      "kk":5,
      "kl":1,
      "km":15,
      "kn":16,
      "ko":17,
      "la":1,
      "lb":1,
      "ln":1,
      "lo":18,
      "lt":1,
      "lv":1,
      "mg":1,
      "mh":1,
      "mk":5,
      "ml":19,
      "mo":1,
      "mr":11,
      "ms":1,
      "mt":1,
      "my":20,
      "na":1,
      "nb":1,
      "nd":1,
      "ne":11,
      "nl":1,
      "nn":1,
      "no":1,
      "nr":1,
      "ny":1,
      "om":1,
      "or":21,
      "pa":22,
      "pl":1,
      "ps":3,
      "pt":1,
      "qu":1,
      "rn":1,
      "ro":1,
      "ru":5,
      "rw":1,
      "sg":1,
      "si":23,
      "sk":1,
      "sl":1,
      "sm":1,
      "so":1,
      "sq":1,
      "ss":1,
      "st":1,
      "sv":1,
      "sw":1,
      "ta":24,
      "te":25,
      "th":26,
      "ti":2,
      "tl":1,
      "tn":1,
      "to":1,
      "tr":1,
      "ts":1,
      "uk":5,
      "ur":3,
      "ve":1,
      "vi":1,
      "wo":1,
      "xh":1,
      "yi":10,
      "zu":1,
      "cpe":1,
      "dsb":1,
      "frs":1,
      "gsw":1,
      "hsb":1,
      "kok":11,
      "mai":11,
      "men":1,
      "nds":1,
      "niu":1,
      "nqo":27,
      "nso":1,
      "son":1,
      "tem":1,
      "tkl":1,
      "tmh":1,
      "tpi":1,
      "tvl":1,
      "zbl":28
   };
   
   private static const SCRIPT_ID_BY_LANG_AND_REGION:Object = {
      "zh":{
         "cn":29,
         "sg":29,
         "tw":30,
         "hk":30,
         "mo":30
      },
      "mn":{
         "cn":31,
         "sg":5
      },
      "pa":{
         "pk":3,
         "in":22
      },
      "ha":{
         "gh":1,
         "ne":1
      }
   };
   
   public function LocaleRegistry()
   {
      super();
   }
   
   public static function getScriptByLangAndRegion(param1:String, param2:String) : String
   {
      var _loc3_:Object = SCRIPT_ID_BY_LANG_AND_REGION[param1];
      if(_loc3_ == null)
      {
         return "";
      }
      var _loc4_:Object = _loc3_[param2];
      if(_loc4_ == null)
      {
         return "";
      }
      return SCRIPTS[int(_loc4_)].toLowerCase();
   }
   
   public static function getScriptByLang(param1:String) : String
   {
      var _loc2_:Object = SCRIPT_ID_BY_LANG[param1];
      if(_loc2_ == null)
      {
         return "";
      }
      return SCRIPTS[int(_loc2_)].toLowerCase();
   }
   
   public static function getDefaultRegionForLangAndScript(param1:String, param2:String) : String
   {
      var _loc3_:Object = DEFAULT_REGION_BY_LANG_AND_SCRIPT[param1];
      var _loc4_:Object = SCRIPT_BY_ID[param2];
      if(_loc3_ == null || _loc4_ == null)
      {
         return "";
      }
      return _loc3_[int(_loc4_)] || "";
   }
}
package mx.resources
{
   import flash.system.ApplicationDomain;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class ResourceBundle implements IResourceBundle
   {
      
      mx_internal static var locale:String;
      
      mx_internal static var backupApplicationDomain:ApplicationDomain;
      
      mx_internal static const VERSION:String = "4.0.0.13827";
      
      mx_internal var _bundleName:String;
      
      private var _content:Object = {};
      
      mx_internal var _locale:String;
      
      public function ResourceBundle(param1:String = null, param2:String = null)
      {
         super();
         this.mx_internal::_locale = param1;
         this.mx_internal::_bundleName = param2;
         this._content = this.getContent();
      }
      
      private static function getClassByName(param1:String, param2:ApplicationDomain) : Class
      {
         var _loc3_:Class = null;
         if(param2.hasDefinition(param1))
         {
            _loc3_ = param2.getDefinition(param1) as Class;
         }
         return _loc3_;
      }
      
      public function get bundleName() : String
      {
         return this.mx_internal::_bundleName;
      }
      
      public function get content() : Object
      {
         return this._content;
      }
      
      public function get locale() : String
      {
         return this.mx_internal::_locale;
      }
      
      protected function getContent() : Object
      {
         return {};
      }
      
      private function _getObject(param1:String) : Object
      {
         var _loc2_:Object = this.content[param1];
         if(!_loc2_)
         {
            throw new Error("Key " + param1 + " was not found in resource bundle " + this.bundleName);
         }
         return _loc2_;
      }
   }
}

package mx.resources
{
   import flash.utils.getDefinitionByName;
   import mx.core.Singleton;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class ResourceManager
   {
      
      private static var implClassDependency:ResourceManagerImpl;
      
      private static var instance:IResourceManager;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function ResourceManager()
      {
         super();
      }
      
      public static function getInstance() : IResourceManager
      {
         if(!instance)
         {
            if(!Singleton.getClass("mx.resources::IResourceManager"))
            {
               Singleton.registerClass("mx.resources::IResourceManager",Class(getDefinitionByName("mx.resources::ResourceManagerImpl")));
            }
            try
            {
               instance = IResourceManager(Singleton.getInstance("mx.resources::IResourceManager"));
            }
            catch(e:Error)
            {
               instance = new ResourceManagerImpl();
            }
         }
         return instance;
      }
   }
}

package mx.resources
{
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.events.FocusEvent;
   import flash.events.IEventDispatcher;
   import flash.events.TimerEvent;
   import flash.system.ApplicationDomain;
   import flash.system.Capabilities;
   import flash.system.SecurityDomain;
   import flash.utils.Timer;
   import mx.core.mx_internal;
   import mx.events.FlexEvent;
   import mx.events.ModuleEvent;
   import mx.events.ResourceEvent;
   import mx.managers.SystemManagerGlobals;
   import mx.modules.IModuleInfo;
   import mx.modules.ModuleManager;
   import mx.utils.StringUtil;
   
   use namespace mx_internal;
   
   public class ResourceManagerImpl extends EventDispatcher implements IResourceManager
   {
      
      private static var instance:IResourceManager;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var localeMap:Object = {};
      
      private var resourceModules:Object = {};
      
      private var initializedForNonFrameworkApp:Boolean = false;
      
      private var _localeChain:Array;
      
      public function ResourceManagerImpl()
      {
         super();
         var _loc1_:Object = SystemManagerGlobals.info;
         if(_loc1_)
         {
            this.processInfo(_loc1_);
         }
         if(SystemManagerGlobals.topLevelSystemManagers.length)
         {
            SystemManagerGlobals.topLevelSystemManagers[0].addEventListener(FlexEvent.NEW_CHILD_APPLICATION,this.newChildApplicationHandler);
         }
      }
      
      public static function getInstance() : IResourceManager
      {
         if(!instance)
         {
            instance = new ResourceManagerImpl();
         }
         return instance;
      }
      
      public function get localeChain() : Array
      {
         return this._localeChain;
      }
      
      public function set localeChain(param1:Array) : void
      {
         this._localeChain = param1;
         this.update();
      }
      
      public function installCompiledResourceBundles(param1:ApplicationDomain, param2:Array, param3:Array) : void
      {
         var _loc7_:String = null;
         var _loc8_:int = 0;
         var _loc9_:String = null;
         var _loc4_:int = param2 ? int(param2.length) : 0;
         var _loc5_:int = param3 ? int(param3.length) : 0;
         var _loc6_:int = 0;
         while(_loc6_ < _loc4_)
         {
            _loc7_ = param2[_loc6_];
            _loc8_ = 0;
            while(_loc8_ < _loc5_)
            {
               _loc9_ = param3[_loc8_];
               this.installCompiledResourceBundle(param1,_loc7_,_loc9_);
               _loc8_++;
            }
            _loc6_++;
         }
      }
      
      private function installCompiledResourceBundle(param1:ApplicationDomain, param2:String, param3:String) : void
      {
         var _loc4_:String = null;
         var _loc5_:String = param3;
         var _loc6_:int = int(param3.indexOf(":"));
         if(_loc6_ != -1)
         {
            _loc4_ = param3.substring(0,_loc6_);
            _loc5_ = param3.substring(_loc6_ + 1);
         }
         if(this.getResourceBundle(param2,param3))
         {
            return;
         }
         var _loc7_:* = param2 + "$" + _loc5_ + "_properties";
         if(_loc4_ != null)
         {
            _loc7_ = _loc4_ + "." + _loc7_;
         }
         var _loc8_:Class = null;
         if(param1.hasDefinition(_loc7_))
         {
            _loc8_ = Class(param1.getDefinition(_loc7_));
         }
         if(!_loc8_)
         {
            _loc7_ = param3;
            if(param1.hasDefinition(_loc7_))
            {
               _loc8_ = Class(param1.getDefinition(_loc7_));
            }
         }
         if(!_loc8_)
         {
            _loc7_ = param3 + "_properties";
            if(param1.hasDefinition(_loc7_))
            {
               _loc8_ = Class(param1.getDefinition(_loc7_));
            }
         }
         if(!_loc8_)
         {
            throw new Error("Could not find compiled resource bundle \'" + param3 + "\' for locale \'" + param2 + "\'.");
         }
         var _loc9_:ResourceBundle = ResourceBundle(new _loc8_());
         _loc9_.mx_internal::_locale = param2;
         _loc9_.mx_internal::_bundleName = param3;
         this.addResourceBundle(_loc9_);
      }
      
      private function newChildApplicationHandler(param1:FocusEvent) : void
      {
         var _loc2_:Object = param1.relatedObject["info"]();
         this.processInfo(_loc2_);
      }
      
      private function processInfo(param1:Object) : void
      {
         var _loc2_:Array = param1["compiledLocales"];
         ResourceBundle.mx_internal::locale = _loc2_ != null && _loc2_.length > 0 ? _loc2_[0] : "en_US";
         var _loc3_:String = SystemManagerGlobals.parameters["localeChain"];
         if(_loc3_ != null && _loc3_ != "")
         {
            this.localeChain = _loc3_.split(",");
         }
         var _loc4_:ApplicationDomain = param1["currentDomain"];
         var _loc5_:Array = param1["compiledResourceBundleNames"];
         this.installCompiledResourceBundles(_loc4_,_loc2_,_loc5_);
         if(!this.localeChain)
         {
            this.initializeLocaleChain(_loc2_);
         }
      }
      
      public function initializeLocaleChain(param1:Array) : void
      {
         this.localeChain = LocaleSorter.sortLocalesByPreference(param1,this.getSystemPreferredLocales(),null,true);
      }
      
      public function loadResourceModule(param1:String, param2:Boolean = true, param3:ApplicationDomain = null, param4:SecurityDomain = null) : IEventDispatcher
      {
         var errorHandler:Function;
         var moduleInfo:IModuleInfo = null;
         var resourceEventDispatcher:ResourceEventDispatcher = null;
         var timer:Timer = null;
         var timerHandler:Function = null;
         var url:String = param1;
         var updateFlag:Boolean = param2;
         var applicationDomain:ApplicationDomain = param3;
         var securityDomain:SecurityDomain = param4;
         moduleInfo = ModuleManager.getModule(url);
         resourceEventDispatcher = new ResourceEventDispatcher(moduleInfo);
         var readyHandler:Function = function(param1:ModuleEvent):void
         {
            var _loc2_:* = param1.module.factory.create();
            resourceModules[param1.module.url].resourceModule = _loc2_;
            if(updateFlag)
            {
               update();
            }
         };
         moduleInfo.addEventListener(ModuleEvent.READY,readyHandler,false,0,true);
         errorHandler = function(param1:ModuleEvent):void
         {
            var _loc3_:ResourceEvent = null;
            var _loc2_:String = "Unable to load resource module from " + url;
            if(resourceEventDispatcher.willTrigger(ResourceEvent.ERROR))
            {
               _loc3_ = new ResourceEvent(ResourceEvent.ERROR,param1.bubbles,param1.cancelable);
               _loc3_.bytesLoaded = 0;
               _loc3_.bytesTotal = 0;
               _loc3_.errorText = _loc2_;
               resourceEventDispatcher.dispatchEvent(_loc3_);
               return;
            }
            throw new Error(_loc2_);
         };
         moduleInfo.addEventListener(ModuleEvent.ERROR,errorHandler,false,0,true);
         this.resourceModules[url] = new ResourceModuleInfo(moduleInfo,readyHandler,errorHandler);
         timer = new Timer(0);
         timerHandler = function(param1:TimerEvent):void
         {
            timer.removeEventListener(TimerEvent.TIMER,timerHandler);
            timer.stop();
            moduleInfo.load(applicationDomain,securityDomain);
         };
         timer.addEventListener(TimerEvent.TIMER,timerHandler,false,0,true);
         timer.start();
         return resourceEventDispatcher;
      }
      
      public function unloadResourceModule(param1:String, param2:Boolean = true) : void
      {
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:String = null;
         var _loc8_:String = null;
         var _loc3_:ResourceModuleInfo = this.resourceModules[param1];
         if(!_loc3_)
         {
            return;
         }
         if(_loc3_.resourceModule)
         {
            _loc4_ = _loc3_.resourceModule.resourceBundles;
            if(_loc4_)
            {
               _loc5_ = int(_loc4_.length);
               _loc6_ = 0;
               while(_loc6_ < _loc5_)
               {
                  _loc7_ = _loc4_[_loc6_].locale;
                  _loc8_ = _loc4_[_loc6_].bundleName;
                  this.removeResourceBundle(_loc7_,_loc8_);
                  _loc6_++;
               }
            }
         }
         this.resourceModules[param1] = null;
         delete this.resourceModules[param1];
         _loc3_.moduleInfo.unload();
         if(param2)
         {
            this.update();
         }
      }
      
      public function addResourceBundle(param1:IResourceBundle) : void
      {
         var _loc2_:String = param1.locale;
         var _loc3_:String = param1.bundleName;
         if(!this.localeMap[_loc2_])
         {
            this.localeMap[_loc2_] = {};
         }
         this.localeMap[_loc2_][_loc3_] = param1;
      }
      
      public function getResourceBundle(param1:String, param2:String) : IResourceBundle
      {
         var _loc3_:Object = this.localeMap[param1];
         if(!_loc3_)
         {
            return null;
         }
         return _loc3_[param2];
      }
      
      public function removeResourceBundle(param1:String, param2:String) : void
      {
         delete this.localeMap[param1][param2];
         if(this.getBundleNamesForLocale(param1).length == 0)
         {
            delete this.localeMap[param1];
         }
      }
      
      public function removeResourceBundlesForLocale(param1:String) : void
      {
         delete this.localeMap[param1];
      }
      
      public function update() : void
      {
         dispatchEvent(new Event(Event.CHANGE));
      }
      
      public function getLocales() : Array
      {
         var _loc2_:String = null;
         var _loc1_:Array = [];
         for(_loc2_ in this.localeMap)
         {
            _loc1_.push(_loc2_);
         }
         return _loc1_;
      }
      
      public function getPreferredLocaleChain() : Array
      {
         return LocaleSorter.sortLocalesByPreference(this.getLocales(),this.getSystemPreferredLocales(),null,true);
      }
      
      public function getBundleNamesForLocale(param1:String) : Array
      {
         var _loc3_:String = null;
         var _loc2_:Array = [];
         for(_loc3_ in this.localeMap[param1])
         {
            _loc2_.push(_loc3_);
         }
         return _loc2_;
      }
      
      public function findResourceBundleWithResource(param1:String, param2:String) : IResourceBundle
      {
         var _loc5_:String = null;
         var _loc6_:Object = null;
         var _loc7_:IResourceBundle = null;
         if(!this._localeChain)
         {
            return null;
         }
         var _loc3_:int = int(this._localeChain.length);
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_)
         {
            _loc5_ = this.localeChain[_loc4_];
            _loc6_ = this.localeMap[_loc5_];
            if(_loc6_)
            {
               _loc7_ = _loc6_[param1];
               if(_loc7_)
               {
                  if(param2 in _loc7_.content)
                  {
                     return _loc7_;
                  }
               }
            }
            _loc4_++;
         }
         return null;
      }
      
      [Bindable("change")]
      public function getObject(param1:String, param2:String, param3:String = null) : *
      {
         var _loc4_:IResourceBundle = this.findBundle(param1,param2,param3);
         if(!_loc4_)
         {
            return undefined;
         }
         return _loc4_.content[param2];
      }
      
      [Bindable("change")]
      public function getString(param1:String, param2:String, param3:Array = null, param4:String = null) : String
      {
         var _loc5_:IResourceBundle = this.findBundle(param1,param2,param4);
         if(!_loc5_)
         {
            return null;
         }
         var _loc6_:String = String(_loc5_.content[param2]);
         if(param3)
         {
            _loc6_ = StringUtil.substitute(_loc6_,param3);
         }
         return _loc6_;
      }
      
      [Bindable("change")]
      public function getStringArray(param1:String, param2:String, param3:String = null) : Array
      {
         var _loc4_:IResourceBundle = this.findBundle(param1,param2,param3);
         if(!_loc4_)
         {
            return null;
         }
         var _loc5_:* = _loc4_.content[param2];
         var _loc6_:Array = String(_loc5_).split(",");
         var _loc7_:int = int(_loc6_.length);
         var _loc8_:int = 0;
         while(_loc8_ < _loc7_)
         {
            _loc6_[_loc8_] = StringUtil.trim(_loc6_[_loc8_]);
            _loc8_++;
         }
         return _loc6_;
      }
      
      [Bindable("change")]
      public function getNumber(param1:String, param2:String, param3:String = null) : Number
      {
         var _loc4_:IResourceBundle = this.findBundle(param1,param2,param3);
         if(!_loc4_)
         {
            return NaN;
         }
         var _loc5_:* = _loc4_.content[param2];
         return Number(_loc5_);
      }
      
      [Bindable("change")]
      public function getInt(param1:String, param2:String, param3:String = null) : int
      {
         var _loc4_:IResourceBundle = this.findBundle(param1,param2,param3);
         if(!_loc4_)
         {
            return 0;
         }
         var _loc5_:* = _loc4_.content[param2];
         return int(_loc5_);
      }
      
      [Bindable("change")]
      public function getUint(param1:String, param2:String, param3:String = null) : uint
      {
         var _loc4_:IResourceBundle = this.findBundle(param1,param2,param3);
         if(!_loc4_)
         {
            return 0;
         }
         var _loc5_:* = _loc4_.content[param2];
         return uint(_loc5_);
      }
      
      [Bindable("change")]
      public function getBoolean(param1:String, param2:String, param3:String = null) : Boolean
      {
         var _loc4_:IResourceBundle = this.findBundle(param1,param2,param3);
         if(!_loc4_)
         {
            return false;
         }
         var _loc5_:* = _loc4_.content[param2];
         return String(_loc5_).toLowerCase() == "true";
      }
      
      [Bindable("change")]
      public function getClass(param1:String, param2:String, param3:String = null) : Class
      {
         var _loc4_:IResourceBundle = this.findBundle(param1,param2,param3);
         if(!_loc4_)
         {
            return null;
         }
         var _loc5_:* = _loc4_.content[param2];
         return _loc5_ as Class;
      }
      
      private function findBundle(param1:String, param2:String, param3:String) : IResourceBundle
      {
         this.supportNonFrameworkApps();
         return param3 != null ? this.getResourceBundle(param3,param1) : this.findResourceBundleWithResource(param1,param2);
      }
      
      private function supportNonFrameworkApps() : void
      {
         if(this.initializedForNonFrameworkApp)
         {
            return;
         }
         this.initializedForNonFrameworkApp = true;
         if(this.getLocales().length > 0)
         {
            return;
         }
         var _loc1_:ApplicationDomain = ApplicationDomain.currentDomain;
         if(!_loc1_.hasDefinition("_CompiledResourceBundleInfo"))
         {
            return;
         }
         var _loc2_:Class = Class(_loc1_.getDefinition("_CompiledResourceBundleInfo"));
         var _loc3_:Array = _loc2_.compiledLocales;
         var _loc4_:Array = _loc2_.compiledResourceBundleNames;
         this.installCompiledResourceBundles(_loc1_,_loc3_,_loc4_);
         this.localeChain = _loc3_;
      }
      
      private function getSystemPreferredLocales() : Array
      {
         var _loc1_:Array = null;
         if(Capabilities["languages"])
         {
            _loc1_ = Capabilities["languages"];
         }
         else
         {
            _loc1_ = [Capabilities.language];
         }
         return _loc1_;
      }
      
      private function dumpResourceModule(param1:*) : void
      {
         var _loc2_:ResourceBundle = null;
         var _loc3_:String = null;
         for each(_loc2_ in param1.resourceBundles)
         {
            trace(_loc2_.locale,_loc2_.bundleName);
            for(_loc3_ in _loc2_.content)
            {
            }
         }
      }
   }
}

import flash.events.EventDispatcher;
import mx.events.ModuleEvent;
import mx.events.ResourceEvent;
import mx.modules.IModuleInfo;

class ResourceModuleInfo
{
   
   public var errorHandler:Function;
   
   public var moduleInfo:IModuleInfo;
   
   public var readyHandler:Function;
   
   public var resourceModule:IResourceModule;
   
   public function ResourceModuleInfo(param1:IModuleInfo, param2:Function, param3:Function)
   {
      super();
      this.moduleInfo = param1;
      this.readyHandler = param2;
      this.errorHandler = param3;
   }
}

class ResourceEventDispatcher extends EventDispatcher
{
   
   public function ResourceEventDispatcher(param1:IModuleInfo)
   {
      super();
      param1.addEventListener(ModuleEvent.ERROR,this.moduleInfo_errorHandler,false,0,true);
      param1.addEventListener(ModuleEvent.PROGRESS,this.moduleInfo_progressHandler,false,0,true);
      param1.addEventListener(ModuleEvent.READY,this.moduleInfo_readyHandler,false,0,true);
   }
   
   private function moduleInfo_errorHandler(param1:ModuleEvent) : void
   {
      var _loc2_:ResourceEvent = new ResourceEvent(ResourceEvent.ERROR,param1.bubbles,param1.cancelable);
      _loc2_.bytesLoaded = param1.bytesLoaded;
      _loc2_.bytesTotal = param1.bytesTotal;
      _loc2_.errorText = param1.errorText;
      dispatchEvent(_loc2_);
   }
   
   private function moduleInfo_progressHandler(param1:ModuleEvent) : void
   {
      var _loc2_:ResourceEvent = new ResourceEvent(ResourceEvent.PROGRESS,param1.bubbles,param1.cancelable);
      _loc2_.bytesLoaded = param1.bytesLoaded;
      _loc2_.bytesTotal = param1.bytesTotal;
      dispatchEvent(_loc2_);
   }
   
   private function moduleInfo_readyHandler(param1:ModuleEvent) : void
   {
      var _loc2_:ResourceEvent = new ResourceEvent(ResourceEvent.COMPLETE);
      dispatchEvent(_loc2_);
   }
}
package mx.rpc
{
   public interface IResponder
   {
      
      function result(param1:Object) : void;
      
      function fault(param1:Object) : void;
   }
}

package mx.states
{
   import mx.core.UIComponent;
   
   public interface IOverride
   {
      
      function initialize() : void;
      
      function apply(param1:UIComponent) : void;
      
      function remove(param1:UIComponent) : void;
   }
}

package mx.states
{
   import flash.events.EventDispatcher;
   import mx.core.mx_internal;
   import mx.events.FlexEvent;
   
   use namespace mx_internal;
   
   public class State extends EventDispatcher
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var initialized:Boolean = false;
      
      public var basedOn:String;
      
      public var name:String;
      
      public var overrides:Array;
      
      public var stateGroups:Array;
      
      public function State(param1:Object = null)
      {
         var _loc2_:String = null;
         this.overrides = [];
         this.stateGroups = [];
         super();
         for(_loc2_ in param1)
         {
            this[_loc2_] = param1[_loc2_];
         }
      }
      
      mx_internal function initialize() : void
      {
         var _loc1_:int = 0;
         if(!this.initialized)
         {
            this.initialized = true;
            _loc1_ = 0;
            while(_loc1_ < this.overrides.length)
            {
               IOverride(this.overrides[_loc1_]).initialize();
               _loc1_++;
            }
         }
      }
      
      mx_internal function dispatchEnterState() : void
      {
         if(hasEventListener(FlexEvent.ENTER_STATE))
         {
            dispatchEvent(new FlexEvent(FlexEvent.ENTER_STATE));
         }
      }
      
      mx_internal function dispatchExitState() : void
      {
         if(hasEventListener(FlexEvent.EXIT_STATE))
         {
            dispatchEvent(new FlexEvent(FlexEvent.EXIT_STATE));
         }
      }
   }
}

package mx.states
{
   import mx.core.mx_internal;
   import mx.effects.IEffect;
   
   use namespace mx_internal;
   
   public class Transition
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var effect:IEffect;
      
      public var fromState:String = "*";
      
      public var toState:String = "*";
      
      public var autoReverse:Boolean = false;
      
      public function Transition()
      {
         super();
      }
   }
}

package mx.styles
{
   public class CSSCondition
   {
      
      private var _kind:String;
      
      private var _value:String;
      
      public function CSSCondition(param1:String, param2:String)
      {
         super();
         this._kind = param1;
         this._value = param2;
      }
      
      public function get kind() : String
      {
         return this._kind;
      }
      
      public function get specificity() : int
      {
         if(this.kind == CSSConditionKind.ID)
         {
            return 100;
         }
         if(this.kind == CSSConditionKind.CLASS)
         {
            return 10;
         }
         if(this.kind == CSSConditionKind.PSEUDO)
         {
            return 10;
         }
         return 0;
      }
      
      public function get value() : String
      {
         return this._value;
      }
      
      public function matchesStyleClient(param1:IAdvancedStyleClient) : Boolean
      {
         var _loc3_:Array = null;
         var _loc4_:uint = 0;
         var _loc2_:Boolean = false;
         if(this.kind == CSSConditionKind.CLASS)
         {
            if(param1.styleName != null && param1.styleName is String)
            {
               _loc3_ = param1.styleName.split(/\s+/);
               _loc4_ = 0;
               while(_loc4_ < _loc3_.length)
               {
                  if(_loc3_[_loc4_] == this.value)
                  {
                     _loc2_ = true;
                     break;
                  }
                  _loc4_++;
               }
            }
         }
         else if(this.kind == CSSConditionKind.ID)
         {
            if(param1.id == this.value)
            {
               _loc2_ = true;
            }
         }
         else if(this.kind == CSSConditionKind.PSEUDO)
         {
            if(param1.matchesCSSState(this.value))
            {
               _loc2_ = true;
            }
         }
         return _loc2_;
      }
      
      public function toString() : String
      {
         var _loc1_:String = null;
         if(this.kind == CSSConditionKind.CLASS)
         {
            _loc1_ = "." + this.value;
         }
         else if(this.kind == CSSConditionKind.ID)
         {
            _loc1_ = "#" + this.value;
         }
         else if(this.kind == CSSConditionKind.PSEUDO)
         {
            _loc1_ = ":" + this.value;
         }
         else
         {
            _loc1_ = "";
         }
         return _loc1_;
      }
   }
}

package mx.styles
{
   public final class CSSConditionKind
   {
      
      public static const CLASS:String = "class";
      
      public static const ID:String = "id";
      
      public static const PSEUDO:String = "pseudo";
      
      public function CSSConditionKind()
      {
         super();
      }
   }
}

package mx.styles
{
   import flash.display.DisplayObject;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class CSSMergedStyleDeclaration extends CSSStyleDeclaration
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var style:CSSStyleDeclaration;
      
      private var parentStyle:CSSStyleDeclaration;
      
      private var updateOverrides:Boolean;
      
      private var _defaultFactory:Function;
      
      private var _factory:Function;
      
      public function CSSMergedStyleDeclaration(param1:CSSStyleDeclaration, param2:CSSStyleDeclaration, param3:Object = null, param4:IStyleManager2 = null, param5:Boolean = false)
      {
         var _loc6_:uint = 0;
         var _loc7_:uint = 0;
         var _loc8_:Array = null;
         super(param3,param4,param5);
         this.style = param1;
         this.parentStyle = param2;
         if(Boolean(param1) && Boolean(param1.mx_internal::effects))
         {
            mx_internal::effects = [];
            _loc8_ = param1.mx_internal::effects;
            _loc7_ = _loc8_.length;
            _loc6_ = 0;
            while(_loc6_ < _loc7_)
            {
               mx_internal::effects[_loc6_] = _loc8_[_loc6_];
               _loc6_++;
            }
         }
         if(Boolean(param2) && Boolean(param2.mx_internal::effects))
         {
            if(!mx_internal::effects)
            {
               mx_internal::effects = [];
            }
            _loc8_ = param2.mx_internal::effects;
            _loc7_ = _loc8_.length;
            _loc6_ = 0;
            while(_loc6_ < _loc7_)
            {
               mx_internal::effects[_loc6_] = _loc8_[_loc6_];
               if(mx_internal::effects.indexOf(_loc8_[_loc6_]) == -1)
               {
                  mx_internal::effects[_loc6_] = _loc8_[_loc6_];
               }
               _loc6_++;
            }
         }
         this.updateOverrides = true;
      }
      
      override public function get defaultFactory() : Function
      {
         if(this._defaultFactory != null)
         {
            return this._defaultFactory;
         }
         if(this.style != null && this.style.defaultFactory != null || this.parentStyle != null && this.parentStyle.defaultFactory != null)
         {
            this._defaultFactory = function():void
            {
               if(Boolean(parentStyle) && parentStyle.defaultFactory != null)
               {
                  parentStyle.defaultFactory.apply(this);
               }
               if(Boolean(style) && style.defaultFactory != null)
               {
                  style.defaultFactory.apply(this);
               }
            };
         }
         return this._defaultFactory;
      }
      
      override public function set defaultFactory(param1:Function) : void
      {
      }
      
      override public function get factory() : Function
      {
         if(this._factory != null)
         {
            return this._factory;
         }
         if(this.style != null && this.style.factory != null || this.parentStyle != null && this.parentStyle.factory != null)
         {
            this._factory = function():void
            {
               if(Boolean(parentStyle) && parentStyle.factory != null)
               {
                  parentStyle.factory.apply(this);
               }
               if(Boolean(style) && style.factory != null)
               {
                  style.factory.apply(this);
               }
            };
         }
         return this._factory;
      }
      
      override public function set factory(param1:Function) : void
      {
      }
      
      override public function get overrides() : Object
      {
         var _loc1_:Object = null;
         var _loc3_:Object = null;
         var _loc4_:Object = null;
         if(!this.updateOverrides)
         {
            return super.overrides;
         }
         var _loc2_:Object = null;
         if(Boolean(this.style) && Boolean(this.style.overrides))
         {
            _loc2_ = [];
            _loc3_ = this.style.overrides;
            for(_loc1_ in _loc3_)
            {
               _loc2_[_loc1_] = _loc3_[_loc1_];
            }
         }
         if(Boolean(this.parentStyle) && Boolean(this.parentStyle.overrides))
         {
            if(!_loc2_)
            {
               _loc2_ = [];
            }
            _loc4_ = this.parentStyle.overrides;
            for(_loc1_ in _loc4_)
            {
               if(_loc2_[_loc1_] === undefined)
               {
                  _loc2_[_loc1_] = _loc4_[_loc1_];
               }
            }
         }
         super.overrides = _loc2_;
         this.updateOverrides = false;
         return _loc2_;
      }
      
      override public function set overrides(param1:Object) : void
      {
      }
      
      override public function setStyle(param1:String, param2:*) : void
      {
      }
      
      override mx_internal function addStyleToProtoChain(param1:Object, param2:DisplayObject, param3:Object = null) : Object
      {
         if(this.style)
         {
            return this.style.mx_internal::addStyleToProtoChain(param1,param2,param3);
         }
         if(this.parentStyle)
         {
            return this.parentStyle.mx_internal::addStyleToProtoChain(param1,param2,param3);
         }
         return param1;
      }
   }
}

package mx.styles
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class CSSSelector
   {
      
      private var _ancestor:CSSSelector;
      
      private var _conditions:Array;
      
      private var _subject:String;
      
      public function CSSSelector(param1:String, param2:Array = null, param3:CSSSelector = null)
      {
         super();
         this._subject = param1;
         this._conditions = param2;
         this._ancestor = param3;
      }
      
      public function get ancestor() : CSSSelector
      {
         return this._ancestor;
      }
      
      public function get conditions() : Array
      {
         return this._conditions;
      }
      
      public function get specificity() : int
      {
         var _loc2_:CSSCondition = null;
         var _loc1_:int = 0;
         if("*" != this.subject && "global" != this.subject && "" != this.subject)
         {
            _loc1_ = 1;
         }
         if(this.conditions != null)
         {
            for each(_loc2_ in this.conditions)
            {
               _loc1_ += _loc2_.specificity;
            }
         }
         if(this.ancestor != null)
         {
            _loc1_ += this.ancestor.specificity;
         }
         return _loc1_;
      }
      
      public function get subject() : String
      {
         return this._subject;
      }
      
      public function matchesStyleClient(param1:IAdvancedStyleClient) : Boolean
      {
         var _loc4_:IAdvancedStyleClient = null;
         var _loc2_:Boolean = false;
         var _loc3_:CSSCondition = null;
         if(this.ancestor)
         {
            if(this.conditions)
            {
               for each(_loc3_ in this.conditions)
               {
                  _loc2_ = _loc3_.matchesStyleClient(param1);
                  if(!_loc2_)
                  {
                     return false;
                  }
               }
            }
            _loc2_ = false;
            _loc4_ = param1.styleParent;
            while(_loc4_ != null)
            {
               if(_loc4_.matchesCSSType(this.ancestor.subject) || "*" == this.ancestor.subject)
               {
                  _loc2_ = this.ancestor.matchesStyleClient(_loc4_);
                  if(_loc2_)
                  {
                     break;
                  }
               }
               _loc4_ = _loc4_.styleParent;
            }
         }
         else
         {
            if(this.subject == "*" || this.subject == "" || param1.matchesCSSType(this.subject))
            {
               _loc2_ = true;
            }
            if(_loc2_ && this.conditions != null)
            {
               for each(_loc3_ in this.conditions)
               {
                  _loc2_ = _loc3_.matchesStyleClient(param1);
                  if(!_loc2_)
                  {
                     return false;
                  }
               }
            }
         }
         return _loc2_;
      }
      
      mx_internal function getPseudoCondition() : String
      {
         var _loc2_:CSSCondition = null;
         var _loc1_:String = null;
         if(this.conditions)
         {
            for each(_loc2_ in this.conditions)
            {
               if(_loc2_.kind == CSSConditionKind.PSEUDO)
               {
                  _loc1_ = _loc2_.value;
                  break;
               }
            }
         }
         return _loc1_;
      }
      
      public function toString() : String
      {
         var _loc1_:String = null;
         var _loc2_:CSSCondition = null;
         if(this.ancestor != null)
         {
            _loc1_ = this.ancestor.toString() + " " + this.subject;
         }
         else
         {
            _loc1_ = this.subject;
         }
         if(this.conditions != null)
         {
            for each(_loc2_ in this.conditions)
            {
               _loc1_ += _loc2_.toString();
            }
         }
         return _loc1_;
      }
   }
}

package mx.styles
{
   import flash.display.DisplayObject;
   import flash.events.EventDispatcher;
   import flash.utils.Dictionary;
   import mx.core.Singleton;
   import mx.core.mx_internal;
   import mx.managers.ISystemManager;
   import mx.managers.SystemManagerGlobals;
   import mx.utils.ObjectUtil;
   
   use namespace mx_internal;
   
   public class CSSStyleDeclaration extends EventDispatcher
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static const NOT_A_COLOR:uint = 4294967295;
      
      private static const FILTERMAP_PROP:String = "__reserved__filterMap";
      
      private var clones:Dictionary = new Dictionary(true);
      
      mx_internal var selectorRefCount:int = 0;
      
      mx_internal var effects:Array;
      
      private var styleManager:IStyleManager2;
      
      private var _defaultFactory:Function;
      
      private var _factory:Function;
      
      private var _overrides:Object;
      
      private var _selector:CSSSelector;
      
      private var _selectorString:String;
      
      public function CSSStyleDeclaration(param1:Object = null, param2:IStyleManager2 = null, param3:Boolean = true)
      {
         super();
         if(!param2)
         {
            param2 = Singleton.getInstance("mx.styles::IStyleManager2") as IStyleManager2;
         }
         this.styleManager = param2;
         if(param1)
         {
            if(param1 is CSSSelector)
            {
               this.selector = param1 as CSSSelector;
            }
            else
            {
               this.mx_internal::selectorString = param1.toString();
            }
            if(param3)
            {
               param2.setStyleDeclaration(this.mx_internal::selectorString,this,false);
            }
         }
      }
      
      public function get defaultFactory() : Function
      {
         return this._defaultFactory;
      }
      
      public function set defaultFactory(param1:Function) : void
      {
         this._defaultFactory = param1;
      }
      
      public function get factory() : Function
      {
         return this._factory;
      }
      
      public function set factory(param1:Function) : void
      {
         this._factory = param1;
      }
      
      public function get overrides() : Object
      {
         return this._overrides;
      }
      
      public function set overrides(param1:Object) : void
      {
         this._overrides = param1;
      }
      
      public function get selector() : CSSSelector
      {
         return this._selector;
      }
      
      public function set selector(param1:CSSSelector) : void
      {
         this._selector = param1;
         this._selectorString = null;
      }
      
      mx_internal function get selectorString() : String
      {
         if(this._selectorString == null && this._selector != null)
         {
            this._selectorString = this._selector.toString();
         }
         return this._selectorString;
      }
      
      mx_internal function set selectorString(param1:String) : void
      {
         var _loc2_:CSSCondition = null;
         if(param1.charAt(0) == ".")
         {
            _loc2_ = new CSSCondition(CSSConditionKind.CLASS,param1.substr(1));
            this._selector = new CSSSelector("",[_loc2_]);
         }
         else
         {
            this._selector = new CSSSelector(param1);
         }
         this._selectorString = param1;
      }
      
      public function get specificity() : int
      {
         return this._selector ? this._selector.specificity : 0;
      }
      
      public function get subject() : String
      {
         if(this._selector != null)
         {
            if(this._selector.subject == "" && Boolean(this._selector.conditions))
            {
               return "*";
            }
            return this._selector.subject;
         }
         return null;
      }
      
      mx_internal function getPseudoCondition() : String
      {
         return this.selector != null ? this.selector.mx_internal::getPseudoCondition() : null;
      }
      
      mx_internal function isAdvanced() : Boolean
      {
         var _loc1_:CSSCondition = null;
         if(this.selector != null)
         {
            if(this.selector.ancestor)
            {
               return true;
            }
            if(this.selector.conditions)
            {
               if(this.subject != "*" && this.subject != "global")
               {
                  return true;
               }
               for each(_loc1_ in this.selector.conditions)
               {
                  if(_loc1_.kind != CSSConditionKind.CLASS)
                  {
                     return true;
                  }
               }
            }
         }
         return false;
      }
      
      public function matchesStyleClient(param1:IAdvancedStyleClient) : Boolean
      {
         return this.selector != null ? this.selector.matchesStyleClient(param1) : false;
      }
      
      mx_internal function equals(param1:CSSStyleDeclaration) : Boolean
      {
         var _loc2_:Object = null;
         if(param1 == null)
         {
            return false;
         }
         if(ObjectUtil.compare(this.overrides,param1.overrides) != 0)
         {
            return false;
         }
         if(this.factory == null && param1.factory != null || this.factory != null && param1.factory == null)
         {
            return false;
         }
         if(this.factory != null)
         {
            if(ObjectUtil.compare(new this.factory(),new param1.factory()) != 0)
            {
               return false;
            }
         }
         if(this.defaultFactory == null && param1.defaultFactory != null || this.defaultFactory != null && param1.defaultFactory == null)
         {
            return false;
         }
         if(this.defaultFactory != null)
         {
            if(ObjectUtil.compare(new this.defaultFactory(),new param1.defaultFactory()) != 0)
            {
               return false;
            }
         }
         if(ObjectUtil.compare(this.mx_internal::effects,param1.mx_internal::effects))
         {
            return false;
         }
         return true;
      }
      
      public function getStyle(param1:String) : *
      {
         var _loc2_:* = undefined;
         var _loc3_:* = undefined;
         if(this.overrides)
         {
            if(param1 in this.overrides && this.overrides[param1] === undefined)
            {
               return undefined;
            }
            _loc3_ = this.overrides[param1];
            if(_loc3_ !== undefined)
            {
               return _loc3_;
            }
         }
         if(this.factory != null)
         {
            this.factory.prototype = {};
            _loc2_ = new this.factory();
            _loc3_ = _loc2_[param1];
            if(_loc3_ !== undefined)
            {
               return _loc3_;
            }
         }
         if(this.defaultFactory != null)
         {
            this.defaultFactory.prototype = {};
            _loc2_ = new this.defaultFactory();
            _loc3_ = _loc2_[param1];
            if(_loc3_ !== undefined)
            {
               return _loc3_;
            }
         }
         return undefined;
      }
      
      public function setStyle(param1:String, param2:*) : void
      {
         var _loc7_:int = 0;
         var _loc8_:ISystemManager = null;
         var _loc9_:Object = null;
         var _loc3_:Object = this.getStyle(param1);
         var _loc4_:Boolean = false;
         if(this.mx_internal::selectorRefCount > 0 && this.factory == null && this.defaultFactory == null && !this.overrides && _loc3_ !== param2)
         {
            _loc4_ = true;
         }
         if(param2 !== undefined)
         {
            this.mx_internal::setLocalStyle(param1,param2);
         }
         else
         {
            if(param2 == _loc3_)
            {
               return;
            }
            this.mx_internal::setLocalStyle(param1,param2);
         }
         var _loc5_:Array = SystemManagerGlobals.topLevelSystemManagers;
         var _loc6_:int = int(_loc5_.length);
         if(_loc4_)
         {
            _loc7_ = 0;
            while(_loc7_ < _loc6_)
            {
               _loc8_ = _loc5_[_loc7_];
               _loc9_ = _loc8_.getImplementation("mx.managers::ISystemManagerChildManager");
               _loc9_.regenerateStyleCache(true);
               _loc7_++;
            }
         }
         _loc7_ = 0;
         while(_loc7_ < _loc6_)
         {
            _loc8_ = _loc5_[_loc7_];
            _loc9_ = _loc8_.getImplementation("mx.managers::ISystemManagerChildManager");
            _loc9_.notifyStyleChangeInChildren(param1,true);
            _loc7_++;
         }
      }
      
      mx_internal function setLocalStyle(param1:String, param2:*) : void
      {
         var _loc4_:Object = null;
         var _loc5_:Number = NaN;
         var _loc3_:Object = this.getStyle(param1);
         if(param2 === undefined)
         {
            this.clearStyleAttr(param1);
            return;
         }
         if(param2 is String)
         {
            if(!this.styleManager)
            {
               this.styleManager = Singleton.getInstance("mx.styles::IStyleManager2") as IStyleManager2;
            }
            _loc5_ = Number(this.styleManager.getColorName(param2));
            if(_loc5_ != NOT_A_COLOR)
            {
               param2 = _loc5_;
            }
         }
         if(this.defaultFactory != null)
         {
            _loc4_ = new this.defaultFactory();
            if(_loc4_[param1] !== param2)
            {
               if(!this.overrides)
               {
                  this.overrides = {};
               }
               this.overrides[param1] = param2;
            }
            else if(this.overrides)
            {
               delete this.overrides[param1];
            }
         }
         if(this.factory != null)
         {
            _loc4_ = new this.factory();
            if(_loc4_[param1] !== param2)
            {
               if(!this.overrides)
               {
                  this.overrides = {};
               }
               this.overrides[param1] = param2;
            }
            else if(this.overrides)
            {
               delete this.overrides[param1];
            }
         }
         if(this.defaultFactory == null && this.factory == null)
         {
            if(!this.overrides)
            {
               this.overrides = {};
            }
            this.overrides[param1] = param2;
         }
         this.mx_internal::updateClones(param1,param2);
      }
      
      public function clearStyle(param1:String) : void
      {
         this.setStyle(param1,undefined);
      }
      
      mx_internal function createProtoChainRoot() : Object
      {
         var _loc1_:Object = {};
         if(this.defaultFactory != null)
         {
            this.defaultFactory.prototype = _loc1_;
            _loc1_ = new this.defaultFactory();
         }
         if(this.factory != null)
         {
            this.factory.prototype = _loc1_;
            _loc1_ = new this.factory();
         }
         this.clones[_loc1_] = 1;
         return _loc1_;
      }
      
      mx_internal function addStyleToProtoChain(param1:Object, param2:DisplayObject, param3:Object = null) : Object
      {
         var objectFactory:Object;
         var parentStyle:CSSStyleDeclaration = null;
         var p:String = null;
         var emptyObjectFactory:Function = null;
         var filteredChain:Object = null;
         var filterObjectFactory:Function = null;
         var i:String = null;
         var chain:Object = param1;
         var target:DisplayObject = param2;
         var filterMap:Object = param3;
         var nodeAddedToChain:Boolean = false;
         var originalChain:Object = chain;
         if(filterMap)
         {
            chain = {};
         }
         if(this.styleManager.parent)
         {
            parentStyle = this.styleManager.parent.getStyleDeclaration(this.mx_internal::selectorString);
            if(parentStyle)
            {
               chain = parentStyle.mx_internal::addStyleToProtoChain(chain,target,filterMap);
            }
         }
         if(this.defaultFactory != null)
         {
            this.defaultFactory.prototype = chain;
            chain = new this.defaultFactory();
            nodeAddedToChain = true;
         }
         objectFactory = null;
         if(this.factory != null)
         {
            objectFactory = new this.factory();
            this.factory.prototype = chain;
            chain = new this.factory();
            nodeAddedToChain = true;
         }
         if(this.overrides)
         {
            if(this.defaultFactory == null && this.factory == null)
            {
               emptyObjectFactory = function():void
               {
               };
               emptyObjectFactory.prototype = chain;
               chain = new emptyObjectFactory();
               nodeAddedToChain = true;
            }
            for(p in this.overrides)
            {
               if(this.overrides[p] === undefined)
               {
                  delete chain[p];
               }
               else
               {
                  chain[p] = this.overrides[p];
               }
            }
         }
         if(filterMap)
         {
            if(nodeAddedToChain)
            {
               filteredChain = {};
               filterObjectFactory = function():void
               {
               };
               filterObjectFactory.prototype = originalChain;
               filteredChain = new filterObjectFactory();
               for(i in chain)
               {
                  if(filterMap[i] != null)
                  {
                     filteredChain[filterMap[i]] = chain[i];
                  }
               }
               chain = filteredChain;
               chain[FILTERMAP_PROP] = filterMap;
            }
            else
            {
               chain = originalChain;
            }
         }
         if(nodeAddedToChain)
         {
            this.clones[chain] = 1;
         }
         return chain;
      }
      
      mx_internal function clearOverride(param1:String) : void
      {
         if(Boolean(this.overrides) && this.overrides[param1] !== undefined)
         {
            delete this.overrides[param1];
         }
      }
      
      private function clearStyleAttr(param1:String) : void
      {
         var _loc2_:* = undefined;
         if(!this.overrides)
         {
            this.overrides = {};
         }
         this.overrides[param1] = undefined;
         for(_loc2_ in this.clones)
         {
            delete _loc2_[param1];
         }
      }
      
      mx_internal function updateClones(param1:String, param2:*) : void
      {
         var _loc3_:* = undefined;
         var _loc4_:Object = null;
         for(_loc3_ in this.clones)
         {
            _loc4_ = _loc3_[FILTERMAP_PROP];
            if(_loc4_)
            {
               if(_loc4_[param1] != null)
               {
                  _loc3_[_loc4_[param1]] = param2;
               }
            }
            else
            {
               _loc3_[param1] = param2;
            }
         }
      }
   }
}

package mx.styles
{
   public interface IAdvancedStyleClient extends IStyleClient
   {
      
      function get id() : String;
      
      function get styleParent() : IAdvancedStyleClient;
      
      function stylesInitialized() : void;
      
      function matchesCSSState(param1:String) : Boolean;
      
      function matchesCSSType(param1:String) : Boolean;
   }
}

package mx.styles
{
   public interface ISimpleStyleClient
   {
      
      function get styleName() : Object;
      
      function set styleName(param1:Object) : void;
      
      function styleChanged(param1:String) : void;
   }
}

package mx.styles
{
   public interface IStyleClient extends ISimpleStyleClient
   {
      
      function get className() : String;
      
      function get inheritingStyles() : Object;
      
      function set inheritingStyles(param1:Object) : void;
      
      function get nonInheritingStyles() : Object;
      
      function set nonInheritingStyles(param1:Object) : void;
      
      function get styleDeclaration() : CSSStyleDeclaration;
      
      function set styleDeclaration(param1:CSSStyleDeclaration) : void;
      
      function getStyle(param1:String) : *;
      
      function setStyle(param1:String, param2:*) : void;
      
      function clearStyle(param1:String) : void;
      
      function getClassStyleDeclarations() : Array;
      
      function notifyStyleChangeInChildren(param1:String, param2:Boolean) : void;
      
      function regenerateStyleCache(param1:Boolean) : void;
      
      function registerEffects(param1:Array) : void;
   }
}

package mx.styles
{
   import flash.events.IEventDispatcher;
   import flash.system.ApplicationDomain;
   import flash.system.SecurityDomain;
   
   public interface IStyleManager
   {
      
      function get inheritingStyles() : Object;
      
      function set inheritingStyles(param1:Object) : void;
      
      function get stylesRoot() : Object;
      
      function set stylesRoot(param1:Object) : void;
      
      function get typeSelectorCache() : Object;
      
      function set typeSelectorCache(param1:Object) : void;
      
      function getStyleDeclaration(param1:String) : CSSStyleDeclaration;
      
      function setStyleDeclaration(param1:String, param2:CSSStyleDeclaration, param3:Boolean) : void;
      
      function clearStyleDeclaration(param1:String, param2:Boolean) : void;
      
      function registerInheritingStyle(param1:String) : void;
      
      function isInheritingStyle(param1:String) : Boolean;
      
      function isInheritingTextFormatStyle(param1:String) : Boolean;
      
      function registerSizeInvalidatingStyle(param1:String) : void;
      
      function isSizeInvalidatingStyle(param1:String) : Boolean;
      
      function registerParentSizeInvalidatingStyle(param1:String) : void;
      
      function isParentSizeInvalidatingStyle(param1:String) : Boolean;
      
      function registerParentDisplayListInvalidatingStyle(param1:String) : void;
      
      function isParentDisplayListInvalidatingStyle(param1:String) : Boolean;
      
      function registerColorName(param1:String, param2:uint) : void;
      
      function isColorName(param1:String) : Boolean;
      
      function getColorName(param1:Object) : uint;
      
      function getColorNames(param1:Array) : void;
      
      function isValidStyleValue(param1:*) : Boolean;
      
      function loadStyleDeclarations(param1:String, param2:Boolean = true, param3:Boolean = false, param4:ApplicationDomain = null, param5:SecurityDomain = null) : IEventDispatcher;
      
      function unloadStyleDeclarations(param1:String, param2:Boolean = true) : void;
      
      function initProtoChainRoots() : void;
      
      function styleDeclarationsChanged() : void;
   }
}

package mx.styles
{
   import flash.events.IEventDispatcher;
   import flash.system.ApplicationDomain;
   import flash.system.SecurityDomain;
   
   public interface IStyleManager2 extends IStyleManager
   {
      
      function get parent() : IStyleManager2;
      
      function get qualifiedTypeSelectors() : Boolean;
      
      function set qualifiedTypeSelectors(param1:Boolean) : void;
      
      function get selectors() : Array;
      
      function get typeHierarchyCache() : Object;
      
      function set typeHierarchyCache(param1:Object) : void;
      
      function getStyleDeclarations(param1:String) : Array;
      
      function getMergedStyleDeclaration(param1:String) : CSSStyleDeclaration;
      
      function hasPseudoCondition(param1:String) : Boolean;
      
      function hasAdvancedSelectors() : Boolean;
      
      function loadStyleDeclarations2(param1:String, param2:Boolean = true, param3:ApplicationDomain = null, param4:SecurityDomain = null) : IEventDispatcher;
   }
}

package mx.styles
{
   public interface IStyleModule
   {
      
      function setStyleDeclarations(param1:IStyleManager2) : void;
      
      function unload() : void;
   }
}

package mx.styles
{
   import flash.events.IEventDispatcher;
   import flash.system.ApplicationDomain;
   import flash.system.SecurityDomain;
   import mx.core.IFlexModuleFactory;
   import mx.core.Singleton;
   import mx.core.mx_internal;
   import mx.managers.SystemManagerGlobals;
   
   use namespace mx_internal;
   
   public class StyleManager
   {
      
      private static var implClassDependency:StyleManagerImpl;
      
      private static var _impl:IStyleManager2;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static const NOT_A_COLOR:uint = 4294967295;
      
      public function StyleManager()
      {
         super();
      }
      
      private static function get impl() : IStyleManager2
      {
         if(!_impl)
         {
            _impl = IStyleManager2(Singleton.getInstance("mx.styles::IStyleManager2"));
         }
         return _impl;
      }
      
      public static function getStyleManager(param1:IFlexModuleFactory) : IStyleManager2
      {
         if(!param1)
         {
            param1 = SystemManagerGlobals.topLevelSystemManagers[0];
         }
         var _loc2_:IStyleManager2 = IStyleManager2(param1.getImplementation("mx.styles::IStyleManager2"));
         if(_loc2_ == null)
         {
            _loc2_ = impl;
         }
         return _loc2_;
      }
      
      mx_internal static function get stylesRoot() : Object
      {
         return impl.stylesRoot;
      }
      
      mx_internal static function set stylesRoot(param1:Object) : void
      {
         impl.stylesRoot = param1;
      }
      
      mx_internal static function get inheritingStyles() : Object
      {
         return impl.inheritingStyles;
      }
      
      mx_internal static function set inheritingStyles(param1:Object) : void
      {
         impl.inheritingStyles = param1;
      }
      
      mx_internal static function get typeHierarchyCache() : Object
      {
         return impl.typeHierarchyCache;
      }
      
      mx_internal static function set typeHierarchyCache(param1:Object) : void
      {
         impl.typeHierarchyCache = param1;
      }
      
      mx_internal static function get typeSelectorCache() : Object
      {
         return impl.typeSelectorCache;
      }
      
      mx_internal static function set typeSelectorCache(param1:Object) : void
      {
         impl.typeSelectorCache = param1;
      }
      
      mx_internal static function initProtoChainRoots() : void
      {
         impl.initProtoChainRoots();
      }
      
      public static function get selectors() : Array
      {
         return impl.selectors;
      }
      
      public static function getStyleDeclaration(param1:String) : CSSStyleDeclaration
      {
         return impl.getStyleDeclaration(param1);
      }
      
      public static function setStyleDeclaration(param1:String, param2:CSSStyleDeclaration, param3:Boolean) : void
      {
         impl.setStyleDeclaration(param1,param2,param3);
      }
      
      public static function clearStyleDeclaration(param1:String, param2:Boolean) : void
      {
         impl.clearStyleDeclaration(param1,param2);
      }
      
      mx_internal static function styleDeclarationsChanged() : void
      {
         impl.styleDeclarationsChanged();
      }
      
      public static function registerInheritingStyle(param1:String) : void
      {
         impl.registerInheritingStyle(param1);
      }
      
      public static function isInheritingStyle(param1:String) : Boolean
      {
         return impl.isInheritingStyle(param1);
      }
      
      public static function isInheritingTextFormatStyle(param1:String) : Boolean
      {
         return impl.isInheritingTextFormatStyle(param1);
      }
      
      public static function registerSizeInvalidatingStyle(param1:String) : void
      {
         impl.registerSizeInvalidatingStyle(param1);
      }
      
      public static function isSizeInvalidatingStyle(param1:String) : Boolean
      {
         return impl.isSizeInvalidatingStyle(param1);
      }
      
      public static function registerParentSizeInvalidatingStyle(param1:String) : void
      {
         impl.registerParentSizeInvalidatingStyle(param1);
      }
      
      public static function isParentSizeInvalidatingStyle(param1:String) : Boolean
      {
         return impl.isParentSizeInvalidatingStyle(param1);
      }
      
      public static function registerParentDisplayListInvalidatingStyle(param1:String) : void
      {
         impl.registerParentDisplayListInvalidatingStyle(param1);
      }
      
      public static function isParentDisplayListInvalidatingStyle(param1:String) : Boolean
      {
         return impl.isParentDisplayListInvalidatingStyle(param1);
      }
      
      public static function registerColorName(param1:String, param2:uint) : void
      {
         impl.registerColorName(param1,param2);
      }
      
      public static function isColorName(param1:String) : Boolean
      {
         return impl.isColorName(param1);
      }
      
      public static function getColorName(param1:Object) : uint
      {
         return impl.getColorName(param1);
      }
      
      public static function getColorNames(param1:Array) : void
      {
         impl.getColorNames(param1);
      }
      
      public static function isValidStyleValue(param1:*) : Boolean
      {
         return impl.isValidStyleValue(param1);
      }
      
      public static function loadStyleDeclarations(param1:String, param2:Boolean = true, param3:Boolean = false, param4:ApplicationDomain = null, param5:SecurityDomain = null) : IEventDispatcher
      {
         return impl.loadStyleDeclarations2(param1,param2,param4,param5);
      }
      
      public static function unloadStyleDeclarations(param1:String, param2:Boolean = true) : void
      {
         impl.unloadStyleDeclarations(param1,param2);
      }
   }
}

package mx.styles
{
   import flash.display.DisplayObject;
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.events.IEventDispatcher;
   import flash.events.TimerEvent;
   import flash.system.ApplicationDomain;
   import flash.system.SecurityDomain;
   import flash.utils.Timer;
   import flash.utils.getDefinitionByName;
   import mx.core.FlexVersion;
   import mx.core.IFlexModuleFactory;
   import mx.core.mx_internal;
   import mx.events.FlexChangeEvent;
   import mx.events.ModuleEvent;
   import mx.events.Request;
   import mx.events.StyleEvent;
   import mx.managers.ISystemManager;
   import mx.managers.SystemManagerGlobals;
   import mx.modules.IModuleInfo;
   import mx.modules.ModuleManager;
   import mx.resources.IResourceManager;
   import mx.resources.ResourceManager;
   
   use namespace mx_internal;
   
   public class StyleManagerImpl extends EventDispatcher implements IStyleManager2
   {
      
      private static var instance:IStyleManager2;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static var _qualifiedTypeSelectors:Boolean = true;
      
      private var inheritingTextFormatStyles:Object;
      
      private var sizeInvalidatingStyles:Object;
      
      private var parentSizeInvalidatingStyles:Object;
      
      private var parentDisplayListInvalidatingStyles:Object;
      
      private var colorNames:Object;
      
      private var _hasAdvancedSelectors:Boolean;
      
      private var _pseudoCSSStates:Object;
      
      private var _selectors:Object;
      
      private var styleModules:Object;
      
      private var _subjects:Object;
      
      private var resourceManager:IResourceManager;
      
      private var mergedInheritingStylesCache:Object;
      
      private var moduleFactory:IFlexModuleFactory;
      
      private var _parent:IStyleManager2;
      
      private var _stylesRoot:Object;
      
      private var _inheritingStyles:Object;
      
      private var _typeHierarchyCache:Object;
      
      private var _typeSelectorCache:Object;
      
      public function StyleManagerImpl(param1:IFlexModuleFactory)
      {
         var _loc2_:Request = null;
         var _loc3_:IFlexModuleFactory = null;
         this.inheritingTextFormatStyles = {
            "align":true,
            "bold":true,
            "color":true,
            "font":true,
            "indent":true,
            "italic":true,
            "size":true
         };
         this.sizeInvalidatingStyles = {
            "alignmentBaseline":true,
            "baselineShift":true,
            "blockProgression":true,
            "borderStyle":true,
            "borderThickness":true,
            "breakOpportunity":true,
            "cffHinting":true,
            "columnCount":true,
            "columnGap":true,
            "columnWidth":true,
            "digitCase":true,
            "digitWidth":true,
            "direction":true,
            "dominantBaseline":true,
            "firstBaselineOffset":true,
            "fontAntiAliasType":true,
            "fontFamily":true,
            "fontGridFitType":true,
            "fontLookup":true,
            "fontSharpness":true,
            "fontSize":true,
            "fontStyle":true,
            "fontThickness":true,
            "fontWeight":true,
            "headerHeight":true,
            "horizontalAlign":true,
            "horizontalGap":true,
            "justificationRule":true,
            "justificationStyle":true,
            "kerning":true,
            "leading":true,
            "leadingModel":true,
            "letterSpacing":true,
            "ligatureLevel":true,
            "lineBreak":true,
            "lineHeight":true,
            "lineThrough":true,
            "locale":true,
            "marginBottom":true,
            "marginLeft":true,
            "marginRight":true,
            "marginTop":true,
            "paddingBottom":true,
            "paddingLeft":true,
            "paddingRight":true,
            "paddingTop":true,
            "paragraphEndIndent":true,
            "paragraphStartIndent":true,
            "paragraphSpaceAfter":true,
            "paragraphSpaceBefore":true,
            "renderingMode":true,
            "strokeWidth":true,
            "tabHeight":true,
            "tabWidth":true,
            "tabStops":true,
            "textAlign":true,
            "textAlignLast":true,
            "textDecoration":true,
            "textIndent":true,
            "textJustify":true,
            "textRotation":true,
            "tracking":true,
            "trackingLeft":true,
            "trackingRight":true,
            "typographicCase":true,
            "verticalAlign":true,
            "verticalGap":true,
            "whitespaceCollapse":true
         };
         this.parentSizeInvalidatingStyles = {
            "baseline":true,
            "bottom":true,
            "horizontalCenter":true,
            "left":true,
            "right":true,
            "top":true,
            "verticalCenter":true
         };
         this.parentDisplayListInvalidatingStyles = {
            "baseline":true,
            "bottom":true,
            "horizontalCenter":true,
            "left":true,
            "right":true,
            "top":true,
            "verticalCenter":true
         };
         this.colorNames = {
            "transparent":"transparent",
            "black":0,
            "blue":255,
            "green":32768,
            "gray":8421504,
            "silver":12632256,
            "lime":65280,
            "olive":8421376,
            "white":16777215,
            "yellow":16776960,
            "maroon":8388608,
            "navy":128,
            "red":16711680,
            "purple":8388736,
            "teal":32896,
            "fuchsia":16711935,
            "aqua":65535,
            "magenta":16711935,
            "cyan":65535,
            "halogreen":8453965,
            "haloblue":40447,
            "haloorange":16758272,
            "halosilver":11455193
         };
         this._selectors = {};
         this.styleModules = {};
         this._subjects = {};
         this.resourceManager = ResourceManager.getInstance();
         this._inheritingStyles = {};
         super();
         this.moduleFactory = param1;
         this.moduleFactory.registerImplementation("mx.styles::IStyleManager2",this);
         if(param1 is DisplayObject)
         {
            _loc2_ = new Request(Request.GET_PARENT_FLEX_MODULE_FACTORY_REQUEST);
            DisplayObject(param1).dispatchEvent(_loc2_);
            _loc3_ = _loc2_.value as IFlexModuleFactory;
            if(_loc3_)
            {
               this._parent = IStyleManager2(_loc3_.getImplementation("mx.styles::IStyleManager2"));
               if(this._parent is IEventDispatcher)
               {
                  IEventDispatcher(this._parent).addEventListener(FlexChangeEvent.STYLE_MANAGER_CHANGE,this.styleManagerChangeHandler,false,0,true);
               }
            }
         }
      }
      
      public static function getInstance() : IStyleManager2
      {
         if(!instance)
         {
            instance = IStyleManager2(IFlexModuleFactory(SystemManagerGlobals.topLevelSystemManagers[0]).getImplementation("mx.styles::IStyleManager2"));
            if(!instance)
            {
               instance = new StyleManagerImpl(SystemManagerGlobals.topLevelSystemManagers[0]);
            }
         }
         return instance;
      }
      
      public function get parent() : IStyleManager2
      {
         return this._parent;
      }
      
      public function get qualifiedTypeSelectors() : Boolean
      {
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            return false;
         }
         if(_qualifiedTypeSelectors)
         {
            return _qualifiedTypeSelectors;
         }
         if(this.parent)
         {
            return this.parent.qualifiedTypeSelectors;
         }
         return false;
      }
      
      public function set qualifiedTypeSelectors(param1:Boolean) : void
      {
         _qualifiedTypeSelectors = param1;
      }
      
      public function get stylesRoot() : Object
      {
         return this._stylesRoot;
      }
      
      public function set stylesRoot(param1:Object) : void
      {
         this._stylesRoot = param1;
      }
      
      public function get inheritingStyles() : Object
      {
         var _loc2_:Object = null;
         var _loc3_:Object = null;
         if(this.mergedInheritingStylesCache)
         {
            return this.mergedInheritingStylesCache;
         }
         var _loc1_:Object = this._inheritingStyles;
         if(this.parent)
         {
            _loc2_ = this.parent.inheritingStyles;
            for(_loc3_ in _loc2_)
            {
               if(_loc1_[_loc3_] === undefined)
               {
                  _loc1_[_loc3_] = _loc2_[_loc3_];
               }
            }
         }
         this.mergedInheritingStylesCache = _loc1_;
         return _loc1_;
      }
      
      public function set inheritingStyles(param1:Object) : void
      {
         this._inheritingStyles = param1;
         this.mergedInheritingStylesCache = null;
         if(hasEventListener(FlexChangeEvent.STYLE_MANAGER_CHANGE))
         {
            this.dispatchInheritingStylesChangeEvent();
         }
      }
      
      public function get typeHierarchyCache() : Object
      {
         if(this._typeHierarchyCache == null)
         {
            this._typeHierarchyCache = {};
         }
         return this._typeHierarchyCache;
      }
      
      public function set typeHierarchyCache(param1:Object) : void
      {
         this._typeHierarchyCache = param1;
      }
      
      public function get typeSelectorCache() : Object
      {
         if(this._typeSelectorCache == null)
         {
            this._typeSelectorCache = {};
         }
         return this._typeSelectorCache;
      }
      
      public function set typeSelectorCache(param1:Object) : void
      {
         this._typeSelectorCache = param1;
      }
      
      public function initProtoChainRoots() : void
      {
         var _loc1_:CSSStyleDeclaration = null;
         if(!this.stylesRoot)
         {
            _loc1_ = this.getMergedStyleDeclaration("global");
            if(_loc1_ != null)
            {
               this.stylesRoot = _loc1_.mx_internal::addStyleToProtoChain({},null);
            }
         }
      }
      
      public function get selectors() : Array
      {
         var _loc2_:String = null;
         var _loc3_:Array = null;
         var _loc1_:Array = [];
         for(_loc2_ in this._selectors)
         {
            _loc1_.push(_loc2_);
         }
         if(this.parent)
         {
            _loc3_ = this.parent.selectors;
            for(_loc2_ in _loc3_)
            {
               _loc1_.push(_loc2_);
            }
         }
         return _loc1_;
      }
      
      public function hasAdvancedSelectors() : Boolean
      {
         if(this._hasAdvancedSelectors)
         {
            return true;
         }
         if(this.parent)
         {
            return this.parent.hasAdvancedSelectors();
         }
         return false;
      }
      
      public function hasPseudoCondition(param1:String) : Boolean
      {
         if(this._pseudoCSSStates != null && this._pseudoCSSStates[param1] != null)
         {
            return true;
         }
         if(this.parent)
         {
            return this.parent.hasPseudoCondition(param1);
         }
         return false;
      }
      
      public function getStyleDeclarations(param1:String) : Array
      {
         var _loc3_:int = 0;
         var _loc4_:Array = null;
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            if(param1.charAt(0) != ".")
            {
               _loc3_ = int(param1.lastIndexOf("."));
               if(_loc3_ != -1)
               {
                  param1 = param1.substr(_loc3_ + 1);
               }
            }
         }
         var _loc2_:Array = null;
         if(this.parent)
         {
            _loc2_ = this.parent.getStyleDeclarations(param1);
         }
         if(!_loc2_)
         {
            _loc2_ = this._subjects[param1] as Array;
         }
         else
         {
            _loc4_ = this._subjects[param1] as Array;
            if(_loc4_)
            {
               _loc2_ = _loc2_.concat(_loc4_);
            }
         }
         return _loc2_;
      }
      
      private function isUnique(param1:*, param2:int, param3:Array) : Boolean
      {
         return param3.indexOf(param1) >= 0;
      }
      
      public function getStyleDeclaration(param1:String) : CSSStyleDeclaration
      {
         var _loc2_:int = 0;
         if(FlexVersion.compatibilityVersion < FlexVersion.VERSION_4_0)
         {
            if(param1.charAt(0) != ".")
            {
               _loc2_ = int(param1.lastIndexOf("."));
               if(_loc2_ != -1)
               {
                  param1 = param1.substr(_loc2_ + 1);
               }
            }
         }
         return this._selectors[param1];
      }
      
      public function getMergedStyleDeclaration(param1:String) : CSSStyleDeclaration
      {
         var _loc2_:CSSStyleDeclaration = this.getStyleDeclaration(param1);
         var _loc3_:CSSStyleDeclaration = null;
         if(this.parent)
         {
            _loc3_ = this.parent.getMergedStyleDeclaration(param1);
         }
         if(Boolean(_loc2_) || Boolean(_loc3_))
         {
            _loc2_ = new CSSMergedStyleDeclaration(_loc2_,_loc3_,_loc2_ ? _loc2_.mx_internal::selectorString : _loc3_.mx_internal::selectorString,this,false);
         }
         return _loc2_;
      }
      
      public function setStyleDeclaration(param1:String, param2:CSSStyleDeclaration, param3:Boolean) : void
      {
         var _loc6_:String = null;
         var _loc7_:Array = null;
         ++param2.mx_internal::selectorRefCount;
         this._selectors[param1] = param2;
         var _loc4_:String = param2.subject;
         if(param1)
         {
            if(!param2.subject)
            {
               param2.mx_internal::selectorString = param1;
               _loc4_ = param2.subject;
            }
            else if(param1 != param2.mx_internal::selectorString)
            {
               _loc6_ = param1.charAt(0);
               if(_loc6_ == "." || _loc6_ == ":" || _loc6_ == "#")
               {
                  _loc4_ = "*";
               }
               else
               {
                  _loc4_ = param1;
               }
               param2.mx_internal::selectorString = param1;
            }
         }
         if(_loc4_ != null)
         {
            _loc7_ = this._subjects[_loc4_] as Array;
            if(_loc7_ == null)
            {
               _loc7_ = [param2];
               this._subjects[_loc4_] = _loc7_;
            }
            else
            {
               _loc7_.push(param2);
            }
         }
         var _loc5_:String = param2.mx_internal::getPseudoCondition();
         if(_loc5_ != null)
         {
            if(this._pseudoCSSStates == null)
            {
               this._pseudoCSSStates = {};
            }
            this._pseudoCSSStates[_loc5_] = true;
         }
         if(param2.mx_internal::isAdvanced())
         {
            this._hasAdvancedSelectors = true;
         }
         if(this._typeSelectorCache)
         {
            this._typeSelectorCache = {};
         }
         if(param3)
         {
            this.styleDeclarationsChanged();
         }
      }
      
      public function clearStyleDeclaration(param1:String, param2:Boolean) : void
      {
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc6_:CSSStyleDeclaration = null;
         var _loc7_:Boolean = false;
         var _loc3_:CSSStyleDeclaration = this.getStyleDeclaration(param1);
         if(Boolean(_loc3_) && _loc3_.mx_internal::selectorRefCount > 0)
         {
            --_loc3_.mx_internal::selectorRefCount;
         }
         delete this._selectors[param1];
         if(Boolean(_loc3_) && Boolean(_loc3_.subject))
         {
            _loc4_ = this._subjects[_loc3_.subject] as Array;
            if(_loc4_)
            {
               _loc5_ = int(_loc4_.length - 1);
               while(_loc5_ >= 0)
               {
                  _loc6_ = _loc4_[_loc5_];
                  if((Boolean(_loc6_)) && _loc6_.mx_internal::selectorString == param1)
                  {
                     if(_loc4_.length == 1)
                     {
                        delete this._subjects[_loc3_.subject];
                     }
                     else
                     {
                        _loc4_.splice(_loc5_,1);
                     }
                  }
                  _loc5_--;
               }
            }
         }
         else
         {
            _loc7_ = false;
            for each(_loc4_ in this._subjects)
            {
               if(_loc4_)
               {
                  _loc5_ = int(_loc4_.length - 1);
                  while(_loc5_ >= 0)
                  {
                     _loc6_ = _loc4_[_loc5_];
                     if((Boolean(_loc6_)) && _loc6_.mx_internal::selectorString == param1)
                     {
                        _loc7_ = true;
                        if(_loc4_.length == 1)
                        {
                           delete this._subjects[_loc6_.subject];
                        }
                        else
                        {
                           _loc4_.splice(_loc5_,1);
                        }
                     }
                     _loc5_--;
                  }
                  if(_loc7_)
                  {
                     break;
                  }
               }
            }
         }
         if(param2)
         {
            this.styleDeclarationsChanged();
         }
      }
      
      public function styleDeclarationsChanged() : void
      {
         var _loc4_:ISystemManager = null;
         var _loc5_:Object = null;
         var _loc1_:Array = SystemManagerGlobals.topLevelSystemManagers;
         var _loc2_:int = int(_loc1_.length);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            _loc4_ = _loc1_[_loc3_];
            _loc5_ = _loc4_.getImplementation("mx.managers::ISystemManagerChildManager");
            Object(_loc5_).regenerateStyleCache(true);
            Object(_loc5_).notifyStyleChangeInChildren(null,true);
            _loc3_++;
         }
      }
      
      public function registerInheritingStyle(param1:String) : void
      {
         if(this._inheritingStyles[param1] != true)
         {
            this._inheritingStyles[param1] = true;
            this.mergedInheritingStylesCache = null;
            if(hasEventListener(FlexChangeEvent.STYLE_MANAGER_CHANGE))
            {
               this.dispatchInheritingStylesChangeEvent();
            }
         }
      }
      
      public function isInheritingStyle(param1:String) : Boolean
      {
         if(this.mergedInheritingStylesCache)
         {
            return this.mergedInheritingStylesCache[param1] == true;
         }
         if(this._inheritingStyles[param1] == true)
         {
            return true;
         }
         if(Boolean(this.parent) && Boolean(this.parent.isInheritingStyle(param1)))
         {
            return true;
         }
         return false;
      }
      
      public function isInheritingTextFormatStyle(param1:String) : Boolean
      {
         if(this.inheritingTextFormatStyles[param1] == true)
         {
            return true;
         }
         if(Boolean(this.parent) && Boolean(this.parent.isInheritingTextFormatStyle(param1)))
         {
            return true;
         }
         return false;
      }
      
      public function registerSizeInvalidatingStyle(param1:String) : void
      {
         this.sizeInvalidatingStyles[param1] = true;
      }
      
      public function isSizeInvalidatingStyle(param1:String) : Boolean
      {
         if(this.sizeInvalidatingStyles[param1] == true)
         {
            return true;
         }
         if(Boolean(this.parent) && Boolean(this.parent.isSizeInvalidatingStyle(param1)))
         {
            return true;
         }
         return false;
      }
      
      public function registerParentSizeInvalidatingStyle(param1:String) : void
      {
         this.parentSizeInvalidatingStyles[param1] = true;
      }
      
      public function isParentSizeInvalidatingStyle(param1:String) : Boolean
      {
         if(this.parentSizeInvalidatingStyles[param1] == true)
         {
            return true;
         }
         if(Boolean(this.parent) && Boolean(this.parent.isParentSizeInvalidatingStyle(param1)))
         {
            return true;
         }
         return false;
      }
      
      public function registerParentDisplayListInvalidatingStyle(param1:String) : void
      {
         this.parentDisplayListInvalidatingStyles[param1] = true;
      }
      
      public function isParentDisplayListInvalidatingStyle(param1:String) : Boolean
      {
         if(this.parentDisplayListInvalidatingStyles[param1] == true)
         {
            return true;
         }
         if(Boolean(this.parent) && Boolean(this.parent.isParentDisplayListInvalidatingStyle(param1)))
         {
            return true;
         }
         return false;
      }
      
      public function registerColorName(param1:String, param2:uint) : void
      {
         this.colorNames[param1.toLowerCase()] = param2;
      }
      
      public function isColorName(param1:String) : Boolean
      {
         if(this.colorNames[param1.toLowerCase()] !== undefined)
         {
            return true;
         }
         if(Boolean(this.parent) && Boolean(this.parent.isColorName(param1)))
         {
            return true;
         }
         return false;
      }
      
      public function getColorName(param1:Object) : uint
      {
         var _loc2_:Number = NaN;
         var _loc3_:* = undefined;
         if(param1 is String)
         {
            if(param1.charAt(0) == "#")
            {
               _loc2_ = Number("0x" + param1.slice(1));
               return isNaN(_loc2_) ? StyleManager.NOT_A_COLOR : uint(_loc2_);
            }
            if(param1.charAt(1) == "x" && param1.charAt(0) == "0")
            {
               _loc2_ = Number(param1);
               return isNaN(_loc2_) ? StyleManager.NOT_A_COLOR : uint(_loc2_);
            }
            _loc3_ = this.colorNames[param1.toLowerCase()];
            switch(_loc3_)
            {
               case undefined:
                  if(this.parent)
                  {
                     _loc3_ = this.parent.getColorName(param1);
                  }
                  if(_loc3_ !== undefined)
                  {
                     break;
                  }
               case undefined:
                  return StyleManager.NOT_A_COLOR;
            }
            return uint(_loc3_);
         }
         return uint(param1);
      }
      
      public function getColorNames(param1:Array) : void
      {
         var _loc4_:uint = 0;
         if(!param1)
         {
            return;
         }
         var _loc2_:int = int(param1.length);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            if(param1[_loc3_] != null && isNaN(param1[_loc3_]))
            {
               _loc4_ = this.getColorName(param1[_loc3_]);
               if(_loc4_ != StyleManager.NOT_A_COLOR)
               {
                  param1[_loc3_] = _loc4_;
               }
            }
            _loc3_++;
         }
      }
      
      public function isValidStyleValue(param1:*) : Boolean
      {
         if(param1 !== undefined)
         {
            return true;
         }
         if(this.parent)
         {
            return this.parent.isValidStyleValue(param1);
         }
         return false;
      }
      
      public function loadStyleDeclarations(param1:String, param2:Boolean = true, param3:Boolean = false, param4:ApplicationDomain = null, param5:SecurityDomain = null) : IEventDispatcher
      {
         return this.loadStyleDeclarations2(param1,param2,param4,param5);
      }
      
      public function loadStyleDeclarations2(param1:String, param2:Boolean = true, param3:ApplicationDomain = null, param4:SecurityDomain = null) : IEventDispatcher
      {
         var errorHandler:Function;
         var module:IModuleInfo = null;
         var thisStyleManager:IStyleManager2 = null;
         var styleEventDispatcher:StyleEventDispatcher = null;
         var timer:Timer = null;
         var timerHandler:Function = null;
         var url:String = param1;
         var update:Boolean = param2;
         var applicationDomain:ApplicationDomain = param3;
         var securityDomain:SecurityDomain = param4;
         module = ModuleManager.getModule(url);
         thisStyleManager = this;
         var readyHandler:Function = function(param1:ModuleEvent):void
         {
            var _loc2_:IStyleModule = IStyleModule(param1.module.factory.create());
            param1.module.factory.registerImplementation("mx.styles::IStyleManager2",thisStyleManager);
            _loc2_.setStyleDeclarations(thisStyleManager);
            styleModules[param1.module.url].styleModule = _loc2_;
            if(update)
            {
               styleDeclarationsChanged();
            }
         };
         module.addEventListener(ModuleEvent.READY,readyHandler,false,0,true);
         styleEventDispatcher = new StyleEventDispatcher(module);
         errorHandler = function(param1:ModuleEvent):void
         {
            var _loc3_:StyleEvent = null;
            var _loc2_:String = resourceManager.getString("styles","unableToLoad",[param1.errorText,url]);
            if(styleEventDispatcher.willTrigger(StyleEvent.ERROR))
            {
               _loc3_ = new StyleEvent(StyleEvent.ERROR,param1.bubbles,param1.cancelable);
               _loc3_.bytesLoaded = 0;
               _loc3_.bytesTotal = 0;
               _loc3_.errorText = _loc2_;
               styleEventDispatcher.dispatchEvent(_loc3_);
               return;
            }
            throw new Error(_loc2_);
         };
         module.addEventListener(ModuleEvent.ERROR,errorHandler,false,0,true);
         this.styleModules[url] = new StyleModuleInfo(module,readyHandler,errorHandler);
         timer = new Timer(0);
         timerHandler = function(param1:TimerEvent):void
         {
            timer.removeEventListener(TimerEvent.TIMER,timerHandler);
            timer.stop();
            module.load(applicationDomain,securityDomain);
         };
         timer.addEventListener(TimerEvent.TIMER,timerHandler,false,0,true);
         timer.start();
         return styleEventDispatcher;
      }
      
      public function unloadStyleDeclarations(param1:String, param2:Boolean = true) : void
      {
         var _loc4_:IModuleInfo = null;
         var _loc3_:StyleModuleInfo = this.styleModules[param1];
         if(_loc3_)
         {
            _loc3_.styleModule.unload();
            _loc4_ = _loc3_.module;
            _loc4_.unload();
            _loc4_.removeEventListener(ModuleEvent.READY,_loc3_.readyHandler);
            _loc4_.removeEventListener(ModuleEvent.ERROR,_loc3_.errorHandler);
            this.styleModules[param1] = null;
         }
         if(param2)
         {
            this.styleDeclarationsChanged();
         }
      }
      
      private function dispatchInheritingStylesChangeEvent() : void
      {
         var _loc1_:Event = new FlexChangeEvent(FlexChangeEvent.STYLE_MANAGER_CHANGE,false,false,{"property":"inheritingStyles"});
         dispatchEvent(_loc1_);
      }
      
      private function styleManagerChangeHandler(param1:FlexChangeEvent) : void
      {
         if(!param1.data)
         {
            return;
         }
         var _loc2_:String = param1.data["property"];
         if(_loc2_ == "inheritingStyles")
         {
            this.mergedInheritingStylesCache = null;
         }
         if(hasEventListener(FlexChangeEvent.STYLE_MANAGER_CHANGE))
         {
            dispatchEvent(param1);
         }
      }
   }
}

import flash.events.EventDispatcher;
import mx.events.ModuleEvent;
import mx.events.StyleEvent;
import mx.modules.IModuleInfo;

class StyleEventDispatcher extends EventDispatcher
{
   
   public function StyleEventDispatcher(param1:IModuleInfo)
   {
      super();
      param1.addEventListener(ModuleEvent.PROGRESS,this.moduleInfo_progressHandler,false,0,true);
      param1.addEventListener(ModuleEvent.READY,this.moduleInfo_readyHandler,false,0,true);
   }
   
   private function moduleInfo_progressHandler(param1:ModuleEvent) : void
   {
      var _loc2_:StyleEvent = new StyleEvent(StyleEvent.PROGRESS,param1.bubbles,param1.cancelable);
      _loc2_.bytesLoaded = param1.bytesLoaded;
      _loc2_.bytesTotal = param1.bytesTotal;
      dispatchEvent(_loc2_);
   }
   
   private function moduleInfo_readyHandler(param1:ModuleEvent) : void
   {
      var _loc2_:StyleEvent = new StyleEvent(StyleEvent.COMPLETE);
      _loc2_.bytesLoaded = param1.bytesLoaded;
      _loc2_.bytesTotal = param1.bytesTotal;
      dispatchEvent(_loc2_);
   }
}

class StyleModuleInfo
{
   
   public var errorHandler:Function;
   
   public var readyHandler:Function;
   
   public var styleModule:IStyleModule;
   
   public var module:IModuleInfo;
   
   public function StyleModuleInfo(param1:IModuleInfo, param2:Function, param3:Function)
   {
      super();
      this.module = param1;
      this.readyHandler = param2;
      this.errorHandler = param3;
   }
}
package mx.styles
{
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.system.ApplicationDomain;
   import flash.utils.getQualifiedClassName;
   import flash.utils.getQualifiedSuperclassName;
   import mx.core.FlexGlobals;
   import mx.core.IFlexDisplayObject;
   import mx.core.IFlexModule;
   import mx.core.IFlexModuleFactory;
   import mx.core.IFontContextComponent;
   import mx.core.IInvalidating;
   import mx.core.IUITextField;
   import mx.core.IVisualElement;
   import mx.core.UIComponent;
   import mx.core.mx_internal;
   import mx.effects.EffectManager;
   import mx.managers.SystemManager;
   import mx.modules.IModule;
   import mx.modules.ModuleManager;
   import mx.utils.NameUtil;
   import mx.utils.OrderedObject;
   import mx.utils.object_proxy;
   
   use namespace mx_internal;
   use namespace object_proxy;
   
   public class StyleProtoChain
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public static var STYLE_UNINITIALIZED:Object = {};
      
      public function StyleProtoChain()
      {
         super();
      }
      
      public static function getClassStyleDeclarations(param1:IStyleClient) : Array
      {
         var _loc11_:String = null;
         var _loc12_:Array = null;
         var _loc13_:Array = null;
         var _loc14_:CSSStyleDeclaration = null;
         var _loc2_:IStyleManager2 = getStyleManager(param1);
         var _loc3_:Boolean = _loc2_.qualifiedTypeSelectors;
         var _loc4_:String = _loc3_ ? getQualifiedClassName(param1) : param1.className;
         var _loc5_:IAdvancedStyleClient = param1 as IAdvancedStyleClient;
         var _loc6_:OrderedObject = getTypeHierarchy(param1,_loc3_);
         var _loc7_:Array = _loc6_.object_proxy::propertyList;
         var _loc8_:int = int(_loc7_.length);
         var _loc9_:Array = null;
         if(!_loc2_.hasAdvancedSelectors())
         {
            _loc9_ = _loc2_.typeSelectorCache[_loc4_];
            if(_loc9_)
            {
               return _loc9_;
            }
         }
         _loc9_ = [];
         var _loc10_:int = _loc8_ - 1;
         while(_loc10_ >= 0)
         {
            _loc11_ = _loc7_[_loc10_].toString();
            if(_loc2_.hasAdvancedSelectors() && _loc5_ != null)
            {
               _loc12_ = _loc2_.getStyleDeclarations(_loc11_);
               if(_loc12_)
               {
                  _loc13_ = matchStyleDeclarations(_loc12_,_loc5_);
                  _loc9_ = _loc9_.concat(_loc13_);
               }
            }
            else
            {
               _loc14_ = _loc2_.getMergedStyleDeclaration(_loc11_);
               if(_loc14_)
               {
                  _loc9_.push(_loc14_);
               }
            }
            _loc10_--;
         }
         if(_loc2_.hasAdvancedSelectors() && _loc5_ != null)
         {
            _loc9_ = sortOnSpecificity(_loc9_);
         }
         else
         {
            _loc2_.typeSelectorCache[_loc4_] = _loc9_;
         }
         return _loc9_;
      }
      
      public static function initProtoChain(param1:IStyleClient) : void
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc14_:Object = null;
         var _loc15_:DisplayObjectContainer = null;
         var _loc16_:Array = null;
         var _loc2_:IStyleManager2 = getStyleManager(param1);
         var _loc5_:UIComponent = param1 as UIComponent;
         var _loc6_:IAdvancedStyleClient = param1 as IAdvancedStyleClient;
         var _loc7_:CSSStyleDeclaration = null;
         var _loc8_:Array = [];
         var _loc9_:Boolean = false;
         var _loc10_:Object = param1.styleName;
         if(_loc10_)
         {
            if(_loc10_ is CSSStyleDeclaration)
            {
               _loc8_.push(CSSStyleDeclaration(_loc10_));
            }
            else
            {
               if(_loc10_ is IFlexDisplayObject || _loc10_ is IStyleClient)
               {
                  StyleProtoChain.initProtoChainForUIComponentStyleName(param1);
                  return;
               }
               if(_loc10_ is String)
               {
                  _loc9_ = true;
               }
            }
         }
         var _loc11_:Object = _loc2_.stylesRoot;
         if((Boolean(_loc11_)) && Boolean(_loc11_.effects))
         {
            param1.registerEffects(_loc11_.effects);
         }
         var _loc12_:IStyleClient = null;
         if(param1 is IVisualElement)
         {
            _loc12_ = IVisualElement(param1).parent as IStyleClient;
         }
         if(_loc12_)
         {
            _loc14_ = _loc12_.inheritingStyles;
            if(_loc14_ == StyleProtoChain.STYLE_UNINITIALIZED)
            {
               _loc14_ = _loc11_;
            }
            if(param1 is IModule)
            {
               _loc7_ = _loc2_.getStyleDeclaration("global");
               if(_loc7_)
               {
                  _loc14_ = _loc7_.mx_internal::addStyleToProtoChain(_loc14_,DisplayObject(param1));
               }
            }
         }
         else if(Boolean(_loc5_) && _loc5_.isPopUp)
         {
            _loc15_ = _loc5_.mx_internal::_owner;
            if((Boolean(_loc15_)) && _loc15_ is IStyleClient)
            {
               _loc14_ = IStyleClient(_loc15_).inheritingStyles;
            }
            else
            {
               _loc14_ = FlexGlobals.topLevelApplication.inheritingStyles;
            }
         }
         else
         {
            _loc14_ = _loc2_.stylesRoot;
         }
         var _loc13_:Array = null;
         if(_loc2_.hasAdvancedSelectors() && _loc6_ != null)
         {
            _loc13_ = getMatchingStyleDeclarations(_loc6_,_loc8_);
            _loc3_ = _loc13_ != null ? int(_loc13_.length) : 0;
            _loc4_ = 0;
            while(_loc4_ < _loc3_)
            {
               _loc7_ = _loc13_[_loc4_];
               _loc14_ = _loc7_.mx_internal::addStyleToProtoChain(_loc14_,_loc5_);
               _loc11_ = _loc7_.mx_internal::addStyleToProtoChain(_loc11_,_loc5_);
               if(_loc7_.mx_internal::effects)
               {
                  _loc6_.registerEffects(_loc7_.mx_internal::effects);
               }
               _loc4_++;
            }
         }
         else
         {
            if(_loc9_)
            {
               _loc16_ = _loc10_.split(/\s+/);
               _loc3_ = int(_loc16_.length);
               _loc4_ = 0;
               while(_loc4_ < _loc3_)
               {
                  if(_loc16_[_loc4_].length)
                  {
                     _loc7_ = _loc2_.getMergedStyleDeclaration("." + _loc16_[_loc4_]);
                     if(_loc7_)
                     {
                        _loc8_.push(_loc7_);
                     }
                  }
                  _loc4_++;
               }
            }
            _loc13_ = param1.getClassStyleDeclarations();
            _loc3_ = _loc13_ != null ? int(_loc13_.length) : 0;
            _loc4_ = 0;
            while(_loc4_ < _loc3_)
            {
               _loc7_ = _loc13_[_loc4_];
               _loc14_ = _loc7_.mx_internal::addStyleToProtoChain(_loc14_,_loc5_);
               _loc11_ = _loc7_.mx_internal::addStyleToProtoChain(_loc11_,_loc5_);
               if(_loc7_.mx_internal::effects)
               {
                  param1.registerEffects(_loc7_.mx_internal::effects);
               }
               _loc4_++;
            }
            _loc3_ = int(_loc8_.length);
            _loc4_ = 0;
            while(_loc4_ < _loc3_)
            {
               _loc7_ = _loc8_[_loc4_];
               if(_loc7_)
               {
                  _loc14_ = _loc7_.mx_internal::addStyleToProtoChain(_loc14_,_loc5_);
                  _loc11_ = _loc7_.mx_internal::addStyleToProtoChain(_loc11_,_loc5_);
                  if(_loc7_.mx_internal::effects)
                  {
                     param1.registerEffects(_loc7_.mx_internal::effects);
                  }
               }
               _loc4_++;
            }
         }
         _loc7_ = param1.styleDeclaration;
         param1.inheritingStyles = _loc7_ ? _loc7_.mx_internal::addStyleToProtoChain(_loc14_,_loc5_) : _loc14_;
         param1.nonInheritingStyles = _loc7_ ? _loc7_.mx_internal::addStyleToProtoChain(_loc11_,_loc5_) : _loc11_;
      }
      
      public static function initProtoChainForUIComponentStyleName(param1:IStyleClient) : void
      {
         var _loc10_:CSSStyleDeclaration = null;
         var _loc2_:IStyleManager2 = getStyleManager(param1);
         var _loc3_:IStyleClient = IStyleClient(param1.styleName);
         var _loc4_:DisplayObject = param1 as DisplayObject;
         var _loc5_:Object = _loc3_.nonInheritingStyles;
         if(!_loc5_ || _loc5_ == StyleProtoChain.STYLE_UNINITIALIZED)
         {
            _loc5_ = _loc2_.stylesRoot;
            if(_loc5_.effects)
            {
               param1.registerEffects(_loc5_.effects);
            }
         }
         var _loc6_:Object = _loc3_.inheritingStyles;
         if(!_loc6_ || _loc6_ == StyleProtoChain.STYLE_UNINITIALIZED)
         {
            _loc6_ = _loc2_.stylesRoot;
         }
         var _loc7_:Array = param1.getClassStyleDeclarations();
         var _loc8_:int = int(_loc7_.length);
         if(_loc3_ is StyleProxy)
         {
            if(_loc8_ == 0)
            {
               _loc5_ = addProperties(_loc5_,_loc3_,false);
            }
            _loc4_ = StyleProxy(_loc3_).source as DisplayObject;
         }
         var _loc9_:int = 0;
         while(_loc9_ < _loc8_)
         {
            _loc10_ = _loc7_[_loc9_];
            _loc6_ = _loc10_.mx_internal::addStyleToProtoChain(_loc6_,_loc4_);
            _loc6_ = addProperties(_loc6_,_loc3_,true);
            _loc5_ = _loc10_.mx_internal::addStyleToProtoChain(_loc5_,_loc4_);
            _loc5_ = addProperties(_loc5_,_loc3_,false);
            if(_loc10_.mx_internal::effects)
            {
               param1.registerEffects(_loc10_.mx_internal::effects);
            }
            _loc9_++;
         }
         param1.inheritingStyles = param1.styleDeclaration ? param1.styleDeclaration.mx_internal::addStyleToProtoChain(_loc6_,_loc4_) : _loc6_;
         param1.nonInheritingStyles = param1.styleDeclaration ? param1.styleDeclaration.mx_internal::addStyleToProtoChain(_loc5_,_loc4_) : _loc5_;
      }
      
      private static function addProperties(param1:Object, param2:IStyleClient, param3:Boolean) : Object
      {
         var _loc9_:Array = null;
         var _loc10_:CSSStyleDeclaration = null;
         var _loc12_:int = 0;
         var _loc13_:int = 0;
         var _loc14_:Array = null;
         var _loc15_:int = 0;
         var _loc4_:Object = param2 is StyleProxy && !param3 ? StyleProxy(param2).filterMap : null;
         var _loc5_:IStyleClient = param2;
         while(_loc5_ is StyleProxy)
         {
            _loc5_ = StyleProxy(_loc5_).source;
         }
         var _loc6_:DisplayObject = _loc5_ as DisplayObject;
         var _loc7_:IAdvancedStyleClient = param2 as IAdvancedStyleClient;
         var _loc8_:Object = param2.styleName;
         var _loc11_:IStyleManager2 = getStyleManager(_loc6_);
         if(_loc7_ != null && _loc11_.hasAdvancedSelectors())
         {
            if(_loc8_ is CSSStyleDeclaration)
            {
               _loc9_ = [CSSStyleDeclaration(_loc8_)];
            }
            _loc9_ = getMatchingStyleDeclarations(_loc7_,_loc9_);
            _loc13_ = 0;
            while(_loc13_ < _loc9_.length)
            {
               _loc10_ = _loc9_[_loc13_];
               if(_loc10_)
               {
                  param1 = _loc10_.mx_internal::addStyleToProtoChain(param1,_loc6_,_loc4_);
                  if(_loc10_.mx_internal::effects)
                  {
                     param2.registerEffects(_loc10_.mx_internal::effects);
                  }
               }
               _loc13_++;
            }
            if(_loc8_ is IStyleClient)
            {
               param1 = addProperties(param1,IStyleClient(_loc8_),param3);
            }
         }
         else
         {
            _loc9_ = param2.getClassStyleDeclarations();
            _loc12_ = int(_loc9_.length);
            _loc13_ = 0;
            while(_loc13_ < _loc12_)
            {
               _loc10_ = _loc9_[_loc13_];
               param1 = _loc10_.mx_internal::addStyleToProtoChain(param1,_loc6_,_loc4_);
               if(_loc10_.mx_internal::effects)
               {
                  param2.registerEffects(_loc10_.mx_internal::effects);
               }
               _loc13_++;
            }
            if(_loc8_)
            {
               _loc9_ = [];
               if(typeof _loc8_ == "object")
               {
                  if(_loc8_ is CSSStyleDeclaration)
                  {
                     _loc9_.push(CSSStyleDeclaration(_loc8_));
                  }
                  else
                  {
                     param1 = addProperties(param1,IStyleClient(_loc8_),param3);
                  }
               }
               else
               {
                  _loc14_ = _loc8_.split(/\s+/);
                  _loc15_ = 0;
                  while(_loc15_ < _loc14_.length)
                  {
                     if(_loc14_[_loc15_].length)
                     {
                        _loc9_.push(_loc11_.getMergedStyleDeclaration("." + _loc14_[_loc15_]));
                     }
                     _loc15_++;
                  }
               }
               _loc13_ = 0;
               while(_loc13_ < _loc9_.length)
               {
                  _loc10_ = _loc9_[_loc13_];
                  if(_loc10_)
                  {
                     param1 = _loc10_.mx_internal::addStyleToProtoChain(param1,_loc6_,_loc4_);
                     if(_loc10_.mx_internal::effects)
                     {
                        param2.registerEffects(_loc10_.mx_internal::effects);
                     }
                  }
                  _loc13_++;
               }
            }
         }
         if(param2.styleDeclaration)
         {
            param1 = param2.styleDeclaration.mx_internal::addStyleToProtoChain(param1,_loc6_,_loc4_);
         }
         return param1;
      }
      
      public static function initTextField(param1:IUITextField) : void
      {
         var _loc8_:Array = null;
         var _loc9_:int = 0;
         var _loc10_:CSSStyleDeclaration = null;
         var _loc2_:IStyleManager2 = StyleManager.getStyleManager(param1.moduleFactory);
         var _loc3_:Object = param1.styleName;
         var _loc4_:Array = [];
         if(_loc3_)
         {
            if(typeof _loc3_ == "object")
            {
               if(!(_loc3_ is CSSStyleDeclaration))
               {
                  if(_loc3_ is StyleProxy)
                  {
                     param1.inheritingStyles = IStyleClient(_loc3_).inheritingStyles;
                     param1.nonInheritingStyles = addProperties(_loc2_.stylesRoot,IStyleClient(_loc3_),false);
                     return;
                  }
                  param1.inheritingStyles = IStyleClient(_loc3_).inheritingStyles;
                  param1.nonInheritingStyles = IStyleClient(_loc3_).nonInheritingStyles;
                  return;
               }
               _loc4_.push(CSSStyleDeclaration(_loc3_));
            }
            else
            {
               _loc8_ = _loc3_.split(/\s+/);
               _loc9_ = 0;
               while(_loc9_ < _loc8_.length)
               {
                  if(_loc8_[_loc9_].length)
                  {
                     _loc4_.push(_loc2_.getMergedStyleDeclaration("." + _loc8_[_loc9_]));
                  }
                  _loc9_++;
               }
            }
         }
         var _loc5_:Object = IStyleClient(param1.parent).inheritingStyles;
         var _loc6_:Object = _loc2_.stylesRoot;
         if(!_loc5_)
         {
            _loc5_ = _loc2_.stylesRoot;
         }
         var _loc7_:int = 0;
         while(_loc7_ < _loc4_.length)
         {
            _loc10_ = _loc4_[_loc7_];
            if(_loc10_)
            {
               _loc5_ = _loc10_.mx_internal::addStyleToProtoChain(_loc5_,DisplayObject(param1));
               _loc6_ = _loc10_.mx_internal::addStyleToProtoChain(_loc6_,DisplayObject(param1));
            }
            _loc7_++;
         }
         param1.inheritingStyles = _loc5_;
         param1.nonInheritingStyles = _loc6_;
      }
      
      public static function setStyle(param1:IStyleClient, param2:String, param3:*) : void
      {
         var _loc4_:IStyleManager2 = getStyleManager(param1);
         if(param2 == "styleName")
         {
            param1.styleName = param3;
            return;
         }
         if(EffectManager.mx_internal::getEventForEffectTrigger(param2) != "")
         {
            EffectManager.mx_internal::setStyle(param2,param1);
         }
         var _loc5_:Boolean = Boolean(_loc4_.isInheritingStyle(param2));
         var _loc6_:* = param1.inheritingStyles != StyleProtoChain.STYLE_UNINITIALIZED;
         var _loc7_:* = param1.getStyle(param2) != param3;
         if(!param1.styleDeclaration)
         {
            param1.styleDeclaration = new CSSStyleDeclaration(null,_loc4_);
            param1.styleDeclaration.mx_internal::setLocalStyle(param2,param3);
            if(_loc6_)
            {
               param1.regenerateStyleCache(_loc5_);
            }
         }
         else
         {
            param1.styleDeclaration.mx_internal::setLocalStyle(param2,param3);
         }
         if(_loc6_ && _loc7_)
         {
            param1.styleChanged(param2);
            param1.notifyStyleChangeInChildren(param2,_loc5_);
         }
      }
      
      public static function styleChanged(param1:IInvalidating, param2:String) : void
      {
         var _loc4_:IInvalidating = null;
         var _loc3_:IStyleManager2 = getStyleManager(param1);
         if(param1 is IFontContextComponent && "hasFontContextChanged" in param1 && Boolean(param1["hasFontContextChanged"]()))
         {
            param1.invalidateProperties();
         }
         if(!param2 || param2 == "styleName" || Boolean(_loc3_.isSizeInvalidatingStyle(param2)))
         {
            param1.invalidateSize();
         }
         if(!param2 || param2 == "styleName" || param2 == "themeColor")
         {
            if(param1 is UIComponent)
            {
               param1["initThemeColor"]();
            }
         }
         param1.invalidateDisplayList();
         if(param1 is IVisualElement)
         {
            _loc4_ = IVisualElement(param1).parent as IInvalidating;
         }
         if(_loc4_)
         {
            if(param2 == "styleName" || Boolean(_loc3_.isParentSizeInvalidatingStyle(param2)))
            {
               _loc4_.invalidateSize();
            }
            if(param2 == "styleName" || Boolean(_loc3_.isParentDisplayListInvalidatingStyle(param2)))
            {
               _loc4_.invalidateDisplayList();
            }
         }
      }
      
      public static function matchesCSSType(param1:IAdvancedStyleClient, param2:String) : Boolean
      {
         var _loc3_:IStyleManager2 = getStyleManager(param1);
         var _loc4_:Boolean = _loc3_.qualifiedTypeSelectors;
         var _loc5_:OrderedObject = getTypeHierarchy(param1,_loc4_);
         return _loc5_.object_proxy::getObjectProperty(param2) != null;
      }
      
      public static function getMatchingStyleDeclarations(param1:IAdvancedStyleClient, param2:Array = null) : Array
      {
         var _loc3_:IStyleManager2 = getStyleManager(param1);
         if(param2 == null)
         {
            param2 = [];
         }
         var _loc4_:Array = _loc3_.getStyleDeclarations("*");
         param2 = matchStyleDeclarations(_loc4_,param1).concat(param2);
         if(param2.length > 0)
         {
            param2 = param1.getClassStyleDeclarations().concat(param2);
            param2 = sortOnSpecificity(param2);
         }
         else
         {
            param2 = param1.getClassStyleDeclarations();
         }
         return param2;
      }
      
      private static function getTypeHierarchy(param1:IStyleClient, param2:Boolean = true) : OrderedObject
      {
         var myApplicationDomain:ApplicationDomain = null;
         var factory:IFlexModuleFactory = null;
         var myRoot:DisplayObject = null;
         var type:String = null;
         var object:IStyleClient = param1;
         var qualified:Boolean = param2;
         var styleManager:IStyleManager2 = getStyleManager(object);
         var className:String = getQualifiedClassName(object);
         var hierarchy:OrderedObject = styleManager.typeHierarchyCache[className] as OrderedObject;
         if(hierarchy == null)
         {
            hierarchy = new OrderedObject();
            factory = ModuleManager.getAssociatedFactory(object);
            if(factory != null)
            {
               myApplicationDomain = ApplicationDomain(factory.info()["currentDomain"]);
            }
            else
            {
               myRoot = SystemManager.getSWFRoot(object);
               if(!myRoot)
               {
                  return hierarchy;
               }
               myApplicationDomain = myRoot.loaderInfo.applicationDomain;
            }
            styleManager.typeHierarchyCache[className] = hierarchy;
            while(!isStopClass(className))
            {
               try
               {
                  if(qualified)
                  {
                     type = className.replace("::",".");
                  }
                  else
                  {
                     type = NameUtil.getUnqualifiedClassName(className);
                  }
                  hierarchy.object_proxy::setObjectProperty(type,true);
                  className = getQualifiedSuperclassName(myApplicationDomain.getDefinition(className));
               }
               catch(e:ReferenceError)
               {
                  className = null;
               }
            }
         }
         return hierarchy;
      }
      
      private static function isStopClass(param1:String) : Boolean
      {
         return param1 == null || param1 == "mx.core::UIComponent" || param1 == "mx.core::UITextField" || param1 == "mx.graphics.baseClasses::GraphicElement";
      }
      
      private static function matchStyleDeclarations(param1:Array, param2:IAdvancedStyleClient) : Array
      {
         var _loc4_:CSSStyleDeclaration = null;
         var _loc3_:Array = [];
         for each(_loc4_ in param1)
         {
            if(_loc4_.matchesStyleClient(param2))
            {
               _loc3_.push(_loc4_);
            }
         }
         return _loc3_;
      }
      
      private static function sortOnSpecificity(param1:Array) : Array
      {
         var _loc3_:CSSStyleDeclaration = null;
         var _loc5_:int = 0;
         var _loc2_:Number = param1.length;
         if(_loc2_ <= 1)
         {
            return param1;
         }
         var _loc4_:int = 1;
         while(_loc4_ < _loc2_)
         {
            _loc5_ = _loc4_;
            while(_loc5_ > 0)
            {
               if(param1[_loc5_].specificity >= param1[_loc5_ - 1].specificity)
               {
                  break;
               }
               _loc3_ = param1[_loc5_];
               param1[_loc5_] = param1[_loc5_ - 1];
               param1[_loc5_ - 1] = _loc3_;
               _loc5_--;
            }
            _loc4_++;
         }
         return param1;
      }
      
      private static function getStyleManager(param1:Object) : IStyleManager2
      {
         if(param1 is IFlexModule)
         {
            return StyleManager.getStyleManager(IFlexModule(param1).moduleFactory);
         }
         if(param1 is StyleProxy)
         {
            return getStyleManagerFromStyleProxy(StyleProxy(param1));
         }
         return StyleManager.getStyleManager(null);
      }
      
      private static function getStyleManagerFromStyleProxy(param1:StyleProxy) : IStyleManager2
      {
         var _loc2_:IStyleClient = param1;
         while(_loc2_ is StyleProxy)
         {
            _loc2_ = StyleProxy(_loc2_).source;
         }
         if(_loc2_ is IFlexModule)
         {
            return StyleManager.getStyleManager(IFlexModule(_loc2_).moduleFactory);
         }
         return StyleManager.getStyleManager(null);
      }
   }
}

package mx.styles
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class StyleProxy implements IAdvancedStyleClient
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private var _filterMap:Object;
      
      private var _source:IStyleClient;
      
      private var _advancedSource:IAdvancedStyleClient;
      
      public function StyleProxy(param1:IStyleClient, param2:Object)
      {
         super();
         this.filterMap = param2;
         this.source = param1;
      }
      
      public function get filterMap() : Object
      {
         return this._filterMap;
      }
      
      public function set filterMap(param1:Object) : void
      {
         this._filterMap = param1;
      }
      
      public function get source() : IStyleClient
      {
         return this._source;
      }
      
      public function set source(param1:IStyleClient) : void
      {
         this._source = param1;
         this._advancedSource = param1 as IAdvancedStyleClient;
      }
      
      public function get className() : String
      {
         return this._source.className;
      }
      
      public function get inheritingStyles() : Object
      {
         return this._source.inheritingStyles;
      }
      
      public function set inheritingStyles(param1:Object) : void
      {
      }
      
      public function get nonInheritingStyles() : Object
      {
         return null;
      }
      
      public function set nonInheritingStyles(param1:Object) : void
      {
      }
      
      public function get styleDeclaration() : CSSStyleDeclaration
      {
         return this._source.styleDeclaration;
      }
      
      public function set styleDeclaration(param1:CSSStyleDeclaration) : void
      {
         this._source.styleDeclaration = this.styleDeclaration;
      }
      
      public function get styleName() : Object
      {
         if(this._source.styleName is IStyleClient)
         {
            return new StyleProxy(IStyleClient(this._source.styleName),this.filterMap);
         }
         return this._source.styleName;
      }
      
      public function set styleName(param1:Object) : void
      {
         this._source.styleName = param1;
      }
      
      public function get id() : String
      {
         return this._advancedSource ? this._advancedSource.id : null;
      }
      
      public function get styleParent() : IAdvancedStyleClient
      {
         return this._advancedSource ? this._advancedSource.styleParent : null;
      }
      
      public function styleChanged(param1:String) : void
      {
         return this._source.styleChanged(param1);
      }
      
      public function getStyle(param1:String) : *
      {
         return this._source.getStyle(param1);
      }
      
      public function setStyle(param1:String, param2:*) : void
      {
         this._source.setStyle(param1,param2);
      }
      
      public function clearStyle(param1:String) : void
      {
         this._source.clearStyle(param1);
      }
      
      public function getClassStyleDeclarations() : Array
      {
         return this._source.getClassStyleDeclarations();
      }
      
      public function notifyStyleChangeInChildren(param1:String, param2:Boolean) : void
      {
         return this._source.notifyStyleChangeInChildren(param1,param2);
      }
      
      public function regenerateStyleCache(param1:Boolean) : void
      {
         this._source.regenerateStyleCache(param1);
      }
      
      public function registerEffects(param1:Array) : void
      {
         return this._source.registerEffects(param1);
      }
      
      public function stylesInitialized() : void
      {
         if(this._advancedSource)
         {
            this._advancedSource.stylesInitialized();
         }
      }
      
      public function matchesCSSState(param1:String) : Boolean
      {
         return this._advancedSource ? this._advancedSource.matchesCSSState(param1) : false;
      }
      
      public function matchesCSSType(param1:String) : Boolean
      {
         return this._advancedSource ? this._advancedSource.matchesCSSType(param1) : false;
      }
   }
}

package mx.utils
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class ColorUtil
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function ColorUtil()
      {
         super();
      }
      
      public static function adjustBrightness(param1:uint, param2:Number) : uint
      {
         var _loc3_:Number = Math.max(Math.min((param1 >> 16 & 0xFF) + param2,255),0);
         var _loc4_:Number = Math.max(Math.min((param1 >> 8 & 0xFF) + param2,255),0);
         var _loc5_:Number = Math.max(Math.min((param1 & 0xFF) + param2,255),0);
         return _loc3_ << 16 | _loc4_ << 8 | _loc5_;
      }
      
      public static function adjustBrightness2(param1:uint, param2:Number) : uint
      {
         var _loc3_:Number = NaN;
         var _loc4_:Number = NaN;
         var _loc5_:Number = NaN;
         if(param2 == 0)
         {
            return param1;
         }
         if(param2 < 0)
         {
            param2 = (100 + param2) / 100;
            _loc3_ = (param1 >> 16 & 0xFF) * param2;
            _loc4_ = (param1 >> 8 & 0xFF) * param2;
            _loc5_ = (param1 & 0xFF) * param2;
         }
         else
         {
            param2 /= 100;
            _loc3_ = param1 >> 16 & 0xFF;
            _loc4_ = param1 >> 8 & 0xFF;
            _loc5_ = param1 & 0xFF;
            _loc3_ += (255 - _loc3_) * param2;
            _loc4_ += (255 - _loc4_) * param2;
            _loc5_ += (255 - _loc5_) * param2;
            _loc3_ = Math.min(_loc3_,255);
            _loc4_ = Math.min(_loc4_,255);
            _loc5_ = Math.min(_loc5_,255);
         }
         return _loc3_ << 16 | _loc4_ << 8 | _loc5_;
      }
      
      public static function rgbMultiply(param1:uint, param2:uint) : uint
      {
         var _loc3_:Number = param1 >> 16 & 0xFF;
         var _loc4_:Number = param1 >> 8 & 0xFF;
         var _loc5_:Number = param1 & 0xFF;
         var _loc6_:Number = param2 >> 16 & 0xFF;
         var _loc7_:Number = param2 >> 8 & 0xFF;
         var _loc8_:Number = param2 & 0xFF;
         return _loc3_ * _loc6_ / 255 << 16 | _loc4_ * _loc7_ / 255 << 8 | _loc5_ * _loc8_ / 255;
      }
   }
}

package mx.utils
{
   import flash.utils.describeType;
   import flash.utils.getDefinitionByName;
   import flash.utils.getQualifiedClassName;
   import mx.binding.BindabilityInfo;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class DescribeTypeCache
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static var typeCache:Object = {};
      
      private static var cacheHandlers:Object = {};
      
      registerCacheHandler("bindabilityInfo",bindabilityInfoHandler);
      
      public function DescribeTypeCache()
      {
         super();
      }
      
      public static function describeType(param1:*) : DescribeTypeCacheRecord
      {
         var _loc2_:String = null;
         var _loc3_:* = null;
         var _loc4_:XML = null;
         var _loc5_:DescribeTypeCacheRecord = null;
         if(param1 is String)
         {
            _loc3_ = _loc2_ = param1;
         }
         else
         {
            _loc3_ = _loc2_ = getQualifiedClassName(param1);
         }
         if(param1 is Class)
         {
            _loc3_ += "$";
         }
         if(_loc3_ in typeCache)
         {
            return typeCache[_loc3_];
         }
         if(param1 is String)
         {
            param1 = getDefinitionByName(param1);
         }
         _loc4_ = describeType(param1);
         _loc5_ = new DescribeTypeCacheRecord();
         _loc5_.typeDescription = _loc4_;
         _loc5_.typeName = _loc2_;
         typeCache[_loc3_] = _loc5_;
         return _loc5_;
      }
      
      public static function registerCacheHandler(param1:String, param2:Function) : void
      {
         cacheHandlers[param1] = param2;
      }
      
      internal static function extractValue(param1:String, param2:DescribeTypeCacheRecord) : *
      {
         if(param1 in cacheHandlers)
         {
            return cacheHandlers[param1](param2);
         }
         return undefined;
      }
      
      private static function bindabilityInfoHandler(param1:DescribeTypeCacheRecord) : *
      {
         return new BindabilityInfo(param1.typeDescription);
      }
   }
}

package mx.utils
{
   import flash.utils.Proxy;
   import flash.utils.flash_proxy;
   
   use namespace flash_proxy;
   
   public dynamic class DescribeTypeCacheRecord extends Proxy
   {
      
      private var cache:Object = {};
      
      public var typeDescription:XML;
      
      public var typeName:String;
      
      public function DescribeTypeCacheRecord()
      {
         super();
      }
      
      override flash_proxy function getProperty(param1:*) : *
      {
         var _loc2_:* = this.cache[param1];
         if(_loc2_ === undefined)
         {
            _loc2_ = DescribeTypeCache.extractValue(param1,this);
            this.cache[param1] = _loc2_;
         }
         return _loc2_;
      }
      
      override flash_proxy function hasProperty(param1:*) : Boolean
      {
         if(param1 in this.cache)
         {
            return true;
         }
         var _loc2_:* = DescribeTypeCache.extractValue(param1,this);
         if(_loc2_ === undefined)
         {
            return false;
         }
         this.cache[param1] = _loc2_;
         return true;
      }
   }
}

package mx.utils
{
   import flash.display.Graphics;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class GraphicsUtil
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function GraphicsUtil()
      {
         super();
      }
      
      public static function drawRoundRectComplex(param1:Graphics, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number, param8:Number, param9:Number) : void
      {
         var _loc10_:Number = param2 + param4;
         var _loc11_:Number = param3 + param5;
         var _loc12_:Number = param4 < param5 ? param4 * 2 : param5 * 2;
         param6 = param6 < _loc12_ ? param6 : _loc12_;
         param7 = param7 < _loc12_ ? param7 : _loc12_;
         param8 = param8 < _loc12_ ? param8 : _loc12_;
         param9 = param9 < _loc12_ ? param9 : _loc12_;
         var _loc13_:Number = param9 * 0.292893218813453;
         var _loc14_:Number = param9 * 0.585786437626905;
         param1.moveTo(_loc10_,_loc11_ - param9);
         param1.curveTo(_loc10_,_loc11_ - _loc14_,_loc10_ - _loc13_,_loc11_ - _loc13_);
         param1.curveTo(_loc10_ - _loc14_,_loc11_,_loc10_ - param9,_loc11_);
         _loc13_ = param8 * 0.292893218813453;
         _loc14_ = param8 * 0.585786437626905;
         param1.lineTo(param2 + param8,_loc11_);
         param1.curveTo(param2 + _loc14_,_loc11_,param2 + _loc13_,_loc11_ - _loc13_);
         param1.curveTo(param2,_loc11_ - _loc14_,param2,_loc11_ - param8);
         _loc13_ = param6 * 0.292893218813453;
         _loc14_ = param6 * 0.585786437626905;
         param1.lineTo(param2,param3 + param6);
         param1.curveTo(param2,param3 + _loc14_,param2 + _loc13_,param3 + _loc13_);
         param1.curveTo(param2 + _loc14_,param3,param2 + param6,param3);
         _loc13_ = param7 * 0.292893218813453;
         _loc14_ = param7 * 0.585786437626905;
         param1.lineTo(_loc10_ - param7,param3);
         param1.curveTo(_loc10_ - _loc14_,param3,_loc10_ - _loc13_,param3 + _loc13_);
         param1.curveTo(_loc10_,param3 + _loc14_,_loc10_,param3 + param7);
         param1.lineTo(_loc10_,_loc11_ - param9);
      }
      
      public static function drawRoundRectComplex2(param1:Graphics, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number, param8:Number, param9:Number, param10:Number, param11:Number, param12:Number, param13:Number, param14:Number, param15:Number) : void
      {
         var _loc16_:Number = param2 + param4;
         var _loc17_:Number = param3 + param5;
         var _loc18_:Number = param4 / 2;
         var _loc19_:Number = param5 / 2;
         if(param7 == 0)
         {
            param7 = param6;
         }
         if(isNaN(param8))
         {
            param8 = param6;
         }
         if(isNaN(param9))
         {
            param9 = param8;
         }
         if(isNaN(param10))
         {
            param10 = param6;
         }
         if(isNaN(param11))
         {
            param11 = param10;
         }
         if(isNaN(param12))
         {
            param12 = param6;
         }
         if(isNaN(param13))
         {
            param13 = param12;
         }
         if(isNaN(param14))
         {
            param14 = param6;
         }
         if(isNaN(param15))
         {
            param15 = param14;
         }
         if(param8 > _loc18_)
         {
            param8 = _loc18_;
         }
         if(param9 > _loc19_)
         {
            param9 = _loc19_;
         }
         if(param10 > _loc18_)
         {
            param10 = _loc18_;
         }
         if(param11 > _loc19_)
         {
            param11 = _loc19_;
         }
         if(param12 > _loc18_)
         {
            param12 = _loc18_;
         }
         if(param13 > _loc19_)
         {
            param13 = _loc19_;
         }
         if(param14 > _loc18_)
         {
            param14 = _loc18_;
         }
         if(param15 > _loc19_)
         {
            param15 = _loc19_;
         }
         var _loc20_:Number = param14 * 0.292893218813453;
         var _loc21_:Number = param15 * 0.292893218813453;
         var _loc22_:Number = param14 * 0.585786437626905;
         var _loc23_:Number = param15 * 0.585786437626905;
         param1.moveTo(_loc16_,_loc17_ - param15);
         param1.curveTo(_loc16_,_loc17_ - _loc23_,_loc16_ - _loc20_,_loc17_ - _loc21_);
         param1.curveTo(_loc16_ - _loc22_,_loc17_,_loc16_ - param14,_loc17_);
         _loc20_ = param12 * 0.292893218813453;
         _loc21_ = param13 * 0.292893218813453;
         _loc22_ = param12 * 0.585786437626905;
         _loc23_ = param13 * 0.585786437626905;
         param1.lineTo(param2 + param12,_loc17_);
         param1.curveTo(param2 + _loc22_,_loc17_,param2 + _loc20_,_loc17_ - _loc21_);
         param1.curveTo(param2,_loc17_ - _loc23_,param2,_loc17_ - param13);
         _loc20_ = param8 * 0.292893218813453;
         _loc21_ = param9 * 0.292893218813453;
         _loc22_ = param8 * 0.585786437626905;
         _loc23_ = param9 * 0.585786437626905;
         param1.lineTo(param2,param3 + param9);
         param1.curveTo(param2,param3 + _loc23_,param2 + _loc20_,param3 + _loc21_);
         param1.curveTo(param2 + _loc22_,param3,param2 + param8,param3);
         _loc20_ = param10 * 0.292893218813453;
         _loc21_ = param11 * 0.292893218813453;
         _loc22_ = param10 * 0.585786437626905;
         _loc23_ = param11 * 0.585786437626905;
         param1.lineTo(_loc16_ - param10,param3);
         param1.curveTo(_loc16_ - _loc22_,param3,_loc16_ - _loc20_,param3 + _loc21_);
         param1.curveTo(_loc16_,param3 + _loc23_,_loc16_,param3 + param11);
         param1.lineTo(_loc16_,_loc17_ - param15);
      }
   }
}

package mx.utils
{
   public interface IXMLNotifiable
   {
      
      function xmlNotification(param1:Object, param2:String, param3:Object, param4:Object, param5:Object) : void;
   }
}

package mx.utils
{
   import flash.display.LoaderInfo;
   import flash.system.Capabilities;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class LoaderUtil
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      mx_internal static var urlFilters:Array = [{
         "searchString":"/[[DYNAMIC]]/",
         "filterFunction":dynamicURLFilter
      },{
         "searchString":"/[[IMPORT]]/",
         "filterFunction":importURLFilter
      }];
      
      public function LoaderUtil()
      {
         super();
      }
      
      public static function normalizeURL(param1:LoaderInfo) : String
      {
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:Function = null;
         var _loc2_:String = param1.url;
         var _loc6_:uint = LoaderUtil.mx_internal::urlFilters.length;
         var _loc7_:uint = 0;
         while(_loc7_ < _loc6_)
         {
            _loc4_ = LoaderUtil.mx_internal::urlFilters[_loc7_].searchString;
            _loc3_ = int(_loc2_.indexOf(_loc4_));
            if(_loc3_ != -1)
            {
               _loc5_ = LoaderUtil.mx_internal::urlFilters[_loc7_].filterFunction;
               _loc2_ = _loc5_(_loc2_,_loc3_);
            }
            _loc7_++;
         }
         if(isMac())
         {
            return encodeURI(_loc2_);
         }
         return _loc2_;
      }
      
      public static function createAbsoluteURL(param1:String, param2:String) : String
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc3_:String = param2;
         if(Boolean(param1) && !(param2.indexOf(":") > -1 || param2.indexOf("/") == 0 || param2.indexOf("\\") == 0))
         {
            _loc4_ = int(param1.indexOf("?"));
            if(_loc4_ != -1)
            {
               param1 = param1.substring(0,_loc4_);
            }
            _loc4_ = int(param1.indexOf("#"));
            if(_loc4_ != -1)
            {
               param1 = param1.substring(0,_loc4_);
            }
            _loc5_ = Math.max(param1.lastIndexOf("\\"),param1.lastIndexOf("/"));
            if(param2.indexOf("./") == 0)
            {
               param2 = param2.substring(2);
            }
            else
            {
               while(param2.indexOf("../") == 0)
               {
                  param2 = param2.substring(3);
                  _loc5_ = Math.max(param1.lastIndexOf("\\",_loc5_ - 1),param1.lastIndexOf("/",_loc5_ - 1));
               }
            }
            if(_loc5_ != -1)
            {
               _loc3_ = param1.substr(0,_loc5_ + 1) + param2;
            }
         }
         return _loc3_;
      }
      
      private static function isMac() : Boolean
      {
         return Capabilities.os.substring(0,3) == "Mac";
      }
      
      private static function dynamicURLFilter(param1:String, param2:int) : String
      {
         return param1.substring(0,param2);
      }
      
      private static function importURLFilter(param1:String, param2:int) : String
      {
         var _loc3_:int = int(param1.indexOf("://"));
         return param1.substring(0,_loc3_ + 3) + param1.substring(param2 + 12);
      }
   }
}

package mx.utils
{
   import flash.display.DisplayObject;
   import flash.geom.Matrix;
   import flash.geom.Matrix3D;
   import flash.geom.PerspectiveProjection;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.geom.Utils3D;
   import flash.geom.Vector3D;
   import flash.utils.getDefinitionByName;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public final class MatrixUtil
   {
      
      private static var fakeDollarParent:QName;
      
      private static var uiComponentClass:Class;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static const RADIANS_PER_DEGREES:Number = Math.PI / 180;
      
      private static var staticPoint:Point = new Point();
      
      public function MatrixUtil()
      {
         super();
      }
      
      public static function clampRotation(param1:Number) : Number
      {
         if(param1 > 180 || param1 < -180)
         {
            param1 %= 360;
            if(param1 > 180)
            {
               param1 -= 360;
            }
            else if(param1 < -180)
            {
               param1 += 360;
            }
         }
         return param1;
      }
      
      public static function transformPoint(param1:Number, param2:Number, param3:Matrix) : Point
      {
         if(!param3)
         {
            staticPoint.x = param1;
            staticPoint.y = param2;
            return staticPoint;
         }
         staticPoint.x = param3.a * param1 + param3.c * param2 + param3.tx;
         staticPoint.y = param3.b * param1 + param3.d * param2 + param3.ty;
         return staticPoint;
      }
      
      public static function composeMatrix(param1:Number = 0, param2:Number = 0, param3:Number = 1, param4:Number = 1, param5:Number = 0, param6:Number = 0, param7:Number = 0) : Matrix
      {
         var _loc8_:Matrix = new Matrix();
         _loc8_.translate(-param6,-param7);
         _loc8_.scale(param3,param4);
         if(param5 != 0)
         {
            _loc8_.rotate(param5 / 180 * Math.PI);
         }
         _loc8_.translate(param6 + param1,param7 + param2);
         return _loc8_;
      }
      
      public static function decomposeMatrix(param1:Vector.<Number>, param2:Matrix, param3:Number = 0, param4:Number = 0) : void
      {
         var _loc5_:Number = NaN;
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         var _loc8_:Number = NaN;
         var _loc10_:Point = null;
         _loc5_ = param2.a;
         _loc6_ = param2.b;
         param1[3] = Math.sqrt(_loc5_ * _loc5_ + _loc6_ * _loc6_);
         _loc7_ = param2.c;
         _loc8_ = param2.d;
         param1[4] = Math.sqrt(_loc7_ * _loc7_ + _loc8_ * _loc8_);
         var _loc9_:Number = _loc5_ * _loc8_ - _loc6_ * _loc7_;
         if(_loc9_ < 0)
         {
            param1[4] = -param1[4];
            _loc7_ = -_loc7_;
            _loc8_ = -_loc8_;
         }
         param1[2] = Math.atan2(_loc6_,_loc5_) / RADIANS_PER_DEGREES;
         if(param3 != 0 || param4 != 0)
         {
            _loc10_ = param2.transformPoint(new Point(param3,param4));
            param1[0] = _loc10_.x - param3;
            param1[1] = _loc10_.y - param4;
         }
         else
         {
            param1[0] = param2.tx;
            param1[1] = param2.ty;
         }
      }
      
      public static function rectUnion(param1:Number, param2:Number, param3:Number, param4:Number, param5:Rectangle) : Rectangle
      {
         if(!param5)
         {
            return new Rectangle(param1,param2,param3 - param1,param4 - param2);
         }
         var _loc6_:Number = Math.min(param5.left,param1);
         var _loc7_:Number = Math.min(param5.top,param2);
         var _loc8_:Number = Math.max(param5.right,param3);
         var _loc9_:Number = Math.max(param5.bottom,param4);
         param5.x = _loc6_;
         param5.y = _loc7_;
         param5.width = _loc8_ - _loc6_;
         param5.height = _loc9_ - _loc7_;
         return param5;
      }
      
      public static function getEllipseBoundingBox(param1:Number, param2:Number, param3:Number, param4:Number, param5:Matrix, param6:Rectangle = null) : Rectangle
      {
         var _loc11_:Number = NaN;
         var _loc12_:Number = NaN;
         var _loc17_:Point = null;
         var _loc7_:Number = param5.a;
         var _loc8_:Number = param5.b;
         var _loc9_:Number = param5.c;
         var _loc10_:Number = param5.d;
         if(param3 == 0 && param4 == 0)
         {
            _loc17_ = new Point(param1,param2);
            _loc17_ = param5.transformPoint(_loc17_);
            return rectUnion(_loc17_.x,_loc17_.y,_loc17_.x,_loc17_.y,param6);
         }
         if(_loc7_ * param3 == 0)
         {
            _loc11_ = Math.PI / 2;
         }
         else
         {
            _loc11_ = Math.atan(_loc9_ * param4 / (_loc7_ * param3));
         }
         if(_loc8_ * param3 == 0)
         {
            _loc12_ = Math.PI / 2;
         }
         else
         {
            _loc12_ = Math.atan(_loc10_ * param4 / (_loc8_ * param3));
         }
         var _loc13_:Number = _loc7_ * Math.cos(_loc11_) * param3 + _loc9_ * Math.sin(_loc11_) * param4;
         var _loc14_:Number = -_loc13_;
         _loc13_ += _loc7_ * param1 + _loc9_ * param2 + param5.tx;
         _loc14_ += _loc7_ * param1 + _loc9_ * param2 + param5.tx;
         var _loc15_:Number = _loc8_ * Math.cos(_loc12_) * param3 + _loc10_ * Math.sin(_loc12_) * param4;
         var _loc16_:Number = -_loc15_;
         _loc15_ += _loc8_ * param1 + _loc10_ * param2 + param5.ty;
         _loc16_ += _loc8_ * param1 + _loc10_ * param2 + param5.ty;
         return rectUnion(Math.min(_loc13_,_loc14_),Math.min(_loc15_,_loc16_),Math.max(_loc13_,_loc14_),Math.max(_loc15_,_loc16_),param6);
      }
      
      public static function getQBezierSegmentBBox(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number, param8:Number, param9:Matrix, param10:Rectangle) : Rectangle
      {
         var _loc11_:Point = null;
         var _loc18_:Number = NaN;
         var _loc19_:Number = NaN;
         var _loc20_:Number = NaN;
         var _loc21_:Number = NaN;
         _loc11_ = MatrixUtil.transformPoint(param1 * param7,param2 * param8,param9);
         param1 = _loc11_.x;
         param2 = _loc11_.y;
         _loc11_ = MatrixUtil.transformPoint(param3 * param7,param4 * param8,param9);
         param3 = _loc11_.x;
         param4 = _loc11_.y;
         _loc11_ = MatrixUtil.transformPoint(param5 * param7,param6 * param8,param9);
         param5 = _loc11_.x;
         param6 = _loc11_.y;
         var _loc12_:Number = Math.min(param1,param5);
         var _loc13_:Number = Math.max(param1,param5);
         var _loc14_:Number = Math.min(param2,param6);
         var _loc15_:Number = Math.max(param2,param6);
         var _loc16_:Number = param1 - 2 * param3 + param5;
         if(_loc16_ != 0)
         {
            _loc18_ = (param1 - param3) / _loc16_;
            if(0 <= _loc18_ && _loc18_ <= 1)
            {
               _loc19_ = (1 - _loc18_) * (1 - _loc18_) * param1 + 2 * _loc18_ * (1 - _loc18_) * param3 + _loc18_ * _loc18_ * param5;
               _loc12_ = Math.min(_loc19_,_loc12_);
               _loc13_ = Math.max(_loc19_,_loc13_);
            }
         }
         var _loc17_:Number = param2 - 2 * param4 + param6;
         if(_loc17_ != 0)
         {
            _loc20_ = (param2 - param4) / _loc17_;
            if(0 <= _loc20_ && _loc20_ <= 1)
            {
               _loc21_ = (1 - _loc20_) * (1 - _loc20_) * param2 + 2 * _loc20_ * (1 - _loc20_) * param4 + _loc20_ * _loc20_ * param6;
               _loc14_ = Math.min(_loc21_,_loc14_);
               _loc15_ = Math.max(_loc21_,_loc15_);
            }
         }
         return rectUnion(_loc12_,_loc14_,_loc13_,_loc15_,param10);
      }
      
      public static function transformSize(param1:Number, param2:Number, param3:Matrix) : Point
      {
         var _loc4_:Number = param3.a;
         var _loc5_:Number = param3.b;
         var _loc6_:Number = param3.c;
         var _loc7_:Number = param3.d;
         var _loc8_:Number = 0;
         var _loc9_:Number = 0;
         var _loc10_:Number = param1 * _loc4_;
         var _loc11_:Number = param1 * _loc5_;
         var _loc12_:Number = param2 * _loc6_;
         var _loc13_:Number = param2 * _loc7_;
         var _loc14_:Number = _loc10_ + _loc12_;
         var _loc15_:Number = _loc11_ + _loc13_;
         var _loc16_:Number = Math.min(Math.min(_loc8_,_loc10_),Math.min(_loc12_,_loc14_));
         var _loc17_:Number = Math.max(Math.max(_loc8_,_loc10_),Math.max(_loc12_,_loc14_));
         var _loc18_:Number = Math.min(Math.min(_loc9_,_loc11_),Math.min(_loc13_,_loc15_));
         var _loc19_:Number = Math.max(Math.max(_loc9_,_loc11_),Math.max(_loc13_,_loc15_));
         staticPoint.x = _loc17_ - _loc16_;
         staticPoint.y = _loc19_ - _loc18_;
         return staticPoint;
      }
      
      public static function transformBounds(param1:Number, param2:Number, param3:Matrix, param4:Point = null) : Point
      {
         var _loc21_:Number = NaN;
         var _loc22_:Number = NaN;
         var _loc23_:Number = NaN;
         var _loc24_:Number = NaN;
         var _loc5_:Number = param3.a;
         var _loc6_:Number = param3.b;
         var _loc7_:Number = param3.c;
         var _loc8_:Number = param3.d;
         var _loc9_:Number = 0;
         var _loc10_:Number = 0;
         var _loc11_:Number = param1 * _loc5_;
         var _loc12_:Number = param1 * _loc6_;
         var _loc13_:Number = param2 * _loc7_;
         var _loc14_:Number = param2 * _loc8_;
         var _loc15_:Number = _loc11_ + _loc13_;
         var _loc16_:Number = _loc12_ + _loc14_;
         var _loc17_:Number = Math.min(Math.min(_loc9_,_loc11_),Math.min(_loc13_,_loc15_));
         var _loc18_:Number = Math.max(Math.max(_loc9_,_loc11_),Math.max(_loc13_,_loc15_));
         var _loc19_:Number = Math.min(Math.min(_loc10_,_loc12_),Math.min(_loc14_,_loc16_));
         var _loc20_:Number = Math.max(Math.max(_loc10_,_loc12_),Math.max(_loc14_,_loc16_));
         staticPoint.x = _loc18_ - _loc17_;
         staticPoint.y = _loc20_ - _loc19_;
         if(param4)
         {
            _loc21_ = param3.tx;
            _loc22_ = param3.ty;
            _loc23_ = param4.x;
            _loc24_ = param4.y;
            param4.x = _loc17_ + _loc5_ * _loc23_ + _loc6_ * _loc24_ + _loc21_;
            param4.y = _loc19_ + _loc7_ * _loc23_ + _loc8_ * _loc24_ + _loc22_;
         }
         return staticPoint;
      }
      
      public static function projectBounds(param1:Rectangle, param2:Matrix3D, param3:PerspectiveProjection) : Rectangle
      {
         var _loc4_:Number = param3.projectionCenter.x;
         var _loc5_:Number = param3.projectionCenter.y;
         param2.appendTranslation(-_loc4_,-_loc5_,param3.focalLength);
         param2.append(param3.toMatrix3D());
         var _loc6_:Vector3D = new Vector3D(param1.left,param1.top,0);
         var _loc7_:Vector3D = new Vector3D(param1.right,param1.top,0);
         var _loc8_:Vector3D = new Vector3D(param1.left,param1.bottom,0);
         var _loc9_:Vector3D = new Vector3D(param1.right,param1.bottom,0);
         _loc6_ = Utils3D.projectVector(param2,_loc6_);
         _loc7_ = Utils3D.projectVector(param2,_loc7_);
         _loc8_ = Utils3D.projectVector(param2,_loc8_);
         _loc9_ = Utils3D.projectVector(param2,_loc9_);
         var _loc10_:Number = Math.max(Math.max(_loc6_.x,_loc7_.x),Math.max(_loc8_.x,_loc9_.x));
         var _loc11_:Number = Math.min(Math.min(_loc6_.x,_loc7_.x),Math.min(_loc8_.x,_loc9_.x));
         var _loc12_:Number = Math.max(Math.max(_loc6_.y,_loc7_.y),Math.max(_loc8_.y,_loc9_.y));
         var _loc13_:Number = Math.min(Math.min(_loc6_.y,_loc7_.y),Math.min(_loc8_.y,_loc9_.y));
         param1.x = _loc11_ + _loc4_;
         param1.y = _loc13_ + _loc5_;
         param1.width = _loc10_ - _loc11_;
         param1.height = _loc12_ - _loc13_;
         return param1;
      }
      
      public static function isDeltaIdentity(param1:Matrix) : Boolean
      {
         return param1.a == 1 && param1.d == 1 && param1.b == 0 && param1.c == 0;
      }
      
      public static function fitBounds(param1:Number, param2:Number, param3:Matrix, param4:Number, param5:Number, param6:Number, param7:Number, param8:Number, param9:Number) : Point
      {
         var _loc10_:Point = null;
         if(isNaN(param1) && isNaN(param2))
         {
            return new Point(param4,param5);
         }
         if(!isNaN(param1) && !isNaN(param2))
         {
            _loc10_ = calcUBoundsToFitTBounds(param1,param2,param3,param6,param7,param8,param9);
            if(!_loc10_)
            {
               _loc10_ = calcUBoundsToFitTBoundsWidth(param1,param3,param4,param5,param6,param7,param8,param9);
               if((Boolean(_loc10_)) && transformSize(_loc10_.x,_loc10_.y,param3).y > param2)
               {
                  _loc10_ = calcUBoundsToFitTBoundsHeight(param2,param3,param4,param5,param6,param7,param8,param9);
                  if((Boolean(_loc10_)) && transformSize(_loc10_.x,_loc10_.y,param3).x > param1)
                  {
                     _loc10_ = null;
                  }
               }
            }
            return _loc10_;
         }
         if(!isNaN(param1))
         {
            return calcUBoundsToFitTBoundsWidth(param1,param3,param4,param5,param6,param7,param8,param9);
         }
         return calcUBoundsToFitTBoundsHeight(param2,param3,param4,param5,param6,param7,param8,param9);
      }
      
      public static function calcUBoundsToFitTBoundsHeight(param1:Number, param2:Matrix, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number, param8:Number) : Point
      {
         var _loc12_:Point = null;
         var _loc13_:Number = NaN;
         var _loc14_:Number = NaN;
         var _loc15_:Number = NaN;
         var _loc16_:Number = NaN;
         var _loc18_:Number = NaN;
         var _loc19_:Number = NaN;
         param3 = Math.max(param5,Math.min(param7,param3));
         param4 = Math.max(param6,Math.min(param8,param4));
         var _loc9_:Number = param2.b;
         var _loc10_:Number = param2.d;
         if(-1e-9 < _loc9_ && _loc9_ < 1e-9)
         {
            _loc9_ = 0;
         }
         if(-1e-9 < _loc10_ && _loc10_ < 1e-9)
         {
            _loc10_ = 0;
         }
         if(_loc9_ == 0)
         {
            return new Point(param3,param1 / Math.abs(_loc10_));
         }
         if(_loc10_ == 0)
         {
            return new Point(param1 / Math.abs(_loc9_),param4);
         }
         var _loc11_:Number = _loc9_ * _loc10_ >= 0 ? _loc10_ : -_loc10_;
         if(_loc11_ != 0)
         {
            _loc18_ = 1 / _loc11_;
            _loc13_ = param3;
            _loc14_ = (param1 - _loc9_ * _loc13_) * _loc18_;
            if(param6 <= _loc14_ && _loc14_ <= param8 && _loc9_ * _loc13_ + _loc11_ * _loc14_ >= 0)
            {
               _loc12_ = new Point(_loc13_,_loc14_);
            }
            _loc14_ = (-param1 - _loc9_ * _loc13_) * _loc18_;
            if(param6 <= _loc14_ && _loc14_ <= param8 && _loc9_ * _loc13_ + _loc11_ * _loc14_ < 0)
            {
               if(!_loc12_ || transformSize(_loc12_.x,_loc12_.y,param2).x > transformSize(_loc13_,_loc14_,param2).x)
               {
                  _loc12_ = new Point(_loc13_,_loc14_);
               }
            }
         }
         if(_loc9_ != 0)
         {
            _loc19_ = 1 / _loc9_;
            _loc14_ = param4;
            _loc13_ = (param1 - _loc11_ * _loc14_) * _loc19_;
            if(param5 <= _loc13_ && _loc13_ <= param7 && _loc9_ * _loc13_ + _loc11_ * _loc14_ >= 0)
            {
               if(!_loc12_ || transformSize(_loc12_.x,_loc12_.y,param2).x > transformSize(_loc13_,_loc14_,param2).x)
               {
                  _loc12_ = new Point(_loc13_,_loc14_);
               }
            }
            _loc13_ = (-param1 - _loc11_ * _loc14_) * _loc19_;
            if(param5 <= _loc13_ && _loc13_ <= param7 && _loc9_ * _loc13_ + _loc11_ * _loc14_ < 0)
            {
               if(!_loc12_ || transformSize(_loc12_.x,_loc12_.y,param2).x > transformSize(_loc13_,_loc14_,param2).x)
               {
                  _loc12_ = new Point(_loc13_,_loc14_);
               }
            }
         }
         if(_loc12_)
         {
            return _loc12_;
         }
         _loc15_ = param2.a;
         _loc16_ = param2.c;
         var _loc17_:Number = _loc15_ * _loc16_ >= 0 ? _loc16_ : -_loc16_;
         return solveEquation(_loc9_,_loc11_,param1,param5,param6,param7,param8,_loc15_,_loc17_);
      }
      
      public static function calcUBoundsToFitTBoundsWidth(param1:Number, param2:Matrix, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number, param8:Number) : Point
      {
         var _loc12_:Point = null;
         var _loc13_:Number = NaN;
         var _loc14_:Number = NaN;
         var _loc15_:Number = NaN;
         var _loc16_:Number = NaN;
         var _loc18_:Number = NaN;
         var _loc19_:Number = NaN;
         param3 = Math.max(param5,Math.min(param7,param3));
         param4 = Math.max(param6,Math.min(param8,param4));
         var _loc9_:Number = param2.a;
         var _loc10_:Number = param2.c;
         if(-1e-9 < _loc9_ && _loc9_ < 1e-9)
         {
            _loc9_ = 0;
         }
         if(-1e-9 < _loc10_ && _loc10_ < 1e-9)
         {
            _loc10_ = 0;
         }
         if(_loc9_ == 0)
         {
            return new Point(param3,param1 / Math.abs(_loc10_));
         }
         if(_loc10_ == 0)
         {
            return new Point(param1 / Math.abs(_loc9_),param4);
         }
         var _loc11_:Number = _loc9_ * _loc10_ >= 0 ? _loc10_ : -_loc10_;
         if(_loc11_ != 0)
         {
            _loc18_ = 1 / _loc11_;
            _loc13_ = param3;
            _loc14_ = (param1 - _loc9_ * _loc13_) * _loc18_;
            if(param6 <= _loc14_ && _loc14_ <= param8 && _loc9_ * _loc13_ + _loc11_ * _loc14_ >= 0)
            {
               _loc12_ = new Point(_loc13_,_loc14_);
            }
            _loc14_ = (-param1 - _loc9_ * _loc13_) * _loc18_;
            if(param6 <= _loc14_ && _loc14_ <= param8 && _loc9_ * _loc13_ + _loc11_ * _loc14_ < 0)
            {
               if(!_loc12_ || transformSize(_loc12_.x,_loc12_.y,param2).y > transformSize(_loc13_,_loc14_,param2).y)
               {
                  _loc12_ = new Point(_loc13_,_loc14_);
               }
            }
         }
         if(_loc9_ != 0)
         {
            _loc19_ = 1 / _loc9_;
            _loc14_ = param4;
            _loc13_ = (param1 - _loc11_ * _loc14_) * _loc19_;
            if(param5 <= _loc13_ && _loc13_ <= param7 && _loc9_ * _loc13_ + _loc11_ * _loc14_ >= 0)
            {
               if(!_loc12_ || transformSize(_loc12_.x,_loc12_.y,param2).y > transformSize(_loc13_,_loc14_,param2).y)
               {
                  _loc12_ = new Point(_loc13_,_loc14_);
               }
            }
            _loc13_ = (-param1 - _loc11_ * _loc14_) * _loc19_;
            if(param5 <= _loc13_ && _loc13_ <= param7 && _loc9_ * _loc13_ + _loc11_ * _loc14_ < 0)
            {
               if(!_loc12_ || transformSize(_loc12_.x,_loc12_.y,param2).y > transformSize(_loc13_,_loc14_,param2).y)
               {
                  _loc12_ = new Point(_loc13_,_loc14_);
               }
            }
         }
         if(_loc12_)
         {
            return _loc12_;
         }
         _loc15_ = param2.b;
         _loc16_ = param2.d;
         var _loc17_:Number = _loc15_ * _loc16_ >= 0 ? _loc16_ : -_loc16_;
         return solveEquation(_loc9_,_loc11_,param1,param5,param6,param7,param8,_loc15_,_loc17_);
      }
      
      private static function solveEquation(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number, param7:Number, param8:Number, param9:Number) : Point
      {
         var _loc10_:Number = NaN;
         var _loc11_:Number = NaN;
         var _loc12_:Point = null;
         if(param1 == 0 || param2 == 0)
         {
            return null;
         }
         var _loc13_:Number = (param3 - param4 * param1) / param2;
         var _loc14_:Number = (param3 - param6 * param1) / param2;
         var _loc15_:Number = Math.max(param5,Math.min(_loc13_,_loc14_));
         var _loc16_:Number = Math.min(param7,Math.max(_loc13_,_loc14_));
         var _loc17_:Number = param8 * param2 - param1 * param9;
         if(_loc15_ <= _loc16_)
         {
            if(Math.abs(_loc17_) < 1e-9)
            {
               _loc11_ = param3 / (param1 + param2);
            }
            else
            {
               _loc11_ = param8 * param3 / _loc17_;
            }
            _loc11_ = Math.max(_loc15_,Math.min(_loc11_,_loc16_));
            _loc10_ = (param3 - param2 * _loc11_) / param1;
            return new Point(_loc10_,_loc11_);
         }
         _loc13_ = -(param4 * param1 + param3) / param2;
         _loc14_ = -(param6 * param1 + param3) / param2;
         _loc15_ = Math.max(param5,Math.min(_loc13_,_loc14_));
         _loc16_ = Math.min(param7,Math.max(_loc13_,_loc14_));
         if(_loc15_ <= _loc16_)
         {
            if(Math.abs(_loc17_) < 1e-9)
            {
               _loc11_ = -param3 / (param1 + param2);
            }
            else
            {
               _loc11_ = -param8 * param3 / _loc17_;
            }
            _loc11_ = Math.max(_loc15_,Math.min(_loc11_,_loc16_));
            _loc10_ = (-param3 - param2 * _loc11_) / param1;
            return new Point(_loc10_,_loc11_);
         }
         return null;
      }
      
      public static function calcUBoundsToFitTBounds(param1:Number, param2:Number, param3:Matrix, param4:Number, param5:Number, param6:Number, param7:Number) : Point
      {
         var _loc16_:Point = null;
         var _loc8_:Number = param3.a;
         var _loc9_:Number = param3.b;
         var _loc10_:Number = param3.c;
         var _loc11_:Number = param3.d;
         if(-1e-9 < _loc8_ && _loc8_ < 1e-9)
         {
            _loc8_ = 0;
         }
         if(-1e-9 < _loc9_ && _loc9_ < 1e-9)
         {
            _loc9_ = 0;
         }
         if(-1e-9 < _loc10_ && _loc10_ < 1e-9)
         {
            _loc10_ = 0;
         }
         if(-1e-9 < _loc11_ && _loc11_ < 1e-9)
         {
            _loc11_ = 0;
         }
         if(_loc9_ == 0 && _loc10_ == 0)
         {
            if(_loc8_ == 0 || _loc11_ == 0)
            {
               return null;
            }
            return new Point(param1 / Math.abs(_loc8_),param2 / Math.abs(_loc11_));
         }
         if(_loc8_ == 0 && _loc11_ == 0)
         {
            if(_loc9_ == 0 || _loc10_ == 0)
            {
               return null;
            }
            return new Point(param2 / Math.abs(_loc9_),param1 / Math.abs(_loc10_));
         }
         var _loc12_:Number = _loc8_ * _loc10_ >= 0 ? _loc10_ : -_loc10_;
         var _loc13_:Number = _loc9_ * _loc11_ >= 0 ? _loc11_ : -_loc11_;
         var _loc14_:Number = _loc8_ * _loc13_ - _loc9_ * _loc12_;
         if(Math.abs(_loc14_) < 1e-9)
         {
            if(_loc12_ == 0 || _loc8_ == 0 || _loc8_ == -_loc12_)
            {
               return null;
            }
            if(Math.abs(_loc8_ * param2) - Math.abs(_loc9_ * param1) > 1e-9)
            {
               return null;
            }
            return solveEquation(_loc8_,_loc12_,param1,param4,param4,param6,param7,_loc9_,_loc13_);
         }
         var _loc15_:Number = 1 / _loc14_;
         param1 *= _loc15_;
         param2 *= _loc15_;
         _loc16_ = solveSystem(_loc8_,_loc12_,_loc9_,_loc13_,param1,param2);
         if((_loc16_) && param4 <= _loc16_.x && _loc16_.x <= param6 && param5 <= _loc16_.y && _loc16_.y <= param7 && _loc8_ * _loc16_.x + _loc12_ * _loc16_.x >= 0 && _loc9_ * _loc16_.x + _loc13_ * _loc16_.y >= 0)
         {
            return _loc16_;
         }
         _loc16_ = solveSystem(_loc8_,_loc12_,_loc9_,_loc13_,param1,-param2);
         if((_loc16_) && param4 <= _loc16_.x && _loc16_.x <= param6 && param5 <= _loc16_.y && _loc16_.y <= param7 && _loc8_ * _loc16_.x + _loc12_ * _loc16_.x >= 0 && _loc9_ * _loc16_.x + _loc13_ * _loc16_.y < 0)
         {
            return _loc16_;
         }
         _loc16_ = solveSystem(_loc8_,_loc12_,_loc9_,_loc13_,-param1,param2);
         if((_loc16_) && param4 <= _loc16_.x && _loc16_.x <= param6 && param5 <= _loc16_.y && _loc16_.y <= param7 && _loc8_ * _loc16_.x + _loc12_ * _loc16_.x < 0 && _loc9_ * _loc16_.x + _loc13_ * _loc16_.y >= 0)
         {
            return _loc16_;
         }
         _loc16_ = solveSystem(_loc8_,_loc12_,_loc9_,_loc13_,-param1,-param2);
         if((_loc16_) && param4 <= _loc16_.x && _loc16_.x <= param6 && param5 <= _loc16_.y && _loc16_.y <= param7 && _loc8_ * _loc16_.x + _loc12_ * _loc16_.x < 0 && _loc9_ * _loc16_.x + _loc13_ * _loc16_.y < 0)
         {
            return _loc16_;
         }
         return null;
      }
      
      public static function isEqual(param1:Matrix, param2:Matrix) : Boolean
      {
         return param1 && param2 && param1.a == param2.a && param1.b == param2.b && param1.c == param2.c && param1.d == param2.d && param1.tx == param2.tx && param1.ty == param2.ty || !param1 && !param2;
      }
      
      public static function isEqual3D(param1:Matrix3D, param2:Matrix3D) : Boolean
      {
         var _loc3_:Vector.<Number> = null;
         var _loc4_:Vector.<Number> = null;
         if(Boolean(param1) && Boolean(param2) && param1.rawData.length == param2.rawData.length)
         {
            _loc3_ = param1.rawData;
            _loc4_ = param2.rawData;
            return _loc3_[0] == _loc4_[0] && _loc3_[1] == _loc4_[1] && _loc3_[2] == _loc4_[2] && _loc3_[3] == _loc4_[3] && _loc3_[4] == _loc4_[4] && _loc3_[5] == _loc4_[5] && _loc3_[6] == _loc4_[6] && _loc3_[7] == _loc4_[7] && _loc3_[8] == _loc4_[8] && _loc3_[9] == _loc4_[9] && _loc3_[10] == _loc4_[10] && _loc3_[11] == _loc4_[11] && _loc3_[12] == _loc4_[12] && _loc3_[13] == _loc4_[13] && _loc3_[14] == _loc4_[14] && _loc3_[15] == _loc4_[15];
         }
         return !param1 && !param2;
      }
      
      private static function solveSystem(param1:Number, param2:Number, param3:Number, param4:Number, param5:Number, param6:Number) : Point
      {
         return new Point(param4 * param5 - param2 * param6,param1 * param6 - param3 * param5);
      }
      
      public static function getConcatenatedMatrix(param1:DisplayObject) : Matrix
      {
         var _loc3_:Rectangle = null;
         var _loc2_:Matrix = new Matrix();
         if(uiComponentClass == null)
         {
            uiComponentClass = Class(getDefinitionByName("mx.core.UIComponent"));
         }
         if(fakeDollarParent == null)
         {
            fakeDollarParent = new QName(mx_internal,"$parent");
         }
         while(Boolean(param1) && Boolean(param1.transform.matrix))
         {
            _loc3_ = param1.scrollRect;
            if(_loc3_ != null)
            {
               _loc2_.translate(-_loc3_.x,-_loc3_.y);
            }
            _loc2_.concat(param1.transform.matrix);
            if(Boolean(uiComponentClass) && param1 is uiComponentClass)
            {
               param1 = param1[fakeDollarParent] as DisplayObject;
            }
            else
            {
               param1 = param1.parent as DisplayObject;
            }
         }
         return _loc2_;
      }
   }
}

package mx.utils
{
   import flash.display.DisplayObject;
   import flash.utils.getQualifiedClassName;
   import mx.core.IRepeaterClient;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class NameUtil
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static var counter:int = 0;
      
      public function NameUtil()
      {
         super();
      }
      
      public static function createUniqueName(param1:Object) : String
      {
         if(!param1)
         {
            return null;
         }
         var _loc2_:* = getQualifiedClassName(param1);
         var _loc3_:int = int(_loc2_.indexOf("::"));
         if(_loc3_ != -1)
         {
            _loc2_ = _loc2_.substr(_loc3_ + 2);
         }
         var _loc4_:int = int(_loc2_.charCodeAt(_loc2_.length - 1));
         if(_loc4_ >= 48 && _loc4_ <= 57)
         {
            _loc2_ += "_";
         }
         return _loc2_ + counter++;
      }
      
      public static function displayObjectToString(param1:DisplayObject) : String
      {
         var result:String = null;
         var o:DisplayObject = null;
         var s:String = null;
         var indices:Array = null;
         var displayObject:DisplayObject = param1;
         try
         {
            o = displayObject;
            while(o != null)
            {
               if(o.parent && o.stage && o.parent == o.stage)
               {
                  break;
               }
               s = "id" in o && Boolean(o["id"]) ? o["id"] : o.name;
               if(o is IRepeaterClient)
               {
                  indices = IRepeaterClient(o).instanceIndices;
                  if(indices)
                  {
                     s += "[" + indices.join("][") + "]";
                  }
               }
               result = result == null ? s : s + "." + result;
               o = o.parent;
            }
         }
         catch(e:SecurityError)
         {
         }
         return result;
      }
      
      public static function getUnqualifiedClassName(param1:Object) : String
      {
         var _loc2_:String = null;
         if(param1 is String)
         {
            _loc2_ = param1 as String;
         }
         else
         {
            _loc2_ = getQualifiedClassName(param1);
         }
         var _loc3_:int = int(_loc2_.indexOf("::"));
         if(_loc3_ != -1)
         {
            _loc2_ = _loc2_.substr(_loc3_ + 2);
         }
         return _loc2_;
      }
   }
}

package mx.utils
{
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.utils.IDataInput;
   import flash.utils.IDataOutput;
   import flash.utils.IExternalizable;
   import flash.utils.Proxy;
   import flash.utils.flash_proxy;
   import flash.utils.getQualifiedClassName;
   import mx.core.IPropertyChangeNotifier;
   import mx.events.PropertyChangeEvent;
   import mx.events.PropertyChangeEventKind;
   
   use namespace object_proxy;
   use namespace flash_proxy;
   
   [Bindable("propertyChange")]
   public dynamic class ObjectProxy extends Proxy implements IExternalizable, IPropertyChangeNotifier
   {
      
      protected var dispatcher:EventDispatcher;
      
      protected var notifiers:Object;
      
      protected var proxyClass:Class = ObjectProxy;
      
      protected var propertyList:Array;
      
      private var _proxyLevel:int;
      
      private var _item:Object;
      
      private var _type:QName;
      
      private var _id:String;
      
      public function ObjectProxy(param1:Object = null, param2:String = null, param3:int = -1)
      {
         super();
         if(!param1)
         {
            param1 = {};
         }
         this._item = param1;
         this._proxyLevel = param3;
         this.notifiers = {};
         this.dispatcher = new EventDispatcher(this);
         if(param2)
         {
            this._id = param2;
         }
      }
      
      object_proxy function get object() : Object
      {
         return this._item;
      }
      
      object_proxy function get type() : QName
      {
         return this._type;
      }
      
      object_proxy function set type(param1:QName) : void
      {
         this._type = param1;
      }
      
      public function get uid() : String
      {
         if(this._id === null)
         {
            this._id = UIDUtil.createUID();
         }
         return this._id;
      }
      
      public function set uid(param1:String) : void
      {
         this._id = param1;
      }
      
      override flash_proxy function getProperty(param1:*) : *
      {
         var _loc2_:* = undefined;
         if(this.notifiers[param1.toString()])
         {
            return this.notifiers[param1];
         }
         _loc2_ = this._item[param1];
         if(_loc2_)
         {
            if(this._proxyLevel == 0 || ObjectUtil.isSimple(_loc2_))
            {
               return _loc2_;
            }
            _loc2_ = this.object_proxy::getComplexProperty(param1,_loc2_);
         }
         return _loc2_;
      }
      
      override flash_proxy function callProperty(param1:*, ... rest) : *
      {
         return this._item[param1].apply(this._item,rest);
      }
      
      override flash_proxy function deleteProperty(param1:*) : Boolean
      {
         var _loc5_:PropertyChangeEvent = null;
         var _loc2_:IPropertyChangeNotifier = IPropertyChangeNotifier(this.notifiers[param1]);
         if(_loc2_)
         {
            _loc2_.removeEventListener(PropertyChangeEvent.PROPERTY_CHANGE,this.propertyChangeHandler);
            delete this.notifiers[param1];
         }
         var _loc3_:* = this._item[param1];
         var _loc4_:* = delete this._item[param1];
         if(this.dispatcher.hasEventListener(PropertyChangeEvent.PROPERTY_CHANGE))
         {
            _loc5_ = new PropertyChangeEvent(PropertyChangeEvent.PROPERTY_CHANGE);
            _loc5_.kind = PropertyChangeEventKind.DELETE;
            _loc5_.property = param1;
            _loc5_.oldValue = _loc3_;
            _loc5_.source = this;
            this.dispatcher.dispatchEvent(_loc5_);
         }
         return _loc4_;
      }
      
      override flash_proxy function hasProperty(param1:*) : Boolean
      {
         return param1 in this._item;
      }
      
      override flash_proxy function nextName(param1:int) : String
      {
         return this.propertyList[param1 - 1];
      }
      
      override flash_proxy function nextNameIndex(param1:int) : int
      {
         if(param1 == 0)
         {
            this.setupPropertyList();
         }
         if(param1 < this.propertyList.length)
         {
            return param1 + 1;
         }
         return 0;
      }
      
      override flash_proxy function nextValue(param1:int) : *
      {
         return this._item[this.propertyList[param1 - 1]];
      }
      
      override flash_proxy function setProperty(param1:*, param2:*) : void
      {
         var _loc4_:IPropertyChangeNotifier = null;
         var _loc5_:PropertyChangeEvent = null;
         var _loc3_:* = this._item[param1];
         if(_loc3_ !== param2)
         {
            this._item[param1] = param2;
            _loc4_ = IPropertyChangeNotifier(this.notifiers[param1]);
            if(_loc4_)
            {
               _loc4_.removeEventListener(PropertyChangeEvent.PROPERTY_CHANGE,this.propertyChangeHandler);
               delete this.notifiers[param1];
            }
            if(this.dispatcher.hasEventListener(PropertyChangeEvent.PROPERTY_CHANGE))
            {
               if(param1 is QName)
               {
                  param1 = QName(param1).localName;
               }
               _loc5_ = PropertyChangeEvent.createUpdateEvent(this,param1.toString(),_loc3_,param2);
               this.dispatcher.dispatchEvent(_loc5_);
            }
         }
      }
      
      object_proxy function getComplexProperty(param1:*, param2:*) : *
      {
         if(param2 is IPropertyChangeNotifier)
         {
            param2.addEventListener(PropertyChangeEvent.PROPERTY_CHANGE,this.propertyChangeHandler);
            this.notifiers[param1] = param2;
            return param2;
         }
         if(getQualifiedClassName(param2) == "Object")
         {
            param2 = new this.proxyClass(this._item[param1],null,this._proxyLevel > 0 ? this._proxyLevel - 1 : this._proxyLevel);
            param2.addEventListener(PropertyChangeEvent.PROPERTY_CHANGE,this.propertyChangeHandler);
            this.notifiers[param1] = param2;
            return param2;
         }
         return param2;
      }
      
      public function readExternal(param1:IDataInput) : void
      {
         var _loc2_:Object = param1.readObject();
         this._item = _loc2_;
      }
      
      public function writeExternal(param1:IDataOutput) : void
      {
         param1.writeObject(this._item);
      }
      
      public function addEventListener(param1:String, param2:Function, param3:Boolean = false, param4:int = 0, param5:Boolean = false) : void
      {
         this.dispatcher.addEventListener(param1,param2,param3,param4,param5);
      }
      
      public function removeEventListener(param1:String, param2:Function, param3:Boolean = false) : void
      {
         this.dispatcher.removeEventListener(param1,param2,param3);
      }
      
      public function dispatchEvent(param1:Event) : Boolean
      {
         return this.dispatcher.dispatchEvent(param1);
      }
      
      public function hasEventListener(param1:String) : Boolean
      {
         return this.dispatcher.hasEventListener(param1);
      }
      
      public function willTrigger(param1:String) : Boolean
      {
         return this.dispatcher.willTrigger(param1);
      }
      
      public function propertyChangeHandler(param1:PropertyChangeEvent) : void
      {
         this.dispatcher.dispatchEvent(param1);
      }
      
      protected function setupPropertyList() : void
      {
         var _loc1_:String = null;
         if(getQualifiedClassName(this._item) == "Object")
         {
            this.propertyList = [];
            for(_loc1_ in this._item)
            {
               this.propertyList.push(_loc1_);
            }
         }
         else
         {
            this.propertyList = ObjectUtil.getClassInfo(this._item,null,{
               "includeReadOnly":true,
               "uris":["*"]
            }).properties;
         }
      }
   }
}

package mx.utils
{
   import flash.utils.ByteArray;
   import flash.utils.Dictionary;
   import flash.utils.getQualifiedClassName;
   import flash.xml.XMLNode;
   import mx.collections.IList;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class ObjectUtil
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static var defaultToStringExcludes:Array = ["password","credentials"];
      
      private static var refCount:int = 0;
      
      private static var CLASS_INFO_CACHE:Object = {};
      
      public function ObjectUtil()
      {
         super();
      }
      
      public static function compare(param1:Object, param2:Object, param3:int = -1) : int
      {
         return internalCompare(param1,param2,0,param3,new Dictionary(true));
      }
      
      public static function copy(param1:Object) : Object
      {
         var _loc2_:ByteArray = new ByteArray();
         _loc2_.writeObject(param1);
         _loc2_.position = 0;
         return _loc2_.readObject();
      }
      
      public static function clone(param1:Object) : Object
      {
         var _loc2_:Object = copy(param1);
         cloneInternal(_loc2_,param1);
         return _loc2_;
      }
      
      private static function cloneInternal(param1:Object, param2:Object) : void
      {
         var _loc4_:Object = null;
         var _loc5_:* = undefined;
         param1.uid = param2.uid;
         var _loc3_:Object = getClassInfo(param2);
         for each(_loc5_ in _loc3_.properties)
         {
            _loc4_ = param2[_loc5_];
            if((Boolean(_loc4_)) && Boolean(_loc4_.hasOwnProperty("uid")))
            {
               cloneInternal(param1[_loc5_],_loc4_);
            }
         }
      }
      
      public static function isSimple(param1:Object) : Boolean
      {
         var _loc2_:* = typeof param1;
         switch(_loc2_)
         {
            case "number":
            case "string":
            case "boolean":
               return true;
            case "object":
               return param1 is Date || param1 is Array;
            default:
               return false;
         }
      }
      
      public static function numericCompare(param1:Number, param2:Number) : int
      {
         if(isNaN(param1) && isNaN(param2))
         {
            return 0;
         }
         if(isNaN(param1))
         {
            return 1;
         }
         if(isNaN(param2))
         {
            return -1;
         }
         if(param1 < param2)
         {
            return -1;
         }
         if(param1 > param2)
         {
            return 1;
         }
         return 0;
      }
      
      public static function stringCompare(param1:String, param2:String, param3:Boolean = false) : int
      {
         if(param1 == null && param2 == null)
         {
            return 0;
         }
         if(param1 == null)
         {
            return 1;
         }
         if(param2 == null)
         {
            return -1;
         }
         if(param3)
         {
            param1 = param1.toLocaleLowerCase();
            param2 = param2.toLocaleLowerCase();
         }
         var _loc4_:int = int(param1.localeCompare(param2));
         if(_loc4_ < -1)
         {
            _loc4_ = -1;
         }
         else if(_loc4_ > 1)
         {
            _loc4_ = 1;
         }
         return _loc4_;
      }
      
      public static function dateCompare(param1:Date, param2:Date) : int
      {
         if(param1 == null && param2 == null)
         {
            return 0;
         }
         if(param1 == null)
         {
            return 1;
         }
         if(param2 == null)
         {
            return -1;
         }
         var _loc3_:Number = Number(param1.getTime());
         var _loc4_:Number = Number(param2.getTime());
         if(_loc3_ < _loc4_)
         {
            return -1;
         }
         if(_loc3_ > _loc4_)
         {
            return 1;
         }
         return 0;
      }
      
      public static function toString(param1:Object, param2:Array = null, param3:Array = null) : String
      {
         if(param3 == null)
         {
            param3 = defaultToStringExcludes;
         }
         refCount = 0;
         return internalToString(param1,0,null,param2,param3);
      }
      
      private static function internalToString(param1:Object, param2:int = 0, param3:Dictionary = null, param4:Array = null, param5:Array = null) : String
      {
         var str:String = null;
         var classInfo:Object = null;
         var properties:Array = null;
         var isArray:Boolean = false;
         var isDict:Boolean = false;
         var prop:* = undefined;
         var j:int = 0;
         var id:Object = null;
         var value:Object = param1;
         var indent:int = param2;
         var refs:Dictionary = param3;
         var namespaceURIs:Array = param4;
         var exclude:Array = param5;
         var type:String = value == null ? "null" : typeof value;
         switch(type)
         {
            case "boolean":
            case "number":
               return value.toString();
            case "string":
               return "\"" + value.toString() + "\"";
            case "object":
               if(value is Date)
               {
                  return value.toString();
               }
               if(value is XMLNode)
               {
                  return value.toString();
               }
               if(value is Class)
               {
                  return "(" + getQualifiedClassName(value) + ")";
               }
               classInfo = getClassInfo(value,exclude,{
                  "includeReadOnly":true,
                  "uris":namespaceURIs
               });
               properties = classInfo.properties;
               str = "(" + classInfo.name + ")";
               if(refs == null)
               {
                  refs = new Dictionary(true);
               }
               try
               {
                  id = refs[value];
                  if(id != null)
                  {
                     str += "#" + int(id);
                     return str;
                  }
               }
               catch(e:Error)
               {
                  return String(value);
               }
               if(value != null)
               {
                  str += "#" + refCount.toString();
                  refs[value] = refCount;
                  ++refCount;
               }
               isArray = value is Array;
               isDict = value is Dictionary;
               indent += 2;
               j = 0;
               while(j < properties.length)
               {
                  str = newline(str,indent);
                  prop = properties[j];
                  if(isArray)
                  {
                     str += "[";
                  }
                  else if(isDict)
                  {
                     str += "{";
                  }
                  if(isDict)
                  {
                     str += internalToString(prop,indent,refs,namespaceURIs,exclude);
                  }
                  else
                  {
                     str += prop.toString();
                  }
                  if(isArray)
                  {
                     str += "] ";
                  }
                  else if(isDict)
                  {
                     str += "} = ";
                  }
                  else
                  {
                     str += " = ";
                  }
                  try
                  {
                     str += internalToString(value[prop],indent,refs,namespaceURIs,exclude);
                  }
                  catch(e:Error)
                  {
                     str += "?";
                  }
                  j++;
               }
               indent -= 2;
               return str;
               break;
            case "xml":
               return value.toXMLString();
            default:
               return "(" + type + ")";
         }
      }
      
      private static function newline(param1:String, param2:int = 0) : String
      {
         var _loc3_:* = param1;
         _loc3_ += "\n";
         var _loc4_:int = 0;
         while(_loc4_ < param2)
         {
            _loc3_ += " ";
            _loc4_++;
         }
         return _loc3_;
      }
      
      private static function internalCompare(param1:Object, param2:Object, param3:int, param4:int, param5:Dictionary) : int
      {
         var _loc9_:int = 0;
         var _loc10_:Object = null;
         var _loc11_:Object = null;
         var _loc12_:Array = null;
         var _loc13_:Array = null;
         var _loc14_:Boolean = false;
         var _loc15_:QName = null;
         var _loc16_:Object = null;
         var _loc17_:Object = null;
         var _loc18_:int = 0;
         if(param1 == null && param2 == null)
         {
            return 0;
         }
         if(param1 == null)
         {
            return 1;
         }
         if(param2 == null)
         {
            return -1;
         }
         if(param1 is ObjectProxy)
         {
            param1 = ObjectProxy(param1).object_proxy::object;
         }
         if(param2 is ObjectProxy)
         {
            param2 = ObjectProxy(param2).object_proxy::object;
         }
         var _loc6_:* = typeof param1;
         var _loc7_:* = typeof param2;
         var _loc8_:int = 0;
         if(_loc6_ == _loc7_)
         {
            loop2:
            switch(_loc6_)
            {
               case "boolean":
                  _loc8_ = numericCompare(Number(param1),Number(param2));
                  break;
               case "number":
                  _loc8_ = numericCompare(param1 as Number,param2 as Number);
                  break;
               case "string":
                  _loc8_ = stringCompare(param1 as String,param2 as String);
                  break;
               case "object":
                  _loc9_ = param4 > 0 ? param4 - 1 : param4;
                  _loc10_ = getRef(param1,param5);
                  _loc11_ = getRef(param2,param5);
                  if(_loc10_ == _loc11_)
                  {
                     return 0;
                  }
                  param5[_loc11_] = _loc10_;
                  if(param4 != -1 && param3 > param4)
                  {
                     _loc8_ = stringCompare(param1.toString(),param2.toString());
                     break;
                  }
                  if(param1 is Array && param2 is Array)
                  {
                     _loc8_ = arrayCompare(param1 as Array,param2 as Array,param3,param4,param5);
                     break;
                  }
                  if(param1 is Date && param2 is Date)
                  {
                     _loc8_ = dateCompare(param1 as Date,param2 as Date);
                     break;
                  }
                  if(param1 is IList && param2 is IList)
                  {
                     _loc8_ = listCompare(param1 as IList,param2 as IList,param3,param4,param5);
                     break;
                  }
                  if(param1 is ByteArray && param2 is ByteArray)
                  {
                     _loc8_ = byteArrayCompare(param1 as ByteArray,param2 as ByteArray);
                     break;
                  }
                  if(getQualifiedClassName(param1) == getQualifiedClassName(param2))
                  {
                     _loc12_ = getClassInfo(param1).properties;
                     _loc14_ = isDynamicObject(param1);
                     if(_loc14_)
                     {
                        _loc13_ = getClassInfo(param2).properties;
                        _loc8_ = arrayCompare(_loc12_,_loc13_,param3,_loc9_,param5);
                        if(_loc8_ != 0)
                        {
                           return _loc8_;
                        }
                     }
                     _loc18_ = 0;
                     while(true)
                     {
                        if(_loc18_ >= _loc12_.length)
                        {
                           break loop2;
                        }
                        _loc15_ = _loc12_[_loc18_];
                        _loc16_ = param1[_loc15_];
                        _loc17_ = param2[_loc15_];
                        _loc8_ = internalCompare(_loc16_,_loc17_,param3 + 1,_loc9_,param5);
                        if(_loc8_ != 0)
                        {
                           return _loc8_;
                        }
                        _loc18_++;
                     }
                     break;
                  }
                  return 1;
            }
            return _loc8_;
         }
         return stringCompare(_loc6_,_loc7_);
      }
      
      public static function getClassInfo(param1:Object, param2:Array = null, param3:Object = null) : Object
      {
         var propertyNames:Array;
         var dynamic:Boolean;
         var excludeObject:Object;
         var isArray:Boolean;
         var isDict:Boolean;
         var n:int = 0;
         var i:int = 0;
         var result:Object = null;
         var cacheKey:String = null;
         var className:String = null;
         var classAlias:String = null;
         var properties:XMLList = null;
         var prop:XML = null;
         var metadataInfo:Object = null;
         var classInfo:XML = null;
         var numericIndex:Boolean = false;
         var key:* = undefined;
         var p:String = null;
         var pi:Number = NaN;
         var uris:Array = null;
         var uri:String = null;
         var qName:QName = null;
         var j:int = 0;
         var obj:Object = param1;
         var excludes:Array = param2;
         var options:Object = param3;
         if(obj is ObjectProxy)
         {
            obj = ObjectProxy(obj).object_proxy::object;
         }
         if(options == null)
         {
            options = {
               "includeReadOnly":true,
               "uris":null,
               "includeTransient":true
            };
         }
         propertyNames = [];
         dynamic = false;
         if(typeof obj == "xml")
         {
            className = "XML";
            properties = obj.text();
            if(properties.length())
            {
               propertyNames.push("*");
            }
            properties = obj.attributes();
         }
         else
         {
            classInfo = DescribeTypeCache.describeType(obj).typeDescription;
            className = classInfo.@name.toString();
            classAlias = classInfo.@alias.toString();
            dynamic = classInfo.@isDynamic.toString() == "true";
            if(options.includeReadOnly)
            {
               properties = classInfo..accessor.(@access != "writeonly") + classInfo..variable;
            }
            else
            {
               properties = classInfo..accessor.(@access == "readwrite") + classInfo..variable;
            }
            numericIndex = false;
         }
         if(!dynamic)
         {
            cacheKey = getCacheKey(obj,excludes,options);
            result = CLASS_INFO_CACHE[cacheKey];
            if(result != null)
            {
               return result;
            }
         }
         result = {};
         result["name"] = className;
         result["alias"] = classAlias;
         result["properties"] = propertyNames;
         result["dynamic"] = dynamic;
         result["metadata"] = metadataInfo = recordMetadata(properties);
         excludeObject = {};
         if(excludes)
         {
            n = int(excludes.length);
            i = 0;
            while(i < n)
            {
               excludeObject[excludes[i]] = 1;
               i++;
            }
         }
         isArray = className == "Array";
         isDict = className == "flash.utils::Dictionary";
         if(isDict)
         {
            for(key in obj)
            {
               propertyNames.push(key);
            }
         }
         else if(dynamic)
         {
            for(p in obj)
            {
               if(excludeObject[p] != 1)
               {
                  if(isArray)
                  {
                     pi = parseInt(p);
                     if(isNaN(pi))
                     {
                        propertyNames.push(new QName("",p));
                     }
                     else
                     {
                        propertyNames.push(pi);
                     }
                  }
                  else
                  {
                     propertyNames.push(new QName("",p));
                  }
               }
            }
            numericIndex = isArray && !isNaN(Number(p));
         }
         if(!(isArray || isDict || className == "Object"))
         {
            if(className == "XML")
            {
               n = int(properties.length());
               i = 0;
               while(i < n)
               {
                  p = properties[i].name();
                  if(excludeObject[p] != 1)
                  {
                     propertyNames.push(new QName("","@" + p));
                  }
                  i++;
               }
            }
            else
            {
               n = int(properties.length());
               uris = options.uris;
               i = 0;
               for(; i < n; i++)
               {
                  prop = properties[i];
                  p = prop.@name.toString();
                  uri = prop.@uri.toString();
                  if(excludeObject[p] != 1)
                  {
                     if(!(!options.includeTransient && internalHasMetadata(metadataInfo,p,"Transient")))
                     {
                        if(uris != null)
                        {
                           if(uris.length == 1 && uris[0] == "*")
                           {
                              qName = new QName(uri,p);
                              try
                              {
                                 obj[qName];
                                 propertyNames.push();
                              }
                              catch(e:Error)
                              {
                              }
                              continue;
                           }
                           j = 0;
                           while(j < uris.length)
                           {
                              uri = uris[j];
                              if(prop.@uri.toString() == uri)
                              {
                                 qName = new QName(uri,p);
                                 try
                                 {
                                    obj[qName];
                                    propertyNames.push(qName);
                                 }
                                 catch(e:Error)
                                 {
                                 }
                              }
                              j++;
                           }
                        }
                        else if(uri.length == 0)
                        {
                           qName = new QName(uri,p);
                           try
                           {
                              obj[qName];
                              propertyNames.push(qName);
                           }
                           catch(e:Error)
                           {
                           }
                           continue;
                        }
                     }
                  }
               }
            }
         }
         propertyNames.sort(Array.CASEINSENSITIVE | (numericIndex ? Array.NUMERIC : 0));
         if(!isDict)
         {
            i = 0;
            while(i < propertyNames.length - 1)
            {
               if(propertyNames[i].toString() == propertyNames[i + 1].toString())
               {
                  propertyNames.splice(i,1);
                  i--;
               }
               i++;
            }
         }
         if(!dynamic)
         {
            cacheKey = getCacheKey(obj,excludes,options);
            CLASS_INFO_CACHE[cacheKey] = result;
         }
         return result;
      }
      
      public static function hasMetadata(param1:Object, param2:String, param3:String, param4:Array = null, param5:Object = null) : Boolean
      {
         var _loc6_:Object = getClassInfo(param1,param4,param5);
         var _loc7_:Object = _loc6_["metadata"];
         return internalHasMetadata(_loc7_,param2,param3);
      }
      
      public static function isDynamicObject(param1:Object) : Boolean
      {
         var obj:Object = param1;
         try
         {
            obj["wootHackwoot"];
         }
         catch(e:Error)
         {
            return false;
         }
         return true;
      }
      
      private static function internalHasMetadata(param1:Object, param2:String, param3:String) : Boolean
      {
         var _loc4_:Object = null;
         if(param1 != null)
         {
            _loc4_ = param1[param2];
            if(_loc4_ != null)
            {
               if(_loc4_[param3] != null)
               {
                  return true;
               }
            }
         }
         return false;
      }
      
      private static function recordMetadata(param1:XMLList) : Object
      {
         var prop:XML = null;
         var propName:String = null;
         var metadataList:XMLList = null;
         var metadata:Object = null;
         var md:XML = null;
         var mdName:String = null;
         var argsList:XMLList = null;
         var value:Object = null;
         var arg:XML = null;
         var existing:Object = null;
         var argKey:String = null;
         var argValue:String = null;
         var existingArray:Array = null;
         var properties:XMLList = param1;
         var result:Object = null;
         try
         {
            for each(prop in properties)
            {
               propName = prop.attribute("name").toString();
               metadataList = prop.metadata;
               if(metadataList.length() > 0)
               {
                  if(result == null)
                  {
                     result = {};
                  }
                  metadata = {};
                  result[propName] = metadata;
                  for each(md in metadataList)
                  {
                     mdName = md.attribute("name").toString();
                     argsList = md.arg;
                     value = {};
                     for each(arg in argsList)
                     {
                        argKey = arg.attribute("key").toString();
                        if(argKey != null)
                        {
                           argValue = arg.attribute("value").toString();
                           value[argKey] = argValue;
                        }
                     }
                     existing = metadata[mdName];
                     if(existing != null)
                     {
                        if(existing is Array)
                        {
                           existingArray = existing as Array;
                        }
                        else
                        {
                           existingArray = [existing];
                           delete metadata[mdName];
                        }
                        existingArray.push(value);
                        existing = existingArray;
                     }
                     else
                     {
                        existing = value;
                     }
                     metadata[mdName] = existing;
                  }
               }
            }
         }
         catch(e:Error)
         {
         }
         return result;
      }
      
      private static function getCacheKey(param1:Object, param2:Array = null, param3:Object = null) : String
      {
         var _loc5_:uint = 0;
         var _loc6_:String = null;
         var _loc7_:String = null;
         var _loc8_:String = null;
         var _loc4_:String = getQualifiedClassName(param1);
         if(param2 != null)
         {
            _loc5_ = 0;
            while(_loc5_ < param2.length)
            {
               _loc6_ = param2[_loc5_] as String;
               if(_loc6_ != null)
               {
                  _loc4_ += _loc6_;
               }
               _loc5_++;
            }
         }
         if(param3 != null)
         {
            for(_loc7_ in param3)
            {
               _loc4_ += _loc7_;
               _loc8_ = param3[_loc7_] as String;
               if(_loc8_ != null)
               {
                  _loc4_ += _loc8_;
               }
            }
         }
         return _loc4_;
      }
      
      private static function arrayCompare(param1:Array, param2:Array, param3:int, param4:int, param5:Dictionary) : int
      {
         var _loc7_:Object = null;
         var _loc6_:int = 0;
         if(param1.length != param2.length)
         {
            if(param1.length < param2.length)
            {
               _loc6_ = -1;
            }
            else
            {
               _loc6_ = 1;
            }
         }
         else
         {
            for(_loc7_ in param1)
            {
               if(!param2.hasOwnProperty(_loc7_))
               {
                  return -1;
               }
               _loc6_ = internalCompare(param1[_loc7_],param2[_loc7_],param3,param4,param5);
               if(_loc6_ != 0)
               {
                  return _loc6_;
               }
            }
            for(_loc7_ in param2)
            {
               if(!param1.hasOwnProperty(_loc7_))
               {
                  return 1;
               }
            }
         }
         return _loc6_;
      }
      
      private static function byteArrayCompare(param1:ByteArray, param2:ByteArray) : int
      {
         var _loc4_:int = 0;
         var _loc3_:int = 0;
         if(param1 == param2)
         {
            return _loc3_;
         }
         if(param1.length != param2.length)
         {
            if(param1.length < param2.length)
            {
               _loc3_ = -1;
            }
            else
            {
               _loc3_ = 1;
            }
         }
         else
         {
            _loc4_ = 0;
            while(_loc4_ < param1.length)
            {
               _loc3_ = numericCompare(param1[_loc4_],param2[_loc4_]);
               if(_loc3_ != 0)
               {
                  _loc4_ = int(param1.length);
               }
               _loc4_++;
            }
         }
         return _loc3_;
      }
      
      private static function listCompare(param1:IList, param2:IList, param3:int, param4:int, param5:Dictionary) : int
      {
         var _loc7_:int = 0;
         var _loc6_:int = 0;
         if(param1.length != param2.length)
         {
            if(param1.length < param2.length)
            {
               _loc6_ = -1;
            }
            else
            {
               _loc6_ = 1;
            }
         }
         else
         {
            _loc7_ = 0;
            while(_loc7_ < param1.length)
            {
               _loc6_ = internalCompare(param1.getItemAt(_loc7_),param2.getItemAt(_loc7_),param3 + 1,param4,param5);
               if(_loc6_ != 0)
               {
                  _loc7_ = param1.length;
               }
               _loc7_++;
            }
         }
         return _loc6_;
      }
      
      private static function getRef(param1:Object, param2:Dictionary) : Object
      {
         var _loc3_:Object = param2[param1];
         while(Boolean(_loc3_) && _loc3_ != param2[_loc3_])
         {
            _loc3_ = param2[_loc3_];
         }
         if(!_loc3_)
         {
            _loc3_ = param1;
         }
         if(_loc3_ != param2[param1])
         {
            param2[param1] = _loc3_;
         }
         return _loc3_;
      }
   }
}

package mx.utils
{
   public namespace object_proxy = "http://www.adobe.com/2006/actionscript/flash/objectproxy";
}

package mx.utils
{
   import flash.utils.Proxy;
   import flash.utils.flash_proxy;
   
   use namespace object_proxy;
   use namespace flash_proxy;
   
   public dynamic class OrderedObject extends Proxy
   {
      
      object_proxy var propertyList:Array;
      
      private var _item:Object;
      
      public function OrderedObject(param1:Object = null)
      {
         super();
         if(!param1)
         {
            param1 = {};
         }
         this._item = param1;
         this.object_proxy::propertyList = [];
      }
      
      object_proxy function getObjectProperty(param1:*) : *
      {
         return this.flash_proxy::getProperty(param1);
      }
      
      object_proxy function setObjectProperty(param1:*, param2:*) : void
      {
         this.flash_proxy::setProperty(param1,param2);
      }
      
      override flash_proxy function getProperty(param1:*) : *
      {
         var _loc2_:Object = null;
         return this._item[param1];
      }
      
      override flash_proxy function callProperty(param1:*, ... rest) : *
      {
         return this._item[param1].apply(this._item,rest);
      }
      
      override flash_proxy function deleteProperty(param1:*) : Boolean
      {
         var _loc2_:Object = this._item[param1];
         var _loc3_:* = delete this._item[param1];
         var _loc4_:int = -1;
         var _loc5_:int = 0;
         while(_loc5_ < this.object_proxy::propertyList.length)
         {
            if(this.object_proxy::propertyList[_loc5_] == param1)
            {
               _loc4_ = _loc5_;
               break;
            }
            _loc5_++;
         }
         if(_loc4_ > -1)
         {
            this.object_proxy::propertyList.splice(_loc4_,1);
         }
         return _loc3_;
      }
      
      override flash_proxy function hasProperty(param1:*) : Boolean
      {
         return param1 in this._item;
      }
      
      override flash_proxy function nextName(param1:int) : String
      {
         return this.object_proxy::propertyList[param1 - 1];
      }
      
      override flash_proxy function nextNameIndex(param1:int) : int
      {
         if(param1 < this.object_proxy::propertyList.length)
         {
            return param1 + 1;
         }
         return 0;
      }
      
      override flash_proxy function nextValue(param1:int) : *
      {
         return this._item[this.object_proxy::propertyList[param1 - 1]];
      }
      
      override flash_proxy function setProperty(param1:*, param2:*) : void
      {
         var _loc4_:int = 0;
         var _loc3_:* = this._item[param1];
         if(_loc3_ !== param2)
         {
            this._item[param1] = param2;
            _loc4_ = 0;
            while(_loc4_ < this.object_proxy::propertyList.length)
            {
               if(this.object_proxy::propertyList[_loc4_] == param1)
               {
                  return;
               }
               _loc4_++;
            }
            this.object_proxy::propertyList.push(param1);
         }
      }
   }
}

package mx.utils
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class StringUtil
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function StringUtil()
      {
         super();
      }
      
      public static function trim(param1:String) : String
      {
         if(param1 == null)
         {
            return "";
         }
         var _loc2_:int = 0;
         while(isWhitespace(param1.charAt(_loc2_)))
         {
            _loc2_++;
         }
         var _loc3_:int = param1.length - 1;
         while(isWhitespace(param1.charAt(_loc3_)))
         {
            _loc3_--;
         }
         if(_loc3_ >= _loc2_)
         {
            return param1.slice(_loc2_,_loc3_ + 1);
         }
         return "";
      }
      
      public static function trimArrayElements(param1:String, param2:String) : String
      {
         var _loc3_:Array = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         if(param1 != "" && param1 != null)
         {
            _loc3_ = param1.split(param2);
            _loc4_ = int(_loc3_.length);
            _loc5_ = 0;
            while(_loc5_ < _loc4_)
            {
               _loc3_[_loc5_] = StringUtil.trim(_loc3_[_loc5_]);
               _loc5_++;
            }
            if(_loc4_ > 0)
            {
               param1 = _loc3_.join(param2);
            }
         }
         return param1;
      }
      
      public static function isWhitespace(param1:String) : Boolean
      {
         switch(param1)
         {
            case " ":
            case "\t":
            case "\r":
            case "\n":
            case "\f":
               return true;
            default:
               return false;
         }
      }
      
      public static function substitute(param1:String, ... rest) : String
      {
         var _loc4_:Array = null;
         if(param1 == null)
         {
            return "";
         }
         var _loc3_:uint = uint(rest.length);
         if(_loc3_ == 1 && rest[0] is Array)
         {
            _loc4_ = rest[0] as Array;
            _loc3_ = _loc4_.length;
         }
         else
         {
            _loc4_ = rest;
         }
         var _loc5_:int = 0;
         while(_loc5_ < _loc3_)
         {
            param1 = param1.replace(new RegExp("\\{" + _loc5_ + "\\}","g"),_loc4_[_loc5_]);
            _loc5_++;
         }
         return param1;
      }
      
      public static function repeat(param1:String, param2:int) : String
      {
         if(param2 == 0)
         {
            return "";
         }
         var _loc3_:String = param1;
         var _loc4_:int = 1;
         while(_loc4_ < param2)
         {
            _loc3_ += param1;
            _loc4_++;
         }
         return _loc3_;
      }
      
      public static function restrict(param1:String, param2:String) : String
      {
         var _loc6_:uint = 0;
         if(param2 == null)
         {
            return param1;
         }
         if(param2 == "")
         {
            return "";
         }
         var _loc3_:Array = [];
         var _loc4_:int = param1.length;
         var _loc5_:int = 0;
         while(_loc5_ < _loc4_)
         {
            _loc6_ = uint(param1.charCodeAt(_loc5_));
            if(testCharacter(_loc6_,param2))
            {
               _loc3_.push(_loc6_);
            }
            _loc5_++;
         }
         return String.fromCharCode.apply(null,_loc3_);
      }
      
      private static function testCharacter(param1:uint, param2:String) : Boolean
      {
         var _loc9_:uint = 0;
         var _loc11_:Boolean = false;
         var _loc3_:Boolean = false;
         var _loc4_:Boolean = false;
         var _loc5_:Boolean = false;
         var _loc6_:* = true;
         var _loc7_:uint = 0;
         var _loc8_:int = param2.length;
         if(_loc8_ > 0)
         {
            _loc9_ = uint(param2.charCodeAt(0));
            if(_loc9_ == 94)
            {
               _loc3_ = true;
            }
         }
         var _loc10_:int = 0;
         while(_loc10_ < _loc8_)
         {
            _loc9_ = uint(param2.charCodeAt(_loc10_));
            _loc11_ = false;
            if(!_loc4_)
            {
               if(_loc9_ == 45)
               {
                  _loc5_ = true;
               }
               else if(_loc9_ == 94)
               {
                  _loc6_ = !_loc6_;
               }
               else if(_loc9_ == 92)
               {
                  _loc4_ = true;
               }
               else
               {
                  _loc11_ = true;
               }
            }
            else
            {
               _loc11_ = true;
               _loc4_ = false;
            }
            if(_loc11_)
            {
               if(_loc5_)
               {
                  if(_loc7_ <= param1 && param1 <= _loc9_)
                  {
                     _loc3_ = _loc6_;
                  }
                  _loc5_ = false;
                  _loc7_ = 0;
               }
               else
               {
                  if(param1 == _loc9_)
                  {
                     _loc3_ = _loc6_;
                  }
                  _loc7_ = _loc9_;
               }
            }
            _loc10_++;
         }
         return _loc3_;
      }
   }
}

package mx.utils
{
   import flash.utils.ByteArray;
   import flash.utils.Dictionary;
   import mx.core.IPropertyChangeNotifier;
   import mx.core.IUIComponent;
   import mx.core.IUID;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class UIDUtil
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      private static const ALPHA_CHAR_CODES:Array = [48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70];
      
      private static var uidDictionary:Dictionary = new Dictionary(true);
      
      public function UIDUtil()
      {
         super();
      }
      
      public static function createUID() : String
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc1_:Array = new Array(36);
         var _loc2_:int = 0;
         _loc3_ = 0;
         while(_loc3_ < 8)
         {
            var _loc7_:*;
            _loc1_[_loc7_ = _loc2_++] = ALPHA_CHAR_CODES[Math.floor(Math.random() * 16)];
            _loc3_++;
         }
         _loc3_ = 0;
         while(_loc3_ < 3)
         {
            _loc1_[_loc7_ = _loc2_++] = 45;
            _loc4_ = 0;
            while(_loc4_ < 4)
            {
               var _loc8_:*;
               _loc1_[_loc8_ = _loc2_++] = ALPHA_CHAR_CODES[Math.floor(Math.random() * 16)];
               _loc4_++;
            }
            _loc3_++;
         }
         _loc1_[_loc7_ = _loc2_++] = 45;
         var _loc5_:Number = Number(new Date().getTime());
         var _loc6_:String = ("0000000" + _loc5_.toString(16).toUpperCase()).substr(-8);
         _loc3_ = 0;
         while(_loc3_ < 8)
         {
            _loc1_[_loc8_ = _loc2_++] = _loc6_.charCodeAt(_loc3_);
            _loc3_++;
         }
         _loc3_ = 0;
         while(_loc3_ < 4)
         {
            _loc1_[_loc8_ = _loc2_++] = ALPHA_CHAR_CODES[Math.floor(Math.random() * 16)];
            _loc3_++;
         }
         return String.fromCharCode.apply(null,_loc1_);
      }
      
      public static function fromByteArray(param1:ByteArray) : String
      {
         var _loc2_:Array = null;
         var _loc3_:uint = 0;
         var _loc4_:uint = 0;
         var _loc5_:int = 0;
         if(param1 != null && param1.length >= 16 && param1.bytesAvailable >= 16)
         {
            _loc2_ = new Array(36);
            _loc3_ = 0;
            _loc4_ = 0;
            while(_loc4_ < 16)
            {
               if(_loc4_ == 4 || _loc4_ == 6 || _loc4_ == 8 || _loc4_ == 10)
               {
                  var _loc6_:*;
                  _loc2_[_loc6_ = _loc3_++] = 45;
               }
               _loc5_ = param1.readByte();
               _loc2_[_loc6_ = _loc3_++] = ALPHA_CHAR_CODES[(_loc5_ & 0xF0) >>> 4];
               var _loc7_:*;
               _loc2_[_loc7_ = _loc3_++] = ALPHA_CHAR_CODES[_loc5_ & 0x0F];
               _loc4_++;
            }
            return String.fromCharCode.apply(null,_loc2_);
         }
         return null;
      }
      
      public static function isUID(param1:String) : Boolean
      {
         var _loc2_:uint = 0;
         var _loc3_:Number = NaN;
         if(param1 != null && param1.length == 36)
         {
            _loc2_ = 0;
            while(_loc2_ < 36)
            {
               _loc3_ = Number(param1.charCodeAt(_loc2_));
               if(_loc2_ == 8 || _loc2_ == 13 || _loc2_ == 18 || _loc2_ == 23)
               {
                  if(_loc3_ != 45)
                  {
                     return false;
                  }
               }
               else if(_loc3_ < 48 || _loc3_ > 70 || _loc3_ > 57 && _loc3_ < 65)
               {
                  return false;
               }
               _loc2_++;
            }
            return true;
         }
         return false;
      }
      
      public static function toByteArray(param1:String) : ByteArray
      {
         var _loc2_:ByteArray = null;
         var _loc3_:uint = 0;
         var _loc4_:String = null;
         var _loc5_:uint = 0;
         var _loc6_:uint = 0;
         if(isUID(param1))
         {
            _loc2_ = new ByteArray();
            _loc3_ = 0;
            while(_loc3_ < param1.length)
            {
               _loc4_ = param1.charAt(_loc3_);
               if(_loc4_ != "-")
               {
                  _loc5_ = getDigit(_loc4_);
                  _loc3_++;
                  _loc6_ = getDigit(param1.charAt(_loc3_));
                  _loc2_.writeByte((_loc5_ << 4 | _loc6_) & 0xFF);
               }
               _loc3_++;
            }
            _loc2_.position = 0;
            return _loc2_;
         }
         return null;
      }
      
      public static function getUID(param1:Object) : String
      {
         var result:String = null;
         var xitem:XML = null;
         var nodeKind:String = null;
         var notificationFunction:Function = null;
         var item:Object = param1;
         result = null;
         if(item == null)
         {
            return result;
         }
         if(item is IUID)
         {
            result = IUID(item).uid;
            if(result == null || result.length == 0)
            {
               result = createUID();
               IUID(item).uid = result;
            }
         }
         else if(item is IPropertyChangeNotifier && !(item is IUIComponent))
         {
            result = IPropertyChangeNotifier(item).uid;
            if(result == null || result.length == 0)
            {
               result = createUID();
               IPropertyChangeNotifier(item).uid = result;
            }
         }
         else
         {
            if(item is String)
            {
               return item as String;
            }
            try
            {
               if(item is XMLList && item.length == 1)
               {
                  item = item[0];
               }
               if(item is XML)
               {
                  xitem = XML(item);
                  nodeKind = xitem.nodeKind();
                  if(nodeKind == "text" || nodeKind == "attribute")
                  {
                     return xitem.toString();
                  }
                  notificationFunction = xitem.notification();
                  if(!(notificationFunction is Function))
                  {
                     notificationFunction = XMLNotifier.mx_internal::initializeXMLForNotification();
                     xitem.setNotification(notificationFunction);
                  }
                  if(notificationFunction["uid"] == undefined)
                  {
                     result = notificationFunction["uid"] = createUID();
                  }
                  result = notificationFunction["uid"];
               }
               else
               {
                  if("mx_internal_uid" in item)
                  {
                     return item.mx_internal_uid;
                  }
                  if("uid" in item)
                  {
                     return item.uid;
                  }
                  result = uidDictionary[item];
                  if(!result)
                  {
                     result = createUID();
                     try
                     {
                        item.mx_internal_uid = result;
                     }
                     catch(e:Error)
                     {
                        uidDictionary[item] = result;
                     }
                  }
               }
            }
            catch(e:Error)
            {
               result = item.toString();
            }
         }
         return result;
      }
      
      private static function getDigit(param1:String) : uint
      {
         switch(param1)
         {
            case "A":
            case "a":
               return 10;
            case "B":
            case "b":
               return 11;
            case "C":
            case "c":
               return 12;
            case "D":
            case "d":
               return 13;
            case "E":
            case "e":
               return 14;
            case "F":
            case "f":
               return 15;
            default:
               return new uint(param1);
         }
      }
   }
}

package mx.utils
{
   import flash.utils.Dictionary;
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class XMLNotifier
   {
      
      private static var instance:XMLNotifier;
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public function XMLNotifier(param1:XMLNotifierSingleton)
      {
         super();
      }
      
      public static function getInstance() : XMLNotifier
      {
         if(!instance)
         {
            instance = new XMLNotifier(new XMLNotifierSingleton());
         }
         return instance;
      }
      
      mx_internal static function initializeXMLForNotification() : Function
      {
         var notificationFunction:Function = function(param1:Object, param2:String, param3:Object, param4:Object, param5:Object):void
         {
            var _loc8_:Object = null;
            var _loc7_:Dictionary = arguments.callee.watched;
            if(_loc7_ != null)
            {
               for(_loc8_ in _loc7_)
               {
                  IXMLNotifiable(_loc8_).xmlNotification(param1,param2,param3,param4,param5);
               }
            }
         };
         return notificationFunction;
      }
      
      public function watchXML(param1:Object, param2:IXMLNotifiable, param3:String = null) : void
      {
         var _loc4_:Object = null;
         var _loc5_:XML = null;
         var _loc6_:Object = null;
         var _loc7_:Dictionary = null;
         if(param1 is XMLList && param1.length() > 1)
         {
            for each(_loc4_ in param1)
            {
               this.watchXML(_loc4_,param2,param3);
            }
         }
         else
         {
            _loc5_ = XML(param1);
            _loc6_ = _loc5_.notification();
            if(!(_loc6_ is Function))
            {
               _loc6_ = mx_internal::initializeXMLForNotification();
               _loc5_.setNotification(_loc6_ as Function);
               if(Boolean(param3) && _loc6_["uid"] == null)
               {
                  _loc6_["uid"] = param3;
               }
            }
            if(_loc6_["watched"] == undefined)
            {
               _loc6_["watched"] = _loc7_ = new Dictionary(true);
            }
            else
            {
               _loc7_ = _loc6_["watched"];
            }
            _loc7_[param2] = true;
         }
      }
      
      public function unwatchXML(param1:Object, param2:IXMLNotifiable) : void
      {
         var _loc3_:Object = null;
         var _loc4_:XML = null;
         var _loc5_:Object = null;
         var _loc6_:Dictionary = null;
         if(param1 is XMLList && param1.length() > 1)
         {
            for each(_loc3_ in param1)
            {
               this.unwatchXML(_loc3_,param2);
            }
         }
         else
         {
            _loc4_ = XML(param1);
            _loc5_ = _loc4_.notification();
            if(!(_loc5_ is Function))
            {
               return;
            }
            if(_loc5_["watched"] != undefined)
            {
               _loc6_ = _loc5_["watched"];
               delete _loc6_[param2];
            }
         }
      }
   }
}

class XMLNotifierSingleton
{
   
   public function XMLNotifierSingleton()
   {
      super();
   }
}
package mx.validators
{
   import mx.events.ValidationResultEvent;
   
   public interface IValidatorListener
   {
      
      function get errorString() : String;
      
      function set errorString(param1:String) : void;
      
      function get validationSubField() : String;
      
      function set validationSubField(param1:String) : void;
      
      function validationResultHandler(param1:ValidationResultEvent) : void;
   }
}

package mx.validators
{
   import mx.core.mx_internal;
   
   use namespace mx_internal;
   
   public class ValidationResult
   {
      
      mx_internal static const VERSION:String = "4.0.0.14159";
      
      public var errorCode:String;
      
      public var errorMessage:String;
      
      public var isError:Boolean;
      
      public var subField:String;
      
      public function ValidationResult(param1:Boolean, param2:String = "", param3:String = "", param4:String = "")
      {
         super();
         this.isError = param1;
         this.subField = param2;
         this.errorMessage = param4;
         this.errorCode = param3;
      }
   }
}

package net.bigpoint
{
   public class AmmoPrice
   {
      
      public static const CURRENCY_URIDIUM:int = 0;
      
      public static const CURRENCY_CREDITS:int = 1;
      
      public static var CATEGORY_LASER:int = 0;
      
      public static var CATEGORY_ROCKET:int = 1;
      
      public var ammoID:int;
      
      public var amount:int;
      
      public var summedPrice:int;
      
      public var currency:int;
      
      public var category:int;
      
      public function AmmoPrice(param1:int, param2:int, param3:int, param4:int, param5:String)
      {
         super();
         this.category = param1;
         this.ammoID = param3;
         this.amount = param2;
         this.summedPrice = param4;
         if(param5 == "U")
         {
            this.currency = CURRENCY_URIDIUM;
         }
         else if(param5 == "C")
         {
            this.currency = CURRENCY_CREDITS;
         }
      }
   }
}

package net.bigpoint
{
   public class FastMath
   {
      
      private static const RADTODEG:Number = 180 / Math.PI;
      
      private static const DEGTORAD:Number = Math.PI / 180;
      
      public function FastMath()
      {
         super();
      }
      
      public static function sqrt(param1:Number) : Number
      {
         var _loc4_:Number = NaN;
         var _loc5_:Number = NaN;
         if(isNaN(param1))
         {
            return NaN;
         }
         var _loc2_:Number = 0.002;
         var _loc3_:Number = param1 * 0.25;
         if(param1 == 0)
         {
            return 0;
         }
         do
         {
            _loc5_ = param1 / _loc3_;
            _loc3_ = (_loc3_ + _loc5_) * 0.5;
            _loc4_ = _loc3_ - _loc5_;
            if(_loc4_ < 0)
            {
               _loc4_ = -_loc4_;
            }
         }
         while(_loc4_ > _loc2_);
         
         return _loc3_;
      }
      
      public static function asDegrees(param1:Number) : Number
      {
         return param1 * RADTODEG;
      }
      
      public static function asRadians(param1:Number) : Number
      {
         return param1 * DEGTORAD;
      }
   }
}

package net.bigpoint
{
   import flash.geom.Point;
   
   public class LastTargetInfo extends Point
   {
      
      public var valid:Boolean;
      
      public function LastTargetInfo()
      {
         super();
      }
   }
}

package net.bigpoint.as3toolbox.bitmapclip
{
   import flash.display.Stage;
   import flash.events.Event;
   import flash.utils.getTimer;
   
   internal class AnimationManager
   {
      
      private static var clipList:Object;
      
      private static var stage:Stage;
      
      private static var enterFrameHandlerAdded:Boolean;
      
      private static var deltaTime:int = 0;
      
      private static var oldDeltaTime:int = -1;
      
      public function AnimationManager()
      {
         super();
      }
      
      public static function initStage(param1:Stage) : void
      {
         if(stage == null)
         {
            stage = param1;
         }
      }
      
      internal static function initCollections() : void
      {
         clipList = new Vector.<BitmapClip>();
      }
      
      private static function handleEnterFrame(param1:Event) : void
      {
         var _loc4_:BitmapClip = null;
         if(clipList.length == 0)
         {
            stage.removeEventListener(Event.ENTER_FRAME,handleEnterFrame);
            enterFrameHandlerAdded = false;
            return;
         }
         var _loc2_:int = getTimer();
         deltaTime = _loc2_ - oldDeltaTime;
         oldDeltaTime = _loc2_;
         var _loc3_:int = 0;
         while(_loc3_ < clipList.length)
         {
            _loc4_ = clipList[_loc3_] as BitmapClip;
            if(_loc4_.remove)
            {
               clipList.splice(_loc3_,1);
               _loc3_--;
               if(_loc4_._autoDeleteCache && _loc4_.parent == null)
               {
                  _loc4_.unregisterCacheID();
               }
            }
            else
            {
               _loc4_.update(deltaTime);
            }
            _loc3_++;
         }
      }
      
      internal static function addClip(param1:BitmapClip) : void
      {
         var _loc2_:BitmapClip = null;
         if(clipList == null)
         {
            initCollections();
         }
         for each(_loc2_ in clipList)
         {
            if(_loc2_ == param1)
            {
               return;
            }
         }
         clipList.push(param1);
      }
      
      internal static function addEnterFrameHandler() : void
      {
         if(!enterFrameHandlerAdded)
         {
            oldDeltaTime = getTimer();
            stage.addEventListener(Event.ENTER_FRAME,handleEnterFrame);
            enterFrameHandlerAdded = true;
         }
      }
   }
}

package net.bigpoint.as3toolbox.bitmapclip
{
   import flash.display.BitmapData;
   import flash.geom.Point;
   
   internal class BCBitmapData extends BitmapData
   {
      
      public var offset:Point = new Point();
      
      public function BCBitmapData(param1:int, param2:int, param3:Boolean = true, param4:uint = 4294967295)
      {
         super(param1,param2,param3,param4);
      }
   }
}

package net.bigpoint.as3toolbox.bitmapclip
{
   import flash.display.Bitmap;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.geom.ColorTransform;
   import flash.geom.Matrix;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   
   public class BitmapClip extends Sprite
   {
      
      public static const PLAYBACK_FORWARD:uint = 0;
      
      public static const PLAYBACK_YOYO:uint = 1;
      
      public static const PLAYBACK_BACKWARD:uint = 2;
      
      protected static var cache:Array = [];
      
      private static var cacheIDCounter:Array = [];
      
      protected var bitmapDataPlayList:Array = [];
      
      protected var _frame:int;
      
      protected var _fps:int = 25;
      
      protected var _cacheID:String;
      
      private var _movieClip:MovieClip;
      
      protected var _mcBounds:Rectangle;
      
      protected var _removeAfterPlay:Boolean;
      
      protected var pos:Point = new Point();
      
      protected var currentTime:int;
      
      protected var _bitmap:Bitmap = new Bitmap();
      
      private var frameTime:int;
      
      protected var _startFrame:int;
      
      protected var _endFrame:int;
      
      internal var _autoDeleteCache:Boolean;
      
      internal var remove:Boolean;
      
      protected var frames:int = 1;
      
      protected var _colorTransform:ColorTransform;
      
      protected var maxFrames:int;
      
      private var playNotation:Boolean;
      
      private var _forward:Boolean = true;
      
      private var _playbackMode:uint = 0;
      
      public function BitmapClip(param1:MovieClip, param2:String, param3:int = 25, param4:Boolean = false, param5:Boolean = false, param6:int = 1, param7:int = -1, param8:ColorTransform = null)
      {
         super();
         this._movieClip = param1;
         this._cacheID = param2;
         this.fps = param3;
         this._removeAfterPlay = param4;
         this._autoDeleteCache = param5;
         this._startFrame = param6;
         this._endFrame = param7;
         this._colorTransform = param8;
         this.addChild(this._bitmap);
         this.mouseEnabled = false;
         this.mouseChildren = false;
         if(this._movieClip != null)
         {
            this.maxFrames = this._movieClip.framesLoaded;
            this.init();
         }
         this.addEventListener(Event.ADDED_TO_STAGE,this.handleAddedToStage,false,0,true);
      }
      
      protected static function addBitmapData(param1:String, param2:BCBitmapData) : void
      {
         cache[param1] = param2;
      }
      
      protected static function search(param1:String) : Boolean
      {
         if(cache[param1] != null)
         {
            return true;
         }
         return false;
      }
      
      public static function clearCache() : void
      {
         cache = [];
      }
      
      public function get playbackMode() : uint
      {
         return this._playbackMode;
      }
      
      public function set playbackMode(param1:uint) : void
      {
         this._playbackMode = param1;
         switch(this._playbackMode)
         {
            case PLAYBACK_FORWARD:
               this._forward = true;
               break;
            case PLAYBACK_BACKWARD:
               this._forward = false;
               this._frame = this.bitmapDataPlayList.length - 1;
         }
         this.updateFrame();
      }
      
      private function handleAddedToStage(param1:Event) : void
      {
         AnimationManager.initStage(this.stage);
         this.removeEventListener(Event.ADDED_TO_STAGE,this.handleAddedToStage);
         if(this.playNotation)
         {
            this.playNotation = false;
            this.play();
         }
      }
      
      private function init() : void
      {
         if(this._movieClip == null)
         {
            throw new Error("BitmapClip needs a valid movieClip Object!");
         }
         if(this.conditionsOk())
         {
            if(this._autoDeleteCache)
            {
               this.registerCacheID();
            }
            this.flattenDisplayObject(this._movieClip,this._cacheID);
         }
      }
      
      public function clone() : Object
      {
         var _loc1_:BitmapClip = new BitmapClip(this._movieClip,this._cacheID,this._fps,this._removeAfterPlay,this._autoDeleteCache,this._startFrame,this._endFrame);
         _loc1_.mouseEnabled = this.mouseEnabled;
         _loc1_.mouseChildren = this.mouseChildren;
         _loc1_.playbackMode = this.playbackMode;
         return _loc1_;
      }
      
      protected function handleRemovedFromStageListener(param1:Event) : void
      {
         this.stop();
      }
      
      private function flattenDisplayObject(param1:MovieClip, param2:String = null) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:BCBitmapData = null;
         var _loc9_:Matrix = null;
         if(param1 is MovieClip)
         {
            if(this._endFrame != -1)
            {
               if(this._endFrame < this._startFrame)
               {
                  throw new Error("endframe is smaller than starframe!");
               }
               this.frames = this._endFrame;
            }
            else
            {
               this.frames = MovieClip(param1).totalFrames;
            }
            MovieClip(param1).gotoAndStop(this._startFrame);
         }
         var _loc3_:int = this._startFrame - 1;
         while(_loc3_ < this.frames)
         {
            if(search(param2 + "_" + _loc3_))
            {
               this.bitmapDataPlayList[_loc3_] = cache[param2 + "_" + _loc3_];
            }
            else
            {
               if(_loc3_ > 0)
               {
                  MovieClip(param1).gotoAndStop(_loc3_ + 1);
               }
               this._mcBounds = param1.getBounds(param1);
               _loc4_ = Math.ceil(this._mcBounds.width);
               _loc5_ = Math.ceil(this._mcBounds.height);
               _loc6_ = Math.ceil(this._mcBounds.x);
               _loc7_ = Math.ceil(this._mcBounds.y);
               _loc8_ = new BCBitmapData(_loc4_,_loc5_,true,0);
               _loc9_ = new Matrix();
               _loc9_.translate(-_loc6_,-_loc7_);
               _loc8_.draw(param1,_loc9_,this._colorTransform);
               _loc8_.offset.x = _loc6_;
               _loc8_.offset.y = _loc7_;
               this.bitmapDataPlayList[_loc3_] = _loc8_;
               if(param2 != null)
               {
                  addBitmapData(param2 + "_" + _loc3_,_loc8_);
               }
            }
            _loc3_++;
         }
         this._frame = this._startFrame - 1;
         this.updateFrame();
      }
      
      public function get framesLoaded() : int
      {
         return this.bitmapDataPlayList.length;
      }
      
      protected function updateFrame() : void
      {
         var _loc1_:BCBitmapData = this.bitmapDataPlayList[this._frame];
         if(_loc1_ != null)
         {
            this._bitmap.x = _loc1_.offset.x;
            this._bitmap.y = _loc1_.offset.y;
            super.x = this.pos.x;
            super.y = this.pos.y;
            this._bitmap.bitmapData = _loc1_;
         }
      }
      
      override public function get numChildren() : int
      {
         return super.numChildren - 1;
      }
      
      override public function getChildAt(param1:int) : DisplayObject
      {
         return super.getChildAt(param1 + 1);
      }
      
      override public function getChildIndex(param1:DisplayObject) : int
      {
         return super.getChildIndex(param1) - 1;
      }
      
      public function gotoAndStop(param1:int) : void
      {
         this.stop();
         this._frame = param1 - 1;
         if(this._frame > this.bitmapDataPlayList.length - 1)
         {
            throw new Error("frameIndex is not valid! 1");
         }
         this.updateFrame();
      }
      
      public function gotoAndPlay(param1:int) : void
      {
         this._frame = param1 - 1;
         if(this._frame > this.bitmapDataPlayList.length - 1)
         {
            throw new Error("frameIndex is not valid! 2");
         }
         this.play();
      }
      
      public function set frame(param1:int) : void
      {
         this.gotoAndStop(param1);
      }
      
      public function get frame() : int
      {
         return this._frame + 1;
      }
      
      private function nextFrame() : void
      {
         if(this._forward)
         {
            this._frame += 1;
            if(this._frame > this.bitmapDataPlayList.length - 1)
            {
               if(this._playbackMode == PLAYBACK_FORWARD && this._removeAfterPlay)
               {
                  this.stop();
                  if(parent != null)
                  {
                     parent.removeChild(this);
                  }
                  return;
               }
               if(this._playbackMode == PLAYBACK_YOYO)
               {
                  this._frame = this.bitmapDataPlayList.length - 2;
                  this._forward = false;
               }
               else
               {
                  this._frame = this._startFrame - 1;
               }
            }
         }
         else
         {
            --this._frame;
            if(this._frame < this._startFrame - 1)
            {
               if(this._removeAfterPlay)
               {
                  this.stop();
                  if(parent != null)
                  {
                     parent.removeChild(this);
                  }
                  return;
               }
               if(this._playbackMode == PLAYBACK_YOYO)
               {
                  this._frame = this._startFrame;
                  this._forward = true;
               }
               else
               {
                  this._frame = this.bitmapDataPlayList.length - 1;
               }
            }
         }
         this.updateFrame();
      }
      
      public function play() : void
      {
         if(parent != null)
         {
            this.remove = false;
            if(this.bitmapDataPlayList.length > 0)
            {
               if(!this.hasEventListener(Event.REMOVED_FROM_STAGE))
               {
                  this.addEventListener(Event.REMOVED_FROM_STAGE,this.handleRemovedFromStageListener);
               }
               AnimationManager.addClip(this);
               AnimationManager.addEnterFrameHandler();
            }
         }
         else
         {
            this.playNotation = true;
         }
      }
      
      public function stop() : void
      {
         this.removeEventListener(Event.REMOVED_FROM_STAGE,this.handleRemovedFromStageListener);
         this.remove = true;
      }
      
      internal function update(param1:int) : void
      {
         this.currentTime += param1;
         while(this.currentTime > this.frameTime)
         {
            this.currentTime -= this.frameTime;
            this.nextFrame();
         }
      }
      
      override public function set x(param1:Number) : void
      {
         this.pos.x = param1;
         this.updateFrame();
      }
      
      override public function set y(param1:Number) : void
      {
         this.pos.y = param1;
         this.updateFrame();
      }
      
      override public function get x() : Number
      {
         return this.pos.x;
      }
      
      override public function get y() : Number
      {
         return this.pos.y;
      }
      
      public function get cacheID() : String
      {
         return this._cacheID;
      }
      
      internal function unregisterCacheID() : void
      {
         if(cacheIDCounter[this._cacheID])
         {
            --cacheIDCounter[this._cacheID];
            if(cacheIDCounter[this._cacheID] == 0)
            {
               this.deleteClipCache();
            }
         }
      }
      
      protected function registerCacheID() : void
      {
         if(!cacheIDCounter[this._cacheID])
         {
            cacheIDCounter[this._cacheID] = 0;
         }
         ++cacheIDCounter[this._cacheID];
      }
      
      private function deleteClipCache() : void
      {
         var _loc2_:String = null;
         delete cacheIDCounter[this._cacheID];
         var _loc1_:int = this._startFrame - 1;
         while(_loc1_ < this.frames)
         {
            _loc2_ = this.cacheID + "_" + _loc1_;
            (cache[_loc2_] as BCBitmapData).dispose();
            delete cache[_loc2_];
            _loc1_++;
         }
      }
      
      public function set fps(param1:int) : void
      {
         this._fps = param1;
         this.frameTime = 1000 / this._fps;
      }
      
      public function get fps() : int
      {
         return this._fps;
      }
      
      public function set removeAfterPlay(param1:Boolean) : void
      {
         this._removeAfterPlay = param1;
      }
      
      public function get removeAfterPlay() : Boolean
      {
         return this._removeAfterPlay;
      }
      
      protected function conditionsOk() : Boolean
      {
         if(this._endFrame > this.maxFrames)
         {
            throw new Error("endFrame exceeds total frames of the movieclip!");
         }
         if(this._startFrame < 1)
         {
            throw new Error("startFrame must be 1 or higher!");
         }
         if(this._cacheID == null || this._cacheID.length == 0)
         {
            throw new Error("BitmapClip needs a valid cacheID");
         }
         return true;
      }
   }
}

package net.bigpoint.as3toolbox.mapfactory
{
   public interface IMapElement
   {
      
      function getTileID() : int;
      
      function setTileID(param1:int) : void;
   }
}

package net.bigpoint.as3toolbox.mapfactory
{
   import flash.display.BitmapData;
   
   public interface ITileEffect
   {
      
      function update() : void;
      
      function setBitmapData(param1:BitmapData) : void;
   }
}

package net.bigpoint.as3toolbox.mapfactory
{
   public class MapElement implements IMapElement
   {
      
      private var tileID:int;
      
      public function MapElement()
      {
         super();
      }
      
      public function getTileID() : int
      {
         return this.tileID;
      }
      
      public function setTileID(param1:int) : void
      {
         this.tileID = param1;
      }
   }
}

package net.bigpoint.as3toolbox.mapfactory
{
   import flash.display.BitmapData;
   
   public class ReloadableSimpleTile extends SimpleTile
   {
      
      public var valid:Boolean = true;
      
      public var fileKey:String;
      
      internal var timestamp:int;
      
      public function ReloadableSimpleTile(param1:int, param2:String, param3:String = null)
      {
         super(param1,null,param3);
         this.fileKey = param2;
      }
      
      internal function updateBitmapData(param1:BitmapData) : void
      {
         if(cacheID != null)
         {
            bitmapDataCache[cacheID] = param1;
         }
         else
         {
            this.bitmapData = param1;
         }
      }
      
      public function removeBitmapData() : void
      {
         if(cacheID != null)
         {
            if(bitmapDataCache[cacheID] as BitmapData != null)
            {
               (bitmapDataCache[cacheID] as BitmapData).dispose();
               bitmapDataCache[cacheID] = null;
            }
         }
         else if(bitmapData != null)
         {
            bitmapData.dispose();
            bitmapData = null;
         }
      }
   }
}

package net.bigpoint.as3toolbox.mapfactory
{
   import flash.display.BitmapData;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   import flash.utils.getTimer;
   
   public class ReloadableTiledMap extends TiledMap
   {
      
      private var placeHolder:BitmapData;
      
      private var timestampedTiles:Array = [];
      
      private var requestedReloadableTiles:Array = [];
      
      private var reloadableTilesToUpdate:Array = [];
      
      private var removeDelayInSec:int;
      
      private var reloadedTileRemover:Timer;
      
      private var fadeIn:Boolean;
      
      public function ReloadableTiledMap(param1:Array, param2:Vector.<Tile>, param3:int, param4:int, param5:int, param6:int, param7:BitmapData = null, param8:int = 5, param9:Boolean = false, param10:Boolean = false)
      {
         super(null,param2,param3,param4,param5,param6,param10);
         this.map = param1;
         this.placeHolder = param7;
         this.removeDelayInSec = param8 * 1000;
         this.fadeIn = param9;
         if(param8 != -1)
         {
            this.startReloadedTileHandler();
         }
         init();
      }
      
      override internal function copyTiles() : void
      {
         var _loc5_:ReloadableSimpleTile = null;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:Tile = null;
         var _loc10_:BitmapData = null;
         var _loc11_:ReloadableSimpleTile = null;
         var _loc12_:SimpleTile = null;
         if(this.parent == null)
         {
            return;
         }
         this.timestampedTiles.length = 0;
         var _loc1_:int = pX + maxFitTilesX - 1;
         var _loc2_:int = pY + maxFitTilesY - 1;
         var _loc3_:int = 0;
         canvas.bitmapData.lock();
         canvas.bitmapData.fillRect(canvas.bitmapData.rect,0);
         var _loc4_:int = pY;
         while(_loc4_ < _loc2_ - dY)
         {
            _loc6_ = 0;
            _loc7_ = pX;
            while(_loc7_ < _loc1_ - dX)
            {
               if(_loc7_ < 0 || _loc7_ >= max_tiles_x || _loc4_ < 0 || _loc4_ >= max_tiles_y)
               {
                  _loc8_ = int(tiles.length - 1);
               }
               else
               {
                  _loc8_ = (map[_loc4_][_loc7_] as IMapElement).getTileID();
               }
               if(_loc8_ != -1)
               {
                  _loc9_ = tiles[_loc8_];
                  _loc10_ = null;
                  if(_loc9_ is ReloadableSimpleTile)
                  {
                     _loc11_ = _loc9_ as ReloadableSimpleTile;
                     if(_loc11_.cacheID != null)
                     {
                        if(!SimpleTile.bitmapDataCache[_loc11_.cacheID])
                        {
                           if(this.placeHolder == null)
                           {
                              this.createPlaceHolderTile();
                           }
                           _loc10_ = this.placeHolder;
                           if(!this.requestedReloadableTiles[_loc11_.fileKey])
                           {
                              this.requestedReloadableTiles[_loc11_.fileKey] = _loc11_;
                              _loc11_.valid = true;
                           }
                        }
                        else
                        {
                           _loc10_ = SimpleTile.bitmapDataCache[_loc11_.cacheID];
                           this.timestampedTiles[_loc8_] = true;
                        }
                     }
                     else if(_loc11_.bitmapData == null)
                     {
                        if(this.placeHolder == null)
                        {
                           this.createPlaceHolderTile();
                        }
                        _loc10_ = this.placeHolder;
                        if(!this.requestedReloadableTiles[_loc11_.fileKey])
                        {
                           this.requestedReloadableTiles[_loc11_.fileKey] = _loc11_;
                           _loc11_.valid = true;
                        }
                     }
                     else
                     {
                        _loc10_ = _loc11_.bitmapData;
                        this.timestampedTiles[_loc8_] = true;
                     }
                  }
                  else if(_loc9_ is SimpleTile)
                  {
                     _loc12_ = _loc9_ as SimpleTile;
                     if(_loc12_.cacheID != null)
                     {
                        _loc10_ = SimpleTile.bitmapDataCache[_loc12_.cacheID];
                     }
                     else
                     {
                        _loc10_ = _loc12_.bitmapData;
                     }
                  }
                  if(_loc10_ != null)
                  {
                     point.x = _loc6_ * tileRect.width + tileRect.width;
                     point.y = _loc3_ * tileRect.height + tileRect.height;
                     _loc6_++;
                     canvas.bitmapData.copyPixels(_loc10_,tileRect,point);
                  }
               }
               _loc7_++;
            }
            _loc3_++;
            _loc4_++;
         }
         if(debug)
         {
            canvas.bitmapData.draw(this.grid);
         }
         canvas.bitmapData.unlock();
         for each(_loc5_ in this.requestedReloadableTiles)
         {
            this.loadRequestedTile(_loc5_);
         }
      }
      
      private function createPlaceHolderTile() : void
      {
         this.placeHolder = new BitmapData(tileWidth,tileHeight,true,0);
      }
      
      private function loadRequestedTile(param1:ReloadableSimpleTile) : void
      {
         delete this.requestedReloadableTiles[param1.fileKey];
         this.reloadableTilesToUpdate[param1.fileKey] = param1;
         var _loc2_:TiledMapEvent = new TiledMapEvent(TiledMapEvent.LOAD_REQUEST);
         _loc2_.fileKey = param1.fileKey;
         dispatchEvent(_loc2_);
      }
      
      public function updateReloadableTile(param1:String, param2:BitmapData) : void
      {
         var _loc3_:ReloadableSimpleTile = null;
         if(this.reloadableTilesToUpdate[param1])
         {
            _loc3_ = this.reloadableTilesToUpdate[param1];
            delete this.reloadableTilesToUpdate[param1];
            if(_loc3_.valid)
            {
               _loc3_.updateBitmapData(param2);
               this.copyTiles();
            }
         }
      }
      
      private function handleReloadedTileRemover(param1:TimerEvent) : void
      {
         var _loc3_:String = null;
         var _loc4_:int = 0;
         var _loc5_:Tile = null;
         var _loc6_:ReloadableSimpleTile = null;
         var _loc2_:int = getTimer();
         for(_loc3_ in this.timestampedTiles)
         {
            _loc5_ = tiles[_loc3_];
            (_loc5_ as ReloadableSimpleTile).timestamp = _loc2_;
         }
         _loc4_ = 0;
         while(_loc4_ < tiles.length)
         {
            _loc5_ = tiles[_loc4_];
            if(_loc5_ is ReloadableSimpleTile)
            {
               _loc6_ = _loc5_ as ReloadableSimpleTile;
               if(_loc2_ - _loc6_.timestamp > this.removeDelayInSec)
               {
                  _loc6_.removeBitmapData();
                  _loc6_.valid = false;
               }
            }
            _loc4_++;
         }
      }
      
      private function startReloadedTileHandler() : void
      {
         var _loc2_:Tile = null;
         var _loc1_:int = 0;
         while(_loc1_ < tiles.length)
         {
            _loc2_ = tiles[_loc1_];
            if(_loc2_ is ReloadableSimpleTile)
            {
               if(this.reloadedTileRemover == null)
               {
                  this.reloadedTileRemover = new Timer(1000,0);
                  this.reloadedTileRemover.addEventListener(TimerEvent.TIMER,this.handleReloadedTileRemover);
                  this.reloadedTileRemover.start();
               }
            }
            _loc1_++;
         }
      }
      
      override public function cleanup(param1:Boolean = false) : void
      {
         super.cleanup(param1);
         this.reloadedTileRemover.stop();
         this.reloadedTileRemover.removeEventListener(TimerEvent.TIMER,this.handleReloadedTileRemover);
         this.reloadedTileRemover = null;
      }
   }
}

package net.bigpoint.as3toolbox.mapfactory
{
   import flash.display.BitmapData;
   
   public class SimpleTile extends Tile
   {
      
      internal static var bitmapDataCache:Array = [];
      
      internal var bitmapData:BitmapData;
      
      internal var cacheID:String;
      
      internal var _effects:Array;
      
      public function SimpleTile(param1:int, param2:BitmapData, param3:String = null)
      {
         super(param1);
         this.cacheID = param3;
         if(param3 != null)
         {
            bitmapDataCache[param3] = param2;
         }
         else
         {
            this.bitmapData = param2;
         }
      }
      
      public function set effects(param1:Array) : void
      {
         var _loc2_:ITileEffect = null;
         this._effects = param1;
         if(this.bitmapData != null)
         {
            for each(_loc2_ in param1)
            {
               _loc2_.setBitmapData(this.bitmapData);
            }
         }
      }
      
      public function get effects() : Array
      {
         return this._effects;
      }
   }
}

package net.bigpoint.as3toolbox.mapfactory
{
   public class Tile
   {
      
      private var _id:int;
      
      public function Tile(param1:int)
      {
         super();
         this._id = param1;
      }
      
      public function get id() : int
      {
         return this._id;
      }
   }
}

package net.bigpoint.as3toolbox.mapfactory
{
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.PixelSnapping;
   import flash.display.Shape;
   import flash.display.Sprite;
   import flash.events.TimerEvent;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.utils.Timer;
   
   public class TiledMap extends Sprite
   {
      
      protected var map:Array;
      
      private var vpWidth:int;
      
      private var vpHeight:int;
      
      protected var tiles:Vector.<Tile>;
      
      protected var max_tiles_x:int;
      
      protected var max_tiles_y:int;
      
      protected var point:Point;
      
      protected var canvas:Bitmap;
      
      protected var maxFitTilesX:int;
      
      protected var maxFitTilesY:int;
      
      private var border:Shape;
      
      protected var pX:int;
      
      protected var pY:int;
      
      private var lastPX:int = -1;
      
      private var lastPY:int = -1;
      
      protected var debug:Boolean;
      
      protected var dX:int;
      
      protected var dY:int;
      
      protected var grid:Shape;
      
      private var effectTimer:Timer;
      
      protected var tileRect:Rectangle;
      
      protected var tileWidth:int;
      
      protected var tileHeight:int;
      
      public function TiledMap(param1:Array, param2:Vector.<Tile>, param3:int, param4:int, param5:int, param6:int, param7:Boolean = false)
      {
         super();
         this.map = param1;
         this.tiles = param2;
         this.vpWidth = param3;
         this.vpHeight = param4;
         this.tileWidth = param5;
         this.tileHeight = param6;
         this.tileRect = new Rectangle();
         this.tileRect.width = param5;
         this.tileRect.height = param6;
         this.debug = param7;
         this.point = new Point();
         if(param1 != null)
         {
            this.init();
         }
      }
      
      public static function createMap(param1:int, param2:int) : Array
      {
         var _loc5_:int = 0;
         var _loc6_:MapElement = null;
         var _loc3_:Array = new Array();
         var _loc4_:int = 0;
         while(_loc4_ < param2)
         {
            _loc3_[_loc4_] = new Array();
            _loc5_ = 0;
            while(_loc5_ < param1)
            {
               _loc6_ = new MapElement();
               _loc6_.setTileID(-1);
               _loc3_[_loc4_][_loc5_] = _loc6_;
               _loc5_++;
            }
            _loc4_++;
         }
         return _loc3_;
      }
      
      protected function init() : void
      {
         this.startEffectTimer();
         this.createTransparentTile();
         this.createCanvas();
         this.max_tiles_y = this.map.length;
         this.max_tiles_x = (this.map[0] as Array).length;
         if(this.debug)
         {
            this.border = new Shape();
            this.border.graphics.lineStyle(2,255);
            this.border.graphics.drawRect(0,0,this.vpWidth,this.vpHeight);
            this.addChild(this.border);
            this.drawGrid();
         }
         this.copyTiles();
      }
      
      private function startEffectTimer() : void
      {
         var _loc1_:Tile = null;
         var _loc2_:Array = null;
         for each(_loc1_ in this.tiles)
         {
            if(_loc1_ is SimpleTile)
            {
               _loc2_ = SimpleTile(_loc1_).effects;
               if(_loc2_ != null && _loc2_.length > 0)
               {
                  this.effectTimer = new Timer(250,0);
                  this.effectTimer.addEventListener(TimerEvent.TIMER,this.handleEffectTimer);
                  this.effectTimer.start();
                  break;
               }
            }
         }
      }
      
      private function handleEffectTimer(param1:TimerEvent) : void
      {
         var _loc2_:Tile = null;
         var _loc3_:Array = null;
         var _loc4_:ITileEffect = null;
         for each(_loc2_ in this.tiles)
         {
            if(_loc2_ is SimpleTile)
            {
               _loc3_ = SimpleTile(_loc2_).effects;
               if(_loc3_ != null)
               {
                  for each(_loc4_ in _loc3_)
                  {
                     _loc4_.update();
                  }
               }
            }
         }
         this.copyTiles();
      }
      
      private function createTransparentTile() : void
      {
         if(this.tileWidth == 0 || this.tileHeight == 0)
         {
            throw new Error("tileWidth or tileHeight is invalid!");
         }
         var _loc1_:BitmapData = new BitmapData(this.tileWidth,this.tileHeight,true,0);
         this.tiles.push(new SimpleTile(this.tiles.length,_loc1_));
      }
      
      private function createCanvas() : void
      {
         this.maxFitTilesX = Math.ceil(this.vpWidth / this.tileWidth) + 2;
         this.maxFitTilesY = Math.ceil(this.vpHeight / this.tileHeight) + 2;
         if(this.debug)
         {
            this.canvas = new Bitmap(new BitmapData(this.vpWidth + this.tileWidth * 2,this.vpHeight + this.tileHeight * 2,false,65280));
         }
         else
         {
            this.canvas = new Bitmap(new BitmapData(this.vpWidth + this.tileWidth * 2,this.vpHeight + this.tileHeight * 2,true,0));
         }
         this.canvas.x = -this.tileWidth;
         this.canvas.y = -this.tileHeight;
         this.canvas.pixelSnapping = PixelSnapping.NEVER;
         this.addChild(this.canvas);
      }
      
      public function setPosition(param1:int, param2:int) : void
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         if(this.map != null)
         {
            _loc3_ = this.pX * this.tileWidth;
            _loc4_ = this.pY * this.tileHeight;
            if(this.pX != this.lastPX || this.pY != this.lastPY)
            {
               this.copyTiles();
            }
            this.lastPX = this.pX;
            this.lastPY = this.pY;
            this.pX = param1 / this.tileWidth * -1;
            this.pY = param2 / this.tileHeight * -1;
            this.canvas.x = param1 + _loc3_ - this.tileWidth;
            this.canvas.y = param2 + _loc4_ - this.tileHeight;
         }
      }
      
      internal function copyTiles() : void
      {
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:Tile = null;
         var _loc9_:BitmapData = null;
         var _loc10_:SimpleTile = null;
         if(this.parent == null)
         {
            return;
         }
         var _loc1_:int = this.pX + this.maxFitTilesX - 1;
         var _loc2_:int = this.pY + this.maxFitTilesY - 1;
         var _loc3_:int = 0;
         this.canvas.bitmapData.lock();
         this.canvas.bitmapData.fillRect(this.canvas.bitmapData.rect,0);
         var _loc4_:int = this.pY;
         while(_loc4_ < _loc2_ - this.dY)
         {
            _loc5_ = 0;
            _loc6_ = this.pX;
            while(_loc6_ < _loc1_ - this.dX)
            {
               if(_loc6_ < 0 || _loc6_ >= this.max_tiles_x || _loc4_ < 0 || _loc4_ >= this.max_tiles_y)
               {
                  _loc7_ = int(this.tiles.length - 1);
               }
               else
               {
                  _loc7_ = (this.map[_loc4_][_loc6_] as IMapElement).getTileID();
               }
               if(_loc7_ != -1)
               {
                  _loc8_ = this.tiles[_loc7_];
                  _loc9_ = null;
                  _loc10_ = _loc8_ as SimpleTile;
                  if(_loc10_.cacheID != null)
                  {
                     _loc9_ = SimpleTile.bitmapDataCache[_loc10_.cacheID];
                  }
                  else
                  {
                     _loc9_ = _loc10_.bitmapData;
                  }
                  if(_loc9_ != null)
                  {
                     this.point.x = _loc5_ * this.tileWidth + this.tileWidth;
                     this.point.y = _loc3_ * this.tileHeight + this.tileHeight;
                     _loc5_++;
                     this.canvas.bitmapData.copyPixels(_loc9_,this.tileRect,this.point);
                  }
               }
               _loc6_++;
            }
            _loc3_++;
            _loc4_++;
         }
         if(this.debug)
         {
            this.canvas.bitmapData.draw(this.grid);
         }
         this.canvas.bitmapData.unlock();
      }
      
      private function drawGrid() : void
      {
         this.grid = new Shape();
         this.grid.graphics.lineStyle(1,65280);
         var _loc1_:int = this.tileHeight;
         var _loc2_:int = 0;
         while(_loc2_ < this.max_tiles_y)
         {
            this.grid.graphics.beginFill(65280);
            this.grid.graphics.moveTo(this.tileWidth,_loc1_);
            this.grid.graphics.lineTo(this.max_tiles_x * this.tileWidth,_loc1_);
            this.grid.graphics.endFill();
            _loc1_ += this.tileHeight;
            _loc2_++;
         }
         var _loc3_:int = this.tileWidth;
         var _loc4_:int = 0;
         while(_loc4_ < this.max_tiles_x)
         {
            this.grid.graphics.beginFill(65280);
            this.grid.graphics.moveTo(_loc3_,this.tileHeight);
            this.grid.graphics.lineTo(_loc3_,this.max_tiles_y * this.tileWidth);
            this.grid.graphics.endFill();
            _loc3_ += this.tileWidth;
            _loc4_++;
         }
      }
      
      public function cleanup(param1:Boolean = false) : void
      {
         var _loc2_:Tile = null;
         var _loc3_:SimpleTile = null;
         var _loc4_:BitmapData = null;
         this.map = null;
         this.canvas.bitmapData.dispose();
         for each(_loc2_ in this.tiles)
         {
            if(_loc2_ is SimpleTile)
            {
               _loc3_ = _loc2_ as SimpleTile;
               _loc3_.effects = [];
               if(_loc3_.bitmapData != null)
               {
                  _loc3_.bitmapData.dispose();
                  _loc3_.bitmapData = null;
               }
            }
         }
         this.tiles = null;
         if(parent != null)
         {
            parent.removeChild(this);
         }
         if(param1)
         {
            for each(_loc4_ in SimpleTile.bitmapDataCache)
            {
               _loc4_.dispose();
            }
            SimpleTile.bitmapDataCache = [];
         }
      }
      
      public function removeBitmapDataFromCache(param1:String) : void
      {
         if(SimpleTile.bitmapDataCache[param1])
         {
            (SimpleTile.bitmapDataCache[param1] as BitmapData).dispose();
            delete SimpleTile.bitmapDataCache[param1];
         }
      }
   }
}

package net.bigpoint.as3toolbox.mapfactory
{
   import flash.events.Event;
   
   public class TiledMapEvent extends Event
   {
      
      public static const LOAD_REQUEST:String = "loadRequest";
      
      public var fileKey:String;
      
      public function TiledMapEvent(param1:String, param2:Boolean = false, param3:Boolean = false)
      {
         super(param1,param2,param3);
      }
   }
}

package net.bigpoint.darkorbit
{
   public class CommandLog
   {
      
      private static var _instance:CommandLog;
      
      private var _logData:String;
      
      private var _logLines:Array;
      
      private var _bufferSize:int;
      
      private var _last:int;
      
      private var _targets:Array;
      
      public function CommandLog(param1:Function)
      {
         super();
         this.clear();
         this._targets = [];
         if(param1 !== hidden)
         {
            throw new Error("CommandLog is a Singleton and can only be accessed through CommandLog.instance");
         }
      }
      
      private static function hidden() : void
      {
      }
      
      public static function get instance() : CommandLog
      {
         if(_instance == null)
         {
            _instance = new CommandLog(hidden);
         }
         return _instance;
      }
      
      public function addTarget(param1:ICommandLogTarget) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this._targets.length)
         {
            if(this._targets[_loc2_] == param1)
            {
               return;
            }
            _loc2_++;
         }
         param1.writeOutput(this._logData);
         this._targets.push(param1);
      }
      
      public function removeTarget(param1:ICommandLogTarget) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this._targets.length)
         {
            if(this._targets[_loc2_] == param1)
            {
               this._targets.splice(_loc2_,1);
               return;
            }
            _loc2_++;
         }
      }
      
      public function write(param1:String) : void
      {
         this._logData += param1 + "\n";
         ++this._last;
         this._logLines[this._last] = param1;
         var _loc2_:int = 0;
         while(_loc2_ < this._targets.length)
         {
            ICommandLogTarget(this._targets[_loc2_]).writeOutput(param1);
            _loc2_++;
         }
      }
      
      public function getAll() : String
      {
         return this._logData;
      }
      
      public function getLast() : String
      {
         if(this._last == -1 || this._logLines[this._last] == null)
         {
            return "no Log Data";
         }
         return this._logLines[this._last];
      }
      
      public function clear() : void
      {
         this._logData = "";
         this._logLines = [];
         this._bufferSize = 500;
         this._last = -1;
      }
      
      public function passFullInCommand(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this._targets.length)
         {
            ICommandLogTarget(this._targets[_loc2_]).passFullInCommand(param1);
            _loc2_++;
         }
      }
   }
}

package net.bigpoint.darkorbit
{
   import com.bigpoint.utils.BPLocale;
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import flash.display.Sprite;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.events.TimerEvent;
   import flash.geom.Point;
   import flash.ui.Keyboard;
   import flash.utils.Dictionary;
   import flash.utils.Timer;
   import net.bigpoint.AmmoPrice;
   import net.bigpoint.LastTargetInfo;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.catalog.SpecialAmmunition;
   import net.bigpoint.darkorbit.collectable.Collectable;
   import net.bigpoint.darkorbit.collectable.CollectablePattern;
   import net.bigpoint.darkorbit.combat.RocketPattern;
   import net.bigpoint.darkorbit.gui.CPUItem;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.map.MiniMap;
   import net.bigpoint.darkorbit.menu.ActionButton;
   import net.bigpoint.darkorbit.menu.ActionButton2;
   import net.bigpoint.darkorbit.menu.SuperActionButton;
   import net.bigpoint.darkorbit.net.ClientCommands;
   import net.bigpoint.darkorbit.net.ConnectionManager;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   import net.bigpoint.darkorbit.station.RelayStation;
   
   public class EventManager
   {
      
      private static const COLLECTABLE_Y_OFFSET:Number = 120;
      
      private var moveTimer:Timer;
      
      private var lastTarget:LastTargetInfo;
      
      private var controlsLocked:Boolean;
      
      private var map:Map;
      
      private var rotateTimer:Timer;
      
      private var mouseOverTimer:Timer;
      
      public var halfScreenWidth:int;
      
      public var halfScreenHeight:int;
      
      private var keyDown:Array = [];
      
      private var _lockedShip:MapObject;
      
      private var lastClick:Point;
      
      private var lastDblc:uint = 0;
      
      public var serverFunctionDict:Dictionary = new Dictionary();
      
      public var idleState:Boolean = false;
      
      public function EventManager(param1:Map)
      {
         super();
         this.map = param1;
         this.halfScreenWidth = ScreenManager.centerX;
         this.halfScreenHeight = ScreenManager.centerY;
         this.lastTarget = new LastTargetInfo();
         this.lastClick = new Point();
         this.addEventListeners();
      }
      
      public function addEventListeners() : void
      {
         this.map.getMain().screenManager.getStaticContainer().addEventListener(MouseEvent.MOUSE_DOWN,this.onMouseDown);
         this.map.getMain().stage.addEventListener(MouseEvent.MOUSE_UP,this.handleMouseRelease);
         this.map.getMain().screenManager.getStaticContainer().mouseEnabled = true;
         this.map.getMain().screenManager.getStaticContainer().addEventListener(KeyboardEvent.KEY_DOWN,this.handleKeyDown);
         this.map.getMain().screenManager.getStaticContainer().addEventListener(KeyboardEvent.KEY_UP,this.onKeyUp);
         this.map.getMain().screenManager.getStaticContainer().addEventListener(MouseEvent.MOUSE_WHEEL,this.onMouseWheelEvent);
         this.moveTimer = new Timer(370,0);
         this.moveTimer.addEventListener(TimerEvent.TIMER,this.onMoveTimer);
         this.rotateTimer = new Timer(25,0);
         this.rotateTimer.addEventListener(TimerEvent.TIMER,this.onRotateTimer);
         this.rotateTimer.start();
         this.mouseOverTimer = new Timer(100,0);
         this.mouseOverTimer.addEventListener(TimerEvent.TIMER,this.onMouseOverTimer);
         this.mouseOverTimer.start();
      }
      
      private function handleDoubleClick(param1:MouseEvent) : void
      {
      }
      
      public function removeKeyListener() : void
      {
         this.map.getMain().screenManager.getStaticContainer().removeEventListener(KeyboardEvent.KEY_DOWN,this.handleKeyDown);
      }
      
      public function cleanup() : void
      {
         this.map.getMain().screenManager.getStaticContainer().removeEventListener(MouseEvent.MOUSE_DOWN,this.onMouseDown);
         this.map.getMain().stage.removeEventListener(MouseEvent.MOUSE_UP,this.handleMouseRelease);
         this.map.getMain().screenManager.getStaticContainer().removeEventListener(MouseEvent.DOUBLE_CLICK,this.handleDoubleClick);
         this.map.getMain().screenManager.getStaticContainer().doubleClickEnabled = false;
         this.map.getMain().screenManager.getStaticContainer().removeEventListener(KeyboardEvent.KEY_DOWN,this.handleKeyDown);
         this.map.getMain().screenManager.getStaticContainer().removeEventListener(KeyboardEvent.KEY_UP,this.onKeyUp);
         this.map.getMain().screenManager.getStaticContainer().removeEventListener(MouseEvent.MOUSE_WHEEL,this.onMouseWheelEvent);
         this.moveTimer.stop();
         this.moveTimer.removeEventListener(TimerEvent.TIMER,this.onMoveTimer);
         this.mouseOverTimer.stop();
         this.mouseOverTimer.removeEventListener(TimerEvent.TIMER,this.onMouseOverTimer);
         this.rotateTimer.stop();
         this.rotateTimer.removeEventListener(TimerEvent.TIMER,this.onRotateTimer);
      }
      
      private function onMouseWheelEvent(param1:MouseEvent) : void
      {
         this.map.getDroneManager().setDroneRadius(param1.delta * 10);
      }
      
      private function onMoveTimer(param1:TimerEvent) : void
      {
         if(this.controlsLocked)
         {
            return;
         }
         var _loc2_:Number = this.map.getMain().screenManager.getStaticContainer().mouseX;
         var _loc3_:Number = this.map.getMain().screenManager.getStaticContainer().mouseY;
         var _loc4_:Number = _loc2_ - this.halfScreenWidth + this.map.getShipManager().getHero().x;
         var _loc5_:Number = _loc3_ - this.halfScreenHeight + this.map.getShipManager().getHero().y;
         var _loc6_:Point = this.map.poiManager.checkPOIZoneCollisions(new Point(this.map.getShipManager().getHero().x,this.map.getShipManager().getHero().y),new Point(_loc4_,_loc5_));
         if(this.isMouseInMoveableArea())
         {
            if(_loc6_ != null)
            {
               this.moveHeroToCordinates(_loc6_.x,_loc6_.y);
            }
            else
            {
               this.moveShip(_loc2_,_loc3_);
            }
         }
      }
      
      private function isMouseInMoveableArea() : Boolean
      {
         var _loc1_:Number = this.map.getMain().screenManager.getStaticContainer().mouseX;
         var _loc2_:Number = this.map.getMain().screenManager.getStaticContainer().mouseY;
         var _loc3_:Ship = this.map.getShipManager().getHero();
         var _loc4_:Number = Math.pow(_loc2_ - this.halfScreenHeight,2) + Math.pow(_loc1_ - this.halfScreenWidth,2);
         if(_loc4_ < _loc3_.shipPattern.moveRadiusSquared)
         {
            return false;
         }
         return true;
      }
      
      private function onRotateTimer(param1:TimerEvent) : void
      {
         var _loc2_:Ship = null;
         var _loc3_:Number = NaN;
         var _loc4_:int = 0;
         if(this._lockedShip != null)
         {
            _loc2_ = this.map.getShipManager().getHero();
            if(_loc2_ != null)
            {
               _loc3_ = Math.atan2(this._lockedShip.y - _loc2_.y,this._lockedShip.x - _loc2_.x) * 180 / Math.PI;
               _loc4_ = Math.round(_loc3_ + 180);
               TweenMax.to(_loc2_,0.25,{"shortRotation":{"shipRotation":_loc4_}});
            }
         }
         else
         {
            this.rotateHero();
         }
      }
      
      private function onMouseDown(param1:MouseEvent) : void
      {
         var _loc2_:Ship = null;
         var _loc3_:Sprite = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:MapObject = null;
         var _loc7_:RelayStation = null;
         var _loc8_:Date = null;
         var _loc9_:uint = 0;
         var _loc10_:uint = 0;
         var _loc11_:MapObject = null;
         var _loc12_:RelayStation = null;
         var _loc13_:Number = NaN;
         var _loc14_:Number = NaN;
         var _loc15_:Collectable = null;
         var _loc16_:Point = null;
         var _loc17_:MiniMap = null;
         if(this.idleState)
         {
            return;
         }
         if(Settings.doubleclickAttackEnabled)
         {
            _loc8_ = new Date();
            _loc9_ = uint(_loc8_.getTime());
            if(this.lastDblc > 0)
            {
               _loc10_ = uint(_loc9_ - this.lastDblc);
               if(_loc10_ < 500)
               {
                  _loc11_ = this.map.getShipManager().getSelectedShip();
                  if(_loc11_ != null)
                  {
                     _loc2_ = this.map.getShipManager().getHero();
                     _loc3_ = this.map.getMain().screenManager.getStaticContainer();
                     _loc4_ = _loc3_.mouseX - this.halfScreenWidth + _loc2_.x;
                     _loc5_ = _loc3_.mouseY - this.halfScreenHeight + _loc2_.y;
                     _loc6_ = this.map.getShipManager().hitTest(_loc4_,_loc5_);
                     if(_loc6_ != null)
                     {
                        this.toggleLaserAttack(ActionButton.ENV_KEYBOARD);
                     }
                  }
                  _loc12_ = this.map.getStationManager().getSelectedAsset();
                  if(_loc12_ != null)
                  {
                     _loc2_ = this.map.getShipManager().getHero();
                     _loc3_ = this.map.getMain().screenManager.getStaticContainer();
                     _loc4_ = _loc3_.mouseX - this.halfScreenWidth + _loc2_.x;
                     _loc5_ = _loc3_.mouseY - this.halfScreenHeight + _loc2_.y;
                     _loc7_ = this.map.getStationManager().hitTest(_loc4_,_loc5_);
                     if(_loc7_ != null)
                     {
                        this.map.getMain().getConnectionManager().sendCommand(ServerCommands.LASER_ATTACK,[_loc7_.relayID]);
                     }
                  }
               }
            }
            this.lastDblc = _loc9_;
         }
         _loc3_ = this.map.getMain().screenManager.getStaticContainer();
         this.map.getMain().stage.focus = _loc3_;
         if(this.controlsLocked)
         {
            return;
         }
         if(this.map.getMain().getGuiManager().getGroupUI() != null && this.map.getMain().getGuiManager().getGroupUI().isInPingMode)
         {
            _loc2_ = this.map.getShipManager().getHero();
            _loc13_ = _loc3_.mouseX;
            _loc14_ = _loc3_.mouseY;
            if(_loc2_ != null)
            {
               _loc13_ = _loc13_ - this.halfScreenWidth + _loc2_.x;
               _loc14_ = _loc14_ - this.halfScreenHeight + _loc2_.y;
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.GROUPSYSTEM,[ClientCommands.GROUPSYSTEM_PING,ClientCommands.GROUPSYSTEM_PING_POSITION,_loc13_,_loc14_]);
               this.map.getMain().getGuiManager().getGroupUI().isInPingMode = false;
               return;
            }
         }
         if(!this.isShipSelected())
         {
            _loc2_ = this.map.getShipManager().getHero();
            _loc4_ = _loc3_.mouseX - this.halfScreenWidth + _loc2_.x;
            _loc5_ = _loc3_.mouseY - this.halfScreenHeight + _loc2_.y;
            _loc15_ = this.map.getCollectableManager().hitTest(_loc4_,_loc5_);
            _loc7_ = this.map.getStationManager().hitTest(_loc4_,_loc5_);
            if(_loc7_ != null)
            {
               _loc7_.isSelected = true;
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT_SHIP,[_loc7_.relayID]);
               return;
            }
            if(_loc15_ != null)
            {
               _loc16_ = this.map.poiManager.checkPOIZoneCollisions(new Point(this.map.getShipManager().getHero().x,this.map.getShipManager().getHero().y),new Point(_loc4_,_loc5_));
               if(_loc16_ != null)
               {
                  this.moveHeroToCordinates(_loc16_.x,_loc16_.y);
               }
               else
               {
                  this.moveShipToCollectable(_loc15_);
               }
            }
            else
            {
               if(this.isMouseInMoveableArea())
               {
                  _loc16_ = this.map.poiManager.checkPOIZoneCollisions(new Point(this.map.getShipManager().getHero().x,this.map.getShipManager().getHero().y),new Point(_loc4_,_loc5_));
                  if(_loc16_ != null)
                  {
                     this.moveHeroToCordinates(_loc16_.x,_loc16_.y);
                  }
                  else
                  {
                     this.moveShip(_loc3_.mouseX,_loc3_.mouseY);
                  }
               }
               if(!this.moveTimer.running)
               {
                  this.moveTimer.start();
               }
            }
            _loc17_ = this.map.getMinimapManager().getMiniMap();
            if(_loc17_ != null)
            {
               _loc17_.clearRoute();
            }
         }
      }
      
      private function isShipSelected() : Boolean
      {
         var _loc1_:Ship = this.map.getShipManager().getHero();
         var _loc2_:Sprite = this.map.getMain().screenManager.getStaticContainer();
         var _loc3_:int = _loc2_.mouseX - this.halfScreenWidth + _loc1_.x;
         var _loc4_:int = _loc2_.mouseY - this.halfScreenHeight + _loc1_.y;
         var _loc5_:MapObject = this.map.getShipManager().getSelectedShip();
         var _loc6_:MapObject = this.map.getShipManager().hitTest(_loc3_,_loc4_);
         if(_loc5_ != null && _loc5_ == _loc6_)
         {
            return true;
         }
         if(_loc6_ != null)
         {
            if(this._lockedShip != null && this._lockedShip != _loc6_)
            {
               this._lockedShip = null;
            }
            this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT_SHIP,[_loc6_.getUserId()]);
            if(_loc6_.shipPattern.isSpaceball())
            {
               this.map.getShipManager().selectSpaceball(_loc6_.getUserId());
            }
            return true;
         }
         return false;
      }
      
      private function handleMouseRelease(param1:MouseEvent) : void
      {
         this.map.getMain().getGuiManager().checkWindows();
         this.map.getMain().getGuiManager().checkAllResizableWindows();
         this.moveTimer.reset();
         this.moveTimer.stop();
      }
      
      public function moveShip(param1:int, param2:int, param3:Boolean = false) : void
      {
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc4_:Ship = this.map.getShipManager().getHero();
         if(_loc4_ != null)
         {
            if(param3)
            {
               _loc5_ = param1;
               _loc6_ = param2;
            }
            else
            {
               _loc5_ = param1 - this.halfScreenWidth + _loc4_.x;
               _loc6_ = param2 - this.halfScreenHeight + _loc4_.y;
            }
            this.moveHeroToCordinates(_loc5_,_loc6_);
         }
      }
      
      public function moveHeroToCordinates(param1:int, param2:int, param3:Collectable = null) : void
      {
         var _loc5_:int = 0;
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         var _loc8_:Number = NaN;
         var _loc9_:int = 0;
         var _loc4_:Ship = this.map.getShipManager().getHero();
         if(_loc4_ != null)
         {
            _loc4_.currentlyMoving = true;
            this.lastTarget.x = param1;
            this.lastTarget.y = param2;
            this.lastTarget.valid = true;
            this.map.getMain().getConnectionManager().sendCommand(ServerCommands.SHIP_MOVEMENT,[param1,param2,int(_loc4_.x),int(_loc4_.y)]);
            _loc5_ = _loc4_.getSpeed();
            _loc6_ = Math.sqrt(Math.pow(param2 - _loc4_.y,2) + Math.pow(param1 - _loc4_.x,2));
            _loc7_ = _loc6_ / _loc5_;
            _loc8_ = Math.atan2(param2 - _loc4_.y,param1 - _loc4_.x) * 180 / Math.PI;
            _loc9_ = Math.round(_loc8_ + 180);
            _loc4_.movementDirection = _loc9_;
            if(_loc4_.isDebuffed)
            {
               _loc4_.updateDebuffRotation(MapObject.ROTATION_MOVEMENT,true);
            }
            if(param3)
            {
               TweenMax.to(_loc4_,_loc7_,{
                  "ease":Linear.easeNone,
                  "x":param1,
                  "y":param2,
                  "onComplete":this.handleCollectInit,
                  "onCompleteParams":[param3]
               });
            }
            else
            {
               TweenMax.to(_loc4_,_loc7_,{
                  "ease":Linear.easeNone,
                  "x":param1,
                  "y":param2,
                  "onComplete":this.handleHeroStoppedMoving,
                  "onCompleteParams":[_loc4_]
               });
            }
            this.lastClick.x = param1;
            this.lastClick.y = param2;
         }
      }
      
      private function handleHeroStoppedMoving(param1:MapObject) : void
      {
         if(param1 != null)
         {
            param1.currentlyMoving = false;
         }
      }
      
      public function updateShipMovement() : void
      {
         var _loc1_:Ship = null;
         var _loc2_:int = 0;
         var _loc3_:Number = NaN;
         var _loc4_:Number = NaN;
         if(this.lastClick.x != 0 && this.lastClick.y != 0)
         {
            _loc1_ = this.map.getShipManager().getHero();
            _loc2_ = _loc1_.getSpeed();
            _loc3_ = Math.sqrt(Math.pow(this.lastClick.y - _loc1_.y,2) + Math.pow(this.lastClick.x - _loc1_.x,2));
            _loc4_ = _loc3_ / _loc2_;
            TweenMax.to(_loc1_,_loc4_,{
               "ease":Linear.easeNone,
               "x":this.lastClick.x,
               "y":this.lastClick.y
            });
         }
      }
      
      private function moveShipToCollectable(param1:Collectable) : void
      {
         this.moveHeroToCordinates(param1.getPosX(),param1.getPosY() - COLLECTABLE_Y_OFFSET,param1);
      }
      
      private function handleCollectInit(param1:Collectable) : void
      {
         var _loc3_:String = null;
         var _loc4_:Boolean = false;
         var _loc5_:CollectablePattern = null;
         var _loc6_:int = 0;
         var _loc2_:Ship = this.map.getShipManager().getHero();
         _loc2_.currentlyMoving = false;
         if(_loc2_.x == this.lastTarget.x && _loc2_.y == this.lastTarget.y)
         {
            this.map.getCollectableManager().setLastSelectedHash(param1.getHash());
            if(param1.collectableClass == CollectablePattern.TYPE_ORE)
            {
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.COLLECT_ORE,[param1.getHash()]);
               _loc3_ = "beam0";
               _loc4_ = true;
            }
            else if(param1.collectableClass == CollectablePattern.TYPE_BOX || param1.collectableClass == CollectablePattern.TYPE_BEACON)
            {
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.COLLECT_BOX,[param1.getHash()]);
               _loc3_ = "beam1";
               _loc4_ = true;
            }
         }
         if(_loc4_)
         {
            _loc5_ = PatternManager.getCollectablePattern(param1.collectableClass,param1.getTypeID());
            if(!_loc5_.isHarvestable)
            {
               this.map.getCollectableManager().showBeam(param1.getPosX(),param1.getPosY(),_loc5_.getDuration(),_loc3_);
               _loc6_ = _loc5_.getSoundID();
               if(_loc6_ != -1)
               {
                  AudioManager.playSoundEffect(_loc6_,false,false,param1.clip.x,param1.clip.y);
               }
            }
         }
      }
      
      public function lockControls() : void
      {
         this.controlsLocked = true;
      }
      
      public function unlockControls() : void
      {
         this.controlsLocked = false;
      }
      
      private function rotateHero() : void
      {
         if(this.lastTarget.valid)
         {
            this.map.getShipManager().focusHeroToCoordinates(this.lastTarget.x,this.lastTarget.y);
            this.lastTarget.valid = false;
         }
      }
      
      public function quickBuy(param1:String, param2:int) : void
      {
         var _loc4_:AmmoPrice = null;
         var _loc3_:int = -1;
         if(param1 == ServerCommands.BUY_LASER)
         {
            _loc4_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_LASER,param2);
            if(_loc4_ != null)
            {
               _loc3_ = _loc4_.amount;
            }
         }
         else if(param1 == ServerCommands.BUY_ROCKET)
         {
            _loc4_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_ROCKET,param2);
            if(_loc4_ != null)
            {
               _loc3_ = _loc4_.amount;
            }
         }
         if(_loc3_ != -1)
         {
            this.map.getMain().getConnectionManager().sendCommand(ServerCommands.BUY,[param1,param2,_loc3_]);
         }
      }
      
      public function toggleLaserAttack(param1:int) : void
      {
         var _loc2_:Ship = null;
         var _loc3_:MapObject = null;
         var _loc4_:int = 0;
         if(param1 == ActionButton.ENV_QUICKSTART && Settings.quickSlotStopAttack || param1 == ActionButton.ENV_KEYBOARD || param1 == ActionButton.ENV_POOL)
         {
            _loc2_ = this.map.getShipManager().getHero();
            _loc3_ = this.map.getShipManager().getSelectedShip();
            if(_loc3_ != null)
            {
               _loc4_ = _loc3_.getUserId();
               if(_loc4_ != -1)
               {
                  if(this.map.getCombatManager().isShipAttacking(_loc2_.getUserId()) != null)
                  {
                     this.abortLaserAttack(_loc4_);
                  }
                  else
                  {
                     this.startLaserAttack(_loc4_);
                  }
               }
            }
            this.map.getMain().getGuiManager().getMenuManager().updateQuickstartLaserButtons();
         }
      }
      
      public function activateRocket(param1:int) : void
      {
         var _loc2_:MapObject = null;
         var _loc3_:int = 0;
         if(param1 == ActionButton.ENV_QUICKSTART && Settings.quickSlotStopAttack || param1 == ActionButton.ENV_KEYBOARD || param1 == ActionButton.ENV_POOL)
         {
            _loc2_ = this.map.getShipManager().getSelectedShip();
            if(_loc2_ != null)
            {
               _loc3_ = _loc2_.getUserId();
               if(_loc3_ != -1)
               {
                  this.map.getMain().getConnectionManager().sendCommand(ServerCommands.ROCKET_ATTACK,[_loc3_]);
               }
            }
         }
      }
      
      public function loadRocketLauncher(param1:int) : void
      {
         if(Settings.rocketLauncherRocketsLoaded < 1)
         {
            this.map.getMain().getConnectionManager().sendCommand(ClientCommands.ROCKETLAUNCHER,[ClientCommands.ROCKETLAUNCHER_LOAD]);
         }
         else
         {
            this.map.getMain().getConnectionManager().sendCommand(ClientCommands.ROCKETLAUNCHER,[ClientCommands.ROCKETLAUNCHER_ATTACK]);
         }
      }
      
      public function startLaserAttack(param1:int) : void
      {
         this.map.getMain().getConnectionManager().sendCommand(ServerCommands.LASER_ATTACK,[param1]);
         this.map.getMain().getGuiManager().getMenuManager().togglePoolButton(SuperActionButton.ACTIVATION_LASER,true);
      }
      
      public function abortLaserAttack(param1:int) : void
      {
         this.map.getMain().getGuiManager().getMenuManager().togglePoolButton(SuperActionButton.ACTIVATION_LASER,false);
         this.map.getMain().screenManager.map.getCombatManager().removeLaserAttack(Hero.userID);
         this.map.getMain().getConnectionManager().sendCommand(ClientCommands.LASER_STOP,[param1]);
         this._lockedShip = null;
         var _loc2_:MapObject = this.map.getShipManager().getSelectedShip();
         if(_loc2_ != null)
         {
            this.map.getMain().getGuiManager().writeToLog(BPLocale.getText("attstop").replace(/%!/,_loc2_.getUsername()));
         }
      }
      
      public function activateJumpCPU() : void
      {
         var _loc1_:CPUItem = Hero.cpuItems[CPUItem.TYPE_JUMP];
         if(_loc1_ != null && _loc1_.amount > 0)
         {
            this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ServerCommands.JUMP_CPU,_loc1_.level]);
            this.map.getMain().getGuiManager().getMenuManager().flashButton(SuperActionButton.ACTIVATION_CPU_JUMP);
         }
      }
      
      public function activateInstaRepair() : void
      {
         this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.INSTAREPAIR]);
         var _loc1_:ActionButton2 = this.map.getMain().getGuiManager().getTopMenu().getButton(SuperActionButton.ACTION_FASTREPAIR);
         _loc1_.startFlash();
         _loc1_.setCounterVisibility(false);
      }
      
      public function activateArolCPU() : void
      {
         var _loc2_:String = null;
         var _loc1_:CPUItem = Hero.cpuItems[CPUItem.TYPE_AROL];
         if(_loc1_ != null)
         {
            _loc2_ = _loc1_.state ? "0" : "1";
            this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.AROL,_loc2_]);
         }
      }
      
      public function toggleRllbCpu() : void
      {
         var _loc2_:String = null;
         var _loc1_:CPUItem = Hero.cpuItems[CPUItem.TYPE_RLLB];
         if(_loc1_ != null)
         {
            _loc2_ = _loc1_.state ? "0" : "1";
            this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.RLLB,_loc2_]);
         }
      }
      
      public function activateAimCPU() : void
      {
         var _loc1_:CPUItem = Hero.cpuItems[CPUItem.TYPE_AIM];
         if(_loc1_ != null)
         {
            if(_loc1_.state)
            {
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.AIM,"0"]);
            }
            else
            {
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.AIM,"1"]);
            }
         }
      }
      
      public function activateCloakCPU() : void
      {
         var _loc1_:CPUItem = Hero.cpuItems[CPUItem.TYPE_CLOAK];
         if(_loc1_ != null && _loc1_.amount > 0)
         {
            this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.SELECT_CLOAK]);
         }
      }
      
      public function activateExplosive() : void
      {
         var _loc1_:int = Settings.selectedExplosive;
         switch(_loc1_)
         {
            case 1:
               if(Hero.explosiveAmounts[SpecialAmmunition.MINE] > 0)
               {
                  this.map.getMain().getGuiManager().getMenuManager().flashButton(SuperActionButton.ACTIVATION_EXPLOSIVE);
                  this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.MINE,ServerCommands.MINE_ACM]);
               }
               break;
            case 2:
               if(Hero.explosiveAmounts[SpecialAmmunition.SMARTBOMB] > 0)
               {
                  this.map.getMain().getGuiManager().getMenuManager().flashButton(SuperActionButton.ACTIVATION_EXPLOSIVE);
                  this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ServerCommands.SMARTBOMB]);
               }
               break;
            case 3:
               if(Hero.explosiveAmounts[SpecialAmmunition.INSTASHIELD] > 0)
               {
                  this.map.getMain().getGuiManager().getMenuManager().flashButton(SuperActionButton.ACTIVATION_EXPLOSIVE);
                  this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ServerCommands.INSTASHIELD]);
               }
               break;
            case 4:
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ServerCommands.EMP]);
               break;
            case 5:
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ServerCommands.FIREWORKS,1]);
               break;
            case 6:
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ServerCommands.FIREWORKS,2]);
               break;
            case 7:
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ServerCommands.FIREWORKS,3]);
               break;
            case 8:
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ServerCommands.FIREWORKS_IGNITE]);
               break;
            case 9:
               if(Hero.explosiveAmounts[SpecialAmmunition.MINE_EMP] > 0)
               {
                  this.map.getMain().getGuiManager().getMenuManager().flashButton(SuperActionButton.ACTIVATION_EXPLOSIVE);
                  this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.MINE,ServerCommands.MINE_EMP]);
               }
               break;
            case 10:
               if(Hero.explosiveAmounts[SpecialAmmunition.MINE_SAB] > 0)
               {
                  this.map.getMain().getGuiManager().getMenuManager().flashButton(SuperActionButton.ACTIVATION_EXPLOSIVE);
                  this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.MINE,ServerCommands.MINE_SAB]);
               }
               break;
            case 11:
               if(Hero.explosiveAmounts[SpecialAmmunition.MINE_DDM] > 0)
               {
                  this.map.getMain().getGuiManager().getMenuManager().flashButton(SuperActionButton.ACTIVATION_EXPLOSIVE);
                  this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.MINE,ServerCommands.MINE_DDM]);
               }
         }
      }
      
      public function activateGate() : void
      {
         var _loc2_:String = null;
         var _loc1_:SimpleWindow = this.map.getMain().getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_LOGOUT);
         if(_loc1_.isMaximizeClicked())
         {
            return;
         }
         if(Hero.inJumpArea)
         {
            this.map.getMain().getConnectionManager().sendCommand(ClientCommands.PORTAL_JUMP);
         }
         else
         {
            _loc2_ = BPLocale.getText("jumpgate_failed_no_gate");
            this.map.getMain().getGuiManager().writeToLog(_loc2_);
            AudioManager.playSoundEffect(29);
         }
      }
      
      public function activateRobot() : void
      {
         if(this.map.getShipManager().getHero().getHitpoints() < this.map.getShipManager().getHero().getMaxHitpoints())
         {
            this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.ROBOT]);
         }
      }
      
      public function selectLaser(param1:int) : void
      {
         this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT_LASER,[param1]);
         Settings.selectedLaser = param1;
         Settings.lastSelectedLaser = param1;
      }
      
      public function selectRocket(param1:int) : void
      {
         switch(param1)
         {
            case RocketPattern.R310:
            case RocketPattern.PLT_2026:
            case RocketPattern.PLT_2021:
            case RocketPattern.PLT_3030:
            case RocketPattern.PLD_8:
            case RocketPattern.DCR_250:
            case RocketPattern.WIZ:
               Settings.selectedRocket = param1;
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT_ROCKET,[param1]);
               break;
            case RocketPattern.HSTRM01:
            case RocketPattern.UBR100:
            case RocketPattern.ECO10:
               Settings.selectedLauncherRocket = param1;
               this.map.getMain().getConnectionManager().sendCommand(ClientCommands.ROCKETLAUNCHER,[ClientCommands.ROCKETLAUNCHER_SELECT_ROCKET,param1]);
         }
      }
      
      public function selectConfiguration(param1:int) : void
      {
         this.map.getMain().getConnectionManager().sendCommand(ClientCommands.SELECT,[ClientCommands.CONFIGURATION,param1.toString()]);
      }
      
      private function onKeyUp(param1:KeyboardEvent) : void
      {
         this.keyDown[param1.keyCode] = false;
      }
      
      private function handleCommands(param1:Array) : void
      {
         var _loc3_:Number = NaN;
         var _loc4_:Number = NaN;
         var _loc5_:int = 0;
         var _loc2_:ConnectionManager = this.map.getMain().getConnectionManager();
         if(param1.length == 1)
         {
            _loc2_.sendRawCommand(param1[0]);
         }
         else
         {
            _loc5_ = 0;
            while(_loc5_ < param1.length)
            {
               if(param1[_loc5_] is Number)
               {
                  _loc4_ = Number(param1[_loc5_]);
                  _loc3_ += _loc4_;
                  TweenMax.delayedCall(_loc3_,_loc2_.sendRawCommand,[param1[_loc5_ + 1]]);
                  _loc5_ += 2;
               }
               else
               {
                  TweenMax.delayedCall(_loc3_ + 0.1,_loc2_.sendRawCommand,[param1[_loc5_]]);
                  _loc5_++;
               }
            }
         }
      }
      
      private function handleKeyDown(param1:KeyboardEvent) : void
      {
         var _loc2_:SimpleWindow = null;
         var _loc3_:int = 0;
         if(!this.map.valid)
         {
            return;
         }
         if(this.keyDown[param1.keyCode])
         {
            return;
         }
         this.keyDown[param1.keyCode] = true;
         if(this.controlsLocked)
         {
            return;
         }
         if(this.serverFunctionDict[param1.keyCode] != undefined)
         {
            this.handleCommands(this.serverFunctionDict[param1.keyCode]);
         }
         else
         {
            switch(param1.keyCode)
            {
               case Keyboard.CONTROL:
                  this.toggleLaserAttack(ActionButton.ENV_KEYBOARD);
                  break;
               case Keyboard.SPACE:
                  this.activateRocket(ActionButton.ENV_KEYBOARD);
                  break;
               case 49:
               case 97:
                  this.map.getMain().getGuiManager().getMenuManager().getQuickMenu().activateSlot(0);
                  AudioManager.playSoundEffect(25);
                  break;
               case 50:
               case 98:
                  this.map.getMain().getGuiManager().getMenuManager().getQuickMenu().activateSlot(1);
                  AudioManager.playSoundEffect(25);
                  break;
               case 51:
               case 99:
                  this.map.getMain().getGuiManager().getMenuManager().getQuickMenu().activateSlot(2);
                  AudioManager.playSoundEffect(25);
                  break;
               case 52:
               case 100:
                  this.map.getMain().getGuiManager().getMenuManager().getQuickMenu().activateSlot(3);
                  AudioManager.playSoundEffect(25);
                  break;
               case 53:
               case 101:
                  this.map.getMain().getGuiManager().getMenuManager().getQuickMenu().activateSlot(4);
                  AudioManager.playSoundEffect(25);
                  break;
               case 54:
               case 102:
                  this.map.getMain().getGuiManager().getMenuManager().getQuickMenu().activateSlot(5);
                  AudioManager.playSoundEffect(25);
                  break;
               case 55:
               case 103:
                  this.map.getMain().getGuiManager().getMenuManager().getQuickMenu().activateSlot(6);
                  AudioManager.playSoundEffect(25);
                  break;
               case 56:
               case 104:
                  this.map.getMain().getGuiManager().getMenuManager().getQuickMenu().activateSlot(7);
                  AudioManager.playSoundEffect(25);
                  break;
               case 57:
               case 105:
                  this.map.getMain().getGuiManager().getMenuManager().getQuickMenu().activateSlot(8);
                  AudioManager.playSoundEffect(25);
                  break;
               case 48:
               case 96:
                  this.map.getMain().getGuiManager().getMenuManager().getQuickMenu().activateSlot(9);
                  AudioManager.playSoundEffect(25);
                  break;
               case 74:
                  _loc2_ = this.map.getMain().getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_LOGOUT);
                  if(_loc2_.isMaximizeClicked())
                  {
                     return;
                  }
                  this.map.getMain().getConnectionManager().sendCommand(ClientCommands.PORTAL_JUMP);
                  break;
               case 67:
                  _loc3_ = Settings.selectedConfiguration;
                  if(_loc3_ == 1)
                  {
                     this.selectConfiguration(2);
                     break;
                  }
                  if(_loc3_ == 2)
                  {
                     this.selectConfiguration(1);
                  }
                  break;
               case 76:
                  _loc2_ = this.map.getMain().getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_LOGOUT);
                  if(!_loc2_.isLocked())
                  {
                     _loc2_.maximize();
                  }
                  break;
               case 72:
                  this.map.getMain().getGuiManager().toggleHUD();
                  break;
               case 70:
                  this.map.getMain().getGuiManager().toggleDebugView();
                  break;
               case 187:
               case 107:
                  this.map.getMain().screenManager.increaseMapScale();
                  break;
               case 189:
               case 109:
                  this.map.getMain().screenManager.decreaseMapScale();
            }
         }
      }
      
      private function onMouseOverTimer(param1:TimerEvent) : void
      {
         var _loc3_:Sprite = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         if(this.controlsLocked)
         {
            return;
         }
         var _loc2_:Ship = this.map.getShipManager().getHero();
         if(_loc2_ != null)
         {
            _loc3_ = this.map.getMain().screenManager.getStaticContainer();
            _loc4_ = _loc3_.mouseX - this.halfScreenWidth + _loc2_.x;
            _loc5_ = _loc3_.mouseY - this.halfScreenHeight + _loc2_.y;
            if(this.map.getShipManager().mouseOverTest(_loc4_,_loc5_) || this.map.getCollectableManager().mouseOverTest(_loc4_,_loc5_))
            {
               _loc3_.useHandCursor = true;
               _loc3_.buttonMode = true;
            }
            else
            {
               _loc3_.buttonMode = false;
               _loc3_.useHandCursor = false;
            }
         }
      }
      
      public function isControlsLocked() : Boolean
      {
         return this.controlsLocked;
      }
      
      public function get heroLockToTarget() : MapObject
      {
         return this._lockedShip;
      }
      
      public function set heroLockToTarget(param1:MapObject) : void
      {
         this._lockedShip = param1;
      }
      
      private function genereateTestShips() : void
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:* = null;
         var _loc1_:int = 100000000;
         var _loc2_:int = 0;
         while(_loc2_ < 10)
         {
            _loc3_ = _loc2_ * 100;
            _loc4_ = 0;
            while(_loc4_ < 10)
            {
               _loc5_ = _loc4_ * 100;
               _loc6_ = "FB|C|" + _loc1_ + "|2|1||-=[ Streuner ]=-|" + _loc5_ + "|" + _loc3_ + "|0|0|0|0|0|0|0|1|0|1";
               this.map.getMain().getConnectionManager().sendRawCommand(_loc6_);
               _loc1_++;
               _loc4_++;
            }
            _loc2_++;
         }
      }
   }
}

package net.bigpoint.darkorbit
{
   import flash.external.ExternalInterface;
   import net.bigpoint.darkorbit.data.RankedHuntingEventData;
   import net.bigpoint.darkorbit.gui.CPUItem;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.menu.TopMenu;
   import net.bigpoint.darkorbit.pattern.OrePattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.RepairInfo;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class Hero
   {
      
      public static var username:String;
      
      public static var userID:int;
      
      public static var sessionID:String;
      
      public static var rankedHuntingEventData:RankedHuntingEventData;
      
      public static var creditsAmount:Number;
      
      public static var uridiumAmount:Number;
      
      public static var jackpotAmount:Number;
      
      public static var maxLaserCapacity:Number;
      
      public static var maxRocketCapacity:Number;
      
      public static var experiencePoints:Number;
      
      public static var level:int;
      
      public static var honorPoints:Number;
      
      public static var premium:Boolean;
      
      public static var admin:Boolean;
      
      public static var inTradeArea:Boolean;
      
      public static var inJumpArea:Boolean;
      
      public static var demilitarizedZone:Boolean;
      
      public static var showSkinShieldRandomly:Boolean;
      
      public static var repairInfo:RepairInfo;
      
      public static var isKilled:Boolean;
      
      public static var jumpVouchersAmount:int;
      
      public static var bootyKeysAmount:Number;
      
      public static var clan:String = "noclan";
      
      public static var factionID:int = 0;
      
      public static var laserBatteryAmounts:Array = [];
      
      public static var rocketAmounts:Array = [];
      
      public static var explosiveAmounts:Array = [];
      
      public static var fireworksAmounts:Array = [];
      
      public static var cpuItems:Array = [];
      
      public static var skills:Array = [];
      
      public static var repairSkillId:int = -1;
      
      public static var minSkinShieldTwinkle:int = 10;
      
      public static var maxSkinShieldTwinkle:int = 100;
      
      public function Hero()
      {
         super();
      }
      
      public static function setInTradeArea(param1:Boolean, param2:Main) : void
      {
         var _loc5_:GuiManager = null;
         var _loc6_:SimpleWindow = null;
         var _loc7_:TopMenu = null;
         var _loc3_:Boolean = inTradeArea;
         var _loc4_:CPUItem = Hero.cpuItems[CPUItem.TYPE_HM7];
         if(_loc4_ != null)
         {
            param1 = true;
         }
         inTradeArea = param1;
         if(inTradeArea)
         {
            if(Settings.JS_EVENT_TRACKING_ENABLED && _loc3_ != inTradeArea)
            {
               if(ExternalInterface.available)
               {
                  ExternalInterface.call("clientEvent","tradePossible");
               }
            }
         }
         else
         {
            if(Settings.JS_EVENT_TRACKING_ENABLED && _loc3_ != inTradeArea)
            {
               if(ExternalInterface.available)
               {
                  ExternalInterface.call("clientEvent","tradeNotPossible");
               }
            }
            _loc5_ = param2.getGuiManager();
            _loc6_ = _loc5_.getWindow(SimpleWindow.WINDOW_CLASS_TRADE);
            if(_loc6_ != null && _loc6_.isMaximized())
            {
               _loc6_.minimize();
            }
         }
         _loc5_ = param2.getGuiManager();
         if(_loc5_ != null)
         {
            _loc7_ = _loc5_.getTopMenu();
            if(_loc7_ != null)
            {
               _loc7_.setWindowAccess(SimpleWindow.WINDOW_CLASS_TRADE,inTradeArea);
            }
         }
      }
      
      public static function setInJumpArea(param1:Boolean) : void
      {
         var _loc2_:Boolean = inJumpArea;
         inJumpArea = param1;
         if(Settings.JS_EVENT_TRACKING_ENABLED && _loc2_ != inJumpArea)
         {
            if(inJumpArea)
            {
               if(ExternalInterface.available)
               {
                  ExternalInterface.call("clientEvent","jumpPossible");
               }
            }
            else if(ExternalInterface.available)
            {
               ExternalInterface.call("clientEvent","jumpNotPossible");
            }
         }
      }
      
      public static function setDemilitarizedZone(param1:Boolean, param2:Main) : void
      {
         demilitarizedZone = param1;
         if(demilitarizedZone)
         {
            param2.getGuiManager().displayNAZ(true);
            if(param2.getProfiler().isNotificationInQueue)
            {
               param2.getProfiler().showNotification();
            }
         }
         else
         {
            param2.getGuiManager().displayNAZ(false);
         }
      }
      
      public static function getOres(param1:Array) : Array
      {
         var _loc4_:int = 0;
         var _loc5_:OrePattern = null;
         var _loc2_:Array = [];
         var _loc3_:int = 0;
         while(_loc3_ < param1.length)
         {
            _loc4_ = int(param1[_loc3_]);
            _loc5_ = PatternManager.orePatterns[_loc4_];
            _loc2_.push(_loc5_);
            _loc3_++;
         }
         return _loc2_;
      }
   }
}

package net.bigpoint.darkorbit
{
   public interface ICommandLogTarget
   {
      
      function writeOutput(param1:String) : void;
      
      function initOutput(param1:String) : void;
      
      function passFullInCommand(param1:String) : void;
   }
}

package net.bigpoint.darkorbit
{
   import com.bigpoint.utils.BPLocale;
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.combat.RocketPattern;
   import net.bigpoint.darkorbit.config.items.SysItem;
   
   public class InGameCatalog
   {
      
      private static var _instance:InGameCatalog;
      
      public var mapNames:Array;
      
      private var _ship_names:Array;
      
      private var _npc_names:Array;
      
      private var _ore_names:Array;
      
      private var _factions_names:Array;
      
      private var _damage_types:Array;
      
      public var rocketNames:Array;
      
      public var batteryNames:Array;
      
      private var _explosive_names:Array;
      
      private var _robot_names:Array;
      
      private var _jump_cpu_names:Array;
      
      private var _trade_cpu_names:Array;
      
      public var dronerepair_cpu_names:Array;
      
      private var _aim_cpu_names:Array;
      
      private var _arol_cpu_names:Array;
      
      private var _rllbCpuNames:Array;
      
      public var cloak_cpu_names:Array;
      
      public var boosterNames:Array;
      
      private var _npc_icons:Array;
      
      private var _ship_icons:Array;
      
      public var rocketLauncherNames:Array = [];
      
      public var advancedJumpCPUNames:Array = [];
      
      private var _ore_icons:Array;
      
      public var sysItems:Dictionary;
      
      public function InGameCatalog(param1:Function)
      {
         super();
         this._damage_types = [];
         this._damage_types[0] = "any";
         this._damage_types[1] = "laser";
         this._damage_types[2] = "rocket";
         this._damage_types[3] = "mine";
         this._damage_types[4] = "radiation";
         this._damage_types[5] = "direct";
         this.mapNames = ["","1-1","MW-1","MW-PVP","1-4","2-1","2-2","2-3","2-4","3-1","3-2","3-3","3-4","4-1","4-2","4-3","4-4","1-5","1-6","1-7","1-8","2-5","2-6","2-7","2-8","3-5","3-6","3-7","3-8","4-5"];
         this.mapNames[42] = "???";
         this.mapNames[50] = "GG";
         this.mapNames[51] = "GG ";
         this.mapNames[52] = "GG ";
         this.mapNames[53] = "GG ";
         this.mapNames[54] = "GG NC";
         this.mapNames[55] = "GG ";
         this.mapNames[56] = "GG Orb";
         this.mapNames[57] = "GG Y4";
         this.mapNames[61] = "MMO Invasion";
         this.mapNames[62] = "EIC Invasion";
         this.mapNames[63] = "VRU Invasion";
         this.mapNames[64] = "MMO Invasion";
         this.mapNames[65] = "EIC Invasion";
         this.mapNames[66] = "VRU Invasion";
         this.mapNames[67] = "MMO Invasion";
         this.mapNames[68] = "EIC Invasion";
         this.mapNames[69] = "VRU Invasion";
         this.mapNames[81] = "TDM I";
         this.mapNames[82] = "TDM II";
         this.mapNames[91] = "5-1";
         this.mapNames[92] = "5-2";
         this.mapNames[93] = "5-3";
         this.mapNames[101] = "JP Final";
         this.mapNames[102] = "JP 1";
         this.mapNames[103] = "JP 2";
         this.mapNames[104] = "JP 3";
         this.mapNames[105] = "JP 4";
         this.mapNames[106] = "JP 5";
         this.mapNames[107] = "JP 6";
         this.mapNames[108] = "JP 7";
         this.mapNames[109] = "JP 8";
         this.mapNames[110] = "JP 9";
         this.mapNames[111] = "JP 10";
         this.mapNames[112] = "JP 11";
         this.mapNames[113] = "JP 12";
         this.mapNames[114] = "JP 13";
         this.mapNames[115] = "JP 14";
         this.mapNames[116] = "JP 15";
         this.mapNames[117] = "JP 16";
         this.mapNames[118] = "JP 17";
         this.mapNames[119] = "JP 18";
         this.mapNames[120] = "JP 19";
         this.mapNames[121] = "JP 20";
         this.mapNames[122] = "JP 21";
         this.mapNames[123] = "JP 22";
         this.mapNames[124] = "JP 23";
         this.mapNames[125] = "JP 24";
         this.mapNames[126] = "JP 25";
         this.mapNames[200] = "LoW";
         this.rocketLauncherNames[1] = "HST-1";
         this.rocketLauncherNames[2] = "HST-2";
         this.advancedJumpCPUNames[1] = "AJP-01";
         this._ore_names = [];
         this._ore_names[1] = BPLocale.getText("ore_prometium");
         this._ore_names[2] = BPLocale.getText("ore_endurium");
         this._ore_names[3] = BPLocale.getText("ore_terbium");
         this._ore_names[4] = BPLocale.getText("ore_xenomit");
         this._ore_names[11] = BPLocale.getText("ore_prometid");
         this._ore_names[12] = BPLocale.getText("ore_duranium");
         this._ore_names[13] = BPLocale.getText("ore_promerium");
         this._ore_names[14] = BPLocale.getText("ore_seprom");
         this._ore_names[15] = BPLocale.getText("ore_palladium");
         this._ore_icons = [];
         this._ore_icons[1] = "ore_1.png";
         this._ore_icons[2] = "ore_2.png";
         this._ore_icons[3] = "ore_3.png";
         this._factions_names = [];
         this._factions_names[1] = "MMO";
         this._factions_names[2] = "EIC";
         this._factions_names[3] = "VRU";
         this._ship_names = [];
         this._ship_names[1] = "Phoenix";
         this._ship_names[2] = "Yamato";
         this._ship_names[3] = "Leonov";
         this._ship_names[4] = "Defcom";
         this._ship_names[5] = "Liberator";
         this._ship_names[6] = "Piranha";
         this._ship_names[7] = "Nostromo";
         this._ship_names[8] = "Vengeance";
         this._ship_names[9] = "Bigboy";
         this._ship_names[10] = "Goliath";
         this._npc_names = [];
         this._npc_names[1] = "Streuner";
         this._npc_names[2] = "Lordakia";
         this._npc_names[3] = "Devolarium";
         this._npc_names[4] = "Mordon";
         this._npc_names[5] = "Sibelon";
         this._npc_names[6] = "Saimon";
         this._npc_names[7] = "Sibelonit";
         this._npc_names[8] = "Lordakium";
         this._npc_names[9] = "Kristallin";
         this._npc_names[10] = "Kristallon";
         this._npc_names[11] = "StreuneR";
         this._npc_names[12] = "Protegit";
         this._npc_names[13] = "Cubikon";
         this._npc_names[14] = "Boss Streuner";
         this._npc_names[15] = "Boss Lordakia";
         this._npc_names[16] = "Boss Mordon";
         this._npc_names[17] = "Boss Saimon";
         this._npc_names[18] = "Boss Devolarium";
         this._npc_names[19] = "Boss Sibelonit";
         this._npc_names[20] = "Boss Sibelon";
         this._npc_names[21] = "Boss Lordakium";
         this._npc_names[22] = "Boss Kristallin";
         this._npc_names[23] = "Boss Kristallon";
         this._npc_names[24] = "Boss StreuneR";
         this._npc_names[25] = "UFO";
         this._npc_names[26] = "UFONIT";
         this._npc_names[27] = "Aggro-Streuner";
         this._npc_names[28] = "UberStreuner";
         this._npc_names[29] = "UberLordakia";
         this._npc_names[30] = "UberMordon";
         this._npc_names[31] = "UberSaimon";
         this._npc_names[32] = "UberDevolarium";
         this._npc_names[33] = "UberSibelonit";
         this._npc_names[34] = "UberSibelon";
         this._npc_names[35] = "UberLordakium";
         this._npc_names[36] = "UberKristallin";
         this._npc_names[37] = "UberKristallon";
         this._npc_names[38] = "UberStreuneR";
         this._npc_names[39] = "Demaner";
         this._npc_names[40] = "Kucurbium";
         this._npc_names[41] = "BossKucurbium";
         this._npc_names[42] = "Vagrant";
         this._npc_names[43] = "Marauder";
         this._npc_names[44] = "Outcast";
         this._npc_names[45] = "Corsair";
         this._npc_names[46] = "Hooligan";
         this._npc_names[47] = "Ravager";
         this._npc_names[48] = "Convict";
         this._npc_names[49] = "Century Falcon";
         this._npc_names[50] = "Unidentified Destroyer";
         this._npc_names[51] = "Unidentified Dreadnought";
         this._npc_names[52] = "Cubikon";
         this._npc_names[53] = "Protegit";
         this._npc_names[54] = "Ice Meteoroid";
         this._npc_names[55] = "Super Ice Meteoroid";
         this._npc_names[56] = "Icy";
         this._npc_names[57] = "1100101";
         this._npc_names[58] = "Interceptor";
         this._npc_names[59] = "Barracuda";
         this._npc_names[60] = "Saboteur";
         this._npc_names[61] = "Annihilator";
         this._npc_names[62] = "Battleray";
         this._ship_icons = [];
         this._ship_icons[0] = "ship_0";
         this._ship_icons[1] = "ship_1";
         this._ship_icons[2] = "ship_2";
         this._ship_icons[3] = "ship_3";
         this._ship_icons[4] = "ship_4";
         this._ship_icons[5] = "ship_5";
         this._ship_icons[6] = "ship_6";
         this._ship_icons[7] = "ship_7";
         this._ship_icons[8] = "ship_8";
         this._ship_icons[9] = "ship_9";
         this._ship_icons[10] = "ship_10";
         this._ship_icons[30] = "ship_3";
         this._ship_icons[50] = "ship_9";
         this._ship_icons[52] = "ship_10";
         this._ship_icons[53] = "ship_10";
         this._ship_icons[54] = "ship_10";
         this._ship_icons[55] = "ship_10";
         this._ship_icons[56] = "ship_10";
         this._ship_icons[57] = "ship_10";
         this._ship_icons[58] = "ship_8";
         this._ship_icons[59] = "ship_10";
         this._ship_icons[60] = "ship_8";
         this._ship_icons[61] = "ship_10";
         this._ship_icons[62] = "ship_10";
         this._ship_icons[63] = "ship_10";
         this._ship_icons[64] = "ship_10";
         this._ship_icons[65] = "ship_10";
         this._ship_icons[66] = "ship_10";
         this._ship_icons[67] = "ship_10";
         this._npc_icons = [];
         this._npc_icons[1] = "ship_2";
         this._npc_icons[2] = "npc_71";
         this._npc_icons[3] = "npc_72";
         this._npc_icons[4] = "npc_73";
         this._npc_icons[5] = "npc_74";
         this._npc_icons[6] = "npc_75";
         this._npc_icons[7] = "npc_76";
         this._npc_icons[8] = "npc_77";
         this._npc_icons[9] = "npc_78";
         this._npc_icons[10] = "npc_79";
         this._npc_icons[11] = "ship_4";
         this._npc_icons[12] = "npc_81";
         this._npc_icons[13] = "npc_80";
         this._npc_icons[14] = "ship_2";
         this._npc_icons[15] = "npc_71";
         this._npc_icons[16] = "npc_73";
         this._npc_icons[17] = "npc_75";
         this._npc_icons[18] = "npc_72";
         this._npc_icons[19] = "npc_76";
         this._npc_icons[20] = "npc_74";
         this._npc_icons[21] = "npc_77";
         this._npc_icons[22] = "npc_78";
         this._npc_icons[23] = "npc_79";
         this._npc_icons[24] = "ship_4";
         this._npc_icons[25] = "ship_0";
         this._npc_icons[26] = "ship_0";
         this._npc_icons[27] = "ship_2";
         this._npc_icons[28] = "ship_2";
         this._npc_icons[29] = "npc_71";
         this._npc_icons[30] = "npc_73";
         this._npc_icons[31] = "npc_75";
         this._npc_icons[32] = "npc_72";
         this._npc_icons[33] = "npc_76";
         this._npc_icons[34] = "npc_74";
         this._npc_icons[35] = "npc_77";
         this._npc_icons[36] = "npc_78";
         this._npc_icons[37] = "npc_79";
         this._npc_icons[38] = "ship_4";
         this._npc_icons[39] = "npc_unknown_placeholder";
         this._npc_icons[40] = "npc_unknown_placeholder";
         this._npc_icons[41] = "npc_unknown_placeholder";
         this._npc_icons[42] = "npc_unknown_placeholder";
         this._npc_icons[43] = "npc_unknown_placeholder";
         this._npc_icons[44] = "npc_unknown_placeholder";
         this._npc_icons[45] = "npc_unknown_placeholder";
         this._npc_icons[46] = "npc_unknown_placeholder";
         this._npc_icons[47] = "npc_unknown_placeholder";
         this._npc_icons[48] = "npc_unknown_placeholder";
         this._npc_icons[49] = "npc_unknown_placeholder";
         this._npc_icons[50] = "npc_100";
         this._npc_icons[51] = "npc_99";
         this._npc_icons[52] = "npc_80";
         this._npc_icons[53] = "npc_81";
         this._npc_icons[54] = "npc_101";
         this._npc_icons[55] = "npc_101";
         this._npc_icons[56] = "npc_103";
         this._npc_icons[57] = "npc_104";
         this._npc_icons[58] = "npc_pirate_category";
         this._npc_icons[59] = "npc_pirate_category";
         this._npc_icons[60] = "npc_pirate_category";
         this._npc_icons[61] = "npc_pirate_category";
         this._npc_icons[62] = "npc_pirate_category";
         this.batteryNames = [];
         this.batteryNames[1] = "LCB-10";
         this.batteryNames[2] = "MCB-25";
         this.batteryNames[3] = "MCB-50";
         this.batteryNames[4] = "UCB-100";
         this.batteryNames[5] = "SAB-50";
         this.batteryNames[6] = "RSB-75";
         this.rocketNames = [];
         this.rocketNames[RocketPattern.R310] = "R-310";
         this.rocketNames[RocketPattern.PLT_2026] = "PLT-2026";
         this.rocketNames[RocketPattern.PLT_2021] = "PLT-2021";
         this.rocketNames[RocketPattern.PLT_3030] = "PLT-3030";
         this.rocketNames[RocketPattern.PLD_8] = "PLD-8";
         this.rocketNames[RocketPattern.DCR_250] = "DCR-250";
         this.rocketNames[RocketPattern.WIZ] = "WIZ-X";
         this.rocketNames[RocketPattern.HSTRM01] = "HSTRM-01";
         this.rocketNames[RocketPattern.UBR100] = "UBR-100";
         this.rocketNames[RocketPattern.ECO10] = "ECO-10";
         this._explosive_names = [];
         this._explosive_names[1] = "ACM-01";
         this._explosive_names[2] = "SMB-01";
         this._explosive_names[3] = "ISH-01";
         this._explosive_names[4] = "EMP-01";
         this._explosive_names[5] = "FWX-S";
         this._explosive_names[6] = "FWX-M";
         this._explosive_names[7] = "FWX-L";
         this._explosive_names[8] = "EMPM-01";
         this._explosive_names[9] = "SABM-01";
         this._explosive_names[10] = "DDM-01";
         this._robot_names = [];
         this._robot_names[1] = "REP-1";
         this._robot_names[2] = "REP-2";
         this._robot_names[3] = "REP-3";
         this._robot_names[4] = "REP-4";
         this._robot_names[9] = "REP-S";
         this._jump_cpu_names = [];
         this._jump_cpu_names[1] = "JP-01";
         this._jump_cpu_names[2] = "JP-02";
         this._arol_cpu_names = [];
         this._arol_cpu_names[1] = "AROL-X";
         this._rllbCpuNames = [];
         this._rllbCpuNames[1] = "RL-LB1";
         this.cloak_cpu_names = [];
         this.cloak_cpu_names[1] = "CL04K";
         this.cloak_cpu_names[2] = "CL04K XL";
         this._aim_cpu_names = [];
         this._aim_cpu_names[1] = "AIM-01";
         this._aim_cpu_names[2] = "AIM-02";
         this._trade_cpu_names = [];
         this._trade_cpu_names[1] = "HM7";
         this.dronerepair_cpu_names = [];
         this.dronerepair_cpu_names[1] = "DR001";
         this.dronerepair_cpu_names[2] = "DR002";
         this.boosterNames = [];
         this.boosterNames[1] = "XP-B01";
         this.boosterNames[2] = "HON-B01";
         this.boosterNames[3] = "DMG-B01";
         this.boosterNames[4] = "SHD-B01";
         this.boosterNames[5] = "REP-B01";
         this.boosterNames[6] = "SREG-B01";
         this.boosterNames[7] = "RES-B01";
         this.boosterNames[8] = "HP-B01";
         this.boosterNames[9] = "NQR-B01";
         this.boosterNames[10] = "NBX-B01";
         this.boosterNames[11] = "XP-B02";
         this.boosterNames[12] = "HON-B02";
         this.boosterNames[13] = "DMG-B02";
         this.boosterNames[14] = "SHD-B02";
         this.boosterNames[15] = "REP-B02";
         this.boosterNames[16] = "SREG-B02";
         this.boosterNames[17] = "RES-B02";
         this.boosterNames[18] = "HP-B02";
         this.boosterNames[19] = "NQR-B02";
         this.boosterNames[20] = "NBX-B02";
         this.sysItems = new Dictionary();
         this.sysItems["ammunition_specialammo_emp-01"] = new SysItem("emp-01","EMP-01","ammunition.specialammo","emp");
         this.sysItems["resource_logfile"] = new SysItem("logfile","LOGFILE","resource.logfile","log-file");
         this.sysItems["equipment_extra_cpu_ajp-01"] = new SysItem("ajp-01","AJP-01","equipment.extra.cpu","jump-cpu");
         this.sysItems["equipment_extra_cpu_dr-01"] = new SysItem("dr-01","DR-01","equipment.extra.cpu","drone-repair-cpu");
         this.sysItems["equipment_extra_cpu_cl04k-m"] = new SysItem("cl04k-m","CL04K-M","equipment.extra.cpu","cloak-cpu");
         this.sysItems["equipment_extra_cpu_cl04k-xl"] = new SysItem("cl04k-xl","CL04K-XL","equipment.extra.cpu","cloak-cpu");
         this.sysItems["equipment_generator_speed_g3n-6900"] = new SysItem("g3n-6900","G3N-6900","equipment.generator.speed","speed-generator");
         this.sysItems["equipment_generator_speed_g3n-7900"] = new SysItem("g3n-7900","G3N-7900","equipment.generator.speed","speed-generator");
         this.sysItems["equipment_generator_shield_sg3n-b01"] = new SysItem("sg3n-b01","SG3N-B01","equipment.generator.shield","shield-generator");
         this.sysItems["equipment_generator_shield_sg3n-b02"] = new SysItem("sg3n-b02","SG3N-B02","equipment.generator.shield","shield-generator");
         this.sysItems["equipment_weapon_laser_lf-2"] = new SysItem("lf-2","LF-2","equipment.weapons.laser","laser");
         this.sysItems["equipment_weapon_laser_lf-3"] = new SysItem("lf-3","LF-3","equipment.weapons.laser","laser");
         this.sysItems["equipment_weapon_laser_lf-4"] = new SysItem("lf-4","LF-4","equipment.weapons.laser","laser");
         this.sysItems["ship_goliath_design_venom"] = new SysItem("venom","VENOM","ship.goliath.design","skill-design");
         this.sysItems["ship_goliath_design_solace"] = new SysItem("solace","SOLACE","ship.goliath.design","skill-design");
         this.sysItems["ship_goliath_design_spectrum"] = new SysItem("spectrum","SPECTRUM","ship.goliath.design","skill-design");
         this.sysItems["ship_goliath_design_diminisher"] = new SysItem("diminsher","DIMINISHER","ship.goliath.design","skill-design");
         this.sysItems["ship_goliath_design_sentinel"] = new SysItem("sentinel","SENTINEL","ship.goliath.design","skill-design");
         this.sysItems["ship_vengeance_design_adept"] = new SysItem("adept","ADEPT","ship.vengeance.design","vengeance-design");
         this.sysItems["ship_vengeance_design_avenger"] = new SysItem("avenger","AVENGER","ship.vengeance.design","vengeance-design");
         this.sysItems["ship_vengeance_design_corsair"] = new SysItem("corsair","CORSAIR","ship.vengeance.design","vengeance-design");
         this.sysItems["ship_vengeance_design_lightning"] = new SysItem("lightning","LIGHTNING","ship.vengeance.design","vengeance-design");
         this.sysItems["ship_vengeance_design_revenge"] = new SysItem("revenge","REVENGE","ship.vengeance.design","vengeance-design");
         this.sysItems["ship_goliath_design_bastion"] = new SysItem("bastion","BASTION","ship.goliath.design","goliath-design");
         this.sysItems["ship_goliath_design_enforcer"] = new SysItem("enforcer","ENFORCER","ship.goliath.design","goliath-design");
         this.sysItems["ship_goliath_design_exalted"] = new SysItem("exalted","EXALTED","ship.goliath.design","goliath-design");
         this.sysItems["ship_goliath_design_veteran"] = new SysItem("veteran","VETERAN","ship.goliath.design","goliath-design");
         if(param1 !== hidden)
         {
            throw new Error("IngameCatalog is a Singleton and can only be accessed through ingameCatalog.getInstance()");
         }
      }
      
      private static function hidden() : void
      {
      }
      
      public static function get instance() : InGameCatalog
      {
         if(_instance == null)
         {
            _instance = new InGameCatalog(hidden);
         }
         return _instance;
      }
      
      public static function getInstance() : InGameCatalog
      {
         if(_instance == null)
         {
            _instance = new InGameCatalog(hidden);
         }
         return _instance;
      }
      
      public function get ship_names() : Array
      {
         return this._ship_names;
      }
      
      public function get npc_names() : Array
      {
         return this._npc_names;
      }
      
      public function get ore_names() : Array
      {
         return this._ore_names;
      }
      
      public function get ore_icons() : Array
      {
         return this._ore_icons;
      }
      
      public function get factions_names() : Array
      {
         return this._factions_names;
      }
      
      public function get damage_types() : Array
      {
         return this._damage_types;
      }
      
      public function get battery_types() : Array
      {
         return this.batteryNames;
      }
      
      public function get explosive_types() : Array
      {
         return this._explosive_names;
      }
      
      public function get robot_names() : Array
      {
         return this._robot_names;
      }
      
      public function get jump_cpu_names() : Array
      {
         return this._jump_cpu_names;
      }
      
      public function get trade_cpu_names() : Array
      {
         return this._trade_cpu_names;
      }
      
      public function get aim_cpu_names() : Array
      {
         return this._aim_cpu_names;
      }
      
      public function get arol_cpu_names() : Array
      {
         return this._arol_cpu_names;
      }
      
      public function get rllbCpuNames() : Array
      {
         return this._rllbCpuNames;
      }
      
      public function get npc_icons() : Array
      {
         return this._npc_icons;
      }
      
      public function set npc_icons(param1:Array) : void
      {
         this._npc_icons = param1;
      }
      
      public function get ship_icons() : Array
      {
         return this._ship_icons;
      }
      
      public function set ship_icons(param1:Array) : void
      {
         this._ship_icons = param1;
      }
   }
}

package net.bigpoint.darkorbit
{
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Quad;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.Sprite;
   import flash.events.TimerEvent;
   import flash.media.SoundChannel;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.audio.AudioManager;
   
   public class Interference extends Sprite
   {
      
      private var timer:Timer;
      
      private var background:Bitmap;
      
      private var barMask:Sprite;
      
      private var bar:Sprite;
      
      private var w:int;
      
      private var h:int;
      
      private var noiseChannel:SoundChannel;
      
      private var startAlpha:Number;
      
      public var updateInMsec:int = 50;
      
      public var diff:Number = 0.5;
      
      public var duration:Number = -1;
      
      public var playSound:Boolean = true;
      
      public var minFadeOutSec:int = 1;
      
      public var maxFadeOutSec:int = 6;
      
      public var minFadeInMsec:int = 20;
      
      public var maxFadeInMsec:int = 500;
      
      public var fadeOut:Boolean = true;
      
      public function Interference(param1:int, param2:int)
      {
         super();
         this.w = param1;
         this.h = param2;
      }
      
      private function handleTimer(param1:TimerEvent) : void
      {
         this.background.bitmapData.noise(Math.floor(1000 * Math.random()),0,255,7,true);
      }
      
      public function start() : void
      {
         this.startAlpha = alpha;
         this.background = new Bitmap(new BitmapData(this.w,this.h));
         this.addChild(this.background);
         this.barMask = new Sprite();
         this.barMask.graphics.beginFill(16777215);
         this.barMask.graphics.drawRect(0,0,this.w,this.h);
         this.addChild(this.barMask);
         this.bar = new Sprite();
         this.bar.graphics.beginFill(16777215);
         this.bar.graphics.drawRect(0,0,this.w,this.h / 4);
         this.bar.alpha = 0.5;
         this.addChild(this.bar);
         this.bar.mask = this.barMask;
         this.moveBar();
         if(this.fadeOut)
         {
            this.startFadeOut();
         }
         this.timer = new Timer(this.updateInMsec,0);
         this.timer.addEventListener(TimerEvent.TIMER,this.handleTimer);
         this.timer.start();
         if(this.playSound)
         {
            this.noiseChannel = AudioManager.playSoundEffect(42,true,true);
         }
         if(this.duration != -1)
         {
            TweenMax.delayedCall(this.duration,this.cleanup);
         }
      }
      
      private function fadeOutInterference() : void
      {
         if(this.noiseChannel != null)
         {
            AudioManager.removeLoop(this.noiseChannel);
         }
         TweenLite.to(this,0.25,{
            "alpha":this.startAlpha - this.diff,
            "onComplete":this.handleFadeOut
         });
      }
      
      private function handleFadeOut() : void
      {
         var _loc1_:int = Main.getRandomCount(this.minFadeInMsec,this.maxFadeInMsec);
         TweenMax.killDelayedCallsTo(this.fadeIn);
         TweenMax.delayedCall(_loc1_ / 1000,this.fadeIn);
      }
      
      private function fadeIn() : void
      {
         TweenLite.to(this,0.25,{
            "alpha":this.startAlpha,
            "onComplete":this.startFadeOut
         });
         if(this.playSound)
         {
            this.noiseChannel = AudioManager.playSoundEffect(42,true,true);
         }
      }
      
      private function startFadeOut() : void
      {
         var _loc1_:int = Main.getRandomCount(this.minFadeOutSec,this.maxFadeOutSec);
         TweenMax.killDelayedCallsTo(this.fadeOutInterference);
         TweenMax.delayedCall(_loc1_,this.fadeOutInterference);
      }
      
      private function moveBar() : void
      {
         this.bar.y = -this.bar.height;
         TweenLite.to(this.bar,4,{
            "ease":Quad.easeOut,
            "y":height,
            "onComplete":this.moveBar
         });
      }
      
      public function cleanup() : void
      {
         if(this.timer != null)
         {
            this.timer.stop();
            this.timer.removeEventListener(TimerEvent.TIMER,this.handleTimer);
         }
         if(parent != null && parent.contains(this))
         {
            parent.removeChild(this);
         }
         TweenMax.killTweensOf(this.bar);
         TweenMax.killDelayedCallsTo(this.fadeOutInterference);
         TweenMax.killDelayedCallsTo(this.fadeIn);
         if(this.noiseChannel != null)
         {
            AudioManager.removeLoop(this.noiseChannel);
         }
      }
   }
}

package net.bigpoint.darkorbit
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import mx.logging.ILogger;
   import mx.logging.Log;
   
   public class LazyLoadVO
   {
      
      private static var logger:ILogger = Log.getLogger("LazyLoadVO");
      
      public var callbackCompleteList:Array = [];
      
      public var callbackErrorList:Array = [];
      
      public var isLoaded:Boolean = false;
      
      private var resKey:String;
      
      public function LazyLoadVO(param1:String, param2:Function, param3:Function)
      {
         super();
         this.resKey = param1;
         this.addCompleteCallback(param2);
         this.addErrorCallback(param3);
      }
      
      public function load() : void
      {
         if(!ResourceManager.fileCollection.isLoaded(this.resKey))
         {
            ResourceManager.fileCollection.load(this.resKey,this.assetLoaded);
         }
      }
      
      public function assetLoaded(param1:SWFFinisher = null) : void
      {
         this.isLoaded = true;
         this.callAllCompleteCallbacks();
      }
      
      public function assetLoadError() : void
      {
         this.callAllErrorCallbacks();
      }
      
      public function callAllCompleteCallbacks() : void
      {
         var _loc1_:int = 0;
         while(_loc1_ < this.callbackCompleteList.length)
         {
            this.callbackCompleteList[_loc1_](null);
            _loc1_++;
         }
      }
      
      public function callAllErrorCallbacks() : void
      {
         var _loc1_:int = 0;
         while(_loc1_ < this.callbackErrorList.length)
         {
            this.callbackErrorList[_loc1_]();
            _loc1_++;
         }
      }
      
      public function addCompleteCallback(param1:Function) : void
      {
         this.callbackCompleteList.push(param1);
      }
      
      public function addErrorCallback(param1:Function) : void
      {
         this.callbackErrorList.push(param1);
      }
   }
}

package net.bigpoint.darkorbit
{
   import com.bigpoint.filecollection.event.FileCollectionEvent;
   import com.bigpoint.filecollection.event.FileCollectionFileLoadEvent;
   import com.bigpoint.filecollection.finish.FileCollectionFinisher;
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.BPLocaleEvent;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import com.greensock.plugins.DynamicPropsPlugin;
   import com.greensock.plugins.TweenPlugin;
   import com.soenkerohde.logging.SOSLoggingTarget;
   import flash.display.LoaderInfo;
   import flash.display.MovieClip;
   import flash.display.StageAlign;
   import flash.display.StageScaleMode;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.MouseEvent;
   import flash.external.ExternalInterface;
   import flash.filters.GlowFilter;
   import flash.geom.Rectangle;
   import flash.net.URLLoader;
   import flash.net.URLRequest;
   import flash.system.Security;
   import flash.system.System;
   import flash.text.AntiAliasType;
   import flash.text.Font;
   import flash.text.StyleSheet;
   import flash.text.TextField;
   import flash.ui.ContextMenu;
   import flash.ui.ContextMenuItem;
   import flash.utils.Dictionary;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.achievement.AchievementManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.collisionDetection.CollisionDetection;
   import net.bigpoint.darkorbit.groupsystem.GroupManager;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.InstantLogViewConfig;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.net.BaseAssembly;
   import net.bigpoint.darkorbit.net.ConnectionManager;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.PreloadPattern;
   import net.bigpoint.darkorbit.resolution.ResolutionPattern;
   import net.bigpoint.darkorbit.settings.Profiler;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.ShipPattern;
   import net.bigpoint.darkorbit.tdm.TDMManager;
   import net.bigpoint.darkorbit.version.Version;
   
   public class Main extends MovieClip
   {
      
      public static var gameXML:XML;
      
      public static var mapsXML:XML;
      
      public static var profileXML:XML;
      
      public static var css:StyleSheet;
      
      public static var helpLink:String;
      
      public static const version:String = Version.VALUE;
      
      public static var serverVersion:String = "Unknown";
      
      public static var answerToLife:int = 42;
      
      public static var drawClickRadius:Boolean = false;
      
      public static var showCross:Boolean = false;
      
      public static const useLaserPool:Boolean = false;
      
      public static const useCollectablePool:Boolean = false;
      
      public static const ENV_LOCAL_SERVER:int = 0;
      
      public static const ENV_DEV_SERVER:int = 1;
      
      public static const ENV_LIVE_SERVER:int = 2;
      
      public static var showBetaWindow:Boolean = false;
      
      public static const mouseEventsEnabled:Boolean = false;
      
      private static var fontEurostileFl:Class = Main_fontEurostileFl;
      
      private static var fontEurostileHeaFl:Class = Main_fontEurostileHeaFl;
      
      public static var MAX_LOADING_RETRIES:int = 4;
      
      Font.registerFont(fontEurostileFl);
      Font.registerFont(fontEurostileHeaFl);
      
      public var screenManager:ScreenManager;
      
      private var connectionManager:ConnectionManager;
      
      private var guiManager:GuiManager;
      
      private var questManager:QuestManager;
      
      private var tdmManager:TDMManager;
      
      private var _groupManager:GroupManager;
      
      public var achievementManager:AchievementManager;
      
      private var loadingItemIndex:Number = 0;
      
      private var profiler:Profiler;
      
      public var antStart:Boolean;
      
      private var preloader:MovieClip;
      
      private var progressBar:MovieClip;
      
      private var progressBarGlow:MovieClip;
      
      private var isLoadingKoreanPic:Boolean = false;
      
      private var progressBarTextField:TextField;
      
      private var environment:int;
      
      private var scheduledDisconnect:Boolean;
      
      private var _autoStartEnabled:Boolean;
      
      private var revisions:Dictionary = new Dictionary();
      
      private var appContextMenu:ContextMenu;
      
      public function Main()
      {
         super();
         BaseAssembly.setMain(this);
         CollisionDetection.registerStage(stage);
         TweenPlugin.activate([DynamicPropsPlugin]);
         this.stage.scaleMode = StageScaleMode.NO_SCALE;
         this.stage.align = StageAlign.TOP_LEFT;
         this.initLocaleProxy();
         BPLocale.setEntry("loadingClaim","LOADING");
         var _loc1_:InstantLogViewConfig = new InstantLogViewConfig();
         _loc1_.y = 16;
         _loc1_.width = 200;
         _loc1_.maxEntries = 4;
         _loc1_.displayTime = 5;
         Settings.instantLogViewConfig = _loc1_;
         this.environment = ENV_LIVE_SERVER;
         stage.stageFocusRect = false;
         this.screenManager = new ScreenManager(this);
         this.parseFlashvars();
         this.createContextmenu();
      }
      
      public static function parseBooleanFromInt(param1:int) : Boolean
      {
         if(param1 == 0)
         {
            return false;
         }
         return true;
      }
      
      public static function parseBooleanFromString(param1:String) : Boolean
      {
         if(param1 == "true")
         {
            return true;
         }
         return false;
      }
      
      public static function fatalError(param1:String) : void
      {
         if(ExternalInterface.available)
         {
            ExternalInterface.call("clientError",param1);
         }
         else
         {
            System.exit(0);
         }
      }
      
      public static function getRandomCount(param1:int, param2:int) : int
      {
         return param1 + Math.floor(Math.random() * (param2 - param1 + 1));
      }
      
      public static function removeCommaAtEnd(param1:String) : String
      {
         if(param1.length > 0)
         {
            if(param1.charAt(param1.length - 1) == ",")
            {
               return param1.substring(0,param1.length - 1);
            }
         }
         return param1;
      }
      
      private function continueInit() : void
      {
         var _loc1_:String = null;
         this.connectionManager = new ConnectionManager(this);
         if(!this.antStart)
         {
            _loc1_ = Settings.staticHost + Settings.basePath;
         }
         ResourceManager.init(_loc1_);
         AudioManager.init(this);
         this.guiManager = new GuiManager(this);
         this.achievementManager = new AchievementManager(this.guiManager);
         this.tdmManager = new TDMManager(this);
         stage.frameRate = 60;
         this.initLocale();
      }
      
      public function setScheduledDisconnect(param1:Boolean) : void
      {
         this.scheduledDisconnect = param1;
      }
      
      public function getScheduledDisconnect() : Boolean
      {
         return this.scheduledDisconnect;
      }
      
      private function initLocaleProxy() : void
      {
         var _loc1_:Dictionary = new Dictionary();
         _loc1_["ttip_booty-key"] = "Booty Keys: %COUNT%";
         _loc1_["ttip_jump-vouchers_count"] = "Jump Vouchers: %COUNT%";
         _loc1_["msg_loot_harvest_init"] = "You started looting.";
         _loc1_["msg_loot_error_generic"] = "Looting cancelled.";
         _loc1_["msg_loot_error_hostile_attack"] = "Looting cancelled because you were attacked.";
         _loc1_["msg_loot_error_hero_attack"] = "Looting cancelled because you attacked someone.";
         _loc1_["msg_loot_error_hero_moved"] = "Looting cancelled because you moved.";
         _loc1_["log_msg_gather_skill-design_s"] = "You received a %TYPE%-Skill-Design.";
         _loc1_["log_msg_gather_design_s"] = "You received a %TYPE%-Design.";
         _loc1_["log_msg_gather_speed-generator_p"] = "You received %COUNT% %TYPE% speed generators.";
         BPLocale.initProxy(_loc1_);
      }
      
      private function initLocale() : void
      {
         BPLocale.language = Settings.language;
         BPLocale.host = Settings.dynamicHost;
         BPLocale.path = "flashinput/translationSpacemap.php?lang=%LANG%";
         BPLocale.addEventListener(BPLocaleEvent.LANGUAGELOADED,this.handleBPLocaleLanguageLoaded);
         BPLocale.addEventListener(BPLocaleEvent.LANGUAGE_LOADING_ERROR,this.handleBPLocaleLanguageLoadingError);
         BPLocale.load(this.environment);
      }
      
      private function handleBPLocaleLanguageLoadingError(param1:BPLocaleEvent) : void
      {
      }
      
      private function handleBPLocaleLanguageLoaded(param1:BPLocaleEvent) : void
      {
         BPLocale.setEntry("btn_label_bannerad_shipdesignGlory","Get it now for only %PRICE|SYMBOL%!");
         BPLocale.setEntry("title_hunter_of_the_day",BPLocale.getText("title_19"));
         BPLocale.setEntry("title_bounty_hunter",BPLocale.getText("title_20"));
         BPLocale.setEntry("log_msg_gather_extra-energy_s",BPLocale.getText("log_msg_gather_extra-energy_s_collected"));
         BPLocale.setEntry("log_msg_gather_extra-energy_p",BPLocale.getText("log_msg_gather_extra-energy_p_collected"));
         this.createContextmenu();
         this.loadGameXML();
      }
      
      private function loadGameXML() : void
      {
         var _loc1_:URLRequest = null;
         if(this.antStart)
         {
            _loc1_ = new URLRequest("xml/game.xml");
         }
         else
         {
            _loc1_ = new URLRequest(Settings.basePath + "xml/game.xml?__cv=" + this.revisions["gameXML"]);
         }
         var _loc2_:URLLoader = new URLLoader();
         _loc2_.addEventListener(Event.COMPLETE,this.handleGameXMLLoaded);
         _loc2_.addEventListener(IOErrorEvent.IO_ERROR,this.handleXMLLoadingError);
         _loc2_.load(_loc1_);
      }
      
      private function loadProfileXML() : void
      {
         var _loc1_:URLRequest = null;
         if(this.antStart)
         {
            _loc1_ = new URLRequest("xml/profile.xml");
         }
         else
         {
            _loc1_ = new URLRequest(Settings.basePath + "xml/profile.xml?__cv=" + this.revisions["profileXML"]);
         }
         var _loc2_:URLLoader = new URLLoader();
         _loc2_.addEventListener(Event.COMPLETE,this.handleProfileXMLLoaded);
         _loc2_.addEventListener(IOErrorEvent.IO_ERROR,this.handleXMLLoadingError);
         _loc2_.load(_loc1_);
      }
      
      private function loadResourceXML() : void
      {
         ResourceManager.fileCollection.addEventListener(FileCollectionEvent.RESOURCE_FILE_LOADED,this.handleResourceXMLLoaded);
         ResourceManager.fileCollection.addEventListener(FileCollectionEvent.RESOURCE_FILE_NOT_FOUND,this.handleResourceFileError);
         if(this.antStart)
         {
            ResourceManager.fileCollection.loadResourceFile("xml/resources.xml");
         }
         else
         {
            ResourceManager.fileCollection.loadResourceFile(Settings.basePath + "xml/resources.xml?__cv=" + this.revisions["resourcesXML"]);
         }
      }
      
      private function handleGameXMLLoaded(param1:Event) : void
      {
         var _loc3_:URLRequest = null;
         gameXML = new XML((param1.currentTarget as URLLoader).data);
         PatternManager.parsePatterns(gameXML);
         var _loc2_:ResolutionPattern = PatternManager.resolutionPatterns[Settings.resolutionID];
         this.screenManager.setScreenWidth(_loc2_.width);
         this.screenManager.setScreenHeight(_loc2_.height);
         TooltipControl.getInstance().setBounds(new Rectangle(0,0,_loc2_.width,_loc2_.height));
         this.screenManager.showSimpleMessage(BPLocale.getText("loadingClaim"),"quickloader");
         var _loc4_:String = "maps_dev.xml";
         if(this.environment != ENV_LOCAL_SERVER)
         {
            _loc4_ = "maps.php";
         }
         if(this.environment == ENV_LOCAL_SERVER)
         {
            _loc3_ = new URLRequest("xml/" + _loc4_);
         }
         else
         {
            _loc3_ = new URLRequest(Settings.dynamicHost + Settings.basePath + "xml/" + _loc4_);
         }
         var _loc5_:URLLoader = new URLLoader();
         _loc5_.addEventListener(Event.COMPLETE,this.handleMapsXMLLoaded);
         _loc5_.addEventListener(IOErrorEvent.IO_ERROR,this.handleXMLLoadingError);
         _loc5_.load(_loc3_);
      }
      
      private function handleMapsXMLLoaded(param1:Event) : void
      {
         mapsXML = new XML((param1.currentTarget as URLLoader).data);
         this.loadProfileXML();
      }
      
      private function handleResourceXMLLoaded(param1:FileCollectionEvent) : void
      {
         ResourceManager.fileCollection.load("splashscreen_0",this.handlePreloaderLoaded);
      }
      
      private function handleProfileXMLLoaded(param1:Event) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         profileXML = new XML((param1.currentTarget as URLLoader).data);
         if(profileXML.qualityLowLimit != "")
         {
            Profiler.QUALITY_LOW_LIMIT = int(profileXML.qualityLowLimit);
         }
         if(profileXML.intervalLength != "")
         {
            Profiler.INTERVAL_LENGTH = int(profileXML.intervalLength);
         }
         if(XMLList(profileXML.notificationSteps).length() > 0)
         {
            Profiler.NOTIFICATION_STEPS = [];
            for each(_loc2_ in profileXML.notificationSteps.notificationStep)
            {
               if(_loc2_.@value > 0)
               {
                  Profiler.NOTIFICATION_STEPS.push(int(_loc2_.@value));
               }
            }
         }
         this.loadResourceXML();
      }
      
      private function handlePreloaderLoaded(param1:SWFFinisher) : void
      {
         var _loc5_:TextField = null;
         var _loc2_:String = param1.fileVO.id;
         param1 = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc2_));
         this.preloader = param1.getEmbededMovieClip("splashscreen");
         var _loc3_:Array = ["splashscreen_text_movement","tf_movement","splashscreen_text_attack","tf_attack","splashscreen_text_collect","tf_collect"];
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_.length)
         {
            _loc5_ = this.preloader[_loc3_[_loc4_ + 1]];
            _loc5_.defaultTextFormat = Styles.h2Fmt;
            _loc5_.embedFonts = Styles.h2Embed;
            _loc5_.multiline = true;
            _loc5_.wordWrap = true;
            _loc5_.textColor = 16777215;
            _loc5_.antiAliasType = AntiAliasType.ADVANCED;
            _loc5_.text = BPLocale.getText(_loc3_[_loc4_]);
            _loc4_ += 2;
         }
         ResourceManager.fileCollection.load("progress_bar",this.handleProgressBarLoaded);
      }
      
      private function handleProgressBarLoaded(param1:SWFFinisher) : void
      {
         var _loc2_:PreloadPattern = null;
         var _loc3_:int = 0;
         this.progressBar = param1.getEmbededMovieClip("progress_bar");
         this.progressBarGlow = param1.getEmbededMovieClip("glow");
         this.progressBarGlow.gotoAndStop(1);
         this.progressBar.gotoAndStop(1);
         if(!this.isLoadingKoreanPic)
         {
            this.showPreloaderInsteadOfQuickLoader();
         }
         for each(_loc2_ in PatternManager.preloaderPatterns)
         {
            ResourceManager.fileCollection.load(_loc2_.getResKey(),this.handleMapIndependentFileLoaded,this.handleFileLoadError);
         }
         _loc3_ = 30;
         this.progressBarTextField = new TextField();
         this.progressBarTextField.defaultTextFormat = Styles.systemSplashFmt;
         this.progressBarTextField.embedFonts = Styles.systemSplashEmbed;
         this.progressBarTextField.width = this.progressBar.width;
         this.progressBarTextField.multiline = false;
         this.progressBarTextField.wordWrap = false;
         this.progressBarTextField.y = _loc3_;
         this.progressBarTextField.height = this.progressBar.height - _loc3_;
         this.progressBarTextField.textColor = 16751874;
         this.progressBarTextField.antiAliasType = "advanced";
         this.progressBarTextField.selectable = false;
         this.progressBarTextField.mouseEnabled = false;
         this.progressBar.addChild(this.progressBarTextField);
         this.progressBarTextField.text = BPLocale.getText("start_but");
         this.progressBarTextField.filters = [new GlowFilter(0,0.75,4,4,6,1)];
         this.preloader.addChild(this.progressBar);
         _loc3_ = 0;
         if(Settings.resolutionID == 5)
         {
            this.preloader["_background"].x = -292;
            this.preloader["_background"].y = -155;
            this.preloader["_logo"].x = 517;
            this.preloader["_logo"].y = -3.6;
            this.preloader["tf_movement"].x = 308;
            this.preloader["tf_movement"].y = 46;
            this.preloader["tf_attack"].x = 367;
            this.preloader["tf_attack"].y = 235;
            this.preloader["tf_collect"].x = 212;
            this.preloader["tf_collect"].y = 418;
            _loc3_ = 48;
         }
         else if(Settings.resolutionID == 3)
         {
            this.preloader["_background"].x = 0;
            this.preloader["_background"].y = -143;
            this.preloader["_logo"].x = 976;
            this.preloader["_logo"].y = 6;
            this.preloader["tf_movement"].x = 604;
            this.preloader["tf_movement"].y = 58;
            this.preloader["tf_attack"].x = 663;
            this.preloader["tf_attack"].y = 247;
            this.preloader["tf_collect"].x = 503;
            this.preloader["tf_collect"].y = 430;
            _loc3_ = 35;
         }
         else if(Settings.resolutionID == 2)
         {
            this.preloader["_background"].x = -112;
            this.preloader["_background"].y = -85;
            this.preloader["_logo"].x = 747;
            this.preloader["_logo"].y = 66;
            this.preloader["tf_movement"].x = 493;
            this.preloader["tf_movement"].y = 116;
            this.preloader["tf_attack"].x = 551;
            this.preloader["tf_attack"].y = 305;
            this.preloader["tf_collect"].x = 391;
            this.preloader["tf_collect"].y = 488;
            _loc3_ = 18;
         }
         else if(Settings.resolutionID == 1)
         {
            _loc3_ = 31;
            this.preloader["_background"].x = -112;
            this.preloader["_background"].y = -158;
            this.preloader["_logo"].x = 747;
            this.preloader["_logo"].y = -3.6;
            this.preloader["tf_movement"].x = 492;
            this.preloader["tf_movement"].y = 43;
            this.preloader["tf_attack"].x = 551;
            this.preloader["tf_attack"].y = 232;
            this.preloader["tf_collect"].x = 391;
            this.preloader["tf_collect"].y = 415;
            this.progressBar.scaleX = 0.7;
            this.progressBar.scaleY = 0.7;
         }
         else if(Settings.resolutionID == 0)
         {
            _loc3_ = 18;
            this.preloader["_background"].x = -242;
            this.preloader["_background"].y = -158;
            this.preloader["_logo"].x = 577;
            this.preloader["_logo"].y = -3.6;
            this.preloader["tf_movement"].x = 360;
            this.preloader["tf_movement"].y = 42;
            this.preloader["tf_attack"].x = 419;
            this.preloader["tf_attack"].y = 231;
            this.preloader["tf_collect"].x = 262;
            this.preloader["tf_collect"].y = 414;
            this.progressBar.scaleX = 0.7;
            this.progressBar.scaleY = 0.7;
         }
         var _loc4_:ResolutionPattern = PatternManager.resolutionPatterns[Settings.resolutionID];
         this.progressBar.x = _loc4_.width / 2 - this.progressBar.width / 2;
         this.progressBar.y = _loc4_.height;
         TweenLite.to(this.progressBar,0.5,{"y":_loc4_.height - this.progressBar.height + _loc3_});
      }
      
      private function showPreloaderInsteadOfQuickLoader() : void
      {
         if(this.preloader)
         {
            addChild(this.preloader);
            removeChild(getChildByName("quickloader"));
         }
      }
      
      private function handleMapIndependentFileLoaded(param1:FileCollectionFinisher) : void
      {
         if(++this.loadingItemIndex == PatternManager.preloaderPatterns.length)
         {
            if(this._autoStartEnabled)
            {
               this.initApplication();
            }
            else
            {
               this.progressBarTextField.text = BPLocale.getText("star_beginn");
               this.progressBar.addChild(this.progressBarGlow);
               this.progressBarGlow.gotoAndPlay(1);
               this.progressBar.buttonMode = true;
               this.progressBar.addEventListener(MouseEvent.CLICK,this.handleStartButtonClick);
            }
         }
         var _loc2_:int = this.loadingItemIndex / PatternManager.preloaderPatterns.length * 100;
         this.progressBar.gotoAndStop(_loc2_);
      }
      
      private function handleStartButtonClick(param1:MouseEvent) : void
      {
         this.initApplication();
      }
      
      private function initApplication() : void
      {
         ObjectPoolManager.precache();
         ObjectPoolManager.init();
         this.screenManager.init(this);
         this.progressBar.removeEventListener(MouseEvent.CLICK,this.handleStartButtonClick);
         this.removeChild(this.preloader);
         this.guiManager.saveReferenceUiResources(SWFFinisher(ResourceManager.fileCollection.getFinisher("ui")));
         this.guiManager.showConnectionWindow();
         this.connectionManager.connectToMap(Settings.mapID);
         this.checkSimpleShipVisualization();
         this.getGuiManager().prepareSpecialOffers();
         this.profiler = new Profiler(this);
      }
      
      private function checkSimpleShipVisualization() : void
      {
         var _loc1_:ShipPattern = null;
         for each(_loc1_ in PatternManager.shipPatterns)
         {
         }
      }
      
      private function handleResourceFileError(param1:FileCollectionEvent) : void
      {
      }
      
      private function handleFileLoadError(param1:FileCollectionFileLoadEvent) : void
      {
      }
      
      private function handleXMLLoadingError(param1:IOErrorEvent) : void
      {
      }
      
      private function createLogger() : void
      {
         var _loc1_:SOSLoggingTarget = new SOSLoggingTarget();
         _loc1_.server = "localhost";
         _loc1_.includeLevel = true;
         _loc1_.includeCategory = true;
         Log.addTarget(_loc1_);
      }
      
      private function parseFlashvars() : void
      {
         var key:String = null;
         var val:String = null;
         var flashvars:Object = null;
         var resolutionID:int = 0;
         var supportedResolutionIds:Array = null;
         var configRaw:Array = null;
         var logConfig:InstantLogViewConfig = null;
         var i:int = 0;
         try
         {
            flashvars = LoaderInfo(this.root.loaderInfo).parameters;
            for(key in flashvars)
            {
               val = String(flashvars[key]);
               switch(key)
               {
                  case "dynamicHost":
                     Settings.dynamicHost = "http://" + val + "/";
                     break;
                  case "userID":
                     Hero.userID = int(val);
                     break;
                  case "factionID":
                     Hero.factionID = int(val);
                     break;
                  case "sessionID":
                     Hero.sessionID = val;
                     break;
                  case "mapID":
                     Settings.mapID = int(val);
                     break;
                  case "basePath":
                     Settings.basePath = val;
                     if(Settings.basePath.charAt(Settings.basePath.length) != "/")
                     {
                        Settings.basePath += "/";
                     }
                     break;
                  case "cdn":
                     Settings.staticHost = val;
                     break;
                  case "lang":
                     Settings.language = val;
                     break;
                  case "pid":
                     Settings.projectID = int(val);
                     break;
                  case "antstart":
                     this.antStart = true;
                     this.environment = int(val);
                     break;
                  case "resolutionID":
                     resolutionID = int(val);
                     Settings.resolutionID = resolutionID;
                     Settings.lastResolutionID = resolutionID;
                     Settings.initialResolutionID = resolutionID;
                     break;
                  case "boardLink":
                     Settings.boardLink = val;
                     break;
                  case "helpLink":
                     helpLink = val;
                     break;
                  case "loadingClaim":
                     BPLocale.setEntry("loadingClaim",decodeURIComponent(flashvars[key]));
                     break;
                  case "localGS":
                     if(!(val.length == 0 || val == "0"))
                     {
                        if(val != "1")
                        {
                           Settings.defaultGameServer = val;
                        }
                        else
                        {
                           Settings.defaultGameServer = "localhost";
                        }
                     }
                     break;
                  case "chatHost":
                     Settings.chatHost = val;
                     Security.allowDomain(Settings.chatHost);
                     break;
                  case "supportedResolutions":
                     supportedResolutionIds = val.split(",");
                     PatternManager.supportedResolutionIds = [];
                     i = 0;
                     while(i < supportedResolutionIds.length)
                     {
                        PatternManager.supportedResolutionIds[parseInt(supportedResolutionIds[i])] = true;
                        i++;
                     }
                     break;
                  case "autoStartEnabled":
                     this._autoStartEnabled = Boolean(int(val));
                     break;
                  case "instantLogEnabled":
                     Settings.showInstantLog = Boolean(int(val));
                     break;
                  case "hpNumbersOnMapEnabled":
                     Settings.SHOW_HP_NUMBERS_ON_MAP = Boolean(int(val));
                     break;
                  case "jsEventTrackingEnabled":
                     Settings.JS_EVENT_TRACKING_ENABLED = Boolean(int(val));
                     break;
                  case "doubleClickAttackEnabled":
                     Settings.doubleclickAttackEnabled = Boolean(int(val));
                     break;
                  case "resourcesXmlHash":
                     this.revisions["resourcesXML"] = val;
                     break;
                  case "gameXmlHash":
                     this.revisions["gameXML"] = val;
                     break;
                  case "profileXmlHash":
                     this.revisions["profileXML"] = val;
                     break;
                  case "maxLoadingRetries":
                     Main.MAX_LOADING_RETRIES = int(val);
                     break;
                  case "logConfig":
                     configRaw = val.split(",");
                     logConfig = new InstantLogViewConfig();
                     logConfig.y = int(configRaw[0]);
                     logConfig.width = int(configRaw[1]);
                     logConfig.maxEntries = int(configRaw[2]);
                     logConfig.displayTime = int(configRaw[3]);
                     Settings.instantLogViewConfig = logConfig;
                     break;
                  case "allowChat":
                     Settings.createChat = Boolean(int(val));
               }
            }
            if(Settings.staticHost != null && Settings.staticHost.length > 0)
            {
               Security.allowDomain(Settings.staticHost);
            }
            else
            {
               Settings.staticHost = Settings.dynamicHost;
            }
            Security.allowDomain(Settings.dynamicHost);
            if(Hero.sessionID == null)
            {
               this.loadLocalConfig();
            }
            else
            {
               this.continueInit();
            }
         }
         catch(error:Error)
         {
         }
      }
      
      private function loadLocalConfig() : void
      {
         var _loc1_:URLRequest = new URLRequest("debugConfig.xml");
         var _loc2_:URLLoader = new URLLoader();
         _loc2_.addEventListener(Event.COMPLETE,this.handleConfigXmlLoaded);
         _loc2_.addEventListener(IOErrorEvent.IO_ERROR,this.handleConfigXmlLoadingError);
         _loc2_.load(_loc1_);
      }
      
      private function handleConfigXmlLoadingError(param1:IOErrorEvent) : void
      {
         fatalError("debugConfig.xml not found. Stop Application.");
      }
      
      private function handleConfigXmlLoaded(param1:Event) : void
      {
         var _loc2_:XML = XML(param1.currentTarget.data);
         var _loc3_:int = int(_loc2_.resolutionID);
         Settings.resolutionID = _loc3_;
         Settings.lastResolutionID = _loc3_;
         Settings.initialResolutionID = _loc3_;
         Hero.userID = int(_loc2_.userId);
         Settings.mapID = int(_loc2_.mapId);
         Hero.sessionID = _loc2_.sessionId;
         Settings.language = _loc2_.language;
         Settings.projectID = int(_loc2_.projectId);
         if(String(_loc2_.localGs) != "0")
         {
            if(String(_loc2_.localGs) != "1")
            {
               Settings.defaultGameServer = String(_loc2_.localGs);
            }
            else
            {
               Settings.defaultGameServer = "localhost";
            }
         }
         this.antStart = true;
         this.environment = int(_loc2_.serverEnv);
         Settings.dynamicHost = "http://" + _loc2_.dynamicHost + "/";
         Settings.basePath = _loc2_.basePath;
         if(Settings.basePath.charAt(Settings.basePath.length) != "/")
         {
            Settings.basePath += "/";
         }
         Settings.chatHost = _loc2_.chatHost;
         Security.allowDomain(Settings.chatHost);
         this._autoStartEnabled = Boolean(int(_loc2_.autostartEnabled));
         Settings.showInstantLog = Boolean(parseInt(_loc2_.instantlogEnabled));
         Settings.SHOW_HP_NUMBERS_ON_MAP = Boolean(parseInt(_loc2_.hpNumbersOnMapEnabled));
         var _loc4_:InstantLogViewConfig = new InstantLogViewConfig();
         _loc4_.y = parseInt(_loc2_.logConfigY);
         _loc4_.width = parseInt(_loc2_.logConfigWidth);
         _loc4_.maxEntries = parseInt(_loc2_.logConfigMaxEntries);
         _loc4_.displayTime = parseInt(_loc2_.logConfigDisplayTime);
         Settings.instantLogViewConfig = _loc4_;
         this.continueInit();
      }
      
      public function createMap(param1:int) : void
      {
         if(this.screenManager.map != null)
         {
            this.screenManager.map.cleanup();
         }
         else
         {
            this.screenManager.zoomOut(true);
         }
         this.screenManager.map = new Map(this,param1);
         this.screenManager.map.init();
         if(Settings.lastMapID != param1)
         {
            this.screenManager.showBigMessage(BPLocale.getText("map_map") + " " + this.screenManager.map.getName(),2,2);
         }
      }
      
      private function createContextmenu() : void
      {
         this.appContextMenu = new ContextMenu();
         this.removeDefaultMenuItems();
         this.addCustomMenuItems();
         this.contextMenu = this.appContextMenu;
      }
      
      private function removeDefaultMenuItems() : void
      {
         this.appContextMenu.hideBuiltInItems();
      }
      
      private function addCustomMenuItems() : void
      {
         var _loc1_:ContextMenuItem = new ContextMenuItem(BPLocale.getText("label_version").replace(/%VERSION%/,version));
         this.appContextMenu.builtInItems.quality = true;
         this.appContextMenu.customItems.push(_loc1_);
      }
      
      public function getConnectionManager() : ConnectionManager
      {
         return this.connectionManager;
      }
      
      public function getGuiManager() : GuiManager
      {
         return this.guiManager;
      }
      
      public function getProfiler() : Profiler
      {
         return this.profiler;
      }
      
      public function getQuestManager() : QuestManager
      {
         if(this.questManager == null)
         {
            this.questManager = new QuestManager(this);
         }
         return this.questManager;
      }
      
      public function getEnvironment() : int
      {
         return this.environment;
      }
      
      public function getTDMManager() : TDMManager
      {
         return this.tdmManager;
      }
      
      public function getGroupManager() : GroupManager
      {
         if(this._groupManager == null)
         {
            this._groupManager = new GroupManager(this);
         }
         return this._groupManager;
      }
   }
}

package net.bigpoint.darkorbit
{
   import mx.core.FontAsset;
   
   [Embed(source="/_assets/2_FontClass_10dfaeaf12a1_font0_net.bigpoint.darkorbit.Main_fontEurostileFl_EurostileFl.ttf",
   fontName="EurostileFl",
   fontFamily="EurostileT",
   mimeType="application/x-font",
   fontWeight="normal",
   fontStyle="normal",
   unicodeRange="U+0020-007E,U+00A1-0108,U+010A-0124,U+0126-0127,U+012A-012B,U+012D-0133,U+0136-014D,U+0150-0167,U+0169-016B,U+016D-0174,U+0176-017E,U+0192-0192,U+01CD-01CE,U+01D3-01D4,U+01E6-01E7,U+0218-0219,U+02BC-02BC,U+02C6-02C7,U+02C9-02C9,U+02D8-02DD,U+037E-037E,U+0384-038A,U+038C-038C,U+038E-03A1,U+03A3-03CE,U+03D1-03D2,U+03D5-03D5,U+0401-040C,U+040E-044F,U+0451-045C,U+045E-045F,U+0490-0491,U+04C0-04C0,U+1E84-1E84,U+2002-2003,U+2007-2007,U+200A-200A,U+2010-2015,U+2017-201A,U+201C-201E,U+2020-2022,U+2026-2026,U+2030-2030,U+2032-2033,U+2039-203A,U+203C-203C,U+203E-203E,U+2044-2044,U+2070-2070,U+2074-2079,U+207D-2089,U+20A3-20A4,U+20A7-20A7,U+20AC-20AC,U+2101-2101,U+2105-2105,U+2113-2113,U+2116-2116,U+2122-2122,U+2126-2126,U+2153-2154,U+215B-215E,U+2190-2195,U+21A8-21A8,U+2202-2202,U+2205-2206,U+220F-220F,U+2211-2212,U+2215-2215,U+2218-221A,U+221E-221F,U+2229-222B,U+222E-222E,U+2236-2236,U+223C-223C,U+2243-2243,U+2248-2248,U+2260-2261,U+2264-2265,U+22C5-22C5,U+2302-2302,U+2310-2310,U+2319-2319,U+2320-2321,U+2500-2500,U+2502-2502,U+250C-250C,U+2510-2510,U+2514-2514,U+2518-2518,U+251C-251C,U+2524-2524,U+252C-252C,U+2534-2534,U+253C-253C,U+2550-256C,U+2580-2580,U+2584-2584,U+2588-2588,U+258C-258C,U+2590-2593,U+25A0-25A1,U+25AA-25AC,U+25AE-25AF,U+25B2-25B5,U+25B8-25BA,U+25BC-25BC,U+25BE-25BF,U+25C2-25C4,U+25CA-25CB,U+25CF-25CF,U+25D8-25D9,U+25E6-25E6,U+2605-2605,U+263A-263C,U+2640-2642,U+2660-2660,U+2663-2663,U+2665-2666,U+266A-266C,U+EA21-EA21,U+EA31-EA32,U+EA3E-EA3F,U+EA4E-EA4F,U+EA66-EA6C,U+EA71-EA74,U+EAB9-EABA,U+EFED-EFEE,U+EFF1-EFF3,U+EFF5-EFF5,U+EFF7-EFF7,U+F001-F002,U+F6C9-F6CB,U+F6CE-F6D0,U+FB00-FB04",
   advancedAntiAliasing="true",
   embedAsCFF="false"
   )]
   public class Main_fontEurostileFl extends FontAsset
   {
      
      public function Main_fontEurostileFl()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit
{
   import mx.core.FontAsset;
   
   [Embed(source="/_assets/1_FontClass_10dfaeaf12a1_font1_net.bigpoint.darkorbit.Main_fontEurostileHeaFl_EurostileHeaFl.ttf",
   fontName="EurostileHeaFl",
   fontFamily="EurostileTHea",
   mimeType="application/x-font",
   fontWeight="normal",
   fontStyle="normal",
   unicodeRange="U+0020-007E,U+00A1-0108,U+010A-0124,U+0126-0127,U+012A-012B,U+012D-0133,U+0136-014D,U+0150-0167,U+0169-016B,U+016D-0174,U+0176-017E,U+0192-0192,U+01CD-01CE,U+01D3-01D4,U+01E6-01E7,U+0218-0219,U+02BC-02BC,U+02C6-02C7,U+02C9-02C9,U+02D8-02DD,U+037E-037E,U+0384-038A,U+038C-038C,U+038E-03A1,U+03A3-03CE,U+03D1-03D2,U+03D5-03D5,U+0401-040C,U+040E-044F,U+0451-045C,U+045E-045F,U+0490-0491,U+04C0-04C0,U+1E84-1E84,U+2002-2003,U+2007-2007,U+200A-200A,U+2010-2015,U+2017-201A,U+201C-201E,U+2020-2022,U+2026-2026,U+2030-2030,U+2032-2033,U+2039-203A,U+203C-203C,U+203E-203E,U+2044-2044,U+2070-2070,U+2074-2079,U+207D-2089,U+20A3-20A4,U+20A7-20A7,U+20AC-20AC,U+2101-2101,U+2105-2105,U+2113-2113,U+2116-2116,U+2122-2122,U+2126-2126,U+2153-2154,U+215B-215E,U+2190-2195,U+21A8-21A8,U+2202-2202,U+2205-2206,U+220F-220F,U+2211-2212,U+2215-2215,U+2218-221A,U+221E-221F,U+2229-222B,U+222E-222E,U+2236-2236,U+223C-223C,U+2243-2243,U+2248-2248,U+2260-2261,U+2264-2265,U+22C5-22C5,U+2302-2302,U+2310-2310,U+2319-2319,U+2320-2321,U+2500-2500,U+2502-2502,U+250C-250C,U+2510-2510,U+2514-2514,U+2518-2518,U+251C-251C,U+2524-2524,U+252C-252C,U+2534-2534,U+253C-253C,U+2550-256C,U+2580-2580,U+2584-2584,U+2588-2588,U+258C-258C,U+2590-2593,U+25A0-25A1,U+25AA-25AC,U+25AE-25AF,U+25B2-25B5,U+25B8-25BA,U+25BC-25BC,U+25BE-25BF,U+25C2-25C4,U+25CA-25CB,U+25CF-25CF,U+25D8-25D9,U+25E6-25E6,U+2605-2605,U+263A-263C,U+2640-2642,U+2660-2660,U+2663-2663,U+2665-2666,U+266A-266C,U+EA21-EA21,U+EA31-EA32,U+EA3E-EA3F,U+EA4E-EA4F,U+EA66-EA6C,U+EA71-EA74,U+EAB9-EABA,U+EFED-EFEE,U+EFF1-EFF3,U+EFF5-EFF5,U+EFF7-EFF7,U+F001-F002,U+F6C9-F6CB,U+F6CE-F6D0,U+FB00-FB04",
   advancedAntiAliasing="true",
   embedAsCFF="false"
   )]
   public class Main_fontEurostileHeaFl extends FontAsset
   {
      
      public function Main_fontEurostileHeaFl()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.MovieClip;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.collectable.CollectablePattern;
   import net.bigpoint.darkorbit.combat.ExplosionPattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.RocketSmokePattern;
   import net.bigpoint.darkorbit.ship.EngineSmokePattern;
   
   public class ObjectPoolManager
   {
      
      public static var engineSmokePool:Array = [];
      
      public static var rocketSmokePool:Array = [];
      
      public static var collectablePool:Array = [];
      
      public static var laserPool:Array = [];
      
      private static const ENGINESMOKE_POOL_SIZE:int = 2500;
      
      private static const ROCKETSMOKE_POOL_SIZE:int = 1000;
      
      public function ObjectPoolManager()
      {
         super();
      }
      
      public static function precache() : void
      {
         var _loc1_:Array = null;
         var _loc2_:Array = null;
         var _loc3_:CollectablePattern = null;
         var _loc4_:ExplosionPattern = null;
         for each(_loc1_ in PatternManager.collectableClasses)
         {
            for each(_loc3_ in _loc1_)
            {
               if(_loc3_.useBitmapClip && _loc3_.precache)
               {
                  new BitmapClip(ResourceManager.getMovieClip(_loc3_.getResKey(),"mc"),_loc3_.getResKey());
               }
            }
         }
         for each(_loc2_ in PatternManager.pyroClasses)
         {
            for each(_loc4_ in _loc2_)
            {
               if(_loc4_.useBitmapClip && _loc4_.precache)
               {
                  new BitmapClip(ResourceManager.getMovieClip(_loc4_.getResKey(),"mc"),_loc4_.getResKey());
               }
            }
         }
      }
      
      public static function init() : void
      {
         var _loc1_:EngineSmokePattern = null;
         var _loc2_:RocketSmokePattern = null;
         for each(_loc1_ in PatternManager.engineSmokePatterns)
         {
            createEngineSmokePool(_loc1_.resKey,ENGINESMOKE_POOL_SIZE);
         }
         for each(_loc2_ in PatternManager.rocketSmokePatterns)
         {
            createRocketSmokePool(_loc2_.resKey,ROCKETSMOKE_POOL_SIZE);
         }
      }
      
      public static function createEngineSmokePool(param1:String, param2:int) : void
      {
         var _loc5_:MovieClip = null;
         var _loc6_:BitmapClip = null;
         var _loc3_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(param1));
         var _loc4_:Array = new Array();
         var _loc7_:int = 0;
         while(_loc7_ < param2)
         {
            _loc5_ = MovieClip(_loc3_.getEmbededMovieClip("mc"));
            _loc6_ = new BitmapClip(_loc5_,param1);
            _loc4_.push(_loc6_);
            _loc7_++;
         }
         engineSmokePool[param1] = _loc4_;
      }
      
      public static function createLaserPool(param1:String, param2:int) : void
      {
         var _loc5_:MovieClip = null;
         var _loc3_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(param1));
         var _loc4_:Array = new Array();
         var _loc6_:int = 0;
         while(_loc6_ < param2)
         {
            _loc5_ = MovieClip(_loc3_.getEmbededMovieClip("mc"));
            _loc5_.gotoAndStop(1);
            _loc5_.mouseEnabled = false;
            _loc5_.mouseChildren = false;
            _loc4_.push(_loc5_);
            _loc6_++;
         }
         laserPool[param1] = _loc4_;
      }
      
      public static function createRocketSmokePool(param1:String, param2:int) : void
      {
         var _loc5_:MovieClip = null;
         var _loc6_:BitmapClip = null;
         var _loc3_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(param1));
         var _loc4_:Array = new Array();
         var _loc7_:int = 0;
         while(_loc7_ < param2)
         {
            _loc5_ = MovieClip(_loc3_.getEmbededMovieClip("mc"));
            _loc6_ = new BitmapClip(_loc5_,param1);
            _loc4_.push(_loc6_);
            _loc7_++;
         }
         rocketSmokePool[param1] = _loc4_;
      }
      
      public static function getRocketSmokeClip(param1:String) : BitmapClip
      {
         var _loc2_:Array = rocketSmokePool[param1];
         if(_loc2_ == null)
         {
            return null;
         }
         return _loc2_.pop();
      }
      
      public static function addRocketSmokeClip(param1:BitmapClip) : void
      {
         var _loc2_:Array = rocketSmokePool[param1.cacheID];
         _loc2_.push(param1);
      }
      
      public static function createCollectablePool(param1:String, param2:int) : void
      {
         var _loc6_:MovieClip = null;
         var _loc3_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(param1));
         var _loc4_:Array = new Array();
         var _loc5_:int = 0;
         while(_loc5_ < param2)
         {
            _loc6_ = MovieClip(_loc3_.getEmbededMovieClip("mc"));
            _loc6_.mouseEnabled = Main.mouseEventsEnabled;
            _loc6_.mouseChildren = Main.mouseEventsEnabled;
            _loc4_.push(_loc6_);
            _loc5_++;
         }
         collectablePool[param1] = _loc4_;
      }
   }
}

package net.bigpoint.darkorbit
{
   import com.bigpoint.utils.BPLocale;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.external.ExternalInterface;
   import flash.net.URLLoader;
   import flash.net.URLRequest;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.questfm.ICondition;
   import net.bigpoint.darkorbit.questfm.Quest;
   import net.bigpoint.darkorbit.questfm.QuestParser;
   import net.bigpoint.darkorbit.questfm.QuestStock;
   import net.bigpoint.darkorbit.questfm.QuestTree;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class QuestManager
   {
      
      public static const QUESTFM_INI_FMT_XML:String = "XML";
      
      public static const QUESTFM_INI_FMT_HOMEBREW:String = "DOHB";
      
      private static const logger:ILogger = Log.getLogger("QuestManager");
      
      private var questStock:QuestStock;
      
      private var _privilegedQuest:Quest;
      
      private var main:Main;
      
      private var parser:QuestParser;
      
      public var iniFormat:String = "DOHB";
      
      public function QuestManager(param1:Main)
      {
         super();
         this.main = param1;
         this.questStock = new QuestStock();
         this.parser = new QuestParser();
      }
      
      public function setQuestAccomplished(param1:int, param2:int) : void
      {
         var _loc3_:Quest = this.questStock.getQuestByID(param1);
         if(_loc3_ != null)
         {
            this.main.getGuiManager().writeToLog(BPLocale.getText("q2_accomplished_quest").replace(/%quest_name%/,_loc3_.title));
            if(ExternalInterface.available)
            {
               ExternalInterface.call("clientEvent","questCompleteFinished");
            }
            this.removeQuest(param1);
         }
      }
      
      public function setQuestFailed(param1:int) : void
      {
         var _loc2_:Quest = this.questStock.getQuestByID(param1);
         if(_loc2_ != null)
         {
            this.main.getGuiManager().writeToLog(BPLocale.getText("q2_failed_quest").replace(/%quest_name%/,_loc2_.title));
            this.removeQuest(param1);
         }
      }
      
      public function setQuestCancelled(param1:int) : void
      {
         var _loc2_:Quest = this.questStock.getQuestByID(param1);
         if(_loc2_ != null)
         {
            this.main.getGuiManager().writeToLog(BPLocale.getText("q2_cancelled_quest").replace(/%quest_name%/,_loc2_.title));
            this.removeQuest(param1);
         }
      }
      
      private function removeQuest(param1:int) : void
      {
         var _loc5_:Boolean = false;
         var _loc6_:int = 0;
         var _loc2_:Quest = this.questStock.getQuestByID(param1);
         if(_loc2_ != null)
         {
            if(this._privilegedQuest.id == param1)
            {
               _loc5_ = true;
            }
            this.questStock.deleteQuestByID(param1);
            if(_loc5_)
            {
               this.main.getGuiManager().clearQuestWindow();
               _loc6_ = this.questStock.getNextQuestID();
               if(_loc6_ >= 0)
               {
                  this.main.getConnectionManager().sendCommand(ServerCommands.QUESTFM_INFO,[ServerCommands.QUESTFM_PRIVILEGE_QUEST,_loc6_]);
               }
            }
            this.main.getGuiManager().removeQuestDot(param1);
         }
         var _loc3_:int = this.questStock.stock;
         var _loc4_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM);
         if(_loc3_ == 0)
         {
            if(_loc4_ != null)
            {
               QuestTree(_loc4_.getContainer(SimpleContainer.CLASS_QUEST_TREE)).isDefaultVisible = true;
            }
         }
         else if(_loc4_ != null)
         {
            QuestTree(_loc4_.getContainer(SimpleContainer.CLASS_QUEST_TREE)).isDefaultVisible = false;
         }
      }
      
      public function initQuest(param1:String, param2:String) : void
      {
         var _loc3_:Quest = this.parser.parse(new XML(param1));
         _loc3_.category = param2;
         this.requestTitle(_loc3_.id);
         this.setQuest(_loc3_,_loc3_.id);
         if(this._privilegedQuest == null)
         {
            this.privilegeQuestByID(_loc3_.id);
         }
         this.main.getGuiManager().addQuestDot(_loc3_.id);
      }
      
      public function setQuest(param1:Quest, param2:int) : void
      {
         this.questStock.addQuest(param1,param2);
      }
      
      public function getQuest(param1:int) : Quest
      {
         return this.questStock.getQuestByID(param1);
      }
      
      public function get privilegedQuest() : Quest
      {
         return this._privilegedQuest;
      }
      
      public function privilegeQuestByID(param1:int) : void
      {
         var _loc2_:Quest = this.questStock.getQuestByID(param1);
         if(_loc2_ != null && this._privilegedQuest != _loc2_)
         {
            this._privilegedQuest = _loc2_;
            this.main.getGuiManager().updateQuestWindow();
            this.main.getGuiManager().updateQuestDotList();
         }
      }
      
      public function updateQuest(param1:int, param2:int, param3:int, param4:int, param5:Boolean) : void
      {
         var _loc6_:Quest = this.questStock.getQuestByID(param1);
         _loc6_.updateCondition(param2,param3,param4,param5);
      }
      
      public function updateCondition(param1:int, param2:int, param3:int, param4:int, param5:Boolean) : void
      {
         var _loc8_:int = 0;
         var _loc9_:ICondition = null;
         var _loc6_:Quest = this.questStock.getQuestByID(param1);
         if(_loc6_ == null)
         {
            this.main.getConnectionManager().sendCommand(ServerCommands.QUESTFM_INFO,["g"]);
            return;
         }
         if(_loc6_.flatConditions[param2] == null)
         {
            return;
         }
         var _loc7_:ICondition = ICondition(_loc6_.flatConditions[param2]);
         _loc7_.current = param3;
         _loc7_.runstate = param5;
         _loc7_.visibility = param4;
         if(_loc7_.children.length > 0)
         {
            _loc8_ = 0;
            while(_loc8_ < _loc7_.children.length)
            {
               _loc9_ = _loc7_.children[_loc8_] as ICondition;
               _loc9_.runstate = param5;
               _loc9_.visibility = param4;
               _loc8_++;
            }
         }
         if(param1 == this._privilegedQuest.id)
         {
            this.main.getGuiManager().updateQuestConditionInWindow(param2);
         }
      }
      
      private function requestTitle(param1:int) : void
      {
         var _loc2_:String = Settings.dynamicHost + "flashinput/quest.php?action=questTitle&questCaseID=" + param1 + "&lang=" + Settings.language;
         var _loc3_:URLRequest = new URLRequest(_loc2_);
         var _loc4_:URLLoader = new URLLoader(_loc3_);
         _loc4_.addEventListener(Event.COMPLETE,this.handleTitleLoaded);
         _loc4_.addEventListener(IOErrorEvent.IO_ERROR,this.handleTitleLoadingError);
         _loc4_.load(_loc3_);
      }
      
      private function handleTitleLoadingError(param1:IOErrorEvent) : void
      {
      }
      
      private function handleTitleLoaded(param1:Event) : void
      {
         var questID:int;
         var affectedQuest:Quest;
         var titleResponse:XML = null;
         var event:Event = param1;
         try
         {
            titleResponse = new XML((event.target as URLLoader).data);
         }
         catch(e:Error)
         {
            return;
         }
         questID = parseInt(titleResponse.quest.@questCaseID);
         affectedQuest = this.questStock.getQuestByID(questID);
         if(affectedQuest != null)
         {
            affectedQuest.title = titleResponse.quest[0];
            if(questID == this._privilegedQuest.id)
            {
               this.main.getGuiManager().updateQuestTitle();
            }
         }
      }
   }
}

package net.bigpoint.darkorbit
{
   import com.bigpoint.filecollection.FileCollection;
   import com.bigpoint.filecollection.finish.ImageFinisher;
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.media.Sound;
   import mx.logging.ILogger;
   import mx.logging.Log;
   
   public class ResourceManager
   {
      
      public static var fileCollection:FileCollection;
      
      public static const logger:ILogger = Log.getLogger("ResourceManager");
      
      private static var lazyLoaderObjects:Array = [];
      
      public function ResourceManager()
      {
         super();
      }
      
      public static function init(param1:String = null) : void
      {
         fileCollection = new FileCollection(true);
         if(param1 != null)
         {
            fileCollection.filePrefix = param1;
         }
      }
      
      public static function getMovieClip(param1:String, param2:String) : MovieClip
      {
         if(SWFFinisher(fileCollection.getFinisher(param1)).hasEmbeddedObject(param2))
         {
            return SWFFinisher(fileCollection.getFinisher(param1)).getEmbededMovieClip(param2);
         }
         return null;
      }
      
      public static function getBitmap(param1:String, param2:String) : Bitmap
      {
         return SWFFinisher(fileCollection.getFinisher(param1)).getEmbededBitmap(param2);
      }
      
      public static function getBitmapData(param1:String, param2:String) : BitmapData
      {
         return SWFFinisher(fileCollection.getFinisher(param1)).getEmbededBitmapData(param2);
      }
      
      public static function getSound(param1:String, param2:String) : Sound
      {
         if(SWFFinisher(fileCollection.getFinisher(param1)).hasEmbeddedObject(param2))
         {
            return SWFFinisher(fileCollection.getFinisher(param1)).getEmbededSound(param2);
         }
         return null;
      }
      
      public static function getImage(param1:String) : DisplayObject
      {
         return ImageFinisher(fileCollection.getFinisher(param1)).getBitmap();
      }
      
      public static function lazyGetAsset(param1:String, param2:Function, param3:Function) : void
      {
         var _loc5_:LazyLoadVO = null;
         if(fileCollection.isLoaded(param1))
         {
            param2(fileCollection.getFinisher(param1));
            return;
         }
         var _loc4_:LazyLoadVO = lazyLoaderObjects[param1] as LazyLoadVO;
         if(_loc4_ != null)
         {
            _loc4_.addCompleteCallback(param2);
            _loc4_.addErrorCallback(param3);
            _loc4_.load();
         }
         else
         {
            _loc5_ = new LazyLoadVO(param1,param2,param3);
            _loc5_.load();
            lazyLoaderObjects[param1] = _loc5_;
         }
      }
   }
}

package net.bigpoint.darkorbit
{
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.TimerEvent;
   import flash.geom.Point;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import flash.utils.Timer;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.background.Background;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.planet.Planet;
   import net.bigpoint.darkorbit.resolution.ResolutionPattern;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   import net.bigpoint.darkorbit.starfield.Starfield;
   
   public class ScreenManager
   {
      
      public static var speedX:Number;
      
      public static var collisionDetection:Sprite;
      
      private static var windowLayer:Sprite;
      
      private static var screenWidth:int;
      
      private static var screenHeight:int;
      
      public static var halfScreenWidth:int;
      
      public static var halfScreenHeight:int;
      
      public static const logger:ILogger = Log.getLogger("ScreenManager");
      
      public static var TOP_OF_HERO:int = 0;
      
      public static var BOTTOM_OF_HERO:int = 1;
      
      public static const MASTER_SCREEN_WIDTH:int = 1280;
      
      public static const MASTER_SCREEN_HEIGHT:int = 900;
      
      public static var centerX:int = 640;
      
      public static var centerY:int = 450;
      
      public static var camera:Point = new Point();
      
      public static var lockedShipUserID:int = -1;
      
      public static var CAMERA_LOCKED_TO_HERO:int = 0;
      
      public static var CAMERA_TWEENING_TO_HERO:int = 1;
      
      public static var CAMERA_LOCKED_TO_SHIP:int = 2;
      
      public static var CAMERA_TWEENING_TO_SHIP:int = 3;
      
      public static var CAMERA_LOCKED_TO_COORDINATE:int = 4;
      
      public static var CAMERA_TWEENING_TO_COORDINATE:int = 5;
      
      public static var cameraLock:int = 0;
      
      private var movingContainer:Sprite;
      
      private var shipLayer:Sprite;
      
      private var petLayer:Sprite;
      
      private var heroLayer:Sprite;
      
      private var laserLayer:Sprite;
      
      private var main:Main;
      
      private var oldBgX:Number = 0;
      
      private var oldBgY:Number = 0;
      
      public var _mapScale:Number = 1;
      
      private var logBuffer:String;
      
      private var portalLayer:Sprite;
      
      private var lensflareLayer:Sprite;
      
      private var starfieldLayer:Sprite;
      
      private var explosionLayer:Sprite;
      
      private var _poizoneLayer:Sprite;
      
      private var _collectableLayer:Sprite;
      
      private var backgroundContainer:Sprite;
      
      private var backgroundLayers:Array = [];
      
      private var meteorLayers:Array = [];
      
      private var nebulaLayers:Array = [];
      
      private var _starfield:Starfield;
      
      public var staticContainer:Sprite;
      
      private var guiLayer0:Sprite;
      
      private var guiLayer1:Sprite;
      
      private var windowLayer2:Sprite;
      
      private var iconLayer:Sprite;
      
      private var _topmenuLayer:Sprite;
      
      private var _mainmenuLayer:Sprite;
      
      private var cnt:int;
      
      private var shakeTimer:Timer;
      
      private var shakeFactor:int = 5;
      
      private var _planets:Array;
      
      private var _hero:Ship;
      
      public var backgrounds:Vector.<Background>;
      
      private var _map:Map;
      
      private var lastStaticContainerPosition:Point = new Point();
      
      public var flashShape:Sprite;
      
      public function ScreenManager(param1:Main)
      {
         super();
         this.main = param1;
      }
      
      public static function getWindowLayer() : Sprite
      {
         return windowLayer;
      }
      
      public static function getScreenWidth() : int
      {
         return screenWidth;
      }
      
      public static function getScreenHeight() : int
      {
         return screenHeight;
      }
      
      public static function getHalfScreenWidth() : int
      {
         return halfScreenWidth;
      }
      
      public static function getHalfScreenHeight() : int
      {
         return halfScreenHeight;
      }
      
      public static function playAnimation(param1:DisplayObject, param2:int, param3:Boolean = false, param4:int = 1, param5:Boolean = true) : void
      {
         var _loc6_:int = 0;
         if(param1 is MovieClip)
         {
            _loc6_ = MovieClip(param1).framesLoaded;
            MovieClip(param1).gotoAndStop(param4);
         }
         else if(param1 is BitmapClip)
         {
            _loc6_ = BitmapClip(param1).framesLoaded;
            BitmapClip(param1).gotoAndStop(param4);
         }
         var _loc7_:Number = _loc6_ / param2;
         if(param3)
         {
            TweenLite.to(param1,_loc7_,{
               "ease":Linear.easeNone,
               "frame":_loc6_,
               "onComplete":playAnimation,
               "onCompleteParams":[param1,param2,param3]
            });
         }
         else if(param5)
         {
            TweenLite.to(param1,_loc7_,{
               "ease":Linear.easeNone,
               "frame":_loc6_,
               "onComplete":onRemoveDisplayObject,
               "onCompleteParams":[param1]
            });
         }
         else
         {
            TweenLite.to(param1,_loc7_,{
               "ease":Linear.easeNone,
               "frame":_loc6_
            });
         }
      }
      
      public static function stopAnimation(param1:DisplayObject) : void
      {
         TweenLite.killTweensOf(param1);
      }
      
      public static function fadeInClip(param1:Number, param2:DisplayObject) : void
      {
         TweenLite.to(param2,param1,{
            "ease":Linear.easeNone,
            "alpha":1
         });
      }
      
      public static function fadeOutClip(param1:Number, param2:DisplayObject) : void
      {
         TweenLite.to(param2,param1,{
            "ease":Linear.easeNone,
            "alpha":0,
            "onComplete":onRemoveDisplayObject,
            "onCompleteParams":[param2]
         });
      }
      
      public static function onRemoveDisplayObject(param1:DisplayObject) : void
      {
         if(param1.parent != null)
         {
            param1.parent.removeChild(param1);
         }
         TweenLite.killTweensOf(param1);
      }
      
      public function shakeScreen() : void
      {
         this.cnt = 40;
         this.shakeFactor = 5;
         if(this.shakeTimer != null && this.shakeTimer.running)
         {
            return;
         }
         this.shakeTimer = new Timer(25,0);
         this.shakeTimer.addEventListener(TimerEvent.TIMER,this.onTimerTick);
         this.shakeTimer.start();
      }
      
      private function onTimerTick(param1:TimerEvent) : void
      {
         if(this.staticContainer != null)
         {
            this.staticContainer.x = this.lastStaticContainerPosition.x + this.shakeFactor * Math.cos(this.cnt);
            this.staticContainer.y = this.lastStaticContainerPosition.y + this.shakeFactor * Math.sin(this.cnt);
            --this.cnt;
            if(this.cnt % 10 == 0)
            {
               --this.shakeFactor;
            }
            if(this.cnt < 0)
            {
               this.shakeTimer.stop();
               this.shakeTimer.removeEventListener(TimerEvent.TIMER,this.onTimerTick);
               this.staticContainer.x = this.lastStaticContainerPosition.x;
               this.staticContainer.y = this.lastStaticContainerPosition.y;
            }
         }
      }
      
      public function flashScreen(param1:uint, param2:Number = 0.4, param3:Number = 0.25, param4:Number = 0.75) : void
      {
         if(this.flashShape == null)
         {
            this.flashShape = new Sprite();
            this.flashShape.mouseEnabled = false;
            this.flashShape.mouseChildren = false;
            this.flashShape.graphics.beginFill(param1);
            this.flashShape.graphics.drawRect(0,0,screenWidth,screenHeight);
            this.flashShape.alpha = 0;
            this.main.addChild(this.flashShape);
            TweenLite.to(this.flashShape,param3,{
               "alpha":param2,
               "onComplete":this.handleColorScreen,
               "onCompleteParams":[param4]
            });
         }
      }
      
      private function handleColorScreen(param1:Number) : void
      {
         if(this.flashShape != null)
         {
            TweenLite.to(this.flashShape,param1,{
               "alpha":0,
               "onComplete":this.handleRemoveFlashShape
            });
         }
      }
      
      private function handleRemoveFlashShape() : void
      {
         if(this.flashShape != null)
         {
            if(this.main.contains(this.flashShape))
            {
               this.main.removeChild(this.flashShape);
            }
            this.flashShape = null;
         }
      }
      
      public function init(param1:Main) : void
      {
         var _loc3_:Sprite = null;
         var _loc4_:int = 0;
         this.main = param1;
         this.logBuffer = "";
         this.movingContainer = new Sprite();
         var _loc2_:int = int(Main.gameXML.patterns.nebulas.@layers);
         _loc4_ = 0;
         while(_loc4_ < _loc2_)
         {
            _loc3_ = new Sprite();
            this.nebulaLayers.push(_loc3_);
            this.movingContainer.addChild(_loc3_);
            _loc4_++;
         }
         this._poizoneLayer = new Sprite();
         this._poizoneLayer.mouseEnabled = Main.mouseEventsEnabled;
         this._poizoneLayer.mouseChildren = Main.mouseEventsEnabled;
         this.movingContainer.addChild(this._poizoneLayer);
         this.portalLayer = new Sprite();
         this.portalLayer.mouseEnabled = Main.mouseEventsEnabled;
         this.portalLayer.mouseChildren = Main.mouseEventsEnabled;
         this.movingContainer.addChild(this.portalLayer);
         this._collectableLayer = new Sprite();
         this._collectableLayer.mouseEnabled = Main.mouseEventsEnabled;
         this.movingContainer.addChild(this.collectableLayer);
         this.shipLayer = new Sprite();
         this.shipLayer.mouseEnabled = Main.mouseEventsEnabled;
         this.shipLayer.mouseChildren = Main.mouseEventsEnabled;
         collisionDetection = new Sprite();
         collisionDetection.graphics.beginFill(255);
         collisionDetection.graphics.drawCircle(0,0,5);
         this.shipLayer.addChild(collisionDetection);
         this.petLayer = new Sprite();
         this.petLayer.mouseEnabled = Main.mouseEventsEnabled;
         this.petLayer.mouseChildren = Main.mouseEventsEnabled;
         this.movingContainer.addChild(this.shipLayer);
         this.movingContainer.addChild(this.petLayer);
         this.explosionLayer = new Sprite();
         this.explosionLayer.mouseEnabled = Main.mouseEventsEnabled;
         this.explosionLayer.mouseChildren = Main.mouseEventsEnabled;
         this.movingContainer.addChild(this.explosionLayer);
         this.laserLayer = new Sprite();
         this.laserLayer.mouseEnabled = Main.mouseEventsEnabled;
         this.laserLayer.mouseChildren = Main.mouseEventsEnabled;
         this.movingContainer.addChild(this.laserLayer);
         this.staticContainer = new Sprite();
         this.backgroundContainer = new Sprite();
         this.backgroundContainer.mouseEnabled = Main.mouseEventsEnabled;
         this.backgroundContainer.mouseChildren = Main.mouseEventsEnabled;
         this.staticContainer.addChild(this.backgroundContainer);
         this.resetDefaults(Settings.mapID);
         this.starfieldLayer = new Sprite();
         this.starfieldLayer.mouseEnabled = Main.mouseEventsEnabled;
         this.starfieldLayer.mouseChildren = Main.mouseEventsEnabled;
         this.staticContainer.addChild(this.starfieldLayer);
         this.staticContainer.addChild(this.movingContainer);
         var _loc5_:int = int(Main.gameXML.patterns.meteors.@layers);
         _loc4_ = 0;
         while(_loc4_ < _loc5_)
         {
            _loc3_ = new Sprite();
            _loc3_.mouseEnabled = Main.mouseEventsEnabled;
            _loc3_.mouseChildren = Main.mouseEventsEnabled;
            this.meteorLayers.push(_loc3_);
            this.staticContainer.addChild(_loc3_);
            _loc4_++;
         }
         this.heroLayer = new Sprite();
         this.heroLayer.mouseEnabled = Main.mouseEventsEnabled;
         this.heroLayer.mouseChildren = Main.mouseEventsEnabled;
         this.staticContainer.addChild(this.heroLayer);
         this.lensflareLayer = new Sprite();
         this.lensflareLayer.mouseEnabled = Main.mouseEventsEnabled;
         this.lensflareLayer.mouseChildren = Main.mouseEventsEnabled;
         this.staticContainer.addChild(this.lensflareLayer);
         param1.addChild(this.staticContainer);
         this.guiLayer0 = new Sprite();
         this.guiLayer0.mouseEnabled = false;
         this.guiLayer0.mouseChildren = false;
         param1.addChild(this.guiLayer0);
         this.guiLayer1 = new Sprite();
         this.guiLayer1.mouseEnabled = false;
         this.guiLayer1.mouseChildren = false;
         param1.addChild(this.guiLayer1);
         windowLayer = new Sprite();
         windowLayer.mouseEnabled = Main.mouseEventsEnabled;
         param1.addChild(windowLayer);
         this._topmenuLayer = new Sprite();
         this._topmenuLayer.mouseEnabled = Main.mouseEventsEnabled;
         param1.addChild(this._topmenuLayer);
         this.iconLayer = new Sprite();
         this.iconLayer.mouseEnabled = Main.mouseEventsEnabled;
         param1.addChild(this.iconLayer);
         this._mainmenuLayer = new Sprite();
         this._mainmenuLayer.mouseEnabled = Main.mouseEventsEnabled;
         param1.addChild(this._mainmenuLayer);
         this.windowLayer2 = new Sprite();
         this.windowLayer2.mouseEnabled = Main.mouseEventsEnabled;
         param1.addChild(this.windowLayer2);
         this.addRenderFrameListener();
         this.setMapScale();
         this.setMask();
      }
      
      private function parseContainingBackgroundsCount(param1:int) : int
      {
         var backgroundLayerCount:int = 0;
         var newMapID:int = param1;
         backgroundLayerCount = int(XMLList(Main.mapsXML.map.(@id == String(newMapID)).backgrounds.background).length());
         return backgroundLayerCount;
      }
      
      private function parseContainingPlanetsCount(param1:int) : int
      {
         var planetLayerCount:int = 0;
         var newMapID:int = param1;
         planetLayerCount = int(XMLList(Main.mapsXML.map.(@id == String(newMapID)).planets.planet).length());
         return planetLayerCount;
      }
      
      private function getSprite(param1:int, param2:int) : Sprite
      {
         var _loc3_:uint = 4285624689;
         var _loc4_:Sprite = new Sprite();
         _loc4_.graphics.beginFill(_loc3_);
         _loc4_.graphics.drawRect(0,0,param1,param2);
         return _loc4_;
      }
      
      public function setMask() : void
      {
         var _loc6_:Sprite = null;
         var _loc7_:int = 0;
         var _loc1_:ResolutionPattern = PatternManager.resolutionPatterns[Settings.resolutionID];
         var _loc2_:int = 3000 - _loc1_.width / 2;
         var _loc3_:int = 3000 - _loc1_.height / 2;
         var _loc4_:int = _loc1_.width;
         var _loc5_:int = _loc1_.height;
         _loc7_ = -1;
         while(_loc7_ < 2)
         {
            _loc6_ = this.getSprite(_loc2_,_loc5_);
            _loc6_.x = -_loc2_;
            _loc6_.y = _loc7_ * _loc5_;
            this.main.addChild(_loc6_);
            _loc7_++;
         }
         _loc7_ = -1;
         while(_loc7_ < 2)
         {
            _loc6_ = this.getSprite(_loc2_,_loc5_);
            _loc6_.x = _loc4_;
            _loc6_.y = _loc7_ * _loc5_;
            this.main.addChild(_loc6_);
            _loc7_++;
         }
         _loc6_ = this.getSprite(_loc4_,_loc3_);
         _loc6_.y = -_loc3_;
         this.main.addChild(_loc6_);
         _loc6_ = this.getSprite(_loc4_,_loc3_);
         _loc6_.y = _loc5_;
         this.main.addChild(_loc6_);
      }
      
      public function addRenderFrameListener() : void
      {
         this.main.addEventListener(Event.ENTER_FRAME,this.renderFrame);
      }
      
      public function removeRenderFrameListener() : void
      {
         this.main.removeEventListener(Event.ENTER_FRAME,this.renderFrame);
      }
      
      public function showSimpleMessage(param1:String, param2:String = "") : void
      {
         var _loc3_:Sprite = new Sprite();
         _loc3_.name = param2;
         _loc3_.mouseEnabled = Main.mouseEventsEnabled;
         _loc3_.mouseChildren = Main.mouseEventsEnabled;
         var _loc4_:BitmapData = new BitmapData(screenWidth,screenHeight,false,0);
         var _loc5_:Bitmap = new Bitmap(_loc4_);
         _loc3_.addChild(_loc5_);
         var _loc6_:TextField = new TextField();
         _loc6_.defaultTextFormat = Styles.systemSplashFmt;
         _loc6_.embedFonts = Styles.systemSplashEmbed;
         _loc6_.width = screenWidth * 0.6;
         _loc6_.multiline = true;
         _loc6_.wordWrap = true;
         _loc6_.autoSize = TextFieldAutoSize.CENTER;
         _loc6_.textColor = 16777215;
         _loc6_.antiAliasType = "advanced";
         _loc6_.selectable = false;
         _loc6_.text = param1;
         _loc6_.x = screenWidth * 0.2;
         _loc6_.y = screenHeight * 0.4;
         _loc3_.addChild(_loc6_);
         this.main.addChild(_loc3_);
      }
      
      public function showBigMessage(param1:String, param2:int = 2, param3:int = 0) : void
      {
         var _loc4_:TextField = new TextField();
         var _loc5_:TextFormat = new TextFormat();
         _loc5_.font = Styles.systemSplashFmt.font;
         _loc5_.size = 48;
         _loc5_.align = TextFormatAlign.CENTER;
         _loc4_.defaultTextFormat = _loc5_;
         _loc4_.width = screenWidth * 0.8;
         _loc4_.embedFonts = Styles.systemSplashEmbed;
         _loc4_.wordWrap = true;
         _loc4_.autoSize = TextFieldAutoSize.CENTER;
         _loc4_.multiline = true;
         _loc4_.textColor = 16777215;
         _loc4_.antiAliasType = "advanced";
         _loc4_.selectable = false;
         _loc4_.text = param1;
         var _loc6_:BitmapData = new BitmapData(_loc4_.width,_loc4_.height,true,0);
         _loc6_.draw(_loc4_);
         var _loc7_:Bitmap = new Bitmap(_loc6_);
         _loc7_.alpha = 0;
         _loc7_.x = screenWidth / 2 - _loc4_.width / 2;
         _loc7_.y = screenHeight / 2 - _loc4_.height / 2 - 200;
         this.main.addChild(_loc7_);
         var _loc8_:int = _loc7_.x;
         _loc7_.x -= 25;
         TweenMax.to(_loc7_,1,{
            "delay":param3,
            "x":_loc8_,
            "alpha":1,
            "glowFilter":{
               "color":255,
               "alpha":1,
               "blurX":10,
               "blurY":10
            },
            "onComplete":this.onTeaserFadeIn,
            "onCompleteParams":[_loc7_,param2]
         });
      }
      
      private function onTeaserFadeIn(param1:Bitmap, param2:int) : void
      {
         TweenMax.to(param1,1,{
            "delay":param2,
            "alpha":0,
            "onComplete":this.removeDisplayObject,
            "onCompleteParams":[param1]
         });
      }
      
      private function removeDisplayObject(param1:Bitmap) : void
      {
         this.main.removeChild(param1);
      }
      
      private function renderFrame(param1:Event) : void
      {
         var _loc2_:Number = NaN;
         var _loc3_:Number = NaN;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:Background = null;
         var _loc8_:Planet = null;
         var _loc9_:MovieClip = null;
         var _loc10_:MapObject = null;
         if(this._map != null && this._hero != null)
         {
            if(cameraLock == CAMERA_LOCKED_TO_HERO)
            {
               camera.x = this._hero.x;
               camera.y = this._hero.y;
            }
            else if(cameraLock == CAMERA_LOCKED_TO_SHIP)
            {
               _loc10_ = this.map.getShipManager().getShip(lockedShipUserID);
               if(_loc10_ != null)
               {
                  camera.x = _loc10_.x;
                  camera.y = _loc10_.y;
               }
               else
               {
                  cameraLock == CAMERA_LOCKED_TO_HERO;
               }
            }
            this.movingContainer.x = -(camera.x - ScreenManager.centerX);
            this.movingContainer.y = -(camera.y - ScreenManager.centerY);
            _loc2_ = this.movingContainer.x - this.oldBgX;
            _loc3_ = this.movingContainer.y - this.oldBgY;
            if(this._starfield != null)
            {
               if(_loc2_ == 0 && _loc3_ == 0)
               {
                  this._starfield.moveField(0.2,0);
               }
               else
               {
                  this._starfield.moveField(_loc2_,_loc3_);
               }
            }
            this.oldBgX = this.movingContainer.x;
            this.oldBgY = this.movingContainer.y;
            for each(_loc7_ in this.backgrounds)
            {
               if(_loc7_ != null)
               {
                  _loc5_ = int(-camera.x / _loc7_.getParallaxFactor() + ScreenManager.centerX + _loc7_.offsetX);
                  _loc6_ = int(-camera.y / _loc7_.getParallaxFactor() + ScreenManager.centerY + _loc7_.offsetY);
                  if(_loc7_.tiledMap != null)
                  {
                     _loc7_.tiledMap.setPosition(_loc5_,_loc6_);
                  }
                  else if(_loc7_.clip != null)
                  {
                     _loc7_.clip.x = _loc5_;
                     _loc7_.clip.y = _loc6_;
                  }
               }
            }
            this.map.getLensflareManager().speedX = _loc2_;
            this.map.getLensflareManager().speedY = _loc3_;
            _loc4_ = 0;
            while(_loc4_ < this._planets.length)
            {
               _loc8_ = this._planets[_loc4_];
               _loc9_ = _loc8_.clip;
               if(_loc9_ != null)
               {
                  _loc9_.x = -camera.x / _loc8_.pFactor + ScreenManager.centerX + _loc8_.x;
                  _loc9_.y = -camera.y / _loc8_.pFactor + ScreenManager.centerY + _loc8_.y;
               }
               _loc4_++;
            }
         }
      }
      
      public function getPortalLayer() : Sprite
      {
         return this.portalLayer;
      }
      
      public function getStarfieldLayer() : Sprite
      {
         return this.starfieldLayer;
      }
      
      public function getExplosionLayer() : Sprite
      {
         return this.explosionLayer;
      }
      
      public function getHeroLayer() : Sprite
      {
         return this.heroLayer;
      }
      
      public function getLensflareLayer() : Sprite
      {
         return this.lensflareLayer;
      }
      
      public function getShipLayer() : Sprite
      {
         return this.shipLayer;
      }
      
      public function getPetLayer() : Sprite
      {
         return this.petLayer;
      }
      
      public function getBackgroundContainer() : Sprite
      {
         return this.backgroundContainer;
      }
      
      public function getBackgroundLayer(param1:int) : Sprite
      {
         return this.backgroundLayers[param1];
      }
      
      public function getMeteorLayer(param1:int) : Sprite
      {
         return this.meteorLayers[param1];
      }
      
      public function getNebulaLayer(param1:int) : Sprite
      {
         return this.nebulaLayers[param1];
      }
      
      public function getLaserLayer() : Sprite
      {
         return this.laserLayer;
      }
      
      public function getGUILayer0() : Sprite
      {
         return this.guiLayer0;
      }
      
      public function getGUILayer1() : Sprite
      {
         return this.guiLayer1;
      }
      
      public function getStaticContainer() : Sprite
      {
         return this.staticContainer;
      }
      
      public function increaseMapScale() : void
      {
         var _loc1_:Number = this._mapScale + 0.1;
         if(_loc1_ > 1)
         {
            _loc1_ = 1;
         }
         TweenLite.to(this,1,{
            "_mapScale":_loc1_,
            "onUpdate":this.onScreenScale
         });
      }
      
      public function decreaseMapScale() : void
      {
         var _loc1_:Number = this._mapScale - 0.1;
         var _loc2_:ResolutionPattern = PatternManager.resolutionPatterns[Settings.initialResolutionID];
         var _loc3_:Number = screenWidth / MASTER_SCREEN_WIDTH;
         if(_loc1_ < _loc3_)
         {
            _loc1_ = _loc3_;
         }
         TweenLite.to(this,1,{
            "_mapScale":_loc1_,
            "onUpdate":this.onScreenScale
         });
      }
      
      public function zoomToFactor(param1:Number, param2:Number) : void
      {
         TweenLite.to(this,param1,{
            "_mapScale":param2,
            "onUpdate":this.onScreenScale
         });
      }
      
      public function resetZoomFactor() : void
      {
         var _loc1_:Number = screenWidth / MASTER_SCREEN_WIDTH;
         TweenLite.to(this,1,{
            "_mapScale":_loc1_,
            "onUpdate":this.onScreenScale
         });
      }
      
      public function zoomIn(param1:Boolean = false) : void
      {
         var _loc2_:Number = NaN;
         var _loc3_:Number = NaN;
         if(param1)
         {
            _loc2_ = this._mapScale;
            this._mapScale = _loc2_ - 0.2;
            _loc3_ = 2;
            this.onScreenScale();
         }
         else
         {
            _loc2_ = this._mapScale + 0.2;
            _loc3_ = 0.1;
         }
         TweenLite.to(this,2,{
            "delay":_loc3_,
            "_mapScale":_loc2_,
            "onUpdate":this.onScreenScale
         });
      }
      
      public function zoomOut(param1:Boolean = false) : void
      {
         var _loc2_:Number = NaN;
         var _loc3_:Number = NaN;
         if(param1)
         {
            _loc2_ = this._mapScale;
            this._mapScale = _loc2_ + 0.2;
            _loc3_ = 2;
            this.onScreenScale();
         }
         else
         {
            _loc2_ = this._mapScale - 0.2;
            _loc3_ = 0.1;
         }
         TweenLite.to(this,2,{
            "delay":_loc3_,
            "_mapScale":_loc2_,
            "onUpdate":this.onScreenScale
         });
      }
      
      private function onScreenScale() : void
      {
         this.staticContainer.scaleX = this._mapScale;
         this.staticContainer.scaleY = this._mapScale;
         centerX = Math.round(halfScreenWidth / this._mapScale);
         centerY = Math.round(halfScreenHeight / this._mapScale);
         if(this._hero != null && cameraLock == CAMERA_LOCKED_TO_HERO)
         {
            this._hero.clipContainer.x = centerX;
            this._hero.clipContainer.y = centerY;
         }
         if(this._map != null)
         {
            this._map.getEventManager().halfScreenWidth = centerX;
            this._map.getEventManager().halfScreenHeight = centerY;
         }
         this.lastStaticContainerPosition.x = this.staticContainer.x;
         this.lastStaticContainerPosition.y = this.staticContainer.y;
      }
      
      public function setMapScale() : void
      {
         var _loc1_:Number = NaN;
         var _loc2_:Number = NaN;
         _loc1_ = screenWidth / MASTER_SCREEN_WIDTH;
         _loc2_ = screenHeight / MASTER_SCREEN_HEIGHT;
         if(_loc1_ >= _loc2_)
         {
            this._mapScale = _loc1_;
         }
         else
         {
            this._mapScale = _loc2_;
         }
         this.onScreenScale();
      }
      
      public function getWindowLayer2() : Sprite
      {
         return this.windowLayer2;
      }
      
      public function getIconLayer() : Sprite
      {
         return this.iconLayer;
      }
      
      public function clearAllLayers() : void
      {
         var _loc1_:Sprite = null;
         this.clearSpriteLayers(this.shipLayer);
         this.clearSpriteLayers(this.petLayer);
         this.clearSpriteLayers(this.heroLayer);
         this.clearSpriteLayers(this.laserLayer);
         this.clearSpriteLayers(this.portalLayer);
         this.clearSpriteLayers(this.lensflareLayer);
         this.clearSpriteLayers(this.starfieldLayer);
         this.clearSpriteLayers(this.explosionLayer);
         this.clearSpriteLayers(this._poizoneLayer);
         this.clearSpriteLayers(this.collectableLayer);
         for each(_loc1_ in this.backgroundLayers)
         {
            this.clearSpriteLayers(_loc1_);
         }
         for each(_loc1_ in this.meteorLayers)
         {
            this.clearSpriteLayers(_loc1_);
         }
         for each(_loc1_ in this.nebulaLayers)
         {
            this.clearSpriteLayers(_loc1_);
         }
      }
      
      private function clearSpriteLayers(param1:Sprite) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < param1.numChildren)
         {
            param1.removeChildAt(_loc2_);
            _loc2_++;
         }
      }
      
      public function setScreenWidth(param1:int) : void
      {
         screenWidth = param1;
         halfScreenWidth = screenWidth / 2;
      }
      
      public function setScreenHeight(param1:int) : void
      {
         screenHeight = param1;
         halfScreenHeight = screenHeight / 2;
      }
      
      public function getScaledScreenWidth() : int
      {
         var _loc1_:Number = screenWidth / MASTER_SCREEN_WIDTH;
         return screenWidth / _loc1_;
      }
      
      public function getScaledScreenHeight() : int
      {
         var _loc1_:Number = screenWidth / MASTER_SCREEN_WIDTH;
         return screenHeight / _loc1_;
      }
      
      public function getPoizoneLayer() : Sprite
      {
         return this._poizoneLayer;
      }
      
      public function addStarfield(param1:Starfield) : void
      {
         this._starfield = param1;
         this.starfieldLayer.addChild(param1);
      }
      
      public function removeStarfield() : void
      {
         if(this._starfield != null)
         {
            this._starfield.cleanup();
            this.starfieldLayer.removeChild(this._starfield);
         }
      }
      
      public function get planets() : Array
      {
         return this._planets;
      }
      
      public function set planets(param1:Array) : void
      {
         this._planets = param1;
      }
      
      public function get hero() : Ship
      {
         return this._hero;
      }
      
      public function set hero(param1:Ship) : void
      {
         this._hero = param1;
      }
      
      public function get map() : Map
      {
         return this._map;
      }
      
      public function set map(param1:Map) : void
      {
         this._map = param1;
      }
      
      public function get topmenuLayer() : Sprite
      {
         return this._topmenuLayer;
      }
      
      public function get mainmenuLayer() : Sprite
      {
         return this._mainmenuLayer;
      }
      
      public function get collectableLayer() : Sprite
      {
         return this._collectableLayer;
      }
      
      private function getMain() : Main
      {
         return this.main;
      }
      
      public function resetDefaults(param1:int) : void
      {
         this.removeBackgroundLayers();
         this.addBackgroundLayers(param1);
         this.addPlanetLayers(param1);
      }
      
      private function removeBackgroundLayers() : void
      {
         var _loc1_:int = 0;
         if(this.backgroundContainer.numChildren > 0)
         {
            _loc1_ = 0;
            while(_loc1_ < this.backgroundContainer.numChildren)
            {
               this.backgroundContainer.removeChild(this.backgroundLayers.pop());
               _loc1_++;
            }
         }
      }
      
      public function removeBackgroundLayer(param1:int) : void
      {
         var _loc2_:Sprite = this.getBackgroundLayer(param1);
         if(_loc2_ != null && this.backgroundContainer.contains(_loc2_))
         {
            this.backgroundContainer.removeChild(_loc2_);
            this.backgroundLayers.splice(param1,1);
         }
      }
      
      private function addBackgroundLayers(param1:int) : void
      {
         var _loc2_:Sprite = null;
         var _loc3_:int = this.parseContainingBackgroundsCount(param1);
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_)
         {
            _loc2_ = new Sprite();
            _loc2_.mouseEnabled = Main.mouseEventsEnabled;
            _loc2_.mouseChildren = Main.mouseEventsEnabled;
            this.backgroundLayers.push(_loc2_);
            this.backgroundContainer.addChild(_loc2_);
            _loc4_++;
         }
      }
      
      public function addBackgroundLayer() : void
      {
         var _loc1_:Sprite = new Sprite();
         _loc1_.mouseEnabled = Main.mouseEventsEnabled;
         _loc1_.mouseChildren = Main.mouseEventsEnabled;
         this.backgroundLayers.push(_loc1_);
         this.backgroundContainer.addChild(_loc1_);
      }
      
      private function addPlanetLayers(param1:int) : void
      {
         var _loc2_:Sprite = null;
         var _loc3_:int = this.parseContainingPlanetsCount(param1);
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_)
         {
            _loc2_ = new Sprite();
            _loc2_.mouseEnabled = Main.mouseEventsEnabled;
            _loc2_.mouseChildren = Main.mouseEventsEnabled;
            this.backgroundLayers.push(_loc2_);
            this.backgroundContainer.addChild(_loc2_);
            _loc4_++;
         }
      }
   }
}

package net.bigpoint.darkorbit
{
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   
   public class Styles
   {
      
      public static const baseEmbed:Boolean = true;
      
      public static const baseFont:String = "EurostileHeaFl";
      
      public static const corporateFontRegular:String = "EurostileFl";
      
      public static const corporateFontHeavy:String = "EurostileHeaFl";
      
      public static const h1FontHeight:int = 17;
      
      public static const h1Fmt:TextFormat = new TextFormat(corporateFontHeavy,h1FontHeight);
      
      public static const h1Embed:Boolean = true;
      
      public static const systemSplashFontHeight:int = 20;
      
      public static const systemSplashFmt:TextFormat = new TextFormat(corporateFontHeavy,systemSplashFontHeight);
      
      public static const systemSplashEmbed:Boolean = true;
      
      public static const windowTitleFontHeight:int = 14;
      
      public static const windowTitleFmt:TextFormat = new TextFormat(corporateFontHeavy,windowTitleFontHeight);
      
      public static const windowTitleEmbed:Boolean = true;
      
      public static const h2FontHeight:int = 14;
      
      public static const h2Fmt:TextFormat = new TextFormat(corporateFontHeavy,h2FontHeight);
      
      public static const h2Embed:Boolean = true;
      
      public static const h3FontHeight:int = 12;
      
      public static const h3Fmt:TextFormat = new TextFormat(corporateFontHeavy,h3FontHeight);
      
      public static const h3Embed:Boolean = true;
      
      public static const plainBigFontHeight:int = 14;
      
      public static const plainBigFmt:TextFormat = new TextFormat(corporateFontHeavy,plainBigFontHeight);
      
      public static const plainBigEmbed:Boolean = true;
      
      public static const plainStdFontHeight:int = 12;
      
      public static const plainStdFmt:TextFormat = new TextFormat(corporateFontRegular,plainStdFontHeight);
      
      public static const plainStdEmbed:Boolean = true;
      
      public static const strongStdFontHeight:int = 12;
      
      public static const strongStdFmt:TextFormat = new TextFormat(corporateFontHeavy,strongStdFontHeight);
      
      public static const strongStdEmbed:Boolean = true;
      
      public static const centeredHeavyFontHeight:int = 12;
      
      public static const centeredHeavyFmt:TextFormat = new TextFormat(corporateFontHeavy,centeredHeavyFontHeight);
      
      public static const centeredHeavyEmbed:Boolean = true;
      
      public static const tradeWindowButtonFontHeight:int = 10;
      
      public static const tradeWindowButtonFmt:TextFormat = new TextFormat(corporateFontRegular,tradeWindowButtonFontHeight,16777215);
      
      public static const tradeWindowButtonEmbed:Boolean = true;
      
      public static const tooltipFontHeight:int = 12;
      
      public static const tooltipFmt:TextFormat = new TextFormat("Tahoma",tooltipFontHeight,13421772);
      
      public static const tooltipEmbed:Boolean = false;
      
      public static const infoFieldFontHeight:int = 10;
      
      public static const infoFieldFmt:TextFormat = new TextFormat(corporateFontHeavy,infoFieldFontHeight,14671839);
      
      public static const infoFieldEmbed:Boolean = true;
      
      public static const infoFieldFixedFmt:TextFormat = new TextFormat(infoFieldFmt.font,infoFieldFmt.size,infoFieldFmt.color);
      
      public static const logFontHeight:int = 12;
      
      public static const logFmt:TextFormat = new TextFormat(corporateFontHeavy,logFontHeight,14671839);
      
      public static const logEmbed:Boolean = true;
      
      public static const achievementFontHeight:int = 11;
      
      public static const achievementFmt:TextFormat = new TextFormat(corporateFontRegular,achievementFontHeight,14671839);
      
      public static const achievementEmbed:Boolean = false;
      
      public static const achievementOfferFontHeight:int = 11;
      
      public static const achievementOfferFmt:TextFormat = new TextFormat(corporateFontRegular,achievementOfferFontHeight,14671839);
      
      public static const achievementOfferEmbed:Boolean = false;
      
      public static const simpleFontHeight:int = 14;
      
      public static const simpleFmt:TextFormat = new TextFormat(corporateFontHeavy,simpleFontHeight);
      
      public static const simpleEmbed:Boolean = true;
      
      public static const stdOffsetY:int = 0;
      
      public static const stdOffsetLogY:int = 0;
      
      public static const spaceballScoreFontHeight:int = 12;
      
      public static const spaceballScoreFmt:TextFormat = new TextFormat(corporateFontHeavy,spaceballScoreFontHeight,16777215);
      
      public static const spaceballScoreEmbed:Boolean = true;
      
      public static const nickFontHeight:int = 16;
      
      public static const nickFmt:TextFormat = new TextFormat(corporateFontHeavy,simpleFontHeight);
      
      public static const nickEmbed:Boolean = true;
      
      public static const oreTradeElementFontHeight:int = 10;
      
      public static const oreTradeElementFmt:TextFormat = new TextFormat(corporateFontHeavy,oreTradeElementFontHeight,15327936);
      
      public static const oreTradeElementEmbed:Boolean = true;
      
      public static const systemTitleFontHeight:int = 12;
      
      public static const systemTitleFmt:TextFormat = new TextFormat(corporateFontRegular,simpleFontHeight,65280);
      
      public static const systemTitleEmbed:Boolean = true;
      
      public static const systemPermanentTitleFontHeight:int = 12;
      
      public static const systemPermanentTitleFmt:TextFormat = new TextFormat(corporateFontRegular,simpleFontHeight,14892454);
      
      public static const systemPermanentTitleEmbed:Boolean = true;
      
      systemSplashFmt.align = TextFormatAlign.CENTER;
      centeredHeavyFmt.align = TextFormatAlign.CENTER;
      infoFieldFixedFmt.align = TextFormatAlign.RIGHT;
      spaceballScoreFmt.align = TextFormatAlign.CENTER;
      
      public function Styles()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.achievement
{
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.ToolTipHook;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.DisplayObject;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.external.ExternalInterface;
   import flash.filters.DropShadowFilter;
   import flash.geom.Matrix;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.net.ConnectionManager;
   import net.bigpoint.darkorbit.pattern.AchievementPattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   
   public class AchievementElement extends SimpleElement
   {
      
      private static const USER_NOT_ELIGIBLE_YET:int = 0;
      
      private static const READY:int = 1;
      
      private static const USED:int = 2;
      
      private static const NO_OFFER:int = 3;
      
      private var background_active:Bitmap;
      
      private var priceField:Bitmap;
      
      private var background_inactive:Bitmap;
      
      private var achievement_grey:Bitmap;
      
      private var achievement_gold:Bitmap;
      
      private var button_inactive:Sprite;
      
      private var button_active:Bitmap;
      
      private var button_rollover:Bitmap;
      
      private var flashCount:int;
      
      public var questID:int;
      
      public var achievementDone:Boolean;
      
      public var bargainState:int;
      
      private var toolTipHook:ToolTipHook;
      
      private var achievementTextField:TextField;
      
      private var rewardTextField:TextField;
      
      public var _order:int = 0;
      
      public var achievementID:int;
      
      private var connectionManager:ConnectionManager;
      
      private var mouseOverSprite:Sprite;
      
      private var localPrice:Number;
      
      private var localCurrency:String;
      
      public function AchievementElement(param1:ConnectionManager, param2:int, param3:int, param4:Boolean, param5:int)
      {
         super(TYPE_ACHIEVEMENT);
         this.connectionManager = param1;
         this.achievementID = param2;
         this.questID = param3;
         this.achievementDone = param4;
         this.bargainState = param5;
         this.init();
      }
      
      private function init() : void
      {
         var _loc1_:TextFormat = null;
         this.mouseOverSprite = new Sprite();
         this.mouseOverSprite.graphics.beginFill(16711680);
         if(this.bargainState == NO_OFFER)
         {
            this.background_active = ResourceManager.getBitmap("achievement","background_active_full.png");
            this.background_inactive = ResourceManager.getBitmap("achievement","background_inactive_full.png");
            this.mouseOverSprite.graphics.drawRect(0,0,this.background_inactive.width,this.background_inactive.height);
         }
         else
         {
            this.background_active = ResourceManager.getBitmap("achievement","background_active.png");
            this.background_inactive = ResourceManager.getBitmap("achievement","background_inactive.png");
            this.mouseOverSprite.graphics.drawRect(0,0,this.background_inactive.width,this.background_inactive.height);
         }
         this.addChild(this.background_inactive);
         if(this.achievementDone)
         {
            this.background_active.visible = true;
         }
         else
         {
            this.background_active.visible = false;
         }
         this.addChild(this.background_active);
         this.achievement_grey = ResourceManager.getBitmap("achievement","achievement_grey.png");
         this.achievement_grey.x = 4;
         this.achievement_grey.y = (this.background_active.height - this.achievement_grey.height) * 0.5 - 3;
         this.addChild(this.achievement_grey);
         this.achievement_gold = ResourceManager.getBitmap("achievement","achievement_gold.png");
         this.achievement_gold.x = this.achievement_grey.x;
         this.achievement_gold.y = (this.background_active.height - this.achievement_gold.height) * 0.5 - 3;
         if(this.achievementDone)
         {
            this.achievement_gold.visible = true;
         }
         else
         {
            this.achievement_gold.visible = false;
         }
         this.addChild(this.achievement_gold);
         if(this.bargainState != NO_OFFER)
         {
            this.button_inactive = new Sprite();
            this.button_inactive.addChild(ResourceManager.getBitmap("achievement","button_inactive.png"));
            if(this.bargainState == READY)
            {
               this.button_inactive.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
               this.button_inactive.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
               this.button_inactive.addEventListener(MouseEvent.CLICK,this.handleMouseClick);
               this.button_inactive.buttonMode = true;
            }
            this.button_inactive.x = this.background_inactive.width - this.button_inactive.width - 5;
            this.button_inactive.y = this.background_inactive.height / 2 - this.button_inactive.height / 2 - 1;
            this.button_active = ResourceManager.getBitmap("achievement","button_active.png");
            this.button_active.x = this.button_inactive.x;
            this.button_active.y = this.button_inactive.y;
            if(this.bargainState != READY)
            {
               this.button_active.visible = false;
            }
            this.button_rollover = ResourceManager.getBitmap("achievement","button_rollover.png");
            this.button_rollover.x = this.button_inactive.x;
            this.button_rollover.y = this.button_inactive.y;
            this.button_rollover.visible = false;
         }
         _loc1_ = new TextFormat(Styles.logFmt.font,11,16777215);
         var _loc2_:DropShadowFilter = new DropShadowFilter(1,0,1,1,1);
         this.achievementTextField = new TextField();
         _loc1_.align = TextFormatAlign.LEFT;
         this.achievementTextField.defaultTextFormat = _loc1_;
         this.achievementTextField.embedFonts = Styles.logEmbed;
         this.achievementTextField.wordWrap = true;
         this.achievementTextField.antiAliasType = AntiAliasType.ADVANCED;
         this.achievementTextField.autoSize = TextFieldAutoSize.LEFT;
         this.achievementTextField.width = 200;
         this.achievementTextField.selectable = false;
         this.achievementTextField.x = 40;
         this.achievementTextField.filters = [_loc2_];
         this.addChild(this.achievementTextField);
         this.rewardTextField = new TextField();
         _loc1_.align = TextFormatAlign.LEFT;
         this.rewardTextField.defaultTextFormat = _loc1_;
         this.rewardTextField.embedFonts = Styles.logEmbed;
         this.rewardTextField.wordWrap = true;
         this.rewardTextField.antiAliasType = AntiAliasType.ADVANCED;
         this.rewardTextField.autoSize = TextFieldAutoSize.LEFT;
         this.rewardTextField.width = 104;
         this.rewardTextField.selectable = false;
         this.rewardTextField.x = 260;
         this.rewardTextField.filters = [_loc2_];
         this.addChild(this.rewardTextField);
         this.mouseOverSprite.alpha = 0;
         this.addChild(this.mouseOverSprite);
         if(this.bargainState != NO_OFFER)
         {
            this.addChild(this.button_inactive);
            this.addChild(this.button_active);
            this.addChild(this.button_rollover);
         }
         this.updatePriceField();
      }
      
      public function updatePriceField() : void
      {
         var _loc1_:AchievementPattern = null;
         var _loc2_:uint = 0;
         var _loc3_:TextFormat = null;
         var _loc4_:String = null;
         var _loc5_:Array = null;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:TextField = null;
         var _loc9_:BitmapData = null;
         var _loc10_:Matrix = null;
         if(this.bargainState != NO_OFFER)
         {
            _loc1_ = PatternManager.achievementPatterns[this.achievementID];
            if(_loc1_ == null)
            {
               return;
            }
            if(this.priceField != null && this.contains(this.priceField))
            {
               this.removeChild(this.priceField);
            }
            _loc2_ = 9539985;
            if(this.bargainState == READY)
            {
               _loc2_ = 15646765;
            }
            _loc3_ = new TextFormat(Styles.achievementOfferFmt.font,24,_loc2_,true);
            _loc3_.align = TextFormatAlign.CENTER;
            if(_loc1_.priceValue <= 0)
            {
               _loc4_ = BPLocale.getText("label_buy_achievement_reward_no_price");
            }
            else
            {
               this.localPrice = _loc1_.priceValue;
               this.localCurrency = _loc1_.priceCurrency;
               _loc4_ = BPLocale.replaceWithFormattedPrice(this.localPrice,this.localCurrency,/%PRICE(.*?)%/,BPLocale.getText("label_buy_achievement_reward"));
            }
            _loc5_ = _loc4_.split("\n");
            _loc6_ = 16;
            _loc7_ = 0;
            while(_loc7_ < _loc5_.length)
            {
               _loc8_ = new TextField();
               _loc8_.defaultTextFormat = _loc3_;
               _loc8_.embedFonts = Styles.simpleEmbed;
               _loc8_.text = _loc5_[_loc7_];
               _loc8_.wordWrap = true;
               _loc8_.multiline = true;
               _loc8_.width = 96;
               _loc8_.autoSize = TextFieldAutoSize.CENTER;
               _loc8_.antiAliasType = AntiAliasType.ADVANCED;
               _loc9_ = new BitmapData(_loc8_.width / 2,_loc8_.height / 2,true,0);
               _loc10_ = new Matrix();
               _loc10_.identity();
               _loc10_.scale(0.5,0.5);
               _loc9_.draw(_loc8_,_loc10_);
               this.priceField = new Bitmap(_loc9_);
               this.priceField.x = this.button_active.x + (this.button_active.width - this.priceField.width) * 0.5 - 1;
               this.priceField.y = _loc6_;
               _loc6_ += this.priceField.height - 4;
               this.addChild(this.priceField);
               _loc7_++;
            }
         }
      }
      
      private function handleMouseClick(param1:MouseEvent) : void
      {
         if(ExternalInterface.available)
         {
            ExternalInterface.call("openPayment","ACHIEVEMENT",this.achievementID);
         }
      }
      
      public function setAchievementText(param1:String, param2:String) : void
      {
         this.achievementTextField.text = BPLocale.getText(param1) + "\n" + BPLocale.getText(param2);
         this.achievementTextField.y = this.background_active.height / 2 - this.achievementTextField.height / 2;
      }
      
      public function setRewardText(param1:String) : void
      {
         this.rewardTextField.text = BPLocale.getText("title_reward") + "\n" + BPLocale.getText(param1);
         this.rewardTextField.y = this.background_active.height / 2 - this.rewardTextField.height / 2;
      }
      
      public function setTooltip(param1:String) : void
      {
         this.toolTipHook = TooltipControl.getInstance().addToolTip(this.mouseOverSprite,BPLocale.getText(param1));
      }
      
      public function activateBackground() : void
      {
         if(!this.background_active.visible)
         {
            this.background_active.alpha = 0;
            this.background_active.visible = true;
            TweenLite.to(this.background_active,0.25,{
               "ease":Linear.easeNone,
               "alpha":1
            });
         }
      }
      
      public function cleanup() : void
      {
         TooltipControl.getInstance().removeToolTip(this.mouseOverSprite);
         if(this.button_inactive != null)
         {
            this.button_inactive.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
            this.button_inactive.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
            this.button_inactive.removeEventListener(MouseEvent.CLICK,this.handleMouseClick);
         }
      }
      
      private function handleMouseOver(param1:MouseEvent) : void
      {
         this.button_rollover.alpha = 0;
         this.button_rollover.visible = true;
         TweenLite.to(this.button_rollover,0.25,{
            "ease":Linear.easeNone,
            "alpha":1
         });
      }
      
      private function handleMouseOut(param1:MouseEvent) : void
      {
         if(this.button_rollover.visible)
         {
            TweenLite.to(this.button_rollover,0.25,{
               "ease":Linear.easeNone,
               "alpha":0,
               "onComplete":this.setDisplayObjectVisibility,
               "onCompleteParams":[this.button_rollover,false]
            });
         }
      }
      
      private function setDisplayObjectVisibility(param1:DisplayObject, param2:Boolean) : void
      {
         param1.visible = param2;
      }
      
      public function deactivateBackground() : void
      {
         TweenLite.to(this.background_active,0.25,{
            "ease":Linear.easeNone,
            "alpha":0,
            "onComplete":this.setBitmapInvisible,
            "onCompleteParams":[this.background_active]
         });
      }
      
      private function setBitmapInvisible(param1:Bitmap) : void
      {
         param1.visible = false;
      }
      
      public function deactivate() : void
      {
         this.achievementDone = false;
         this.flashCount = 0;
         TweenMax.killTweensOf(this.achievement_gold);
         if(this.achievement_gold.visible)
         {
            this.fadeOutStar();
         }
      }
      
      public function activate(param1:int = 4) : void
      {
         this.achievementDone = true;
         this.flashCount = param1;
         this.achievement_gold.alpha = 0;
         this.achievement_gold.visible = true;
         TweenLite.to(this.achievement_gold,0.25,{
            "ease":Linear.easeNone,
            "alpha":1,
            "onComplete":this.handleFlashSymbol
         });
         this.background_active.alpha = 0;
         this.background_active.visible = true;
         TweenLite.to(this.background_active,0.25,{
            "ease":Linear.easeNone,
            "alpha":1
         });
      }
      
      private function handleFlashSymbol() : void
      {
         if(this.flashCount == -1 || this.flashCount > 1)
         {
            this.fadeOutStar();
         }
      }
      
      private function fadeOutStar() : void
      {
         TweenLite.to(this.achievement_gold,0.25,{
            "ease":Linear.easeNone,
            "alpha":0,
            "onComplete":this.handleFlashSymbol2
         });
         TweenLite.to(this.background_active,0.25,{
            "ease":Linear.easeNone,
            "alpha":0
         });
      }
      
      private function handleFlashSymbol2() : void
      {
         this.achievement_gold.visible = false;
         this.background_active.visible = false;
         if(this.flashCount == -1)
         {
            this.activate(this.flashCount);
         }
         else if(this.flashCount > 1)
         {
            --this.flashCount;
            this.activate(this.flashCount);
         }
      }
      
      public function update(param1:Boolean, param2:int) : void
      {
         if(this.achievementDone != param1)
         {
            if(param1)
            {
               this.activate(4);
            }
            else
            {
               this.deactivate();
            }
         }
      }
      
      public function get order() : int
      {
         return this._order;
      }
      
      public function set order(param1:int) : void
      {
         this._order = param1;
      }
      
      private function formatPrice() : String
      {
         var _loc2_:String = null;
         var _loc8_:Boolean = false;
         var _loc3_:* = "isoprice";
         var _loc4_:String = "%CODE%";
         var _loc5_:* = "isocode";
         var _loc6_:String = "";
         var _loc7_:String = arguments[1];
         if(_loc7_.length > 0)
         {
            if(_loc7_.charAt(0) == "|")
            {
               _loc7_ = _loc7_.substring(1,_loc7_.length);
            }
            _loc6_ = _loc7_;
            if(_loc6_.search(/WORD/) > -1)
            {
               _loc3_ = "price_word";
               _loc4_ = "%WORD%";
               _loc5_ = "word";
               if(_loc6_.search(/CAPS/) > -1)
               {
                  _loc8_ = true;
               }
            }
            else if(_loc6_.search(/ISO/) > -1)
            {
               _loc3_ = "isoprice";
               _loc4_ = "%CODE%";
               _loc5_ = "isocode";
            }
            else if(_loc6_.search(/SYMBOL/) > -1)
            {
               _loc3_ = "pricetag_symbol";
               _loc4_ = "%SYMBOL%";
               _loc5_ = "symbol";
            }
         }
         if(this.localPrice < 1 && _loc4_ != "%CODE%")
         {
            _loc3_ += "_sub";
            _loc5_ += "sub";
         }
         if(_loc8_)
         {
            _loc5_ += "caps";
         }
         _loc2_ = BPLocale.getText(_loc3_);
         var _loc9_:String = "currency_" + _loc5_ + "_" + this.localCurrency;
         _loc2_ = _loc2_.replace(_loc4_,BPLocale.getText(_loc9_));
         _loc2_ = _loc2_.replace(/%FULL%/,BPLocale.roundInteger(Math.floor(this.localPrice)));
         var _loc10_:String = this.localPrice.toFixed(2);
         return _loc2_.replace(/%SUB%/,_loc10_.substring(_loc10_.indexOf(".") + 1,_loc10_.length));
      }
   }
}

package net.bigpoint.darkorbit.achievement
{
   import com.bigpoint.utils.BPLocale;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import fl.containers.ScrollPane;
   import flash.display.Bitmap;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.MouseEvent;
   import flash.geom.Rectangle;
   import flash.net.URLLoader;
   import flash.net.URLRequest;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.pattern.AchievementPattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class AchievementManager
   {
      
      public static const logger:ILogger = Log.getLogger("AchievementManager");
      
      private var simpleContainer:SimpleContainer;
      
      private var scrollPane:ScrollPane;
      
      private var guiManager:GuiManager;
      
      public var achievements:Array = [];
      
      private var order:int = 0;
      
      private var updateBufferList:Array = [];
      
      private var scrollPanePaddingY:int = 0;
      
      public function AchievementManager(param1:GuiManager)
      {
         super();
         this.guiManager = param1;
      }
      
      public function getOrder() : int
      {
         return this.order++;
      }
      
      public function removeAchievementWindow() : void
      {
         var _loc2_:Array = null;
         var _loc3_:String = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc1_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_ACHIEVMENT);
         if(_loc1_ != null)
         {
            _loc1_.removeEventListener(SimpleWindow.ON_RESIZE,this.onResizeAchievementWindow);
            _loc1_.removeEventListener(SimpleWindow.ON_RESIZED,this.guiManager.handleWindowResized);
            _loc1_.removeEventListener(SimpleWindow.ON_MAXIMIZE_CLICKED,this.handleMaximizeClicked);
            _loc1_.removeEventListener(SimpleWindow.ON_MAXIMIZED,this.handleMaximized);
            _loc2_ = new Array();
            for(_loc3_ in this.achievements)
            {
               _loc2_.push(_loc3_);
            }
            _loc4_ = 0;
            while(_loc4_ < _loc2_.length)
            {
               _loc5_ = parseInt(_loc2_[_loc4_]);
               this.removeAchievement(_loc5_);
               _loc4_++;
            }
            this.guiManager.closeWindow(_loc1_);
            this.simpleContainer = null;
            this.scrollPane = null;
         }
      }
      
      private function createAchievementWindow() : SimpleWindow
      {
         var _loc1_:SimpleWindow = this.guiManager.createWindow(SimpleWindow.WINDOW_CLASS_ACHIEVMENT);
         _loc1_.maxWindowHeight = 460;
         _loc1_.minWindowHeight = 150;
         var _loc2_:Rectangle = new Rectangle(460,0,0,500);
         _loc1_.setResizementBounds(_loc2_);
         _loc1_.addEventListener(SimpleWindow.ON_RESIZE,this.onResizeAchievementWindow);
         _loc1_.addEventListener(SimpleWindow.ON_RESIZED,this.guiManager.handleWindowResized);
         _loc1_.addEventListener(SimpleWindow.ON_MAXIMIZE_CLICKED,this.handleMaximizeClicked);
         _loc1_.addEventListener(SimpleWindow.ON_MAXIMIZED,this.handleMaximized);
         this.simpleContainer = new SimpleContainer(this.guiManager,SimpleContainer.CLASS_DEFAULT);
         this.scrollPanePaddingY = 16;
         var _loc3_:Bitmap = ResourceManager.getBitmap("achievement","info_background.png");
         _loc3_.x = 15;
         _loc3_.y = 38;
         this.scrollPanePaddingY += _loc3_.y;
         _loc1_.getRootContainer().addChild(_loc3_);
         var _loc4_:TextField = new TextField();
         var _loc5_:TextFormat = new TextFormat(Styles.plainBigFmt.font,Styles.plainStdFontHeight,16777215);
         _loc5_.align = TextFormatAlign.LEFT;
         _loc4_.defaultTextFormat = _loc5_;
         _loc4_.embedFonts = Styles.plainStdEmbed;
         _loc4_.wordWrap = true;
         _loc4_.multiline = true;
         _loc4_.antiAliasType = AntiAliasType.ADVANCED;
         _loc4_.autoSize = TextFieldAutoSize.LEFT;
         _loc4_.selectable = false;
         _loc4_.width = _loc3_.width - 32 - 4;
         _loc4_.text = BPLocale.getText("achievement_header");
         _loc3_.height = _loc4_.height + 10;
         this.scrollPanePaddingY += _loc3_.height;
         _loc4_.x = _loc3_.x + 4;
         _loc4_.y = 38 + 4;
         _loc1_.getRootContainer().addChild(_loc4_);
         this.scrollPane = new ScrollPane();
         this.scrollPane.source = this.simpleContainer;
         this.scrollPane.move(_loc3_.x,_loc3_.y + _loc3_.height);
         _loc1_.getRootContainer().addChild(this.scrollPane);
         return _loc1_;
      }
      
      private function handleMaximizeClicked(param1:Event) : void
      {
         var _loc2_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_ACHIEVMENT);
         this.guiManager.stopFlashWindowIcon(_loc2_.classID);
      }
      
      private function handleMaximized(param1:Event) : void
      {
         TweenMax.delayedCall(0.5,this.checkUpdateBuffer);
      }
      
      private function checkUpdateBuffer() : void
      {
         var _loc1_:UpdateBuffer = null;
         if(this.updateBufferList.length > 0)
         {
            _loc1_ = this.updateBufferList.shift();
            this.updateAchievement(_loc1_.achievementID,_loc1_.achievementDone,_loc1_.bargainState);
         }
      }
      
      private function handleBtnClick(param1:MouseEvent) : void
      {
      }
      
      private function onResizeAchievementWindow(param1:Event) : void
      {
         var _loc2_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_ACHIEVMENT);
         if(_loc2_ != null && this.scrollPane != null)
         {
            this.scrollPane.setSize(450,_loc2_.getWindow().height - this.scrollPanePaddingY);
            this.scrollPane.refreshPane();
         }
      }
      
      public function setAchievement(param1:int, param2:Boolean, param3:int) : void
      {
         var _loc4_:AchievementElement = this.getAchievement(param1);
         if(_loc4_ == null)
         {
            this.addAchievement(param1,-1,param2,param3);
         }
         else
         {
            this.updateAchievement(param1,param2,param3);
         }
      }
      
      public function addAchievement(param1:int, param2:int, param3:Boolean, param4:int) : AchievementElement
      {
         var _loc5_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_ACHIEVMENT);
         if(_loc5_ == null)
         {
            _loc5_ = this.createAchievementWindow();
            this.loadAchievementPrices();
         }
         var _loc6_:AchievementElement = new AchievementElement(this.guiManager.getMain().getConnectionManager(),param1,param2,param3,param4);
         var _loc7_:AchievementPattern = PatternManager.achievementPatterns[param1];
         var _loc8_:String = _loc7_.languageKey;
         _loc6_.setAchievementText("achievement_" + _loc8_ + "_header","achievement_" + _loc8_ + "_directive");
         _loc6_.setRewardText("achievement_" + _loc8_ + "_reward");
         _loc6_.setTooltip("achievement_" + _loc8_ + "_tooltip");
         this.simpleContainer.addElement(_loc6_,0,0);
         this.achievements.push(_loc6_);
         this.scrollPane.setSize(450,200);
         this.scrollPane.invalidate();
         this.scrollPane.refreshPane();
         _loc5_.refreshMask();
         return _loc6_;
      }
      
      public function removeAchievement(param1:int) : void
      {
         var _loc2_:AchievementElement = null;
         var _loc3_:int = 0;
         while(_loc3_ < this.achievements.length)
         {
            _loc2_ = this.achievements[_loc3_];
            if(_loc2_.achievementID == param1)
            {
               this.achievements.splice(_loc3_,1);
               _loc2_.cleanup();
               this.simpleContainer.removeElement(_loc2_);
               break;
            }
            _loc3_++;
         }
      }
      
      private function getAchievement(param1:int) : AchievementElement
      {
         var _loc3_:AchievementElement = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.achievements.length)
         {
            _loc3_ = this.achievements[_loc2_];
            if(_loc3_.achievementID == param1)
            {
               return _loc3_;
            }
            _loc2_++;
         }
         return null;
      }
      
      public function updateAchievement(param1:int, param2:Boolean, param3:int) : void
      {
         var _loc6_:int = 0;
         var _loc7_:AchievementElement = null;
         var _loc8_:int = 0;
         var _loc9_:Boolean = false;
         var _loc10_:AchievementElement = null;
         var _loc11_:AchievementElement = null;
         var _loc12_:int = 0;
         var _loc13_:AchievementElement = null;
         var _loc14_:int = 0;
         var _loc4_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_ACHIEVMENT);
         var _loc5_:AchievementElement = this.getAchievement(param1);
         if(_loc5_.bargainState == param3 && _loc5_.achievementDone == param2)
         {
            return;
         }
         if(_loc4_ != null)
         {
            if(!_loc4_.isMaximized())
            {
               this.updateBufferList.push(new UpdateBuffer(param1,param2,param3));
               AudioManager.playSoundEffect(51);
               this.guiManager.flashWindowIcon(_loc4_.classID,-1,false);
               return;
            }
            _loc6_ = 0;
            while(_loc6_ < this.achievements.length)
            {
               _loc11_ = this.achievements[_loc6_];
               _loc11_.order = -1;
               _loc6_++;
            }
            _loc7_ = this.achievements[0];
            if(_loc7_.achievementDone)
            {
               _loc7_.order = AchievementPattern.MAX_ID - 1;
            }
            _loc8_ = _loc5_.questID;
            _loc9_ = _loc5_.achievementDone;
            this.removeAchievement(param1);
            _loc10_ = this.addAchievement(param1,_loc8_,_loc9_,param3);
            _loc10_.y = _loc5_.y;
            if(!_loc9_ && param2)
            {
               _loc10_.activate();
               _loc10_.order = 0;
               _loc12_ = 1;
               _loc14_ = 0;
               while(_loc14_ < this.achievements.length)
               {
                  _loc13_ = this.achievements[_loc14_];
                  if(_loc13_.order == -1)
                  {
                     _loc13_.order = _loc12_;
                     _loc12_++;
                  }
                  _loc14_++;
               }
               this.resortAchievements();
               TweenLite.to(this.scrollPane,1,{"verticalScrollPosition":0});
            }
            else if(_loc9_ && !param2)
            {
               _loc10_.deactivate();
            }
            if(param2)
            {
               AudioManager.playSoundEffect(51);
               if(!_loc4_.isMaximized())
               {
                  this.guiManager.flashWindowIcon(_loc4_.classID,-1,false);
               }
            }
         }
      }
      
      private function resortAchievements() : void
      {
         var _loc3_:AchievementElement = null;
         this.achievements.sortOn("order",Array.NUMERIC);
         var _loc1_:int = 0;
         var _loc2_:int = 0;
         while(_loc2_ < this.achievements.length)
         {
            _loc3_ = this.achievements[_loc2_];
            _loc3_.y = _loc1_;
            _loc1_ += 72;
            _loc2_++;
         }
         this.invalidateScrollPane();
      }
      
      private function invalidateScrollPane() : void
      {
         this.scrollPane.invalidate();
         this.scrollPane.refreshPane();
      }
      
      public function loadAchievementPrices() : void
      {
         var _loc1_:URLRequest = new URLRequest(Settings.dynamicHost + "flashinput/dynamicPaymentItems.php");
         var _loc2_:URLLoader = new URLLoader();
         _loc2_.addEventListener(Event.COMPLETE,this.handleAchievementPricesXMLLoaded);
         _loc2_.addEventListener(IOErrorEvent.IO_ERROR,this.handleXMLLoadingError);
         _loc2_.load(_loc1_);
      }
      
      private function handleAchievementPricesXMLLoaded(param1:Event) : void
      {
         var xml:XML = null;
         var item:XML = null;
         var achievementID:int = 0;
         var priceValue:Number = NaN;
         var priceCurrency:String = null;
         var achievementPattern:AchievementPattern = null;
         var achievement:AchievementElement = null;
         var event:Event = param1;
         try
         {
            xml = XML(event.currentTarget.data);
         }
         catch(e:Error)
         {
         }
         for each(item in xml.achievements.item)
         {
            achievementID = int(item.@id);
            priceValue = Number(item.@price);
            priceCurrency = item.@currency;
            achievementPattern = PatternManager.achievementPatterns[achievementID];
            if(achievementPattern != null)
            {
               achievementPattern.priceValue = priceValue;
               achievementPattern.priceCurrency = priceCurrency;
            }
            achievement = this.getAchievement(achievementID);
            achievement.updatePriceField();
         }
      }
      
      private function handleXMLLoadingError(param1:IOErrorEvent) : void
      {
      }
   }
}

package net.bigpoint.darkorbit.achievement
{
   public class UpdateBuffer
   {
      
      public var achievementID:int;
      
      public var achievementDone:Boolean;
      
      public var bargainState:int;
      
      public function UpdateBuffer(param1:int, param2:Boolean, param3:int)
      {
         super();
         this.achievementID = param1;
         this.achievementDone = param2;
         this.bargainState = param3;
      }
   }
}

package net.bigpoint.darkorbit.alienmothership
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.media.SoundChannel;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   
   public class AlienMothership extends Sprite
   {
      
      public static const logger:ILogger = Log.getLogger("AlienMothership");
      
      private static var PLAY_DEFAULT:int = 0;
      
      private static var PLAY_LOOP:int = 1;
      
      private static var PLAY_AND_SET_INVISIBLE:int = 2;
      
      private var id:int;
      
      private var alienMothership:MovieClip;
      
      private var idleBitmap:Bitmap;
      
      private var resKey:String = "alienMothership";
      
      private var screenManager:ScreenManager;
      
      private var rotateSound:SoundChannel;
      
      public var clipLoaded:Boolean;
      
      public function AlienMothership(param1:int, param2:ScreenManager)
      {
         super();
         this.id = param1;
         this.screenManager = param2;
      }
      
      public function init() : void
      {
         if(ResourceManager.fileCollection.isLoaded(this.resKey))
         {
            this.attachClip();
         }
         else
         {
            ResourceManager.fileCollection.load(this.resKey,this.onClipLoaded);
         }
      }
      
      private function onClipLoaded(param1:SWFFinisher) : void
      {
         this.attachClip();
      }
      
      private function attachClip() : void
      {
         this.alienMothership = ResourceManager.getMovieClip(this.resKey,"alienMothership");
         this.addChild(this.alienMothership);
         this.idleBitmap = ResourceManager.getBitmap(this.resKey,"idleBitmap");
         this.idleBitmap.x = -this.idleBitmap.width / 2;
         this.idleBitmap.y = -this.idleBitmap.height / 2;
         this.idleBitmap.visible = false;
         this.addChild(this.idleBitmap);
         this.playAnimation(this.alienMothership,15,PLAY_DEFAULT,27,42);
         AudioManager.playSoundEffect(52);
         this.clipLoaded = true;
      }
      
      public function playAnimation(param1:MovieClip, param2:int, param3:int = 0, param4:int = 1, param5:int = -1) : void
      {
         if(param5 == -1)
         {
            param5 = param1.framesLoaded;
         }
         param1.gotoAndStop(param4);
         var _loc6_:Number = 0;
         if(param5 > param4)
         {
            _loc6_ = (param5 - param4) / param2;
         }
         else
         {
            _loc6_ = (param4 - param5) / param2;
         }
         switch(param3)
         {
            case PLAY_DEFAULT:
               param1.visible = true;
               TweenLite.to(param1,_loc6_,{
                  "ease":Linear.easeNone,
                  "frame":param5
               });
               break;
            case PLAY_LOOP:
               param1.visible = true;
               TweenLite.to(param1,_loc6_,{
                  "ease":Linear.easeNone,
                  "frame":param5,
                  "onComplete":this.playAnimation,
                  "onCompleteParams":[param1,param2,param3,param4,param5]
               });
               break;
            case PLAY_AND_SET_INVISIBLE:
               TweenLite.to(param1,_loc6_,{
                  "ease":Linear.easeNone,
                  "frame":param5,
                  "onComplete":this.setClipInvisible,
                  "onCompleteParams":[param1]
               });
         }
      }
      
      private function setClipInvisible(param1:MovieClip) : void
      {
         param1.visible = false;
      }
      
      public function startIdle() : void
      {
         TweenMax.killTweensOf(this.alienMothership);
         this.alienMothership.gotoAndStop(58);
         this.idleBitmap.alpha = 0;
         this.idleBitmap.visible = true;
         TweenLite.to(this.idleBitmap,0.5,{
            "ease":Linear.easeNone,
            "alpha":1,
            "onComplete":this.handleIdle,
            "onCompleteParams":[this.idleBitmap]
         });
      }
      
      public function stopAnimations() : void
      {
         TweenMax.killTweensOf(this.alienMothership);
         TweenMax.killTweensOf(this.idleBitmap);
         this.idleBitmap.visible = false;
         if(this.rotateSound != null)
         {
            AudioManager.removeLoop(this.rotateSound);
         }
      }
      
      private function handleIdle(param1:Bitmap) : void
      {
         TweenLite.to(param1,0.5,{
            "ease":Linear.easeNone,
            "alpha":0,
            "onComplete":this.startIdle
         });
      }
      
      public function prepareAttack(param1:int) : void
      {
         this.stopAnimations();
         if(param1 == 0)
         {
            this.playAnimation(this.alienMothership,15,PLAY_DEFAULT,17,26);
         }
         else if(param1 == 1)
         {
            this.playAnimation(this.alienMothership,15,PLAY_DEFAULT,26,17);
         }
         AudioManager.playSoundEffect(54);
      }
      
      public function prepareBigAttack(param1:int) : void
      {
         this.stopAnimations();
         if(param1 == 0)
         {
            this.playAnimation(this.alienMothership,15,PLAY_DEFAULT,1,16);
         }
         else if(param1 == 1)
         {
            this.playAnimation(this.alienMothership,15,PLAY_DEFAULT,16,1);
         }
         AudioManager.playSoundEffect(54);
      }
      
      public function cloak(param1:int) : void
      {
         this.stopAnimations();
         if(param1 == 0)
         {
            this.playAnimation(this.alienMothership,15,PLAY_AND_SET_INVISIBLE,42,27);
         }
         else if(param1 == 1)
         {
            this.visible = true;
            this.playAnimation(this.alienMothership,15,PLAY_DEFAULT,27,42);
         }
         AudioManager.playSoundEffect(52);
      }
      
      public function startRotation(param1:int) : void
      {
         this.stopAnimations();
         if(param1 == 0)
         {
            this.playAnimation(this.alienMothership,15,PLAY_LOOP,43,57);
         }
         else if(param1 == 1)
         {
            this.playAnimation(this.alienMothership,15,PLAY_LOOP,57,43);
         }
         this.rotateSound = AudioManager.playSoundEffect(53,true);
      }
   }
}

package net.bigpoint.darkorbit.alienmothership
{
   import com.greensock.TweenLite;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   
   public class AlienMothershipManager
   {
      
      public var alienMotherships:Array = [];
      
      public var screenManager:ScreenManager;
      
      public function AlienMothershipManager(param1:ScreenManager)
      {
         super();
         this.screenManager = param1;
      }
      
      public function rotateAlienMothership(param1:int, param2:int) : void
      {
         var _loc3_:AlienMothership = this.alienMotherships[param1];
         if(_loc3_ != null && _loc3_.clipLoaded)
         {
            _loc3_.startRotation(param2);
         }
      }
      
      public function prepareAttack(param1:int, param2:int) : void
      {
         var _loc3_:AlienMothership = this.alienMotherships[param1];
         if(_loc3_ != null && _loc3_.clipLoaded)
         {
            _loc3_.prepareAttack(param2);
         }
      }
      
      public function prepareBigAttack(param1:int, param2:int) : void
      {
         var _loc3_:AlienMothership = this.alienMotherships[param1];
         if(_loc3_ != null && _loc3_.clipLoaded)
         {
            _loc3_.prepareBigAttack(param2);
         }
      }
      
      public function cloak(param1:int, param2:int) : void
      {
         var _loc3_:AlienMothership = this.alienMotherships[param1];
         if(_loc3_ != null)
         {
            if(_loc3_.clipLoaded)
            {
               _loc3_.cloak(param2);
            }
            else if(param2 == 0)
            {
               _loc3_.visible = false;
            }
            else
            {
               _loc3_.visible = true;
            }
         }
      }
      
      public function idle(param1:int) : void
      {
         var _loc2_:AlienMothership = this.alienMotherships[param1];
         if(_loc2_ != null && _loc2_.clipLoaded)
         {
            _loc2_.startIdle();
         }
      }
      
      public function kill(param1:int) : void
      {
         var _loc2_:AlienMothership = this.alienMotherships[param1];
         this.screenManager.map.getMain().screenManager.flashScreen(16777215,0.75,0.25,2);
         AudioManager.playSoundEffect(18,false,false,_loc2_.x,_loc2_.y);
         this.screenManager.map.getCombatManager().showShockwave(0,_loc2_.x,_loc2_.y,true);
         this.screenManager.map.getMain().screenManager.shakeScreen();
         this.screenManager.getShipLayer().removeChild(_loc2_);
         _loc2_.stopAnimations();
         delete this.alienMotherships[param1];
      }
      
      public function move(param1:int, param2:int, param3:int, param4:int) : void
      {
         var _loc5_:AlienMothership = this.alienMotherships[param1];
         if(_loc5_ != null)
         {
            TweenLite.to(_loc5_,param4,{
               "x":param2,
               "y":param3
            });
         }
      }
      
      public function createAlienMothership(param1:int, param2:int, param3:int) : void
      {
         var _loc4_:AlienMothership = new AlienMothership(param1,this.screenManager);
         _loc4_.x = param2;
         _loc4_.y = param3;
         this.screenManager.getShipLayer().addChild(_loc4_);
         _loc4_.init();
         this.alienMotherships[param1] = _loc4_;
      }
   }
}

package net.bigpoint.darkorbit.audio
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import flash.events.Event;
   import flash.media.Sound;
   import flash.media.SoundChannel;
   import flash.media.SoundTransform;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.FastMath;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.Ship;
   
   public class AudioManager
   {
      
      private static var main:Main;
      
      private static var musicSndChannel:SoundChannel;
      
      private static var sndCnt:int;
      
      public static const logger:ILogger = Log.getLogger("AudioManager");
      
      private static var lastTrack:String = "-1";
      
      private static var soundRadius:int = 800;
      
      public function AudioManager()
      {
         super();
      }
      
      public static function init(param1:Main) : void
      {
         main = param1;
      }
      
      public static function loadMusic(param1:int) : void
      {
         var _loc2_:AudioPattern = PatternManager.musicPatterns[int(param1)];
         if(ResourceManager.fileCollection.isLoaded(_loc2_.getResKey()))
         {
            playMusic(_loc2_,_loc2_.getVolume());
         }
         else
         {
            ResourceManager.fileCollection.load(_loc2_.getResKey(),onMusicLoaded);
         }
      }
      
      public static function stopMusic() : void
      {
         if(musicSndChannel != null)
         {
            musicSndChannel.stop();
         }
         lastTrack = "-1";
      }
      
      private static function onMusicLoaded(param1:SWFFinisher) : void
      {
         var _loc3_:AudioPattern = null;
         var _loc2_:int = 0;
         while(_loc2_ < PatternManager.musicPatterns.length)
         {
            _loc3_ = PatternManager.musicPatterns[_loc2_];
            if(_loc3_.getResKey() == param1.fileVO.id)
            {
               playMusic(_loc3_,_loc3_.getVolume());
            }
            _loc2_++;
         }
      }
      
      private static function playMusic(param1:AudioPattern, param2:Number) : void
      {
         if(lastTrack == param1.getResKey())
         {
            return;
         }
         if(musicSndChannel != null)
         {
            musicSndChannel.stop();
         }
         var _loc3_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(param1.getResKey()));
         lastTrack = param1.getResKey();
         var _loc4_:Sound = Sound(_loc3_.getEmbededSound("track"));
         musicSndChannel = _loc4_.play(0,9999,new SoundTransform(param2,0));
      }
      
      public static function playSoundEffect(param1:int, param2:Boolean = false, param3:Boolean = false, param4:int = -1, param5:int = -1, param6:Boolean = true) : SoundChannel
      {
         var _loc10_:SoundChannel = null;
         var _loc14_:Ship = null;
         var _loc15_:Number = NaN;
         var _loc16_:Number = NaN;
         var _loc17_:Number = NaN;
         var _loc18_:Number = NaN;
         if(!param6 && sndCnt > 10)
         {
            return null;
         }
         if(!Settings.playSFX)
         {
            return null;
         }
         var _loc7_:AudioPattern = PatternManager.soundPatterns[param1];
         var _loc8_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc7_.soundbank));
         var _loc9_:Sound = Sound(_loc8_.getEmbededSound(_loc7_.getResKey()));
         var _loc11_:Number = _loc7_.getVolume();
         var _loc12_:SoundTransform = new SoundTransform(_loc11_,0);
         var _loc13_:Map = main.screenManager.map;
         if(_loc13_ != null && param4 != -1 && param5 != -1)
         {
            _loc14_ = _loc13_.getShipManager().getHero();
            if(_loc14_ != null)
            {
               _loc15_ = Math.pow(_loc14_.y - param5,2) + Math.pow(_loc14_.x - param4,2);
               if(_loc15_ > soundRadius * soundRadius)
               {
                  return null;
               }
               _loc16_ = FastMath.sqrt(_loc15_);
               _loc17_ = _loc11_ - _loc11_ / soundRadius * _loc16_;
               _loc12_.volume = _loc17_;
               _loc18_ = -1 * (1 / 500) * (_loc14_.x - param4);
               _loc12_.pan = _loc18_;
            }
         }
         if(param2)
         {
            if(param3)
            {
               _loc10_ = _loc9_.play(0,9999,_loc12_);
               TweenLite.to(_loc12_,0.75,{
                  "volume":_loc7_.getVolume(),
                  "onUpdate":updateChannel,
                  "onUpdateParams":[_loc10_,_loc12_]
               });
            }
            else
            {
               _loc10_ = _loc9_.play(0,9999,_loc12_);
            }
         }
         else
         {
            _loc10_ = _loc9_.play(0,0,_loc12_);
         }
         if(_loc10_ == null)
         {
            return null;
         }
         _loc10_.addEventListener(Event.SOUND_COMPLETE,soundComplete);
         ++sndCnt;
         return _loc10_;
      }
      
      private static function soundComplete(param1:Event) : void
      {
         var _loc2_:SoundChannel = param1.currentTarget as SoundChannel;
         _loc2_.removeEventListener(Event.SOUND_COMPLETE,soundComplete);
         --sndCnt;
      }
      
      private static function updateChannel(param1:SoundChannel, param2:SoundTransform) : void
      {
         if(param1 != null)
         {
            param1.soundTransform = param2;
         }
      }
      
      public static function removeLoop(param1:SoundChannel, param2:Boolean = false) : void
      {
         var _loc3_:SoundTransform = null;
         if(param2)
         {
            _loc3_ = param1.soundTransform;
            TweenLite.to(_loc3_,0.75,{
               "volume":0,
               "onUpdate":updateChannel,
               "onUpdateParams":[param1,_loc3_],
               "onComplete":removeLoop,
               "onCompleteParams":[param1,false]
            });
         }
         else
         {
            param1.stop();
            param1.removeEventListener(Event.SOUND_COMPLETE,soundComplete);
            --sndCnt;
         }
      }
   }
}

package net.bigpoint.darkorbit.audio
{
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   
   public class AudioPattern extends ResourcePattern
   {
      
      private var loop:Boolean;
      
      private var volume:Number = 1;
      
      private var _soundbank:String;
      
      public function AudioPattern(param1:int, param2:String, param3:String = null)
      {
         super(param1,param2);
         this._soundbank = param3;
      }
      
      public function isLoop() : Boolean
      {
         return this.loop;
      }
      
      public function setLoop(param1:Boolean) : void
      {
         this.loop = param1;
      }
      
      public function getVolume() : Number
      {
         return this.volume;
      }
      
      public function setVolume(param1:Number) : void
      {
         this.volume = param1;
      }
      
      public function get soundbank() : String
      {
         return this._soundbank;
      }
   }
}

package net.bigpoint.darkorbit.background
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.BitmapData;
   import net.bigpoint.as3toolbox.mapfactory.ReloadableTiledMap;
   import net.bigpoint.as3toolbox.mapfactory.TiledMap;
   import net.bigpoint.as3toolbox.mapfactory.TiledMapEvent;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.pattern.BackgroundPattern;
   import net.bigpoint.darkorbit.pattern.DynamicResource;
   import net.bigpoint.darkorbit.pattern.Pattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   
   public class Background extends DynamicResource
   {
      
      private var parallaxFactor:int;
      
      private var layerIndex:int;
      
      public var isMain:Boolean;
      
      public var isPOIZone:Boolean;
      
      public var hideLensflare:Boolean;
      
      public var shiftX:int;
      
      public var shiftY:int;
      
      public var scale:Number;
      
      public var width:int;
      
      public var height:int;
      
      public var offsetX:int = 0;
      
      public var offsetY:int = 0;
      
      public var equalNeighborsAllowed:Boolean = false;
      
      public var maskID:int;
      
      public var maskBd:BitmapData;
      
      public var tiledMap:TiledMap;
      
      private var tilesToLoadQueue:Vector.<String>;
      
      public function Background(param1:int, param2:Boolean, param3:int, param4:int, param5:Boolean, param6:int, param7:int, param8:Number, param9:int, param10:Boolean = false, param11:BitmapData = null)
      {
         super(param1);
         this.isMain = param2;
         this.parallaxFactor = param3;
         this.layerIndex = param4;
         this.hideLensflare = param5;
         this.shiftX = param6;
         this.shiftY = param7;
         this.scale = param8;
         this.maskID = param9;
         this.isPOIZone = param10;
         this.maskBd = param11;
      }
      
      public function initReloadableTiledMap() : void
      {
         this.tilesToLoadQueue = new Vector.<String>();
         this.tiledMap.addEventListener(TiledMapEvent.LOAD_REQUEST,this.handleTiledMapLoadRequest);
      }
      
      private function handleTiledMapLoadRequest(param1:TiledMapEvent) : void
      {
         var _loc2_:String = param1.fileKey;
         this.tilesToLoadQueue.push(_loc2_);
         var _loc3_:Pattern = PatternManager.backgroundPatterns[getTypeID()];
         if(ResourceManager.fileCollection.isLoaded(BackgroundPattern(_loc3_).getResKey()))
         {
            this.handleTileContainerLoaded();
         }
         else
         {
            this.loadTileContainer(BackgroundPattern(_loc3_).getResKey());
         }
      }
      
      private function loadTileContainer(param1:String) : void
      {
         ResourceManager.fileCollection.load(param1,this.handleTileContainerLoaded);
      }
      
      private function handleTileContainerLoaded() : void
      {
         var _loc3_:BitmapData = null;
         var _loc4_:String = null;
         var _loc1_:Pattern = PatternManager.backgroundPatterns[getTypeID()];
         var _loc2_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(BackgroundPattern(_loc1_).getResKey()));
         while(this.tilesToLoadQueue.length > 0)
         {
            _loc4_ = this.tilesToLoadQueue.pop();
            _loc3_ = _loc2_.getEmbededBitmapData(_loc4_);
            ReloadableTiledMap(this.tiledMap).updateReloadableTile(_loc4_,_loc3_);
         }
      }
      
      public function getParallaxFactor() : int
      {
         return this.parallaxFactor;
      }
      
      public function getLayerIndex() : int
      {
         return this.layerIndex;
      }
      
      public function cleanup() : void
      {
         var _loc1_:int = 0;
         if(clip != null)
         {
            _loc1_ = 0;
            while(_loc1_ < clip.numChildren)
            {
               clip.removeChildAt(0);
               _loc1_++;
            }
            if(clip.parent.contains(clip))
            {
               clip.parent.removeChild(clip);
            }
            clip = null;
         }
         if(this.tiledMap != null)
         {
            this.tiledMap.removeEventListener(TiledMapEvent.LOAD_REQUEST,this.handleTiledMapLoadRequest);
            this.tiledMap.cleanup();
            this.tiledMap = null;
         }
      }
   }
}

package net.bigpoint.darkorbit.background
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.as3toolbox.mapfactory.MapElement;
   import net.bigpoint.as3toolbox.mapfactory.ReloadableSimpleTile;
   import net.bigpoint.as3toolbox.mapfactory.ReloadableTiledMap;
   import net.bigpoint.as3toolbox.mapfactory.SimpleTile;
   import net.bigpoint.as3toolbox.mapfactory.Tile;
   import net.bigpoint.as3toolbox.mapfactory.TiledMap;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.map.MinimapManager;
   import net.bigpoint.darkorbit.pattern.BackgroundPattern;
   import net.bigpoint.darkorbit.pattern.Pattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.Ship;
   
   public class BackgroundManager
   {
      
      public static const logger:ILogger = Log.getLogger("BackgroundManager");
      
      private var resourceQueue:Array = [];
      
      private var map:Map;
      
      public function BackgroundManager(param1:Map)
      {
         super();
         this.map = param1;
         param1.getMain().screenManager.backgrounds = new Vector.<Background>();
      }
      
      public static function getRandomCount(param1:int, param2:int) : int
      {
         return param1 + Math.floor(Math.random() * (param2 - param1 + 1));
      }
      
      public function createBackground(param1:int, param2:Boolean, param3:int, param4:int, param5:Boolean, param6:int, param7:int, param8:Number, param9:int, param10:Boolean = false, param11:BitmapData = null) : void
      {
         var _loc14_:MovieClip = null;
         var _loc15_:Sprite = null;
         var _loc12_:Pattern = PatternManager.backgroundPatterns[int(param1)];
         if(_loc12_ == null)
         {
            return;
         }
         var _loc13_:Background = new Background(param1,param2,param3,param4,param5,param6,param7,param8,param9,param10,param11);
         this.map.getMain().screenManager.backgrounds.push(_loc13_);
         if(Settings.qualityBackground == Settings.QUALITY_HIGH || param2 && Settings.qualityBackground > Settings.QUALITY_LOW || param10 && Settings.qualityPoizone == Settings.QUALITY_HIGH)
         {
            if(_loc12_.getContentType() == Pattern.CONTENT_RESOURCE)
            {
               if(ResourceManager.fileCollection.isLoaded(BackgroundPattern(_loc12_).getResKey()))
               {
                  this.attachClip(_loc13_,BackgroundPattern(_loc12_));
               }
               else
               {
                  this.loadBackgroundResource(BackgroundPattern(_loc12_));
               }
            }
            else if(_loc12_.getContentType() == Pattern.CONTENT_CUSTOM)
            {
               _loc14_ = this.createCustomBackground(CustomBackgroundPattern(_loc12_).getWidth(),CustomBackgroundPattern(_loc12_).getHeight(),false,CustomBackgroundPattern(_loc12_).getColor());
               _loc13_.clip = _loc14_;
               _loc15_ = this.map.getMain().screenManager.getBackgroundLayer(param4);
               _loc15_.addChild(_loc14_);
            }
         }
         else if((Settings.qualityBackground == Settings.QUALITY_LOW || !MinimapManager.isInitialized) && !param10)
         {
            this.map.getMinimapManager().createMinimap();
         }
      }
      
      private function createCustomBackground(param1:int, param2:int, param3:Boolean, param4:uint) : MovieClip
      {
         var _loc5_:BitmapData = new BitmapData(param1,param2,param3,param4);
         var _loc6_:MovieClip = new MovieClip();
         _loc6_.mouseEnabled = Main.mouseEventsEnabled;
         _loc6_.mouseChildren = Main.mouseEventsEnabled;
         _loc6_.addChild(new Bitmap(_loc5_));
         var _loc7_:MovieClip = new MovieClip();
         _loc7_.mouseEnabled = Main.mouseEventsEnabled;
         _loc7_.addChild(_loc6_);
         _loc6_.x = _loc5_.width - _loc5_.width / this.map.getScaleFactor();
         _loc6_.y = _loc5_.height - _loc5_.height / this.map.getScaleFactor();
         return _loc7_;
      }
      
      private function loadBackgroundResource(param1:BackgroundPattern) : void
      {
         var _loc2_:String = param1.getResKey();
         var _loc3_:int = 0;
         while(_loc3_ < this.resourceQueue.length)
         {
            if(this.resourceQueue[_loc3_] == _loc2_)
            {
               return;
            }
            _loc3_++;
         }
         this.resourceQueue.push(_loc2_);
         ResourceManager.fileCollection.load(_loc2_,this.onClipLoaded);
      }
      
      private function onClipLoaded(param1:SWFFinisher) : void
      {
         var _loc3_:Background = null;
         var _loc4_:BackgroundPattern = null;
         if(Settings.unloadResources)
         {
            this.map.addFinisherToList(param1);
         }
         var _loc2_:String = param1.fileVO.id;
         for each(_loc3_ in this.map.getMain().screenManager.backgrounds)
         {
            if(_loc3_ != null)
            {
               _loc4_ = BackgroundPattern(PatternManager.backgroundPatterns[_loc3_.getTypeID()]);
               if(_loc4_.getResKey() == _loc2_)
               {
                  this.attachClip(_loc3_,_loc4_);
               }
            }
         }
      }
      
      private function attachClip(param1:Background, param2:BackgroundPattern) : void
      {
         var _loc5_:Sprite = null;
         var _loc6_:Sprite = null;
         var _loc7_:int = 0;
         var _loc8_:Array = null;
         var _loc9_:int = 0;
         var _loc10_:int = 0;
         var _loc11_:Boolean = false;
         var _loc12_:int = 0;
         var _loc13_:int = 0;
         var _loc14_:Array = null;
         var _loc15_:int = 0;
         var _loc16_:int = 0;
         var _loc17_:Vector.<Tile> = null;
         var _loc18_:int = 0;
         var _loc19_:SimpleTile = null;
         var _loc20_:int = 0;
         var _loc21_:int = 0;
         var _loc22_:TiledMap = null;
         var _loc23_:Ship = null;
         var _loc24_:BitmapData = null;
         var _loc25_:int = 0;
         var _loc26_:int = 0;
         var _loc27_:int = 0;
         var _loc28_:ResourcePattern = null;
         var _loc29_:BitmapData = null;
         var _loc30_:BitmapData = null;
         var _loc31_:BitmapData = null;
         var _loc32_:MovieClip = null;
         var _loc33_:MovieClip = null;
         var _loc3_:String = param2.getResKey();
         if(param1.clip != null)
         {
            _loc6_ = this.map.getMain().screenManager.getBackgroundLayer(param1.getLayerIndex());
            if(_loc6_.contains(param1.clip))
            {
               _loc6_.removeChild(param1.clip);
            }
            param1.clip = null;
         }
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc3_));
         if(param2.isTiled)
         {
            _loc8_ = _loc4_.getDefinitions();
            _loc7_ = int(_loc8_.length);
            if(param2.width > 0 && param2.height > 0)
            {
               param1.width = param2.width;
               param1.height = param2.height;
            }
            else if(param2.order == "ASC" || param2.order == "DESC")
            {
               param1.width = Math.round(this.map.serious_width / 10 * param1.scale);
               param1.height = Math.round(this.map.serious_height / 10 * param1.scale);
            }
            else
            {
               param1.width = Math.round(this.map.serious_width / param1.getParallaxFactor() * param1.scale);
               param1.height = Math.round(this.map.serious_height / param1.getParallaxFactor() * param1.scale);
            }
            if(param1.scale != 1)
            {
               param1.offsetX = -Math.round((param1.width - param1.width / param1.scale) / 2) + param1.shiftX;
               param1.offsetY = -Math.round((param1.height - param1.height / param1.scale) / 2) + param1.shiftY;
            }
            else
            {
               param1.offsetX = param1.shiftX;
               param1.offsetY = param1.shiftY;
            }
            _loc9_ = Math.round(param1.width / param2.tileWidth);
            _loc10_ = Math.round(param1.height / param2.tileHeight);
            _loc9_ = _loc9_ < 1 ? 1 : _loc9_;
            _loc10_ = _loc10_ < 1 ? 1 : _loc10_;
            _loc11_ = param1.equalNeighborsAllowed;
            if(_loc9_ >= 1 && _loc10_ >= 1)
            {
               _loc14_ = TiledMap.createMap(_loc9_,_loc10_);
               if(param1.maskID > 0 || param1.maskBd != null)
               {
                  if(param1.maskID > 0)
                  {
                     _loc28_ = PatternManager.backgroundMaskPatterns[param1.maskID];
                     _loc24_ = ResourceManager.getBitmapData(_loc28_.resKey,"mask");
                  }
                  else
                  {
                     _loc24_ = param1.maskBd;
                  }
                  _loc25_ = param1.width / _loc24_.width;
                  _loc15_ = 0;
                  while(_loc15_ < _loc10_)
                  {
                     _loc16_ = 0;
                     while(_loc16_ < _loc9_)
                     {
                        _loc26_ = Math.round((_loc16_ * param2.tileWidth + param2.tileWidth / 2) / _loc25_);
                        _loc27_ = Math.round((_loc15_ * param2.tileHeight + param2.tileHeight / 2) / _loc25_);
                        if(_loc24_.getPixel32(_loc26_,_loc27_) == 0)
                        {
                           (_loc14_[_loc15_][_loc16_] as MapElement).setTileID(0);
                        }
                        else if(_loc11_ || _loc7_ <= 1)
                        {
                           (_loc14_[_loc15_][_loc16_] as MapElement).setTileID(getRandomCount(1,_loc7_));
                        }
                        else
                        {
                           if(_loc15_ == 0 && _loc16_ == 0)
                           {
                              _loc13_ = getRandomCount(1,_loc7_);
                           }
                           else if(_loc15_ == 0)
                           {
                              while((_loc14_[_loc15_][_loc16_ - 1] as MapElement).getTileID() == _loc13_)
                              {
                                 _loc13_ = getRandomCount(1,_loc7_);
                              }
                           }
                           else if(_loc16_ == 0)
                           {
                              while((_loc14_[_loc15_ - 1][_loc16_] as MapElement).getTileID() == _loc13_)
                              {
                                 _loc13_ = getRandomCount(1,_loc7_);
                              }
                           }
                           else
                           {
                              while((_loc14_[_loc15_][_loc16_ - 1] as MapElement).getTileID() == _loc13_ || (_loc14_[_loc15_ - 1][_loc16_] as MapElement).getTileID() == _loc13_)
                              {
                                 _loc13_ = getRandomCount(1,_loc7_);
                              }
                           }
                           (_loc14_[_loc15_][_loc16_] as MapElement).setTileID(_loc13_);
                        }
                        _loc16_++;
                     }
                     _loc15_++;
                  }
               }
               else
               {
                  if(param2.order != null)
                  {
                     if(_loc8_ != null && _loc8_.indexOf("placeholder") >= 0)
                     {
                        _loc29_ = _loc4_.getEmbededBitmapData("placeholder");
                        _loc7_--;
                     }
                     switch(param2.order)
                     {
                        case "DESC":
                           _loc12_ = _loc7_;
                           break;
                        case "ASC":
                        default:
                           _loc12_ = 1;
                     }
                  }
                  _loc15_ = 0;
                  while(_loc15_ < _loc10_)
                  {
                     _loc16_ = 0;
                     while(_loc16_ < _loc9_)
                     {
                        if(param2.order != null)
                        {
                           (_loc14_[_loc15_][_loc16_] as MapElement).setTileID(_loc12_);
                           switch(param2.order)
                           {
                              case "DESC":
                                 if(--_loc12_ < 1)
                                 {
                                    _loc12_ = _loc7_;
                                 }
                                 break;
                              case "ASC":
                                 if(++_loc12_ > _loc7_)
                                 {
                                    _loc12_ = 1;
                                 }
                           }
                        }
                        else if(_loc11_ || _loc7_ <= 1)
                        {
                           (_loc14_[_loc15_][_loc16_] as MapElement).setTileID(getRandomCount(1,_loc7_));
                        }
                        else
                        {
                           if(_loc15_ == 0 && _loc16_ == 0)
                           {
                              _loc13_ = getRandomCount(1,_loc7_);
                           }
                           else if(_loc15_ == 0)
                           {
                              while((_loc14_[_loc15_][_loc16_ - 1] as MapElement).getTileID() == _loc13_)
                              {
                                 _loc13_ = getRandomCount(1,_loc7_);
                              }
                           }
                           else if(_loc16_ == 0)
                           {
                              while((_loc14_[_loc15_ - 1][_loc16_] as MapElement).getTileID() == _loc13_)
                              {
                                 _loc13_ = getRandomCount(1,_loc7_);
                              }
                           }
                           else
                           {
                              while((_loc14_[_loc15_][_loc16_ - 1] as MapElement).getTileID() == _loc13_ || (_loc14_[_loc15_ - 1][_loc16_] as MapElement).getTileID() == _loc13_)
                              {
                                 _loc13_ = getRandomCount(1,_loc7_);
                              }
                           }
                           (_loc14_[_loc15_][_loc16_] as MapElement).setTileID(_loc13_);
                        }
                        _loc16_++;
                     }
                     _loc15_++;
                  }
               }
               _loc17_ = new Vector.<Tile>();
               _loc18_ = 0;
               if(param1.maskID > 0 || param1.maskBd != null)
               {
                  if(param2.isReloadable)
                  {
                     _loc17_.push(new ReloadableSimpleTile(_loc18_,"blank"));
                  }
                  else
                  {
                     _loc30_ = this.getColoredBitmapData(param2.tileWidth,param2.tileHeight);
                     _loc17_.push(new SimpleTile(_loc18_,_loc30_,_loc3_ + _loc18_));
                  }
               }
               else
               {
                  _loc17_.push(null);
               }
               _loc19_ = null;
               _loc18_ = 1;
               while(_loc18_ <= _loc7_)
               {
                  if(param2.isReloadable)
                  {
                     _loc19_ = new ReloadableSimpleTile(_loc18_,this.getFileName(_loc18_));
                  }
                  else
                  {
                     _loc19_ = new SimpleTile(_loc18_,_loc4_.getEmbededBitmapData(this.getFileName(_loc18_)),_loc3_ + _loc18_);
                  }
                  _loc17_.push(_loc19_);
                  _loc18_++;
               }
               _loc20_ = ScreenManager.MASTER_SCREEN_WIDTH;
               _loc21_ = ScreenManager.MASTER_SCREEN_HEIGHT;
               if(param2.isReloadable)
               {
                  _loc22_ = new ReloadableTiledMap(_loc14_,_loc17_,_loc20_,_loc21_,param2.tileWidth,param2.tileHeight,_loc29_);
                  param1.tiledMap = _loc22_;
                  param1.initReloadableTiledMap();
               }
               else
               {
                  _loc22_ = new TiledMap(_loc14_,_loc17_,_loc20_,_loc21_,param2.tileWidth,param2.tileHeight);
                  param1.tiledMap = _loc22_;
               }
               _loc23_ = this.map.getShipManager().getHero();
               if(_loc23_ != null)
               {
                  param1.tiledMap.setPosition(_loc23_.x,_loc23_.y);
               }
               _loc5_ = this.map.getMain().screenManager.getBackgroundLayer(param1.getLayerIndex());
               _loc5_.addChild(param1.tiledMap);
               if(param1.maskBd != null)
               {
                  param1.maskBd.dispose();
                  param1.maskBd = null;
               }
            }
         }
         else
         {
            _loc31_ = _loc4_.getEmbededBitmapData("background");
            if(!MinimapManager.isInitialized && param1.isMain)
            {
               this.map.getMinimapManager().createMinimap(_loc3_);
            }
            _loc32_ = new MovieClip();
            _loc32_.addChild(new Bitmap(_loc31_));
            _loc33_ = new MovieClip();
            _loc33_.addChild(_loc32_);
            if(this.map.serious_width / param1.getParallaxFactor() != _loc31_.width)
            {
               param1.offsetX = Math.round((this.map.serious_width / param1.getParallaxFactor() - _loc31_.width) / 2) + param1.shiftX;
               param1.offsetY = Math.round((this.map.serious_height / param1.getParallaxFactor() - _loc31_.height) / 2) + param1.shiftY;
            }
            param1.clip = _loc33_;
            _loc33_.alpha = 0;
            _loc5_ = this.map.getMain().screenManager.getBackgroundLayer(param1.getLayerIndex());
            _loc5_.addChild(_loc33_);
            TweenLite.to(_loc33_,1,{"alpha":1});
         }
      }
      
      private function getFileName(param1:int = -1) : String
      {
         if(param1 == -1)
         {
            param1 = getRandomCount(1,12);
         }
         var _loc2_:String = "tile_";
         if(param1 < 10)
         {
            _loc2_ = _loc2_ + "0" + param1;
         }
         else
         {
            _loc2_ += param1;
         }
         return _loc2_;
      }
      
      public function getColoredBitmapData(param1:int, param2:int, param3:uint = 0) : BitmapData
      {
         return new BitmapData(param1,param2,true,param3);
      }
      
      public function getBackground(param1:int = 0) : Background
      {
         var _loc2_:Background = null;
         for each(_loc2_ in this.map.getMain().screenManager.backgrounds)
         {
            if(_loc2_ != null)
            {
               if(_loc2_.getLayerIndex() == param1)
               {
                  return _loc2_;
               }
            }
         }
         return null;
      }
      
      public function updateBackgroundQuality(param1:int) : void
      {
         var _loc2_:Pattern = null;
         var _loc3_:Background = null;
         if(Settings.qualityBackground != param1)
         {
            for each(_loc3_ in this.map.getMain().screenManager.backgrounds)
            {
               if(_loc3_ != null)
               {
                  _loc2_ = PatternManager.backgroundPatterns[_loc3_.getTypeID()];
                  switch(Settings.qualityBackground)
                  {
                     case Settings.QUALITY_LOW:
                        if(!_loc3_.isPOIZone)
                        {
                           _loc3_.cleanup();
                        }
                        break;
                     case Settings.QUALITY_MEDIUM:
                     case Settings.QUALITY_GOOD:
                        if(!_loc3_.isPOIZone && !_loc3_.isMain)
                        {
                           _loc3_.cleanup();
                        }
                        if(_loc3_.isMain && _loc3_.clip == null && _loc3_.tiledMap == null)
                        {
                           if(ResourceManager.fileCollection.isLoaded(BackgroundPattern(_loc2_).getResKey()))
                           {
                              this.attachClip(_loc3_,BackgroundPattern(_loc2_));
                           }
                           else
                           {
                              this.loadBackgroundResource(BackgroundPattern(_loc2_));
                           }
                        }
                        break;
                     case Settings.QUALITY_HIGH:
                        if(_loc3_.clip == null && _loc3_.tiledMap == null)
                        {
                           if(ResourceManager.fileCollection.isLoaded(BackgroundPattern(_loc2_).getResKey()))
                           {
                              this.attachClip(_loc3_,BackgroundPattern(_loc2_));
                           }
                           else
                           {
                              this.loadBackgroundResource(BackgroundPattern(_loc2_));
                           }
                        }
                  }
               }
            }
         }
      }
      
      public function cleanup() : void
      {
         var _loc1_:Background = null;
         for each(_loc1_ in this.map.getMain().screenManager.backgrounds)
         {
            if(_loc1_ != null)
            {
               _loc1_.cleanup();
            }
         }
         this.map.getMain().screenManager.backgrounds = new Vector.<Background>();
         this.resourceQueue = [];
      }
   }
}

package net.bigpoint.darkorbit.background
{
   import net.bigpoint.darkorbit.pattern.CustomPattern;
   
   public class CustomBackgroundPattern extends CustomPattern
   {
      
      private var width:int;
      
      private var height:int;
      
      private var color:uint;
      
      public function CustomBackgroundPattern(param1:int, param2:int, param3:int, param4:uint)
      {
         super(param1);
         this.width = param2;
         this.height = param3;
         this.color = param4;
      }
      
      public function getWidth() : int
      {
         return this.width;
      }
      
      public function getHeight() : int
      {
         return this.height;
      }
      
      public function getColor() : uint
      {
         return this.color;
      }
   }
}

package net.bigpoint.darkorbit.catalog
{
   public class SpecialAmmunition
   {
      
      public static const MINE:int = 1;
      
      public static const SMARTBOMB:int = 2;
      
      public static const INSTASHIELD:int = 3;
      
      public static const EMP:int = 4;
      
      public static const MINE_EMP:int = 5;
      
      public static const MINE_SAB:int = 6;
      
      public static const MINE_DDM:int = 7;
      
      public function SpecialAmmunition()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.collectable
{
   public class Beacon extends Collectable
   {
      
      private var fromCompanyID:int;
      
      private var toCompanyID:int;
      
      public function Beacon(param1:int, param2:CollectablePattern, param3:String, param4:int, param5:int)
      {
         super(CollectablePattern.TYPE_BEACON,param2,param1,param3,param4,param5);
         this.setCompanyID();
      }
      
      private function setCompanyID() : void
      {
         var _loc1_:Array = typeID.toString().split("");
         this.fromCompanyID = _loc1_[1];
         this.toCompanyID = _loc1_[2];
      }
      
      public function getFromCompanyID() : int
      {
         return this.fromCompanyID;
      }
      
      public function getToCompanyID() : int
      {
         return this.toCompanyID;
      }
   }
}

package net.bigpoint.darkorbit.collectable
{
   public class Box extends Collectable
   {
      
      public static var TYPE_NOT_FREE_CARGO_BOX:int = 0;
      
      public static var TYPE_FREE_CARGO_BOX:int = 1;
      
      public static var TYPE_BONUS_BOX:int = 2;
      
      private var _remainingLootTime:int = -1;
      
      public function Box(param1:int, param2:CollectablePattern, param3:String, param4:int, param5:int)
      {
         super(CollectablePattern.TYPE_BOX,param2,param1,param3,param4,param5);
      }
      
      public function get remainingLootTime() : int
      {
         return this._remainingLootTime;
      }
      
      public function set remainingLootTime(param1:int) : void
      {
         this._remainingLootTime = param1;
      }
   }
}

package net.bigpoint.darkorbit.collectable
{
   import com.bigpoint.utils.ui.tooltip.StickyToolTipHook;
   import flash.display.DisplayObject;
   
   public class Collectable
   {
      
      private var _collectableClass:int;
      
      protected var typeID:int;
      
      private var _clip:DisplayObject;
      
      private var hash:String;
      
      private var posX:int;
      
      private var posY:int;
      
      public var collectablePattern:CollectablePattern;
      
      public var tooltipHook:StickyToolTipHook;
      
      public function Collectable(param1:int, param2:CollectablePattern, param3:int, param4:String, param5:int, param6:int)
      {
         super();
         this._collectableClass = param1;
         this.collectablePattern = param2;
         this.typeID = param3;
         this.hash = param4;
         this.posX = param5;
         this.posY = param6;
      }
      
      public function getHash() : String
      {
         return this.hash;
      }
      
      public function getPosX() : int
      {
         return this.posX;
      }
      
      public function getPosY() : int
      {
         return this.posY;
      }
      
      public function getTypeID() : int
      {
         return this.typeID;
      }
      
      public function getCollectablePattern() : CollectablePattern
      {
         return this.collectablePattern;
      }
      
      public function removeClip() : void
      {
         this._clip = null;
      }
      
      public function get clip() : DisplayObject
      {
         return this._clip;
      }
      
      public function set clip(param1:DisplayObject) : void
      {
         this._clip = param1;
      }
      
      public function get collectableClass() : int
      {
         return this._collectableClass;
      }
   }
}

package net.bigpoint.darkorbit.collectable
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.StickyToolTipHook;
   import com.greensock.TweenLite;
   import com.greensock.easing.Linear;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.events.TimerEvent;
   import flash.utils.Dictionary;
   import flash.utils.Timer;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.gui.CollectableReplacementIcon;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.OrePattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class CollectableManager
   {
      
      public static var loot_ore_keys:Array = ["ore_prometium","ore_endurium","ore_terbium","ore_xenomit","ore_prometid","ore_duranium","ore_promerium"];
      
      private var lastSelectedHash:String;
      
      private var resourceQueue:Array = [];
      
      private var collectables:Array = [];
      
      private var beacons:Array = [];
      
      private var honeyBoxes:Dictionary = new Dictionary();
      
      private var animationTimer:Timer;
      
      private var animations:Array = [];
      
      private var map:Map;
      
      public function CollectableManager(param1:Map)
      {
         super();
         this.map = param1;
         this.honeyBoxes["ozims"] = true;
         this.honeyBoxes["1604u"] = true;
         this.honeyBoxes["znmjs"] = true;
         this.honeyBoxes["bu9m9"] = true;
         this.honeyBoxes["zel71"] = true;
         this.honeyBoxes["q4knx"] = true;
         this.honeyBoxes["ci7m0"] = true;
         this.honeyBoxes["1ukl6"] = true;
         this.honeyBoxes["1gtlm"] = true;
         this.honeyBoxes["180fk"] = true;
         this.honeyBoxes["13b44"] = true;
         this.honeyBoxes["ntr63"] = true;
         this.honeyBoxes["1lmf1"] = true;
         this.honeyBoxes["1r78f"] = true;
         this.honeyBoxes["1oloo"] = true;
         this.honeyBoxes["xixzz"] = true;
         this.honeyBoxes["13jaa"] = true;
         this.honeyBoxes["6dge9"] = true;
         this.honeyBoxes["m79jj"] = true;
         this.honeyBoxes["h0rbx"] = true;
         this.honeyBoxes["n5cwr"] = true;
         this.honeyBoxes["1hviz"] = true;
         this.honeyBoxes["1g4pv"] = true;
         this.honeyBoxes["1ss4t"] = true;
         this.honeyBoxes["1c2tu"] = true;
         this.honeyBoxes["100vp"] = true;
         this.honeyBoxes["rku9c"] = true;
         this.honeyBoxes["1hd2h"] = true;
         this.honeyBoxes["416n4"] = true;
         this.honeyBoxes["1t5p4"] = true;
         this.honeyBoxes["6ovbk"] = true;
         this.honeyBoxes["3k2hr"] = true;
         this.honeyBoxes["48chq"] = true;
         this.honeyBoxes["lnkdf"] = true;
         this.honeyBoxes["1usjy"] = true;
         this.honeyBoxes["1scn2"] = true;
         this.honeyBoxes["usc1j"] = true;
         this.honeyBoxes["qj4o9"] = true;
         this.honeyBoxes["yyr28"] = true;
         this.honeyBoxes["3mtlo"] = true;
         this.honeyBoxes["hkw3g"] = true;
         this.honeyBoxes["a2abg"] = true;
         this.honeyBoxes["1fnxl"] = true;
         this.honeyBoxes["1kjds"] = true;
         this.honeyBoxes["9icg0"] = true;
         this.honeyBoxes["13umf"] = true;
         this.honeyBoxes["qtqry"] = true;
         this.honeyBoxes["1ucay"] = true;
         this.honeyBoxes["puvoe"] = true;
         this.honeyBoxes["1c3oi"] = true;
         this.honeyBoxes["1nesl"] = true;
         this.honeyBoxes["wl0wr"] = true;
         this.honeyBoxes["sn8n9"] = true;
         this.honeyBoxes["1v20m"] = true;
         this.honeyBoxes["1g568"] = true;
         this.honeyBoxes["1malf"] = true;
         this.honeyBoxes["w27x1"] = true;
         this.honeyBoxes["ov57p"] = true;
         this.honeyBoxes["1ecek"] = true;
         this.honeyBoxes["1my80"] = true;
         this.honeyBoxes["1srvg"] = true;
         this.honeyBoxes["2u942"] = true;
         this.honeyBoxes["103wa"] = true;
         this.honeyBoxes["1srrl"] = true;
         this.honeyBoxes["109xs"] = true;
         this.honeyBoxes["6x1u8"] = true;
         this.honeyBoxes["152g8"] = true;
         this.honeyBoxes["5naot"] = true;
         this.honeyBoxes["oeoud"] = true;
         this.honeyBoxes["tbeuu"] = true;
         this.honeyBoxes["13p97"] = true;
         this.honeyBoxes["rckbt"] = true;
         this.honeyBoxes["1trob"] = true;
         this.honeyBoxes["1fsi3"] = true;
         this.honeyBoxes["v2qxb"] = true;
         this.honeyBoxes["1szeq"] = true;
         this.honeyBoxes["87k2a"] = true;
         this.honeyBoxes["1bfcm"] = true;
         this.honeyBoxes["fc9f7"] = true;
         this.honeyBoxes["1g7du"] = true;
         this.honeyBoxes["lqzp9"] = true;
         this.honeyBoxes["wbku5"] = true;
         this.honeyBoxes["1ts89"] = true;
         this.honeyBoxes["1ag6n"] = true;
         this.honeyBoxes["10tv0"] = true;
         this.honeyBoxes["49ol8"] = true;
         this.honeyBoxes["1isk4"] = true;
         this.honeyBoxes["1jyqj"] = true;
         this.honeyBoxes["1e5au"] = true;
         this.honeyBoxes["8v03f"] = true;
         this.honeyBoxes["uy62u"] = true;
         this.honeyBoxes["mk797"] = true;
         this.honeyBoxes["1g65j"] = true;
         this.honeyBoxes["hm27v"] = true;
         this.honeyBoxes["hs940"] = true;
         this.honeyBoxes["q0e4a"] = true;
         this.honeyBoxes["bv8wq"] = true;
         this.honeyBoxes["1nad0"] = true;
         this.honeyBoxes["1mc48"] = true;
         this.honeyBoxes["1801q"] = true;
         this.animationTimer = new Timer(25,0);
         this.animationTimer.addEventListener(TimerEvent.TIMER,this.onAnimationTimer);
         this.animationTimer.start();
      }
      
      private function onAnimationTimer(param1:TimerEvent) : void
      {
         var _loc2_:DisplayObject = null;
         for each(_loc2_ in this.animations)
         {
            if(_loc2_ is MovieClip)
            {
               if(MovieClip(_loc2_).currentFrame == MovieClip(_loc2_).framesLoaded)
               {
                  MovieClip(_loc2_).gotoAndStop(1);
               }
               else
               {
                  MovieClip(_loc2_).nextFrame();
               }
            }
            else if(_loc2_ is BitmapClip)
            {
               if(BitmapClip(_loc2_).frame == BitmapClip(_loc2_).framesLoaded)
               {
                  BitmapClip(_loc2_).frame = 1;
               }
               else
               {
                  BitmapClip(_loc2_).frame = BitmapClip(_loc2_).frame + 1;
               }
            }
         }
      }
      
      public function removeCollectable(param1:String) : void
      {
         var _loc2_:int = 0;
         var _loc3_:Collectable = null;
         var _loc4_:DisplayObject = null;
         _loc2_ = 0;
         while(_loc2_ < this.collectables.length)
         {
            _loc3_ = this.collectables[_loc2_];
            if(_loc3_ != null && _loc3_.getHash() == param1)
            {
               if(this.lastSelectedHash != null)
               {
                  if(_loc3_.getHash() == this.lastSelectedHash)
                  {
                     this.setLastSelectedHash(null);
                  }
               }
               _loc4_ = _loc3_.clip;
               if(_loc3_.collectableClass == CollectablePattern.TYPE_ORE && _loc3_.tooltipHook != null && _loc3_.tooltipHook.toolTipVisible)
               {
                  _loc3_.tooltipHook.hideTooltip2();
               }
               if(_loc4_ != null)
               {
                  TweenLite.to(_loc4_,0.5,{
                     "ease":Linear.easeNone,
                     "alpha":0,
                     "onComplete":this.onRemoveMovieClip,
                     "onCompleteParams":[_loc4_]
                  });
               }
               this.collectables.splice(_loc2_,1);
               return;
            }
            _loc2_++;
         }
         _loc2_ = 0;
         while(_loc2_ < this.beacons.length)
         {
            _loc3_ = this.beacons[_loc2_];
            if(_loc3_ != null && _loc3_.getHash() == param1)
            {
               if(this.lastSelectedHash != null)
               {
                  if(_loc3_.getHash() == this.lastSelectedHash)
                  {
                     this.setLastSelectedHash(null);
                  }
               }
               _loc4_ = _loc3_.clip;
               if(_loc4_ != null)
               {
                  TweenLite.to(_loc4_,0.5,{
                     "ease":Linear.easeNone,
                     "alpha":0,
                     "onComplete":this.onRemoveMovieClip,
                     "onCompleteParams":[_loc4_]
                  });
               }
               this.beacons.splice(_loc2_,1);
               return;
            }
            _loc2_++;
         }
      }
      
      public function hitTest(param1:int, param2:int) : Collectable
      {
         var _loc4_:DisplayObject = null;
         var _loc5_:int = 0;
         var _loc6_:Collectable = null;
         var _loc3_:int = 25;
         _loc5_ = 0;
         while(_loc5_ < this.beacons.length)
         {
            _loc6_ = this.beacons[_loc5_];
            _loc4_ = _loc6_.clip;
            if(_loc4_ == null)
            {
               return null;
            }
            if(_loc4_.x - _loc3_ < param1 && param1 < _loc4_.x + _loc3_ && _loc4_.y - _loc3_ < param2 && param2 < _loc4_.y + _loc3_)
            {
               return _loc6_;
            }
            _loc5_++;
         }
         _loc5_ = 0;
         while(_loc5_ < this.collectables.length)
         {
            _loc6_ = this.collectables[_loc5_];
            if(!(!Settings.displayResources && _loc6_.collectableClass == CollectablePattern.TYPE_ORE))
            {
               if(_loc6_.collectableClass != CollectablePattern.TYPE_FIREWORKS_BOX)
               {
                  _loc4_ = _loc6_.clip;
                  if(_loc4_ == null)
                  {
                     return null;
                  }
                  if(_loc4_.x - _loc3_ < param1 && param1 < _loc4_.x + _loc3_ && _loc4_.y - _loc3_ < param2 && param2 < _loc4_.y + _loc3_)
                  {
                     return _loc6_;
                  }
               }
            }
            _loc5_++;
         }
         return null;
      }
      
      public function mouseOverTest(param1:int, param2:int) : Boolean
      {
         var _loc4_:Collectable = null;
         var _loc5_:DisplayObject = null;
         var _loc3_:int = 25;
         var _loc6_:int = 0;
         while(_loc6_ < this.beacons.length)
         {
            _loc4_ = this.beacons[_loc6_];
            _loc5_ = _loc4_.clip;
            if(_loc5_ != null)
            {
               if(_loc5_.x - _loc3_ < param1 && param1 < _loc5_.x + _loc3_ && _loc5_.y - _loc3_ < param2 && param2 < _loc5_.y + _loc3_)
               {
                  return true;
               }
            }
            _loc6_++;
         }
         _loc6_ = 0;
         while(_loc6_ < this.collectables.length)
         {
            _loc4_ = this.collectables[_loc6_];
            if(!(!Settings.displayResources && _loc4_.collectableClass == CollectablePattern.TYPE_ORE))
            {
               if(_loc4_.collectableClass != CollectablePattern.TYPE_FIREWORKS_BOX)
               {
                  _loc5_ = _loc4_.clip;
                  if(_loc5_ != null)
                  {
                     if(_loc5_.x - _loc3_ < param1 && param1 < _loc5_.x + _loc3_ && _loc5_.y - _loc3_ < param2 && param2 < _loc5_.y + _loc3_)
                     {
                        if(_loc4_.tooltipHook != null)
                        {
                           _loc4_.tooltipHook.showTooltip2();
                        }
                        return true;
                     }
                     if(_loc4_.tooltipHook != null && _loc4_.tooltipHook.toolTipVisible)
                     {
                        _loc4_.tooltipHook.hideTooltip2();
                     }
                  }
               }
            }
            _loc6_++;
         }
         return false;
      }
      
      public function setCollectableVisibility(param1:int, param2:int, param3:Boolean) : void
      {
         var _loc5_:Collectable = null;
         var _loc4_:int = 0;
         while(_loc4_ < this.collectables.length)
         {
            _loc5_ = this.collectables[_loc4_];
            if(_loc5_.clip != null)
            {
               if(param1 == _loc5_.collectableClass)
               {
                  if(param2 == -1)
                  {
                     _loc5_.clip.visible = param3;
                  }
                  else if(_loc5_.getTypeID() == param2)
                  {
                     _loc5_.clip.visible = param3;
                  }
               }
            }
            _loc4_++;
         }
      }
      
      public function showBeam(param1:Number, param2:Number, param3:int, param4:String) : void
      {
         var _loc5_:MovieClip = ResourceManager.getMovieClip(param4,"mc");
         _loc5_.x = param1;
         _loc5_.y = param2;
         this.map.getMain().screenManager.collectableLayer.addChild(_loc5_);
         _loc5_.gotoAndStop(1);
         var _loc6_:int = _loc5_.framesLoaded;
         TweenLite.to(_loc5_,param3 / 1000,{
            "ease":Linear.easeNone,
            "frame":_loc6_,
            "onComplete":this.onRemoveMovieClip,
            "onCompleteParams":[_loc5_]
         });
      }
      
      private function onRemoveMovieClip(param1:DisplayObject) : void
      {
         if(!(param1 is CollectableReplacementIcon))
         {
            this.removeFromAnimations(param1);
            ScreenManager.stopAnimation(param1);
         }
         this.map.getMain().screenManager.collectableLayer.removeChild(param1);
      }
      
      public function cleanup() : void
      {
         var _loc1_:int = 0;
         var _loc2_:Collectable = null;
         this.animationTimer.stop();
         this.animationTimer.removeEventListener(TimerEvent.TIMER,this.onAnimationTimer);
         _loc1_ = 0;
         while(_loc1_ < this.collectables.length)
         {
            _loc2_ = this.collectables[_loc1_];
            if(_loc2_.clip != null)
            {
               this.map.getMain().screenManager.collectableLayer.removeChild(_loc2_.clip);
            }
            _loc2_.removeClip();
            _loc1_++;
         }
         this.collectables = [];
         _loc1_ = 0;
         while(_loc1_ < this.beacons.length)
         {
            _loc2_ = this.beacons[_loc1_];
            if(_loc2_.clip != null)
            {
               this.map.getMain().screenManager.collectableLayer.removeChild(_loc2_.clip);
            }
            _loc2_.removeClip();
            _loc1_++;
         }
         this.beacons = [];
      }
      
      public function createCollectable(param1:int, param2:String, param3:int, param4:int, param5:int, param6:int = -1) : void
      {
         var _loc9_:String = null;
         if(this.honeyBoxes[param2] == true)
         {
            return;
         }
         var _loc7_:CollectablePattern = PatternManager.getCollectablePattern(param1,param3);
         if(_loc7_ == null)
         {
            return;
         }
         var _loc8_:Collectable = null;
         switch(param1)
         {
            case CollectablePattern.TYPE_BOX:
               _loc8_ = new Box(param3,_loc7_,param2,param4,param5);
               Box(_loc8_).remainingLootTime = param6;
               this.collectables.push(_loc8_);
               break;
            case CollectablePattern.TYPE_ORE:
               _loc8_ = new Ore(param3,_loc7_,param2,param4,param5);
               this.collectables.push(_loc8_);
               break;
            case CollectablePattern.TYPE_BEACON:
               _loc8_ = new Beacon(param3,_loc7_,param2,param4,param5);
               this.beacons.push(_loc8_);
               break;
            case CollectablePattern.TYPE_FIREWORKS_BOX:
               _loc8_ = new FireworkBox(param3,_loc7_,param2,param4,param5);
               this.collectables.push(_loc8_);
         }
         if(Settings.qualityCollectable == Settings.QUALITY_LOW && _loc7_.hasSimpleRapresentation)
         {
            _loc9_ = "replacementCollectables";
         }
         else
         {
            _loc9_ = _loc7_.getResKey();
         }
         if(ResourceManager.fileCollection.isLoaded(_loc9_))
         {
            this.attachClip(_loc8_,_loc9_);
         }
         else
         {
            this.loadCollectableResource(_loc9_);
         }
      }
      
      private function loadCollectableResource(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this.resourceQueue.length)
         {
            if(this.resourceQueue[_loc2_] == param1)
            {
               return;
            }
            _loc2_++;
         }
         this.resourceQueue.push(param1);
         ResourceManager.fileCollection.load(param1,this.onClipLoaded);
      }
      
      private function attachClip(param1:Collectable, param2:String) : void
      {
         var _loc3_:DisplayObject = null;
         var _loc4_:OrePattern = null;
         var _loc5_:MovieClip = null;
         var _loc6_:Number = NaN;
         var _loc7_:int = 0;
         if(Settings.qualityCollectable == Settings.QUALITY_LOW && param1.collectablePattern.hasSimpleRapresentation)
         {
            _loc3_ = new CollectableReplacementIcon(ResourceManager.getBitmap(param2,param1.collectablePattern.getResKey()));
         }
         else if(param1.collectablePattern.useBitmapClip)
         {
            _loc3_ = new BitmapClip(ResourceManager.getMovieClip(param2,"mc"),param2);
         }
         else
         {
            _loc3_ = ResourceManager.getMovieClip(param2,"mc");
            MovieClip(_loc3_).mouseEnabled = Main.mouseEventsEnabled;
            MovieClip(_loc3_).mouseChildren = Main.mouseEventsEnabled;
         }
         _loc3_.x = param1.getPosX();
         _loc3_.y = param1.getPosY();
         switch(param1.collectableClass)
         {
            case CollectablePattern.TYPE_FIREWORKS_BOX:
               break;
            case CollectablePattern.TYPE_BEACON:
               ScreenManager.playAnimation(_loc3_,30,true);
               break;
            case CollectablePattern.TYPE_BOX:
               if(!(_loc3_ is CollectableReplacementIcon))
               {
                  this.animations.push(_loc3_);
               }
               if(param1.getTypeID() == 0)
               {
                  _loc5_ = ResourceManager.getMovieClip("ui","piechart");
                  _loc5_.x = _loc3_.x;
                  _loc5_.y = _loc3_.y - _loc3_.height * 0.5;
                  this.map.getMain().screenManager.collectableLayer.addChild(_loc5_);
                  _loc6_ = Box(param1).remainingLootTime * 0.001;
                  TweenLite.to(_loc5_,_loc6_,{
                     "ease":Linear.easeNone,
                     "frame":_loc5_.framesLoaded,
                     "onComplete":this.handleFadeOutPiechart,
                     "onCompleteParams":[_loc5_]
                  });
               }
               break;
            case CollectablePattern.TYPE_ORE:
               _loc3_.visible = Settings.displayResources;
               if(_loc3_ is MovieClip)
               {
                  _loc7_ = Math.random() * MovieClip(_loc3_).framesLoaded;
                  MovieClip(_loc3_).gotoAndStop(_loc7_);
               }
               else if(_loc3_ is BitmapClip)
               {
                  _loc7_ = Math.random() * BitmapClip(_loc3_).framesLoaded;
                  BitmapClip(_loc3_).gotoAndStop(_loc7_);
               }
               if(!(_loc3_ is CollectableReplacementIcon))
               {
                  this.animations.push(_loc3_);
               }
               _loc4_ = PatternManager.orePatterns[int(param1.getTypeID())];
               param1.tooltipHook = new StickyToolTipHook(_loc3_,BPLocale.getText(_loc4_.languageKey),this.map.getMain().x,this.map.getMain().y,220);
         }
         param1.clip = _loc3_;
         _loc3_.alpha = 0;
         this.map.getMain().screenManager.collectableLayer.addChild(_loc3_);
         TweenLite.to(_loc3_,0.5,{
            "ease":Linear.easeNone,
            "alpha":1
         });
      }
      
      private function handleFadeOutPiechart(param1:MovieClip) : void
      {
         if(this.map != null && param1 != null)
         {
            TweenLite.to(param1,0.25,{
               "ease":Linear.easeNone,
               "alpha":0,
               "onComplete":this.handleRemovePiechart,
               "onCompleteParams":[param1]
            });
         }
      }
      
      private function handleRemovePiechart(param1:MovieClip) : void
      {
         if(this.map != null && param1 != null)
         {
            this.map.getMain().screenManager.collectableLayer.removeChild(param1);
         }
      }
      
      private function onClipLoaded(param1:SWFFinisher) : void
      {
         var _loc3_:Collectable = null;
         var _loc4_:CollectablePattern = null;
         var _loc5_:int = 0;
         var _loc2_:String = param1.fileVO.id;
         _loc5_ = 0;
         while(_loc5_ < this.resourceQueue.length)
         {
            if(this.resourceQueue[_loc5_] == _loc2_)
            {
               this.resourceQueue.splice(_loc5_,1);
            }
            _loc5_++;
         }
         _loc5_ = 0;
         while(_loc5_ < this.collectables.length)
         {
            _loc3_ = this.collectables[_loc5_];
            _loc4_ = PatternManager.getCollectablePattern(_loc3_.collectableClass,_loc3_.getTypeID());
            if(_loc4_.getResKey() == _loc2_)
            {
               this.attachClip(_loc3_,_loc4_.getResKey());
            }
            _loc5_++;
         }
         _loc5_ = 0;
         while(_loc5_ < this.beacons.length)
         {
            _loc3_ = this.beacons[_loc5_];
            _loc4_ = PatternManager.getCollectablePattern(_loc3_.collectableClass,_loc3_.getTypeID());
            if(_loc4_.getResKey() == _loc2_)
            {
               this.attachClip(_loc3_,_loc4_.getResKey());
            }
            _loc5_++;
         }
      }
      
      public function getCollectable(param1:String) : Collectable
      {
         var _loc3_:Collectable = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.collectables.length)
         {
            _loc3_ = this.collectables[_loc2_];
            if(_loc3_.getHash() == param1)
            {
               return _loc3_;
            }
            _loc2_++;
         }
         return null;
      }
      
      public function getLastSelectedHash() : String
      {
         return this.lastSelectedHash;
      }
      
      public function setLastSelectedHash(param1:String) : void
      {
         this.lastSelectedHash = param1;
      }
      
      public function getCollectables() : Array
      {
         return this.collectables;
      }
      
      public function getBeacons() : Array
      {
         return this.beacons;
      }
      
      private function removeFromAnimations(param1:DisplayObject) : void
      {
         var _loc3_:DisplayObject = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.animations.length)
         {
            _loc3_ = this.animations[_loc2_];
            if(param1 == _loc3_)
            {
               this.animations.splice(_loc2_,1);
               return;
            }
            _loc2_++;
         }
      }
   }
}

package net.bigpoint.darkorbit.collectable
{
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.pattern.AudibleResourcePattern;
   
   public class CollectablePattern extends AudibleResourcePattern
   {
      
      public static const logger:ILogger = Log.getLogger("CollectablePattern");
      
      public static var TYPE_BOX:int = 0;
      
      public static var TYPE_ORE:int = 1;
      
      public static var TYPE_BEACON:int = 2;
      
      public static var TYPE_FIREWORKS_BOX:int = 3;
      
      public static var BEACON_FRONTIER_ID:int = 111;
      
      private var collectableClass:int;
      
      private var duration:int;
      
      public var hasObjectPool:Boolean;
      
      public var useBitmapClip:Boolean;
      
      public var precache:Boolean;
      
      public var hasSimpleRapresentation:Boolean = false;
      
      public var isHarvestable:Boolean = false;
      
      public function CollectablePattern(param1:int, param2:int, param3:String)
      {
         super(param2,param3);
         this.collectableClass = param1;
         this.duration = 1000;
      }
      
      public function getCollectableClass() : int
      {
         return this.collectableClass;
      }
      
      public function getDuration() : int
      {
         return this.duration;
      }
      
      public function setDuration(param1:int) : void
      {
         this.duration = param1;
      }
   }
}

package net.bigpoint.darkorbit.collectable
{
   public class FireworkBox extends Collectable
   {
      
      public function FireworkBox(param1:int, param2:CollectablePattern, param3:String, param4:int, param5:int)
      {
         super(CollectablePattern.TYPE_FIREWORKS_BOX,param2,param1,param3,param4,param5);
      }
   }
}

package net.bigpoint.darkorbit.collectable
{
   public class Ore extends Collectable
   {
      
      public function Ore(param1:int, param2:CollectablePattern, param3:String, param4:int, param5:int)
      {
         super(CollectablePattern.TYPE_ORE,param2,param1,param3,param4,param5);
      }
   }
}

package net.bigpoint.darkorbit.collisionDetection
{
   import flash.display.BitmapData;
   import flash.display.Sprite;
   import flash.display.Stage;
   import flash.geom.ColorTransform;
   import flash.geom.Matrix;
   import flash.geom.Rectangle;
   
   public class CollisionDetection
   {
      
      private static var s:Stage;
      
      public function CollisionDetection()
      {
         super();
      }
      
      public static function registerStage(param1:Stage) : void
      {
         s = param1;
      }
      
      public static function checkForCollision(param1:Sprite, param2:Sprite, param3:Number = 255) : Rectangle
      {
         var _loc4_:Rectangle = param1.getBounds(s);
         var _loc5_:Rectangle = param2.getBounds(s);
         if(_loc4_.right < _loc5_.left || _loc5_.right < _loc4_.left || (_loc4_.bottom < _loc5_.top || _loc5_.bottom < _loc4_.top))
         {
            return null;
         }
         var _loc6_:Rectangle = new Rectangle();
         _loc6_.left = Math.max(_loc4_.left,_loc5_.left);
         _loc6_.right = Math.min(_loc4_.right,_loc5_.right);
         _loc6_.top = Math.max(_loc4_.top,_loc5_.top);
         _loc6_.bottom = Math.min(_loc4_.bottom,_loc5_.bottom);
         if(_loc6_.height < 1 || _loc6_.width < 1)
         {
            return null;
         }
         var _loc7_:BitmapData = new BitmapData(_loc6_.width,_loc6_.height,false);
         var _loc8_:Matrix = param1.transform.concatenatedMatrix;
         _loc8_.tx -= _loc6_.left;
         _loc8_.ty -= _loc6_.top;
         _loc7_.draw(param1,_loc8_,new ColorTransform(1,1,1,1,255,-255,-255,param3));
         _loc8_ = param2.transform.concatenatedMatrix;
         _loc8_.tx -= _loc6_.left;
         _loc8_.ty -= _loc6_.top;
         _loc7_.draw(param2,_loc8_,new ColorTransform(1,1,1,1,255,255,255,param3),"difference");
         var _loc9_:Rectangle = _loc7_.getColorBoundsRect(4294967295,4278255615);
         if(_loc9_.width == 0)
         {
            return null;
         }
         _loc9_.x += _loc6_.left;
         _loc9_.y += _loc6_.top;
         return _loc9_;
      }
   }
}

package net.bigpoint.darkorbit.collisionDetection
{
   import flash.display.BitmapData;
   import flash.display.BitmapDataChannel;
   import flash.display.BlendMode;
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.geom.Matrix;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   
   public class PixelPerfectCollisionDetection
   {
      
      public function PixelPerfectCollisionDetection()
      {
         super();
      }
      
      public static function getCollisionRect(param1:DisplayObject, param2:DisplayObject, param3:DisplayObjectContainer, param4:Boolean = false, param5:Number = 0) : Rectangle
      {
         var _loc9_:BitmapData = null;
         var _loc10_:BitmapData = null;
         var _loc11_:uint = 0;
         var _loc12_:Rectangle = null;
         var _loc13_:int = 0;
         var _loc6_:Rectangle = param1.getBounds(param3);
         var _loc7_:Rectangle = param2.getBounds(param3);
         var _loc8_:Rectangle = _loc6_.intersection(_loc7_);
         if(_loc8_.size.length > 0)
         {
            if(param4)
            {
               _loc8_.width = Math.ceil(_loc8_.width);
               _loc8_.height = Math.ceil(_loc8_.height);
               _loc9_ = getAlphaMap(param1,_loc8_,BitmapDataChannel.RED,param3);
               _loc10_ = getAlphaMap(param2,_loc8_,BitmapDataChannel.GREEN,param3);
               _loc9_.draw(_loc10_,null,null,BlendMode.LIGHTEN);
               if(param5 <= 0)
               {
                  _loc11_ = 65792;
               }
               else
               {
                  if(param5 > 1)
                  {
                     param5 = 1;
                  }
                  _loc13_ = Math.round(param5 * 255);
                  _loc11_ = uint(_loc13_ << 16 | _loc13_ << 8 | 0);
               }
               _loc12_ = _loc9_.getColorBoundsRect(_loc11_,_loc11_);
               _loc12_.x += _loc8_.x;
               _loc12_.y += _loc8_.y;
               return _loc12_;
            }
            return _loc8_;
         }
         return null;
      }
      
      private static function getAlphaMap(param1:DisplayObject, param2:Rectangle, param3:uint, param4:DisplayObjectContainer) : BitmapData
      {
         var _loc5_:Matrix = param4.transform.concatenatedMatrix.clone();
         _loc5_.invert();
         var _loc6_:Matrix = param1.transform.concatenatedMatrix.clone();
         _loc6_.concat(_loc5_);
         _loc6_.translate(-param2.x,-param2.y);
         var _loc7_:BitmapData = new BitmapData(param2.width,param2.height,true,0);
         _loc7_.draw(param1,_loc6_);
         var _loc8_:BitmapData = new BitmapData(param2.width,param2.height,false,0);
         _loc8_.copyChannel(_loc7_,_loc7_.rect,new Point(0,0),BitmapDataChannel.ALPHA,param3);
         return _loc8_;
      }
      
      public static function getCollisionPoint(param1:DisplayObject, param2:DisplayObject, param3:DisplayObjectContainer, param4:Boolean = false, param5:Number = 0) : Point
      {
         var _loc7_:Number = NaN;
         var _loc8_:Number = NaN;
         var _loc6_:Rectangle = getCollisionRect(param1,param2,param3,param4,param5);
         if(_loc6_ != null && _loc6_.size.length > 0)
         {
            _loc7_ = (_loc6_.left + _loc6_.right) / 2;
            _loc8_ = (_loc6_.top + _loc6_.bottom) / 2;
            return new Point(_loc7_,_loc8_);
         }
         return null;
      }
      
      public static function isColliding(param1:DisplayObject, param2:DisplayObject, param3:DisplayObjectContainer, param4:Boolean = false, param5:Number = 0) : Boolean
      {
         var _loc6_:Rectangle = getCollisionRect(param1,param2,param3,param4,param5);
         if(_loc6_ != null && _loc6_.size.length > 0)
         {
            return true;
         }
         return false;
      }
   }
}

package net.bigpoint.darkorbit.combat
{
   import com.greensock.TweenLite;
   import flash.display.*;
   import flash.events.Event;
   import flash.filters.*;
   import net.bigpoint.FastMath;
   import net.bigpoint.darkorbit.fireworks.*;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.ShipManager;
   
   public class ChainBoltAttackJob extends MovieClip
   {
      
      private var boltAnimaionTime:Number = 0.3;
      
      private var boltFadeTime:Number = 3;
      
      private var attacker:MapObject;
      
      public var attackerID:int;
      
      private var originalAttacker:MapObject;
      
      public var originalAttackerID:int;
      
      private var nextTarget:MapObject;
      
      private var nextTargetID:int;
      
      private var chainArray:Array;
      
      private var boltGraphicActual:Array = new Array();
      
      private var boltGraphicArray:Array = new Array();
      
      private var numFramesBoltAnimation:int;
      
      private var framesToRepeatBoltAnimation:int;
      
      private var boltFinishedAnimating:Boolean = false;
      
      private var boltGraphic:Lightning = new Lightning();
      
      private var currentBoltStage:int = 0;
      
      private var chainLength:int;
      
      private var boltAttackFinished:Boolean = false;
      
      private var attackManager:CombatManager;
      
      private var animationPacing:Sprite = new Sprite();
      
      private var boltLeadingObject:Sprite = new Sprite();
      
      private var overPI:Number = 57.29577951308232;
      
      private var distanceToTarget:Number;
      
      private var scaleFactor:Number;
      
      private var originalBoltWidth:Number = 4;
      
      private var color:uint = 14544639;
      
      private var lightning:Lightning;
      
      private var instantChainBuild:Boolean = false;
      
      public function ChainBoltAttackJob(param1:MapObject, param2:Array, param3:CombatManager, param4:Boolean)
      {
         super();
         this.attackManager = param3;
         this.attacker = param1;
         this.attackerID = this.attacker.getUserId();
         this.originalAttackerID = this.attacker.getUserId();
         this.originalAttacker = param1;
         this.chainArray = param2;
         this.chainLength = this.chainArray.length;
         this.instantChainBuild = param4;
      }
      
      public function init() : void
      {
         if(this.instantChainBuild)
         {
            this.boltAnimaionTime = 1e-7;
         }
         else
         {
            this.boltAnimaionTime = 0.3;
         }
         this.createBoltGraphics();
         this.boltGraphic = this.boltGraphicArray[0];
         this.originalBoltWidth = this.boltGraphic.width;
         this.nextTargetID = this.chainArray[0];
         this.nextTarget = this.attackManager.getMap().getShipManager().getShip(this.nextTargetID);
         this.boltLeadingObject.x = this.originalAttacker.x;
         this.boltLeadingObject.y = this.originalAttacker.y;
         this.attacker = this.originalAttacker;
         this.getDistanceAndScaleFactor();
         this.addEventListener(Event.ENTER_FRAME,this.handleChainBoltUpdate);
         this.createBolt();
      }
      
      private function handleChainBoltUpdate(param1:Event) : void
      {
         var _loc3_:Lightning = null;
         var _loc4_:Number = NaN;
         var _loc2_:int = 0;
         while(_loc2_ < this.boltGraphicArray.length)
         {
            _loc3_ = this.boltGraphicArray[_loc2_];
            if(_loc3_.isAdded)
            {
               if(_loc3_.getAttackerShip() != null && _loc3_.getTargetShip() != null)
               {
                  _loc3_.startX = _loc3_.getAttackerShip().x;
                  _loc3_.startY = _loc3_.getAttackerShip().y;
                  _loc3_.endX = _loc3_.getTargetShip().x;
                  _loc3_.endY = _loc3_.getTargetShip().y;
                  _loc4_ = FastMath.sqrt(Math.pow(_loc3_.getTargetShip().x - _loc3_.getAttackerShip().x,2) + Math.pow(_loc3_.getTargetShip().y - _loc3_.getAttackerShip().y,2));
                  _loc3_.maxLength = _loc4_ * 0.9;
                  _loc3_.maxLengthVary = _loc4_ * 0.5;
               }
               else
               {
                  this.prepareAndReInitialise();
               }
            }
            _loc3_.update();
            _loc2_++;
         }
      }
      
      private function prepareAndReInitialise() : void
      {
         var _loc3_:int = 0;
         var _loc1_:int = 0;
         while(_loc1_ < this.chainArray.length)
         {
            _loc3_ = int(this.chainArray[_loc1_]);
            if(this.attackManager.getMap().getShipManager().getShip(_loc3_) == null)
            {
            }
            _loc1_++;
         }
         var _loc2_:int = 0;
         while(_loc2_ < this.boltGraphicArray.length)
         {
            if(this.attackManager.getMap().getMain().screenManager.getExplosionLayer().contains(this.boltGraphicArray[_loc2_]))
            {
               this.attackManager.getMap().getMain().screenManager.getExplosionLayer().removeChild(this.boltGraphicArray[_loc2_]);
            }
            _loc2_++;
         }
         this.currentBoltStage = 0;
         this.boltGraphicArray = [];
         this.removeEventListener(Event.ENTER_FRAME,this.handleChainBoltUpdate);
         this.attackManager.removeChainBoltAttackFrom(this.originalAttacker.getUserId());
      }
      
      private function createBoltGraphics() : void
      {
         var _loc2_:Lightning = null;
         var _loc3_:GlowFilter = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.chainArray.length)
         {
            _loc2_ = new Lightning(this.color,2);
            _loc2_.blendMode = BlendMode.ADD;
            _loc2_.childrenDetachedEnd = false;
            _loc2_.childrenLifeSpanMin = 1;
            _loc2_.childrenLifeSpanMax = 2;
            _loc2_.childrenMaxCount = 3;
            _loc2_.childrenMaxCountDecay = 0.5;
            _loc2_.steps = 45;
            _loc2_.childrenProbability = 0.1;
            _loc2_.thickness = 2.7;
            _loc2_.speed = 2;
            _loc2_.alphaFadeType = LightningFadeType.GENERATION;
            _loc3_ = new GlowFilter();
            _loc3_.color = this.color;
            _loc3_.strength = 3.5;
            _loc3_.quality = 3;
            _loc3_.blurX = _loc3_.blurY = 10;
            _loc2_.filters = [_loc3_];
            _loc2_.attackManager = this.attackManager;
            this.boltGraphicArray.push(_loc2_);
            _loc1_++;
         }
      }
      
      private function createBolt() : void
      {
         if(this.boltGraphic != null)
         {
            if(this.boltGraphic.getAttackerShip() != null && this.boltGraphic.getTargetShip() != null)
            {
               this.attackManager.getMap().getMain().screenManager.getExplosionLayer().addChild(this.boltGraphic);
               TweenLite.to(this.boltLeadingObject,this.boltAnimaionTime,{
                  "dynamicProps":{
                     "x":this.getTargetShipXPos,
                     "y":this.getTargetShipYPos
                  },
                  "onComplete":this.handleBoltFinishedAnimating,
                  "onUpdate":this.handleUpdate
               });
            }
            else
            {
               this.prepareAndReInitialise();
            }
         }
      }
      
      private function handleUpdate() : void
      {
         this.boltGraphic.endX = this.boltLeadingObject.x;
         this.boltGraphic.endY = this.boltLeadingObject.y;
      }
      
      private function getDistanceAndScaleFactor() : void
      {
         if(this.boltGraphic != null)
         {
            if(this.attackManager.getMap().getShipManager().getShip(this.nextTargetID) != null && Boolean(this.attackManager.getMap().getShipManager().getShip(this.attackerID)))
            {
               this.distanceToTarget = Math.sqrt(Math.pow(this.nextTarget.x - this.attacker.x,2) + Math.pow(this.nextTarget.y - this.attacker.y,2));
               this.boltGraphic.startX = this.attacker.x;
               this.boltGraphic.startY = this.attacker.y;
               this.boltGraphic.endX = this.attacker.x;
               this.boltGraphic.endY = this.attacker.y;
               this.boltGraphic.maxLength = this.distanceToTarget - this.distanceToTarget * 0.1;
               this.boltGraphic.maxLengthVary = this.distanceToTarget * 0.5;
               this.boltGraphic.attackerID = this.attackerID;
               this.boltGraphic.targetID = this.nextTargetID;
            }
            else
            {
               this.prepareAndReInitialise();
            }
         }
      }
      
      private function handleBoltFinishedAnimating() : void
      {
         this.boltGraphic.isAdded = true;
         ++this.currentBoltStage;
         if(this.currentBoltStage < this.chainArray.length)
         {
            this.attacker = this.nextTarget;
            this.attackerID = this.nextTargetID;
            this.nextTargetID = this.chainArray[this.currentBoltStage];
            this.nextTarget = this.attackManager.getMap().getShipManager().getShip(this.nextTargetID);
            this.boltGraphic = this.boltGraphicArray[this.currentBoltStage];
            this.boltFinishedAnimating = false;
            this.getDistanceAndScaleFactor();
            this.createBolt();
         }
         else
         {
            this.boltAttackFinished = true;
            this.cleanUpBolts();
         }
      }
      
      private function fadePreviousBolt(param1:Sprite, param2:int) : void
      {
         param1.alpha = 1;
         TweenLite.to(param1,this.boltFadeTime,{
            "alpha":0,
            "onComplete":this.handleBoltFinished,
            "onCompleteParams":[param1,param2]
         });
      }
      
      private function handleBoltFinished(param1:Sprite, param2:int) : void
      {
         if(this.attackManager.getMap().getMain().screenManager.getExplosionLayer().contains(param1))
         {
            this.attackManager.getMap().getMain().screenManager.getExplosionLayer().removeChild(param1);
         }
         param1.removeEventListener(Event.ENTER_FRAME,this.showRandomLastFrames);
         if(param2 == this.boltGraphicArray.length - 1)
         {
            this.removeEventListener(Event.ENTER_FRAME,this.handleChainBoltUpdate);
            this.cleanup();
         }
      }
      
      private function cleanUpBolts() : void
      {
         var _loc1_:int = 0;
         while(_loc1_ < this.boltGraphicArray.length)
         {
            this.fadePreviousBolt(this.boltGraphicArray[_loc1_],_loc1_);
            _loc1_++;
         }
      }
      
      private function getScaleFactor() : Number
      {
         return this.scaleFactor;
      }
      
      private function getTargetShipXPos() : Number
      {
         return this.nextTarget.x;
      }
      
      private function getTargetShipYPos() : Number
      {
         return this.nextTarget.y;
      }
      
      private function getDistanceToTarget() : Number
      {
         return this.distanceToTarget;
      }
      
      private function showRandomLastFrames(param1:Event) : void
      {
         var _loc2_:int = Math.round(Math.random() * (this.numFramesBoltAnimation - this.framesToRepeatBoltAnimation)) + this.framesToRepeatBoltAnimation;
         param1.currentTarget.gotoAndStop(_loc2_);
         var _loc3_:Number = Math.round(Math.random() * (1 - 0.7)) + 0.7;
         param1.currentTarget.alpha = _loc3_;
      }
      
      private function repeatLastFramesRandomly(param1:MovieClip) : void
      {
         var _loc2_:MovieClip = param1;
         param1.addEventListener(Event.ENTER_FRAME,this.showRandomLastFrames);
      }
      
      public function cleanup() : void
      {
         var _loc4_:MapObject = null;
         var _loc1_:ShipManager = this.attackManager.getMap().getShipManager();
         --this.attacker.numberChainsInvolvedIn;
         if(this.attacker.isDestroyed && this.attacker.numberChainsInvolvedIn < 1)
         {
            if(this.attacker.isHeroShip())
            {
               _loc1_.destroyHero();
            }
            else
            {
               _loc1_.removeOpponentShip(this.attacker.getUserId(),this.attacker.displaysExplosion);
            }
         }
         var _loc2_:int = 0;
         while(_loc2_ < this.chainArray.length)
         {
            _loc4_ = _loc1_.getShip(this.chainArray[_loc2_]);
            if(_loc4_ != null)
            {
               --_loc4_.numberChainsInvolvedIn;
               if(_loc4_.isDestroyed && _loc4_.numberChainsInvolvedIn < 1)
               {
                  if(_loc4_.isHeroShip())
                  {
                     _loc1_.destroyHero();
                  }
                  else
                  {
                     _loc1_.removeOpponentShip(this.chainArray[_loc2_],_loc4_.displaysExplosion);
                  }
               }
            }
            _loc2_++;
         }
         this.attackManager.removeChainBoltAttackFrom(this.originalAttackerID);
         var _loc3_:int = 0;
         while(_loc3_ < this.boltGraphicArray.length)
         {
            if(this.attackManager.getMap().getMain().screenManager.getExplosionLayer().contains(this.boltGraphicArray[_loc3_]))
            {
               this.attackManager.getMap().getMain().screenManager.getExplosionLayer().removeChild(this.boltGraphicArray[_loc3_]);
            }
            _loc3_++;
         }
         this.boltGraphicArray = [];
         this.removeEventListener(Event.ENTER_FRAME,this.handleChainBoltUpdate);
      }
   }
}

package net.bigpoint.darkorbit.combat
{
   import com.greensock.TweenLite;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import net.bigpoint.darkorbit.ship.MapObject;
   
   public class ChasingShotPirate
   {
      
      private var attackerShip:MapObject;
      
      private var targetShip:MapObject;
      
      private var shotClip:MovieClip;
      
      private var layer:Sprite;
      
      public function ChasingShotPirate(param1:MapObject, param2:MapObject, param3:MovieClip, param4:Sprite)
      {
         super();
         this.attackerShip = param1;
         this.targetShip = param2;
         this.shotClip = param3;
         this.layer = param4;
         this.init();
      }
      
      private function init() : void
      {
         this.layer.addChild(this.shotClip);
         this.shotClip.x = this.attackerShip.x;
         this.shotClip.y = this.attackerShip.y;
         TweenLite.to(this.shotClip,1,{
            "dynamicProps":{
               "x":this.getTargetShipXPos,
               "y":this.getTargetShipYPos
            },
            "onComplete":this.shotClip.parent.removeChild,
            "onCompleteParams":[this.shotClip]
         });
      }
      
      private function getTargetShipXPos() : Number
      {
         return this.targetShip.x;
      }
      
      private function getTargetShipYPos() : Number
      {
         return this.targetShip.y;
      }
   }
}

package net.bigpoint.darkorbit.combat
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Expo;
   import com.greensock.easing.Linear;
   import com.greensock.easing.Quint;
   import flash.display.Bitmap;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.geom.ColorTransform;
   import flash.utils.Dictionary;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.menu.SuperActionButton;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.RocketSmokePattern;
   import net.bigpoint.darkorbit.pattern.ShockwavePattern;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   import net.bigpoint.darkorbit.ship.ShipPattern;
   import net.bigpoint.darkorbit.ship.effects.EffectIDList;
   import net.bigpoint.darkorbit.ship.effects.EffectsManager;
   import net.bigpoint.darkorbit.ship.effects.HealBeamEffect;
   
   public class CombatManager
   {
      
      private static const logger:ILogger = Log.getLogger("CombatManager");
      
      private var laserAttacks:Dictionary;
      
      private var rocketAttacks:Array;
      
      private var chainBoltAttacks:Dictionary;
      
      private var healingBeams:Array;
      
      private var tractorBeams:Array;
      
      private var rays:Array = [];
      
      private var map:Map;
      
      private var effectsManager:EffectsManager = EffectsManager.getInstance();
      
      public function CombatManager(param1:Map)
      {
         super();
         this.map = param1;
         this.laserAttacks = new Dictionary();
         this.rocketAttacks = [];
         this.chainBoltAttacks = new Dictionary();
         this.healingBeams = [];
         this.tractorBeams = [];
      }
      
      public function cleanup() : void
      {
         var _loc1_:LaserAttackJob = null;
         var _loc2_:ChainBoltAttackJob = null;
         var _loc3_:HealingBeamJob = null;
         var _loc4_:TractorBeamJob = null;
         for each(_loc1_ in this.laserAttacks)
         {
            _loc1_.cleanup();
         }
         for each(_loc2_ in this.chainBoltAttacks)
         {
            _loc2_.cleanup();
         }
         for each(_loc3_ in this.healingBeams)
         {
            _loc3_.cleanup();
         }
         for each(_loc4_ in this.tractorBeams)
         {
            _loc4_.cleanup();
         }
         this.laserAttacks = new Dictionary();
         this.rocketAttacks = [];
         this.chainBoltAttacks = new Dictionary();
         this.healingBeams = [];
         this.tractorBeams = [];
      }
      
      public function removeRocketAttackTo(param1:int) : void
      {
         var _loc3_:RocketAttackJob = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.rocketAttacks.length)
         {
            _loc3_ = this.rocketAttacks[_loc2_];
            if(param1 == _loc3_.targetShip.getUserId())
            {
               this.rocketAttacks.splice(_loc2_,1);
               break;
            }
            _loc2_++;
         }
      }
      
      public function addLaserAttack(param1:int, param2:int, param3:int, param4:Boolean = false, param5:Boolean = false) : void
      {
         var _loc6_:MapObject = this.map.getShipManager().getShip(param1);
         var _loc7_:MapObject = this.map.getShipManager().getShip(param2);
         if(_loc6_ == null || _loc7_ == null)
         {
            return;
         }
         if(param1 == Hero.userID)
         {
            if(!this.isShipAttackedByHero(param2) && _loc7_ != null)
            {
               this.map.getMain().getGuiManager().writeToLog(BPLocale.getText("oppoatt").replace("%!",_loc7_.getUsername()));
            }
         }
         var _loc8_:ShipPattern = _loc6_.shipPattern;
         var _loc9_:int = _loc8_.getLaserClassID();
         if(_loc9_ == -1)
         {
            return;
         }
         var _loc10_:LaserPattern = PatternManager.getLaserPattern(_loc9_,param3);
         if(_loc10_ == null)
         {
            logger.fatal("laser not found for laserclass:" + _loc9_ + " laserType:" + param3);
            return;
         }
         var _loc11_:LaserAttackJob = this.laserAttacks[int(param1)];
         if(_loc11_ != null)
         {
            if(_loc11_.getTargetID() == param2)
            {
               if(_loc11_.getFireRate() == _loc10_.getFireRate())
               {
                  _loc11_.setActive(true);
                  if(_loc11_.getLaserType() != param3)
                  {
                     _loc11_.setLaserType(param3);
                  }
                  return;
               }
               _loc11_.cleanup();
               delete this.laserAttacks[int(param1)];
            }
            else
            {
               this.removeLaserAttack(param1,true);
            }
         }
         this.laserAttacks[int(param1)] = new LaserAttackJob(this,param1,param2,param3,_loc10_.getFireRate(),param4,param5);
      }
      
      public function removeLaserAttack(param1:int, param2:Boolean = true) : void
      {
         var _loc3_:LaserAttackJob = this.laserAttacks[int(param1)];
         if(_loc3_ != null)
         {
            if(param2)
            {
               _loc3_.cleanup();
            }
            delete this.laserAttacks[int(param1)];
         }
      }
      
      public function removeLaserAttackTo(param1:int) : void
      {
         var _loc2_:LaserAttackJob = null;
         for each(_loc2_ in this.laserAttacks)
         {
            if(_loc2_.getTargetID() == param1)
            {
               _loc2_.cleanup();
               delete this.laserAttacks[int(_loc2_.getAttackerID())];
            }
         }
      }
      
      public function idleLaserAttack(param1:int, param2:Boolean = true) : void
      {
         var _loc3_:LaserAttackJob = this.laserAttacks[int(param1)];
         if(_loc3_ != null)
         {
            if(param2)
            {
               _loc3_.idle();
            }
         }
      }
      
      public function idleLaserAttackTo(param1:int) : void
      {
         var _loc2_:LaserAttackJob = null;
         for each(_loc2_ in this.laserAttacks)
         {
            if(_loc2_.getTargetID() == param1)
            {
               _loc2_.idle();
            }
         }
      }
      
      public function resumeLaserAttackTo(param1:int) : void
      {
         var _loc2_:LaserAttackJob = null;
         for each(_loc2_ in this.laserAttacks)
         {
            if(_loc2_.getTargetID() == param1)
            {
               _loc2_.resume();
            }
         }
      }
      
      public function resumeLaserAttack(param1:int) : void
      {
         var _loc2_:LaserAttackJob = this.laserAttacks[int(param1)];
         if(_loc2_ != null)
         {
            _loc2_.resume();
         }
      }
      
      public function removeChainBoltAttackFrom(param1:int) : void
      {
         var _loc2_:ChainBoltAttackJob = this.chainBoltAttacks[int(param1)];
         if(_loc2_ != null)
         {
            delete this.chainBoltAttacks[int(_loc2_.originalAttackerID)];
         }
      }
      
      public function removeHealingBeamFrom(param1:int) : void
      {
         var _loc2_:HealingBeamJob = this.healingBeams[int(param1)];
         if(_loc2_ != null)
         {
            delete this.healingBeams[int(_loc2_.originalAttackerID)];
         }
      }
      
      public function addChainBoltAttackFor(param1:int, param2:ChainBoltAttackJob) : void
      {
         this.chainBoltAttacks[int(param1)] = param2;
      }
      
      public function removeTractorBeam(param1:int, param2:Boolean = true) : void
      {
         var _loc3_:TractorBeamJob = this.tractorBeams[int(param1)];
         if(_loc3_ != null)
         {
            if(param2)
            {
               _loc3_.cleanup();
            }
            delete this.tractorBeams[int(param1)];
         }
      }
      
      public function isShipAttackedByHero(param1:int) : Boolean
      {
         var _loc2_:LaserAttackJob = this.laserAttacks[int(Hero.userID)];
         if(_loc2_ != null && _loc2_.getTargetID() == param1)
         {
            return true;
         }
         return false;
      }
      
      public function isShipAttacking(param1:int) : LaserAttackJob
      {
         var _loc2_:LaserAttackJob = this.laserAttacks[int(param1)];
         if(_loc2_ != null)
         {
            return _loc2_;
         }
         return null;
      }
      
      public function addRocketAttack(param1:int, param2:int, param3:int, param4:Boolean, param5:int = 0, param6:Boolean = false) : void
      {
         var _loc7_:MapObject = null;
         var _loc13_:MovieClip = null;
         var _loc14_:MovieClip = null;
         var _loc15_:Number = NaN;
         var _loc16_:int = 0;
         var _loc17_:RocketSmokePattern = null;
         var _loc18_:Number = NaN;
         var _loc19_:RocketAttackJob = null;
         var _loc20_:ColorTransform = null;
         _loc7_ = this.map.getShipManager().getShip(param1);
         if(_loc7_ == null)
         {
            return;
         }
         if(_loc7_.getUserId() == Hero.userID)
         {
            this.map.getMain().getGuiManager().getMenuManager().flashButton(SuperActionButton.ACTIVATION_ROCKET);
         }
         var _loc8_:ShipPattern = _loc7_.shipPattern;
         var _loc9_:int = _loc8_.getRocketClass();
         if(_loc9_ == -1)
         {
            return;
         }
         var _loc10_:RocketPattern = PatternManager.getRocketPattern(_loc9_,param3);
         if(_loc10_ == null)
         {
            _loc10_ = PatternManager.getRocketPattern(0,0);
         }
         var _loc11_:int = _loc10_.getSoundID();
         if(_loc11_ != -1)
         {
            AudioManager.playSoundEffect(_loc11_,false,false,_loc7_.x,_loc7_.y,true);
         }
         var _loc12_:MapObject = this.map.getShipManager().getShip(param2);
         if(_loc7_ != null && _loc12_ != null)
         {
            _loc13_ = ResourceManager.getMovieClip(_loc10_.getResKey(),"mc");
            _loc13_.x = _loc7_.x;
            _loc13_.y = _loc7_.y;
            _loc14_ = null;
            if(param6)
            {
               _loc14_ = ResourceManager.getMovieClip("minePulse","mc");
               _loc20_ = new ColorTransform();
               _loc20_.color = 16711680;
               _loc14_.transform.colorTransform = _loc20_;
               _loc13_.addChild(_loc14_);
               this.playPulseAnimation(_loc14_,15);
               _loc14_.x = -30;
            }
            _loc15_ = Math.atan2(_loc12_.y - _loc7_.y,_loc12_.x - _loc7_.x) * 180 / Math.PI;
            _loc16_ = Math.round(_loc15_ + 180);
            _loc13_.rotation = _loc16_;
            this.map.getMain().screenManager.getExplosionLayer().addChild(_loc13_);
            if(!_loc8_.playLoop)
            {
               this.focusShip(_loc7_,_loc12_);
            }
            _loc17_ = PatternManager.rocketSmokePatterns[param5];
            _loc18_ = 0.75;
            _loc19_ = new RocketAttackJob(this,_loc7_,_loc12_,_loc13_,param4,_loc18_,_loc17_,param6,_loc14_);
            this.rocketAttacks.push(_loc19_);
            _loc19_.init();
         }
      }
      
      public function addChainBoltAttack(param1:int, param2:Array) : void
      {
         var _loc6_:MapObject = null;
         var _loc3_:MapObject = this.map.getShipManager().getShip(param1);
         if(_loc3_ == null)
         {
            return;
         }
         ++_loc3_.numberChainsInvolvedIn;
         var _loc4_:int = 0;
         while(_loc4_ < param2.length)
         {
            _loc6_ = this.map.getShipManager().getShip(param2[_loc4_]);
            if(_loc6_ == null)
            {
               return;
            }
            ++_loc6_.numberChainsInvolvedIn;
            _loc4_++;
         }
         var _loc5_:ChainBoltAttackJob = new ChainBoltAttackJob(_loc3_,param2,this,false);
         this.chainBoltAttacks[int(param1)] = _loc5_;
         _loc5_.init();
      }
      
      public function addAirstrike(param1:int, param2:int, param3:int, param4:int = 20, param5:Boolean = false) : void
      {
         var _loc13_:int = 0;
         var _loc14_:MovieClip = null;
         var _loc15_:Number = NaN;
         var _loc16_:int = 0;
         var _loc17_:Number = NaN;
         var _loc18_:RocketAttackJob = null;
         var _loc6_:MapObject = this.map.getShipManager().getShip(param1);
         if(_loc6_ == null)
         {
            return;
         }
         if(_loc6_.getUserId() == Hero.userID)
         {
            this.map.getMain().getGuiManager().getMenuManager().flashButton(SuperActionButton.ACTIVATION_ROCKET);
         }
         var _loc7_:ShipPattern = _loc6_.shipPattern;
         var _loc8_:int = _loc7_.getRocketClass();
         var _loc9_:RocketPattern = PatternManager.getRocketPattern(_loc8_,param3);
         if(_loc9_ == null)
         {
            _loc9_ = PatternManager.getRocketPattern(0,0);
         }
         AudioManager.playSoundEffect(_loc9_.getSoundID(),false,false,_loc6_.x,_loc6_.y);
         AudioManager.playSoundEffect(40,false,false,_loc6_.x,_loc6_.y);
         var _loc10_:MapObject = this.map.getShipManager().getShip(param2);
         if(!_loc7_.playLoop)
         {
            this.focusShip(_loc6_,_loc10_);
         }
         var _loc11_:RocketSmokePattern = PatternManager.rocketSmokePatterns[0];
         var _loc12_:Number = 0;
         if(_loc6_ != null && _loc10_ != null)
         {
            _loc13_ = 0;
            while(_loc13_ < param4)
            {
               _loc14_ = ResourceManager.getMovieClip(_loc9_.getResKey(),"mc");
               _loc14_.x = _loc6_.x;
               _loc14_.y = _loc6_.y;
               _loc15_ = Math.atan2(_loc10_.y - _loc6_.y,_loc10_.x - _loc6_.x) * 180 / Math.PI;
               _loc16_ = Math.round(_loc15_ + 180);
               _loc14_.rotation = _loc16_;
               this.map.getMain().screenManager.getExplosionLayer().addChild(_loc14_);
               _loc17_ = Main.getRandomCount(75,200) / 100;
               if(_loc17_ > _loc12_)
               {
                  _loc12_ = _loc17_;
               }
               _loc18_ = new RocketAttackJob(this,_loc6_,_loc10_,_loc14_,true,_loc17_,_loc11_,true,null);
               _loc18_.airstrikeMode = true;
               this.rocketAttacks.push(_loc18_);
               _loc18_.init();
               if(_loc13_ == param4 - 1 && param5 == true)
               {
                  TweenMax.delayedCall(_loc12_,this.handleAirStrikeMissedDisplay,[_loc10_]);
               }
               _loc13_++;
            }
         }
      }
      
      public function handleAirStrikeMissedDisplay(param1:Ship) : void
      {
         if(Settings.displayHitpointBubbles)
         {
            if(this.map != null)
            {
               this.map.getMain().getGuiManager().showHitpointDelta(param1,0);
            }
         }
      }
      
      private function playPulseAnimation(param1:MovieClip, param2:int) : void
      {
         var _loc3_:int = param1.framesLoaded;
         var _loc4_:Number = _loc3_ / param2;
         param1.gotoAndStop(1);
         AudioManager.playSoundEffect(38,false,false,param1.parent.x,param1.parent.y);
         TweenLite.to(param1,_loc4_,{
            "ease":Linear.easeNone,
            "frame":_loc3_,
            "onComplete":this.playPulseAnimation,
            "onCompleteParams":[param1,param2]
         });
      }
      
      public function focusShip(param1:MapObject, param2:MapObject) : void
      {
         if(param1 == null || param2 == null)
         {
            return;
         }
         var _loc3_:Number = Math.atan2(param2.y - param1.y,param2.x - param1.x) * 180 / Math.PI;
         var _loc4_:int = Math.round(_loc3_ + 180);
         TweenMax.to(param1,0.25,{
            "ease":Expo.easeOut,
            "shortRotation":{"shipRotation":_loc4_}
         });
      }
      
      public function getMap() : Map
      {
         return this.map;
      }
      
      public function addEMPBolt() : void
      {
         var _loc1_:Ship = this.map.getShipManager().getHero();
         var _loc2_:Number = 0;
         var _loc3_:int = 0;
         while(_loc3_ < 3)
         {
            TweenMax.delayedCall(_loc2_,this.attachEMPBoltClip);
            _loc2_ += 0.15;
            _loc3_++;
         }
         AudioManager.playSoundEffect(45,false,false,_loc1_.x,_loc1_.y);
      }
      
      private function attachEMPBoltClip() : void
      {
         var _loc1_:Ship = this.map.getShipManager().getHero();
         var _loc2_:int = _loc1_.radius / 3;
         var _loc3_:MovieClip = ResourceManager.getMovieClip("shockwaves","blitz");
         var _loc4_:Number = Main.getRandomCount(200,1000) / 1000;
         _loc3_.scaleX = _loc4_;
         _loc3_.scaleY = _loc4_;
         var _loc5_:int = Main.getRandomCount(-_loc2_,_loc2_);
         var _loc6_:int = Main.getRandomCount(-_loc2_,_loc2_);
         TweenLite.to(_loc3_,2,{
            "x":_loc5_,
            "y":_loc6_
         });
         _loc1_.getClipContainer().addChild(_loc3_);
         ScreenManager.playAnimation(_loc3_,15,true);
         TweenMax.delayedCall(3,this.stopBoltAnimation,[_loc3_]);
      }
      
      private function stopBoltAnimation(param1:MovieClip) : void
      {
         TweenLite.to(param1,0.5,{
            "scaleX":0.1,
            "scaleY":0.1,
            "onComplete":this.removeBolt,
            "onCompleteParams":[param1]
         });
      }
      
      private function removeBolt(param1:MovieClip) : void
      {
         param1.parent.removeChild(param1);
         TweenMax.killTweensOf(param1);
      }
      
      public function addEMPtoShip(param1:MapObject) : void
      {
         this.createEMP(param1.getClipContainer(),param1.x,param1.y);
      }
      
      public function addEMPtoMap(param1:int, param2:int) : void
      {
         var _loc3_:Sprite = new Sprite();
         _loc3_.x = param1;
         _loc3_.y = param2;
         this.map.getMain().screenManager.getExplosionLayer().addChild(_loc3_);
         this.createEMP(_loc3_,param1,param2);
      }
      
      private function createEMP(param1:Sprite, param2:int, param3:int) : void
      {
         var _loc5_:Bitmap = null;
         var _loc6_:Number = NaN;
         var _loc7_:int = 0;
         var _loc8_:MovieClip = null;
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("shockwaves"));
         if(param1 != null)
         {
            _loc5_ = ResourceManager.getBitmap("lensFlash","lensFlash");
            _loc5_.x = -_loc5_.width * 0.5;
            _loc5_.y = -_loc5_.height * 0.5;
            param1.addChild(_loc5_);
            TweenLite.to(_loc5_,0.25,{
               "alpha":0,
               "onComplete":this.removeFromParent,
               "onCompleteParams":[_loc5_,param1]
            });
            _loc6_ = 0;
            _loc7_ = 0;
            while(_loc7_ < 5)
            {
               TweenMax.delayedCall(_loc6_,this.showEMPRing,[_loc4_,param1,_loc7_]);
               _loc6_ += 0.1;
               _loc7_++;
            }
            _loc8_ = MovieClip(_loc4_.getEmbededMovieClip("blitz"));
            ScreenManager.playAnimation(_loc8_,15,true);
            _loc8_.scaleX = 0.1;
            _loc8_.scaleY = 0.1;
            param1.addChild(_loc8_);
            TweenLite.to(_loc8_,1.5,{
               "scaleX":3.5,
               "scaleY":3.5,
               "onComplete":this.removeFromParent,
               "onCompleteParams":[_loc8_,param1]
            });
            TweenMax.delayedCall(0.75,this.fadeOutBolt,[_loc8_]);
            AudioManager.playSoundEffect(43,false,false,param2,param3);
         }
      }
      
      private function removeFromParent(param1:DisplayObject, param2:Sprite, param3:int = -1) : void
      {
         TweenMax.killTweensOf(param1);
         if(param2 != null && param2.contains(param1))
         {
            param2.removeChild(param1);
         }
      }
      
      private function showEMPRing(param1:SWFFinisher, param2:Sprite, param3:int) : void
      {
         var _loc4_:MovieClip = MovieClip(param1.getEmbededMovieClip("shockring0"));
         _loc4_.scaleX = 0.1;
         _loc4_.scaleY = 0.1;
         _loc4_.alpha = 0.3;
         param2.addChild(_loc4_);
         TweenLite.to(_loc4_,1.5,{
            "scaleX":3.5,
            "scaleY":3.5,
            "alpha":0,
            "onComplete":this.removeFromParent,
            "onCompleteParams":[_loc4_,param2,param3]
         });
      }
      
      private function fadeOutBolt(param1:MovieClip) : void
      {
         TweenLite.to(param1,0.25,{"alpha":0});
      }
      
      public function showShockwave(param1:int, param2:int, param3:int, param4:Boolean, param5:int = 300) : void
      {
         var _loc11_:Bitmap = null;
         var _loc12_:int = 0;
         var _loc13_:Sprite = null;
         var _loc6_:int = 40;
         var _loc7_:int = 360 / _loc6_;
         var _loc8_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("shockwaves"));
         var _loc9_:ShockwavePattern = PatternManager.shockwavePatterns[param1];
         var _loc10_:int = 0;
         while(_loc10_ < _loc6_)
         {
            _loc11_ = Bitmap(_loc8_.getEmbededBitmap(_loc9_.getResKey()));
            _loc11_.x = param2;
            _loc11_.y = param3;
            _loc12_ = _loc10_ * _loc7_;
            _loc11_.rotation = _loc12_ + 180;
            _loc13_ = this.map.getMain().screenManager.getExplosionLayer();
            _loc13_.addChild(_loc11_);
            TweenLite.to(_loc11_,_loc9_.duration,{
               "ease":Quint.easeOut,
               "x":param2 + int(param5 * Math.cos(_loc12_ * Math.PI / 180)),
               "y":param3 + int(param5 * Math.sin(_loc12_ * Math.PI / 180)),
               "scaleX":_loc9_.endScale,
               "scaleY":_loc9_.endScale,
               "alpha":0,
               "onComplete":this.handleAnimationFinished,
               "onCompleteParams":[_loc13_,_loc11_]
            });
            _loc10_++;
         }
         if(param4)
         {
            AudioManager.playSoundEffect(36,false,false,_loc11_.x,_loc11_.y);
         }
      }
      
      public function showPyroEffect(param1:int, param2:int, param3:ExplosionPattern, param4:int = 37, param5:Boolean = true, param6:Boolean = false) : void
      {
         var _loc8_:DisplayObject = null;
         var _loc9_:int = 0;
         var _loc7_:String = param3.getResKey();
         if(param6 || param3.useBitmapClip)
         {
            _loc8_ = new BitmapClip(ResourceManager.getMovieClip(_loc7_,"mc"),param3.getResKey());
            _loc9_ = BitmapClip(_loc8_).framesLoaded;
         }
         else
         {
            _loc8_ = MovieClip(ResourceManager.getMovieClip(_loc7_,"mc"));
            _loc9_ = MovieClip(_loc8_).framesLoaded;
         }
         _loc8_.x = param1;
         _loc8_.y = param2;
         _loc8_.rotation = Math.random() * 360;
         var _loc10_:Number = _loc9_ / param4;
         var _loc11_:Sprite = this.map.getMain().screenManager.getExplosionLayer();
         _loc11_.addChild(_loc8_);
         TweenLite.to(_loc8_,_loc10_,{
            "ease":Linear.easeNone,
            "frame":_loc9_,
            "onComplete":this.handleAnimationFinished,
            "onCompleteParams":[_loc11_,_loc8_]
         });
         var _loc12_:int = param3.getSoundID();
         if(_loc12_ != -1 && param5)
         {
            AudioManager.playSoundEffect(_loc12_,false,false,_loc8_.x,_loc8_.y);
         }
      }
      
      public function showPyroEffectOnShip(param1:ExplosionPattern, param2:MapObject, param3:int = 37, param4:Boolean = false) : void
      {
         var _loc7_:DisplayObject = null;
         var _loc8_:int = 0;
         var _loc5_:String = param1.getResKey();
         var _loc6_:Sprite = param2.getClipContainer();
         if(param4 || param1.useBitmapClip)
         {
            _loc7_ = new BitmapClip(ResourceManager.getMovieClip(_loc5_,"mc"),param1.getResKey());
            _loc8_ = BitmapClip(_loc7_).framesLoaded;
         }
         else
         {
            _loc7_ = MovieClip(ResourceManager.getMovieClip(_loc5_,"mc"));
            _loc8_ = MovieClip(_loc7_).framesLoaded;
         }
         var _loc9_:Number = _loc8_ / param3;
         _loc6_.addChild(_loc7_);
         TweenLite.to(_loc7_,_loc9_,{
            "ease":Linear.easeNone,
            "frame":_loc8_,
            "onComplete":this.handleAnimationFinished,
            "onCompleteParams":[_loc6_,_loc7_]
         });
         var _loc10_:int = param1.getSoundID();
         if(_loc10_ != -1)
         {
            AudioManager.playSoundEffect(_loc10_,false,false,param2.getClipContainer().x,param2.getClipContainer().y);
         }
      }
      
      private function handleAnimationFinished(param1:Sprite, param2:DisplayObject) : void
      {
         param1.removeChild(param2);
      }
      
      public function addChasingShot(param1:int, param2:int, param3:String) : void
      {
         var _loc6_:SWFFinisher = null;
         var _loc7_:MovieClip = null;
         var _loc4_:MapObject = this.map.getShipManager().getShip(param1);
         var _loc5_:MapObject = this.map.getShipManager().getShip(param2);
         if(_loc4_ != null && _loc5_ != null)
         {
            _loc6_ = SWFFinisher(ResourceManager.fileCollection.getFinisher(param3));
            _loc7_ = _loc6_.getEmbededMovieClip("mc");
            new ChasingShotPirate(_loc4_,_loc5_,_loc7_,this.map.getMain().screenManager.getExplosionLayer());
            AudioManager.playSoundEffect(76,false,false,_loc4_.x,_loc4_.y,true);
         }
      }
      
      public function addHealingBeam(param1:int, param2:int) : void
      {
         var _loc3_:MapObject = this.map.getShipManager().getShip(param1);
         if(_loc3_ == null)
         {
            return;
         }
         var _loc4_:MapObject = this.map.getShipManager().getShip(param2);
         if(_loc4_ == null)
         {
            return;
         }
         var _loc5_:HealBeamEffect = new HealBeamEffect(EffectIDList.HEALBEAM_EFFECT,PatternManager.effectPatterns[EffectIDList.HEALBEAM_EFFECT],[param2]);
         _loc5_.id = param2;
         if(!this.effectsManager.doesEffectExistOn(_loc3_,EffectIDList.HEALBEAM_EFFECT,param2))
         {
            this.effectsManager.addEffect(_loc5_,_loc3_,EffectsManager.NORMAL_EFFECT);
            _loc5_.startEmitter(_loc3_,_loc4_);
            AudioManager.playSoundEffect(77,false,false,_loc3_.x,_loc3_.y);
         }
      }
      
      public function addTractorBeam(param1:int, param2:int) : void
      {
         var _loc3_:MapObject = this.map.getShipManager().getShip(param1);
         if(_loc3_ == null)
         {
            return;
         }
         var _loc4_:MapObject = this.map.getShipManager().getShip(param2);
         if(_loc4_ == null)
         {
         }
         var _loc5_:TractorBeamJob = new TractorBeamJob(this,param1,param2);
         this.tractorBeams[int(param1)] = _loc5_;
         _loc5_.init();
      }
      
      public function isTruce() : Boolean
      {
         if(this.laserAttacks.length == 0 && this.rocketAttacks.length == 0)
         {
            return true;
         }
         return false;
      }
   }
}

package net.bigpoint.darkorbit.combat
{
   import net.bigpoint.darkorbit.pattern.AudibleResourcePattern;
   
   public class ExplosionPattern extends AudibleResourcePattern
   {
      
      public static const TYPE_SHIP_EXPLOSION:int = 0;
      
      public static const TYPE_MINE_EXPLOSION:int = 1;
      
      public static const TYPE_LASER_DAMAGE:int = 2;
      
      public static const TYPE_ROCKET_DAMAGE:int = 3;
      
      public static const TYPE_SMARTBOMB_EXPLOSION:int = 4;
      
      public static const TYPE_INSTASHIELD:int = 5;
      
      public var useBitmapClip:Boolean;
      
      public var precache:Boolean;
      
      public var displayShockwave:Boolean;
      
      private var patternClass:int;
      
      public function ExplosionPattern(param1:int, param2:int, param3:String)
      {
         super(param2,param3);
         this.patternClass = param1;
      }
      
      public function getPatternClass() : int
      {
         return this.patternClass;
      }
   }
}

package net.bigpoint.darkorbit.combat
{
   import com.greensock.TweenLite;
   import flash.display.*;
   import flash.events.Event;
   import flash.filters.*;
   import net.bigpoint.FastMath;
   import net.bigpoint.darkorbit.fireworks.*;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.ShipManager;
   
   public class HealingBeamJob extends MovieClip
   {
      
      private var beamAnimaionTime:Number = 0.3;
      
      private var boltFadeTime:Number = 3;
      
      private var attacker:MapObject;
      
      public var attackerID:int;
      
      private var originalAttacker:MapObject;
      
      public var originalAttackerID:int;
      
      public var target:MapObject;
      
      private var nextTarget:MapObject;
      
      private var nextTargetID:int;
      
      private var chainArray:Array;
      
      private var boltGraphicActual:Array = new Array();
      
      private var boltGraphicArray:Array = new Array();
      
      private var numFramesBoltAnimation:int;
      
      private var framesToRepeatBoltAnimation:int;
      
      private var boltFinishedAnimating:Boolean = false;
      
      private var boltGraphic:Lightning = new Lightning();
      
      private var currentBoltStage:int = 0;
      
      private var chainLength:int;
      
      private var boltAttackFinished:Boolean = false;
      
      private var attackManager:CombatManager;
      
      private var animationPacing:Sprite = new Sprite();
      
      private var boltLeadingObject:Sprite = new Sprite();
      
      private var overPI:Number = 57.29577951308232;
      
      private var distanceToTarget:Number;
      
      private var scaleFactor:Number;
      
      private var originalBoltWidth:Number = 4;
      
      private var color:uint = 14544639;
      
      private var lightning:Lightning;
      
      private var instantChainBuild:Boolean = false;
      
      public function HealingBeamJob(param1:MapObject, param2:int, param3:CombatManager, param4:Boolean)
      {
         super();
         this.attackManager = param3;
         this.attacker = param1;
         this.attackerID = this.attacker.getUserId();
         this.originalAttackerID = this.attacker.getUserId();
         this.originalAttacker = param1;
         this.chainArray = [param2];
         this.chainLength = this.chainArray.length;
         this.instantChainBuild = param4;
      }
      
      public function init() : void
      {
         if(this.instantChainBuild)
         {
            this.beamAnimaionTime = 1e-7;
         }
         else
         {
            this.beamAnimaionTime = 0.3;
         }
         this.createBoltGraphics();
         this.boltGraphic = this.boltGraphicArray[0];
         this.originalBoltWidth = this.boltGraphic.width;
         this.nextTargetID = this.chainArray[0];
         this.nextTarget = this.attackManager.getMap().getShipManager().getShip(this.nextTargetID);
         this.boltLeadingObject.x = this.originalAttacker.x;
         this.boltLeadingObject.y = this.originalAttacker.y;
         this.attacker = this.originalAttacker;
         this.getDistanceAndScaleFactor();
         this.addEventListener(Event.ENTER_FRAME,this.handleChainBoltUpdate);
         this.createBolt();
      }
      
      private function handleChainBoltUpdate(param1:Event) : void
      {
         var _loc3_:Lightning = null;
         var _loc4_:Number = NaN;
         var _loc2_:int = 0;
         while(_loc2_ < this.boltGraphicArray.length)
         {
            _loc3_ = this.boltGraphicArray[_loc2_];
            if(_loc3_.isAdded)
            {
               if(_loc3_.getAttackerShip() != null && _loc3_.getTargetShip() != null)
               {
                  _loc3_.startX = _loc3_.getAttackerShip().x;
                  _loc3_.startY = _loc3_.getAttackerShip().y;
                  _loc3_.endX = _loc3_.getTargetShip().x;
                  _loc3_.endY = _loc3_.getTargetShip().y;
                  _loc4_ = FastMath.sqrt(Math.pow(_loc3_.getTargetShip().x - _loc3_.getAttackerShip().x,2) + Math.pow(_loc3_.getTargetShip().y - _loc3_.getAttackerShip().y,2));
                  _loc3_.maxLength = _loc4_ * 0.9;
                  _loc3_.maxLengthVary = _loc4_ * 0.5;
               }
               else
               {
                  this.prepareAndReInitialise();
               }
            }
            _loc3_.update();
            _loc2_++;
         }
      }
      
      private function prepareAndReInitialise() : void
      {
         var _loc3_:int = 0;
         var _loc1_:int = 0;
         while(_loc1_ < this.chainArray.length)
         {
            _loc3_ = int(this.chainArray[_loc1_]);
            if(this.attackManager.getMap().getShipManager().getShip(_loc3_) == null)
            {
            }
            _loc1_++;
         }
         var _loc2_:int = 0;
         while(_loc2_ < this.boltGraphicArray.length)
         {
            if(this.attackManager.getMap().getMain().screenManager.getExplosionLayer().contains(this.boltGraphicArray[_loc2_]))
            {
               this.attackManager.getMap().getMain().screenManager.getExplosionLayer().removeChild(this.boltGraphicArray[_loc2_]);
            }
            _loc2_++;
         }
         this.currentBoltStage = 0;
         this.boltGraphicArray = [];
         this.removeEventListener(Event.ENTER_FRAME,this.handleChainBoltUpdate);
         this.attackManager.removeHealingBeamFrom(this.originalAttacker.getUserId());
      }
      
      private function createBoltGraphics() : void
      {
         var _loc2_:Lightning = null;
         var _loc3_:GlowFilter = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.chainArray.length)
         {
            _loc2_ = new Lightning(this.color,2);
            _loc2_.blendMode = BlendMode.ADD;
            _loc2_.childrenDetachedEnd = false;
            _loc2_.childrenLifeSpanMin = 1;
            _loc2_.childrenLifeSpanMax = 2;
            _loc2_.childrenMaxCount = 3;
            _loc2_.childrenMaxCountDecay = 0.5;
            _loc2_.steps = 45;
            _loc2_.childrenProbability = 0.1;
            _loc2_.thickness = 2.7;
            _loc2_.speed = 2;
            _loc2_.alphaFadeType = LightningFadeType.GENERATION;
            _loc3_ = new GlowFilter();
            _loc3_.color = this.color;
            _loc3_.strength = 3.5;
            _loc3_.quality = 3;
            _loc3_.blurX = _loc3_.blurY = 10;
            _loc2_.filters = [_loc3_];
            _loc2_.attackManager = this.attackManager;
            this.boltGraphicArray.push(_loc2_);
            _loc1_++;
         }
      }
      
      private function createBolt() : void
      {
         if(this.boltGraphic != null)
         {
            if(this.boltGraphic.getAttackerShip() != null && this.boltGraphic.getTargetShip() != null)
            {
               this.attackManager.getMap().getMain().screenManager.getExplosionLayer().addChild(this.boltGraphic);
               TweenLite.to(this.boltLeadingObject,this.beamAnimaionTime,{
                  "dynamicProps":{
                     "x":this.getTargetShipXPos,
                     "y":this.getTargetShipYPos
                  },
                  "onComplete":this.handleBoltFinishedAnimating,
                  "onUpdate":this.handleUpdate
               });
            }
            else
            {
               this.prepareAndReInitialise();
            }
         }
      }
      
      private function handleUpdate() : void
      {
         this.boltGraphic.endX = this.boltLeadingObject.x;
         this.boltGraphic.endY = this.boltLeadingObject.y;
      }
      
      private function getDistanceAndScaleFactor() : void
      {
         if(this.boltGraphic != null)
         {
            if(this.attackManager.getMap().getShipManager().getShip(this.nextTargetID) != null && Boolean(this.attackManager.getMap().getShipManager().getShip(this.attackerID)))
            {
               this.distanceToTarget = Math.sqrt(Math.pow(this.nextTarget.x - this.attacker.x,2) + Math.pow(this.nextTarget.y - this.attacker.y,2));
               this.boltGraphic.startX = this.attacker.x;
               this.boltGraphic.startY = this.attacker.y;
               this.boltGraphic.endX = this.attacker.x;
               this.boltGraphic.endY = this.attacker.y;
               this.boltGraphic.maxLength = this.distanceToTarget - this.distanceToTarget * 0.1;
               this.boltGraphic.maxLengthVary = this.distanceToTarget * 0.5;
               this.boltGraphic.attackerID = this.attackerID;
               this.boltGraphic.targetID = this.nextTargetID;
            }
            else
            {
               this.prepareAndReInitialise();
            }
         }
      }
      
      private function handleBoltFinishedAnimating() : void
      {
         this.boltGraphic.isAdded = true;
         ++this.currentBoltStage;
         if(this.currentBoltStage < this.chainArray.length)
         {
            this.attacker = this.nextTarget;
            this.attackerID = this.nextTargetID;
            this.nextTargetID = this.chainArray[this.currentBoltStage];
            this.nextTarget = this.attackManager.getMap().getShipManager().getShip(this.nextTargetID);
            this.boltGraphic = this.boltGraphicArray[this.currentBoltStage];
            this.boltFinishedAnimating = false;
            this.getDistanceAndScaleFactor();
            this.createBolt();
         }
         else
         {
            this.boltAttackFinished = true;
            this.cleanUpBolts();
         }
      }
      
      private function fadePreviousBolt(param1:Sprite, param2:int) : void
      {
         param1.alpha = 1;
         TweenLite.to(param1,this.boltFadeTime,{
            "alpha":0,
            "onComplete":this.handleBoltFinished,
            "onCompleteParams":[param1,param2]
         });
      }
      
      private function handleBoltFinished(param1:Sprite, param2:int) : void
      {
         if(this.attackManager.getMap().getMain().screenManager.getExplosionLayer().contains(param1))
         {
            this.attackManager.getMap().getMain().screenManager.getExplosionLayer().removeChild(param1);
         }
         param1.removeEventListener(Event.ENTER_FRAME,this.showRandomLastFrames);
         if(param2 == this.boltGraphicArray.length - 1)
         {
            this.removeEventListener(Event.ENTER_FRAME,this.handleChainBoltUpdate);
            this.cleanup();
         }
      }
      
      private function cleanUpBolts() : void
      {
         var _loc1_:int = 0;
         while(_loc1_ < this.boltGraphicArray.length)
         {
            this.fadePreviousBolt(this.boltGraphicArray[_loc1_],_loc1_);
            _loc1_++;
         }
      }
      
      private function getScaleFactor() : Number
      {
         return this.scaleFactor;
      }
      
      private function getTargetShipXPos() : Number
      {
         return this.nextTarget.x;
      }
      
      private function getTargetShipYPos() : Number
      {
         return this.nextTarget.y;
      }
      
      private function getDistanceToTarget() : Number
      {
         return this.distanceToTarget;
      }
      
      private function showRandomLastFrames(param1:Event) : void
      {
         var _loc2_:int = Math.round(Math.random() * (this.numFramesBoltAnimation - this.framesToRepeatBoltAnimation)) + this.framesToRepeatBoltAnimation;
         param1.currentTarget.gotoAndStop(_loc2_);
         var _loc3_:Number = Math.round(Math.random() * (1 - 0.7)) + 0.7;
         param1.currentTarget.alpha = _loc3_;
      }
      
      private function repeatLastFramesRandomly(param1:MovieClip) : void
      {
         var _loc2_:MovieClip = param1;
         param1.addEventListener(Event.ENTER_FRAME,this.showRandomLastFrames);
      }
      
      public function cleanup() : void
      {
         var _loc4_:MapObject = null;
         var _loc1_:ShipManager = this.attackManager.getMap().getShipManager();
         --this.attacker.numberChainsInvolvedIn;
         if(this.attacker.isDestroyed && this.attacker.numberChainsInvolvedIn < 1)
         {
            if(this.attacker.isHeroShip())
            {
               _loc1_.destroyHero();
            }
            else
            {
               _loc1_.removeOpponentShip(this.attacker.getUserId(),this.attacker.displaysExplosion);
            }
         }
         var _loc2_:int = 0;
         while(_loc2_ < this.chainArray.length)
         {
            _loc4_ = _loc1_.getShip(this.chainArray[_loc2_]);
            if(_loc4_ != null)
            {
               --_loc4_.numberChainsInvolvedIn;
               if(_loc4_.isDestroyed && _loc4_.numberChainsInvolvedIn < 1)
               {
                  if(_loc4_.isHeroShip())
                  {
                     _loc1_.destroyHero();
                  }
                  else
                  {
                     _loc1_.removeOpponentShip(this.chainArray[_loc2_],_loc4_.displaysExplosion);
                  }
               }
            }
            _loc2_++;
         }
         this.attackManager.removeHealingBeamFrom(this.originalAttackerID);
         var _loc3_:int = 0;
         while(_loc3_ < this.boltGraphicArray.length)
         {
            if(this.attackManager.getMap().getMain().screenManager.getExplosionLayer().contains(this.boltGraphicArray[_loc3_]))
            {
               this.attackManager.getMap().getMain().screenManager.getExplosionLayer().removeChild(this.boltGraphicArray[_loc3_]);
            }
            _loc3_++;
         }
         this.boltGraphicArray = [];
         this.removeEventListener(Event.ENTER_FRAME,this.handleChainBoltUpdate);
      }
   }
}

package net.bigpoint.darkorbit.combat
{
   import com.greensock.TweenLite;
   import com.greensock.easing.Back;
   import com.greensock.easing.Linear;
   import com.greensock.easing.Sine;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.TimerEvent;
   import flash.geom.Point;
   import flash.utils.Timer;
   import net.bigpoint.FastMath;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.ShipPattern;
   
   public class LaserAttackJob
   {
      
      private static var defaultSalvos:Array = [[[new Point(0,0)]]];
      
      private var attackerID:int;
      
      private var targetID:int;
      
      private var laserType:int;
      
      private var fireRate:int;
      
      private var timer:Timer;
      
      private var active:Boolean;
      
      private var combatManager:CombatManager;
      
      private var cnt:int = 0;
      
      private var attackerShip:MapObject;
      
      private var targetShip:MapObject;
      
      private var laserPattern:LaserPattern;
      
      private var overrideSoundLimit:Boolean;
      
      private var shipPattern:ShipPattern;
      
      private var showShieldDamage:Boolean;
      
      private var skilledLaser:Boolean;
      
      private var salvos:Array;
      
      private var usedSalvoPattern:int;
      
      private var salvosLoopPatternLength:int;
      
      private var resKey:String;
      
      private var canAlign:Boolean = false;
      
      private var laserLayer:Sprite;
      
      public function LaserAttackJob(param1:CombatManager, param2:int, param3:int, param4:int, param5:int, param6:Boolean = false, param7:Boolean = false)
      {
         super();
         this.combatManager = param1;
         this.attackerID = param2;
         this.targetID = param3;
         this.laserType = param4;
         this.fireRate = param5;
         this.active = true;
         this.showShieldDamage = param6;
         this.skilledLaser = param7;
         this.laserLayer = this.combatManager.getMap().getMain().screenManager.getLaserLayer();
         this.init();
      }
      
      private function init() : void
      {
         var _loc2_:int = 0;
         if(this.attackerID == Hero.userID)
         {
            this.overrideSoundLimit = true;
         }
         var _loc1_:Map = this.combatManager.getMap();
         if(_loc1_ == null)
         {
            this.combatManager.removeLaserAttack(this.attackerID);
         }
         else
         {
            this.attackerShip = _loc1_.getShipManager().getShip(this.attackerID);
            this.targetShip = _loc1_.getShipManager().getShip(this.targetID);
            if(this.attackerShip == null || this.targetShip == null)
            {
               this.combatManager.removeLaserAttack(this.attackerID);
            }
            else
            {
               this.shipPattern = this.attackerShip.shipPattern;
               if(this.shipPattern.getExpansionClassID() > 0)
               {
                  this.salvos = PatternManager.getExpansionPattern(this.shipPattern.getExpansionClassID(),this.attackerShip.getExpansionTypeID()).salvosData;
                  this.salvosLoopPatternLength = this.salvos.length;
                  this.usedSalvoPattern = 0;
                  this.canAlign = true;
               }
               else
               {
                  this.salvos = defaultSalvos;
                  this.salvosLoopPatternLength = 1;
                  this.usedSalvoPattern = 0;
                  this.canAlign = false;
               }
               _loc2_ = this.shipPattern.getLaserClassID();
               this.laserPattern = PatternManager.getLaserPattern(_loc2_,this.laserType);
               this.resKey = this.laserPattern.getResKey();
               this.timer = new Timer(100,0);
               this.timer.addEventListener(TimerEvent.TIMER,this.handleAttackTick);
               this.handleAttackTick(null);
               if(this.attackerShip.isHeroShip())
               {
                  this.combatManager.getMap().getShipManager().focusHeroToCoordinates(this.targetShip.x,this.targetShip.y);
               }
               this.timer.start();
            }
         }
      }
      
      private function handleAttackTick(param1:TimerEvent) : void
      {
         if(this.cnt > this.laserPattern.getAttackLength())
         {
            if(!this.active)
            {
               this.cleanup();
               return;
            }
            this.cnt = 0;
            this.active = false;
         }
         if(this.cnt % this.fireRate == 0)
         {
            this.startAttack();
         }
         this.focusShip();
         this.cnt += 100;
      }
      
      private function focusShip() : void
      {
         if(this.attackerShip.isHeroShip())
         {
            return;
         }
         if(this.attackerShip == null || this.targetShip == null)
         {
            this.cleanup();
            return;
         }
         if(this.shipPattern != null && !this.shipPattern.playLoop)
         {
            this.combatManager.focusShip(this.attackerShip,this.targetShip);
         }
      }
      
      public function cleanup() : void
      {
         if(this.timer != null)
         {
            this.timer.stop();
            this.timer.removeEventListener(TimerEvent.TIMER,this.handleAttackTick);
         }
         this.combatManager.removeLaserAttack(this.attackerID,false);
      }
      
      public function resume() : void
      {
         if(!this.timer.hasEventListener(TimerEvent.TIMER))
         {
            this.timer.addEventListener(TimerEvent.TIMER,this.handleAttackTick);
            this.timer.start();
         }
      }
      
      public function idle() : void
      {
         if(this.timer.hasEventListener(TimerEvent.TIMER))
         {
            this.timer.stop();
            this.timer.removeEventListener(TimerEvent.TIMER,this.handleAttackTick);
         }
      }
      
      public function startAttack() : void
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:Boolean = false;
         var _loc8_:int = 0;
         if(this.attackerShip == null || this.targetShip == null)
         {
            this.cleanup();
            return;
         }
         var _loc1_:int = this.laserPattern.getSoundID();
         if(this.skilledLaser && this.laserPattern.skillResKey != "-1")
         {
            this.resKey = this.laserPattern.skillResKey;
         }
         else
         {
            this.resKey = this.laserPattern.getResKey();
         }
         if(this.laserPattern.isAbsorber())
         {
            _loc2_ = this.targetShip.x;
            _loc3_ = this.targetShip.y;
            _loc4_ = this.attackerShip.x;
            _loc5_ = this.attackerShip.y;
            this.addLaser(_loc2_,_loc3_,_loc4_,_loc5_,this.resKey);
            if(_loc1_ != -1)
            {
               AudioManager.playSoundEffect(_loc1_,false,false,_loc2_,_loc3_,this.overrideSoundLimit);
            }
         }
         else
         {
            if(this.attackerShip == null || this.targetShip == null)
            {
               this.cleanup();
               return;
            }
            _loc6_ = 0;
            if(this.canAlign)
            {
               _loc6_ = this.attackerShip.getCurrentFrameOfShip() - 1;
            }
            _loc4_ = this.targetShip.x;
            _loc5_ = this.targetShip.y;
            _loc7_ = this.showShieldDamage;
            _loc8_ = 0;
            while(_loc8_ < this.salvos[this.usedSalvoPattern].length)
            {
               _loc2_ = this.attackerShip.x + this.salvos[this.usedSalvoPattern][_loc8_][_loc6_].x;
               _loc3_ = this.attackerShip.y + this.salvos[this.usedSalvoPattern][_loc8_][_loc6_].y;
               this.addLaser(_loc2_,_loc3_,_loc4_,_loc5_,this.resKey,_loc7_);
               _loc7_ = false;
               _loc8_++;
            }
            ++this.usedSalvoPattern;
            this.usedSalvoPattern %= this.salvosLoopPatternLength;
            if(_loc1_ != -1)
            {
               AudioManager.playSoundEffect(_loc1_,false,false,_loc2_,_loc3_,this.overrideSoundLimit);
            }
         }
      }
      
      private function addLaser(param1:int, param2:int, param3:int, param4:int, param5:String, param6:Boolean = false) : void
      {
         var _loc8_:Function = null;
         var _loc11_:Number = NaN;
         var _loc12_:Number = NaN;
         var _loc13_:Number = NaN;
         var _loc14_:Number = NaN;
         var _loc15_:Number = NaN;
         var _loc16_:Number = NaN;
         var _loc17_:int = 0;
         if(this.attackerShip == null)
         {
            return;
         }
         var _loc7_:MovieClip = ResourceManager.getMovieClip(param5,"mc");
         _loc7_.mouseEnabled = false;
         _loc7_.mouseChildren = false;
         if(!this.laserPattern.isAbsorber())
         {
            _loc11_ = _loc7_.width;
            if(_loc11_ > 0)
            {
               _loc12_ = param1 - param3;
               _loc13_ = param2 - param4;
               _loc14_ = Math.pow(param4 - param2,2) + Math.pow(param3 - param1,2);
               if(_loc14_ < _loc11_ * _loc11_)
               {
                  return;
               }
               _loc15_ = FastMath.sqrt(_loc14_);
               param3 = _loc12_ / _loc15_ * _loc11_ + param3;
               param4 = _loc13_ / _loc15_ * _loc11_ + param4;
            }
         }
         _loc7_.play();
         if(!this.laserPattern.playLoop)
         {
            _loc16_ = Math.atan2(param4 - param2,param3 - param1) * 180 / Math.PI;
            _loc17_ = Math.round(_loc16_ + 180);
            _loc7_.rotation = _loc17_;
         }
         _loc7_.x = param1;
         _loc7_.y = param2;
         this.laserLayer.addChild(_loc7_);
         var _loc9_:Number = 1;
         var _loc10_:Number = 1;
         if(this.laserPattern.isAbsorber())
         {
            _loc8_ = Linear.easeNone;
            _loc9_ = 0.1;
            _loc10_ = 0.1;
         }
         else if(this.laserPattern.isPlayLoopRotated())
         {
            _loc8_ = Back.easeIn;
         }
         else
         {
            _loc8_ = Sine.easeOut;
         }
         TweenLite.to(_loc7_,this.laserPattern.getSpeed(),{
            "ease":Linear.easeNone,
            "x":param3,
            "y":param4,
            "scaleX":_loc9_,
            "scaleY":_loc10_,
            "onComplete":this.handleLaserRemove,
            "onCompleteParams":[_loc7_,param6]
         });
      }
      
      public function handleFlareFinished(param1:MovieClip, param2:Sprite) : void
      {
         if(param1 != null && param2 != null && param2.contains(param1))
         {
            param2.removeChild(param1);
         }
      }
      
      private function handleRemoveShieldDamage(param1:Sprite, param2:MovieClip) : void
      {
         if(param1 != null && param2 != null && param1.contains(param2))
         {
            param1.removeChild(param2);
            if(this.targetShip != null)
            {
               --this.targetShip.shieldDamageCount;
            }
         }
      }
      
      public function handleLaserRemove(param1:MovieClip, param2:Boolean) : void
      {
         var _loc3_:MovieClip = null;
         var _loc4_:int = 0;
         var _loc5_:Number = NaN;
         var _loc6_:int = 0;
         var _loc7_:Number = NaN;
         var _loc8_:Sprite = null;
         if(param1 != null && param1.parent != null)
         {
            param1.gotoAndStop(1);
            param1.parent.removeChild(param1);
         }
         if(param2 && this.targetShip != null && this.targetShip.shieldDamageCount < 9)
         {
            _loc3_ = ResourceManager.getMovieClip("shieldDamage","mc");
            _loc4_ = this.targetShip.radius + 10;
            _loc5_ = _loc4_ / 100;
            _loc3_.scaleX = _loc5_;
            _loc3_.scaleY = _loc5_;
            _loc3_.x = int(_loc4_ * Math.cos(param1.rotation * Math.PI / 180));
            _loc3_.y = int(_loc4_ * Math.sin(param1.rotation * Math.PI / 180));
            _loc3_.rotation = param1.rotation;
            _loc6_ = _loc3_.framesLoaded;
            _loc7_ = _loc6_ / 30;
            _loc8_ = this.targetShip.getClipContainer();
            _loc8_.addChild(_loc3_);
            TweenLite.to(_loc3_,_loc7_,{
               "ease":Linear.easeNone,
               "frame":_loc6_,
               "onComplete":this.handleRemoveShieldDamage,
               "onCompleteParams":[_loc8_,_loc3_]
            });
            ++this.targetShip.shieldDamageCount;
         }
      }
      
      public function getAttackerID() : int
      {
         return this.attackerID;
      }
      
      public function getTargetID() : int
      {
         return this.targetID;
      }
      
      public function getFireRate() : int
      {
         return this.fireRate;
      }
      
      public function getLaserType() : int
      {
         return this.laserType;
      }
      
      public function getActive() : Boolean
      {
         return this.active;
      }
      
      public function setActive(param1:Boolean) : void
      {
         this.active = param1;
      }
      
      public function setLaserType(param1:int) : void
      {
         var _loc3_:int = 0;
         this.laserType = param1;
         var _loc2_:Map = this.combatManager.getMap();
         if(_loc2_ != null)
         {
            _loc3_ = this.shipPattern.getLaserClassID();
            this.laserPattern = PatternManager.getLaserPattern(_loc3_,this.getLaserType());
         }
      }
   }
}

package net.bigpoint.darkorbit.combat
{
   import net.bigpoint.darkorbit.pattern.AudibleResourcePattern;
   
   public class LaserPattern extends AudibleResourcePattern
   {
      
      private var laserClass:int;
      
      private var fireRate:int;
      
      private var muzzleFlashID:int;
      
      public var laserLength:int;
      
      private var absorber:Boolean;
      
      private var speed:Number = 0.15;
      
      public var playLoop:Boolean;
      
      private var playLoopRotated:Boolean;
      
      private var attackLength:int = 1350;
      
      public var skillResKey:String;
      
      public function LaserPattern(param1:int, param2:int, param3:String, param4:int)
      {
         super(param2,param3);
         this.laserClass = param1;
         this.fireRate = param4;
      }
      
      public function getFireRate() : int
      {
         return this.fireRate;
      }
      
      public function getLaserClass() : int
      {
         return this.laserClass;
      }
      
      public function getMuzzleFlashID() : int
      {
         return this.muzzleFlashID;
      }
      
      public function setLaserFlashID(param1:int) : void
      {
         this.muzzleFlashID = param1;
      }
      
      public function isAbsorber() : Boolean
      {
         return this.absorber;
      }
      
      public function setAbsorber(param1:Boolean) : void
      {
         this.absorber = param1;
      }
      
      public function getSpeed() : Number
      {
         return this.speed;
      }
      
      public function setSpeed(param1:Number) : void
      {
         this.speed = param1;
      }
      
      public function setPlayLoop(param1:Boolean) : void
      {
         this.playLoop = param1;
      }
      
      public function isPlayLoopRotated() : Boolean
      {
         return this.playLoopRotated;
      }
      
      public function setPlayLoopRotated(param1:Boolean) : void
      {
         this.playLoopRotated = param1;
      }
      
      public function getAttackLength() : int
      {
         return this.attackLength;
      }
      
      public function setAttackLength(param1:int) : void
      {
         this.attackLength = param1;
      }
   }
}

package net.bigpoint.darkorbit.combat
{
   import com.greensock.TweenLite;
   import com.greensock.easing.Linear;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ObjectPoolManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.RocketSmokePattern;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   
   public class RocketAttackJob
   {
      
      private static const logger:ILogger = Log.getLogger("RocketAttackJob");
      
      private var attackManager:CombatManager;
      
      private var attackerShip:MapObject;
      
      public var targetShip:MapObject;
      
      private var rocketClip:MovieClip;
      
      private var hit:Boolean;
      
      public var rocketSmokePattern:RocketSmokePattern;
      
      private var rocketSmokeTimer:Timer;
      
      private var explosionLayer:Sprite;
      
      private var heatSeeking:Boolean;
      
      public var xGap:int = 0;
      
      public var yGap:int = 0;
      
      public var pulseClip:MovieClip;
      
      public var duration:Number;
      
      public var airstrikeMode:Boolean;
      
      public function RocketAttackJob(param1:CombatManager, param2:MapObject, param3:MapObject, param4:MovieClip, param5:Boolean, param6:Number, param7:RocketSmokePattern, param8:Boolean, param9:MovieClip)
      {
         super();
         this.attackManager = param1;
         this.attackerShip = param2;
         this.targetShip = param3;
         this.rocketClip = param4;
         this.hit = param5;
         this.duration = param6;
         this.rocketSmokePattern = param7;
         this.explosionLayer = param1.getMap().getMain().screenManager.getExplosionLayer();
         this.heatSeeking = param8;
         this.pulseClip = param9;
      }
      
      public function init() : void
      {
         if(this.hit)
         {
            if(this.heatSeeking)
            {
               this.xGap = Main.getRandomCount(-800,800);
               this.yGap = Main.getRandomCount(-800,800);
               TweenLite.to(this,this.duration,{
                  "xGap":0,
                  "yGap":0
               });
            }
            TweenLite.to(this.rocketClip,this.duration,{
               "dynamicProps":{
                  "x":this.getTargetShipXPos,
                  "y":this.getTargetShipYPos
               },
               "onComplete":this.onFinishRocketTween,
               "onCompleteParams":[this.rocketClip,this.targetShip.getUserId()],
               "onUpdate":this.onUpdate
            });
         }
         else
         {
            TweenLite.to(this.rocketClip,this.duration,{
               "ease":Linear.easeNone,
               "x":this.targetShip.x,
               "y":this.targetShip.y,
               "onComplete":this.onFinishRocketTween,
               "onCompleteParams":[this.rocketClip,this.targetShip.getUserId()]
            });
         }
         if(Settings.rocketSmoke)
         {
            this.rocketSmokeTimer = new Timer(this.rocketSmokePattern.particleInterval,0);
            this.rocketSmokeTimer.addEventListener(TimerEvent.TIMER,this.addRocketSmoke);
            this.rocketSmokeTimer.start();
         }
      }
      
      public function onFinishRocketTween(param1:MovieClip, param2:int) : void
      {
         var _loc3_:Map = null;
         var _loc4_:ExplosionPattern = null;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         if(param1 != null)
         {
            _loc3_ = this.attackManager.getMap();
            if(_loc3_ != null)
            {
               _loc3_.getMain().screenManager.getExplosionLayer().removeChild(param1);
               if(this.pulseClip != null)
               {
                  TweenLite.killTweensOf(this.pulseClip);
                  param1.removeChild(this.pulseClip);
               }
            }
         }
         this.attackManager.removeRocketAttackTo(param2);
         if(!this.hit)
         {
            if(Settings.displayHitpointBubbles)
            {
               _loc3_ = this.attackManager.getMap();
               if(_loc3_ != null)
               {
                  _loc3_.getMain().getGuiManager().showHitpointDelta(this.targetShip,0);
               }
            }
            _loc4_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_LASER_DAMAGE,1);
            this.attackManager.showPyroEffect(param1.x,param1.y,_loc4_);
         }
         if(this.rocketSmokeTimer != null)
         {
            this.rocketSmokeTimer.stop();
            this.rocketSmokeTimer.removeEventListener(TimerEvent.TIMER,this.addRocketSmoke);
         }
         if(this.airstrikeMode)
         {
            _loc4_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_ROCKET_DAMAGE,1);
            _loc5_ = Main.getRandomCount(-40,40);
            _loc6_ = Main.getRandomCount(-40,40);
            this.attackManager.showPyroEffect(this.targetShip.x + _loc5_,this.targetShip.y + _loc6_,_loc4_,37,true,true);
         }
      }
      
      private function onUpdate() : void
      {
         var _loc1_:Number = Math.atan2(this.targetShip.y - this.rocketClip.y,this.targetShip.x - this.rocketClip.x) * 180 / Math.PI;
         this.rocketClip.rotation = Math.round(_loc1_ + 180);
      }
      
      public function getClip() : MovieClip
      {
         return this.rocketClip;
      }
      
      private function getTargetShipXPos() : Number
      {
         if(this.heatSeeking)
         {
            return this.targetShip.x + this.xGap;
         }
         return this.targetShip.x;
      }
      
      private function getTargetShipYPos() : Number
      {
         if(this.heatSeeking)
         {
            return this.targetShip.y + this.yGap;
         }
         return this.targetShip.y;
      }
      
      private function addRocketSmoke(param1:TimerEvent) : void
      {
         var _loc2_:BitmapClip = ObjectPoolManager.getRocketSmokeClip(this.rocketSmokePattern.resKey);
         if(_loc2_ == null)
         {
            return;
         }
         _loc2_.x = this.rocketClip.x;
         _loc2_.y = this.rocketClip.y;
         this.explosionLayer.addChild(_loc2_);
         _loc2_.frame = 1;
         TweenLite.to(_loc2_,this.rocketSmokePattern.particleDuration,{
            "ease":Linear.easeNone,
            "frame":_loc2_.framesLoaded,
            "onComplete":this.handleSmokeFinished,
            "onCompleteParams":[_loc2_]
         });
      }
      
      private function handleSmokeFinished(param1:BitmapClip) : void
      {
         if(param1 != null)
         {
            this.explosionLayer.removeChild(param1);
            ObjectPoolManager.addRocketSmokeClip(param1);
         }
      }
   }
}

package net.bigpoint.darkorbit.combat
{
   import net.bigpoint.darkorbit.pattern.AudibleResourcePattern;
   
   public class RocketPattern extends AudibleResourcePattern
   {
      
      public static const TYPE_DEFAULT_ROCKETS:int = 0;
      
      public static const TYPE_ROCKET_LAUNCHER:int = 100;
      
      public static const R310:int = 1;
      
      public static const PLT_2026:int = 2;
      
      public static const PLT_2021:int = 3;
      
      public static const PLT_3030:int = 4;
      
      public static const PLD_8:int = 5;
      
      public static const WIZ:int = 6;
      
      public static const HSTRM01:int = 7;
      
      public static const UBR100:int = 8;
      
      public static const ECO10:int = 9;
      
      public static const DCR_250:int = 10;
      
      private var rocketClass:int;
      
      public function RocketPattern(param1:int, param2:int, param3:String)
      {
         super(param2,param3);
         this.rocketClass = param1;
      }
      
      public function getRocketClass() : int
      {
         return this.rocketClass;
      }
      
      public function toString() : String
      {
         return "RocketPattern id:" + patternID + " resKey:" + resKey + " class:" + this.rocketClass;
      }
   }
}

package net.bigpoint.darkorbit.combat
{
   import flash.display.Sprite;
   import flash.filters.BlurFilter;
   import flash.filters.GlowFilter;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.ship.MapObject;
   
   public class TractorBeamJob
   {
      
      public var combatManager:CombatManager;
      
      public var attackerID:int;
      
      public var targetID:int;
      
      public var attackerShip:MapObject;
      
      public var targetShip:MapObject;
      
      public var beam:Sprite;
      
      public var laserLayer:Sprite;
      
      public function TractorBeamJob(param1:CombatManager, param2:int, param3:int)
      {
         super();
         this.combatManager = param1;
         this.attackerID = param2;
         this.targetID = param3;
         this.laserLayer = this.combatManager.getMap().getMain().screenManager.getLaserLayer();
         this.init();
      }
      
      public function init() : void
      {
         var _loc1_:Map = this.combatManager.getMap();
         this.attackerShip = _loc1_.getShipManager().getShip(this.attackerID);
         this.targetShip = _loc1_.getShipManager().getShip(this.targetID);
         this.beam = new Sprite();
         this.beam.filters = [new BlurFilter(2,2,1),new GlowFilter(4461055,1,32,32,8,3)];
         this.laserLayer.addChild(this.beam);
         this.start();
      }
      
      public function start() : void
      {
         var _loc1_:Number = this.random(2) + 1;
         this.beam.graphics.clear();
         this.beam.graphics.moveTo(this.attackerShip.x,this.attackerShip.y);
         this.beam.graphics.lineStyle(_loc1_,16777215,1);
         this.beam.graphics.lineTo(this.attackerShip.x + 200,this.attackerShip.y);
      }
      
      public function cleanup() : void
      {
         this.combatManager.removeTractorBeam(this.attackerID,false);
      }
      
      private function random(param1:int) : int
      {
         return Math.floor(Math.random() * param1);
      }
   }
}

package net.bigpoint.darkorbit.config.items
{
   public class SysItem
   {
      
      public var id:String;
      
      public var name:String;
      
      public var packageName:String;
      
      public var category:String;
      
      public function SysItem(param1:String, param2:String, param3:String, param4:String = "")
      {
         super();
         this.id = param1;
         this.name = param2;
         this.packageName = param3;
         this.category = param4;
      }
   }
}

package net.bigpoint.darkorbit.ctb
{
   import flash.display.Sprite;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.CTBScoreElement;
   import net.bigpoint.darkorbit.gui.elements.CTBScoreGridElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.ShipManager;
   
   public class CTBManager
   {
      
      private var homezones:Array = [];
      
      private var guiManager:GuiManager;
      
      private var shipManager:ShipManager;
      
      private var portalLayer:Sprite;
      
      public function CTBManager(param1:GuiManager, param2:ShipManager, param3:Sprite)
      {
         super();
         this.guiManager = param1;
         this.shipManager = param2;
         this.portalLayer = param3;
      }
      
      public function parseCommands(param1:Array) : void
      {
         var _loc2_:Boolean = false;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:Number = NaN;
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         var _loc8_:Array = null;
         var _loc9_:int = 0;
         var _loc10_:int = 0;
         var _loc11_:int = 0;
         switch(param1[3])
         {
            case ServerCommands.CTB_INIT_SCOREBOARD:
               _loc2_ = Main.parseBooleanFromInt(param1[4]);
               if(_loc2_)
               {
                  this.createCTBScoreboard();
                  break;
               }
               this.destroyCTBScoreboard();
               this.cleanup();
               break;
            case ServerCommands.CTB_UPDATE_BEACON_POSITION:
               _loc3_ = int(param1[4]);
               _loc4_ = int(param1[5]);
               this.updateBeaconPosition(_loc3_,_loc4_);
               break;
            case ServerCommands.CTB_UPDATE_SCOREBOARD:
               _loc5_ = Number(param1[4]);
               _loc6_ = Number(param1[5]);
               _loc7_ = Number(param1[6]);
               _loc8_ = [];
               _loc8_.push(_loc5_);
               _loc8_.push(_loc6_);
               _loc8_.push(_loc7_);
               this.updateCTBScoreboard(_loc8_);
               break;
            case ServerCommands.CTB_SET_HOMEZONES:
               _loc3_ = int(param1[4]);
               _loc9_ = int(param1[5]);
               _loc10_ = int(param1[6]);
               this.addHomezone(_loc3_,_loc9_,_loc10_);
               break;
            case ServerCommands.CTB_ATTACH_BEACON_TO_USER:
               _loc11_ = parseInt(param1[4]);
               _loc3_ = int(param1[5]);
               this.shipManager.attachBeaconToShip(_loc11_,_loc3_);
               break;
            case ServerCommands.CTB_REMOVE_BEACON_FROM_USER:
               _loc11_ = int(param1[4]);
               this.shipManager.removeBeaconFromShip(_loc11_);
         }
      }
      
      public function cleanup() : void
      {
         var _loc3_:MapObject = null;
         var _loc4_:HomeZone = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.homezones.length)
         {
            _loc4_ = this.homezones[_loc1_];
            _loc4_.cleanup();
            this.portalLayer.removeChild(_loc4_);
            _loc1_++;
         }
         var _loc2_:Array = this.shipManager.getShips();
         for each(_loc3_ in _loc2_)
         {
            if(_loc3_.getBeacon() != null)
            {
               _loc3_.removeBeaconClip();
            }
         }
      }
      
      public function addHomezone(param1:int, param2:int, param3:int) : void
      {
         var _loc5_:HomeZone = null;
         var _loc6_:HomeZone = null;
         var _loc4_:HomeZone = new HomeZone(this,param1,param2,param3);
         this.homezones.push(_loc4_);
         this.portalLayer.addChild(_loc4_);
         if(this.homezones.length == 2)
         {
            _loc5_ = this.homezones[0];
            _loc6_ = this.homezones[1];
            if(_loc5_.x < _loc6_.x)
            {
               _loc5_.setDirection(-1);
               _loc6_.setDirection(1);
            }
            else
            {
               _loc5_.setDirection(1);
               _loc6_.setDirection(-1);
            }
            _loc5_.startRotateTimer();
            _loc6_.startRotateTimer();
         }
      }
      
      public function getHomezones() : Array
      {
         return this.homezones;
      }
      
      public function createCTBScoreboard() : void
      {
         var _loc1_:SimpleWindow = null;
         var _loc2_:SimpleContainer = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:CTBScoreElement = null;
         var _loc7_:Array = null;
         var _loc8_:CTBScoreGridElement = null;
         if(this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_CTB) == null)
         {
            _loc1_ = this.guiManager.createWindow(SimpleWindow.WINDOW_CLASS_CTB);
            _loc2_ = new SimpleContainer(this.guiManager,SimpleContainer.CLASS_CTB);
            _loc3_ = 0;
            _loc4_ = 1;
            _loc2_.x = 12;
            _loc2_.y = 35;
            _loc5_ = 1;
            while(_loc5_ < 4)
            {
               _loc6_ = new CTBScoreElement(this.guiManager,_loc5_);
               _loc6_.setTitleYPosition(-4);
               _loc6_.setScoreYPosition(32);
               _loc6_.updateScore(0);
               if(_loc5_ == Hero.factionID)
               {
                  _loc6_.order = 0;
               }
               else
               {
                  _loc6_.order = _loc4_++;
               }
               _loc2_.addElement(_loc6_,SimpleContainer.NO_ALIGN);
               _loc5_++;
            }
            _loc7_ = _loc2_.getAllElements();
            _loc7_.sortOn("order",Array.NUMERIC);
            _loc5_ = 0;
            while(_loc5_ < _loc7_.length)
            {
               _loc6_ = _loc7_[_loc5_];
               _loc6_.x = _loc3_;
               _loc3_ += _loc6_.getBackground().width;
               _loc5_++;
            }
            _loc8_ = new CTBScoreGridElement();
            _loc8_.x = -2;
            _loc8_.y = -3;
            _loc2_.addElement(_loc8_,SimpleContainer.NO_ALIGN);
            _loc1_.addContainer(_loc2_);
         }
      }
      
      public function destroyCTBScoreboard() : void
      {
         var _loc1_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_CTB);
         if(_loc1_ != null)
         {
            this.guiManager.closeWindow(_loc1_);
         }
      }
      
      public function updateBeaconPosition(param1:int, param2:int) : void
      {
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:CTBScoreElement = null;
         var _loc3_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_CTB);
         if(_loc3_ != null)
         {
            _loc4_ = param1.toString().split("");
            _loc5_ = int(_loc4_[1]);
            _loc6_ = int(_loc4_[2]);
            _loc7_ = CTBScoreElement(this.guiManager.getScoreElement(SimpleWindow.WINDOW_CLASS_CTB,SimpleContainer.CLASS_CTB,_loc5_));
            if(_loc7_ != null)
            {
               _loc7_.updateBeacon(param1,_loc6_,param2);
            }
         }
      }
      
      public function updateCTBScoreboard(param1:Array) : void
      {
         var _loc3_:int = 0;
         var _loc4_:CTBScoreElement = null;
         var _loc2_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_CTB);
         if(_loc2_ != null)
         {
            _loc3_ = 0;
            while(_loc3_ < param1.length)
            {
               _loc4_ = CTBScoreElement(this.guiManager.getScoreElement(SimpleWindow.WINDOW_CLASS_CTB,SimpleContainer.CLASS_CTB,_loc3_ + 1));
               if(_loc4_ != null)
               {
                  _loc4_.updateScore(param1[_loc3_]);
               }
               _loc3_++;
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.ctb
{
   import flash.display.MovieClip;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.ResourceManager;
   
   public class HomeZone extends MovieClip
   {
      
      private var fromCompanyID:int;
      
      private var toCompanyID:int;
      
      private var beaconID:int;
      
      private var direction:int = 1;
      
      private var ctbManager:CTBManager;
      
      private var rings:Array = [];
      
      private var timer:Timer;
      
      public function HomeZone(param1:CTBManager, param2:int, param3:int, param4:int)
      {
         super();
         this.ctbManager = param1;
         this.beaconID = param2;
         this.x = param3;
         this.y = param4;
         this.setCompanyID();
         this.setGraphics();
      }
      
      private function setCompanyID() : void
      {
         var _loc1_:Array = this.beaconID.toString().split("");
         this.fromCompanyID = _loc1_[1];
         this.toCompanyID = _loc1_[2];
      }
      
      public function getX() : int
      {
         return x;
      }
      
      public function getY() : int
      {
         return y;
      }
      
      public function getCompanyID() : int
      {
         return this.toCompanyID;
      }
      
      private function setGraphics() : void
      {
         var _loc2_:String = null;
         var _loc3_:MovieClip = null;
         var _loc1_:int = 1;
         while(_loc1_ < 4)
         {
            _loc2_ = "homezone_" + this.fromCompanyID + "_" + _loc1_;
            if(_loc1_ != 2)
            {
               _loc2_ = "homezone_" + this.toCompanyID + "_" + _loc1_;
            }
            _loc3_ = ResourceManager.getMovieClip("ui",_loc2_);
            this.rings.push(_loc3_);
            this.addChild(_loc3_);
            _loc1_++;
         }
      }
      
      public function startRotateTimer() : void
      {
         this.timer = new Timer(20,0);
         this.timer.addEventListener(TimerEvent.TIMER,this.onTimerTick);
         this.timer.start();
      }
      
      private function onTimerTick(param1:TimerEvent) : void
      {
         var _loc2_:MovieClip = this.rings[0];
         _loc2_.rotation += this.direction;
         if(_loc2_.rotation > 360)
         {
            _loc2_.rotation = 0;
         }
         _loc2_ = this.rings[2];
         _loc2_.rotation += this.direction;
         if(_loc2_.rotation > 360)
         {
            _loc2_.rotation = 0;
         }
      }
      
      public function setDirection(param1:int) : void
      {
         this.direction = param1;
      }
      
      public function cleanup() : void
      {
         this.timer.stop();
         this.timer.removeEventListener(TimerEvent.TIMER,this.onTimerTick);
      }
   }
}

package net.bigpoint.darkorbit.data
{
   public class RankedHuntingEventData
   {
      
      public var eventVOs:Array;
      
      public var currentID:int;
      
      public function RankedHuntingEventData()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.data.vo
{
   public class RankedHuntStatsVO
   {
      
      public var targetList:Array;
      
      public var targetVerbose:String;
      
      public var bountyPoints:int;
      
      public var bountyDelta:int = 0;
      
      public var clanBountyPoints:int = 0;
      
      public var clanBountyPointsInSync:Boolean;
      
      public function RankedHuntStatsVO()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.drone
{
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   
   public class Drone
   {
      
      public var position:int;
      
      private var _clip:BitmapClip;
      
      private var _droneRotation:int;
      
      private var _droneDimension:int;
      
      public var lastDroneRotation:int;
      
      public function Drone(param1:int, param2:int, param3:BitmapClip)
      {
         super();
         this.position = param1;
         this._clip = param3;
         this._droneDimension = param2 * 2;
      }
      
      public function get droneRotation() : int
      {
         return this._droneRotation;
      }
      
      public function set droneRotation(param1:int) : void
      {
         this._droneRotation = param1;
      }
      
      public function get droneDimension() : int
      {
         return this._droneDimension;
      }
      
      public function get clip() : BitmapClip
      {
         return this._clip;
      }
   }
}

package net.bigpoint.darkorbit.drone
{
   import net.bigpoint.darkorbit.ship.MapObject;
   
   public class DroneConnector
   {
      
      public static var POSITION_TOP:int = 0;
      
      public static var POSITION_RIGHT:int = 1;
      
      public static var POSITION_DOWN:int = 2;
      
      public static var POSITION_LEFT:int = 3;
      
      public static var POSITION_CENTER:int = 4;
      
      public var droneGroups:Array = [];
      
      public function DroneConnector()
      {
         super();
      }
      
      public function addDroneGroup(param1:DroneGroup) : void
      {
         this.droneGroups.push(param1);
      }
      
      public function getDroneGroup(param1:int) : DroneGroup
      {
         var _loc3_:DroneGroup = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.droneGroups.length)
         {
            _loc3_ = this.droneGroups[_loc2_];
            if(_loc3_.position == param1)
            {
               return _loc3_;
            }
            _loc2_++;
         }
         return null;
      }
      
      public function cleanup(param1:MapObject) : void
      {
         var _loc2_:DroneGroup = null;
         for each(_loc2_ in this.droneGroups)
         {
            _loc2_.cleanup();
            param1.getDroneDisplayClipContainer().removeChild(_loc2_.getClip());
         }
      }
   }
}

package net.bigpoint.darkorbit.drone
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.BitmapData;
   import flash.geom.Point;
   import net.bigpoint.darkorbit.ResourceManager;
   
   public class DroneDisplay extends BitmapData
   {
      
      private var point:Point;
      
      public function DroneDisplay(param1:int, param2:int)
      {
         super(80,12,true,0);
         this.point = new Point();
         this.update(param1,param2);
      }
      
      public function update(param1:int, param2:int) : void
      {
         var _loc6_:int = 0;
         var _loc3_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc4_:BitmapData = _loc3_.getEmbededBitmapData("drone_prefix");
         copyPixels(_loc4_,_loc4_.rect,this.point);
         var _loc5_:BitmapData = _loc3_.getEmbededBitmapData("iris_dot");
         this.point.x = 10;
         this.point.y = 0;
         _loc6_ = 0;
         while(_loc6_ < param2)
         {
            this.copyPixels(_loc5_,_loc5_.rect,this.point);
            this.point.x += 5;
            _loc6_++;
         }
         var _loc7_:BitmapData = _loc3_.getEmbededBitmapData("flax_dot");
         this.point.x = 10;
         this.point.y = 5;
         _loc6_ = 0;
         while(_loc6_ < param1)
         {
            this.copyPixels(_loc7_,_loc7_.rect,this.point);
            this.point.x += 5;
            _loc6_++;
         }
      }
   }
}

package net.bigpoint.darkorbit.drone
{
   import flash.display.MovieClip;
   
   public class DroneGroup
   {
      
      public var position:int;
      
      private var clip:MovieClip;
      
      public var drones:Array = [];
      
      private var _droneGroupRotation:int;
      
      private var _droneGroupDimension:int;
      
      public var lastDroneGroupRotation:int;
      
      public function DroneGroup(param1:int, param2:MovieClip, param3:int)
      {
         super();
         this.position = param1;
         this.clip = param2;
         this._droneGroupDimension = param3;
      }
      
      public function cleanup() : void
      {
         var _loc1_:Drone = null;
         for each(_loc1_ in this.drones)
         {
            this.clip.removeChild(_loc1_.clip);
            _loc1_ = null;
         }
      }
      
      public function addDrone(param1:Drone) : void
      {
         this.drones.push(param1);
      }
      
      public function getDrone(param1:int) : Drone
      {
         var _loc3_:Drone = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.drones.length)
         {
            _loc3_ = this.drones[_loc2_];
            if(_loc3_.position == param1)
            {
               return _loc3_;
            }
            _loc2_++;
         }
         return null;
      }
      
      public function getClip() : MovieClip
      {
         return this.clip;
      }
      
      public function get droneGroupRotation() : int
      {
         return this._droneGroupRotation;
      }
      
      public function set droneGroupRotation(param1:int) : void
      {
         this._droneGroupRotation = param1;
         this.clip.x = int(this._droneGroupDimension * Math.cos(this._droneGroupRotation * Math.PI / 180));
         this.clip.y = int(this._droneGroupDimension * Math.sin(this._droneGroupRotation * Math.PI / 180));
      }
      
      public function get droneGroupDimension() : int
      {
         return this._droneGroupDimension;
      }
      
      public function set droneGroupDimension(param1:int) : void
      {
         this._droneGroupDimension = param1;
         this.clip.x = int(this._droneGroupDimension * Math.cos(this._droneGroupRotation * Math.PI / 180));
         this.clip.y = int(this._droneGroupDimension * Math.sin(this._droneGroupRotation * Math.PI / 180));
      }
   }
}

package net.bigpoint.darkorbit.drone
{
   import com.greensock.TweenLite;
   import com.greensock.easing.Quart;
   import flash.display.MovieClip;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   
   public class DroneManager
   {
      
      public static const logger:ILogger = Log.getLogger("DroneManager");
      
      private var timer:Timer;
      
      private var droneGroupRadius:int;
      
      private var map:Map;
      
      public function DroneManager(param1:Map)
      {
         super();
         this.map = param1;
         this.droneGroupRadius = Main.gameXML.patterns.drones.attribute("groupRadius");
         this.timer = new Timer(25,0);
         this.timer.addEventListener(TimerEvent.TIMER,this.onDroneRotate);
         this.timer.start();
      }
      
      public function cleanup() : void
      {
         this.timer.stop();
         this.timer.removeEventListener(TimerEvent.TIMER,this.onDroneRotate);
         this.map = null;
      }
      
      public function addDrone(param1:int, param2:int, param3:int, param4:int, param5:int) : void
      {
         var _loc8_:MovieClip = null;
         var _loc10_:DronePattern = null;
         var _loc11_:BitmapClip = null;
         var _loc6_:MapObject = this.map.getShipManager().getShip(param1);
         if(_loc6_.droneConnector == null)
         {
            _loc6_.initDroneConnector();
         }
         var _loc7_:DroneGroup = _loc6_.droneConnector.getDroneGroup(param2);
         if(_loc7_ == null)
         {
            _loc8_ = new MovieClip();
            _loc8_.mouseEnabled = Main.mouseEventsEnabled;
            _loc8_.mouseChildren = Main.mouseEventsEnabled;
            _loc7_ = new DroneGroup(param2,_loc8_,this.getDroneGroupRadius() * 2);
            _loc6_.droneConnector.addDroneGroup(_loc7_);
            _loc6_.getDroneDisplayClipContainer().addChild(_loc8_);
         }
         var _loc9_:Drone = _loc7_.getDrone(param3);
         if(_loc9_ == null)
         {
            _loc10_ = PatternManager.getDronePattern(param4,param5);
            _loc11_ = new BitmapClip(ResourceManager.getMovieClip("drones",_loc10_.getResKey()),_loc10_.getResKey());
            _loc11_.gotoAndStop(1);
            if(!Settings.displayDrones)
            {
               _loc11_.visible = false;
            }
            _loc9_ = new Drone(param3,_loc10_.getDroneRadius(),_loc11_);
            _loc7_.addDrone(_loc9_);
            _loc7_.getClip().addChild(_loc11_);
         }
      }
      
      public function removeAllDrones() : void
      {
         var _loc2_:MapObject = null;
         var _loc1_:Array = this.map.getShipManager().getShips();
         for each(_loc2_ in _loc1_)
         {
            _loc2_.removeDrones();
         }
      }
      
      private function onDroneRotate(param1:TimerEvent) : void
      {
         var _loc3_:MapObject = null;
         var _loc2_:Array = this.map.getShipManager().getShips();
         for each(_loc3_ in _loc2_)
         {
            if(_loc3_.droneConnector != null)
            {
               this.updateDronesPosition(_loc3_);
            }
         }
      }
      
      public function updateDronesPosition(param1:MapObject) : void
      {
         var _loc4_:DroneGroup = null;
         var _loc5_:int = 0;
         var _loc6_:Array = null;
         var _loc7_:int = 0;
         var _loc8_:Drone = null;
         var _loc9_:BitmapClip = null;
         var _loc10_:int = 0;
         var _loc2_:Array = param1.droneConnector.droneGroups;
         var _loc3_:int = int(_loc2_.length);
         while(--_loc3_ > -1)
         {
            _loc4_ = _loc2_[_loc3_];
            _loc5_ = param1.shipRotation - 180;
            if(_loc4_.lastDroneGroupRotation != _loc5_)
            {
               _loc4_.lastDroneGroupRotation = _loc5_;
               if(_loc4_.position == 0)
               {
                  TweenLite.to(_loc4_,1,{"shortRotation":{"droneGroupRotation":_loc5_}});
               }
               else if(_loc4_.position == 1)
               {
                  TweenLite.to(_loc4_,1,{"shortRotation":{"droneGroupRotation":_loc5_ + 90}});
               }
               else if(_loc4_.position == 2)
               {
                  TweenLite.to(_loc4_,1,{"shortRotation":{"droneGroupRotation":_loc5_ + 180}});
               }
               else if(_loc4_.position == 3)
               {
                  TweenLite.to(_loc4_,1,{"shortRotation":{"droneGroupRotation":_loc5_ + 270}});
               }
               _loc6_ = _loc4_.drones;
               _loc7_ = int(_loc6_.length);
               while(--_loc7_ > -1)
               {
                  _loc8_ = _loc6_[_loc7_];
                  _loc9_ = _loc8_.clip;
                  _loc10_ = param1.shipRotation - 180;
                  if(_loc8_.lastDroneRotation != _loc10_)
                  {
                     _loc8_.lastDroneRotation = _loc10_;
                     if(_loc8_.position == 1)
                     {
                        _loc10_ += 90;
                     }
                     else if(_loc8_.position == 2)
                     {
                        _loc10_ += 180;
                     }
                     else if(_loc8_.position == 3)
                     {
                        _loc10_ += 270;
                     }
                     if(_loc8_.position == 4)
                     {
                        _loc9_.x = int(Math.cos(_loc10_ * Math.PI / 180));
                        _loc9_.y = int(Math.sin(_loc10_ * Math.PI / 180));
                     }
                     else
                     {
                        _loc9_.x = int(_loc8_.droneDimension * Math.cos(_loc10_ * Math.PI / 180));
                        _loc9_.y = int(_loc8_.droneDimension * Math.sin(_loc10_ * Math.PI / 180));
                     }
                     if(!param1.shipPattern.playLoop)
                     {
                        _loc9_.gotoAndStop(param1.lastShipFrame);
                     }
                  }
               }
            }
         }
      }
      
      public function getDroneGroupRadius() : int
      {
         return this.droneGroupRadius;
      }
      
      public function parseDroneString(param1:int, param2:String) : void
      {
         var _loc5_:int = 0;
         var _loc7_:String = null;
         var _loc8_:Array = null;
         var _loc9_:int = 0;
         var _loc10_:int = 0;
         var _loc11_:String = null;
         var _loc12_:Array = null;
         var _loc13_:Array = null;
         var _loc14_:int = 0;
         var _loc15_:int = 0;
         var _loc3_:Array = param2.split("/");
         var _loc4_:int = int(_loc3_.shift());
         var _loc6_:int = 0;
         while(_loc6_ < _loc3_.length)
         {
            if(_loc4_ == 1)
            {
               _loc5_ = DroneConnector.POSITION_DOWN;
            }
            else if(_loc4_ == 2)
            {
               if(_loc6_ == 0)
               {
                  _loc5_ = DroneConnector.POSITION_LEFT;
               }
               else if(_loc6_ == 1)
               {
                  _loc5_ = DroneConnector.POSITION_RIGHT;
               }
            }
            else if(_loc4_ == 3)
            {
               if(_loc6_ == 0)
               {
                  _loc5_ = DroneConnector.POSITION_RIGHT;
               }
               else if(_loc6_ == 1)
               {
                  _loc5_ = DroneConnector.POSITION_DOWN;
               }
               else if(_loc6_ == 2)
               {
                  _loc5_ = DroneConnector.POSITION_LEFT;
               }
            }
            else if(_loc4_ == 4)
            {
               if(_loc6_ == 0)
               {
                  _loc5_ = DroneConnector.POSITION_RIGHT;
               }
               else if(_loc6_ == 1)
               {
                  _loc5_ = DroneConnector.POSITION_DOWN;
               }
               else if(_loc6_ == 2)
               {
                  _loc5_ = DroneConnector.POSITION_LEFT;
               }
               else if(_loc6_ == 3)
               {
                  _loc5_ = DroneConnector.POSITION_TOP;
               }
            }
            _loc7_ = _loc3_[_loc6_];
            _loc8_ = _loc7_.split("-");
            _loc9_ = int(_loc8_.shift());
            _loc10_ = 0;
            while(_loc10_ < _loc8_.length)
            {
               _loc11_ = _loc8_[_loc10_];
               _loc12_ = _loc11_.split(",");
               _loc13_ = String(_loc12_[0]).split("");
               _loc14_ = int(_loc13_[0]);
               _loc15_ = int(_loc13_[1]);
               if(_loc9_ == 1)
               {
                  this.addDrone(param1,_loc5_,DroneConnector.POSITION_CENTER,_loc14_,_loc15_);
               }
               if(_loc9_ == 2)
               {
                  if(_loc10_ == 0)
                  {
                     this.addDrone(param1,_loc5_,DroneConnector.POSITION_LEFT,_loc14_,_loc15_);
                  }
                  else if(_loc10_ == 1)
                  {
                     this.addDrone(param1,_loc5_,DroneConnector.POSITION_RIGHT,_loc14_,_loc15_);
                  }
               }
               if(_loc9_ == 3)
               {
                  if(_loc10_ == 0)
                  {
                     this.addDrone(param1,_loc5_,DroneConnector.POSITION_TOP,_loc14_,_loc15_);
                  }
                  else if(_loc10_ == 1)
                  {
                     this.addDrone(param1,_loc5_,DroneConnector.POSITION_RIGHT,_loc14_,_loc15_);
                  }
                  else if(_loc10_ == 2)
                  {
                     this.addDrone(param1,_loc5_,DroneConnector.POSITION_LEFT,_loc14_,_loc15_);
                  }
               }
               if(_loc9_ == 4)
               {
                  if(_loc10_ == 0)
                  {
                     this.addDrone(param1,_loc5_,DroneConnector.POSITION_TOP,_loc14_,_loc15_);
                  }
                  else if(_loc10_ == 1)
                  {
                     this.addDrone(param1,_loc5_,DroneConnector.POSITION_RIGHT,_loc14_,_loc15_);
                  }
                  else if(_loc10_ == 2)
                  {
                     this.addDrone(param1,_loc5_,DroneConnector.POSITION_LEFT,_loc14_,_loc15_);
                  }
                  else if(_loc10_ == 3)
                  {
                     this.addDrone(param1,_loc5_,DroneConnector.POSITION_DOWN,_loc14_,_loc15_);
                  }
               }
               _loc10_++;
            }
            _loc6_++;
         }
      }
      
      public function deployDrones(param1:int) : void
      {
         var _loc5_:DroneGroup = null;
         var _loc6_:int = 0;
         var _loc2_:Ship = this.map.getShipManager().getShip(param1) as Ship;
         var _loc3_:Array = _loc2_.droneConnector.droneGroups;
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_.length)
         {
            _loc5_ = _loc3_[_loc4_];
            _loc6_ = _loc5_.droneGroupDimension;
            _loc5_.droneGroupDimension = 0;
            TweenLite.to(_loc5_,1,{
               "delay":1,
               "ease":Quart.easeOut,
               "droneGroupDimension":_loc6_
            });
            _loc4_++;
         }
      }
      
      public function setDroneRadius(param1:int) : void
      {
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc6_:DroneGroup = null;
         var _loc7_:int = 0;
         var _loc2_:Ship = this.map.getShipManager().getHero();
         var _loc3_:DroneConnector = _loc2_.droneConnector;
         if(_loc3_ != null)
         {
            _loc4_ = _loc3_.droneGroups;
            _loc5_ = 0;
            while(_loc5_ < _loc4_.length)
            {
               _loc6_ = _loc4_[_loc5_];
               _loc7_ = _loc6_.droneGroupDimension + param1;
               if(_loc7_ > 0 && _loc7_ < 300)
               {
                  TweenLite.to(_loc6_,0.5,{"droneGroupDimension":_loc7_});
               }
               _loc5_++;
            }
         }
      }
      
      public function minimizeDrones() : void
      {
         var _loc2_:DroneConnector = null;
         var _loc3_:Array = null;
         var _loc4_:int = 0;
         var _loc5_:DroneGroup = null;
         var _loc1_:Ship = this.map.getShipManager().getHero();
         if(_loc1_ != null)
         {
            _loc2_ = _loc1_.droneConnector;
            if(_loc2_ != null)
            {
               _loc3_ = _loc2_.droneGroups;
               _loc4_ = 0;
               while(_loc4_ < _loc3_.length)
               {
                  _loc5_ = _loc3_[_loc4_];
                  TweenLite.to(_loc5_,1,{
                     "delay":1,
                     "ease":Quart.easeOut,
                     "droneGroupDimension":0
                  });
                  _loc4_++;
               }
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.drone
{
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   
   public class DronePattern extends ResourcePattern
   {
      
      private var level:int;
      
      private var droneRadius:int;
      
      public function DronePattern(param1:int, param2:String, param3:int, param4:int)
      {
         super(param1,param2);
         this.level = param3;
         this.droneRadius = param4;
      }
      
      public function getDroneRadius() : int
      {
         return this.droneRadius;
      }
      
      public function getLevel() : int
      {
         return this.level;
      }
   }
}

package net.bigpoint.darkorbit.fireworks
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.ResourceManager;
   
   public class FireworksAddons
   {
      
      private var pendingAssets:Dictionary;
      
      private var pendingAssetsCount:int;
      
      private var loadingCompleteCallback:Function;
      
      public function FireworksAddons()
      {
         super();
         this.pendingAssets = new Dictionary();
         this.pendingAssetsCount = 0;
      }
      
      public function load(param1:Array, param2:Function) : void
      {
         var _loc4_:String = null;
         var _loc5_:String = null;
         this.loadingCompleteCallback = param2;
         var _loc3_:int = 0;
         while(_loc3_ < param1.length)
         {
            _loc4_ = param1[_loc3_];
            if(this.pendingAssets[_loc4_] == null)
            {
               if(!ResourceManager.fileCollection.isLoaded(_loc4_))
               {
                  this.pendingAssets[_loc4_] = true;
                  ++this.pendingAssetsCount;
               }
            }
            _loc3_++;
         }
         if(this.pendingAssetsCount == 0)
         {
            this.loadingCompleteCallback();
         }
         else
         {
            for(_loc5_ in this.pendingAssets)
            {
               ResourceManager.fileCollection.load(_loc5_,this.handleRequestedAssetLoaded);
            }
         }
      }
      
      private function handleRequestedAssetLoaded(param1:SWFFinisher) : void
      {
         var _loc2_:String = param1.fileVO.id;
         if(this.pendingAssets[_loc2_] != null)
         {
            delete this.pendingAssets[_loc2_];
            --this.pendingAssetsCount;
            if(this.pendingAssetsCount == 0)
            {
               this.loadingCompleteCallback();
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.fireworks
{
   import com.greensock.TweenLite;
   import com.greensock.easing.Linear;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.FireworkPattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class FireworksManager
   {
      
      public static const FIREWORK_SMALL:int = 0;
      
      public static const FIREWORK_MEDIUM:int = 1;
      
      public static const FIREWORK_LARGE:int = 2;
      
      public static const logger:ILogger = Log.getLogger("FireworksManager");
      
      private var map:Map;
      
      private var colorsHashmap:Array;
      
      private var independenceDayAssetsLoaded:Boolean;
      
      private var useBitmapClip:Boolean;
      
      public function FireworksManager(param1:Map)
      {
         super();
         this.map = param1;
         this.updateColorsHashmap();
      }
      
      public function showFirework(param1:int, param2:int, param3:int) : void
      {
         var _loc4_:Array = this.getResKeys(param1);
         this.attachClip(this.map.getMain().screenManager.getExplosionLayer(),_loc4_,param2,param3);
      }
      
      public function updateColorsHashmap() : void
      {
         var _loc1_:Array = null;
         if(Settings.fireworksModeIndependenceDay)
         {
            if(this.independenceDayAssetsLoaded)
            {
               this.colorsHashmap = ["null","independence_day","independence_day","independence_day"];
               this.useBitmapClip = (PatternManager.fireworkPatterns[0] as FireworkPattern).useBitmapClip;
               return;
            }
            _loc1_ = ["firework_small_independence_day","firework_medium_independence_day","firework_large_independence_day"];
            new FireworksAddons().load(_loc1_,this.handleAddonAssetsLoaded);
            if(this.independenceDayAssetsLoaded)
            {
               return;
            }
         }
         this.colorsHashmap = ["null","red","blue","green"];
         this.useBitmapClip = false;
      }
      
      private function handleAddonAssetsLoaded() : void
      {
         this.independenceDayAssetsLoaded = true;
         this.updateColorsHashmap();
      }
      
      private function getResKeys(param1:int) : Array
      {
         var _loc2_:Array = ["firework_","firework_"];
         var _loc3_:int = int(param1 / 100);
         var _loc4_:int = param1 % 10;
         var _loc5_:int = (param1 - _loc3_ * 100 - _loc4_) / 10;
         if(param1 > 300)
         {
            _loc2_[0] += "large_";
            _loc2_[1] += "medium_";
            _loc2_[2] = "firework_large_";
         }
         else if(param1 > 200)
         {
            _loc2_[0] += "small_";
            _loc2_[1] += "medium_";
         }
         else
         {
            _loc2_[0] += "small_";
            _loc2_[1] += "small_";
         }
         if(param1 > 300)
         {
            _loc2_[0] += this.colorsHashmap[_loc3_ - 2];
            _loc2_[1] += this.colorsHashmap[_loc5_];
            _loc2_[2] += this.colorsHashmap[_loc4_];
         }
         else
         {
            _loc2_[0] += this.colorsHashmap[_loc5_];
            _loc2_[1] += this.colorsHashmap[_loc4_];
         }
         return _loc2_;
      }
      
      private function attachClip(param1:Sprite, param2:Array, param3:int, param4:int) : void
      {
         var _loc5_:String = null;
         var _loc6_:DisplayObject = null;
         var _loc7_:int = 0;
         var _loc8_:Number = NaN;
         if(param2.length > 0)
         {
            _loc5_ = param2.shift();
            if(this.useBitmapClip)
            {
               _loc6_ = new BitmapClip(ResourceManager.getMovieClip(_loc5_,"mc"),_loc5_);
               _loc7_ = (_loc6_ as BitmapClip).framesLoaded;
            }
            else
            {
               _loc6_ = ResourceManager.getMovieClip(_loc5_,"mc");
               (_loc6_ as MovieClip).mouseEnabled = Main.mouseEventsEnabled;
               (_loc6_ as MovieClip).mouseChildren = Main.mouseEventsEnabled;
               _loc7_ = (_loc6_ as MovieClip).framesLoaded;
            }
            _loc6_.x = param3;
            _loc6_.y = param4;
            param1.addChild(_loc6_);
            _loc8_ = _loc7_ / 30;
            TweenLite.to(_loc6_,_loc8_,{
               "ease":Linear.easeNone,
               "frame":_loc7_,
               "onComplete":this.handleAnimationFinished,
               "onCompleteParams":[_loc6_,param2,param3,param4]
            });
            AudioManager.playSoundEffect(34);
         }
      }
      
      private function handleAnimationFinished(param1:DisplayObject, param2:Array, param3:int, param4:int) : void
      {
         var _loc5_:Sprite = param1.parent as Sprite;
         _loc5_.removeChild(param1);
         this.attachClip(_loc5_,param2,param3,param4);
      }
   }
}

package net.bigpoint.darkorbit.fireworks
{
   import flash.display.BitmapData;
   import flash.display.Sprite;
   import flash.events.TimerEvent;
   import flash.filters.GlowFilter;
   import flash.geom.Matrix;
   import flash.geom.Point;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.combat.*;
   import net.bigpoint.darkorbit.ship.MapObject;
   
   public class Lightning extends Sprite
   {
      
      public var attackManager:CombatManager;
      
      private var _attackerShip:MapObject;
      
      private var _targetShip:MapObject;
      
      public var attackerID:int;
      
      public var targetID:int;
      
      public var isAdded:Boolean = false;
      
      private const SMOOTH_COLOR:uint = 8421504;
      
      private var holder:Sprite;
      
      private var sbd:BitmapData;
      
      private var bbd:BitmapData;
      
      private var soffs:Array;
      
      private var boffs:Array;
      
      private var glow:GlowFilter;
      
      public var lifeSpan:Number;
      
      private var lifeTimer:Timer;
      
      public var startX:Number;
      
      public var startY:Number;
      
      public var endX:Number;
      
      public var endY:Number;
      
      public var len:Number;
      
      public var multi:Number;
      
      public var multi2:Number;
      
      public var _steps:uint;
      
      public var stepEvery:Number;
      
      private var seed1:uint;
      
      private var seed2:uint;
      
      public var smooth:Sprite;
      
      public var childrenSmooth:Sprite;
      
      public var childrenArray:Array = [];
      
      public var _smoothPercentage:uint = 50;
      
      public var _childrenSmoothPercentage:uint;
      
      public var _color:uint;
      
      private var generation:uint;
      
      private var _childrenMaxGenerations:uint = 3;
      
      private var _childrenProbability:Number = 0.025;
      
      private var _childrenProbabilityDecay:Number = 0;
      
      private var _childrenMaxCount:uint = 4;
      
      private var _childrenMaxCountDecay:Number = 0.5;
      
      private var _childrenLengthDecay:Number = 0;
      
      private var _childrenAngleVariation:Number = 60;
      
      private var _childrenLifeSpanMin:Number = 0;
      
      private var _childrenLifeSpanMax:Number = 0;
      
      private var _childrenDetachedEnd:Boolean = false;
      
      private var _maxLength:Number = 0;
      
      private var _maxLengthVary:Number = 0;
      
      public var _isVisible:Boolean = true;
      
      public var _alphaFade:Boolean = true;
      
      public var parentInstance:Lightning;
      
      private var _thickness:Number;
      
      private var _thicknessDecay:Number;
      
      private var initialized:Boolean = false;
      
      private var _wavelength:Number = 0.3;
      
      private var _amplitude:Number = 0.5;
      
      private var _speed:Number = 1;
      
      private var calculatedWavelength:Number;
      
      private var calculatedSpeed:Number;
      
      public var alphaFadeType:String;
      
      public var thicknessFadeType:String;
      
      private var position:Number = 0;
      
      private var absolutePosition:Number = 1;
      
      private var dx:Number;
      
      private var dy:Number;
      
      private var soff:Number;
      
      private var soffx:Number;
      
      private var soffy:Number;
      
      private var boff:Number;
      
      private var boffx:Number;
      
      private var boffy:Number;
      
      private var angle:Number;
      
      private var tx:Number;
      
      private var ty:Number;
      
      public function Lightning(param1:uint = 16777215, param2:Number = 2, param3:uint = 0)
      {
         super();
         mouseEnabled = false;
         this._color = param1;
         this._thickness = param2;
         this.alphaFadeType = LightningFadeType.GENERATION;
         this.thicknessFadeType = LightningFadeType.NONE;
         this.generation = param3;
         if(this.generation == 0)
         {
            this.init();
         }
      }
      
      private function init() : void
      {
         this.randomizeSeeds();
         if(this.lifeSpan > 0)
         {
            this.startLifeTimer();
         }
         this.multi2 = 0.03;
         this.holder = new Sprite();
         this.holder.mouseEnabled = false;
         this.startX = 50;
         this.startY = 200;
         this.endX = 50;
         this.endY = 600;
         this.stepEvery = 4;
         this._steps = 50;
         this.sbd = new BitmapData(this._steps,1,false);
         this.bbd = new BitmapData(this._steps,1,false);
         this.soffs = [new Point(0,0),new Point(0,0)];
         this.boffs = [new Point(0,0),new Point(0,0)];
         if(this.generation == 0)
         {
            this.smooth = new Sprite();
            this.childrenSmooth = new Sprite();
            this.smoothPercentage = 50;
            this.childrenSmoothPercentage = 50;
         }
         else
         {
            this.smooth = this.childrenSmooth = this.parentInstance.childrenSmooth;
         }
         this.steps = 100;
         this.childrenLengthDecay = 0.5;
         addChild(this.holder);
         this.initialized = true;
      }
      
      public function getTargetShip() : MapObject
      {
         return this.attackManager.getMap().getShipManager().getShip(this.targetID);
      }
      
      public function getAttackerShip() : MapObject
      {
         return this.attackManager.getMap().getShipManager().getShip(this.attackerID);
      }
      
      private function randomizeSeeds() : void
      {
         this.seed1 = Math.random() * 100;
         this.seed2 = Math.random() * 100;
      }
      
      public function set steps(param1:uint) : void
      {
         if(param1 < 2)
         {
            param1 = 2;
         }
         if(param1 > 2880)
         {
            param1 = 2880;
         }
         this._steps = param1;
         this.sbd = new BitmapData(this._steps,1,false);
         this.bbd = new BitmapData(this._steps,1,false);
         if(this.generation == 0)
         {
            this.smoothPercentage = this.smoothPercentage;
         }
      }
      
      public function get steps() : uint
      {
         return this._steps;
      }
      
      public function startLifeTimer() : void
      {
         this.lifeTimer = new Timer(this.lifeSpan * 1000,1);
         this.lifeTimer.start();
         this.lifeTimer.addEventListener(TimerEvent.TIMER,this.onTimer);
      }
      
      private function onTimer(param1:TimerEvent) : void
      {
         this.kill();
      }
      
      public function kill() : void
      {
         var _loc1_:uint = 0;
         var _loc2_:Lightning = null;
         var _loc3_:Object = null;
         this.killAllChildren();
         if(this.lifeTimer)
         {
            this.lifeTimer.removeEventListener(TimerEvent.TIMER,this.kill);
            this.lifeTimer.stop();
         }
         if(this.parentInstance != null)
         {
            _loc1_ = 0;
            _loc2_ = this.parent as Lightning;
            for each(_loc3_ in _loc2_.childrenArray)
            {
               if(_loc3_.instance == this)
               {
                  _loc2_.childrenArray.splice(_loc1_,1);
               }
               _loc1_++;
            }
         }
         this.parent.removeChild(this);
         delete global[this];
      }
      
      public function killAllChildren() : void
      {
         var _loc1_:Lightning = null;
         while(this.childrenArray.length > 0)
         {
            _loc1_ = this.childrenArray[0].instance;
            _loc1_.kill();
         }
      }
      
      public function generateChild(param1:uint = 1, param2:Boolean = false) : void
      {
         var _loc3_:uint = 0;
         var _loc4_:uint = 0;
         var _loc5_:uint = 0;
         var _loc6_:uint = 0;
         var _loc7_:Number = NaN;
         var _loc8_:Lightning = null;
         if(this.generation < this.childrenMaxGenerations && this.childrenArray.length < this.childrenMaxCount)
         {
            _loc3_ = this.steps * this.childrenLengthDecay;
            if(_loc3_ >= 2)
            {
               _loc4_ = 0;
               while(_loc4_ < param1)
               {
                  _loc5_ = Math.random() * this.steps;
                  _loc6_ = Math.random() * this.steps;
                  while(_loc6_ == _loc5_)
                  {
                     _loc6_ = Math.random() * this.steps;
                  }
                  _loc7_ = Math.random() * this.childrenAngleVariation - this.childrenAngleVariation / 2;
                  _loc8_ = new Lightning(this.color,this.thickness,this.generation + 1);
                  _loc8_.parentInstance = this;
                  _loc8_.lifeSpan = Math.random() * (this.childrenLifeSpanMax - this.childrenLifeSpanMin) + this.childrenLifeSpanMin;
                  _loc8_.position = 1 - _loc5_ / this.steps;
                  _loc8_.absolutePosition = this.absolutePosition * _loc8_.position;
                  _loc8_.alphaFadeType = this.alphaFadeType;
                  _loc8_.thicknessFadeType = this.thicknessFadeType;
                  if(this.alphaFadeType == LightningFadeType.GENERATION)
                  {
                     _loc8_.alpha = 1 - 1 / (this.childrenMaxGenerations + 1) * _loc8_.generation;
                  }
                  if(this.thicknessFadeType == LightningFadeType.GENERATION)
                  {
                     _loc8_.thickness = this.thickness - this.thickness / (this.childrenMaxGenerations + 1) * _loc8_.generation;
                  }
                  _loc8_.childrenMaxGenerations = this.childrenMaxGenerations;
                  _loc8_.childrenMaxCount = this.childrenMaxCount * (1 - this.childrenMaxCountDecay);
                  _loc8_.childrenProbability = this.childrenProbability * (1 - this.childrenProbabilityDecay);
                  _loc8_.childrenProbabilityDecay = this.childrenProbabilityDecay;
                  _loc8_.childrenLengthDecay = this.childrenLengthDecay;
                  _loc8_.childrenDetachedEnd = this.childrenDetachedEnd;
                  _loc8_.wavelength = this.wavelength;
                  _loc8_.amplitude = this.amplitude;
                  _loc8_.speed = this.speed;
                  _loc8_.init();
                  this.childrenArray.push({
                     "instance":_loc8_,
                     "startStep":_loc5_,
                     "endStep":_loc6_,
                     "detachedEnd":this.childrenDetachedEnd,
                     "childAngle":_loc7_
                  });
                  addChild(_loc8_);
                  _loc8_.steps = this.steps * (1 - this.childrenLengthDecay);
                  if(param2)
                  {
                     _loc8_.generateChild(param1,true);
                  }
                  _loc4_++;
               }
            }
         }
      }
      
      public function update() : void
      {
         var _loc1_:Number = NaN;
         var _loc2_:Object = null;
         var _loc3_:Matrix = null;
         var _loc4_:Number = NaN;
         if(this.initialized)
         {
            this.dx = this.endX - this.startX;
            this.dy = this.endY - this.startY;
            this.len = Math.sqrt(this.dx * this.dx + this.dy * this.dy);
            this.soffs[0].x += this.steps / 100 * this.speed;
            this.soffs[0].y += this.steps / 100 * this.speed;
            this.sbd.perlinNoise(this.steps / 20,this.steps / 20,1,this.seed1,false,true,7,true,this.soffs);
            this.calculatedWavelength = this.steps * this.wavelength;
            this.calculatedSpeed = this.calculatedWavelength * 0.1 * this.speed;
            this.boffs[0].x -= this.calculatedSpeed;
            this.boffs[0].y += this.calculatedSpeed;
            this.bbd.perlinNoise(this.calculatedWavelength,this.calculatedWavelength,1,this.seed2,false,true,7,true,this.boffs);
            if(this.smoothPercentage > 0)
            {
               _loc3_ = new Matrix();
               _loc3_.scale(this.steps / this.smooth.width,1);
               this.bbd.draw(this.smooth,_loc3_);
            }
            if(this.parentInstance != null)
            {
               this.isVisible = this.parentInstance.isVisible;
            }
            else if(this.maxLength == 0)
            {
               this.isVisible = true;
            }
            else
            {
               if(this.len <= this.maxLength)
               {
                  _loc4_ = 1;
               }
               else if(this.len > this.maxLength + this.maxLengthVary)
               {
                  _loc4_ = 0;
               }
               else
               {
                  _loc4_ = 1 - (this.len - this.maxLength) / this.maxLengthVary;
               }
               this.isVisible = Math.random() < _loc4_ ? true : false;
            }
            _loc1_ = Math.random();
            if(_loc1_ < this.childrenProbability)
            {
               this.generateChild();
            }
            if(this.isVisible)
            {
               this.render();
            }
            for each(_loc2_ in this.childrenArray)
            {
               _loc2_.instance.update();
            }
         }
      }
      
      public function render() : void
      {
         var _loc1_:Object = null;
         var _loc3_:Number = NaN;
         var _loc4_:Number = NaN;
         var _loc5_:Number = NaN;
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         this.holder.graphics.clear();
         this.holder.graphics.lineStyle(this.thickness,this._color);
         this.angle = Math.atan2(this.endY - this.startY,this.endX - this.startX);
         var _loc2_:uint = 0;
         while(_loc2_ < this.steps)
         {
            _loc3_ = 1 / this.steps * (this.steps - _loc2_);
            _loc4_ = 1;
            _loc5_ = this.thickness;
            if(this.alphaFadeType == LightningFadeType.TIP_TO_END)
            {
               _loc4_ = this.absolutePosition * _loc3_;
            }
            if(this.thicknessFadeType == LightningFadeType.TIP_TO_END)
            {
               _loc5_ = this.thickness * (this.absolutePosition * _loc3_);
            }
            if(this.alphaFadeType == LightningFadeType.TIP_TO_END || this.thicknessFadeType == LightningFadeType.TIP_TO_END)
            {
               this.holder.graphics.lineStyle(int(_loc5_),this._color,_loc4_);
            }
            this.soff = (this.sbd.getPixel(_loc2_,0) - 8421504) / 16777215 * this.len * this.multi2;
            this.soffx = Math.sin(this.angle) * this.soff;
            this.soffy = Math.cos(this.angle) * this.soff;
            this.boff = (this.bbd.getPixel(_loc2_,0) - 8421504) / 16777215 * this.len * this.amplitude;
            this.boffx = Math.sin(this.angle) * this.boff;
            this.boffy = Math.cos(this.angle) * this.boff;
            this.tx = this.startX + this.dx / (this.steps - 1) * _loc2_ + this.soffx + this.boffx;
            this.ty = this.startY + this.dy / (this.steps - 1) * _loc2_ - this.soffy - this.boffy;
            if(_loc2_ == 0)
            {
               this.holder.graphics.moveTo(this.tx,this.ty);
            }
            this.holder.graphics.lineTo(this.tx,this.ty);
            for each(_loc1_ in this.childrenArray)
            {
               if(_loc1_.startStep == _loc2_)
               {
                  _loc1_.instance.startX = this.tx;
                  _loc1_.instance.startY = this.ty;
               }
               if(_loc1_.detachedEnd)
               {
                  _loc6_ = this.angle + _loc1_.childAngle / 180 * Math.PI;
                  _loc7_ = this.len * this.childrenLengthDecay;
                  _loc1_.instance.endX = _loc1_.instance.startX + Math.cos(_loc6_) * _loc7_;
                  _loc1_.instance.endY = _loc1_.instance.startY + Math.sin(_loc6_) * _loc7_;
               }
               else if(_loc1_.endStep == _loc2_)
               {
                  _loc1_.instance.endX = this.tx;
                  _loc1_.instance.endY = this.ty;
               }
            }
            _loc2_++;
         }
      }
      
      public function killSurplus() : void
      {
         var _loc1_:Lightning = null;
         while(this.childrenArray.length > this.childrenMaxCount)
         {
            _loc1_ = this.childrenArray[this.childrenArray.length - 1].instance;
            _loc1_.kill();
         }
      }
      
      public function set smoothPercentage(param1:Number) : void
      {
         var _loc2_:Matrix = null;
         var _loc3_:uint = 0;
         if(this.smooth)
         {
            this._smoothPercentage = param1;
            _loc2_ = new Matrix();
            _loc2_.createGradientBox(this.steps,1);
            _loc3_ = this._smoothPercentage / 100 * 128;
            this.smooth.graphics.clear();
            this.smooth.graphics.beginGradientFill("linear",[this.SMOOTH_COLOR,this.SMOOTH_COLOR,this.SMOOTH_COLOR,this.SMOOTH_COLOR],[1,0,0,1],[0,_loc3_,255 - _loc3_,255],_loc2_);
            this.smooth.graphics.drawRect(0,0,this.steps,1);
            this.smooth.graphics.endFill();
         }
      }
      
      public function set childrenSmoothPercentage(param1:Number) : void
      {
         this._childrenSmoothPercentage = param1;
         var _loc2_:Matrix = new Matrix();
         _loc2_.createGradientBox(this.steps,1);
         var _loc3_:uint = this._childrenSmoothPercentage / 100 * 128;
         this.childrenSmooth.graphics.clear();
         this.childrenSmooth.graphics.beginGradientFill("linear",[this.SMOOTH_COLOR,this.SMOOTH_COLOR,this.SMOOTH_COLOR,this.SMOOTH_COLOR],[1,0,0,1],[0,_loc3_,255 - _loc3_,255],_loc2_);
         this.childrenSmooth.graphics.drawRect(0,0,this.steps,1);
         this.childrenSmooth.graphics.endFill();
      }
      
      public function get smoothPercentage() : Number
      {
         return this._smoothPercentage;
      }
      
      public function get childrenSmoothPercentage() : Number
      {
         return this._childrenSmoothPercentage;
      }
      
      public function set color(param1:uint) : void
      {
         var _loc2_:Object = null;
         this._color = param1;
         this.glow.color = param1;
         this.holder.filters = [this.glow];
         for each(_loc2_ in this.childrenArray)
         {
            _loc2_.instance.color = param1;
         }
      }
      
      public function get color() : uint
      {
         return this._color;
      }
      
      public function set childrenProbability(param1:Number) : void
      {
         if(param1 > 1)
         {
            param1 = 1;
         }
         else if(param1 < 0)
         {
            param1 = 0;
         }
         this._childrenProbability = param1;
      }
      
      public function get childrenProbability() : Number
      {
         return this._childrenProbability;
      }
      
      public function set childrenProbabilityDecay(param1:Number) : void
      {
         if(param1 > 1)
         {
            param1 = 1;
         }
         else if(param1 < 0)
         {
            param1 = 0;
         }
         this._childrenProbabilityDecay = param1;
      }
      
      public function get childrenProbabilityDecay() : Number
      {
         return this._childrenProbabilityDecay;
      }
      
      public function set maxLength(param1:Number) : void
      {
         this._maxLength = param1;
      }
      
      public function get maxLength() : Number
      {
         return this._maxLength;
      }
      
      public function set maxLengthVary(param1:Number) : void
      {
         this._maxLengthVary = param1;
      }
      
      public function get maxLengthVary() : Number
      {
         return this._maxLengthVary;
      }
      
      public function set thickness(param1:Number) : void
      {
         if(param1 < 0)
         {
            param1 = 0;
         }
         this._thickness = param1;
      }
      
      public function get thickness() : Number
      {
         return this._thickness;
      }
      
      public function set thicknessDecay(param1:Number) : void
      {
         if(param1 > 1)
         {
            param1 = 1;
         }
         else if(param1 < 0)
         {
            param1 = 0;
         }
         this._thicknessDecay = param1;
      }
      
      public function get thicknessDecay() : Number
      {
         return this._thicknessDecay;
      }
      
      public function set childrenLengthDecay(param1:Number) : void
      {
         if(param1 > 1)
         {
            param1 = 1;
         }
         else if(param1 < 0)
         {
            param1 = 0;
         }
         this._childrenLengthDecay = param1;
      }
      
      public function get childrenLengthDecay() : Number
      {
         return this._childrenLengthDecay;
      }
      
      public function set childrenMaxGenerations(param1:uint) : void
      {
         this._childrenMaxGenerations = param1;
         this.killSurplus();
      }
      
      public function get childrenMaxGenerations() : uint
      {
         return this._childrenMaxGenerations;
      }
      
      public function set childrenMaxCount(param1:uint) : void
      {
         this._childrenMaxCount = param1;
         this.killSurplus();
      }
      
      public function get childrenMaxCount() : uint
      {
         return this._childrenMaxCount;
      }
      
      public function set childrenMaxCountDecay(param1:Number) : void
      {
         if(param1 > 1)
         {
            param1 = 1;
         }
         else if(param1 < 0)
         {
            param1 = 0;
         }
         this._childrenMaxCountDecay = param1;
      }
      
      public function get childrenMaxCountDecay() : Number
      {
         return this._childrenMaxCountDecay;
      }
      
      public function set childrenAngleVariation(param1:Number) : void
      {
         var _loc2_:Object = null;
         this._childrenAngleVariation = param1;
         for each(_loc2_ in this.childrenArray)
         {
            _loc2_.childAngle = Math.random() * param1 - param1 / 2;
            _loc2_.instance.childrenAngleVariation = param1;
         }
      }
      
      public function get childrenAngleVariation() : Number
      {
         return this._childrenAngleVariation;
      }
      
      public function set childrenLifeSpanMin(param1:Number) : void
      {
         this._childrenLifeSpanMin = param1;
      }
      
      public function get childrenLifeSpanMin() : Number
      {
         return this._childrenLifeSpanMin;
      }
      
      public function set childrenLifeSpanMax(param1:Number) : void
      {
         this._childrenLifeSpanMax = param1;
      }
      
      public function get childrenLifeSpanMax() : Number
      {
         return this._childrenLifeSpanMax;
      }
      
      public function set childrenDetachedEnd(param1:Boolean) : void
      {
         this._childrenDetachedEnd = param1;
      }
      
      public function get childrenDetachedEnd() : Boolean
      {
         return this._childrenDetachedEnd;
      }
      
      public function set wavelength(param1:Number) : void
      {
         var _loc2_:Object = null;
         this._wavelength = param1;
         for each(_loc2_ in this.childrenArray)
         {
            _loc2_.instance.wavelength = param1;
         }
      }
      
      public function get wavelength() : Number
      {
         return this._wavelength;
      }
      
      public function set amplitude(param1:Number) : void
      {
         var _loc2_:Object = null;
         this._amplitude = param1;
         for each(_loc2_ in this.childrenArray)
         {
            _loc2_.instance.amplitude = param1;
         }
      }
      
      public function get amplitude() : Number
      {
         return this._amplitude;
      }
      
      public function set speed(param1:Number) : void
      {
         var _loc2_:Object = null;
         this._speed = param1;
         for each(_loc2_ in this.childrenArray)
         {
            _loc2_.instance.speed = param1;
         }
      }
      
      public function get speed() : Number
      {
         return this._speed;
      }
      
      public function set isVisible(param1:Boolean) : void
      {
         this._isVisible = visible = param1;
      }
      
      public function get isVisible() : Boolean
      {
         return this._isVisible;
      }
   }
}

package net.bigpoint.darkorbit.fireworks
{
   public class LightningFadeType
   {
      
      public static const NONE:String = "none";
      
      public static const GENERATION:String = "generation";
      
      public static const TIP_TO_END:String = "tip";
      
      public function LightningFadeType()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.fireworks
{
   import com.greensock.TweenLite;
   import com.greensock.easing.Quint;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.ShockwavePattern;
   
   public class Shockwave extends Sprite
   {
      
      private static var shockwaveBitmaps:Array = [];
      
      private static var coordMultiplier:Array = [];
      
      private var map:Map;
      
      private var shockwaveID:int;
      
      public var radius:int = 300;
      
      public var duration:Number = 2;
      
      public var beginScale:Number = 1;
      
      public var endScale:Number = 0.3;
      
      public var maxShockwaves:int = 40;
      
      public var shakeScreen:Boolean = true;
      
      public function Shockwave(param1:Map, param2:int)
      {
         super();
         this.map = param1;
         this.shockwaveID = param2;
         var _loc3_:ShockwavePattern = PatternManager.shockwavePatterns[param2];
         if(shockwaveBitmaps[param2] == null)
         {
            shockwaveBitmaps[param2] = ResourceManager.getBitmapData("shockwaves",_loc3_.resKey);
         }
         this.radius = _loc3_.radius;
         this.duration = _loc3_.duration;
         this.beginScale = _loc3_.beginScale;
         this.endScale = _loc3_.endScale;
         this.maxShockwaves = _loc3_.maxShockwaves;
         this.shakeScreen = _loc3_.shakeScreen;
      }
      
      public function impact(param1:int, param2:int) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:Bitmap = null;
         var _loc7_:Sprite = null;
         var _loc8_:int = 0;
         var _loc3_:Sprite = this.map.getMain().screenManager.getExplosionLayer();
         if(shockwaveBitmaps != null)
         {
            _loc4_ = 360 / this.maxShockwaves;
            _loc5_ = 0;
            while(_loc5_ < this.maxShockwaves)
            {
               _loc6_ = new Bitmap(shockwaveBitmaps[this.shockwaveID]);
               _loc7_ = new Sprite();
               _loc7_.mouseEnabled = false;
               _loc7_.mouseChildren = false;
               _loc7_.addChild(_loc6_);
               _loc6_.y = -_loc6_.height / 2;
               _loc7_.scaleX = this.beginScale;
               _loc7_.scaleY = this.beginScale;
               _loc7_.x = param1;
               _loc7_.y = param2;
               _loc8_ = _loc5_ * _loc4_;
               _loc7_.rotation = _loc8_ + 180;
               if(coordMultiplier[this.maxShockwaves] == null)
               {
                  coordMultiplier[this.maxShockwaves] = [];
               }
               if(coordMultiplier[this.maxShockwaves][_loc5_] == null)
               {
                  coordMultiplier[this.maxShockwaves][_loc5_] = [];
                  coordMultiplier[this.maxShockwaves][_loc5_][0] = Math.cos(_loc8_ * Math.PI / 180);
                  coordMultiplier[this.maxShockwaves][_loc5_][1] = Math.sin(_loc8_ * Math.PI / 180);
               }
               _loc3_.addChild(_loc7_);
               TweenLite.to(_loc7_,this.duration,{
                  "ease":Quint.easeOut,
                  "x":param1 + this.radius * coordMultiplier[this.maxShockwaves][_loc5_][0],
                  "y":param2 + this.radius * coordMultiplier[this.maxShockwaves][_loc5_][1],
                  "scaleX":this.endScale,
                  "scaleY":this.endScale,
                  "alpha":0,
                  "onComplete":this.handleShockwaveCompleted,
                  "onCompleteParams":[_loc7_]
               });
               _loc5_++;
            }
         }
      }
      
      private function handleShockwaveCompleted(param1:Sprite) : void
      {
         var _loc2_:Sprite = this.map.getMain().screenManager.getExplosionLayer();
         if(_loc2_.contains(param1))
         {
            _loc2_.removeChild(param1);
         }
      }
   }
}

package net.bigpoint.darkorbit.groupsystem
{
   public class Group
   {
      
      public static const INVITATION_BEHAVIOR_BOSS_ONLY:int = 0;
      
      public static const INVITATION_BEHAVIOR_FREE_FOR_ALL:int = 1;
      
      public static const LOOT_MODE_RANDOM:int = 1;
      
      public static const LOOT_MODE_NEED_BEFORE_GREED:int = 2;
      
      public static const LOOT_MODE_WYTIWYG:int = 3;
      
      private var _id:int;
      
      private var _sizeCurrent:int;
      
      private var _sizeMax:int;
      
      private var _invitationBehavior:int;
      
      private var _lootMode:int;
      
      private var _members:Array = [];
      
      private var _heroIsBoss:Boolean;
      
      public function Group()
      {
         super();
      }
      
      public function getMemberByID(param1:int) : GroupMember
      {
         var _loc2_:GroupMember = null;
         var _loc3_:int = 0;
         while(_loc3_ < this._members.length)
         {
            if(GroupMember(this._members[_loc3_]).id == param1)
            {
               _loc2_ = GroupMember(this._members[_loc3_]);
            }
            _loc3_++;
         }
         return _loc2_;
      }
      
      public function addMember(param1:GroupMember) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this._members.length)
         {
            if(GroupMember(this._members[_loc2_]).id == param1.id)
            {
               this._members.splice(_loc2_,1);
               break;
            }
            _loc2_++;
         }
         this._members.push(param1);
      }
      
      public function removeMember(param1:int) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this._members.length)
         {
            if(GroupMember(this._members[_loc2_]).id == param1)
            {
               this._members.splice(_loc2_,1);
               break;
            }
            _loc2_++;
         }
      }
      
      public function init(param1:int, param2:int, param3:int, param4:int, param5:int) : void
      {
         this._id = param1;
         this._sizeCurrent = param2;
         this._sizeMax = param3;
         this._invitationBehavior = param4;
         this._lootMode = param5;
      }
      
      public function get sizeCurrent() : int
      {
         return this._sizeCurrent;
      }
      
      public function set sizeCurrent(param1:int) : void
      {
         this._sizeCurrent = param1;
      }
      
      public function get sizeMax() : int
      {
         return this._sizeMax;
      }
      
      public function get invitationBehavior() : int
      {
         return this._invitationBehavior;
      }
      
      public function set invitationBehavior(param1:int) : void
      {
         this._invitationBehavior = param1;
      }
      
      public function get lootMode() : int
      {
         return this._lootMode;
      }
      
      public function set lootMode(param1:int) : void
      {
         this._lootMode = param1;
      }
      
      public function get members() : Array
      {
         return this._members;
      }
      
      public function set members(param1:Array) : void
      {
         this._members = param1;
      }
      
      public function get heroIsBoss() : Boolean
      {
         return this._heroIsBoss;
      }
      
      public function set heroIsBoss(param1:Boolean) : void
      {
         this._heroIsBoss = param1;
      }
      
      public function get id() : int
      {
         return this._id;
      }
   }
}

package net.bigpoint.darkorbit.groupsystem
{
   import com.bigpoint.utils.BPLocale;
   import flash.display.MovieClip;
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.gui.InvitationClip;
   import net.bigpoint.darkorbit.net.ClientCommands;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   
   public class GroupManager
   {
      
      private static const MEMBER_INIT_PARAM_COUNT:int = 19;
      
      private static const MEMBER_CONDENSED_INIT_PARAM_COUNT:int = 3;
      
      private var main:Main;
      
      private var _group:Group;
      
      private var _invitationErrorHashmap:Dictionary;
      
      private var markerID:int = 1000;
      
      private var _invitationsBlocked:Boolean;
      
      public function GroupManager(param1:Main)
      {
         super();
         this.main = param1;
         param1.getGuiManager().createGroupWindow();
         this.initInvitationErrorHashmap();
      }
      
      public function deleteAllInvitations() : void
      {
         var _loc2_:Invitation = null;
         var _loc1_:Array = this.main.getGuiManager().getGroupUI().invitations;
         for each(_loc2_ in _loc1_)
         {
            this.deleteInvitation(_loc2_.getInviter().id,_loc2_.getCandidate().id);
         }
      }
      
      public function isGroupMember(param1:int) : Boolean
      {
         if(this._group == null || this._group.members.length == 0)
         {
            return false;
         }
         return this.main.getGuiManager().getGroupUI().isGroupMember(param1);
      }
      
      public function changeBlockInvitationsState(param1:Boolean) : void
      {
         if(this._invitationsBlocked != param1 || this.main.getGuiManager().getGroupUI().disposed)
         {
            this._invitationsBlocked = param1;
            this.main.getGuiManager().getGroupUI().changeBlockInvitationsState(this._invitationsBlocked);
         }
      }
      
      public function init() : void
      {
      }
      
      public function handleLeaderChange(param1:int) : void
      {
         var _loc2_:GroupMember = null;
         if(!this.isInGroup())
         {
            return;
         }
         for each(_loc2_ in this._group.members)
         {
            _loc2_.isLead = _loc2_.id == param1;
         }
         this._group.heroIsBoss = param1 == Hero.userID;
         this.main.getGuiManager().getGroupUI().update();
      }
      
      private function initInvitationErrorHashmap() : void
      {
         this._invitationErrorHashmap = new Dictionary();
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_GROUP_FULL] = "msg_grp_inv_err_group_full";
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_CANDIDATE_IN_GROUP] = "msg_grp_inv_err_candidate_in_group";
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_CANDIDATE_NOT_AVAILABLE] = "msg_grp_inv_err_candidate_not_available";
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_CANDIDATE_NON_EXISTANT] = "msg_grp_inv_err_candidate_nonexistant";
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_INVITER_NONEXISTENT] = "msg_grp_inv_err_inviter_nonexistant";
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_NO_INVITATION] = "msg_grp_inv_err_no_invitation";
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_BOSS_ONLY] = "msg_grp_inv_err_boss_only";
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_MAX_INVITATIONS_INVITER] = "msg_grp_inv_err_max_invitations_inviter";
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_MAX_INVITATIONS_CANDIDATE] = "msg_grp_inv_err_max_invitations_candidate";
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_BLOCKED] = "msg_grp_inv_err_candidate_blocking";
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_SPAM] = "msg_grp_inv_err_spam";
         this._invitationErrorHashmap[ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_DUPLICATE] = "msg_grp_inv_err_duplicate_invitation";
      }
      
      public function handleInvitationBehaviourChange(param1:int) : void
      {
         if(this._group != null)
         {
            if(this._group.invitationBehavior != param1)
            {
               this._group.invitationBehavior = param1;
               this.main.getGuiManager().getGroupUI().update();
            }
         }
      }
      
      public function handleInvitationError(param1:String) : void
      {
         this.main.getGuiManager().writeToLog(BPLocale.getText(this._invitationErrorHashmap[param1]));
      }
      
      public function handleMemberJump(param1:int) : void
      {
      }
      
      public function handleMemberKill(param1:int) : void
      {
      }
      
      public function isInGroup() : Boolean
      {
         if(this._group != null && this._group.members.length > 0)
         {
            return true;
         }
         return false;
      }
      
      public function cleanup() : void
      {
         this.terminateGroup();
      }
      
      public function createMapmarker(param1:int, param2:int, param3:int, param4:int) : void
      {
         this.main.screenManager.map.getMinimapManager().getMiniMap().addMapMarker(this.markerID++,param3,param4,10);
      }
      
      public function initGroupWithMembers(param1:int, param2:int, param3:int, param4:int, param5:int, param6:Array) : void
      {
         this.initGroup(param1,param2,param3,param4,param5);
         this.addMembersRaw(param6);
      }
      
      public function initMemberTarget(param1:int) : void
      {
         var _loc3_:int = 0;
         var _loc5_:MapObject = null;
         var _loc6_:StubShip = null;
         var _loc2_:Array = this._group.members;
         var _loc4_:int = 0;
         while(_loc4_ < _loc2_.length)
         {
            if(GroupMember(_loc2_[_loc4_]).targetID == param1)
            {
               _loc5_ = this.main.screenManager.map.getShipManager().getShip(param1);
               if(_loc5_ != null)
               {
                  _loc6_ = new StubShip();
                  _loc6_.nickname = _loc5_.getUsername();
                  _loc6_.shipPatternID = _loc5_.shipPattern.getPatternID();
                  GroupMember(_loc2_[_loc4_]).targetObject = _loc6_;
                  _loc3_ = GroupMember(_loc2_[_loc4_]).id;
                  this.main.getConnectionManager().unwatchShipInit(param1);
                  break;
               }
            }
            _loc4_++;
         }
         this.main.getGuiManager().getGroupUI().update();
      }
      
      public function prepareCandidate(param1:MapObject) : void
      {
         this.main.getGuiManager().getGroupUI().setCanditate(param1);
      }
      
      public function updateMemberStats(param1:int, param2:XML) : void
      {
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc6_:MapObject = null;
         var _loc7_:StubShip = null;
         var _loc3_:GroupMember = this._group.getMemberByID(param1);
         if(_loc3_ == null)
         {
            return;
         }
         if(param2.@hp.length())
         {
            _loc3_.hitPointsCurrent = int(param2.@hp);
         }
         if(param2.@hpM.length())
         {
            _loc3_.hitPointsMax = int(param2.@hpM);
         }
         if(param2.@sh.length())
         {
            _loc3_.shieldCurrent = int(param2.@sh);
         }
         if(param2.@shM.length())
         {
            _loc3_.shieldMax = int(param2.@shM);
         }
         if(param2.@pos.length())
         {
            _loc4_ = param2.@pos.toXMLString().split(",");
            _loc3_.posX = int(_loc4_[0]);
            _loc3_.posY = int(_loc4_[1]);
         }
         if(param2.@map.length())
         {
            _loc3_.mapID = int(param2.@map);
         }
         if(param2.@lev.length())
         {
            _loc3_.gameLevel = int(param2.@lev);
         }
         if(param2.@fra.length())
         {
            _loc3_.factionID = int(param2.@fra);
         }
         if(param2.@act.length())
         {
            _loc3_.activity = Boolean(int(param2.@act));
         }
         if(param2.@clk.length())
         {
            _loc3_.isCloaked = Boolean(int(param2.@clk));
         }
         if(param2.@shp.length())
         {
            _loc3_.shipType = int(param2.@shp);
         }
         if(param2.@fgt.length())
         {
            _loc3_.fightState = Boolean(int(param2.@fgt));
         }
         if(param2.@lgo.length())
         {
            _loc3_.isOffline = Boolean(int(param2.@lgo));
         }
         if(param2.@tgt.length())
         {
            _loc5_ = int(param2.@tgt);
            this.main.getConnectionManager().unwatchShipInit(_loc3_.targetID);
            _loc3_.targetID = _loc5_;
            if(_loc5_ > 0 && _loc3_.mapID == Settings.mapID)
            {
               _loc6_ = this.main.screenManager.map.getShipManager().getShip(_loc3_.targetID);
               if(_loc6_ != null)
               {
                  _loc7_ = new StubShip();
                  _loc7_.nickname = _loc6_.getUsername();
                  _loc7_.shipPatternID = _loc6_.shipPattern.getPatternID();
                  _loc3_.targetObject = _loc7_;
               }
               else if(_loc3_.mapID == Settings.mapID)
               {
                  this.main.getConnectionManager().watchShipInit(_loc5_);
               }
            }
            else
            {
               _loc3_.targetObject = null;
            }
         }
         this.main.getGuiManager().getGroupUI().update();
      }
      
      public function deleteInvitation(param1:int, param2:int, param3:String = null) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:String = null;
         var _loc7_:String = null;
         var _loc8_:String = null;
         var _loc9_:Boolean = false;
         var _loc10_:Invitation = null;
         if(param1 == Hero.userID)
         {
            _loc4_ = param2;
            _loc5_ = InvitationClip.TYPE_OUTGOING;
         }
         else
         {
            _loc4_ = param1;
            _loc5_ = InvitationClip.TYPE_INCOMING;
         }
         if(param3 != null)
         {
            _loc7_ = "%name%";
            _loc8_ = "";
            _loc9_ = true;
            switch(param3)
            {
               case ServerCommands.GROUPSYSTEM_GROUP_INVITATION_DELETE_REVOKE:
                  _loc6_ = "msg_grp_inv_revoke_inviter";
                  if(_loc5_ == InvitationClip.TYPE_INCOMING)
                  {
                     _loc9_ = false;
                     for each(_loc10_ in this.main.getGuiManager().getGroupUI().receivedInvitations)
                     {
                        if(_loc10_.getInviter().id == _loc4_)
                        {
                           _loc8_ = _loc10_.getInviter().nickName;
                        }
                     }
                  }
                  break;
               case ServerCommands.GROUPSYSTEM_GROUP_INVITATION_DELETE_REJECT:
                  _loc6_ = "msg_grp_inv_invitation_rejected_candidate";
                  if(_loc5_ == InvitationClip.TYPE_OUTGOING)
                  {
                     _loc9_ = false;
                     for each(_loc10_ in this.main.getGuiManager().getGroupUI().sentInvitations)
                     {
                        if(_loc10_.getCandidate().id == _loc4_)
                        {
                           _loc8_ = _loc10_.getCandidate().nickName;
                        }
                     }
                  }
                  break;
               case ServerCommands.GROUPSYSTEM_GROUP_INVITATION_DELETE_TIMEOUT:
                  if(_loc5_ == InvitationClip.TYPE_OUTGOING)
                  {
                     _loc6_ = "msg_grp_inv_timeout_checked_inviter";
                     _loc7_ = "%invited%";
                     for each(_loc10_ in this.main.getGuiManager().getGroupUI().sentInvitations)
                     {
                        if(_loc10_.getCandidate().id == _loc4_)
                        {
                           _loc8_ = _loc10_.getCandidate().nickName;
                           _loc9_ = false;
                           break;
                        }
                     }
                     break;
                  }
                  if(_loc5_ == InvitationClip.TYPE_INCOMING)
                  {
                     _loc6_ = "msg_grp_inv_timeout_checked_candidate";
                     _loc7_ = "%inviter%";
                     for each(_loc10_ in this.main.getGuiManager().getGroupUI().receivedInvitations)
                     {
                        if(_loc10_.getInviter().id == _loc4_)
                        {
                           _loc8_ = _loc10_.getInviter().nickName;
                           _loc9_ = false;
                           break;
                        }
                     }
                  }
            }
            if(!_loc9_)
            {
               this.main.getGuiManager().writeToLog(BPLocale.getText(_loc6_).replace(_loc7_,_loc8_));
            }
         }
         this.main.getGuiManager().getGroupUI().removeInvitation(_loc4_,_loc5_);
         this.main.getGuiManager().getGroupUI().update();
      }
      
      public function onMemberLeft(param1:int, param2:String) : void
      {
         var _loc3_:GroupMember = null;
         var _loc4_:String = null;
         if(param1 != Hero.userID)
         {
            _loc3_ = this._group.getMemberByID(param1);
            switch(param2)
            {
               case ServerCommands.GROUPSYSTEM_GROUP_EVENT_MEMBER_LEAVES_SUB_KICK:
                  _loc4_ = "msg_grp_leave_group_reason_kick";
                  break;
               case ServerCommands.GROUPSYSTEM_GROUP_EVENT_MEMBER_LEAVES_SUB_LEAVE:
                  _loc4_ = "msg_grp_leave_group_reason_leave";
                  break;
               case ServerCommands.GROUPSYSTEM_GROUP_EVENT_MEMBER_LEAVES_SUB_NONE:
                  _loc4_ = "msg_grp_leave_group_reason_none";
            }
            this.main.getGuiManager().writeToLog(BPLocale.getText(_loc4_).replace(/%name%/,_loc3_.nickName));
            this.removeMemberByID(param1);
            this.main.getGuiManager().getGroupUI().update();
         }
         else
         {
            this.terminateGroup();
         }
      }
      
      public function terminateGroup(param1:Boolean = true) : void
      {
         var _loc2_:GroupMember = null;
         var _loc3_:MovieClip = null;
         if(this._group)
         {
            for each(_loc2_ in this._group.members)
            {
               if(_loc2_.id != Hero.userID)
               {
                  this.changeShipGroupState(_loc2_.id,false);
               }
            }
            _loc3_ = this.main.getGuiManager().getGlobalchat();
            if(_loc3_ != null && param1)
            {
               _loc3_.leaveGroupRoom();
            }
         }
         this._group = new Group();
         this._group = null;
         this.main.getGuiManager().getGroupUI().setGroup(this._group);
         this.main.getGuiManager().getGroupUI().update();
      }
      
      private function initGroup(param1:int, param2:int, param3:int, param4:int, param5:int) : void
      {
         this.terminateGroup(false);
         this._group = new Group();
         this._group.init(param1,param2,param3,param4,param5);
         this.joinGroupChat();
         this.main.getGuiManager().getGroupUI().setGroup(this._group);
         this.main.getGuiManager().getGroupUI().update();
      }
      
      private function addMembersRaw(param1:Array) : void
      {
         var _loc2_:Array = null;
         var _loc4_:GroupMember = null;
         var _loc3_:int = 1;
         while(param1.length >= MEMBER_INIT_PARAM_COUNT)
         {
            _loc2_ = param1.splice(0,MEMBER_INIT_PARAM_COUNT);
            _loc4_ = this.parseMember(_loc2_);
            _loc4_.orderID = _loc3_;
            if(_loc3_ == 1)
            {
               _loc4_.isLead = true;
            }
            _loc3_++;
            this.addMember(_loc4_);
         }
         this._group.heroIsBoss = GroupMember(this._group.members[0]).id == Hero.userID;
         this.main.getGuiManager().getGroupUI().update();
      }
      
      public function parseMember(param1:Array) : GroupMember
      {
         var _loc21_:MapObject = null;
         var _loc22_:StubShip = null;
         var _loc2_:String = param1.shift();
         var _loc3_:int = int(param1.shift());
         var _loc4_:int = int(param1.shift());
         var _loc5_:int = int(param1.shift());
         var _loc6_:int = int(param1.shift());
         var _loc7_:int = int(param1.shift());
         var _loc8_:int = int(param1.shift());
         var _loc9_:int = int(param1.shift());
         var _loc10_:int = int(param1.shift());
         var _loc11_:int = int(param1.shift());
         var _loc12_:Boolean = Boolean(int(param1.shift()));
         var _loc13_:Boolean = Boolean(int(param1.shift()));
         var _loc14_:Boolean = Boolean(int(param1.shift()));
         var _loc15_:int = int(param1.shift());
         var _loc16_:int = int(param1.shift());
         var _loc17_:String = param1.shift();
         var _loc18_:int = int(param1.shift());
         var _loc19_:Boolean = Boolean(int(param1.shift()));
         var _loc20_:GroupMember = new GroupMember();
         _loc20_.init(_loc3_,_loc2_,_loc4_,_loc5_,_loc6_,_loc7_,_loc8_,_loc9_,_loc10_,_loc11_,_loc12_,_loc13_,_loc14_,_loc15_,_loc16_,_loc17_,_loc18_,_loc19_);
         if(_loc16_ != -1)
         {
            _loc21_ = this.main.screenManager.map.getShipManager().getShip(_loc16_);
            if(_loc21_ != null)
            {
               _loc22_ = new StubShip();
               _loc22_.nickname = _loc21_.getUsername();
               _loc22_.shipPatternID = _loc21_.shipPattern.getPatternID();
               _loc20_.targetObject = _loc22_;
            }
            else if(_loc8_ == Settings.mapID)
            {
               this.main.getConnectionManager().watchShipInit(_loc16_);
               this.main.getConnectionManager().sendCommand(ClientCommands.FORCE_INIT,[_loc16_]);
            }
         }
         return _loc20_;
      }
      
      public function handleRawInvitation(param1:Array) : void
      {
         var _loc2_:Invitation = new Invitation();
         var _loc3_:GroupMember = this.parseCondensedMember(param1.splice(0,MEMBER_CONDENSED_INIT_PARAM_COUNT));
         var _loc4_:GroupMember = this.parseCondensedMember(param1);
         _loc2_.setInviter(_loc3_);
         _loc2_.setCandidate(_loc4_);
         if(_loc3_.id != Hero.userID && _loc4_.id != Hero.userID)
         {
            this.main.getGuiManager().writeToLog(BPLocale.getText("msg_grp_inv_info_from_to").replace(/%inviter%/,_loc3_.nickName).replace(/%candidate%/,_loc4_.nickName));
         }
         else
         {
            this.main.getGuiManager().getGroupUI().addInvitation(_loc2_);
            this.main.getGuiManager().getGroupUI().update();
         }
      }
      
      private function parseCondensedMember(param1:Array) : GroupMember
      {
         var _loc2_:int = int(param1.shift());
         var _loc3_:String = param1.shift();
         var _loc4_:int = int(param1.shift());
         var _loc5_:GroupMember = new GroupMember();
         _loc5_.init(_loc2_,_loc3_);
         _loc5_.shipType = _loc4_;
         return _loc5_;
      }
      
      public function addMember(param1:GroupMember) : void
      {
         this._group.addMember(param1);
         this.changeShipGroupState(param1.id,true);
      }
      
      public function removeMemberByID(param1:int) : void
      {
         this._group.removeMember(param1);
         if(param1 != Hero.userID)
         {
            this.main.getGuiManager().getGroupUI().removeMemberClip(param1);
         }
         this.changeShipGroupState(param1,false);
      }
      
      public function removeMember(param1:GroupMember) : void
      {
         this.removeMemberByID(param1.id);
      }
      
      public function changeShipGroupState(param1:int, param2:Boolean) : void
      {
         var _loc3_:MapObject = this.main.screenManager.map.getShipManager().getShip(param1);
         if(_loc3_)
         {
            _loc3_.isGroupMember = param2;
            _loc3_.updateLabel();
         }
      }
      
      public function handleGroupError(param1:String, param2:int) : void
      {
         switch(param1)
         {
            case ServerCommands.GROUPSYSTEM_GROUP_EVENT_ERROR_SUB_ATTACK:
               this.main.getGuiManager().writeToLog(BPLocale.getText("msg_grp_attack_impossible"));
               break;
            case ServerCommands.GROUPSYSTEM_GROUP_EVENT_ERROR_SUB_FOLLOW:
            case ServerCommands.GROUPSYSTEM_GROUP_EVENT_ERROR_SUB_PING:
               this.main.getGuiManager().writeToLog(BPLocale.getText("label_grp_follow_impossible"));
         }
      }
      
      public function dispose() : void
      {
         this.main.getGuiManager().getGroupUI().dispose();
      }
      
      public function joinGroupChat() : void
      {
         var _loc1_:MovieClip = null;
         if(this.main.getGuiManager().isChatConnected)
         {
            _loc1_ = this.main.getGuiManager().getGlobalchat();
            if(_loc1_ != null && this._group != null)
            {
               _loc1_.createGroupRoom(this._group.id,BPLocale.getText("title_group"));
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.groupsystem
{
   public class GroupMember
   {
      
      public var id:int;
      
      public var nickName:String;
      
      public var factionID:int;
      
      public var gameLevel:int;
      
      public var clanTag:String;
      
      public var online:Boolean = true;
      
      public var alive:Boolean = true;
      
      public var shipType:int;
      
      public var hitPointsCurrent:int;
      
      public var hitPointsMax:int;
      
      public var shieldCurrent:int;
      
      public var shieldMax:int;
      
      public var mapID:int;
      
      public var posX:int;
      
      public var posY:int;
      
      public var targetID:int;
      
      public var targetObject:StubShip;
      
      public var activity:Boolean;
      
      public var fightState:Boolean;
      
      public var isCloaked:Boolean;
      
      public var orderID:int;
      
      public var isLead:Boolean;
      
      public var isOffline:Boolean;
      
      public function GroupMember()
      {
         super();
         this.nickName = "";
      }
      
      public function init(param1:int = 0, param2:String = "", param3:int = 0, param4:int = 0, param5:int = 0, param6:int = 0, param7:int = 0, param8:int = 0, param9:int = 0, param10:int = 0, param11:Boolean = false, param12:Boolean = false, param13:Boolean = false, param14:int = 0, param15:int = 0, param16:String = "", param17:int = 0, param18:Boolean = false) : void
      {
         this.id = param1;
         this.nickName = param2;
         this.hitPointsCurrent = param3;
         this.hitPointsMax = param4;
         this.shieldCurrent = param5;
         this.shieldMax = param6;
         this.mapID = param7;
         this.posX = param8;
         this.posY = param9;
         this.gameLevel = param10;
         this.activity = param11;
         this.isCloaked = param12;
         this.fightState = param13;
         this.factionID = param14;
         this.targetID = param15;
         this.clanTag = param16;
         this.shipType = param17;
         this.isOffline = param18;
      }
   }
}

package net.bigpoint.darkorbit.groupsystem
{
   public class Invitation
   {
      
      private var _inviter:GroupMember;
      
      private var _candidate:GroupMember;
      
      private var _id:int;
      
      public function Invitation()
      {
         super();
      }
      
      public function setInviter(param1:GroupMember) : void
      {
         this._inviter = param1;
      }
      
      public function getInviter() : GroupMember
      {
         return this._inviter;
      }
      
      public function setCandidate(param1:GroupMember) : void
      {
         this._candidate = param1;
      }
      
      public function getCandidate() : GroupMember
      {
         return this._candidate;
      }
      
      public function get id() : int
      {
         return this._id;
      }
      
      public function set id(param1:int) : void
      {
         this._id = param1;
      }
   }
}

package net.bigpoint.darkorbit.groupsystem
{
   public class StubShip
   {
      
      public var nickname:String;
      
      public var shipPatternID:int;
      
      public function StubShip()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import flash.events.Event;
   
   public class ActionEvent extends Event
   {
      
      public static const ACTION:String = "ActionEvent.action";
      
      private var actionID:int;
      
      private var environment:int;
      
      public function ActionEvent(param1:String, param2:Boolean = false, param3:Boolean = false)
      {
         super(param1,param2,param3);
      }
      
      public function getActionID() : int
      {
         return this.actionID;
      }
      
      public function setActionID(param1:int) : void
      {
         this.actionID = param1;
      }
      
      public function getEnvironment() : int
      {
         return this.environment;
      }
      
      public function setEnvironment(param1:int) : void
      {
         this.environment = param1;
      }
      
      override public function toString() : String
      {
         return "ActionEvent " + "actionID " + this.actionID + " env " + this.environment;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.utils.BPLocale;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import flash.display.Bitmap;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.MouseEvent;
   import flash.external.ExternalInterface;
   import flash.filters.DropShadowFilter;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.pattern.BannerAdPattern;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class BannerAd extends Sprite
   {
      
      public static const CLOSE_BANNER_WINDOW:String = "CLOSE_BANNER_WINDOW";
      
      private var pattern:BannerAdPattern;
      
      public var bannerAdClip:MovieClip;
      
      public var sizerClip:MovieClip;
      
      private var buttonIdleClip:MovieClip;
      
      private var buttonStd:MovieClip;
      
      private var contentWidth:int;
      
      private var contentHeight:int;
      
      private var footerPaddingX:int = 5;
      
      private var footerPaddingY:int = 5;
      
      private var callBack:Function;
      
      public var allTextsWrapper:DisplayObject;
      
      public function BannerAd(param1:BannerAdPattern)
      {
         super();
         this.pattern = param1;
         var _loc2_:String = param1.getSWFLibID();
         this.bannerAdClip = ResourceManager.getMovieClip(_loc2_,"bannerAd");
         this.sizerClip = ResourceManager.getMovieClip(_loc2_,"sizer");
         this.init();
      }
      
      private function init() : void
      {
         ScreenManager.playAnimation(this.bannerAdClip,24,false,1,false);
         var _loc1_:DisplayObject = this.bannerAdClip.getChildByName("slotFlashesClip");
         if(_loc1_ != null)
         {
            ScreenManager.playAnimation(_loc1_ as MovieClip,24,true,1,false);
         }
         this.setTexts();
         this.initClickArea();
      }
      
      private function initClickArea() : void
      {
         var _loc1_:DisplayObject = this.bannerAdClip.getChildByName("clickButton");
         if(_loc1_ != null)
         {
            this.buttonIdleClip = _loc1_["buttonIdleClip"] as MovieClip;
            this.buttonIdleClip.mouseEnabled = false;
            this.buttonIdleClip.mouseChildren = false;
            this.buttonStd = _loc1_["buttonStdClip"] as MovieClip;
            this.buttonStd.buttonMode = true;
            this.buttonStd.addEventListener(MouseEvent.CLICK,this.handleMouseClick);
            this.buttonStd.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
            this.buttonStd.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
            this.startBlinking();
         }
      }
      
      private function handleMouseOut(param1:MouseEvent) : void
      {
         TweenLite.to(this.buttonIdleClip,0.25,{
            "alpha":1,
            "onComplete":this.startBlinking
         });
      }
      
      private function handleMouseOver(param1:MouseEvent) : void
      {
         this.stopBlinking();
      }
      
      private function startBlinking() : void
      {
         TweenMax.to(this.buttonIdleClip,0.5,{
            "alpha":0,
            "yoyo":true,
            "repeat":9
         });
      }
      
      private function stopBlinking() : void
      {
         TweenMax.killTweensOf(this.buttonIdleClip);
         TweenLite.to(this.buttonIdleClip,0.25,{"alpha":0});
      }
      
      private function handleMouseClick(param1:MouseEvent) : void
      {
         if(ExternalInterface.available)
         {
            ExternalInterface.call("openPayment","SPECIALOFFER",this.pattern.id);
         }
         TweenMax.delayedCall(2,this.closeBannerAd);
      }
      
      private function closeBannerAd() : void
      {
         dispatchEvent(new Event(CLOSE_BANNER_WINDOW));
      }
      
      public function overrideMouseClick(param1:Function) : void
      {
         if(this.buttonStd.hasEventListener(MouseEvent.CLICK))
         {
            this.buttonStd.removeEventListener(MouseEvent.CLICK,this.handleMouseClick);
         }
         this.callBack = param1;
         this.buttonStd.addEventListener(MouseEvent.CLICK,this.overriddenHandleMouseClick);
      }
      
      private function overriddenHandleMouseClick(param1:MouseEvent) : void
      {
         this.callBack.call();
      }
      
      public function setButtonText(param1:String) : void
      {
         var _loc3_:String = null;
         var _loc4_:TextField = null;
         var _loc2_:DisplayObject = this.bannerAdClip.getChildByName("buttonLabelWrapper");
         if(_loc2_ != null)
         {
            if((_loc2_ as MovieClip).getChildByName("label") != null)
            {
               _loc3_ = BPLocale.getText(param1);
               _loc4_ = (_loc2_ as MovieClip).getChildByName("label") as TextField;
               _loc4_.autoSize = TextFieldAutoSize.CENTER;
               _loc4_.text = _loc3_;
            }
         }
      }
      
      private function setTexts() : void
      {
         var _loc3_:Bitmap = null;
         var _loc4_:TextFormat = null;
         var _loc5_:TextField = null;
         var _loc6_:String = null;
         var _loc7_:int = 0;
         this.allTextsWrapper = this.bannerAdClip.getChildByName("allTextsWrapper");
         var _loc1_:String = this.pattern.getImageLibID(Settings.language);
         if(this.allTextsWrapper != null)
         {
            if(ResourceManager.fileCollection.isLoaded(_loc1_))
            {
               _loc3_ = ResourceManager.getImage(_loc1_) as Bitmap;
               this.contentWidth = _loc3_.width;
               this.contentHeight = _loc3_.height;
               (this.allTextsWrapper as MovieClip).addChild(_loc3_);
               (this.allTextsWrapper as MovieClip).mouseEnabled = false;
               (this.allTextsWrapper as MovieClip).mouseChildren = false;
            }
         }
         var _loc2_:DisplayObject = this.bannerAdClip.getChildByName("buttonLabelWrapper");
         if(_loc2_ != null)
         {
            if((_loc2_ as MovieClip).getChildByName("label") != null)
            {
               (_loc2_ as MovieClip).mouseEnabled = false;
               (_loc2_ as MovieClip).mouseChildren = false;
               _loc5_ = (_loc2_ as MovieClip).getChildByName("label") as TextField;
               _loc5_.embedFonts = Styles.baseEmbed;
               _loc4_ = _loc5_.defaultTextFormat;
               _loc4_.font = Styles.baseFont;
               _loc5_.antiAliasType = AntiAliasType.ADVANCED;
               _loc5_.defaultTextFormat = _loc4_;
               _loc5_.selectable = false;
               _loc6_ = BPLocale.getText("btn_label_bannerad_" + this.pattern.baseKey);
               _loc6_ = BPLocale.replaceWithFormattedPrice(this.pattern.price,Settings.currency,/%PRICE(.*?)%/,_loc6_);
               _loc5_.text = _loc6_;
               _loc7_ = _loc5_.width;
               _loc5_.multiline = false;
               _loc5_.wordWrap = false;
               _loc5_.autoSize = TextFieldAutoSize.LEFT;
               if(_loc5_.width > _loc7_)
               {
                  _loc5_.scaleX *= _loc7_ / _loc5_.width;
               }
               else
               {
                  _loc5_.x += int((_loc7_ - _loc5_.width) * 0.5);
               }
               _loc5_.mouseEnabled = false;
            }
         }
         if(this.pattern.footerKey != null)
         {
            this.setFooterText();
         }
      }
      
      private function setFooterText() : void
      {
         var _loc1_:DropShadowFilter = new DropShadowFilter(1,45,0,0.8,1,1,1,3,false,false,false);
         var _loc2_:TextFormat = new TextFormat(Styles.plainStdFmt.font,Styles.plainStdFontHeight);
         _loc2_.align = TextFormatAlign.CENTER;
         _loc2_.color = 14540253;
         _loc2_.leading = 1;
         var _loc3_:TextField = new TextField();
         _loc3_.mouseEnabled = false;
         _loc3_.selectable = false;
         _loc3_.antiAliasType = AntiAliasType.ADVANCED;
         _loc3_.width = this.contentWidth - 2 * this.footerPaddingX;
         _loc3_.height = Styles.plainStdFontHeight;
         _loc3_.embedFonts = Styles.plainStdEmbed;
         _loc3_.filters = [_loc1_];
         _loc3_.defaultTextFormat = _loc2_;
         _loc3_.autoSize = TextFieldAutoSize.CENTER;
         _loc3_.multiline = true;
         _loc3_.wordWrap = true;
         _loc3_.text = BPLocale.getText(this.pattern.footerKey);
         this.bannerAdClip.addChild(_loc3_);
         _loc3_.x = this.footerPaddingX;
         _loc3_.y = this.bannerAdClip.height - _loc3_.height;
         _loc3_.alpha = 0;
         TweenLite.to(_loc3_,0.25,{
            "alpha":1,
            "delay":2
         });
      }
      
      public function cleanup() : void
      {
         TweenMax.killTweensOf(this.bannerAdClip);
         if(this.buttonIdleClip != null)
         {
            TweenMax.killTweensOf(this.buttonIdleClip);
         }
         var _loc1_:DisplayObject = this.bannerAdClip.getChildByName("slotFlashesClip");
         if(_loc1_ != null)
         {
            TweenMax.killTweensOf(_loc1_);
         }
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   public class BarStatus
   {
      
      private var id:int;
      
      public var status:int;
      
      public function BarStatus(param1:int, param2:int)
      {
         super();
         this.id = param1;
         this.status = param2;
      }
      
      public function getID() : int
      {
         return this.id;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.menu.SuperActionButton;
   
   public class BitmapFont extends Bitmap
   {
      
      private var actionButton:SuperActionButton;
      
      private var source:BitmapData;
      
      private var rect:Rectangle;
      
      private var destinationPoint:Point;
      
      public function BitmapFont(param1:SuperActionButton)
      {
         super();
         this.actionButton = param1;
         this.init();
      }
      
      private function init() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         this.source = _loc1_.getEmbededBitmapData("bitmapFont");
         this.rect = new Rectangle();
         this.rect.width = 4;
         this.rect.height = 5;
         this.destinationPoint = new Point();
      }
      
      public function setText(param1:String) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc2_:int = 0;
         var _loc3_:Array = param1.split("");
         _loc4_ = 0;
         while(_loc4_ < _loc3_.length)
         {
            _loc5_ = int(_loc3_[_loc4_]);
            if(_loc5_ == 1)
            {
               _loc2_ += 2;
            }
            else
            {
               _loc2_ += 3;
            }
            if(_loc4_ < _loc3_.length - 1)
            {
               _loc2_ += 1;
            }
            _loc4_++;
         }
         this.bitmapData = new BitmapData(_loc2_,5,true,0);
         this.destinationPoint.x = _loc2_;
         var _loc6_:int = -1;
         _loc4_ = int(_loc3_.length - 1);
         while(_loc4_ > -1)
         {
            _loc5_ = int(_loc3_[_loc4_]);
            if(_loc6_ != -1 && _loc6_ == 1)
            {
               this.destinationPoint.x -= 3;
            }
            else
            {
               this.destinationPoint.x -= 4;
            }
            this.rect.x = _loc5_ * 4;
            bitmapData.copyPixels(this.source,this.rect,this.destinationPoint);
            _loc6_ = _loc5_;
            _loc4_--;
         }
         if(this.actionButton != null)
         {
            this.x = this.actionButton.getActionNormal().width / 2 - bitmapData.width / 2;
         }
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.ToolTipHook;
   import com.greensock.TweenLite;
   import com.greensock.easing.Linear;
   import flash.display.MovieClip;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.gui.windows.components.buff.BuffItem;
   
   public class BuffCoolDown
   {
      
      private var target:BuffItem;
      
      private var seconds:int;
      
      private var completeCallBack:Function;
      
      private var tooltip:ToolTipHook;
      
      private var tooltipKey:String;
      
      private var tween:TweenLite;
      
      private var cooldown:MovieClip;
      
      public function BuffCoolDown(param1:BuffItem, param2:int, param3:ToolTipHook, param4:String, param5:Function = null)
      {
         super();
         this.tooltip = param3;
         this.tooltipKey = param4;
         this.completeCallBack = param5;
         this.seconds = param2;
         this.target = param1;
      }
      
      public function addCoolDown() : void
      {
         this.cooldown = ResourceManager.getMovieClip("actionMenu","cooldown");
         this.cooldown.alpha = 0.6;
         this.cooldown.x = this.cooldown.y = -2;
         this.target.addChild(this.cooldown);
         this.tween = TweenLite.to(this.cooldown,this.seconds,{
            "onUpdate":this.onUpdate,
            "frame":this.cooldown.totalFrames,
            "ease":Linear.easeNone,
            "onComplete":this.onComplete
         });
      }
      
      private function onUpdate(param1:Array = null) : void
      {
         var _loc2_:String = BPLocale.getText(this.tooltipKey) + " " + (this.seconds - Math.round(this.tween.currentTime));
         this.tooltip.updateText(_loc2_);
      }
      
      private function onComplete(param1:Array = null) : void
      {
         this.tooltip.updateText(BPLocale.getText(this.tooltipKey));
         this.target.removeChild(this.cooldown);
         if(this.completeCallBack != null)
         {
            this.completeCallBack(this.target);
         }
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.menu.ActionButton;
   
   public class ButtonSlot
   {
      
      public static const logger:ILogger = Log.getLogger("ButtonSlot");
      
      protected var mc:MovieClip;
      
      private var actionButton:ActionButton;
      
      private var menuButton:MenuButton;
      
      private var resKey:String;
      
      private var keyboardIcons:MovieClip;
      
      private var guiManager:GuiManager;
      
      public function ButtonSlot(param1:String, param2:GuiManager, param3:int = -1)
      {
         super();
         this.resKey = param1;
         this.guiManager = param2;
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         this.mc = new MovieClip();
         this.mc.mouseEnabled = Main.mouseEventsEnabled;
         var _loc5_:Bitmap = _loc4_.getEmbededBitmap(param1);
         this.mc.addChild(_loc5_);
         this.mc.visible = false;
         if(param3 != -1)
         {
            this.keyboardIcons = _loc4_.getEmbededMovieClip("keyboardIcons");
            this.keyboardIcons.cacheAsBitmap = true;
            this.keyboardIcons.gotoAndStop(param3);
            this.keyboardIcons.x = _loc5_.width * 0.5 - this.keyboardIcons.width * 0.5 + 1;
            this.keyboardIcons.y = _loc5_.height - this.keyboardIcons.width + 1;
            this.mc.addChild(this.keyboardIcons);
         }
      }
      
      public function setVisibility(param1:Boolean) : void
      {
         if(this.actionButton != null)
         {
            this.actionButton.getMovieclip().visible = param1;
            if(this.guiManager.getMenuManager().getMainMenu().guiLocked)
            {
               this.mc.visible = param1;
            }
         }
      }
      
      public function addActionButton(param1:ActionButton) : void
      {
         this.actionButton = param1;
         var _loc2_:MovieClip = this.actionButton.getMovieclip();
         _loc2_.x = 0;
         _loc2_.y = 0;
         this.mc.addChild(_loc2_);
         if(this.keyboardIcons != null)
         {
            this.mc.swapChildren(_loc2_,this.keyboardIcons);
         }
         this.mc.visible = true;
         this.guiManager.getMenuManager().updateTechs();
      }
      
      public function addMenu(param1:MenuButton) : void
      {
         this.menuButton = param1;
         this.mc.addChild(param1.getMC());
         this.mc.visible = true;
      }
      
      public function removeActionButton() : void
      {
         if(this.actionButton != null)
         {
            this.mc.removeChild(this.actionButton.getMovieclip());
            this.actionButton = null;
         }
      }
      
      public function getMC() : MovieClip
      {
         return this.mc;
      }
      
      public function getActionButton() : ActionButton
      {
         return this.actionButton;
      }
      
      public function getResKey() : String
      {
         return this.resKey;
      }
      
      public function isAllocated() : Boolean
      {
         if(this.actionButton != null || this.menuButton != null)
         {
            return true;
         }
         return false;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import flash.display.Bitmap;
   import flash.display.Sprite;
   
   public class CollectableReplacementIcon extends Sprite
   {
      
      public function CollectableReplacementIcon(param1:Bitmap)
      {
         super();
         this.initIcon(param1);
      }
      
      private function initIcon(param1:Bitmap) : void
      {
         if(param1 == null)
         {
            return;
         }
         param1.x = -Math.round(param1.width * 0.5);
         param1.y = -Math.round(param1.height * 0.5);
         mouseEnabled = true;
         mouseChildren = true;
         cacheAsBitmap = true;
         addChild(param1);
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.greensock.TweenLite;
   import com.greensock.easing.Linear;
   import flash.display.MovieClip;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.menu.ActionButton;
   
   public class CoolDown
   {
      
      public static const logger:ILogger = Log.getLogger("Cooldown");
      
      private var guiManager:GuiManager;
      
      private var buttonID:int;
      
      public var frameIndex:int = 1;
      
      public function CoolDown(param1:GuiManager, param2:int, param3:Number)
      {
         super();
         this.guiManager = param1;
         this.buttonID = param2;
         var _loc4_:MovieClip = ResourceManager.getMovieClip("actionMenu","cooldown");
         TweenLite.to(this,param3,{
            "ease":Linear.easeNone,
            "frameIndex":_loc4_.framesLoaded,
            "onUpdate":this.check,
            "onComplete":this.onComplete
         });
      }
      
      public function check() : void
      {
         var _loc3_:ActionButton = null;
         var _loc1_:Array = this.guiManager.getMenuManager().getActionButtons();
         var _loc2_:int = 0;
         while(_loc2_ < _loc1_.length)
         {
            _loc3_ = _loc1_[_loc2_];
            if(_loc3_.getActionID() == this.buttonID)
            {
               _loc3_.setRocketCooldown(this.frameIndex);
            }
            _loc2_++;
         }
      }
      
      public function getButtonID() : int
      {
         return this.buttonID;
      }
      
      private function onComplete() : void
      {
         var _loc3_:ActionButton = null;
         this.guiManager.removeCooldown(this);
         var _loc1_:Array = this.guiManager.getMenuManager().getActionButtons();
         var _loc2_:int = 0;
         while(_loc2_ < _loc1_.length)
         {
            _loc3_ = _loc1_[_loc2_];
            if(_loc3_.getActionID() == this.buttonID)
            {
               _loc3_.cooldownCompleted();
            }
            _loc2_++;
         }
      }
      
      public function cleanup() : void
      {
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   public class CPUItem
   {
      
      public static const TYPE_RADAR:int = 0;
      
      public static const TYPE_JUMP:int = 1;
      
      public static const TYPE_CLOAK:int = 2;
      
      public static const TYPE_AROL:int = 3;
      
      public static const TYPE_ROBOT:int = 4;
      
      public static const TYPE_AIM:int = 5;
      
      public static const TYPE_HM7:int = 6;
      
      public static const TYPE_DRONE_REPAIR:int = 7;
      
      public static const TYPE_AMMOBUY:int = 8;
      
      public static const TYPE_RLLB:int = 9;
      
      public static const TYPE_ROCKETBUY:int = 10;
      
      public static const TYPE_ADVANCED_JUMP:int = 11;
      
      public static const TYPE_SMARTBOMB:int = 12;
      
      public static const TYPE_INSTASHIELD:int = 13;
      
      public static const TYPE_MINETURBO:int = 14;
      
      private var _type:int;
      
      public var amount:int;
      
      public var level:int = 0;
      
      public var state:Boolean;
      
      public function CPUItem(param1:int)
      {
         super();
         this._type = param1;
      }
      
      public function get type() : int
      {
         return this._type;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.TimerEvent;
   import flash.system.System;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.utils.Dictionary;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.settings.Profiler;
   
   public class FPSModule
   {
      
      private var frameTicks:int;
      
      private var timerTicks:int;
      
      private var FPS:TextField;
      
      private var format:TextFormat = new TextFormat();
      
      private var t1:Timer = new Timer(1000);
      
      private var camPos:TextField;
      
      private var socketByteCount:int = 0;
      
      private var megaByteCoefficient:Number;
      
      private var params:Dictionary = new Dictionary();
      
      private var joinedParams:String = "";
      
      public var currentFPS:Number = 0;
      
      public var averageFPS:Number = 0;
      
      public var minFPS:Number = 0;
      
      public var maxFPS:Number = 0;
      
      public var currentMem:Number = 0;
      
      public var averageMem:Number = 0;
      
      public var minMem:Number = 0;
      
      public var maxMem:Number = 0;
      
      public var view:Sprite;
      
      private var isTrackingRunning:Boolean = false;
      
      private var main:Main;
      
      public function FPSModule(param1:Main, param2:int = 0, param3:int = 0)
      {
         super();
         this.view = new Sprite();
         this.view.x = param2;
         this.view.y = param3;
         this.main = param1;
         this.createText();
         this.megaByteCoefficient = 1 / 1024 / 1024;
         this.t1.addEventListener(TimerEvent.TIMER,this.updateFPS);
         this.view.addEventListener(Event.ENTER_FRAME,this.handleEnterFrame);
         this.t1.start();
      }
      
      private function createText() : void
      {
         this.format.font = "Verdana";
         this.format.size = 9;
         this.FPS = new TextField();
         this.FPS.defaultTextFormat = this.format;
         this.FPS.autoSize = TextFieldAutoSize.LEFT;
         this.FPS.textColor = 16777215;
         this.FPS.background = true;
         this.FPS.backgroundColor = 6710886;
         this.FPS.antiAliasType = "advanced";
         this.FPS.selectable = false;
         this.FPS.text = "FPS: ";
         this.camPos = new TextField();
         this.camPos.defaultTextFormat = this.format;
         this.camPos.autoSize = TextFieldAutoSize.LEFT;
         this.camPos.textColor = 16777215;
         this.camPos.background = true;
         this.camPos.backgroundColor = 6710886;
         this.camPos.antiAliasType = "advanced";
         this.camPos.selectable = false;
         this.camPos.text = "CamPos: ";
         this.camPos.y = -15;
         this.view.addChild(this.FPS);
         this.view.addChild(this.camPos);
      }
      
      public function refreshTracking() : void
      {
         this.averageFPS = 0;
         this.minFPS = 0;
         this.maxFPS = 0;
         this.averageMem = 0;
         this.minMem = 0;
         this.maxMem = 0;
         this.timerTicks = 0;
         this.isTrackingRunning = true;
      }
      
      private function updateFPS(param1:TimerEvent) : void
      {
         if(this.isTrackingRunning)
         {
            ++this.timerTicks;
            if(this.currentFPS > this.maxFPS)
            {
               this.maxFPS = this.currentFPS;
            }
            if(this.currentFPS < this.minFPS || this.minFPS == 0)
            {
               this.minFPS = this.currentFPS;
            }
            if(this.currentMem > this.maxMem)
            {
               this.maxMem = this.currentMem;
            }
            if(this.currentMem < this.minMem || this.minMem == 0)
            {
               this.minMem = this.currentMem;
            }
            this.averageFPS = (this.averageFPS * (this.timerTicks - 1) + this.currentFPS) / this.timerTicks;
            this.averageMem = (this.averageMem * (this.timerTicks - 1) + this.currentMem) / this.timerTicks;
         }
         this.currentFPS = this.frameTicks;
         var _loc2_:Profiler = this.main.getProfiler();
         if(_loc2_ != null)
         {
            _loc2_.addFPS(this.currentFPS);
         }
         this.currentMem = Number(System.totalMemory * this.megaByteCoefficient);
         var _loc3_:* = this.currentMem.toFixed(2) + "MB";
         this.FPS.text = "FPS: " + this.currentFPS + " | MEM: " + _loc3_ + this.joinedParams;
         this.socketByteCount = 0;
         this.frameTicks = 0;
      }
      
      private function handleEnterFrame(param1:Event) : void
      {
         ++this.frameTicks;
      }
      
      public function setParam(param1:String, param2:String) : void
      {
         this.params[param1] = param2;
         this.joinParams();
      }
      
      public function unsetParam(param1:String) : void
      {
         delete this.params[param1];
         this.joinParams();
      }
      
      private function joinParams() : void
      {
         var _loc1_:String = null;
         this.joinedParams = "";
         for(_loc1_ in this.params)
         {
            this.joinedParams += " | " + _loc1_ + ": " + this.params[_loc1_];
         }
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Quad;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.filters.GlowFilter;
   import flash.geom.Matrix;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import net.bigpoint.darkorbit.Styles;
   
   public class GlobalNotification extends Sprite
   {
      
      public static const HANDLE_FADEOUT_COMPLETE:String = "handleFadeOutComplete";
      
      private static const mediumGlowFilter:GlowFilter = new GlowFilter(0,1,4,4,6,1);
      
      private var _displayTime:int;
      
      public function GlobalNotification(param1:String, param2:int, param3:int = 2)
      {
         var _loc6_:BitmapData = null;
         super();
         this._displayTime = param3;
         var _loc4_:TextField = new TextField();
         var _loc5_:TextFormat = new TextFormat(Styles.h1Fmt.font,28);
         _loc5_.align = TextFormatAlign.CENTER;
         _loc5_.color = 15327936;
         _loc4_.defaultTextFormat = _loc5_;
         _loc4_.embedFonts = Styles.h1Embed;
         _loc4_.text = param1;
         _loc4_.width = param2;
         _loc4_.wordWrap = true;
         _loc4_.filters = [mediumGlowFilter];
         _loc4_.autoSize = TextFieldAutoSize.CENTER;
         var _loc7_:int = _loc4_.width;
         _loc6_ = new BitmapData(_loc7_,_loc4_.height + 3,true,0);
         var _loc8_:Matrix = new Matrix();
         _loc6_.draw(_loc4_,_loc8_);
         addChild(new Bitmap(_loc6_));
         alpha = 0;
      }
      
      public function dispose() : void
      {
         this.removeFromParent();
      }
      
      public function removeFromParent() : void
      {
         if(parent != null && parent.contains(this))
         {
            parent.removeChild(this);
         }
      }
      
      public function moveTo(param1:int) : void
      {
         if(param1 == y)
         {
            return;
         }
         TweenLite.to(this,0.4,{
            "y":param1,
            "ease":Quad.easeOut
         });
      }
      
      private function startFadeOut() : void
      {
         TweenLite.to(this,0.3,{
            "alpha":0,
            "ease":Quad.easeOut,
            "onComplete":this.handleFadeOutComplete
         });
      }
      
      public function startFadeIn() : void
      {
         alpha = 0;
         TweenLite.to(this,0.1,{"alpha":1});
      }
      
      public function show() : void
      {
         this.startFadeIn();
         TweenMax.delayedCall(this._displayTime - 1,this.startFadeOut);
      }
      
      private function handleFadeOutComplete() : void
      {
         this.removeFromParent();
         dispatchEvent(new Event(HANDLE_FADEOUT_COMPLETE));
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import flash.display.Sprite;
   import flash.events.Event;
   
   public class GlobalNotificationView extends Sprite
   {
      
      private static const PADDING_Y:int = 6;
      
      private var messageBuffer:Array = [];
      
      private var offset:int = 16;
      
      private var _itemWidth:int;
      
      private var _displayTime:int;
      
      public function GlobalNotificationView(param1:int = 500, param2:int = 5)
      {
         super();
         this._displayTime = param2;
         this._itemWidth = param1;
      }
      
      public function addMessage(param1:String) : void
      {
         var _loc2_:GlobalNotification = new GlobalNotification(param1,this._itemWidth,this._displayTime);
         _loc2_.y = this.offset + PADDING_Y + _loc2_.height;
         _loc2_.mouseEnabled = false;
         _loc2_.mouseChildren = false;
         this.messageBuffer.push(_loc2_);
         this.update();
      }
      
      private function handleItemRemoved(param1:Event) : void
      {
         var _loc2_:GlobalNotification = GlobalNotification(param1.target);
         var _loc3_:int = int(this.messageBuffer.length - 1);
         while(_loc3_ > -1)
         {
            if(_loc2_ == GlobalNotification(this.messageBuffer[_loc3_]))
            {
               this.messageBuffer.splice(_loc3_,1);
               this.update();
               return;
            }
            _loc3_--;
         }
      }
      
      private function update() : void
      {
         var _loc1_:GlobalNotification = null;
         if(this.messageBuffer.length > 0)
         {
            _loc1_ = this.messageBuffer[0] as GlobalNotification;
            if(!contains(_loc1_))
            {
               _loc1_.addEventListener(InstantMessageItem.HANDLE_FADEOUT_COMPLETE,this.handleItemRemoved);
               addChild(_loc1_);
               _loc1_.show();
               _loc1_.moveTo(this.offset);
            }
         }
      }
      
      public function get itemWidth() : int
      {
         return this._itemWidth;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.greensock.TweenLite;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.events.MouseEvent;
   
   public class GroupActionButton extends MovieClip
   {
      
      public static const TYPE_LEAVE:uint = 1;
      
      public static const TYPE_CHANGE_INVITATION_BEHAVIOR:int = 2;
      
      public static const TYPE_PING:uint = 3;
      
      public static const TYPE_FOLLOW:uint = 4;
      
      public static const TYPE_PROMOTE:uint = 5;
      
      public static const TYPE_KICK:uint = 6;
      
      public static const TYPE_IS_LEAD:uint = 7;
      
      public static const TYPE_INVITE:uint = 8;
      
      public static const TYPE_REJECT:uint = 9;
      
      public static const TYPE_ACCEPT:uint = 10;
      
      public static const TYPE_REVOKE:uint = 11;
      
      public static const TYPE_CHANGE_INVITATION_BEHAVIOR_TO_FREE_FOR_ALL:uint = 12;
      
      public static const TYPE_CHANGE_INVITATION_BEHAVIOR_TO_BOSS_ONLY:uint = 13;
      
      public static const TYPE_BLOCK_INVITATIONS:int = 14;
      
      public static const TYPE_ALLOW_INVITATIONS:int = 15;
      
      private var _type:int;
      
      private var _stdImage:Bitmap;
      
      private var _hoverImage:Bitmap;
      
      private var _disabledImage:Bitmap;
      
      private var _state:Boolean;
      
      private var _canHover:Boolean;
      
      private var _hoveringEnabled:Boolean;
      
      private var _enabled:Boolean = true;
      
      private var _verboseTypes:Array;
      
      private var _handleClick:Function;
      
      public function GroupActionButton()
      {
         super();
         this._stdImage = new Bitmap(new BitmapData(16,16,true,2298413311));
         addChild(this._stdImage);
         this._verboseTypes = [];
         this._verboseTypes[TYPE_KICK] = "kick";
         this._verboseTypes[TYPE_PROMOTE] = "promote";
         this._verboseTypes[TYPE_CHANGE_INVITATION_BEHAVIOR_TO_FREE_FOR_ALL] = "inv_group";
         this._verboseTypes[TYPE_CHANGE_INVITATION_BEHAVIOR_TO_BOSS_ONLY] = "inv_boss";
         this._verboseTypes[TYPE_LEAVE] = "leave";
         this._verboseTypes[TYPE_FOLLOW] = "follow";
         this._verboseTypes[TYPE_PING] = "ping";
         this._verboseTypes[TYPE_REJECT] = "rejectinv";
         this._verboseTypes[TYPE_ACCEPT] = "acceptinv";
         this._verboseTypes[TYPE_REVOKE] = "revokeinv";
         this._verboseTypes[TYPE_INVITE] = "sendinv";
         this._verboseTypes[TYPE_ALLOW_INVITATIONS] = "blockinv";
         this._verboseTypes[TYPE_BLOCK_INVITATIONS] = "allowinv";
      }
      
      public function toggle(param1:Boolean) : void
      {
         if(param1)
         {
            alpha = 1;
         }
         else
         {
            alpha = 0.5;
         }
      }
      
      public function init(param1:BitmapData, param2:BitmapData = null, param3:BitmapData = null) : void
      {
         if(contains(this._stdImage))
         {
            removeChild(this._stdImage);
         }
         this._stdImage = new Bitmap(param1.clone());
         if(param2 == null)
         {
            this._hoverImage = new Bitmap(param1.clone());
         }
         else
         {
            this._canHover = true;
            this._hoverImage = new Bitmap(param2.clone());
         }
         if(param3 == null)
         {
            this._disabledImage = new Bitmap(param1.clone());
         }
         else
         {
            this._disabledImage = new Bitmap(param3.clone());
         }
         addChild(this._stdImage);
         addChild(this._hoverImage);
         this._hoverImage.visible = false;
         addChild(this._disabledImage);
         this._disabledImage.visible = false;
         if(this._canHover)
         {
            this.enableHovering();
         }
      }
      
      private function enableHovering() : void
      {
         if(!this._hoveringEnabled)
         {
            addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
            addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
            this._hoveringEnabled = true;
         }
      }
      
      private function handleMouseOut(param1:MouseEvent) : void
      {
         TweenLite.to(this._hoverImage,0.5,{
            "alpha":0,
            "onComplete":this.setInvisible,
            "onCompleteParams":[this._hoverImage]
         });
      }
      
      private function handleMouseOver(param1:MouseEvent) : void
      {
         this._hoverImage.alpha = 0;
         this._hoverImage.visible = true;
         TweenLite.to(this._hoverImage,0.5,{"alpha":1});
      }
      
      private function setInvisible(param1:DisplayObject) : void
      {
         param1.visible = false;
      }
      
      public function set handleClick(param1:Function) : void
      {
         if(this._handleClick != null)
         {
            removeEventListener(MouseEvent.CLICK,this._handleClick);
         }
         this._handleClick = param1;
         if(this._handleClick != null)
         {
            addEventListener(MouseEvent.CLICK,this._handleClick);
         }
      }
      
      public function get handleClick() : Function
      {
         return this._handleClick;
      }
      
      public function get typeVerbose() : String
      {
         return this._verboseTypes[this._type];
      }
      
      public function get type() : int
      {
         return this._type;
      }
      
      public function set type(param1:int) : void
      {
         this._type = param1;
      }
      
      public function get stdImage() : Bitmap
      {
         return this._stdImage;
      }
      
      public function set stdImage(param1:Bitmap) : void
      {
         this._stdImage = param1;
      }
      
      public function get hoverImage() : Bitmap
      {
         return this._hoverImage;
      }
      
      public function set hoverImage(param1:Bitmap) : void
      {
         this._hoverImage = param1;
      }
      
      public function get disabledImage() : Bitmap
      {
         return this._disabledImage;
      }
      
      public function set disabledImage(param1:Bitmap) : void
      {
         this._disabledImage = param1;
      }
      
      public function get state() : Boolean
      {
         return this._state;
      }
      
      public function set state(param1:Boolean) : void
      {
         this._state = param1;
      }
      
      override public function get enabled() : Boolean
      {
         return this._enabled;
      }
      
      override public function set enabled(param1:Boolean) : void
      {
         this._enabled = param1;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import flash.display.MovieClip;
   import net.bigpoint.darkorbit.groupsystem.Group;
   
   public class GroupManagementUI extends MovieClip
   {
      
      private var _group:Group;
      
      private var _uiButtons:Array = [];
      
      private var _buttonConfig:Array = [];
      
      private var _groupUi:GroupUI;
      
      private var _heroIsBoss:Boolean;
      
      private var _editMode:Boolean;
      
      private var _editType:uint;
      
      private var _invitionsBehaviour:int;
      
      public function GroupManagementUI(param1:GroupUI)
      {
         super();
         this._groupUi = param1;
         this.initConfig();
      }
      
      private function initConfig() : void
      {
         this._buttonConfig[GroupActionButton.TYPE_PING] = new MgmtBtnConfig(this._groupUi.handlePingBtnToggle,"label_grp_context_item_ping");
         this._buttonConfig[GroupActionButton.TYPE_KICK] = new MgmtBtnConfig(this._groupUi.handleKickBtnToggle,"label_grp_kick_member");
         this._buttonConfig[GroupActionButton.TYPE_LEAVE] = new MgmtBtnConfig(this._groupUi.handleLeaveBtnClick,"label_grp_leave_group_leaver");
         this._buttonConfig[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR] = new MgmtBtnConfig(this._groupUi.handleChangeInvitationBehaviorBtnClick,"label_grp_change_invitation_behavior");
         this._buttonConfig[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_FREE_FOR_ALL] = new MgmtBtnConfig(this._groupUi.handleChangeInvitationBehaviorBtnClick,"label_grp_change_invitation_behavior");
         this._buttonConfig[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_BOSS_ONLY] = new MgmtBtnConfig(this._groupUi.handleChangeInvitationBehaviorBtnClick,"label_grp_change_invitation_behavior");
         this._buttonConfig[GroupActionButton.TYPE_PROMOTE] = new MgmtBtnConfig(this._groupUi.handlePromoteBtnToggle,"label_grp_leader_change");
         this._buttonConfig[GroupActionButton.TYPE_FOLLOW] = new MgmtBtnConfig(this._groupUi.handleFollowBtnToggle,"label_grp_context_item_follow");
      }
      
      public function editMode(param1:Boolean, param2:uint) : void
      {
         if(this._editType == param2)
         {
            this.getBarButton(this._editType).toggle(param1);
            this._editMode = param1;
         }
         else
         {
            if(this._editType != 0)
            {
               this.getBarButton(this._editType).toggle(false);
            }
            this._editMode = true;
            this._editType = param2;
            this.getBarButton(this._editType).toggle(true);
         }
         this._groupUi.updateEditMode(this._editMode,this._editType);
      }
      
      public function update(param1:Boolean = false) : void
      {
         var _loc5_:GroupActionButton = null;
         var _loc2_:Array = [];
         if(this._group != null && this._group.heroIsBoss)
         {
            _loc2_ = this.getAllBarButtons();
            this._heroIsBoss = true;
         }
         else
         {
            if(this._heroIsBoss = true)
            {
               this.hideAllBarButtons();
            }
            this._heroIsBoss = false;
            _loc2_ = this.getStandardBarButtons();
         }
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         while(_loc4_ < _loc2_.length)
         {
            if(!(_loc2_[_loc4_] == undefined || _loc2_[_loc4_] == null))
            {
               _loc5_ = GroupActionButton(_loc2_[_loc4_]);
               if(!contains(_loc5_))
               {
                  addChild(_loc5_);
               }
               if(param1)
               {
                  _loc5_.handleClick = MgmtBtnConfig(this._buttonConfig[_loc5_.type]).action;
               }
               else
               {
                  _loc5_.handleClick = null;
               }
               _loc5_.x = _loc3_;
               _loc3_ += _loc5_.width + 5;
            }
            _loc4_++;
         }
      }
      
      private function hideAllBarButtons() : void
      {
         var _loc1_:GroupActionButton = null;
         for each(_loc1_ in this._uiButtons)
         {
            if(contains(_loc1_))
            {
               removeChild(_loc1_);
            }
         }
      }
      
      private function getStandardBarButtons() : Array
      {
         var _loc1_:Array = [];
         _loc1_[GroupActionButton.TYPE_PING] = this.getBarButton(GroupActionButton.TYPE_PING);
         _loc1_[GroupActionButton.TYPE_LEAVE] = this.getBarButton(GroupActionButton.TYPE_LEAVE);
         _loc1_[GroupActionButton.TYPE_FOLLOW] = this.getBarButton(GroupActionButton.TYPE_FOLLOW);
         return _loc1_;
      }
      
      private function getAllBarButtons() : Array
      {
         var _loc1_:Array = [];
         _loc1_[GroupActionButton.TYPE_FOLLOW] = this.getBarButton(GroupActionButton.TYPE_FOLLOW);
         _loc1_[GroupActionButton.TYPE_PING] = this.getBarButton(GroupActionButton.TYPE_PING);
         _loc1_[GroupActionButton.TYPE_KICK] = this.getBarButton(GroupActionButton.TYPE_KICK);
         _loc1_[GroupActionButton.TYPE_LEAVE] = this.getBarButton(GroupActionButton.TYPE_LEAVE);
         _loc1_[GroupActionButton.TYPE_PROMOTE] = this.getBarButton(GroupActionButton.TYPE_PROMOTE);
         _loc1_[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR] = this.getChangeInvitationBehaviourButton();
         return _loc1_;
      }
      
      private function getChangeInvitationBehaviourButton() : GroupActionButton
      {
         var _loc1_:GroupActionButton = null;
         var _loc2_:String = null;
         if(this._group != null && this._group.invitationBehavior == Group.INVITATION_BEHAVIOR_FREE_FOR_ALL)
         {
            if(this._invitionsBehaviour != Group.INVITATION_BEHAVIOR_FREE_FOR_ALL && this._uiButtons[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_BOSS_ONLY] != null)
            {
               TooltipControl.getInstance().removeToolTip(this._uiButtons[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_BOSS_ONLY]);
               GroupActionButton(this._uiButtons[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_BOSS_ONLY]).handleClick = null;
               if(contains(this._uiButtons[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_BOSS_ONLY]))
               {
                  removeChild(this._uiButtons[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_BOSS_ONLY]);
               }
            }
            this._invitionsBehaviour = Group.INVITATION_BEHAVIOR_FREE_FOR_ALL;
            _loc1_ = this.getBarButton(GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_FREE_FOR_ALL);
            _loc2_ = "label_grp_invitation_behavior_free_for_all";
         }
         else
         {
            if(this._invitionsBehaviour != Group.INVITATION_BEHAVIOR_BOSS_ONLY && this._uiButtons[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_FREE_FOR_ALL] != null)
            {
               TooltipControl.getInstance().removeToolTip(this._uiButtons[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_FREE_FOR_ALL]);
               GroupActionButton(this._uiButtons[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_FREE_FOR_ALL]).handleClick = null;
               if(contains(this._uiButtons[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_FREE_FOR_ALL]))
               {
                  removeChild(this._uiButtons[GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_FREE_FOR_ALL]);
               }
            }
            this._invitionsBehaviour = Group.INVITATION_BEHAVIOR_BOSS_ONLY;
            _loc1_ = this.getBarButton(GroupActionButton.TYPE_CHANGE_INVITATION_BEHAVIOR_TO_BOSS_ONLY);
            _loc2_ = "label_grp_invitation_behavior_boss_only";
         }
         TooltipControl.getInstance().removeToolTip(_loc1_);
         TooltipControl.getInstance().addToolTip(_loc1_,BPLocale.getText("label_grp_change_invitation_behavior") + "\n" + BPLocale.getText(_loc2_));
         return _loc1_;
      }
      
      private function getBarButton(param1:int) : GroupActionButton
      {
         var _loc2_:GroupActionButton = this._uiButtons[param1];
         if(_loc2_ == null)
         {
            _loc2_ = this._groupUi.createGroupActionButton(param1);
            this._uiButtons[param1] = _loc2_;
            TooltipControl.getInstance().addToolTip(this._uiButtons[param1],BPLocale.getText(MgmtBtnConfig(this._buttonConfig[param1]).tooltipKey));
            if(param1 == GroupActionButton.TYPE_PING || param1 == GroupActionButton.TYPE_FOLLOW || param1 == GroupActionButton.TYPE_KICK || param1 == GroupActionButton.TYPE_PROMOTE)
            {
               _loc2_.toggle(false);
            }
         }
         return _loc2_;
      }
      
      public function get group() : Group
      {
         return this._group;
      }
      
      public function set group(param1:Group) : void
      {
         this._group = param1;
      }
      
      public function getPingButton() : GroupActionButton
      {
         return this._uiButtons[GroupActionButton.TYPE_PING];
      }
      
      public function getLeaveButton() : GroupActionButton
      {
         return this._uiButtons[GroupActionButton.TYPE_LEAVE];
      }
      
      public function getKickButton() : GroupActionButton
      {
         return this._uiButtons[GroupActionButton.TYPE_KICK];
      }
      
      public function getFollowButton() : GroupActionButton
      {
         return this._uiButtons[GroupActionButton.TYPE_FOLLOW];
      }
      
      public function getPromoteButton() : GroupActionButton
      {
         return this._uiButtons[GroupActionButton.TYPE_PROMOTE];
      }
      
      public function get groupUi() : GroupUI
      {
         return this._groupUi;
      }
      
      public function set groupUi(param1:GroupUI) : void
      {
         this._groupUi = param1;
      }
      
      public function get heroIsBoss() : Boolean
      {
         return this._heroIsBoss;
      }
      
      public function set heroIsBoss(param1:Boolean) : void
      {
         this._heroIsBoss = param1;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.ToolTipHook;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.InGameCatalog;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.groupsystem.GroupMember;
   
   public class GroupMemberClip extends MovieClip
   {
      
      private static const logger:ILogger = Log.getLogger("GroupMemberClip");
      
      private var _member:GroupMember;
      
      private var _nickLabel:TextField;
      
      private var _nickName:String;
      
      private var _clanTag:String;
      
      private var _hpBar:MemberLiveBar;
      
      private var _shipType:int;
      
      private var _shipClip:ShipIcon;
      
      private var _shieldBar:MemberLiveBar;
      
      private var _mapID:int;
      
      private var _mapLabel:TextField;
      
      private var _cloakedState:Boolean;
      
      private var _isOffline:Boolean;
      
      private var _groupUi:GroupUI;
      
      private var _targetID:int;
      
      private var _targetObjectExists:Boolean;
      
      private var _targetClip:ShipIcon;
      
      private var _targetIconBG:Bitmap;
      
      private var _elementOffsetY:int = 0;
      
      private var _reservedHeight:int = 0;
      
      private var _leadIcon:Bitmap;
      
      private var _isLead:Boolean;
      
      private var _stdFormat:TextFormat;
      
      private var _foggyFormat:TextFormat;
      
      private var _inFight:Boolean;
      
      private var _shieldTooltip:ToolTipHook;
      
      private var _hpTooltip:ToolTipHook;
      
      private var _bg:Sprite;
      
      private var _fullClip:Sprite;
      
      private var _editingEnabled:Boolean;
      
      private var _targetingMemberEnabled:Boolean;
      
      private var _tooltipHitpointsBaseLabel:String;
      
      private var _tooltipShieldBaseLabel:String;
      
      public function GroupMemberClip()
      {
         super();
         this._bg = new Sprite();
         this._bg.addChild(new Bitmap(new BitmapData(216,40,true,0)));
         addChildAt(this._bg,0);
         this._mapLabel = new TextField();
         this._mapLabel.width = 24;
         this._mapLabel.y = 4;
         addChildAt(this._mapLabel,1);
         this._nickLabel = new TextField();
         this._nickLabel.x = 24;
         addChildAt(this._nickLabel,1);
         this._fullClip = new Sprite();
         this._fullClip.addChild(new Bitmap(new BitmapData(216,40,true,2298468096)));
         this.initStyles();
         this._elementOffsetY += Styles.simpleFontHeight + 6;
         this._reservedHeight = (Styles.simpleFontHeight + 10) * 2;
         this._tooltipHitpointsBaseLabel = BPLocale.getText("label_grp_hitpoints");
         this._tooltipShieldBaseLabel = BPLocale.getText("label_grp_shield");
      }
      
      public function disableEditing() : void
      {
         if(!this._editingEnabled)
         {
            return;
         }
         if(contains(this._fullClip))
         {
            removeChild(this._fullClip);
         }
         this._fullClip.removeEventListener(MouseEvent.CLICK,this.memberClickHandler);
         this._fullClip.removeEventListener(MouseEvent.MOUSE_OVER,this.memberRollOverHandler);
         this._fullClip.removeEventListener(MouseEvent.MOUSE_OUT,this.memberRollOutHandler);
         this._editingEnabled = false;
      }
      
      public function enableEditing() : void
      {
         if(this._editingEnabled)
         {
            return;
         }
         if(!contains(this._fullClip))
         {
            addChild(this._fullClip);
            this._fullClip.alpha = 0;
         }
         this._fullClip.addEventListener(MouseEvent.CLICK,this.memberClickHandler);
         this._fullClip.addEventListener(MouseEvent.MOUSE_OVER,this.memberRollOverHandler);
         this._fullClip.addEventListener(MouseEvent.MOUSE_OUT,this.memberRollOutHandler);
         this._editingEnabled = true;
      }
      
      public function dispose() : void
      {
      }
      
      private function initStyles() : void
      {
         this._stdFormat = new TextFormat(Styles.simpleFmt.font,Styles.simpleFontHeight);
         this._stdFormat.color = 16777215;
         this._foggyFormat = new TextFormat(Styles.simpleFmt.font,Styles.simpleFontHeight);
         this._foggyFormat.color = 10066329;
         this.setStyle(this._nickLabel,this._stdFormat,Styles.simpleEmbed);
         var _loc1_:TextFormat = new TextFormat(Styles.infoFieldFmt.font,Styles.infoFieldFontHeight);
         _loc1_.color = 10066329;
         _loc1_.align = TextFormatAlign.CENTER;
         this._mapLabel.height = Styles.infoFieldFontHeight + 6;
         this._mapLabel.embedFonts = Styles.infoFieldEmbed;
         this._mapLabel.defaultTextFormat = _loc1_;
         this._mapLabel.antiAliasType = AntiAliasType.ADVANCED;
         this._mapLabel.mouseEnabled = false;
         this._mapLabel.selectable = false;
      }
      
      private function setStyle(param1:TextField, param2:TextFormat, param3:Boolean) : void
      {
         param1.height = int(param2.size) + 6;
         param1.embedFonts = param3;
         param1.defaultTextFormat = param2;
         param1.antiAliasType = AntiAliasType.ADVANCED;
         param1.selectable = false;
      }
      
      private function disableTargetingTarget() : void
      {
      }
      
      private function enableTargetingTarget() : void
      {
      }
      
      public function update() : void
      {
         this.updateShip();
         this.updateNickLabel();
         this.updateMap();
         this.updateTarget();
         this.updateShield();
         this.updateHitpoints();
         this.updateLead();
      }
      
      private function updateShip() : void
      {
         var _loc1_:Boolean = false;
         var _loc2_:Boolean = false;
         if(this._isOffline != this._member.isOffline)
         {
            this._isOffline = this._member.isOffline;
            _loc1_ = true;
            _loc2_ = true;
         }
         if(this._shipType != this._member.shipType)
         {
            this._shipType = this._member.shipType;
            _loc1_ = true;
            _loc2_ = true;
         }
         if(this._cloakedState != this._member.isCloaked)
         {
            this._cloakedState = this._member.isCloaked;
            _loc1_ = true;
         }
         if(this._inFight != this._member.fightState)
         {
            this._inFight = this._member.fightState;
            _loc1_ = true;
         }
         if(_loc1_)
         {
            this.getShipClip(_loc2_).cloaked = this._cloakedState;
            this.getShipClip().inFight = this._inFight;
         }
      }
      
      private function getShipClip(param1:Boolean = false) : ShipIcon
      {
         if(param1 && this._shipClip != null)
         {
            removeChild(this._shipClip);
            this._shipClip = null;
         }
         if(this._shipClip == null)
         {
            if(this._isOffline)
            {
               this._shipClip = new ShipIcon();
               this._shipClip.isOffline = this._member.isOffline;
               this._shipClip.baseGraphic = this._groupUi.getUiBitmap("disconnect_icon.png");
            }
            else
            {
               this._shipClip = this._groupUi.getShipIcon(this._member.shipType);
               this._shipClip.isOffline = this._member.isOffline;
            }
            this._shipClip.x = 4;
            this._shipClip.y = Styles.simpleFontHeight + 8;
            addChildAt(this._shipClip,1);
         }
         return this._shipClip;
      }
      
      private function updateTarget() : void
      {
         if(this._targetID != this._member.targetID)
         {
            this._targetID = this._member.targetID;
            if(this._targetID == 0 || this._targetID == -1)
            {
               if(this._targetClip != null && contains(this._targetClip))
               {
                  removeChild(this._targetClip);
               }
               this.disableTargetingTarget();
               this._targetClip = null;
               this._targetObjectExists = false;
            }
            else if(this._member.targetObject != null)
            {
               this._targetObjectExists = true;
               if(this._targetClip != null && contains(this._targetClip))
               {
                  removeChild(this._targetClip);
               }
               this._targetClip = this._groupUi.getShipIcon(this._member.targetObject.shipPatternID);
               addChildAt(this._targetClip,1);
               this._targetClip.x = this._targetIconBG.x;
               this._targetClip.y = this._targetIconBG.y;
               this.enableTargetingTarget();
            }
            else
            {
               if(this._targetClip != null && contains(this._targetClip))
               {
                  removeChild(this._targetClip);
               }
               this._targetClip = this._groupUi.getShipIcon(0);
               addChildAt(this._targetClip,1);
               this._targetClip.x = this._targetIconBG.x;
               this._targetClip.y = this._targetIconBG.y;
               this._targetObjectExists = false;
               this.disableTargetingTarget();
            }
         }
         else if(!this._targetObjectExists)
         {
            logger.fatal("->> todo updateTarget handle no target maybe redraw target, enable in case it");
         }
      }
      
      private function updateMap() : void
      {
         if(this._mapID != this._member.mapID)
         {
            this._mapID = this._member.mapID;
            this._mapLabel.text = InGameCatalog.instance.mapNames[this._mapID];
         }
         if(this._groupUi != null && this._mapID == this._groupUi.heroMap && !this._isOffline)
         {
            this._mapLabel.visible = false;
            this.getShipClip().foggy = false;
            this._nickLabel.defaultTextFormat = this._stdFormat;
            this.enableTargetingMember();
         }
         else
         {
            this._mapLabel.visible = true;
            this.getShipClip().foggy = true;
            this._nickLabel.defaultTextFormat = this._foggyFormat;
            this.disableTargetingMember();
         }
         this._nickLabel.setTextFormat(this._nickLabel.defaultTextFormat);
      }
      
      private function updateHitpoints() : void
      {
         if(this._member.hitPointsMax > 0 && !this._isOffline)
         {
            this._hpBar.liveValue = this._member.hitPointsCurrent / this._member.hitPointsMax;
         }
         else
         {
            this._hpBar.liveValue = 0;
         }
         this._hpTooltip.updateText(this._tooltipHitpointsBaseLabel + "\n" + BPLocale.roundInteger(this._member.hitPointsCurrent) + "|" + BPLocale.roundInteger(this._member.hitPointsMax));
      }
      
      private function updateShield() : void
      {
         if(this._member.shieldMax > 0 && !this._isOffline)
         {
            this._shieldBar.liveValue = this._member.shieldCurrent / this._member.shieldMax;
         }
         else
         {
            this._shieldBar.liveValue = 0;
         }
         this._shieldTooltip.updateText(this._tooltipShieldBaseLabel + "\n" + BPLocale.roundInteger(this._member.shieldCurrent) + "|" + BPLocale.roundInteger(this._member.shieldMax));
      }
      
      private function updateNickLabel() : void
      {
         this._nickLabel.mouseEnabled = true;
         if(this._clanTag != this._member.clanTag || this._nickName != this._member.nickName)
         {
            this._clanTag = this._member.clanTag;
            this._nickName = this._member.nickName;
            this._nickLabel.appendText(this._nickName);
         }
      }
      
      public function set groupUi(param1:GroupUI) : void
      {
         this._groupUi = param1;
         this.initMainGraphics();
      }
      
      private function initMainGraphics() : void
      {
         if(this._hpBar == null)
         {
            this._hpBar = new MemberLiveBar();
            this._hpBar.base = this._groupUi.getUiBitmap("empty_bar.png");
            this._hpBar.lightClip = this._groupUi.getUiBitmap("hp_bar.png");
            this._hpBar.x = this._nickLabel.x;
            this._hpBar.y = Styles.simpleFontHeight + 10;
            this._hpTooltip = TooltipControl.getInstance().addToolTip(this._hpBar,this._tooltipHitpointsBaseLabel);
            addChildAt(this._hpBar,1);
            this._shieldBar = new MemberLiveBar();
            this._shieldBar.base = this._groupUi.getUiBitmap("empty_bar.png");
            this._shieldBar.lightClip = this._groupUi.getUiBitmap("shield_bar.png");
            this._shieldBar.x = this._nickLabel.x;
            this._shieldBar.y = this._hpBar.y + 8;
            this._shieldTooltip = TooltipControl.getInstance().addToolTip(this._shieldBar,this._tooltipShieldBaseLabel);
            addChildAt(this._shieldBar,1);
            this._targetIconBG = this._groupUi.getUiBitmap("iconShipNull");
            addChildAt(this._targetIconBG,1);
            this._targetIconBG.x = this._nickLabel.x + 68;
            this._targetIconBG.y = Styles.simpleFontHeight + 8;
         }
      }
      
      public function cleanup() : void
      {
         this.disableTargetingMember();
         this.disableTargetingTarget();
      }
      
      private function enableTargetingMember() : void
      {
         if(this._targetingMemberEnabled)
         {
            return;
         }
         this._targetingMemberEnabled = true;
         this._nickLabel.mouseEnabled = this._targetingMemberEnabled;
         this._nickLabel.addEventListener(MouseEvent.CLICK,this.takeOverMemberClickHandler);
         this.getShipClip().addEventListener(MouseEvent.CLICK,this.takeOverMemberClickHandler);
      }
      
      private function disableTargetingMember() : void
      {
         if(!this._targetingMemberEnabled)
         {
            return;
         }
         this._targetingMemberEnabled = false;
         this._nickLabel.mouseEnabled = this._targetingMemberEnabled;
         this._nickLabel.removeEventListener(MouseEvent.CLICK,this.takeOverMemberClickHandler);
         this.getShipClip().removeEventListener(MouseEvent.CLICK,this.takeOverMemberClickHandler);
      }
      
      public function get reservedHeight() : int
      {
         return this._reservedHeight;
      }
      
      public function get isLead() : Boolean
      {
         return this._member.isLead;
      }
      
      private function updateLead() : void
      {
         if(this._isLead != this._member.isLead)
         {
            this._isLead = this._member.isLead;
            if(!this._isLead)
            {
               if(this._leadIcon != null && contains(this._leadIcon))
               {
                  removeChild(this._leadIcon);
               }
            }
            else
            {
               if(this._leadIcon == null)
               {
                  this._leadIcon = this._groupUi.getUiBitmap("boss_icon.png");
                  this._leadIcon.x = this._targetIconBG.x + this._targetIconBG.width + 4;
                  this._leadIcon.y = Styles.simpleFontHeight + 10;
               }
               if(!contains(this._leadIcon))
               {
                  addChildAt(this._leadIcon,1);
               }
            }
         }
      }
      
      public function get member() : GroupMember
      {
         return this._member;
      }
      
      public function set member(param1:GroupMember) : void
      {
         this._member = param1;
      }
      
      private function memberRollOutHandler(param1:MouseEvent = null) : void
      {
         TweenLite.to(this._fullClip,0.5,{"alpha":0});
      }
      
      private function memberRollOverHandler(param1:MouseEvent = null) : void
      {
         this._fullClip.alpha = 0;
         TweenLite.to(this._fullClip,0.5,{"alpha":1});
      }
      
      private function memberClickHandler(param1:MouseEvent = null) : void
      {
         this._groupUi.editMember(this._member);
      }
      
      private function takeOverMemberClickHandler(param1:MouseEvent = null) : void
      {
         if(this._groupUi != null)
         {
            this._groupUi.takeOverMemberTarget(this._member.id);
         }
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import flash.events.Event;
   import flash.events.FocusEvent;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.text.TextField;
   import flash.text.TextFieldType;
   import flash.text.TextFormat;
   import flash.ui.Keyboard;
   import flash.utils.Dictionary;
   import mx.utils.StringUtil;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.groupsystem.Group;
   import net.bigpoint.darkorbit.groupsystem.GroupMember;
   import net.bigpoint.darkorbit.groupsystem.Invitation;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.ClientCommands;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.ShipPattern;
   
   public class GroupUI extends SimpleContainer
   {
      
      public static const MAX_INVITATION_COUNT:int = 4;
      
      public static const ELEMENT_START_Y:int = 0;
      
      public static const MAX_MEMBERS_COUNT:int = 5;
      
      private var main:Main;
      
      private var _group:Group;
      
      private var _inputFieldFormat:TextFormat = new TextFormat("_sans",12,8947848);
      
      private var _inviteButton:GroupActionButton;
      
      private var _candidateInputField:TextField;
      
      private var _membersUIList:MovieClip;
      
      private var _membersUIReferences:Object;
      
      private var _isInPingMode:Boolean;
      
      private var _managementUI:GroupManagementUI;
      
      private var _invitations:Array;
      
      private var _sentInvitations:Object;
      
      private var _receivedInvitations:Object;
      
      private var _invitationLines:Array;
      
      private var _elementOffsetY:int;
      
      private var _totalHeight:int;
      
      private var _invitationsBlocked:Boolean;
      
      private var _changeBlockInviationsButton:GroupActionButton;
      
      private var _disposed:Boolean;
      
      private var _acceptButtonReferences:Dictionary;
      
      private var _rejectButtonReferences:Dictionary;
      
      private var _revokeButtonReferences:Dictionary;
      
      private var _uiLibFinisher:SWFFinisher;
      
      private var _inFollowMode:Boolean;
      
      private var _inPromoteMode:Boolean;
      
      private var _inKickMode:Boolean;
      
      private var _isCandidateInputNewlyFocussed:Boolean;
      
      private var _parentWindow:SimpleWindow;
      
      private var shipIcons:Array;
      
      public function GroupUI(param1:Main)
      {
         super(param1.getGuiManager(),SimpleContainer.CLASS_GROUP_SYSTEM);
         this.main = param1;
         this._uiLibFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.initInvitationUI();
         this._invitations = [];
         this._invitationLines = [];
         this._sentInvitations = [];
         this._receivedInvitations = [];
         this._acceptButtonReferences = new Dictionary();
         this._rejectButtonReferences = new Dictionary();
         this._revokeButtonReferences = new Dictionary();
         this.update();
         this.initShipIconsMap();
      }
      
      private function initShipIconsMap() : void
      {
         var _loc2_:ShipPattern = null;
         this.shipIcons = [];
         var _loc1_:Array = PatternManager.shipPatterns;
         for each(_loc2_ in _loc1_)
         {
            this.shipIcons[_loc2_.getPatternID()] = _loc2_.iconClassID;
         }
      }
      
      private function initInvitationUI() : void
      {
         this._candidateInputField = new TextField();
         this._candidateInputField.x = 0;
         this._candidateInputField.y = 4;
         this._candidateInputField.height = int(this._inputFieldFormat.size) + 6;
         this._candidateInputField.width = 128;
         this._candidateInputField.defaultTextFormat = this._inputFieldFormat;
         this._candidateInputField.border = true;
         this._candidateInputField.borderColor = 8947848;
         this._candidateInputField.backgroundColor = 1155390941;
         this._candidateInputField.multiline = false;
         this._candidateInputField.type = TextFieldType.INPUT;
         this._candidateInputField.addEventListener(KeyboardEvent.KEY_DOWN,this.handleKeyDown);
         this._candidateInputField.addEventListener(MouseEvent.CLICK,this.handleMouseClickOnInput);
         this._candidateInputField.addEventListener(FocusEvent.FOCUS_IN,this.handleFocusIn);
         addChild(this._candidateInputField);
         this._inviteButton = this.createGroupActionButton(GroupActionButton.TYPE_INVITE);
         this._inviteButton.addEventListener(MouseEvent.CLICK,this.handleInviteBtnClick);
         this._inviteButton.x = this._candidateInputField.width + 4;
         addChild(this._inviteButton);
         TooltipControl.getInstance().addToolTip(this._inviteButton,BPLocale.getText("label_invite"));
         this.getChangeBlockInviationsButton();
      }
      
      private function handleFocusIn(param1:FocusEvent) : void
      {
         if(param1.target == this._candidateInputField)
         {
            this._isCandidateInputNewlyFocussed = true;
         }
         else
         {
            this._isCandidateInputNewlyFocussed = false;
         }
      }
      
      private function handleMouseClickOnInput(param1:Event) : void
      {
         if(param1.target == this._candidateInputField && this._isCandidateInputNewlyFocussed)
         {
            this._candidateInputField.setSelection(0,this._candidateInputField.text.length);
            this._isCandidateInputNewlyFocussed = false;
         }
      }
      
      public function isGroupMember(param1:int) : Boolean
      {
         return this._membersUIReferences[param1] != null;
      }
      
      public function changeBlockInvitationsState(param1:Boolean) : void
      {
         if(this._invitationsBlocked != param1 || this._disposed)
         {
            this._invitationsBlocked = param1;
            this.getChangeBlockInviationsButton();
            if(this._disposed)
            {
               this.update();
            }
         }
      }
      
      private function handleKeyDown(param1:KeyboardEvent = null) : void
      {
         var _loc2_:int = int(param1.keyCode);
         switch(_loc2_)
         {
            case Keyboard.ENTER:
               this.parseInputAndInvite();
         }
      }
      
      public function editMember(param1:GroupMember) : void
      {
         if(this._inKickMode)
         {
            this.main.getConnectionManager().sendCommand(ClientCommands.GROUPSYSTEM,[ClientCommands.GROUPSYSTEM_KICK,param1.id]);
            this.handleKickBtnToggle();
         }
         else if(this._isInPingMode)
         {
            this.main.getConnectionManager().sendCommand(ClientCommands.GROUPSYSTEM,[ClientCommands.GROUPSYSTEM_PING,ClientCommands.GROUPSYSTEM_PING_USER,param1.id]);
            this.handlePingBtnToggle();
         }
         else if(this._inFollowMode)
         {
            this.main.getConnectionManager().sendCommand(ClientCommands.GROUPSYSTEM,[ClientCommands.GROUPSYSTEM_FOLLOW,param1.id]);
            this.handleFollowBtnToggle();
         }
         else if(this._inPromoteMode)
         {
            this.main.getConnectionManager().sendCommand(ClientCommands.GROUPSYSTEM,[ClientCommands.GROUPSYSTEM_PROMOTE,param1.id]);
            this.handlePromoteBtnToggle();
         }
      }
      
      public function dispose() : void
      {
         var _loc1_:GroupMemberClip = null;
         var _loc2_:Invitation = null;
         var _loc3_:MovieClip = null;
         for each(_loc1_ in this._membersUIReferences)
         {
            this.removeMemberClip(_loc1_.member.id);
         }
         this._group = null;
         for each(_loc2_ in this._sentInvitations)
         {
            this.removeInvitation(_loc2_.getCandidate().id,InvitationClip.TYPE_OUTGOING);
         }
         for each(_loc2_ in this._receivedInvitations)
         {
            this.removeInvitation(_loc2_.getInviter().id,InvitationClip.TYPE_INCOMING);
         }
         this.updateManagementUI(false);
         this.invalidateInvitationUI(false);
         _loc3_ = this.main.getGuiManager().getGlobalchat();
         if(_loc3_ != null)
         {
            _loc3_.leaveGroupRoom();
         }
         this._disposed = true;
      }
      
      public function getUiBitmap(param1:String) : Bitmap
      {
         return this._uiLibFinisher.getEmbededBitmap(param1);
      }
      
      public function get heroMap() : int
      {
         return this.main.screenManager.map.getMapID();
      }
      
      public function updateEditMode(param1:Boolean, param2:uint) : void
      {
         if(param1)
         {
            this.enableMemberEditing();
         }
         else
         {
            this.disableMemberEditing();
         }
      }
      
      private function enableMemberEditing() : void
      {
         var _loc3_:GroupMember = null;
         var _loc4_:GroupMemberClip = null;
         if(!this.isInGroup())
         {
            return;
         }
         var _loc1_:Array = this._group.members;
         var _loc2_:int = 0;
         while(_loc2_ < _loc1_.length)
         {
            _loc3_ = GroupMember(_loc1_[_loc2_]);
            if(_loc3_.id != Hero.userID)
            {
               _loc4_ = this.getGroupMemberClip(_loc3_);
               _loc4_.enableEditing();
            }
            _loc2_++;
         }
      }
      
      private function disableMemberEditing() : void
      {
         var _loc3_:GroupMember = null;
         var _loc4_:GroupMemberClip = null;
         if(!this.isInGroup())
         {
            return;
         }
         this.getMembersListClip();
         var _loc1_:Array = this._group.members;
         var _loc2_:int = 0;
         while(_loc2_ < _loc1_.length)
         {
            _loc3_ = GroupMember(_loc1_[_loc2_]);
            if(_loc3_.id != Hero.userID)
            {
               _loc4_ = this.getGroupMemberClip(_loc3_);
               _loc4_.disableEditing();
            }
            _loc2_++;
         }
      }
      
      public function handlePingBtnToggle(param1:MouseEvent = null) : void
      {
         this._isInPingMode = !this._isInPingMode;
         this._managementUI.editMode(this._isInPingMode,GroupActionButton.TYPE_PING);
      }
      
      public function handleKickBtnToggle(param1:MouseEvent = null) : void
      {
         this._inKickMode = !this._inKickMode;
         this._managementUI.editMode(this._inKickMode,GroupActionButton.TYPE_KICK);
      }
      
      public function handleLeaveBtnClick(param1:MouseEvent = null) : void
      {
         this.main.getConnectionManager().sendCommand(ServerCommands.GROUPSYSTEM,[ClientCommands.GROUPSYSTEM_LEAVE]);
      }
      
      public function handleChangeBlockInvitationsBtnClick(param1:MouseEvent = null) : void
      {
         this.main.getConnectionManager().sendCommand(ServerCommands.GROUPSYSTEM,[ClientCommands.GROUPSYSTEM_BLOCK_INVITATIONS]);
      }
      
      public function handleChangeInvitationBehaviorBtnClick(param1:MouseEvent) : void
      {
         var _loc2_:int = Group.INVITATION_BEHAVIOR_BOSS_ONLY;
         if(this._group.invitationBehavior == Group.INVITATION_BEHAVIOR_BOSS_ONLY)
         {
            _loc2_ = Group.INVITATION_BEHAVIOR_FREE_FOR_ALL;
         }
         this.main.getConnectionManager().sendCommand(ServerCommands.GROUPSYSTEM,[ClientCommands.GROUPSYSTEM_SET_REMOTE,ClientCommands.GROUPSYSTEM_CHANGE_INVITATON_BEHAVIOUR,_loc2_]);
      }
      
      public function handlePromoteBtnToggle(param1:MouseEvent = null) : void
      {
         this._inPromoteMode = !this._inPromoteMode;
         this._managementUI.editMode(this._inPromoteMode,GroupActionButton.TYPE_PROMOTE);
      }
      
      public function handleFollowBtnToggle(param1:MouseEvent = null) : void
      {
         this._inFollowMode = !this._inFollowMode;
         this._managementUI.editMode(this._inFollowMode,GroupActionButton.TYPE_FOLLOW);
      }
      
      public function teleportToMember(param1:int) : void
      {
         this.main.getConnectionManager().sendCommand(ClientCommands.GROUPSYSTEM,[ClientCommands.TELEPORT,param1]);
      }
      
      public function setCanditate(param1:MapObject) : void
      {
         this._candidateInputField.text = param1.getUsername();
      }
      
      public function removeMemberClip(param1:int) : void
      {
         var _loc2_:GroupMemberClip = null;
         if(this._membersUIList != null)
         {
            _loc2_ = this._membersUIReferences[param1];
            if(_loc2_ != null)
            {
               if(this._membersUIList.contains(_loc2_))
               {
                  this._membersUIList.removeChild(_loc2_);
                  _loc2_.dispose();
                  delete this._membersUIReferences[param1];
               }
            }
         }
      }
      
      public function setGroup(param1:Group) : void
      {
         var _loc2_:String = null;
         if(param1 == null && this._membersUIReferences != null)
         {
            for(_loc2_ in this._membersUIReferences)
            {
               this.removeMemberClip(int(_loc2_));
            }
         }
         else
         {
            this._candidateInputField.text = "";
         }
         this._group = param1;
      }
      
      private function isInGroup() : Boolean
      {
         if(this._group != null && this._group.members.length > 0)
         {
            return true;
         }
         return false;
      }
      
      public function update() : void
      {
         this._elementOffsetY = ELEMENT_START_Y;
         if(this.isInGroup())
         {
            this.invalidateMembersList();
            if(this._invitations != null && this._invitations.length > 0)
            {
               this.invalidateInvitations();
            }
            this.invalidateInvitationUI();
            this.updateManagementUI(true);
            this._isInPingMode = false;
         }
         else
         {
            this.invalidateInvitationUI();
            if(this._invitations != null && this._invitations.length > 0)
            {
               this.invalidateInvitations();
            }
            this.updateManagementUI(false);
         }
         if(this._parentWindow != null && this._totalHeight != this._elementOffsetY)
         {
            this._totalHeight = this._elementOffsetY;
            this._parentWindow.setDimension(196,this._totalHeight + 24);
         }
         this._disposed = false;
      }
      
      private function updateManagementUI(param1:Boolean = false) : void
      {
         if(this._managementUI == null)
         {
            this._managementUI = new GroupManagementUI(this);
            addChild(this._managementUI);
         }
         this._managementUI.visible = param1;
         this._managementUI.group = this._group;
         this._managementUI.update(param1);
         this._managementUI.y = this._elementOffsetY;
         if(param1)
         {
            this._elementOffsetY += this._managementUI.height;
         }
      }
      
      private function invalidateInvitationUI(param1:Boolean = true) : void
      {
         var _loc2_:Boolean = false;
         var _loc4_:int = 0;
         var _loc3_:Boolean = param1 && !this.isInGroup();
         if(param1 && (!this.isInGroup() || this._group.heroIsBoss || this._group.invitationBehavior == Group.INVITATION_BEHAVIOR_FREE_FOR_ALL))
         {
            _loc4_ = int(this._invitations.length);
            if(this.isInGroup())
            {
               _loc4_ += this._group.members.length;
            }
            if(_loc4_ < MAX_MEMBERS_COUNT)
            {
               _loc2_ = true;
               this._candidateInputField.y = this._elementOffsetY + 4;
               this._inviteButton.y = this._elementOffsetY;
               this._changeBlockInviationsButton.y = this._elementOffsetY;
               this._elementOffsetY += 28;
            }
         }
         this._candidateInputField.visible = _loc2_;
         this._inviteButton.visible = _loc2_;
         this._changeBlockInviationsButton.visible = _loc3_;
      }
      
      private function invalidateMembersList() : void
      {
         var _loc4_:GroupMember = null;
         var _loc5_:GroupMemberClip = null;
         this.getMembersListClip();
         var _loc1_:Array = this._group.members;
         _loc1_.sortOn("orderID",Array.NUMERIC);
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         while(_loc3_ < _loc1_.length)
         {
            _loc4_ = GroupMember(_loc1_[_loc3_]);
            if(_loc4_.id != Hero.userID)
            {
               _loc5_ = this.getGroupMemberClip(_loc4_);
               _loc5_.update();
               _loc5_.y = _loc2_;
               _loc2_ += _loc5_.reservedHeight;
            }
            _loc3_++;
         }
         this._elementOffsetY += _loc2_;
      }
      
      private function getGroupMemberClip(param1:GroupMember) : GroupMemberClip
      {
         var _loc2_:GroupMemberClip = this._membersUIReferences[param1.id];
         if(_loc2_ == null)
         {
            _loc2_ = new GroupMemberClip();
            _loc2_.member = param1;
            _loc2_.groupUi = this;
            this._membersUIList.addChild(_loc2_);
            this._membersUIReferences[param1.id] = _loc2_;
         }
         return _loc2_;
      }
      
      private function getMembersListClip() : MovieClip
      {
         if(this._membersUIList == null)
         {
            this._membersUIList = new MovieClip();
            addChild(this._membersUIList);
            this._membersUIReferences = {};
         }
         this._membersUIList.y = ELEMENT_START_Y;
         this._elementOffsetY = 0;
         return this._membersUIList;
      }
      
      public function info(param1:String) : void
      {
      }
      
      private function handleInviteBtnClick(param1:MouseEvent) : void
      {
         this.parseInputAndInvite();
      }
      
      private function parseInputAndInvite() : void
      {
         var _loc2_:Array = null;
         var _loc1_:String = StringUtil.trim(this._candidateInputField.text);
         if(_loc1_ != "")
         {
            _loc2_ = [ServerCommands.GROUPSYSTEM_GROUP_INVITE,ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_BY_NAME,_loc1_];
            this.main.getConnectionManager().sendCommand(ServerCommands.GROUPSYSTEM,_loc2_);
            this._candidateInputField.text = "";
         }
      }
      
      public function takeOverMemberTarget(param1:int) : void
      {
         this.main.getConnectionManager().sendCommand(ClientCommands.SELECT_SHIP,[param1]);
      }
      
      public function get isInPingMode() : Boolean
      {
         return this._isInPingMode;
      }
      
      public function set isInPingMode(param1:Boolean) : void
      {
         this._isInPingMode = param1;
         this.updateEditMode(this._isInPingMode,GroupActionButton.TYPE_PING);
      }
      
      public function addInvitation(param1:Invitation) : void
      {
         this._invitations.push(param1);
         if(param1.getInviter().id == Hero.userID)
         {
            this._sentInvitations.push(param1);
         }
         else
         {
            this._receivedInvitations.push(param1);
            this.main.getGuiManager().writeToLog(BPLocale.getText("label_grp_inv_from").replace(/%name%/,param1.getInviter().nickName));
         }
      }
      
      public function deleteInvitations() : void
      {
         this._invitations = [];
         this._invitationLines = [];
         this._sentInvitations = [];
         this._receivedInvitations = [];
         this._acceptButtonReferences = new Dictionary();
         this._rejectButtonReferences = new Dictionary();
         this._revokeButtonReferences = new Dictionary();
      }
      
      private function invalidateInvitations() : void
      {
         var _loc1_:Invitation = null;
         var _loc2_:InvitationClip = null;
         var _loc3_:int = 0;
         var _loc4_:Boolean = false;
         if(this._invitations == null)
         {
            return;
         }
         for each(_loc1_ in this._invitations)
         {
            if(_loc1_.getInviter().id == Hero.userID)
            {
               _loc3_ = _loc1_.getCandidate().id;
               if(this._revokeButtonReferences[_loc3_] == null)
               {
                  _loc2_ = new InvitationClip();
                  _loc2_.groupUi = this;
                  _loc2_.init(_loc1_.getCandidate());
                  _loc2_.type = InvitationClip.TYPE_OUTGOING;
                  TooltipControl.getInstance().addToolTip(_loc2_,BPLocale.getText("label_grp_inv_for").replace(/%name%/,_loc1_.getCandidate().nickName));
                  _loc4_ = true;
               }
            }
            else
            {
               _loc3_ = _loc1_.getInviter().id;
               if(this._rejectButtonReferences[_loc3_] == null)
               {
                  _loc2_ = new InvitationClip();
                  _loc2_.groupUi = this;
                  _loc2_.init(_loc1_.getInviter());
                  _loc2_.type = InvitationClip.TYPE_INCOMING;
                  TooltipControl.getInstance().addToolTip(_loc2_,BPLocale.getText("label_grp_inv_from").replace(/%name%/,_loc1_.getInviter().nickName));
                  _loc4_ = true;
               }
            }
            if(_loc4_)
            {
               this.addListeners(_loc2_,_loc3_);
               addChild(_loc2_);
               this._invitationLines.push(_loc2_);
            }
         }
         for each(_loc2_ in this._invitationLines)
         {
            _loc2_.y = this._elementOffsetY;
            this._elementOffsetY += 28;
         }
      }
      
      private function addListeners(param1:InvitationClip, param2:int) : void
      {
         switch(param1.type)
         {
            case InvitationClip.TYPE_INCOMING:
               param1.rejectButton.addEventListener(MouseEvent.CLICK,this.rejectInvitationClicked);
               this._rejectButtonReferences[param2] = param1.rejectButton;
               param1.acceptButton.addEventListener(MouseEvent.CLICK,this.acceptInvitationClicked);
               this._acceptButtonReferences[param2] = param1.acceptButton;
               break;
            case InvitationClip.TYPE_OUTGOING:
               param1.revokeButton.addEventListener(MouseEvent.CLICK,this.revokeInvitationClicked);
               this._revokeButtonReferences[param2] = param1.revokeButton;
         }
      }
      
      private function revokeInvitationClicked(param1:MouseEvent) : void
      {
         var _loc3_:String = null;
         var _loc2_:GroupActionButton = GroupActionButton(param1.target);
         for(_loc3_ in this._revokeButtonReferences)
         {
            if(GroupActionButton(this._revokeButtonReferences[_loc3_]) == _loc2_)
            {
               this.main.getConnectionManager().sendCommand(ServerCommands.GROUPSYSTEM,[ServerCommands.GROUPSYSTEM_GROUP_INVITE,ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_REVOKE,_loc3_]);
               this.disableInvitationUI(int(_loc3_),InvitationClip.TYPE_OUTGOING);
               break;
            }
         }
      }
      
      private function disableInvitationUI(param1:int, param2:int) : void
      {
         if(param2 == InvitationClip.TYPE_INCOMING)
         {
            if(this._acceptButtonReferences[param1] != null)
            {
               GroupActionButton(this._acceptButtonReferences[param1]).enabled = false;
            }
            if(this._rejectButtonReferences[param1] != null)
            {
               GroupActionButton(this._rejectButtonReferences[param1]).enabled = false;
            }
         }
         else if(this._revokeButtonReferences[param1] != null)
         {
            GroupActionButton(this._revokeButtonReferences[param1]).enabled = false;
         }
      }
      
      public function acceptInvitationClicked(param1:MouseEvent) : void
      {
         var _loc3_:String = null;
         var _loc2_:GroupActionButton = GroupActionButton(param1.target);
         for(_loc3_ in this._acceptButtonReferences)
         {
            if(GroupActionButton(this._acceptButtonReferences[_loc3_]) == _loc2_)
            {
               this.main.getConnectionManager().sendCommand(ServerCommands.GROUPSYSTEM,[ServerCommands.GROUPSYSTEM_GROUP_INVITE,ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ACKNOWLEDGE,_loc3_]);
               this.disableInvitationUI(int(_loc3_),InvitationClip.TYPE_INCOMING);
               break;
            }
         }
      }
      
      public function removeInvitation(param1:int, param2:int) : void
      {
         var _loc3_:int = 0;
         var _loc4_:Invitation = null;
         var _loc5_:GroupActionButton = null;
         var _loc6_:GroupActionButton = null;
         if(param2 == InvitationClip.TYPE_INCOMING)
         {
            if(this._rejectButtonReferences[param1] == null)
            {
               return;
            }
            GroupActionButton(this._rejectButtonReferences[param1]).removeEventListener(MouseEvent.CLICK,this.rejectInvitationClicked);
            GroupActionButton(this._acceptButtonReferences[param1]).removeEventListener(MouseEvent.CLICK,this.acceptInvitationClicked);
            TooltipControl.getInstance().removeToolTip(GroupActionButton(this._rejectButtonReferences[param1]));
            TooltipControl.getInstance().removeToolTip(GroupActionButton(this._acceptButtonReferences[param1]));
            _loc3_ = 0;
            while(_loc3_ < this._invitations.length)
            {
               _loc4_ = Invitation(this._invitations[_loc3_]);
               if(_loc4_.getInviter().id == param1)
               {
                  this._invitations.splice(_loc3_,1);
                  break;
               }
               _loc3_++;
            }
            _loc3_ = 0;
            while(_loc3_ < this._receivedInvitations.length)
            {
               _loc4_ = Invitation(this._receivedInvitations[_loc3_]);
               if(_loc4_.getInviter().id == param1)
               {
                  this._receivedInvitations.splice(_loc3_,1);
                  break;
               }
               _loc3_++;
            }
            _loc3_ = 0;
            while(_loc3_ < this._invitationLines.length)
            {
               _loc5_ = InvitationClip(this._invitationLines[_loc3_]).acceptButton;
               if(_loc5_ == GroupActionButton(this._acceptButtonReferences[param1]))
               {
                  TooltipControl.getInstance().removeToolTip(InvitationClip(this._invitationLines[_loc3_]));
                  removeChild(InvitationClip(this._invitationLines[_loc3_]));
                  this._invitationLines.splice(_loc3_,1);
                  break;
               }
               _loc3_++;
            }
            delete this._rejectButtonReferences[param1];
            delete this._acceptButtonReferences[param1];
         }
         else if(param2 == InvitationClip.TYPE_OUTGOING)
         {
            if(this._revokeButtonReferences[param1] == null)
            {
               return;
            }
            GroupActionButton(this._revokeButtonReferences[param1]).removeEventListener(MouseEvent.CLICK,this.revokeInvitationClicked);
            TooltipControl.getInstance().removeToolTip(GroupActionButton(this._revokeButtonReferences[param1]));
            _loc3_ = 0;
            while(_loc3_ < this._invitations.length)
            {
               _loc4_ = Invitation(this._invitations[_loc3_]);
               if(_loc4_.getCandidate().id == param1)
               {
                  this._invitations.splice(_loc3_,1);
                  break;
               }
               _loc3_++;
            }
            _loc3_ = 0;
            while(_loc3_ < this._sentInvitations.length)
            {
               _loc4_ = Invitation(this._sentInvitations[_loc3_]);
               if(_loc4_ != null && _loc4_.getCandidate() != null && _loc4_.getCandidate().id == param1)
               {
                  this._sentInvitations.splice(_loc3_,1);
                  break;
               }
               _loc3_++;
            }
            _loc3_ = 0;
            while(_loc3_ < this._invitationLines.length)
            {
               _loc6_ = InvitationClip(this._invitationLines[_loc3_]).revokeButton;
               if(_loc6_ == GroupActionButton(this._revokeButtonReferences[param1]))
               {
                  TooltipControl.getInstance().removeToolTip(InvitationClip(this._invitationLines[_loc3_]));
                  removeChild(InvitationClip(this._invitationLines[_loc3_]));
                  this._invitationLines.splice(_loc3_,1);
                  break;
               }
               _loc3_++;
            }
            delete this._revokeButtonReferences[param1];
         }
      }
      
      private function rejectInvitationClicked(param1:MouseEvent) : void
      {
         var _loc3_:String = null;
         var _loc2_:GroupActionButton = GroupActionButton(param1.target);
         for(_loc3_ in this._rejectButtonReferences)
         {
            if(GroupActionButton(this._rejectButtonReferences[_loc3_]) == _loc2_)
            {
               this.main.getConnectionManager().sendCommand(ServerCommands.GROUPSYSTEM,[ServerCommands.GROUPSYSTEM_GROUP_INVITE,ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_REJECT,_loc3_]);
               this.disableInvitationUI(int(_loc3_),InvitationClip.TYPE_INCOMING);
               break;
            }
         }
      }
      
      public function createGroupActionButton(param1:uint) : GroupActionButton
      {
         var _loc2_:GroupActionButton = new GroupActionButton();
         _loc2_.type = param1;
         var _loc3_:* = "btn_" + _loc2_.typeVerbose + "_";
         _loc2_.init(this._uiLibFinisher.getEmbededBitmapData(_loc3_ + "std.png"),this._uiLibFinisher.getEmbededBitmapData(_loc3_ + "mo.png"),this._uiLibFinisher.getEmbededBitmapData(_loc3_ + "da.png"));
         return _loc2_;
      }
      
      public function getShipIcon(param1:int) : ShipIcon
      {
         var _loc2_:ShipIcon = new ShipIcon();
         var _loc3_:int = int(this.shipIcons[param1]);
         _loc2_.baseGraphic = this._uiLibFinisher.getEmbededBitmap("iconShip" + _loc3_);
         return _loc2_;
      }
      
      private function getChangeBlockInviationsButton() : GroupActionButton
      {
         var _loc1_:String = null;
         if(this._invitationsBlocked)
         {
            if(this._changeBlockInviationsButton != null && this._changeBlockInviationsButton.type == GroupActionButton.TYPE_BLOCK_INVITATIONS)
            {
               TooltipControl.getInstance().removeToolTip(this._changeBlockInviationsButton);
               this._changeBlockInviationsButton.handleClick = null;
               if(contains(this._changeBlockInviationsButton))
               {
                  removeChild(this._changeBlockInviationsButton);
               }
               this._changeBlockInviationsButton = null;
            }
            if(this._changeBlockInviationsButton == null)
            {
               this._changeBlockInviationsButton = this.createGroupActionButton(GroupActionButton.TYPE_ALLOW_INVITATIONS);
               this._changeBlockInviationsButton.handleClick = this.handleChangeBlockInvitationsBtnClick;
            }
            _loc1_ = "label_grp_allow_invitations";
         }
         else
         {
            if(this._changeBlockInviationsButton != null && this._changeBlockInviationsButton.type == GroupActionButton.TYPE_ALLOW_INVITATIONS)
            {
               TooltipControl.getInstance().removeToolTip(this._changeBlockInviationsButton);
               this._changeBlockInviationsButton.handleClick = null;
               if(contains(this._changeBlockInviationsButton))
               {
                  removeChild(this._changeBlockInviationsButton);
               }
               this._changeBlockInviationsButton = null;
            }
            if(this._changeBlockInviationsButton == null)
            {
               this._changeBlockInviationsButton = this.createGroupActionButton(GroupActionButton.TYPE_BLOCK_INVITATIONS);
               this._changeBlockInviationsButton.handleClick = this.handleChangeBlockInvitationsBtnClick;
            }
            _loc1_ = "label_grp_block_invitations";
         }
         this._changeBlockInviationsButton.x = this._inviteButton.x + this._inviteButton.width + 4;
         this._changeBlockInviationsButton.y = this._inviteButton.y;
         if(!contains(this._changeBlockInviationsButton))
         {
            addChild(this._changeBlockInviationsButton);
         }
         TooltipControl.getInstance().removeToolTip(this._changeBlockInviationsButton);
         TooltipControl.getInstance().addToolTip(this._changeBlockInviationsButton,BPLocale.getText(_loc1_));
         return this._changeBlockInviationsButton;
      }
      
      public function get invitations() : Array
      {
         return this._invitations;
      }
      
      public function set invitations(param1:Array) : void
      {
         this._invitations = param1;
      }
      
      public function get sentInvitations() : Object
      {
         return this._sentInvitations;
      }
      
      public function set sentInvitations(param1:Object) : void
      {
         this._sentInvitations = param1;
      }
      
      public function get receivedInvitations() : Object
      {
         return this._receivedInvitations;
      }
      
      public function set receivedInvitations(param1:Object) : void
      {
         this._receivedInvitations = param1;
      }
      
      public function get disposed() : Boolean
      {
         return this._disposed;
      }
      
      public function set disposed(param1:Boolean) : void
      {
         this._disposed = param1;
      }
      
      public function get parentWindow() : SimpleWindow
      {
         return this._parentWindow;
      }
      
      public function set parentWindow(param1:SimpleWindow) : void
      {
         this._parentWindow = param1;
         this.update();
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Expo;
   import fl.controls.TextArea;
   import fl.controls.TextInput;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.DisplayObject;
   import flash.display.Loader;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.MouseEvent;
   import flash.events.SecurityErrorEvent;
   import flash.events.TimerEvent;
   import flash.external.ExternalInterface;
   import flash.filters.GlowFilter;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.net.URLRequest;
   import flash.system.LoaderContext;
   import flash.system.System;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import flash.utils.Dictionary;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.CommandLog;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.InGameCatalog;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.combat.ExplosionPattern;
   import net.bigpoint.darkorbit.data.vo.RankedHuntStatsVO;
   import net.bigpoint.darkorbit.gui.container.CLILog;
   import net.bigpoint.darkorbit.gui.container.InfoContainer;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.ButtonElement;
   import net.bigpoint.darkorbit.gui.elements.ConnLostElement;
   import net.bigpoint.darkorbit.gui.elements.ConnectionElement;
   import net.bigpoint.darkorbit.gui.elements.InfoField;
   import net.bigpoint.darkorbit.gui.elements.InvasionScoreElement;
   import net.bigpoint.darkorbit.gui.elements.LogoutTextElement;
   import net.bigpoint.darkorbit.gui.elements.OreTradeModule;
   import net.bigpoint.darkorbit.gui.elements.ScoreElement;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.elements.SpaceballScoreElement;
   import net.bigpoint.darkorbit.gui.elements.SpacemapElement;
   import net.bigpoint.darkorbit.gui.elements.StarSystemView;
   import net.bigpoint.darkorbit.gui.elements.TextFieldElement;
   import net.bigpoint.darkorbit.gui.elements.VideoElement;
   import net.bigpoint.darkorbit.gui.elements.WebLinkModule;
   import net.bigpoint.darkorbit.gui.windows.BannerAdWindow;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.gui.windows.VideoWindow;
   import net.bigpoint.darkorbit.lazyload.BannerAdLazyLoader;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.map.MiniMap;
   import net.bigpoint.darkorbit.menu.MenuManager;
   import net.bigpoint.darkorbit.menu.SuperActionButton;
   import net.bigpoint.darkorbit.menu.TopMenu;
   import net.bigpoint.darkorbit.net.ClientCommands;
   import net.bigpoint.darkorbit.net.ConnectionManager;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.net.models.SkillDesignsModel;
   import net.bigpoint.darkorbit.net.models.TechModel;
   import net.bigpoint.darkorbit.pattern.BannerAdPattern;
   import net.bigpoint.darkorbit.pattern.BoosterPattern;
   import net.bigpoint.darkorbit.pattern.OrePattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.questfm.Quest;
   import net.bigpoint.darkorbit.questfm.QuestDotList;
   import net.bigpoint.darkorbit.questfm.QuestTree;
   import net.bigpoint.darkorbit.refinement.RefinementManager;
   import net.bigpoint.darkorbit.resolution.ResolutionPattern;
   import net.bigpoint.darkorbit.resolution.WindowPattern;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   import net.bigpoint.darkorbit.ship.ShipPattern;
   import net.bigpoint.darkorbit.ship.TweenClip;
   
   public class GuiManager
   {
      
      public static var resizableWindowSizes:Array = [];
      
      private static var windowBlacklist:Dictionary = new Dictionary();
      
      private var uiResourses:SWFFinisher;
      
      private var guiInit:Boolean;
      
      private var main:Main;
      
      public var techModel:TechModel;
      
      public var skillDesignsModel:SkillDesignsModel;
      
      private var chatLoader:Loader;
      
      private var menuManager:MenuManager;
      
      private var topMenu:TopMenu;
      
      public var debugView:FPSModule;
      
      private var logoutBreakByUser:Boolean;
      
      private var minimizedWindowCount:int = 0;
      
      private var globalchat:MovieClip;
      
      private var nazBitmap:Bitmap;
      
      private var radiationBitmap:Bitmap;
      
      private var guiMinimized:Boolean;
      
      private var hudToggleAllowed:Boolean = true;
      
      private var minMaxTimerTimer:Timer;
      
      private var warningTimer:Timer;
      
      private var cross:MovieClip;
      
      private var checkWindowPositions:Boolean;
      
      private var _cliLog:CLILog;
      
      private var _groupUI:GroupUI;
      
      private var _invitationsUI:InvitationsUI;
      
      private var checkResizableWindows:Boolean;
      
      private var logTextArea:TextArea;
      
      private var useHTMLLog:Boolean = false;
      
      private var windows:Array = [];
      
      private var leftDynamicSlotIDs:Array = [];
      
      private var leftDynamicSlot:Array = [];
      
      private var messageBuffer:Array = [];
      
      private var cooldowns:Array = [];
      
      private var barStatus:Array = [];
      
      private var rightDynamicSlotIDs:Array = [];
      
      private var barList:Array = [];
      
      private var windowSettings:Array = [];
      
      private var _refinementManager:RefinementManager;
      
      private var promptCountdown:int = 10;
      
      private var promptTimer:Timer;
      
      private var _instantLogView:InstantLogView;
      
      private var radiationHelp:MovieClip;
      
      private var directionArrow:MovieClip;
      
      private var directionArrowTarget:Point;
      
      private var directionArrowTimer:Timer;
      
      private var _globalNotificationView:GlobalNotificationView;
      
      private var _stopoverView:StopoverView;
      
      private var updateWindowTimer:Timer;
      
      public var isChatConnected:Boolean;
      
      public function GuiManager(param1:Main)
      {
         super();
         this.main = param1;
         this.initWindowBlacklist();
         this.updateWindowTimer = new Timer(40,0);
         this.updateWindowTimer.addEventListener(TimerEvent.TIMER,this.handleUpdateWindow);
         this.updateWindowTimer.start();
      }
      
      private function handleUpdateWindow(param1:TimerEvent) : void
      {
         var _loc2_:SimpleWindow = null;
         for each(_loc2_ in this.windows)
         {
            _loc2_.refreshWindow();
         }
      }
      
      public function createEndSequence() : void
      {
         var _loc2_:Ship = null;
         var _loc3_:ShipPattern = null;
         var _loc4_:ExplosionPattern = null;
         this.main.setScheduledDisconnect(true);
         this.stopWarningTimer();
         this.showRadiationWarning(false);
         var _loc1_:Map = this.main.screenManager.map;
         if(_loc1_ != null)
         {
            _loc2_ = _loc1_.getShipManager().getHero();
            if(_loc2_ == null)
            {
               return;
            }
            _loc2_.cleanup();
            _loc3_ = _loc2_.shipPattern;
            if(ScreenManager.cameraLock == ScreenManager.CAMERA_LOCKED_TO_HERO)
            {
               this.main.screenManager.getHeroLayer().removeChild(_loc2_.getClipContainer());
            }
            else
            {
               this.main.screenManager.getShipLayer().removeChild(_loc2_.getClipContainer());
            }
            _loc4_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_SHIP_EXPLOSION,_loc3_.getExplodeTypeID());
            _loc1_.getCombatManager().showPyroEffect(_loc2_.x,_loc2_.y,_loc4_,37,false);
            AudioManager.playSoundEffect(18);
            this.main.screenManager.flashScreen(16777215,0.75,0.25,2);
            _loc1_.getCombatManager().showShockwave(0,_loc2_.x,_loc2_.y,true);
            this.main.screenManager.shakeScreen();
            _loc1_.getEventManager().lockControls();
            delete _loc1_.getShipManager().getShips()[Hero.userID];
         }
         this.main.screenManager.hero = null;
      }
      
      public function showLegacyHeroDestroyedWindow() : void
      {
         AudioManager.playSoundEffect(41);
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_HERO_DESTROYED);
         if(_loc1_ == null)
         {
            _loc1_ = this.createWindow(SimpleWindow.WINDOW_CLASS_HERO_DESTROYED);
         }
         _loc1_.alpha = 0;
         _loc1_.modal = true;
         var _loc2_:SimpleContainer = new SimpleContainer(this,SimpleContainer.CLASS_HERO_DESTROYED);
         var _loc3_:TextFieldElement = new TextFieldElement(_loc1_.getWindowDimension().x - 10,_loc1_.getWindowDimension().y - 60,new TextFormat(Styles.simpleFmt.font,Styles.simpleFmt.size,16777215),BPLocale.getText("dest_text"));
         _loc3_.x = 10;
         _loc3_.y = 34;
         _loc2_.addElement(_loc3_);
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc5_:ButtonElement = new ButtonElement(ButtonElement.TYPE_OK,BPLocale.getText("dest_ok"),_loc4_.getEmbededMovieClip("button1"));
         _loc5_.addEventListener(MouseEvent.CLICK,this.handleCloseClientButtonClicked);
         _loc2_.addElement(_loc5_,SimpleContainer.ALIGN_VERTICAL_CENTER);
         _loc1_.addContainer(_loc2_);
         if(ExternalInterface.available)
         {
            ExternalInterface.call("showHangar");
         }
         TweenLite.to(_loc1_,0.5,{"alpha":1});
      }
      
      private function handleCloseClientButtonClicked(param1:MouseEvent) : void
      {
         if(ExternalInterface.available)
         {
            ExternalInterface.call("bpCloseWindow","");
         }
         else
         {
            System.exit(0);
         }
      }
      
      private function initWindowBlacklist() : void
      {
      }
      
      public function addWindowToBlacklist(param1:int) : void
      {
         windowBlacklist[param1] = 1;
         var _loc2_:SimpleWindow = this.getWindow(param1);
         if(_loc2_ != null)
         {
            _loc2_.visible = false;
         }
         this.resortLeftSlots();
      }
      
      public function minimizeWindow(param1:int) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(param1);
         if(_loc2_ != null && _loc2_.isMaximized() && !_loc2_.tweeening)
         {
            _loc2_.minimize();
         }
         this.resortLeftSlots();
      }
      
      public function maximizeWindow(param1:int) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(param1);
         if(_loc2_ != null && !_loc2_.isMaximized() && !_loc2_.tweeening)
         {
            _loc2_.maximize();
         }
         this.resortLeftSlots();
      }
      
      public function removeWindowFromBlacklist(param1:int) : void
      {
         windowBlacklist[param1] = null;
         var _loc2_:SimpleWindow = this.getWindow(param1);
         if(_loc2_ != null)
         {
            _loc2_.visible = true;
         }
         this.resortLeftSlots();
      }
      
      public function isWindowBlacklisted(param1:int) : Boolean
      {
         if(windowBlacklist[param1] != null)
         {
            return true;
         }
         return false;
      }
      
      public function createStopoverView(param1:String, param2:int, param3:String) : void
      {
         if(this._stopoverView == null)
         {
            this._stopoverView = new StopoverView(this,ScreenManager.getScreenWidth(),ScreenManager.getScreenHeight());
         }
         this._stopoverView.updateKillMessage(param1,param2,param3);
         if(!this.main.screenManager.getWindowLayer2().contains(this._stopoverView))
         {
            this.main.screenManager.getWindowLayer2().addChild(this._stopoverView);
            this._stopoverView.x = 0;
            this._stopoverView.y = 0;
         }
      }
      
      public function removeStopoverView() : void
      {
         if(this._stopoverView != null)
         {
            this._stopoverView.dispose();
            this._stopoverView = null;
         }
      }
      
      public function flashWindowIcon(param1:int, param2:int, param3:Boolean) : void
      {
         var _loc4_:SimpleWindow = this.getWindow(param1);
         if(_loc4_ != null)
         {
            _loc4_.flashWindowIcon(param2);
            if(param3)
            {
               _loc4_.startPointer();
            }
         }
      }
      
      public function stopFlashWindowIcon(param1:int) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(param1);
         if(_loc2_ != null)
         {
            _loc2_.stopFlashWindowIcon();
         }
      }
      
      public function showArrow(param1:int, param2:int) : void
      {
         var _loc4_:Ship = null;
         var _loc5_:Sprite = null;
         if(this.directionArrow != null)
         {
            TweenLite.to(this.directionArrowTarget,1,{
               "x":param1,
               "y":param2
            });
            return;
         }
         this.directionArrowTarget = new Point(param1,param2);
         this.directionArrow = ResourceManager.getMovieClip("ui","tutorial_arrow");
         this.directionArrow.mouseEnabled = Main.mouseEventsEnabled;
         this.directionArrow.mouseChildren = Main.mouseEventsEnabled;
         this.directionArrow.x = ScreenManager.getHalfScreenWidth();
         this.directionArrow.y = ScreenManager.getHalfScreenHeight();
         var _loc3_:Map = this.main.screenManager.map;
         if(_loc3_ != null)
         {
            _loc4_ = _loc3_.getShipManager().getHero();
            if(_loc4_ != null)
            {
               this.directionArrow.alpha = 0;
               _loc5_ = this.main.screenManager.getHeroLayer();
               _loc5_.addChild(this.directionArrow);
               _loc5_.swapChildren(this.directionArrow,_loc4_.getClipContainer());
               TweenLite.to(this.directionArrow,0.5,{"alpha":1});
            }
         }
         this.stopDirectionArrowTimer();
         this.directionArrowTimer = new Timer(25,0);
         this.directionArrowTimer.addEventListener(TimerEvent.TIMER,this.updateDirectionArrow);
         this.directionArrowTimer.start();
      }
      
      public function setArrowVisibility(param1:Boolean) : void
      {
         var _loc2_:Sprite = this.main.screenManager.getHeroLayer();
         if(this.directionArrow != null && _loc2_.contains(this.directionArrow))
         {
            if(param1)
            {
               TweenLite.to(this.directionArrow,0.25,{"alpha":1});
            }
            else
            {
               TweenLite.to(this.directionArrow,0.25,{"alpha":0});
            }
         }
      }
      
      public function hideArrow() : void
      {
         this.stopDirectionArrowTimer();
         if(this.directionArrow != null)
         {
            TweenLite.to(this.directionArrow,0.5,{
               "alpha":0,
               "onComplete":this.handleDirectionArrowFadeOut
            });
         }
      }
      
      private function handleDirectionArrowFadeOut() : void
      {
         var _loc1_:Sprite = null;
         if(this.directionArrow != null)
         {
            _loc1_ = this.main.screenManager.getHeroLayer();
            if(_loc1_.contains(this.directionArrow))
            {
               _loc1_.removeChild(this.directionArrow);
               this.directionArrow = null;
               this.directionArrowTarget = null;
            }
         }
      }
      
      private function stopDirectionArrowTimer() : void
      {
         if(this.directionArrowTimer != null)
         {
            this.directionArrowTimer.stop();
            this.directionArrowTimer.removeEventListener(TimerEvent.TIMER,this.updateDirectionArrow);
            this.directionArrowTimer = null;
         }
      }
      
      private function updateDirectionArrow(param1:TimerEvent) : void
      {
         var _loc3_:Ship = null;
         var _loc4_:Number = NaN;
         var _loc2_:Map = this.main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc3_ = _loc2_.getShipManager().getHero();
            if(this.directionArrowTarget != null)
            {
               _loc4_ = Math.atan2(this.directionArrowTarget.y - _loc3_.y,this.directionArrowTarget.x - _loc3_.x) * 180 / Math.PI;
               this.directionArrow.rotation = _loc4_;
            }
         }
      }
      
      public function saveReferenceUiResources(param1:SWFFinisher) : void
      {
         this.uiResourses = param1;
      }
      
      public function updateRefinementWindow() : void
      {
         this._refinementManager.updateOreCounts();
      }
      
      public function setThreadIndicator(param1:int) : void
      {
         var _loc3_:MiniMap = null;
         Settings.enemyCount = param1;
         var _loc2_:Map = this.main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc3_ = _loc2_.getMinimapManager().getMiniMap();
            if(_loc3_ != null)
            {
               _loc3_.updateThreatIndicator(param1);
            }
         }
      }
      
      public function createInstantLogView() : void
      {
         var _loc1_:InstantLogViewConfig = Settings.instantLogViewConfig;
         if(this._instantLogView == null)
         {
            this._instantLogView = new InstantLogView(_loc1_.width,_loc1_.maxEntries,_loc1_.displayTime);
            this._instantLogView.mouseChildren = false;
            this._instantLogView.mouseEnabled = false;
         }
         if(!this.main.screenManager.mainmenuLayer.contains(this._instantLogView))
         {
            this.main.screenManager.mainmenuLayer.addChild(this._instantLogView);
            this._instantLogView.x = ScreenManager.getHalfScreenWidth() - this._instantLogView.itemWidth / 2;
            this._instantLogView.y = _loc1_.y;
         }
      }
      
      public function createGlobalNotificationView() : void
      {
         if(this._globalNotificationView == null)
         {
            this._globalNotificationView = new GlobalNotificationView();
            this._globalNotificationView.mouseChildren = false;
            this._globalNotificationView.mouseEnabled = false;
         }
         if(!this.main.screenManager.mainmenuLayer.contains(this._globalNotificationView))
         {
            this.main.screenManager.mainmenuLayer.addChild(this._globalNotificationView);
            this._globalNotificationView.x = ScreenManager.getHalfScreenWidth() - this._globalNotificationView.itemWidth / 2;
            this._globalNotificationView.y = 0;
         }
      }
      
      public function createSpaceballScoreboard(param1:Array) : void
      {
         var _loc2_:SimpleWindow = null;
         var _loc3_:SimpleContainer = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:SpaceballScoreElement = null;
         if(this.getWindow(SimpleWindow.WINDOW_CLASS_SPACEBALL) == null)
         {
            _loc2_ = this.createWindow(SimpleWindow.WINDOW_CLASS_SPACEBALL);
            _loc3_ = new SimpleContainer(this,SimpleContainer.CLASS_SPACEBALL);
            _loc4_ = 0;
            _loc3_.x = 12;
            _loc3_.y = 35;
            _loc5_ = 0;
            while(_loc5_ < param1.length)
            {
               _loc6_ = new SpaceballScoreElement(this,_loc5_ + 1);
               _loc6_.updateScore(param1[_loc5_]);
               _loc3_.addElement(_loc6_,SimpleContainer.NO_ALIGN);
               _loc6_.x = _loc4_;
               _loc4_ += _loc6_.getBackground().width;
               _loc5_++;
            }
            _loc2_.addContainer(_loc3_);
         }
         else
         {
            this.updateScoreboard(SimpleWindow.WINDOW_CLASS_SPACEBALL,SimpleContainer.CLASS_SPACEBALL,1,0);
            this.updateScoreboard(SimpleWindow.WINDOW_CLASS_SPACEBALL,SimpleContainer.CLASS_SPACEBALL,2,0);
            this.updateScoreboard(SimpleWindow.WINDOW_CLASS_SPACEBALL,SimpleContainer.CLASS_SPACEBALL,3,0);
         }
      }
      
      public function destroyWindow(param1:int) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(param1);
         if(_loc2_ != null)
         {
            this.closeWindow(_loc2_);
         }
      }
      
      public function createAutoStartWarning() : void
      {
         var _loc1_:SimpleWindow = this.createWindow(SimpleWindow.WINDOW_CLASS_AUTOSTART_WARNING);
         _loc1_.parent.removeChild(_loc1_);
         this.main.screenManager.getWindowLayer2().addChild(_loc1_);
         _loc1_.modal = true;
         var _loc2_:SimpleContainer = new SimpleContainer(this,SimpleContainer.CLASS_AUTOSTART_WARNING);
         var _loc3_:TextFieldElement = new TextFieldElement(_loc1_.getWindowDimension().x - 32,int(Styles.simpleFmt.size),new TextFormat(Styles.simpleFmt.font,Styles.simpleFmt.size,16777215),BPLocale.getText("msg_autostart_warning"));
         _loc3_.textField.autoSize = TextFieldAutoSize.CENTER;
         _loc3_.textField.wordWrap = true;
         _loc3_.textField.multiline = true;
         _loc2_.addElement(_loc3_);
         var _loc4_:ButtonElement = new ButtonElement(ButtonElement.TYPE_OK,BPLocale.getText("dest_ok"),this.uiResourses.getEmbededMovieClip("button1"));
         _loc4_.addEventListener(MouseEvent.CLICK,this.handleCloseButtonClick);
         _loc2_.addElement(_loc4_,SimpleContainer.ALIGN_VERTICAL_CENTER);
         _loc2_.addPredefinedPosition(new Point(15,30));
         _loc2_.setPredefinedPosition();
         _loc1_.addContainer(_loc2_);
         _loc1_.autoSize();
      }
      
      public function destroyAutoStartWarning() : void
      {
         var _loc2_:SimpleContainer = null;
         var _loc3_:ButtonElement = null;
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_AUTOSTART_WARNING);
         if(_loc1_ != null)
         {
            _loc2_ = _loc1_.getContainer(SimpleContainer.CLASS_AUTOSTART_WARNING);
            _loc3_ = _loc2_.getElement(SimpleElement.TYPE_SIMPLE_BUTTON) as ButtonElement;
            _loc3_.removeEventListener(MouseEvent.CLICK,this.handleCloseButtonClick);
            this.closeWindow(_loc1_);
         }
      }
      
      private function handleCloseButtonClick(param1:Event) : void
      {
         this.destroyAutoStartWarning();
      }
      
      public function createInvasionScoreboard(param1:Array) : void
      {
         var _loc2_:SimpleWindow = null;
         var _loc3_:SimpleContainer = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:TextFieldElement = null;
         var _loc7_:InvasionScoreElement = null;
         if(this.getWindow(SimpleWindow.WINDOW_CLASS_INVASION) == null)
         {
            _loc2_ = this.createWindow(SimpleWindow.WINDOW_CLASS_INVASION);
            _loc3_ = new SimpleContainer(this,SimpleContainer.CLASS_INVASION);
            _loc4_ = 0;
            _loc3_.x = 12;
            _loc3_.y = 35;
            _loc5_ = 0;
            while(_loc5_ < param1.length)
            {
               _loc7_ = new InvasionScoreElement(this,_loc5_ + 1);
               _loc7_.updateScore(param1[_loc5_]);
               _loc3_.addElement(_loc7_,SimpleContainer.NO_ALIGN);
               _loc7_.x = _loc4_;
               _loc4_ += _loc7_.getBackground().width;
               _loc5_++;
            }
            _loc6_ = new TextFieldElement(_loc2_.getWindowDimension().x,20,new TextFormat(Styles.logFmt.font,Styles.logFmt.size,16777215),null,TextFormatAlign.LEFT);
            _loc6_.y = 40;
            _loc3_.addElement(_loc6_,SimpleContainer.NO_ALIGN);
            _loc2_.addContainer(_loc3_);
         }
      }
      
      public function setInvasionWave(param1:Number) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_INVASION);
         var _loc3_:TextFieldElement = TextFieldElement(_loc2_.getContainer(SimpleContainer.CLASS_INVASION).getElement(SimpleElement.TYPE_TEXT));
         _loc3_.updateText(BPLocale.getText("attack_wave_x").replace("%COUNT%",BPLocale.roundInteger(param1)));
      }
      
      public function updateScoreboard(param1:int, param2:int, param3:int, param4:int) : void
      {
         var _loc5_:ScoreElement = this.getScoreElement(param1,param2,param3);
         if(_loc5_ != null)
         {
            _loc5_.updateScore(param4);
         }
      }
      
      public function getScoreElement(param1:int, param2:int, param3:int) : ScoreElement
      {
         var _loc5_:Array = null;
         var _loc6_:ScoreElement = null;
         var _loc4_:SimpleWindow = this.getWindow(param1);
         if(_loc4_ != null)
         {
            _loc5_ = _loc4_.getContainer(param2).getAllElements();
            for each(_loc6_ in _loc5_)
            {
               if(_loc6_.getCompanyID() == param3)
               {
                  return _loc6_;
               }
            }
         }
         return null;
      }
      
      public function setSpaceballSpeed(param1:int, param2:int) : void
      {
         SpaceballScoreElement(this.getScoreElement(SimpleWindow.WINDOW_CLASS_SPACEBALL,SimpleContainer.CLASS_SPACEBALL,1)).setSpeed(0);
         SpaceballScoreElement(this.getScoreElement(SimpleWindow.WINDOW_CLASS_SPACEBALL,SimpleContainer.CLASS_SPACEBALL,2)).setSpeed(0);
         SpaceballScoreElement(this.getScoreElement(SimpleWindow.WINDOW_CLASS_SPACEBALL,SimpleContainer.CLASS_SPACEBALL,3)).setSpeed(0);
         if(param1 != 0)
         {
            SpaceballScoreElement(this.getScoreElement(SimpleWindow.WINDOW_CLASS_SPACEBALL,SimpleContainer.CLASS_SPACEBALL,param1)).setSpeed(param2);
         }
      }
      
      public function saveBarView() : void
      {
         var _loc3_:InfoField = null;
         var _loc1_:String = "";
         var _loc2_:String = ",";
         for each(_loc3_ in this.barList)
         {
            _loc1_ = _loc1_ + _loc3_.getID() + _loc2_ + _loc3_.getViewMode() + _loc2_;
         }
         _loc1_ = Main.removeCommaAtEnd(_loc1_);
         this.main.getConnectionManager().sendCommand(ServerCommands.CLIENT_SETTING,[ServerCommands.SET_BAR_STATUS,_loc1_]);
      }
      
      public function setBarListInfoField(param1:InfoField) : void
      {
         this.barList[param1.getID()] = param1;
      }
      
      public function updateQuestDotList() : void
      {
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM);
         var _loc2_:QuestDotList = this.getQuestDotList();
         _loc2_.update();
         _loc2_.x = _loc1_.getWindow().width - _loc2_.width - 16;
      }
      
      public function addQuestDot(param1:uint) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM);
         var _loc3_:QuestDotList = this.getQuestDotList();
         _loc3_.addQuest(param1);
         _loc3_.x = _loc2_.getWindow().width - _loc3_.width - 16;
      }
      
      public function removeQuestDot(param1:uint) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM);
         var _loc3_:QuestDotList = this.getQuestDotList();
         _loc3_.removeQuest(param1);
         _loc3_.x = _loc2_.getWindow().width - _loc3_.width - 16;
      }
      
      private function getQuestTree() : QuestTree
      {
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM);
         return QuestTree(_loc1_.getContainer(SimpleContainer.CLASS_QUEST_TREE));
      }
      
      private function getQuestDotList() : QuestDotList
      {
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM);
         return QuestDotList(_loc1_.getContainer(SimpleContainer.CLASS_QUEST_PAGE_DOTS));
      }
      
      public function updateQuestTitle() : void
      {
         this.getQuestTree().updateQuestTitle();
      }
      
      public function clearQuestWindow() : void
      {
         this.getQuestTree().clearContent();
      }
      
      public function updateQuestConditionInWindow(param1:int) : void
      {
         this.getQuestTree().updateCondition(param1);
      }
      
      private function onTimerComplete(param1:TimerEvent) : void
      {
         this.hudToggleAllowed = true;
      }
      
      public function toggleHUD() : void
      {
         var _loc2_:int = 0;
         var _loc3_:SimpleWindow = null;
         if(!this.hudToggleAllowed)
         {
            return;
         }
         if(this.getMinimizedWindowCount() == this.leftDynamicSlotIDs.length)
         {
            this.guiMinimized = true;
         }
         if(this.getMinimizedWindowCount() == 0)
         {
            this.guiMinimized = false;
         }
         var _loc1_:int = 0;
         while(_loc1_ < this.leftDynamicSlotIDs.length)
         {
            _loc2_ = int(this.leftDynamicSlotIDs[_loc1_]);
            _loc3_ = this.getWindow(_loc2_);
            if(this.guiMinimized)
            {
               if(!_loc3_.isMaximized())
               {
                  _loc3_.maximize();
                  _loc3_.saveWindowSetting(true);
               }
            }
            else if(_loc3_.isMaximized())
            {
               _loc3_.minimize();
               _loc3_.saveWindowSetting();
            }
            _loc1_++;
         }
         if(this.guiMinimized)
         {
            this.guiMinimized = false;
         }
         else
         {
            this.guiMinimized = true;
         }
         this.startHudCooldown();
      }
      
      public function startHudCooldown() : void
      {
         this.hudToggleAllowed = false;
         if(this.minMaxTimerTimer == null)
         {
            this.minMaxTimerTimer = new Timer(1200,1);
            this.minMaxTimerTimer.addEventListener(TimerEvent.TIMER_COMPLETE,this.onTimerComplete);
         }
         if(this.minMaxTimerTimer.running)
         {
            this.minMaxTimerTimer.stop();
         }
         this.minMaxTimerTimer.reset();
         this.minMaxTimerTimer.start();
      }
      
      public function noAmmunition(param1:String, param2:int) : void
      {
         var _loc4_:MapObject = null;
         var _loc3_:Map = this.main.screenManager.map;
         if(_loc3_ != null)
         {
            _loc4_ = _loc3_.getShipManager().getSelectedShip();
            if(_loc4_ != null)
            {
               if(param2 == 0)
               {
                  if(param1 == "R")
                  {
                     this.writeToLog(BPLocale.getText("emptyrok"));
                     if(ExternalInterface.available)
                     {
                        ExternalInterface.call("clientEvent","rocketsEmpty");
                     }
                  }
                  else if(param1 == "L")
                  {
                     if(_loc4_ != null)
                     {
                        this.writeToLog(BPLocale.getText("attstop").replace(ConnectionManager.PARAM_1,_loc4_.getUsername()));
                     }
                     if(ExternalInterface.available)
                     {
                        ExternalInterface.call("clientEvent","laserAmmoEmpty");
                     }
                     this.writeToLog(BPLocale.getText("emptybat"));
                     this.getMenuManager().togglePoolButton(SuperActionButton.ACTIVATION_LASER,false);
                     this.main.screenManager.map.getCombatManager().removeLaserAttack(Hero.userID);
                  }
               }
               else if(param1 == "R")
               {
                  this.writeToLog(BPLocale.getText("chgrokmanual"));
               }
               else if(param1 == "L")
               {
                  if(_loc4_ != null)
                  {
                     this.writeToLog(BPLocale.getText("attstop").replace(ConnectionManager.PARAM_1,_loc4_.getUsername()));
                  }
                  this.writeToLog(BPLocale.getText("chgbatmanual"));
               }
            }
         }
      }
      
      public function showHitpointDelta(param1:MapObject, param2:int, param3:int = 0, param4:Boolean = false) : void
      {
         var _loc11_:String = null;
         var _loc12_:Point = null;
         if(ScreenManager.cameraLock == ScreenManager.CAMERA_TWEENING_TO_COORDINATE || ScreenManager.cameraLock == ScreenManager.CAMERA_TWEENING_TO_SHIP || ScreenManager.cameraLock == ScreenManager.CAMERA_TWEENING_TO_HERO)
         {
            return;
         }
         if(param3 == 0 && param1.getUserId() == Hero.userID)
         {
            param3 = 1;
         }
         var _loc5_:int = int(PatternManager.hitpointColorPatterns[param3]);
         var _loc6_:TextField = new TextField();
         var _loc7_:TextFormat = new TextFormat("Tahoma",null,_loc5_,true);
         if(param2 > 0)
         {
            _loc11_ = "";
            if(param4)
            {
               _loc11_ = "+";
            }
            _loc6_.text = _loc11_ + BPLocale.roundInteger(param2);
         }
         else if(param2 == 0)
         {
            _loc6_.text = BPLocale.getText("shot_miss");
         }
         else
         {
            _loc6_.text = BPLocale.getText("shot_hit");
         }
         _loc6_.setTextFormat(_loc7_);
         _loc6_.filters = [MapObject.filter];
         _loc6_.autoSize = TextFieldAutoSize.LEFT;
         var _loc8_:BitmapData = new BitmapData(_loc6_.width,_loc6_.height,true,0);
         _loc8_.draw(_loc6_);
         var _loc9_:Bitmap = new Bitmap(_loc8_);
         var _loc10_:Sprite = param1.getClipContainer();
         if(_loc10_ != null && _loc10_.parent != null)
         {
            _loc12_ = _loc10_.parent.localToGlobal(new Point(_loc10_.x,_loc10_.y));
            _loc9_.x = _loc12_.x - this.main.x;
            _loc9_.y = _loc12_.y - this.main.y;
            this.main.screenManager.getGUILayer0().addChild(_loc9_);
            TweenLite.to(_loc9_,1,{"y":_loc9_.y - 100});
            TweenLite.to(_loc9_,1,{
               "scaleX":3,
               "scaleY":3
            });
            TweenLite.to(_loc9_,1,{
               "delay":0.5,
               "alpha":0,
               "onComplete":this.onFinishShowHit,
               "onCompleteParams":[_loc9_]
            });
         }
      }
      
      private function onFinishShowHit(param1:Bitmap) : void
      {
         param1.parent.removeChild(param1);
      }
      
      public function addNotification(param1:String) : void
      {
         this._globalNotificationView.addMessage(param1);
      }
      
      public function writeToLog(param1:String, param2:String = "ST") : void
      {
         if(this._instantLogView != null)
         {
            this._instantLogView.addMessage(param1,LogMessageProfileFactory.getLogMessageProfile(param2));
         }
         var _loc3_:LogMessage = new LogMessage(param1);
         this.messageBuffer.push(_loc3_);
         if(this.messageBuffer.length > 25)
         {
            this.messageBuffer.shift();
            this.refreshTextField();
         }
         else
         {
            this.addToTextField(param1,true);
         }
      }
      
      private function refreshTextField() : void
      {
         var _loc3_:LogMessage = null;
         var _loc1_:* = "";
         var _loc2_:int = 0;
         while(_loc2_ < this.messageBuffer.length)
         {
            _loc3_ = this.messageBuffer[_loc2_];
            if(this.useHTMLLog)
            {
               _loc1_ += _loc3_.getMessage();
            }
            else
            {
               _loc1_ = _loc1_ + _loc3_.getMessage() + "\n";
            }
            _loc2_++;
         }
         this.addToTextField(_loc1_);
      }
      
      private function addToTextField(param1:String, param2:Boolean = false) : void
      {
         if(this.useHTMLLog)
         {
            if(param2)
            {
               this.logTextArea.htmlText += param1;
            }
            else
            {
               this.logTextArea.htmlText = param1;
            }
         }
         else if(param2)
         {
            this.logTextArea.text = this.logTextArea.text + "\n" + param1;
         }
         else
         {
            this.logTextArea.text = param1;
         }
         this.logTextArea.verticalScrollPosition = this.logTextArea.maxVerticalScrollPosition;
      }
      
      public function addCoolDown(param1:int, param2:Number) : void
      {
         if(param2 == 0 || this.cooldownExist(param1))
         {
            return;
         }
         if(this.menuManager == null)
         {
            return;
         }
         var _loc3_:CoolDown = new CoolDown(this,param1,param2);
         this.cooldowns.push(_loc3_);
      }
      
      public function cooldownExist(param1:int) : Boolean
      {
         var _loc3_:CoolDown = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.cooldowns.length)
         {
            _loc3_ = this.cooldowns[_loc2_];
            if(_loc3_.getButtonID() == param1)
            {
               return true;
            }
            _loc2_++;
         }
         return false;
      }
      
      public function removeCooldown(param1:CoolDown) : void
      {
         var _loc3_:CoolDown = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.cooldowns.length)
         {
            _loc3_ = this.cooldowns[_loc2_];
            if(_loc3_ == param1)
            {
               this.cooldowns.splice(_loc2_,1);
               break;
            }
            _loc2_++;
         }
      }
      
      public function checkCooldowns() : void
      {
         var _loc2_:CoolDown = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.cooldowns.length)
         {
            _loc2_ = this.cooldowns[_loc1_];
            _loc2_.check();
            _loc1_++;
         }
      }
      
      public function removeAllCooldowns() : void
      {
         var _loc2_:CoolDown = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.cooldowns.length)
         {
            _loc2_ = this.cooldowns[_loc1_];
            _loc2_.cleanup();
            _loc1_++;
         }
         this.cooldowns = [];
      }
      
      public function initUpdateBoosters(param1:Array) : void
      {
         var _loc5_:int = 0;
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         while(_loc3_ < param1.length)
         {
            _loc5_ = int(param1[_loc3_]);
            _loc2_ += _loc5_;
            _loc3_++;
         }
         var _loc4_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_BOOSTER);
         if(_loc2_ > 0)
         {
            if(_loc4_ == null)
            {
               this.createBoosterWindow();
            }
            this.updateBoosterWindow(param1);
         }
         else if(_loc4_ != null)
         {
            this.closeWindow(_loc4_);
         }
      }
      
      private function createBoosterWindow() : void
      {
         var _loc1_:SimpleWindow = this.createWindow(SimpleWindow.WINDOW_CLASS_BOOSTER);
         var _loc2_:SimpleContainer = new SimpleContainer(this,SimpleWindow.WINDOW_CLASS_BOOSTER);
         _loc2_.x = 15;
         _loc2_.y = 38;
         _loc1_.addContainer(_loc2_);
      }
      
      private function updateBoosterWindow(param1:Array) : void
      {
         var _loc8_:InfoField = null;
         var _loc9_:int = 0;
         var _loc10_:BoosterPattern = null;
         var _loc11_:String = null;
         var _loc12_:BitmapData = null;
         var _loc13_:int = 0;
         var _loc14_:BarStatus = null;
         var _loc15_:InfoField = null;
         var _loc2_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_BOOSTER);
         var _loc3_:SimpleContainer = _loc2_.getContainer(SimpleWindow.WINDOW_CLASS_BOOSTER);
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc5_:Array = _loc3_.getAllElements();
         var _loc6_:int = 0;
         while(_loc6_ < _loc5_.length)
         {
            _loc8_ = _loc5_[_loc6_];
            _loc8_.cleanup();
            _loc3_.removeChild(_loc8_);
            _loc6_++;
         }
         _loc3_.removeAllElements();
         _loc6_ = 0;
         while(_loc6_ < param1.length)
         {
            _loc9_ = int(param1[_loc6_]);
            if(_loc9_ > 0)
            {
               _loc10_ = PatternManager.boosterPatterns[_loc6_ + 1];
               _loc11_ = _loc10_.getResKey();
               _loc12_ = _loc4_.getEmbededBitmapData(_loc11_);
               _loc13_ = InfoField.MODE_BAR;
               _loc14_ = this.getBarStatus(_loc10_.getInfoFieldID());
               if(_loc14_ != null)
               {
                  _loc13_ = _loc14_.status;
               }
               _loc15_ = new InfoField(this,_loc10_.getInfoFieldID(),new Bitmap(_loc12_),-1,[_loc10_.getBarKey()],null,_loc13_);
               _loc15_.createTooltip(InGameCatalog.instance.boosterNames[_loc6_ + 1]);
               _loc3_.addElement(_loc15_,SimpleContainer.ALIGN_VERTICAL);
               _loc15_.setCounterbar(_loc9_,100,false);
               _loc15_.setLabel(_loc9_ + " %");
            }
            _loc6_++;
         }
         var _loc7_:int = _loc3_.height + 32;
         _loc2_.setDimension(110,_loc7_);
      }
      
      public function initUpdateRankedHuntStats(param1:int) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_RANKED_HUNT_EVENT);
         var _loc3_:RankedHuntStatsVO = Hero.rankedHuntingEventData.eventVOs[param1] as RankedHuntStatsVO;
         if(_loc3_ == null)
         {
            if(_loc2_ != null)
            {
               this.destroyWindow(SimpleWindow.WINDOW_CLASS_RANKED_HUNT_EVENT);
            }
         }
         if(_loc2_ == null)
         {
            this.createWindow(SimpleWindow.WINDOW_CLASS_RANKED_HUNT_EVENT);
         }
         this.updateRankedHuntStats();
      }
      
      private function updateRankedHuntStats() : void
      {
         this.updateInfoField(SimpleWindow.WINDOW_CLASS_RANKED_HUNT_EVENT,SimpleContainer.CLASS_RANKED_HUNT_EVENT,SimpleElement.TYPE_RANKED_HUNT_POINTS);
         this.updateInfoField(SimpleWindow.WINDOW_CLASS_RANKED_HUNT_EVENT,SimpleContainer.CLASS_RANKED_HUNT_EVENT_COL_2,SimpleElement.TYPE_CLAN_RANKED_CLAN_POINTS);
      }
      
      public function updateQuestWindow() : void
      {
         var _loc1_:SimpleWindow = this.createQuestWindow();
         var _loc2_:Quest = this.main.getQuestManager().privilegedQuest;
         var _loc3_:QuestTree = this.getQuestTree();
         _loc3_.quest = _loc2_;
         _loc3_.update();
         _loc3_.updateBranches();
         _loc1_.setDimension(_loc3_.width,_loc3_.visibleHeight + 24);
         var _loc4_:QuestDotList = this.getQuestDotList();
         _loc4_.x = _loc1_.getWindow().width - _loc4_.width - 16;
      }
      
      public function addGUI() : void
      {
         if(this.guiInit)
         {
            return;
         }
         this.guiInit = true;
         this.menuManager = new MenuManager(this);
         this.main.screenManager.mainmenuLayer.addChild(this.menuManager);
         this.createLogoutWindow();
         this.createHelpWindow();
         this.createTradeWindow();
         this._refinementManager = new RefinementManager(this);
         this.createSpacemapWindow();
         this.createNAZDisplay();
         if(!Settings.playMusic)
         {
            AudioManager.playSoundEffect(14);
         }
         AudioManager.playSoundEffect(20);
      }
      
      public function createTopMenu() : void
      {
         if(this.topMenu == null)
         {
            this.topMenu = new TopMenu(this);
            this.topMenu.mouseEnabled = false;
            this.main.screenManager.topmenuLayer.addChild(this.topMenu);
         }
      }
      
      private function handleChatLoadingComplete(param1:Event) : void
      {
         var _loc7_:Rectangle = null;
         this.chatLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE,this.handleChatLoadingComplete);
         this.globalchat = MovieClip(this.chatLoader.content);
         var _loc2_:String = Settings.language;
         if(_loc2_ == "dev")
         {
            _loc2_ = "de";
         }
         if(_loc2_ == "br")
         {
            _loc2_ = "pt";
         }
         if(_loc2_ == "us")
         {
            _loc2_ = "en";
         }
         var _loc3_:SimpleWindow = this.createWindow(SimpleWindow.WINDOW_CLASS_CHAT);
         _loc3_.addEventListener(SimpleWindow.ON_RESIZED,this.handleWindowResized);
         _loc3_.addEventListener(SimpleWindow.ON_RESIZE,this.onResizeChatWindow);
         _loc3_.addEventListener(SimpleWindow.ON_MINIMIZE,this.onMinimizeChat);
         _loc3_.addEventListener(SimpleWindow.ON_MAXIMIZED,this.onMaximizeChat);
         var _loc4_:SimpleContainer = new SimpleContainer(this,SimpleContainer.CLASS_CHAT);
         var _loc5_:SimpleElement = new SimpleElement(SimpleElement.TYPE_CHAT);
         var _loc6_:Boolean = false;
         if(Hero.level <= 4)
         {
            _loc6_ = true;
         }
         this.globalchat.initChatSecure(Hero.username,Hero.userID,Hero.sessionID,Settings.projectID,_loc2_,Hero.clan,Hero.factionID,new Point(14,30),new Rectangle(0,0,ScreenManager.getScreenWidth(),ScreenManager.getScreenHeight()),false,"http://" + Settings.chatHost + "/gamechat/as3",0,false,0,0,false,_loc6_);
         this.globalchat.addEventListener("ChatEvent.ALL_LOADED",this.handleChatLoaded);
         this.globalchat.addEventListener("ChatEvent.CONNECTED",this.handleChatConnected);
         if(!_loc3_.isMaximized())
         {
            this.globalchat.visible = false;
         }
         _loc5_.addChild(this.globalchat);
         _loc4_.addElement(_loc5_,SimpleContainer.NO_ALIGN);
         _loc3_.addContainer(_loc4_);
      }
      
      private function handleChatLoaded(param1:Event) : void
      {
         this.onResizeChatWindow(null);
      }
      
      private function handleChatConnected(param1:Event) : void
      {
         this.isChatConnected = true;
         if(this.main.getGroupManager().isInGroup())
         {
            this.main.getGroupManager().joinGroupChat();
         }
      }
      
      private function onResizeChatWindow(param1:Event) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_CHAT);
         if(this.globalchat != null && _loc2_ != null)
         {
            this.globalchat.setSize(_loc2_.getWindowDimension().x - 10,_loc2_.getWindowDimension().y - 20);
         }
      }
      
      private function onMinimizeChat(param1:Event) : void
      {
         if(this.globalchat != null)
         {
            this.globalchat.visible = false;
         }
      }
      
      private function onMaximizeChat(param1:Event) : void
      {
         if(this.globalchat != null)
         {
            this.globalchat.visible = true;
         }
      }
      
      public function getMain() : Main
      {
         return this.main;
      }
      
      public function getMenuManager() : MenuManager
      {
         return this.menuManager;
      }
      
      public function getQuestMenu() : SimpleWindow
      {
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM);
         if(_loc1_ == null)
         {
            this.createQuestWindow();
         }
         return _loc1_;
      }
      
      public function createMinimapWindow() : void
      {
         if(!Settings.createMinimap)
         {
            return;
         }
         var _loc1_:SimpleWindow = this.createWindow(SimpleWindow.WINDOW_CLASS_MINIMAP);
         _loc1_.addEventListener(SimpleWindow.ZOOM_IN,this.onZoomIn);
         _loc1_.addEventListener(SimpleWindow.ZOOM_OUT,this.onZoomOut);
         _loc1_.addEventListener(SimpleWindow.ON_MAXIMIZED,this.onMinimapMaximized);
         _loc1_.addEventListener(SimpleWindow.ON_MINIMIZED,this.onMinimapMinimized);
      }
      
      private function onMinimapMaximized(param1:Event) : void
      {
         var _loc3_:MiniMap = null;
         var _loc2_:Map = this.main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc3_ = _loc2_.getMinimapManager().getMiniMap();
            _loc3_.startTimer();
         }
      }
      
      private function onMinimapMinimized(param1:Event) : void
      {
         var _loc3_:MiniMap = null;
         var _loc2_:Map = this.main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc3_ = _loc2_.getMinimapManager().getMiniMap();
            _loc3_.stopTimer();
         }
      }
      
      public function getWindow(param1:int) : SimpleWindow
      {
         return this.windows[int(param1)];
      }
      
      public function updateInfoField(param1:int, param2:int, param3:int) : void
      {
         var _loc4_:SimpleWindow = null;
         var _loc5_:SimpleWindow = null;
         var _loc6_:SimpleWindow = null;
         var _loc7_:InfoContainer = null;
         var _loc8_:InfoContainer = null;
         switch(param1)
         {
            case SimpleWindow.WINDOW_CLASS_USER:
               _loc4_ = this.getWindow(SimpleWindow.WINDOW_CLASS_USER);
               if(_loc4_ != null)
               {
                  InfoContainer(_loc4_.getContainer(param2)).updateInfoField(param3);
               }
               break;
            case SimpleWindow.WINDOW_CLASS_SHIP:
               _loc5_ = this.getWindow(SimpleWindow.WINDOW_CLASS_SHIP);
               if(_loc5_ != null)
               {
                  _loc7_ = InfoContainer(_loc5_.getContainer(param2));
                  if(_loc7_ != null)
                  {
                     _loc7_.updateInfoField(param3);
                  }
               }
               break;
            case SimpleWindow.WINDOW_CLASS_RANKED_HUNT_EVENT:
               _loc6_ = this.getWindow(SimpleWindow.WINDOW_CLASS_RANKED_HUNT_EVENT);
               if(_loc6_ != null)
               {
                  _loc8_ = InfoContainer(_loc6_.getContainer(param2));
                  if(_loc8_ != null)
                  {
                     _loc8_.updateInfoField(param3);
                  }
               }
         }
      }
      
      public function updateInfoFieldView() : void
      {
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_SHIP);
         var _loc2_:InfoContainer = InfoContainer(_loc1_.getContainer(SimpleContainer.CONTAINER_CLASS_HERO_INFO_0));
         if(_loc2_ != null)
         {
            _loc2_.updateInfoFieldView();
            _loc2_.setPredefinedPosition();
         }
         _loc2_ = InfoContainer(_loc1_.getContainer(SimpleContainer.CONTAINER_CLASS_HERO_INFO_1));
         if(_loc2_ != null)
         {
            _loc2_.updateInfoFieldView();
            _loc2_.setPredefinedPosition();
         }
         _loc1_.setPredefinedDimension();
      }
      
      public function closeWindow(param1:SimpleWindow) : void
      {
         this.removeFromLeftDynamicSlot(param1.getID());
         param1.cleanup();
         delete this.windows[int(param1.getID())];
      }
      
      public function deleteWindow(param1:int) : void
      {
         delete this.windows[param1];
      }
      
      public function handleDeleteWindow(param1:Event) : void
      {
         var _loc2_:SimpleWindow = param1.currentTarget as SimpleWindow;
         delete this.windows[int(_loc2_.getID())];
      }
      
      public function createBannerWindow(param1:String, param2:String = "n") : void
      {
         var _loc3_:BannerAdPattern = PatternManager.bannerAdPatterns[param1] as BannerAdPattern;
         if(_loc3_ == null)
         {
            return;
         }
         var _loc4_:int = _loc3_.windowID;
         var _loc5_:SimpleWindow = this.windows[int(_loc4_)];
         if(_loc5_ != null)
         {
            return;
         }
         var _loc6_:BannerAdWindow = new BannerAdWindow(this,_loc4_,param1,param2);
         _loc6_.attemptToShow();
         var _loc7_:String = BPLocale.getText("title_bannerad");
         _loc6_.label.text = _loc7_;
         this.windows[int(_loc4_)] = _loc6_;
      }
      
      public function prepareSpecialOffers() : void
      {
         BannerAdLazyLoader.loadBannerAdPatternAddon();
         Settings.specialOffersPrepared = true;
         this.main.getConnectionManager().sendRawCommand(ClientCommands.SET_SPECIAL_OFFERS_AVAILABLE);
      }
      
      public function createVideoWindow(param1:Array, param2:int, param3:int, param4:int, param5:Boolean = true, param6:String = "n", param7:int = 400, param8:int = 183) : void
      {
         var _loc12_:String = null;
         if(param2 < 1000)
         {
            return;
         }
         var _loc9_:VideoWindow = this.windows[int(param2)];
         if(_loc9_ != null)
         {
            _loc9_.languageKeys = param1;
            _loc9_.startTextWriter();
            return;
         }
         var _loc10_:VideoWindow = new VideoWindow(this,param2,param3,param4,param6,param5);
         _loc10_.addWindowDimension(new Point(param7,param8));
         _loc10_.setPredefinedDimension();
         _loc10_.languageKeys = param1;
         _loc10_.attemptToShow();
         var _loc11_:String = "";
         if(param4 == VideoElement.CLASS_COMMANDER)
         {
            _loc11_ = BPLocale.getText("video_window_header");
            _loc12_ = BPLocale.getText("video_name_" + param3);
            if(_loc12_.length > 0)
            {
               _loc11_ += " [" + _loc12_ + "]";
            }
         }
         else if(param4 == VideoElement.CLASS_HELPMOVIE)
         {
            _loc11_ = BPLocale.getText("title_helpvideo");
         }
         _loc10_.label.text = _loc11_;
         this.windows[int(param2)] = _loc10_;
      }
      
      public function removeBannerWindow(param1:String) : void
      {
         var _loc2_:BannerAdPattern = PatternManager.bannerAdPatterns[param1] as BannerAdPattern;
         if(_loc2_ == null)
         {
            return;
         }
         var _loc3_:int = _loc2_.windowID;
         var _loc4_:BannerAdWindow = this.windows[int(_loc3_)];
         if(_loc4_ != null)
         {
            _loc4_.hide();
            delete this.windows[int(_loc3_)];
         }
      }
      
      public function removeVideoWindow(param1:int) : void
      {
         var _loc2_:VideoWindow = this.windows[int(param1)];
         if(_loc2_ != null)
         {
            _loc2_.hide();
         }
      }
      
      public function showNextPageOfVideoWindow(param1:int) : void
      {
         var _loc2_:VideoWindow = this.windows[int(param1)];
         _loc2_.nextPage();
      }
      
      public function createWindow(param1:int) : SimpleWindow
      {
         var _loc2_:SimpleWindow = null;
         var _loc3_:XML = null;
         var _loc4_:int = 0;
         var _loc5_:SWFFinisher = null;
         var _loc6_:String = null;
         var _loc7_:Boolean = false;
         var _loc8_:Boolean = false;
         var _loc9_:Boolean = false;
         var _loc10_:Boolean = false;
         var _loc11_:Boolean = false;
         var _loc12_:Boolean = false;
         var _loc13_:int = 0;
         var _loc14_:Boolean = false;
         var _loc15_:String = null;
         var _loc16_:String = null;
         var _loc17_:int = 0;
         var _loc18_:Boolean = false;
         var _loc19_:Boolean = false;
         var _loc20_:Boolean = false;
         var _loc21_:String = null;
         var _loc22_:Boolean = false;
         var _loc23_:WindowSetting = null;
         var _loc24_:String = null;
         var _loc25_:int = 0;
         var _loc26_:int = 0;
         var _loc27_:ResolutionPattern = null;
         var _loc28_:WindowPattern = null;
         var _loc29_:Point = null;
         var _loc30_:Bitmap = null;
         var _loc31_:int = 0;
         var _loc32_:XML = null;
         var _loc33_:XML = null;
         var _loc34_:InfoContainer = null;
         var _loc35_:int = 0;
         var _loc36_:int = 0;
         var _loc37_:int = 0;
         var _loc38_:XML = null;
         var _loc39_:Bitmap = null;
         var _loc40_:String = null;
         var _loc41_:Array = null;
         var _loc42_:int = 0;
         var _loc43_:BarStatus = null;
         var _loc44_:InfoField = null;
         var _loc45_:String = null;
         var _loc46_:String = null;
         var _loc47_:SimpleContainer = null;
         if(this.windows[int(param1)] != null)
         {
            return null;
         }
         for each(_loc3_ in Main.gameXML.windows.window)
         {
            _loc4_ = int(_loc3_.@id);
            if(_loc4_ == param1)
            {
               _loc5_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("window1"));
               _loc6_ = null;
               _loc7_ = false;
               _loc8_ = false;
               _loc9_ = false;
               _loc10_ = false;
               _loc11_ = true;
               _loc12_ = true;
               _loc13_ = SimpleWindow.SLOT_TYPE_NO_SLOT;
               _loc14_ = false;
               _loc15_ = "comb02_std.png";
               _loc16_ = "comb02_hover.png";
               _loc17_ = SimpleWindow.WINDOW_TYPE_NORMAL;
               _loc18_ = false;
               _loc19_ = false;
               _loc20_ = false;
               _loc21_ = null;
               _loc22_ = false;
               if(_loc3_.@closeable.length() > 0)
               {
                  _loc7_ = Main.parseBooleanFromString(_loc3_.@closeable);
               }
               if(_loc3_.@resizable.length() > 0)
               {
                  _loc8_ = Main.parseBooleanFromString(_loc3_.@resizable);
               }
               if(_loc3_.@zoomable.length() > 0)
               {
                  _loc9_ = Main.parseBooleanFromString(_loc3_.@zoomable);
               }
               if(_loc3_.@maximizeOnCreate.length() > 0)
               {
                  _loc20_ = Main.parseBooleanFromString(_loc3_.@maximizeOnCreate);
               }
               if(_loc3_.@helpKey.length() > 0)
               {
                  _loc21_ = _loc3_.@helpKey;
               }
               if(_loc3_.@shortcut.length() > 0)
               {
                  _loc6_ = _loc3_.@shortcut;
               }
               _loc23_ = this.getWindowSetting(param1);
               if(!_loc20_)
               {
                  if(_loc23_ != null)
                  {
                     if(_loc23_.isMaximized())
                     {
                        _loc10_ = false;
                     }
                     else
                     {
                        _loc10_ = true;
                     }
                  }
                  else if(_loc3_.@startMinimized.length() > 0)
                  {
                     _loc10_ = Main.parseBooleanFromString(_loc3_.@startMinimized);
                  }
               }
               if(_loc3_.@maximizeOnClick.length() > 0)
               {
                  _loc11_ = Main.parseBooleanFromString(_loc3_.@maximizeOnClick);
               }
               if(_loc3_.@minimizeOnClick.length() > 0)
               {
                  _loc12_ = Main.parseBooleanFromString(_loc3_.@minimizeOnClick);
               }
               _loc24_ = _loc3_.@slotType;
               if(_loc24_ == "static")
               {
                  _loc13_ = SimpleWindow.SLOT_TYPE_STATIC;
               }
               else if(_loc24_ == "left")
               {
                  _loc13_ = SimpleWindow.SLOT_TYPE_DYNAMIC_LEFT;
               }
               else if(_loc24_ == "right")
               {
                  _loc13_ = SimpleWindow.SLOT_TYPE_DYNAMIC_RIGHT;
               }
               if(_loc3_.@hudToggle.length() > 0)
               {
                  _loc18_ = Main.parseBooleanFromString(_loc3_.@hudToggle);
               }
               if(_loc3_.@alwaysInFront.length() > 0)
               {
                  _loc14_ = Main.parseBooleanFromString(_loc3_.@alwaysInFront);
               }
               if(_loc3_.@bgNormalIcon.length() > 0)
               {
                  _loc15_ = _loc3_.@bgNormalIcon;
               }
               if(_loc3_.@bgHoverIcon.length() > 0)
               {
                  _loc16_ = _loc3_.@bgHoverIcon;
               }
               if(_loc3_.@windowType.length() > 0)
               {
                  _loc17_ = int(_loc3_.@windowType);
               }
               if(_loc3_.@saveSettings.length() > 0)
               {
                  _loc19_ = Boolean(_loc3_.@saveSettings);
               }
               if(_loc3_.@transparency.length() > 0)
               {
                  _loc22_ = Boolean(_loc3_.@transparency);
               }
               _loc2_ = new SimpleWindow(this,param1,_loc5_,_loc8_,true,_loc9_,_loc7_,_loc11_,_loc12_,_loc13_,_loc14_,_loc15_,_loc16_,_loc17_,_loc19_,_loc6_,_loc22_);
               if(_loc21_ != null)
               {
                  TooltipControl.getInstance().addStickyToolTip(_loc2_,BPLocale.getText(_loc21_),this.getMain().x,this.getMain().y);
               }
               if(_loc13_ == SimpleWindow.SLOT_TYPE_DYNAMIC_LEFT)
               {
                  if(_loc18_)
                  {
                     this.leftDynamicSlotIDs.push(param1);
                  }
               }
               if(_loc13_ == SimpleWindow.SLOT_TYPE_DYNAMIC_RIGHT)
               {
                  this.rightDynamicSlotIDs.push(param1);
               }
               this.windows[int(param1)] = _loc2_;
               _loc25_ = 0;
               _loc26_ = 0;
               _loc27_ = PatternManager.resolutionPatterns[Settings.resolutionID];
               _loc28_ = _loc27_.getWindowPattern(param1);
               _loc29_ = resizableWindowSizes[param1];
               if(_loc23_ != null)
               {
                  _loc25_ = _loc23_.getX();
               }
               else if(_loc28_.isCenterHorizontal())
               {
                  _loc25_ = ScreenManager.getHalfScreenWidth() - _loc3_.@width_0 / 2;
               }
               else
               {
                  _loc25_ = _loc28_.getXPos();
               }
               if(_loc23_ != null)
               {
                  _loc26_ = _loc23_.getY();
               }
               else if(_loc28_.isCenterVertical())
               {
                  _loc26_ = ScreenManager.getHalfScreenHeight() - _loc3_.@height_0 / 2;
               }
               else
               {
                  _loc26_ = _loc28_.getYPos();
               }
               _loc30_ = null;
               if(_loc3_.@icon.length() > 0)
               {
                  _loc30_ = _loc5_.getEmbededBitmap(_loc3_.@icon);
               }
               else
               {
                  _loc30_ = _loc5_.getEmbededBitmap("info_icon.png");
               }
               _loc2_.setIcon(_loc30_);
               _loc2_.setLabelText(_loc3_.@titleKey);
               _loc2_.x = _loc25_;
               _loc2_.y = _loc26_;
               _loc2_.setLastPosition();
               for each(_loc32_ in _loc3_.infoFieldContainer)
               {
                  _loc31_ = int(_loc32_.@id);
                  _loc34_ = new InfoContainer(this,_loc31_);
                  _loc35_ = 100;
                  _loc36_ = SimpleContainer.ALIGN_VERTICAL;
                  if(_loc32_.@align.length() > 0)
                  {
                     if(_loc32_.@align == "horizontal")
                     {
                        _loc36_ = SimpleContainer.ALIGN_HORIZONTAL;
                     }
                     else if(_loc32_.@align == "noAlign")
                     {
                        _loc36_ = SimpleContainer.NO_ALIGN;
                     }
                  }
                  if(_loc32_.@x_0.length() > 0 && _loc32_.@y_0.length() > 0)
                  {
                     _loc34_.addPredefinedPosition(new Point(_loc32_.@x_0,_loc32_.@y_0));
                  }
                  if(_loc32_.@x_1.length() > 0 && _loc32_.@y_1.length() > 0)
                  {
                     _loc34_.addPredefinedPosition(new Point(_loc32_.@x_1,_loc32_.@y_1));
                  }
                  if(_loc32_.@textFieldWidth.length() > 0)
                  {
                     _loc35_ = int(_loc32_.@textFieldWidth);
                  }
                  for each(_loc38_ in _loc32_.infoField)
                  {
                     _loc4_ = int(_loc38_.@id);
                     if(_loc38_.@linkage.length() > 0)
                     {
                        _loc45_ = _loc38_.@linkage;
                        _loc5_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
                        _loc39_ = _loc5_.getEmbededBitmap(_loc45_);
                     }
                     else
                     {
                        _loc39_ = new Bitmap(new BitmapData(24,24,true,0));
                     }
                     _loc40_ = null;
                     if(_loc38_.@languageKey.length() > 0)
                     {
                        _loc40_ = _loc38_.@languageKey;
                     }
                     _loc41_ = null;
                     if(_loc38_.@bar.length() > 0)
                     {
                        _loc46_ = _loc38_.@bar;
                        _loc41_ = _loc46_.split(",");
                     }
                     _loc42_ = InfoField.MODE_BAR;
                     _loc43_ = this.getBarStatus(_loc4_);
                     if(_loc43_ != null)
                     {
                        _loc42_ = _loc43_.status;
                     }
                     if(_loc38_.@width.length() > 0)
                     {
                        _loc37_ = int(_loc38_.@width);
                     }
                     else
                     {
                        _loc37_ = -1;
                     }
                     _loc44_ = new InfoField(this,_loc4_,_loc39_,_loc37_,_loc41_,_loc40_,_loc42_);
                     switch(_loc4_)
                     {
                        case SimpleElement.TYPE_JUMP_VOUCHERS:
                        case SimpleElement.TYPE_LEVEL:
                        case SimpleElement.TYPE_CONFIGURATION:
                           _loc44_.amountSearchPattern = /%COUNT%/;
                           break;
                        case SimpleElement.TYPE_BOOTY_KEYS:
                           _loc44_.amountSearchPattern = /%AMOUNT%/;
                     }
                     if(_loc38_.@textColor.length() > 0)
                     {
                        _loc44_.setColor(parseInt("0x" + String(_loc38_.@textColor)));
                     }
                     _loc34_.addElement(_loc44_,_loc36_,1);
                  }
                  _loc2_.addContainer(_loc34_);
                  _loc34_.setPredefinedPosition();
               }
               for each(_loc33_ in _loc3_.containers.simpleContainer)
               {
                  _loc31_ = int(_loc33_.@id);
                  _loc47_ = new SimpleContainer(this,_loc31_);
                  if(_loc33_.@x.length() > 0)
                  {
                     _loc47_.x = int(_loc33_.@x);
                  }
                  if(_loc33_.@y.length() > 0)
                  {
                     _loc47_.y = int(_loc33_.@y);
                  }
                  _loc2_.addContainer(_loc47_);
               }
               ScreenManager.getWindowLayer().addChild(_loc2_);
               if(_loc10_)
               {
                  _loc2_.minimize(false);
               }
               if(_loc8_ && _loc29_ != null && param1 != SimpleWindow.WINDOW_CLASS_PET)
               {
                  _loc2_.addWindowDimension(new Point(_loc29_.x,_loc29_.y));
               }
               else
               {
                  if(_loc3_.@width_0.length() > 0 && _loc3_.@height_0.length() > 0)
                  {
                     _loc2_.addWindowDimension(new Point(_loc3_.@width_0,_loc3_.@height_0));
                  }
                  if(_loc3_.@width_1.length() > 0 && _loc3_.@height_1.length() > 0)
                  {
                     _loc2_.addWindowDimension(new Point(_loc3_.@width_1,_loc3_.@height_1));
                  }
               }
               _loc2_.setPredefinedDimension();
            }
         }
         return _loc2_;
      }
      
      public function createSettingsWindow() : void
      {
         var _loc2_:SettingsWindowDecorator = null;
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_SETTINGS);
         if(_loc1_ == null)
         {
            _loc1_ = this.createWindow(SimpleWindow.WINDOW_CLASS_SETTINGS);
            _loc2_ = new SettingsWindowDecorator(this);
            _loc2_.decorate(_loc1_);
         }
      }
      
      public function createNetworkMonitorWindow() : void
      {
         var _loc2_:NetworkMonitorWindowDecorator = null;
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_NETWORK_MONITOR);
         if(_loc1_ == null)
         {
            _loc1_ = this.createWindow(SimpleWindow.WINDOW_CLASS_NETWORK_MONITOR);
            _loc2_ = new NetworkMonitorWindowDecorator(this);
            _loc2_.decorate(_loc1_);
            this.windows[SimpleWindow.WINDOW_CLASS_NETWORK_MONITOR] = _loc1_;
         }
      }
      
      public function setNetworkConnectionStatus(param1:Boolean) : void
      {
         var _loc2_:SimpleElement = this.windows[SimpleWindow.WINDOW_CLASS_NETWORK_MONITOR].getContainer(SimpleContainer.CLASS_LOG).getElement(SimpleElement.CONNECTION_STATUS);
         var _loc3_:TextField = TextField(_loc2_.getChildAt(0));
         _loc3_.text = BPLocale.getText("label_conn_status").replace(/%CONN_STATUS%/,param1.toString());
      }
      
      public function setNetworkConnectionIP(param1:String) : void
      {
         var _loc2_:SimpleElement = this.windows[SimpleWindow.WINDOW_CLASS_NETWORK_MONITOR].getContainer(SimpleContainer.CLASS_LOG).getElement(SimpleElement.CURRENT_IP);
         var _loc3_:TextField = TextField(_loc2_.getChildAt(0));
         _loc3_.text = BPLocale.getText("label_cur_ip").replace(/%CUR_IP%/,param1);
      }
      
      public function createJackpotBattleStatusWindow() : void
      {
         var _loc2_:JackpotBattleWindowDecorator = null;
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_JACKPOTBATTLE);
         if(_loc1_ == null)
         {
            _loc1_ = this.createWindow(SimpleWindow.WINDOW_CLASS_JACKPOTBATTLE);
            _loc2_ = new JackpotBattleWindowDecorator(this);
            _loc2_.decorate(_loc1_);
            this.windows[SimpleWindow.WINDOW_CLASS_JACKPOTBATTLE] = _loc1_;
         }
      }
      
      public function setJackpotBattleRemainingPlayers(param1:int) : void
      {
         var _loc2_:SimpleElement = this.windows[SimpleWindow.WINDOW_CLASS_JACKPOTBATTLE].getContainer(SimpleContainer.CLASS_LOG).getElement(SimpleElement.TYPE_LOG_TEXTAREA);
         var _loc3_:TextField = TextField(_loc2_.getChildAt(0));
         _loc3_.text = BPLocale.getText("label_players_left").replace(/%PLAYERS_REMAINING%/,param1.toString());
      }
      
      public function createLogWindow() : void
      {
         var _loc2_:SimpleContainer = null;
         var _loc3_:MovieClip = null;
         var _loc4_:SimpleElement = null;
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_LOG);
         if(_loc1_ == null)
         {
            _loc1_ = this.createWindow(SimpleWindow.WINDOW_CLASS_LOG);
            _loc1_.addEventListener(SimpleWindow.ON_RESIZE,this.onResizeLogWindow);
            _loc1_.addEventListener(SimpleWindow.ON_RESIZED,this.handleWindowResized);
            _loc2_ = new SimpleContainer(this,SimpleContainer.CLASS_LOG);
            _loc3_ = new MovieClip();
            _loc3_.mouseEnabled = Main.mouseEventsEnabled;
            this.logTextArea = new TextArea();
            this.logTextArea.editable = false;
            this.logTextArea.textField.antiAliasType = AntiAliasType.ADVANCED;
            this.logTextArea.setStyle("textFormat",Styles.logFmt);
            this.logTextArea.setStyle("embedFonts",Styles.logEmbed);
            _loc3_.addChild(this.logTextArea);
            _loc4_ = new SimpleElement(SimpleElement.TYPE_LOG_TEXTAREA);
            _loc4_.addChild(_loc3_);
            _loc2_.addElement(_loc4_);
            _loc1_.addContainer(_loc2_);
            _loc2_.addPredefinedPosition(new Point(15,30));
            _loc2_.setPredefinedPosition();
            this.writeToLog(BPLocale.getText("log_boot_message"));
         }
      }
      
      public function createQuestWindow() : SimpleWindow
      {
         var _loc2_:QuestTree = null;
         var _loc3_:QuestDotList = null;
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM);
         if(_loc1_ == null)
         {
            _loc1_ = this.createWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM);
            _loc1_.addEventListener(SimpleWindow.ON_RESIZE,this.onResizeQuestMenu);
            _loc2_ = new QuestTree(this.main);
            _loc2_.x = 8;
            _loc2_.y = 24;
            _loc2_.isDefaultVisible = true;
            _loc2_.setSize(_loc1_.getWindow().width - 20,_loc1_.getWindow().height - 30);
            _loc1_.addContainer(_loc2_);
            _loc3_ = new QuestDotList(this.main);
            _loc3_.y = 8;
            _loc1_.addContainer(_loc3_);
         }
         return _loc1_;
      }
      
      public function createCommandLineInterface() : void
      {
         var _loc2_:TextArea = null;
         var _loc3_:TextInput = null;
         var _loc4_:Point = null;
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_COMMAND_LINE);
         if(_loc1_ == null)
         {
            _loc1_ = this.createWindow(SimpleWindow.WINDOW_CLASS_COMMAND_LINE);
            _loc1_.addEventListener(SimpleWindow.ON_RESIZE,this.handleResizeCommandLineInterface);
            _loc1_.addEventListener(SimpleWindow.ON_RESIZED,this.handleWindowResized);
            _loc2_ = new TextArea();
            _loc3_ = new TextInput();
            this._cliLog = new CLILog(this.main);
            this._cliLog.setOutputField(_loc2_);
            this._cliLog.setInputField(_loc3_);
            _loc1_.addContainer(this._cliLog);
            this._cliLog.addPredefinedPosition(new Point(15,30));
            this._cliLog.setPredefinedPosition();
            _loc4_ = _loc1_.getWindowDimension();
            this._cliLog.setSize(_loc4_.x - 16,_loc4_.y - 24);
            this._cliLog.writeOutput("CLI initialized");
            this._cliLog.initSessionCookie();
            CommandLog.instance.addTarget(this._cliLog);
         }
      }
      
      public function createGroupWindow() : void
      {
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_GROUP_SYSTEM);
         if(_loc1_ == null)
         {
            _loc1_ = this.createWindow(SimpleWindow.WINDOW_CLASS_GROUP_SYSTEM);
            this._groupUI = new GroupUI(this.main);
            _loc1_.addContainer(this._groupUI);
            this._groupUI.addPredefinedPosition(new Point(15,30));
            this._groupUI.setPredefinedPosition();
            this._groupUI.parentWindow = _loc1_;
         }
      }
      
      public function createTradeWindow() : void
      {
         var _loc1_:int = 0;
         var _loc2_:String = null;
         var _loc3_:String = null;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:SimpleContainer = null;
         var _loc10_:String = null;
         var _loc11_:MovieClip = null;
         var _loc12_:SWFFinisher = null;
         var _loc13_:String = null;
         var _loc14_:String = null;
         var _loc15_:Boolean = false;
         var _loc16_:XML = null;
         var _loc17_:SWFFinisher = null;
         var _loc18_:ButtonElement = null;
         var _loc19_:ButtonElement = null;
         var _loc20_:int = 0;
         var _loc21_:OreTradeModule = null;
         var _loc6_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_TRADE);
         if(_loc6_ == null)
         {
            _loc6_ = this.createWindow(SimpleWindow.WINDOW_CLASS_TRADE);
            _loc7_ = 0;
            _loc8_ = 0;
            _loc9_ = new SimpleContainer(this,SimpleContainer.CLASS_TRADE_ORE);
            _loc15_ = false;
            for each(_loc16_ in Main.gameXML.tradeWindow.ores.ore)
            {
               _loc1_ = int(_loc16_.@type);
               _loc2_ = _loc16_.@languageKey;
               _loc3_ = _loc16_.@pricetagTooltipKey;
               _loc4_ = _loc16_.@gaintagTooltipKey;
               _loc5_ = _loc16_.@notavailableTooltipKey;
               _loc13_ = _loc16_.@pricetag;
               _loc14_ = _loc16_.@gaintag;
               if(_loc16_.@isRatio.length() > 0)
               {
                  _loc15_ = Main.parseBooleanFromString(_loc16_.@isRatio);
               }
               _loc21_ = new OreTradeModule(this,_loc1_,_loc2_,_loc13_,_loc14_,_loc3_,_loc4_,_loc5_,_loc15_);
               _loc21_.x = 80 * _loc7_;
               _loc7_++;
               _loc9_.addElement(_loc21_,SimpleContainer.NO_ALIGN,1);
               _loc15_ = false;
            }
            _loc6_.addContainer(_loc9_);
            _loc9_.addPredefinedPosition(new Point(10,35));
            _loc9_.setPredefinedPosition();
            _loc17_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
            _loc18_ = new ButtonElement(ButtonElement.TYPE_TRADE_SHOP,BPLocale.getText("label_trade_window_shop_button"),_loc17_.getEmbededMovieClip("generalButton"),Styles.plainBigFmt,true);
            _loc19_ = new ButtonElement(ButtonElement.TYPE_TRADE_URIDIUM,BPLocale.getText("label_trade_window_uridium_button"),_loc17_.getEmbededMovieClip("generalButton"),Styles.plainBigFmt,true);
            _loc20_ = 15;
            _loc18_.width = 270;
            _loc19_.width = 270;
            _loc18_.x = 5;
            _loc19_.x = _loc18_.width + _loc20_;
            _loc19_.y = _loc9_.height + 5;
            _loc18_.y = _loc9_.height + 5;
            _loc18_.addEventListener(MouseEvent.CLICK,this.handleShopButtonClicked);
            _loc19_.addEventListener(MouseEvent.CLICK,this.handleUridiumButtonClicked);
            _loc9_.addElement(_loc18_,SimpleContainer.NO_ALIGN);
            _loc9_.addElement(_loc19_,SimpleContainer.NO_ALIGN);
            _loc6_.addEventListener(SimpleWindow.ON_MAXIMIZE_CLICKED,this.onTradeWindowMaximizeClicked);
         }
      }
      
      private function onTradeWindowMaximizeClicked(param1:Event) : void
      {
         this.getMain().getConnectionManager().sendCommand(ServerCommands.GET_ORE_PRICES);
      }
      
      private function onTradeWindowMinimizeClicked(param1:SimpleWindow) : void
      {
      }
      
      private function handleUridiumButtonClicked(param1:MouseEvent) : void
      {
         var _loc2_:String = "indexInternal.es?action=internalPayment";
         if(ExternalInterface.available)
         {
            ExternalInterface.call("referToURL",Settings.dynamicHost + _loc2_);
         }
      }
      
      private function handleShopButtonClicked(param1:MouseEvent) : void
      {
         var _loc2_:String = "indexInternal.es?action=internalDock&tpl=internalDockShips";
         if(ExternalInterface.available)
         {
            ExternalInterface.call("referToURL",Settings.dynamicHost + _loc2_);
         }
      }
      
      public function showTradeWindow() : void
      {
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_TRADE);
         if(_loc1_ != null && !_loc1_.isMaximized())
         {
            _loc1_.maximize();
         }
      }
      
      public function updateTradeWindow() : void
      {
         var _loc6_:OreTradeModule = null;
         var _loc7_:OrePattern = null;
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_TRADE);
         if(_loc1_ == null || !_loc1_.isMaximizeClicked() && !_loc1_.isMaximized())
         {
            return;
         }
         var _loc2_:Array = Hero.getOres([OrePattern.ORE_PROMETIUM,OrePattern.ORE_ENDURIUM,OrePattern.ORE_TERBIUM,OrePattern.ORE_PROMETID,OrePattern.ORE_DURANIUM,OrePattern.ORE_PROMERIUM,OrePattern.ORE_PALLADIUM]);
         if(_loc2_ == null)
         {
            return;
         }
         var _loc3_:SimpleContainer = _loc1_.getContainer(SimpleContainer.CLASS_TRADE_ORE);
         var _loc4_:Array = _loc3_.getAllElements();
         var _loc5_:int = 0;
         while(_loc5_ < _loc4_.length)
         {
            if(_loc4_[_loc5_] is OreTradeModule)
            {
               _loc6_ = _loc4_[_loc5_] as OreTradeModule;
               _loc7_ = _loc2_[_loc5_];
               if(_loc7_ != null)
               {
                  _loc6_.setOrePrice(_loc7_.price);
                  _loc6_.setOreCount(_loc7_.count);
               }
            }
            _loc5_++;
         }
      }
      
      public function cleanupTradeInfoWindow(param1:Event) : void
      {
         var _loc6_:SimpleElement = null;
         var _loc2_:SimpleWindow = param1.currentTarget as SimpleWindow;
         _loc2_.removeEventListener(SimpleWindow.ON_CLOSE,this.cleanupTradeInfoWindow);
         var _loc3_:SimpleContainer = _loc2_.getContainer(SimpleContainer.CLASS_TRADE_ORE);
         var _loc4_:Array = _loc3_.getAllElements();
         var _loc5_:int = 0;
         _loc5_ = 0;
         while(_loc5_ < _loc4_.length)
         {
            _loc6_ = _loc4_[_loc5_];
            if(_loc6_ is OreTradeModule)
            {
               OreTradeModule(_loc6_).cleanup();
            }
            else if(_loc6_ is ButtonElement)
            {
               ButtonElement(_loc6_).cleanup();
            }
            _loc5_++;
         }
         _loc3_ = _loc2_.getContainer(SimpleContainer.CLASS_TRADE_WEBLINKS1);
         _loc4_ = _loc3_.getAllElements();
         _loc5_ = 0;
         while(_loc5_ < _loc4_.length)
         {
            _loc6_ = _loc4_[_loc5_];
            if(_loc6_ is WebLinkModule)
            {
               WebLinkModule(_loc6_).cleanup();
            }
            _loc5_++;
         }
         _loc3_ = _loc2_.getContainer(SimpleContainer.CLASS_TRADE_WEBLINKS2);
         _loc4_ = _loc3_.getAllElements();
         _loc5_ = 0;
         while(_loc5_ < _loc4_.length)
         {
            _loc6_ = _loc4_[_loc5_];
            if(_loc6_ is WebLinkModule)
            {
               WebLinkModule(_loc6_).cleanup();
            }
            _loc5_++;
         }
      }
      
      private function onResizeLogWindow(param1:Event) : void
      {
         var _loc2_:SimpleWindow = param1.currentTarget as SimpleWindow;
         this.logTextArea.width = _loc2_.getWindow().width - 30;
         this.logTextArea.height = _loc2_.getWindow().height - 50;
      }
      
      private function handleResizeCommandLineInterface(param1:Event) : void
      {
         var _loc2_:Point = this.getWindow(SimpleWindow.WINDOW_CLASS_COMMAND_LINE).getWindowDimension();
         this._cliLog.setSize(_loc2_.x - 16,_loc2_.y - 24);
      }
      
      private function onResizeQuestMenu(param1:Event) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM);
         var _loc3_:QuestTree = this.getQuestTree();
         _loc2_.setDimension(_loc3_.width,_loc3_.visibleHeight + 24);
      }
      
      public function handleWindowResized(param1:Event) : void
      {
         var _loc4_:SimpleWindow = null;
         var _loc5_:Point = null;
         var _loc2_:String = "";
         var _loc3_:String = ServerCommands.SETTING_PROPERTY_SEPERATOR;
         for each(_loc4_ in this.windows)
         {
            if(_loc4_.isResizable())
            {
               _loc5_ = _loc4_.getWindowDimension();
               _loc2_ += _loc4_.getID() + _loc3_ + _loc5_.x + _loc3_ + _loc5_.y + _loc3_;
            }
         }
         this.main.getConnectionManager().sendCommand(ServerCommands.CLIENT_SETTING,[ServerCommands.SET_RESIZABLE_WINDOWS + ServerCommands.SETTING_KEY_SEPERATOR + Settings.resolutionID,Main.removeCommaAtEnd(_loc2_)]);
      }
      
      private function onZoomIn(param1:Event) : void
      {
         if(this.main.screenManager.map != null)
         {
            this.main.screenManager.map.getMinimapManager().zoomIn();
         }
      }
      
      private function onZoomOut(param1:Event) : void
      {
         if(this.main.screenManager.map != null)
         {
            this.main.screenManager.map.getMinimapManager().zoomOut();
         }
      }
      
      public function loadChat() : void
      {
         var _loc1_:SimpleWindow = null;
         var _loc2_:SimpleContainer = null;
         var _loc3_:SimpleElement = null;
         var _loc4_:* = null;
         if(!Settings.createChat)
         {
            return;
         }
         if(!Settings.displayChat)
         {
            if(this.globalchat != null)
            {
               this.globalchat.cleanup();
               _loc1_ = this.getWindow(SimpleWindow.WINDOW_CLASS_CHAT);
               if(_loc1_ != null)
               {
                  _loc1_.removeEventListener(SimpleWindow.ON_RESIZED,this.handleWindowResized);
                  _loc1_.removeEventListener(SimpleWindow.ON_RESIZE,this.onResizeChatWindow);
                  _loc1_.removeEventListener(SimpleWindow.ON_MINIMIZE,this.onMinimizeChat);
                  _loc1_.removeEventListener(SimpleWindow.ON_MAXIMIZED,this.onMaximizeChat);
                  this.globalchat.removeEventListener("ChatEvent.ALL_LOADED",this.handleChatLoaded);
                  this.globalchat.removeEventListener("ChatEvent.CONNECTED",this.handleChatConnected);
                  _loc2_ = _loc1_.getContainer(SimpleContainer.CLASS_CHAT);
                  _loc3_ = _loc2_.getElement(SimpleElement.TYPE_CHAT);
                  if(_loc3_.contains(this.globalchat))
                  {
                     _loc3_.removeChild(this.globalchat);
                  }
                  this.closeWindow(_loc1_);
               }
               this.globalchat = null;
            }
         }
         else if(this.globalchat == null)
         {
            this.chatLoader = new Loader();
            this.chatLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,this.handleChatLoadingComplete);
            this.chatLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR,this.handleChatLoadingError);
            this.chatLoader.contentLoaderInfo.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.handleChatLoadingError);
            _loc4_ = "http://" + Settings.chatHost + "/gamechat/as3/chat.swf";
            this.chatLoader.load(new URLRequest(_loc4_),new LoaderContext(true));
         }
      }
      
      private function handleChatLoadingError(param1:*) : void
      {
      }
      
      public function createHelpWindow() : void
      {
         this.createWindow(SimpleWindow.WINDOW_CLASS_HELP);
      }
      
      public function createPromptWindow() : SimpleWindow
      {
         this.createWindow(SimpleWindow.WINDOW_CLASS_WARNING_PROMPT);
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_WARNING_PROMPT);
         var _loc2_:SimpleContainer = new SimpleContainer(this,SimpleContainer.CLASS_PROMPT);
         var _loc3_:TextFieldElement = new TextFieldElement(_loc1_.getWindowDimension().x - 32,_loc1_.getWindowDimension().y - 100,new TextFormat(Styles.simpleFmt.font,Styles.simpleFmt.size,16777215),BPLocale.getText("resolutionChange"));
         _loc3_.x = 8;
         _loc3_.y = 32;
         _loc2_.addElement(_loc3_);
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc5_:ButtonElement = new ButtonElement(ButtonElement.TYPE_OK,BPLocale.getText("dest_ok"),_loc4_.getEmbededMovieClip("button1"));
         _loc5_.addEventListener(MouseEvent.CLICK,this.onClosePromptLostButtonClick);
         _loc2_.addElement(_loc5_,SimpleContainer.ALIGN_VERTICAL_CENTER);
         _loc1_.addContainer(_loc2_);
         _loc1_.modal = true;
         _loc1_.setDimension(-1,-1);
         if(this.promptTimer != null)
         {
            this.removePromptTimer();
         }
         this.promptTimer = new Timer(1000,0);
         this.promptTimer.addEventListener(TimerEvent.TIMER,this.handlePromptTimer);
         this.promptTimer.start();
         this.handlePromptTimer(null);
         return _loc1_;
      }
      
      private function handlePromptTimer(param1:TimerEvent) : void
      {
         var _loc6_:Array = null;
         var _loc7_:SimpleElement = null;
         var _loc8_:ButtonElement = null;
         var _loc2_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_WARNING_PROMPT);
         var _loc3_:SimpleContainer = _loc2_.getContainer(SimpleContainer.CLASS_PROMPT);
         var _loc4_:TextFieldElement = TextFieldElement(_loc3_.getElement(SimpleElement.TYPE_TEXT));
         var _loc5_:String = BPLocale.getText("resolutionChange");
         _loc5_ = _loc5_.replace("%SECONDS%",this.promptCountdown--);
         _loc4_.updateText(_loc5_);
         if(this.promptCountdown == -1)
         {
            this.removePromptTimer();
            _loc6_ = _loc3_.getAllElements();
            for each(_loc7_ in _loc6_)
            {
               if(_loc7_.getID() == SimpleElement.TYPE_SIMPLE_BUTTON)
               {
                  _loc8_ = ButtonElement(_loc7_);
                  if(_loc8_.getType() == ButtonElement.TYPE_OK)
                  {
                     _loc8_.addEventListener(MouseEvent.CLICK,this.onClosePromptLostButtonClick);
                  }
               }
            }
            this.closeWindow(this.windows[SimpleWindow.WINDOW_CLASS_WARNING_PROMPT]);
         }
      }
      
      private function removePromptTimer() : void
      {
         if(this.promptTimer != null)
         {
            this.promptTimer.stop();
            this.promptTimer.removeEventListener(TimerEvent.TIMER,this.handlePromptTimer);
            this.promptCountdown = 10;
         }
      }
      
      private function onClosePromptLostButtonClick(param1:MouseEvent) : void
      {
         this.removePromptTimer();
         this.closeWindow(this.windows[SimpleWindow.WINDOW_CLASS_WARNING_PROMPT]);
      }
      
      public function showHeroDestroyedWindow() : void
      {
         AudioManager.playSoundEffect(41);
         var _loc1_:SimpleWindow = this.createWindow(SimpleWindow.WINDOW_CLASS_HERO_DESTROYED);
         _loc1_.alpha = 0;
         var _loc2_:SimpleContainer = new SimpleContainer(this,SimpleContainer.CLASS_HERO_DESTROYED);
         var _loc3_:TextFieldElement = new TextFieldElement(_loc1_.getWindowDimension().x - 10,_loc1_.getWindowDimension().y - 60,new TextFormat(Styles.simpleFmt.font,Styles.simpleFmt.size,16777215),BPLocale.getText("dest_text"));
         _loc3_.x = 10;
         _loc3_.y = 34;
         _loc2_.addElement(_loc3_);
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc5_:ButtonElement = new ButtonElement(ButtonElement.TYPE_OK,BPLocale.getText("dest_ok"),_loc4_.getEmbededMovieClip("button1"));
         _loc5_.addEventListener(MouseEvent.CLICK,this.handleCloseClientButtonClicked);
         _loc2_.addElement(_loc5_,SimpleContainer.ALIGN_VERTICAL_CENTER);
         _loc1_.addContainer(_loc2_);
         if(ExternalInterface.available)
         {
            ExternalInterface.call("showHangar");
         }
         TweenLite.to(_loc1_,0.5,{"alpha":1});
      }
      
      public function createSpacemapWindow() : void
      {
         var _loc1_:SimpleWindow = this.createWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP);
         var _loc2_:SpacemapWindowDecorator = new SpacemapWindowDecorator(this);
         _loc1_.addEventListener(SimpleWindow.ON_MAXIMIZE_CLICKED,this.handleSpacemapWindowMaximize);
         _loc2_.decorate(_loc1_);
      }
      
      private function handleSpacemapWindowMaximize(param1:Event) : void
      {
         this.updateSpacemapWindow();
      }
      
      public function requestSpacemapWindowServerUpdate() : void
      {
         this.main.getConnectionManager().sendCommand(ServerCommands.ADVANCED_JUMP_CPU,[ServerCommands.GET]);
      }
      
      public function updateSpacemapWindow() : void
      {
         var _loc6_:SpacemapElement = null;
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP);
         var _loc2_:SimpleContainer = _loc1_.getContainer(SimpleContainer.CLASS_SPACEMAP);
         var _loc3_:SimpleContainer = _loc1_.getContainer(SimpleContainer.CLASS_SPACEMAP_ADVANCED);
         var _loc4_:SimpleElement = _loc3_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_SWITCHER);
         var _loc5_:CPUItem = Hero.cpuItems[CPUItem.TYPE_ADVANCED_JUMP] as CPUItem;
         if(_loc5_.level == 1)
         {
            _loc3_.visible = true;
            _loc2_.visible = false;
            _loc1_.setWidth(720);
            _loc1_.setHeight(560);
            _loc1_.refreshMask();
            if(!_loc4_.hasEventListener(MouseEvent.CLICK))
            {
               _loc4_.addEventListener(MouseEvent.CLICK,this.handleSwitchSystemClick);
            }
            this.setSpacemapPage(this.main.screenManager.map.getCurrentStarSystemIndex());
         }
         else
         {
            _loc1_.setWidth(_loc2_.width + 10);
            _loc1_.setHeight(_loc2_.height + 30);
            _loc3_.visible = false;
            _loc2_.visible = true;
            _loc6_ = _loc2_.getChildAt(0) as SpacemapElement;
            _loc6_.update();
         }
      }
      
      public function setAllSpacemapMapsBlocked() : void
      {
         var _loc1_:SimpleContainer = this.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP).getContainer(SimpleContainer.CLASS_SPACEMAP_ADVANCED);
         var _loc2_:StarSystemView = _loc1_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_1).getChildAt(0) as StarSystemView;
         var _loc3_:StarSystemView = _loc1_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_2).getChildAt(0) as StarSystemView;
         _loc2_.setAllMapsBlocked();
         _loc3_.setAllMapsBlocked();
      }
      
      public function setSpacemapPage(param1:int) : void
      {
         var _loc2_:SimpleContainer = this.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP).getContainer(SimpleContainer.CLASS_SPACEMAP_ADVANCED);
         var _loc3_:TextField = Sprite(_loc2_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_SWITCHER).getChildAt(0)).getChildAt(0) as TextField;
         if(param1 == 0)
         {
            _loc2_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_1).visible = true;
            _loc2_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_2).visible = false;
            _loc3_.text = BPLocale.getText("label_switch_map_to_upper_section");
         }
         else
         {
            _loc2_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_1).visible = false;
            _loc2_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_2).visible = true;
            _loc3_.text = BPLocale.getText("label_switch_map_to_lower_section");
         }
      }
      
      public function updateAdvancedSpacemapWindow(param1:Array, param2:Array, param3:Array) : void
      {
         var _loc4_:SimpleContainer = this.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP).getContainer(SimpleContainer.CLASS_SPACEMAP_ADVANCED);
         var _loc5_:StarSystemView = _loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_1).getChildAt(0) as StarSystemView;
         var _loc6_:StarSystemView = _loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_2).getChildAt(0) as StarSystemView;
         var _loc7_:TextField = _loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_INFO_DISPLAY).getChildAt(1) as TextField;
         var _loc8_:int = this.main.screenManager.map.getMapID();
         _loc7_.text = InGameCatalog.getInstance().mapNames[_loc8_];
         _loc5_.update(_loc8_,param1,param2,param3);
         _loc6_.update(_loc8_,param1,param2,param3);
      }
      
      public function setAvailableJump(param1:int, param2:int, param3:int) : void
      {
         var _loc4_:SimpleContainer = this.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP).getContainer(SimpleContainer.CLASS_SPACEMAP_ADVANCED);
         var _loc5_:TextField = _loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_INFO_DISPLAY).getChildAt(2) as TextField;
         var _loc6_:StarSystemView = _loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_1).getChildAt(0) as StarSystemView;
         var _loc7_:StarSystemView = _loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_2).getChildAt(0) as StarSystemView;
         var _loc8_:String = InGameCatalog.getInstance().mapNames[param1];
         _loc5_.text = _loc8_;
         this.updateJumpPriceLabel(param2);
         this.updateJumpVoucherLabel();
         if(param3 == 1)
         {
            if(!_loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_BUTTON).hasEventListener(MouseEvent.CLICK))
            {
               _loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_BUTTON).addEventListener(MouseEvent.CLICK,this.requestMapJump);
            }
            _loc6_.setSelectedMapForJump(param1);
            _loc7_.setSelectedMapForJump(param1);
            this.writeToLog(BPLocale.getText("ttip_selected_target").replace("%MAP%",_loc8_));
         }
         else
         {
            if(!_loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_BUTTON).hasEventListener(MouseEvent.CLICK))
            {
               _loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_BUTTON).removeEventListener(MouseEvent.CLICK,this.requestMapJump);
            }
            _loc6_.setUnavailableMap(param1);
            _loc7_.setUnavailableMap(param1);
            this.writeToLog(BPLocale.getText("ttip_block_general"));
         }
      }
      
      public function updateJumpPriceLabel(param1:int = 0) : void
      {
         var _loc2_:SimpleContainer = this.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP).getContainer(SimpleContainer.CLASS_SPACEMAP_ADVANCED);
         if(_loc2_ == null)
         {
            return;
         }
         var _loc3_:TextField = _loc2_.getElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_INFO_DISPLAY).getChildAt(2) as TextField;
         var _loc4_:TextField = _loc2_.getElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_PRICE_DISPLAY).getChildAt(1) as TextField;
         if(_loc3_.text.length > 0)
         {
            if(Hero.jumpVouchersAmount > 0)
            {
               _loc4_.text = BPLocale.getText("attribute_free_cpu_jump");
               _loc4_.textColor = 16763904;
            }
            else
            {
               _loc4_.text = BPLocale.getText("pricetag_uridium_compact").replace("%VALUE%",BPLocale.roundInteger(param1));
               _loc4_.textColor = 65535;
            }
         }
      }
      
      public function updateJumpVoucherLabel() : void
      {
         var _loc1_:SimpleContainer = this.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP).getContainer(SimpleContainer.CLASS_SPACEMAP_ADVANCED);
         var _loc2_:TextField = _loc1_.getElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_VOUCHER_LABEL).getChildByName("text") as TextField;
         _loc2_.text = BPLocale.getText("label_jump-vouchers").replace("%COUNT%",BPLocale.roundInteger(Hero.jumpVouchersAmount));
         if(Hero.jumpVouchersAmount > 0)
         {
            _loc2_.textColor = 16763904;
         }
         else
         {
            _loc2_.textColor = 65535;
         }
      }
      
      public function startCastingCostTick(param1:int, param2:int) : void
      {
         var _loc3_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP);
         var _loc4_:SimpleContainer = _loc3_.getContainer(SimpleContainer.CLASS_SPACEMAP_ADVANCED);
         var _loc5_:StarSystemView = _loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_1).getChildAt(0) as StarSystemView;
         var _loc6_:StarSystemView = _loc4_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_2).getChildAt(0) as StarSystemView;
         var _loc7_:TweenClip = new TweenClip();
         _loc7_.setClip(ResourceManager.getMovieClip("spawn0","mc"));
         this.main.screenManager.map.getShipManager().getHero().getShipContainer().addChild(_loc7_);
         if(param1 > -1)
         {
            this.main.screenManager.map.getEventManager().idleState = true;
         }
         else
         {
            this.main.screenManager.map.getEventManager().idleState = false;
            _loc3_.minimize();
         }
         _loc5_.startCastingCostTick(param1,param2);
         _loc6_.startCastingCostTick(param1,param2);
         _loc7_.playAnimation(false,1,true,true);
         this.writeToLog(BPLocale.getText("\'msg_cpu_jump_sequenz_started\'").replace("%COUNT%",param1));
      }
      
      private function requestMapJump(param1:MouseEvent) : void
      {
         this.main.getConnectionManager().sendCommand(ServerCommands.ADVANCED_JUMP_CPU,[ServerCommands.JUMP_CPU]);
      }
      
      public function handleSwitchSystemClick(param1:MouseEvent) : void
      {
         var _loc6_:int = 0;
         var _loc7_:String = null;
         var _loc2_:SimpleContainer = this.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP).getContainer(SimpleContainer.CLASS_SPACEMAP_ADVANCED);
         var _loc3_:SimpleElement = _loc2_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_1);
         var _loc4_:SimpleElement = _loc2_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_2);
         var _loc5_:TextField = Sprite(_loc2_.getElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_SWITCHER).getChildAt(0)).getChildAt(0) as TextField;
         if(_loc3_.visible)
         {
            _loc3_.visible = false;
            _loc4_.visible = true;
            if(StarSystemView(_loc4_.getChildAt(0)).lastSelectedMapForJump != null)
            {
               _loc6_ = StarSystemView(_loc4_.getChildAt(0)).lastSelectedMapForJump.id;
            }
            _loc7_ = BPLocale.getText("label_switch_map_to_lower_section");
         }
         else
         {
            _loc3_.visible = true;
            _loc4_.visible = false;
            if(StarSystemView(_loc3_.getChildAt(0)).lastSelectedMapForJump != null)
            {
               _loc6_ = StarSystemView(_loc3_.getChildAt(0)).lastSelectedMapForJump.id;
            }
            _loc7_ = BPLocale.getText("label_switch_map_to_upper_section");
         }
         _loc5_.text = _loc7_;
         this.main.getConnectionManager().sendCommand(ServerCommands.ADVANCED_JUMP_CPU,[ServerCommands.SET_STATUS,_loc6_]);
      }
      
      public function createLogoutWindow() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc2_:SimpleWindow = this.createWindow(SimpleWindow.WINDOW_CLASS_LOGOUT);
         var _loc3_:SimpleContainer = new SimpleContainer(this,SimpleContainer.CLASS_LOGOUT_WINDOW);
         _loc3_.addPredefinedPosition(new Point(10,40));
         _loc3_.setPredefinedPosition();
         _loc2_.addContainer(_loc3_);
         var _loc4_:LogoutTextElement = new LogoutTextElement(this);
         _loc3_.addElement(_loc4_);
         var _loc5_:ButtonElement = new ButtonElement(ButtonElement.TYPE_CANCEL_LOGOUT,BPLocale.getText("logout_subbot"),_loc1_.getEmbededMovieClip("button1"));
         _loc5_.addEventListener(MouseEvent.CLICK,this.onLogoutWindowMinimizeClicked);
         _loc3_.addElement(_loc5_,SimpleContainer.ALIGN_VERTICAL_CENTER);
         _loc2_.setDimension(-1,_loc5_.y + _loc5_.height + _loc3_.y);
         _loc2_.addEventListener(SimpleWindow.ON_MAXIMIZED,this.onLogoutWindowMaximized);
         _loc2_.addEventListener(SimpleWindow.ON_MINIMIZE_CLICKED,this.onLogoutWindowMinimizeClicked);
         _loc2_.addEventListener(SimpleWindow.ON_MAXIMIZE_CLICKED,this.onLogoutWindowMaximizeClicked);
      }
      
      public function onLogoutWindowMaximizeClicked(param1:Event) : void
      {
         this.main.setScheduledDisconnect(false);
      }
      
      public function onLogoutWindowMaximized(param1:Event) : void
      {
         var _loc2_:Map = this.main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc2_.getEventManager().moveShip(ScreenManager.centerX,ScreenManager.centerY);
            _loc2_.getEventManager().lockControls();
         }
         var _loc3_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_LOGOUT);
         var _loc4_:LogoutTextElement = LogoutTextElement(_loc3_.getContainer(SimpleContainer.CLASS_LOGOUT_WINDOW).getElement(SimpleElement.TYPE_LOGOUT_TEXT));
         _loc4_.startCountdown();
         this.main.getConnectionManager().sendCommand(ServerCommands.LOGOUT);
         AudioManager.playSoundEffect(22);
      }
      
      public function lockWindow(param1:int) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(param1);
         if(_loc2_ != null)
         {
            _loc2_.lockWindow();
         }
      }
      
      public function unlockWindow(param1:int) : void
      {
         var _loc2_:SimpleWindow = this.getWindow(param1);
         if(_loc2_ != null)
         {
            _loc2_.unlockWindow();
         }
      }
      
      private function onLogoutWindowMinimizeClicked(param1:Event) : void
      {
         this.main.setScheduledDisconnect(false);
         this.logoutBreakByUser = true;
         if(param1 != null)
         {
            this.writeToLog(BPLocale.getText("logoutbreak_user"));
         }
         this.main.getConnectionManager().sendCommand(ServerCommands.LOGOUT_CANCEL_FROM_CLIENT);
      }
      
      public function logoutCancelFromServer() : void
      {
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_LOGOUT);
         var _loc2_:LogoutTextElement = LogoutTextElement(_loc1_.getContainer(SimpleContainer.CLASS_LOGOUT_WINDOW).getElement(SimpleElement.TYPE_LOGOUT_TEXT));
         _loc2_.stopCountdown();
         _loc1_.minimize();
         var _loc3_:Map = this.main.screenManager.map;
         if(_loc3_ != null)
         {
            _loc3_.getEventManager().unlockControls();
         }
         if(!this.logoutBreakByUser)
         {
            this.writeToLog(BPLocale.getText("logoutbreak"));
         }
         this.logoutBreakByUser = false;
      }
      
      public function getGlobalchat() : MovieClip
      {
         return this.globalchat;
      }
      
      public function showRadiationWarning(param1:Boolean) : void
      {
         var _loc2_:SWFFinisher = null;
         var _loc3_:TextField = null;
         var _loc4_:BitmapData = null;
         var _loc5_:Map = null;
         var _loc6_:Ship = null;
         var _loc7_:Sprite = null;
         if(param1)
         {
            _loc2_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
            if(this.radiationBitmap == null)
            {
               _loc3_ = new TextField();
               _loc3_.defaultTextFormat = Styles.systemSplashFmt;
               _loc3_.embedFonts = Styles.systemSplashEmbed;
               _loc3_.autoSize = TextFieldAutoSize.LEFT;
               _loc3_.height = Styles.systemSplashFontHeight + 6;
               _loc3_.textColor = 16777215;
               _loc3_.antiAliasType = "advanced";
               _loc3_.selectable = false;
               _loc3_.text = BPLocale.getText("radwarn_mid") + "\n" + BPLocale.getText("radwarn_bot");
               _loc3_.filters = [new GlowFilter(255,1,1,1,1)];
               _loc4_ = new BitmapData(_loc3_.width,_loc3_.height,true,0);
               _loc4_.draw(_loc3_);
               this.radiationBitmap = new Bitmap(_loc4_);
               this.radiationBitmap.x = ScreenManager.getHalfScreenWidth() - this.radiationBitmap.width / 2;
               this.radiationBitmap.y = ScreenManager.getHalfScreenHeight() - 150;
            }
            if(this.radiationHelp == null)
            {
               this.radiationHelp = MovieClip(_loc2_.getEmbededMovieClip("radiationHelp"));
               this.radiationHelp.mouseEnabled = Main.mouseEventsEnabled;
               this.radiationHelp.mouseChildren = Main.mouseEventsEnabled;
               this.radiationHelp.x = ScreenManager.getHalfScreenWidth();
               this.radiationHelp.y = ScreenManager.getHalfScreenHeight();
            }
            if(!this.main.screenManager.getGUILayer0().contains(this.radiationBitmap))
            {
               this.radiationBitmap.alpha = 0;
               this.main.screenManager.getGUILayer0().addChild(this.radiationBitmap);
               TweenLite.to(this.radiationBitmap,1,{"alpha":1});
               _loc5_ = this.main.screenManager.map;
               if(_loc5_ != null)
               {
                  _loc6_ = _loc5_.getShipManager().getHero();
                  if(_loc6_ != null)
                  {
                     this.updateRadiationHelp();
                     this.radiationHelp.alpha = 0;
                     _loc7_ = this.main.screenManager.getHeroLayer();
                     _loc7_.addChild(this.radiationHelp);
                     _loc7_.swapChildren(this.radiationHelp,_loc6_.getClipContainer());
                     TweenLite.to(this.radiationHelp,1,{"alpha":1});
                  }
               }
            }
            if(this.warningTimer == null)
            {
               this.warningTimer = new Timer(2000,0);
               this.warningTimer.addEventListener(TimerEvent.TIMER,this.onWarning);
               this.warningTimer.start();
            }
            else
            {
               this.warningTimer.start();
            }
         }
         else
         {
            if(this.radiationBitmap != null && this.main.screenManager.getGUILayer0().contains(this.radiationBitmap))
            {
               TweenLite.to(this.radiationBitmap,1,{
                  "alpha":0,
                  "onComplete":this.onMCFadeOut,
                  "onCompleteParams":[this.radiationBitmap]
               });
               TweenLite.to(this.radiationHelp,1,{
                  "alpha":0,
                  "onComplete":this.onMCFadeOut,
                  "onCompleteParams":[this.radiationHelp]
               });
            }
            this.stopWarningTimer();
         }
      }
      
      private function updateRadiationHelp() : void
      {
         var _loc2_:Ship = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:Number = NaN;
         var _loc1_:Map = this.main.screenManager.map;
         if(_loc1_ != null)
         {
            _loc2_ = _loc1_.getShipManager().getHero();
            _loc3_ = _loc1_.serious_width * 0.1;
            _loc4_ = _loc1_.serious_height * 0.1;
            _loc5_ = Math.atan2(_loc4_ / 2 - _loc2_.y / 10,_loc3_ / 2 - _loc2_.x / 10) * 180 / Math.PI;
            this.radiationHelp.rotation = _loc5_;
         }
      }
      
      public function stopWarningTimer() : void
      {
         if(this.warningTimer != null)
         {
            this.warningTimer.stop();
            this.warningTimer.reset();
         }
      }
      
      private function onWarning(param1:TimerEvent) : void
      {
         AudioManager.playSoundEffect(23);
         this.main.screenManager.flashScreen(267386880);
         this.updateRadiationHelp();
      }
      
      private function onMCFadeOut(param1:DisplayObject) : void
      {
         param1.parent.removeChild(param1);
      }
      
      public function showConnectionLostWindow() : void
      {
         var _loc2_:SWFFinisher = null;
         var _loc3_:MovieClip = null;
         var _loc4_:TextField = null;
         var _loc5_:SimpleContainer = null;
         var _loc6_:ConnLostElement = null;
         var _loc7_:ButtonElement = null;
         var _loc8_:ButtonElement = null;
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_CONNECTION_LOST);
         if(_loc1_ == null)
         {
            _loc1_ = this.createWindow(SimpleWindow.WINDOW_CLASS_CONNECTION_LOST);
            _loc1_.parent.removeChild(_loc1_);
            this.main.screenManager.getWindowLayer2().addChild(_loc1_);
            _loc1_.modal = true;
            _loc2_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
            _loc3_ = MovieClip(_loc2_.getEmbededMovieClip("connectionLostWindow"));
            _loc3_.mouseEnabled = Main.mouseEventsEnabled;
            _loc3_.mouseChildren = Main.mouseEventsEnabled;
            _loc4_ = TextField(_loc3_.getChildByName("bodyP"));
            _loc4_.x = 125;
            _loc4_.width = 164;
            _loc4_.defaultTextFormat = Styles.simpleFmt;
            _loc4_.embedFonts = Styles.simpleEmbed;
            _loc4_.autoSize = TextFieldAutoSize.LEFT;
            _loc4_.wordWrap = true;
            _loc4_.text = BPLocale.getText("log_verbindunghead") + "\n\n" + BPLocale.getText("log_verbindungtext");
            _loc5_ = new SimpleContainer(this,SimpleContainer.CLASS_CONNECTION_LOST);
            _loc6_ = new ConnLostElement();
            _loc6_.addChild(_loc3_);
            _loc5_.addElement(_loc6_,SimpleContainer.ALIGN_VERTICAL);
            _loc7_ = new ButtonElement(ButtonElement.TYPE_RECONNECT,BPLocale.getText("log_neueverbindung"),_loc2_.getEmbededMovieClip("button1"));
            _loc7_.addEventListener(MouseEvent.CLICK,this.handleConnectionLostButtonClick);
            _loc5_.addElement(_loc7_,SimpleContainer.ALIGN_VERTICAL);
            _loc8_ = new ButtonElement(ButtonElement.TYPE_CLOSE_APP,BPLocale.getText("log_Logout"),_loc2_.getEmbededMovieClip("button1"));
            _loc8_.addEventListener(MouseEvent.CLICK,this.handleConnectionLostButtonClick);
            _loc5_.addElement(_loc8_,SimpleContainer.ALIGN_HORIZONTAL);
            _loc5_.addPredefinedPosition(new Point(15,30));
            _loc5_.setPredefinedPosition();
            _loc1_.addContainer(_loc5_);
            _loc1_.autoSize();
         }
         else
         {
            if(_loc1_.parent != this.main.screenManager.getWindowLayer2())
            {
               this.main.screenManager.getWindowLayer2().addChild(_loc1_);
            }
            _loc1_.alpha = 1;
         }
      }
      
      private function handleConnectionLostButtonClick(param1:MouseEvent) : void
      {
         var _loc3_:SimpleWindow = null;
         var _loc2_:int = ButtonElement(param1.currentTarget).getType();
         switch(_loc2_)
         {
            case ButtonElement.TYPE_CLOSE_APP:
               if(ExternalInterface.available)
               {
                  ExternalInterface.call("bpCloseWindow","");
                  break;
               }
               System.exit(0);
               break;
            case ButtonElement.TYPE_RECONNECT:
               _loc3_ = this.getWindow(SimpleWindow.WINDOW_CLASS_CONNECTION_LOST);
               if(_loc3_ != null)
               {
                  TweenLite.to(_loc3_,0.3,{
                     "alpha":0,
                     "onComplete":this.closeWindow,
                     "onCompleteParams":[_loc3_]
                  });
               }
               this.main.getConnectionManager().connectToMap(Settings.mapID);
         }
      }
      
      public function showConnectionWindow() : void
      {
         var _loc2_:SimpleContainer = null;
         var _loc3_:ConnectionElement = null;
         var _loc4_:SWFFinisher = null;
         var _loc5_:ButtonElement = null;
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_CONNECTION);
         if(_loc1_ == null)
         {
            _loc1_ = this.createWindow(SimpleWindow.WINDOW_CLASS_CONNECTION);
            _loc1_.parent.removeChild(_loc1_);
            this.main.screenManager.getWindowLayer2().addChild(_loc1_);
            _loc1_.modal = true;
            _loc2_ = new SimpleContainer(this,SimpleContainer.CLASS_CONNECTION);
            _loc3_ = new ConnectionElement();
            _loc3_.x = 24;
            _loc3_.y = 20;
            _loc2_.addElement(_loc3_);
            _loc4_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
            _loc5_ = new ButtonElement(ButtonElement.TYPE_SELL_ORE,BPLocale.getText("log_abbruch"),_loc4_.getEmbededMovieClip("button1"));
            _loc5_.addEventListener(MouseEvent.CLICK,this.handleCancelConnectionClick);
            _loc2_.addElement(_loc5_,SimpleContainer.NO_ALIGN);
            _loc5_.x = _loc1_.getWindowDimension().x / 2 - _loc5_.width / 2 + 5;
            _loc5_.y = _loc3_.y + _loc3_.height + 10;
            _loc1_.addContainer(_loc2_);
         }
         else
         {
            if(_loc1_.parent != this.main.screenManager.getWindowLayer2())
            {
               this.main.screenManager.getWindowLayer2().addChild(_loc1_);
            }
            TweenLite.to(_loc1_,0.3,{"alpha":1});
         }
      }
      
      private function handleCancelConnectionClick(param1:MouseEvent) : void
      {
         if(ExternalInterface.available)
         {
            ExternalInterface.call("bpCloseWindow","");
         }
      }
      
      public function removeConnectionWindow() : void
      {
         var _loc1_:SimpleWindow = this.getWindow(SimpleWindow.WINDOW_CLASS_CONNECTION);
         if(_loc1_ != null)
         {
            TweenLite.to(_loc1_,1,{
               "alpha":0,
               "onComplete":this.closeWindow,
               "onCompleteParams":[_loc1_]
            });
         }
      }
      
      public function getTopMenu() : TopMenu
      {
         return this.topMenu;
      }
      
      public function increaseMinimizedWindowCount() : void
      {
         ++this.minimizedWindowCount;
      }
      
      public function decreaseMinimizedWindowCount() : void
      {
         --this.minimizedWindowCount;
      }
      
      public function getMinimizedWindowCount() : int
      {
         return this.minimizedWindowCount;
      }
      
      public function isHUDToggleAllowed() : Boolean
      {
         return this.hudToggleAllowed;
      }
      
      public function initDebugView(param1:Boolean = false) : void
      {
         if(this.debugView == null)
         {
            this.debugView = new FPSModule(this.main);
            this.main.addChild(this.debugView.view);
            this.debugView.view.visible = param1;
         }
      }
      
      public function toggleDebugView() : void
      {
         if(this.debugView == null)
         {
            this.initDebugView(true);
         }
         else if(this.debugView.view.visible)
         {
            this.debugView.view.visible = false;
         }
         else
         {
            this.debugView.view.visible = true;
         }
      }
      
      public function createNAZDisplay() : void
      {
         var _loc1_:TextField = null;
         var _loc2_:BitmapData = null;
         if(this.nazBitmap == null)
         {
            _loc1_ = new TextField();
            _loc1_.defaultTextFormat = Styles.systemSplashFmt;
            _loc1_.embedFonts = Styles.systemSplashEmbed;
            _loc1_.autoSize = TextFieldAutoSize.LEFT;
            _loc1_.height = Styles.systemSplashFontHeight + 6;
            _loc1_.textColor = 16777215;
            _loc1_.antiAliasType = "advanced";
            _loc1_.selectable = false;
            _loc1_.text = BPLocale.getText("peacearea");
            _loc1_.filters = [new GlowFilter(255,1,1,1,1)];
            _loc2_ = new BitmapData(_loc1_.width,_loc1_.height,true,0);
            _loc2_.draw(_loc1_);
            this.nazBitmap = new Bitmap(_loc2_);
            this.nazBitmap.x = ScreenManager.getHalfScreenWidth() - this.nazBitmap.width / 2;
            this.nazBitmap.y = 200;
         }
      }
      
      public function createRadiationDisplay() : void
      {
         var _loc1_:TextField = null;
         var _loc2_:BitmapData = null;
         if(this.radiationBitmap == null)
         {
            _loc1_ = new TextField();
            _loc1_.defaultTextFormat = Styles.systemSplashFmt;
            _loc1_.embedFonts = Styles.systemSplashEmbed;
            _loc1_.autoSize = TextFieldAutoSize.LEFT;
            _loc1_.height = Styles.systemSplashFontHeight + 6;
            _loc1_.textColor = 16777215;
            _loc1_.antiAliasType = "advanced";
            _loc1_.selectable = false;
            _loc1_.text = BPLocale.getText("radwarn_mid") + "\n" + BPLocale.getText("radwarn_bot");
            _loc1_.filters = [new GlowFilter(255,1,1,1,1)];
            _loc2_ = new BitmapData(_loc1_.width,_loc1_.height,true,0);
            _loc2_.draw(_loc1_);
            this.radiationBitmap = new Bitmap(_loc2_);
            this.radiationBitmap.x = ScreenManager.getHalfScreenWidth() - this.radiationBitmap.width / 2;
            this.radiationBitmap.y = 200;
         }
      }
      
      public function displayNAZ(param1:Boolean) : void
      {
         if(this.nazBitmap == null)
         {
            return;
         }
         var _loc2_:Sprite = this.main.screenManager.getGUILayer1();
         if(param1)
         {
            if(!_loc2_.contains(this.nazBitmap))
            {
               this.nazBitmap.alpha = 0;
               _loc2_.addChild(this.nazBitmap);
               TweenLite.to(this.nazBitmap,1,{"alpha":1});
            }
         }
         else if(_loc2_.contains(this.nazBitmap))
         {
            TweenLite.to(this.nazBitmap,1,{
               "alpha":0,
               "onComplete":this.onHideNAZ
            });
         }
      }
      
      private function onHideNAZ() : void
      {
         if(TweenMax.isTweening(this.nazBitmap))
         {
            return;
         }
         var _loc1_:Sprite = this.main.screenManager.getGUILayer1();
         if(_loc1_.contains(this.nazBitmap))
         {
            _loc1_.removeChild(this.nazBitmap);
         }
      }
      
      public function addToLeftDynamicSlot(param1:int) : void
      {
         this.leftDynamicSlot.push(param1);
      }
      
      public function removeFromLeftDynamicSlot(param1:int) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this.leftDynamicSlot.length)
         {
            if(param1 == this.leftDynamicSlot[_loc2_])
            {
               this.leftDynamicSlot.splice(_loc2_,1);
            }
            _loc2_++;
         }
         this.resortLeftSlots();
      }
      
      public function resortLeftSlots() : void
      {
         var _loc5_:Point = null;
         var _loc6_:SimpleWindow = null;
         var _loc1_:int = Settings.resolutionID;
         var _loc2_:ResolutionPattern = PatternManager.resolutionPatterns[int(_loc1_)];
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         while(_loc4_ < this.leftDynamicSlot.length)
         {
            _loc5_ = _loc2_.getMinimizedIconsPosition(_loc3_);
            if(_loc5_ != null)
            {
               _loc6_ = this.getWindow(this.leftDynamicSlot[_loc4_]);
               if(_loc6_.visible)
               {
                  TweenLite.to(_loc6_,0.5,{
                     "ease":Expo.easeOut,
                     "x":_loc5_.x,
                     "y":_loc5_.y
                  });
                  _loc3_++;
               }
            }
            _loc4_++;
         }
      }
      
      public function showCrosshair() : void
      {
         var _loc1_:SWFFinisher = null;
         if(this.cross == null)
         {
            _loc1_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
            this.cross = _loc1_.getEmbededMovieClip("cross");
            this.main.screenManager.getShipLayer().addChild(this.cross);
         }
      }
      
      public function hideCrosshair() : void
      {
         if(this.cross != null && !this.main.screenManager.getShipLayer().contains(this.cross))
         {
            TweenMax.killTweensOf(this.cross);
            this.main.screenManager.getShipLayer().removeChild(this.cross);
         }
      }
      
      public function moveCrosshairs(param1:int, param2:int) : void
      {
         if(this.cross == null)
         {
            return;
         }
         TweenLite.to(this.cross,0.25,{
            "ease":Expo.easeOut,
            "x":param1,
            "y":param2
         });
      }
      
      public function logLevelUpdate(param1:int, param2:int) : void
      {
         this.writeToLog(BPLocale.getText("lvlup_msg").replace(/%!/,param1));
         if(param2 > 0)
         {
            this.writeToLog(BPLocale.getText("lvlup_msg_p2").replace(/%!/,param2));
         }
      }
      
      public function checkWindows() : void
      {
         var _loc1_:SimpleWindow = null;
         if(this.checkWindowPositions)
         {
            for each(_loc1_ in this.windows)
            {
               if(_loc1_.isMaximized())
               {
                  _loc1_.checkPosition();
                  _loc1_.checkSize();
               }
            }
         }
      }
      
      public function checkAllResizableWindows() : void
      {
         var _loc1_:SimpleWindow = null;
         if(this.checkResizableWindows)
         {
            for each(_loc1_ in this.windows)
            {
               if(_loc1_.isResizable())
               {
                  _loc1_.checkSize();
               }
            }
            this.setCheckResizableWindows(false);
         }
      }
      
      public function setCheckWindowPositions(param1:Boolean) : void
      {
         this.checkWindowPositions = param1;
      }
      
      public function getGroupUI() : GroupUI
      {
         return this._groupUI;
      }
      
      public function getInvitationsUI() : InvitationsUI
      {
         return this._invitationsUI;
      }
      
      public function getCheckResizableWindows() : Boolean
      {
         return this.checkResizableWindows;
      }
      
      public function setCheckResizableWindows(param1:Boolean) : void
      {
         this.checkResizableWindows = param1;
      }
      
      public function get refinementManager() : RefinementManager
      {
         return this._refinementManager;
      }
      
      public function addBarStatus(param1:BarStatus) : void
      {
         this.barStatus.push(param1);
      }
      
      public function getBarStatus(param1:int) : BarStatus
      {
         var _loc2_:BarStatus = null;
         for each(_loc2_ in this.barStatus)
         {
            if(param1 == _loc2_.getID())
            {
               return _loc2_;
            }
         }
         return null;
      }
      
      public function addWindowSetting(param1:WindowSetting) : void
      {
         this.windowSettings.push(param1);
      }
      
      public function getWindowSetting(param1:int) : WindowSetting
      {
         var _loc2_:WindowSetting = null;
         for each(_loc2_ in this.windowSettings)
         {
            if(param1 == _loc2_.getWindowID())
            {
               return _loc2_;
            }
         }
         return null;
      }
      
      public function getAsDigit(param1:Boolean) : String
      {
         if(param1)
         {
            return "1";
         }
         return "0";
      }
      
      public function getWindows() : Array
      {
         return this.windows;
      }
      
      public function setDebugViewParam(param1:String, param2:String) : void
      {
         var _loc3_:Boolean = false;
         if(this.debugView == null)
         {
            this.toggleDebugView();
            _loc3_ = true;
         }
         this.debugView.setParam(param1,param2);
         if(_loc3_)
         {
            this.toggleDebugView();
         }
      }
      
      public function createPetWindow() : void
      {
         var _loc3_:PetWindowDecorator = null;
         var _loc1_:int = SimpleWindow.WINDOW_CLASS_PET;
         var _loc2_:SimpleWindow = this.getWindow(_loc1_);
         if(_loc2_ == null)
         {
            _loc2_ = this.createWindow(_loc1_);
            _loc3_ = new PetWindowDecorator(this);
            _loc3_.decorate(_loc2_);
         }
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import flash.display.Sprite;
   import flash.events.Event;
   import mx.logging.ILogger;
   import mx.logging.Log;
   
   public class InstantLogView extends Sprite
   {
      
      public static const logger:ILogger = Log.getLogger("InstantLogView");
      
      private static const PADDING_Y:int = 6;
      
      private var messageBuffer:Array = [];
      
      private var offset:int = 0;
      
      private var _itemWidth:int;
      
      private var _maxEntries:int;
      
      private var _displayTime:int;
      
      public function InstantLogView(param1:int = 400, param2:int = 5, param3:int = 10)
      {
         super();
         this._itemWidth = param1;
         this._maxEntries = param2;
         this._displayTime = param3;
      }
      
      public function addMessage(param1:String, param2:LogMessageProfile) : void
      {
         var _loc3_:InstantMessageItem = new InstantMessageItem(param1,this._itemWidth,param2.displayTime);
         _loc3_.y = this.offset + _loc3_.height + PADDING_Y;
         _loc3_.mouseEnabled = false;
         _loc3_.mouseChildren = false;
         if(param2.highPriority)
         {
            _loc3_.addEventListener(InstantMessageItem.HANDLE_FADEOUT_COMPLETE,this.handleHighPriorityItemRemoved);
            addChild(_loc3_);
         }
         else
         {
            this.messageBuffer.push(_loc3_);
            _loc3_.addEventListener(InstantMessageItem.HANDLE_FADEOUT_COMPLETE,this.handleItemRemoved);
            addChild(_loc3_);
         }
         this.update();
      }
      
      private function handleHighPriorityItemRemoved(param1:Event) : void
      {
         var _loc2_:InstantMessageItem = InstantMessageItem(param1.target);
         _loc2_.removeEventListener(InstantMessageItem.HANDLE_FADEOUT_COMPLETE,this.handleHighPriorityItemRemoved);
         _loc2_.dispose();
         this.update();
      }
      
      private function handleItemRemoved(param1:Event) : void
      {
         var _loc2_:InstantMessageItem = InstantMessageItem(param1.target);
         var _loc3_:int = int(this.messageBuffer.length - 1);
         while(_loc3_ > -1)
         {
            if(_loc2_ == InstantMessageItem(this.messageBuffer[_loc3_]))
            {
               this.messageBuffer.splice(_loc3_,1);
               this.update();
               return;
            }
            _loc3_--;
         }
      }
      
      private function update() : void
      {
         var _loc1_:InstantMessageItem = null;
         var _loc3_:InstantMessageItem = null;
         while(this.messageBuffer.length > this._maxEntries)
         {
            _loc1_ = InstantMessageItem(this.messageBuffer[0]);
            _loc1_.removeEventListener(InstantMessageItem.HANDLE_FADEOUT_COMPLETE,this.handleItemRemoved);
            _loc1_.dispose();
            this.messageBuffer.shift();
         }
         this.offset = 0;
         var _loc2_:int = 0;
         while(_loc2_ < this.numChildren)
         {
            _loc3_ = InstantMessageItem(this.getChildAt(_loc2_));
            _loc3_.moveTo(this.offset);
            this.offset += _loc3_.height + PADDING_Y;
            _loc2_++;
         }
      }
      
      public function get itemWidth() : int
      {
         return this._itemWidth;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   public class InstantLogViewConfig
   {
      
      public var y:int;
      
      public var width:int;
      
      public var maxEntries:int;
      
      public var displayTime:int;
      
      public function InstantLogViewConfig()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Quad;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.filters.GlowFilter;
   import flash.geom.Matrix;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import net.bigpoint.darkorbit.Styles;
   
   public class InstantMessageItem extends Sprite
   {
      
      public static const HANDLE_FADEOUT_COMPLETE:String = "handleFadeOutComplete";
      
      private static const mediumGlowFilter:GlowFilter = new GlowFilter(0,1,4,4,6,1);
      
      public function InstantMessageItem(param1:String, param2:int, param3:int = 4)
      {
         var _loc6_:BitmapData = null;
         super();
         var _loc4_:TextField = new TextField();
         var _loc5_:TextFormat = new TextFormat(Styles.h2Fmt.font,Styles.h2FontHeight);
         _loc5_.align = TextFormatAlign.CENTER;
         _loc5_.color = 16777215;
         _loc4_.defaultTextFormat = _loc5_;
         _loc4_.embedFonts = Styles.h2Embed;
         _loc4_.text = param1;
         _loc4_.width = param2;
         _loc4_.wordWrap = true;
         _loc4_.antiAliasType = AntiAliasType.ADVANCED;
         _loc4_.filters = [mediumGlowFilter];
         _loc4_.autoSize = TextFieldAutoSize.CENTER;
         var _loc7_:int = _loc4_.width;
         _loc6_ = new BitmapData(_loc7_,_loc4_.height + 3,true,0);
         var _loc8_:Matrix = new Matrix();
         _loc6_.draw(_loc4_,_loc8_);
         addChild(new Bitmap(_loc6_));
         alpha = 0;
         TweenLite.to(this,0.1,{"alpha":1});
         TweenMax.delayedCall(param3 - 1,this.startFadeOut);
      }
      
      public function dispose() : void
      {
         this.removeFromParent();
      }
      
      public function removeFromParent() : void
      {
         if(parent != null && parent.contains(this))
         {
            parent.removeChild(this);
         }
      }
      
      public function moveTo(param1:int) : void
      {
         if(param1 == y)
         {
            return;
         }
         TweenLite.to(this,0.4,{
            "y":param1,
            "ease":Quad.easeOut
         });
      }
      
      private function startFadeOut() : void
      {
         TweenLite.to(this,0.3,{
            "alpha":0,
            "ease":Quad.easeOut,
            "onComplete":this.handleFadeOutComplete
         });
      }
      
      private function handleFadeOutComplete() : void
      {
         this.removeFromParent();
         dispatchEvent(new Event(HANDLE_FADEOUT_COMPLETE));
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.MovieClip;
   import flash.text.TextField;
   import flash.text.TextFormat;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.groupsystem.GroupMember;
   
   public class InvitationClip extends MovieClip
   {
      
      public static const TYPE_INCOMING:int = 1;
      
      public static const TYPE_OUTGOING:int = 2;
      
      private var _nickLabel:TextField;
      
      private var _shipClip:ShipIcon;
      
      private var _acceptButton:GroupActionButton;
      
      private var _rejectButton:GroupActionButton;
      
      private var _revokeButton:GroupActionButton;
      
      private var _member:GroupMember;
      
      private var _lineFormat:TextFormat;
      
      private var _type:int;
      
      private var _memberID:int;
      
      private var _groupUi:GroupUI;
      
      private var _bg:Bitmap;
      
      public function InvitationClip()
      {
         super();
         this._bg = new Bitmap(new BitmapData(128,28,true,0));
         addChild(this._bg);
         this._lineFormat = new TextFormat(Styles.simpleFmt.font,Styles.simpleFontHeight,16777215);
         this._nickLabel = new TextField();
         this.formatLabel(this._nickLabel);
         this._nickLabel.width = 104;
         this._nickLabel.x = 24;
         this._nickLabel.y = 6;
         addChild(this._nickLabel);
      }
      
      private function formatLabel(param1:TextField) : void
      {
         param1.defaultTextFormat = this._lineFormat;
         param1.embedFonts = Styles.simpleEmbed;
         param1.height = Styles.simpleFontHeight + 6;
         param1.multiline = false;
         param1.selectable = false;
      }
      
      public function init(param1:GroupMember) : void
      {
         this._member = param1;
         this._memberID = this._member.id;
         this._nickLabel.text = param1.nickName;
         this.updateShipClip();
      }
      
      private function updateShipClip(param1:Boolean = false) : void
      {
         if(param1 && this._shipClip != null)
         {
            if(contains(this._shipClip))
            {
               removeChild(this._shipClip);
            }
            this._shipClip = null;
         }
         if(this._groupUi != null && this._member != null && this._shipClip == null)
         {
            this._shipClip = this._groupUi.getShipIcon(this._member.shipType);
            this._shipClip.y = 8;
            addChild(this._shipClip);
         }
      }
      
      public function get type() : int
      {
         return this._type;
      }
      
      public function set type(param1:int) : void
      {
         if(this._type != param1)
         {
            this._type = param1;
            if(this._type == TYPE_INCOMING)
            {
               this._acceptButton = this._groupUi.createGroupActionButton(GroupActionButton.TYPE_ACCEPT);
               this._acceptButton.x = this._nickLabel.x + this._nickLabel.width + 4;
               TooltipControl.getInstance().addToolTip(this._acceptButton,BPLocale.getText("label_grp_invitation_accept"));
               addChild(this._acceptButton);
               this._rejectButton = this._groupUi.createGroupActionButton(GroupActionButton.TYPE_REJECT);
               this._rejectButton.x = this._acceptButton.x + this._acceptButton.width + 4;
               TooltipControl.getInstance().addToolTip(this._rejectButton,BPLocale.getText("label_grp_invitation_reject"));
               addChild(this._rejectButton);
            }
            else if(this._type == TYPE_OUTGOING)
            {
               this._revokeButton = this._groupUi.createGroupActionButton(GroupActionButton.TYPE_REVOKE);
               this._revokeButton.x = this._nickLabel.x + this._nickLabel.width + 4;
               TooltipControl.getInstance().addToolTip(this._revokeButton,BPLocale.getText("label_grp_invitation_revoke"));
               addChild(this._revokeButton);
            }
         }
      }
      
      public function get acceptButton() : GroupActionButton
      {
         return this._acceptButton;
      }
      
      public function get rejectButton() : GroupActionButton
      {
         return this._rejectButton;
      }
      
      public function get revokeButton() : GroupActionButton
      {
         return this._revokeButton;
      }
      
      public function get memberID() : int
      {
         return this._memberID;
      }
      
      public function get groupUi() : GroupUI
      {
         return this._groupUi;
      }
      
      public function set groupUi(param1:GroupUI) : void
      {
         this._groupUi = param1;
         this.updateShipClip();
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   
   public class InvitationsUI extends SimpleContainer
   {
      
      public function InvitationsUI(param1:Main)
      {
         super(param1.getGuiManager(),SimpleContainer.CLASS_GROUP_SYSTEM);
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   
   public class JackpotBattleWindowDecorator
   {
      
      private var guiManager:GuiManager;
      
      private var uiResources:SWFFinisher;
      
      public var playersLeft:int = 0;
      
      public function JackpotBattleWindowDecorator(param1:GuiManager)
      {
         super();
         this.guiManager = param1;
         this.uiResources = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
      }
      
      public function decorate(param1:SimpleWindow) : void
      {
         var _loc2_:SimpleContainer = new SimpleContainer(this.guiManager,SimpleContainer.CLASS_LOG);
         var _loc3_:TextField = new TextField();
         _loc3_.antiAliasType = AntiAliasType.ADVANCED;
         _loc3_.defaultTextFormat = Styles.logFmt;
         _loc3_.wordWrap = false;
         _loc3_.embedFonts = Styles.logEmbed;
         _loc3_.text = BPLocale.getText("label_players_left").replace(/%PLAYERS_REMAINING%/,this.playersLeft.toString());
         _loc3_.autoSize = TextFieldAutoSize.LEFT;
         var _loc4_:SimpleElement = new SimpleElement(SimpleElement.TYPE_LOG_TEXTAREA);
         _loc4_.addChild(_loc3_);
         _loc2_.addElement(_loc4_);
         _loc2_.x = 10;
         _loc2_.y = 23;
         param1.addContainer(_loc2_);
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import mx.logging.ILogger;
   import mx.logging.Log;
   import mx.utils.StringUtil;
   
   public class LogMessage
   {
      
      private static const logger:ILogger = Log.getLogger("LogMessage");
      
      private var message:String;
      
      private var completed:Boolean;
      
      private var charIndex:int;
      
      public function LogMessage(param1:String)
      {
         super();
         this.message = StringUtil.trim(param1);
      }
      
      public function isCompleted() : Boolean
      {
         if(this.charIndex == this.message.length)
         {
            this.completed = true;
         }
         return this.completed;
      }
      
      public function getMessage() : String
      {
         return this.message;
      }
      
      public function getPartialMessage(param1:int) : String
      {
         var _loc2_:int = this.message.length - this.charIndex;
         var _loc3_:int = _loc2_ >= param1 ? param1 : _loc2_;
         this.charIndex += _loc3_;
         return this.message.substring(0,this.charIndex) + "_";
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   public class LogMessageProfile
   {
      
      public var displayTime:int;
      
      public var highPriority:Boolean;
      
      public var profileType:String;
      
      public function LogMessageProfile(param1:String)
      {
         super();
         this.profileType = param1;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   public class LogMessageProfileFactory
   {
      
      public static const HIGH_PRIORITY_MESSAGE:String = "HP";
      
      public static const STANDARD_MESSAGE:String = "ST";
      
      public static const STD_MESSAGE_DISPLAY_TIME:int = 4;
      
      public static const HP_MESSAGE_DISPLAY_TIME:int = 10;
      
      public function LogMessageProfileFactory()
      {
         super();
      }
      
      public static function getLogMessageProfile(param1:String) : LogMessageProfile
      {
         var _loc2_:LogMessageProfile = new LogMessageProfile(param1);
         _loc2_.displayTime = getDisplayTimeByType(param1);
         _loc2_.highPriority = isHighPriority(param1);
         return _loc2_;
      }
      
      private static function isHighPriority(param1:String) : Boolean
      {
         return param1 == HIGH_PRIORITY_MESSAGE;
      }
      
      private static function getDisplayTimeByType(param1:String) : int
      {
         if(param1 == STANDARD_MESSAGE)
         {
            return STD_MESSAGE_DISPLAY_TIME;
         }
         return HP_MESSAGE_DISPLAY_TIME;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.MovieClip;
   
   public class MemberLiveBar extends MovieClip
   {
      
      private var _base:Bitmap;
      
      private var _valueMaskClip:Bitmap;
      
      private var _lightClip:Bitmap;
      
      private var _liveValue:Number;
      
      private const BAR_WIDTH:int = 62;
      
      private const BAR_HEIGHT:int = 7;
      
      public function MemberLiveBar()
      {
         super();
         this._valueMaskClip = new Bitmap(new BitmapData(this.BAR_WIDTH,this.BAR_HEIGHT,false,16777215));
      }
      
      public function set lightClip(param1:Bitmap) : void
      {
         this._lightClip = param1;
         this._lightClip.mask = this._valueMaskClip;
         addChild(this._lightClip);
         addChild(this._valueMaskClip);
         this.liveValue = this._liveValue;
      }
      
      public function set base(param1:Bitmap) : void
      {
         this._base = param1;
         addChild(this._base);
      }
      
      public function get base() : Bitmap
      {
         return this._base;
      }
      
      public function get lightClip() : Bitmap
      {
         return this._lightClip;
      }
      
      public function get liveValue() : Number
      {
         return this._liveValue;
      }
      
      public function set liveValue(param1:Number) : void
      {
         this._liveValue = param1;
         this._valueMaskClip.scaleX = this._liveValue;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import flash.events.MouseEvent;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.menu.ActionButton;
   import net.bigpoint.darkorbit.menu.ActionButtonPattern;
   import net.bigpoint.darkorbit.menu.MainMenu;
   import net.bigpoint.darkorbit.menu.SuperActionButton;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignNames;
   
   public class MenuButton
   {
      
      public static var MENUBUTTON_LASER:int = 0;
      
      public static var MENUBUTTON_ROCKET:int = 1;
      
      public static var MENUBUTTON_EXPLOSIVE:int = 2;
      
      public static var MENUBUTTON_CPU:int = 3;
      
      public static var MENUBUTTON_EXTRAS:int = 4;
      
      private var id:int;
      
      private var middleMenu:MainMenu;
      
      private var mc:MovieClip;
      
      private var actionIDs:Array;
      
      private var subAction:Boolean;
      
      private var actionNormal:Bitmap;
      
      private var actionHover:Bitmap;
      
      private var actionDisabled:Bitmap;
      
      private var actionSelected:Bitmap;
      
      private var preselected:Boolean;
      
      private var languageKey:String;
      
      public function MenuButton(param1:int, param2:String, param3:Boolean, param4:String, param5:String, param6:String, param7:MainMenu, param8:String = null)
      {
         super();
         var _loc9_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         this.id = param1;
         this.subAction = param3;
         this.middleMenu = param7;
         this.languageKey = param8;
         this.actionNormal = _loc9_.getEmbededBitmap(param4);
         this.actionHover = _loc9_.getEmbededBitmap(param5);
         this.actionSelected = _loc9_.getEmbededBitmap(param6);
         this.actionDisabled = _loc9_.getEmbededBitmap("comb00_deactivated.png");
         this.actionSelected.x = -1;
         this.actionSelected.y = -2;
         this.actionHover.alpha = 0;
         this.actionSelected.alpha = 0;
         this.mc = new MovieClip();
         this.mc.buttonMode = true;
         this.mc.addChild(this.actionNormal);
         this.mc.addChild(this.actionHover);
         this.mc.addChild(this.actionSelected);
         this.mc.addChild(_loc9_.getEmbededBitmap(param2));
         this.mc.addChild(this.actionDisabled);
         if(!param7.getMenuManager().isMenuButtonBlacklisted(param1))
         {
            this.actionDisabled.visible = false;
         }
         this.actionIDs = [];
         this.mc.addEventListener(MouseEvent.CLICK,this.handleMouseClick);
         this.mc.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
         this.mc.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
         if(param8 != null)
         {
            TooltipControl.getInstance().addToolTip(this.mc,BPLocale.getText(param8));
         }
      }
      
      private function handleMouseOver(param1:MouseEvent) : void
      {
         if(!this.actionDisabled.visible)
         {
            TweenLite.to(this.actionHover,0.5,{"alpha":1});
         }
      }
      
      private function handleMouseOut(param1:MouseEvent) : void
      {
         if(!this.actionDisabled.visible)
         {
            TweenLite.to(this.actionHover,0.5,{"alpha":0});
         }
      }
      
      public function updateButtonsInPool() : void
      {
         var _loc2_:int = 0;
         var _loc3_:ButtonSlot = null;
         var _loc6_:ActionButtonPattern = null;
         var _loc7_:ActionButton = null;
         var _loc8_:Boolean = false;
         var _loc9_:CPUItem = null;
         var _loc10_:CPUItem = null;
         var _loc11_:CPUItem = null;
         var _loc12_:CPUItem = null;
         var _loc13_:CPUItem = null;
         var _loc14_:CPUItem = null;
         var _loc15_:CPUItem = null;
         var _loc16_:CPUItem = null;
         var _loc17_:CPUItem = null;
         var _loc18_:CPUItem = null;
         var _loc19_:CPUItem = null;
         var _loc1_:Array = this.middleMenu.getPoolSlots();
         _loc2_ = 0;
         while(_loc2_ < _loc1_.length)
         {
            _loc3_ = _loc1_[_loc2_];
            _loc7_ = _loc3_.getActionButton();
            if(_loc7_ != null)
            {
               this.middleMenu.getMenuManager().removeActionButton(_loc7_);
               _loc3_.removeActionButton();
            }
            if(!_loc3_.isAllocated())
            {
               _loc3_.getMC().visible = false;
            }
            _loc2_++;
         }
         var _loc4_:Array = this.middleMenu.getMenuManager().actionButtonPatterns;
         var _loc5_:int = 1;
         this.middleMenu.getMenuManager().actionButtonsWithCooldowns = [];
         this.middleMenu.getMenuManager().getQuickMenu().updateCooldownButtonsArray();
         _loc2_ = 0;
         for(; _loc2_ < _loc4_.length; _loc2_++)
         {
            _loc6_ = _loc4_[_loc2_] as ActionButtonPattern;
            if(this.middleMenu.getMenuManager().isButtonBlacklisted(_loc6_.actionID))
            {
               continue;
            }
            if(_loc6_.getMenuID() != this.id)
            {
               continue;
            }
            if(_loc6_.canActivate)
            {
               _loc3_ = _loc1_[0];
               _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
               continue;
            }
            if(_loc6_.isAlwaysExist())
            {
               _loc3_ = _loc1_[_loc5_];
               _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
               _loc5_++;
               if(_loc3_.getActionButton().isTechButton)
               {
                  this.middleMenu.getMenuManager().actionButtonsWithCooldowns.push(_loc3_.getActionButton());
               }
               continue;
            }
            switch(_loc6_.actionID)
            {
               case SuperActionButton.ACTIVATION_SKILL_SOLACE:
                  _loc8_ = Boolean(Hero.skills[SkillDesignNames.SHIP_SKILL_SOLACE]);
                  if(_loc8_)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                     this.middleMenu.getMenuManager().actionButtonsWithCooldowns.push(_loc3_.getActionButton());
                  }
                  break;
               case SuperActionButton.ACTIVATION_SKILL_DIMINISHER:
                  _loc8_ = Boolean(Hero.skills[SkillDesignNames.SHIP_SKILL_DIMINISHER]);
                  if(_loc8_)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                     this.middleMenu.getMenuManager().actionButtonsWithCooldowns.push(_loc3_.getActionButton());
                  }
                  break;
               case SuperActionButton.ACTIVATION_SKILL_SENTINEL:
                  _loc8_ = Boolean(Hero.skills[SkillDesignNames.SHIP_SKILL_SENTINEL]);
                  if(_loc8_)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                     this.middleMenu.getMenuManager().actionButtonsWithCooldowns.push(_loc3_.getActionButton());
                  }
                  break;
               case SuperActionButton.ACTIVATION_SKILL_SPECTRUM:
                  _loc8_ = Boolean(Hero.skills[SkillDesignNames.SHIP_SKILL_SPECTRUM]);
                  if(_loc8_)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                     this.middleMenu.getMenuManager().actionButtonsWithCooldowns.push(_loc3_.getActionButton());
                  }
                  break;
               case SuperActionButton.ACTIVATION_SKILL_VENOM:
                  _loc8_ = Boolean(Hero.skills[SkillDesignNames.SHIP_SKILL_VENOM]);
                  if(_loc8_)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                     this.middleMenu.getMenuManager().actionButtonsWithCooldowns.push(_loc3_.getActionButton());
                  }
                  break;
               case SuperActionButton.ACTIVATION_SKILL_LIGHNTING:
                  _loc8_ = Boolean(Hero.skills[SkillDesignNames.SHIP_SKILL_LIGHTNING]);
                  if(_loc8_)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                     this.middleMenu.getMenuManager().actionButtonsWithCooldowns.push(_loc3_.getActionButton());
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_AIM:
                  _loc9_ = Hero.cpuItems[CPUItem.TYPE_AIM];
                  if(_loc9_ != null)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_AROL:
                  _loc10_ = Hero.cpuItems[CPUItem.TYPE_AROL];
                  if(_loc10_ != null)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_RLLB:
                  _loc11_ = Hero.cpuItems[CPUItem.TYPE_RLLB];
                  if(_loc11_ != null)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_CLOAK:
                  _loc12_ = Hero.cpuItems[CPUItem.TYPE_CLOAK];
                  if(_loc12_ != null)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_JUMP:
                  _loc13_ = Hero.cpuItems[CPUItem.TYPE_JUMP];
                  if(_loc13_ != null)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                  }
                  break;
               case SuperActionButton.SELECT_CPU_JUMP_TARGET:
                  _loc14_ = Hero.cpuItems[CPUItem.TYPE_ADVANCED_JUMP];
                  if(_loc14_ != null)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_ROBOT:
                  _loc15_ = Hero.cpuItems[CPUItem.TYPE_ROBOT];
                  if(_loc15_ != null)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_HM7:
                  _loc16_ = Hero.cpuItems[CPUItem.TYPE_HM7];
                  if(_loc16_ != null)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_DRONE_REPAIR:
                  _loc17_ = Hero.cpuItems[CPUItem.TYPE_DRONE_REPAIR];
                  if(_loc17_ != null)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_AMMOBUY:
                  _loc18_ = Hero.cpuItems[CPUItem.TYPE_AMMOBUY];
                  if(_loc18_ != null)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                  }
                  break;
               case SuperActionButton.ACTIVATION_TECH:
                  break;
               case SuperActionButton.ACTIVATION_CPU_ROCKETBUY:
                  _loc19_ = Hero.cpuItems[CPUItem.TYPE_ROCKETBUY];
                  if(_loc19_ != null)
                  {
                     _loc3_ = _loc1_[_loc5_++];
                     _loc3_.addActionButton(this.middleMenu.getMenuManager().createActionButton(_loc6_.actionID));
                  }
            }
         }
         this.middleMenu.getMenuManager().updateRegisteredFlashingButtons();
         this.middleMenu.getMenuManager().updateTechs();
      }
      
      private function handleMouseClick(param1:MouseEvent) : void
      {
         if(!this.actionDisabled.visible)
         {
            this.toggle();
         }
      }
      
      public function toggle() : void
      {
         var _loc3_:int = 0;
         var _loc4_:MenuButton = null;
         var _loc5_:Array = null;
         var _loc6_:ButtonSlot = null;
         var _loc7_:ActionButton = null;
         var _loc1_:Map = this.middleMenu.getMenuManager().getGuiManager().getMain().screenManager.map;
         if(_loc1_ != null)
         {
            if(_loc1_.getEventManager().isControlsLocked())
            {
               return;
            }
         }
         AudioManager.playSoundEffect(24);
         var _loc2_:Array = this.middleMenu.getMenuButtons();
         if(this.actionSelected.alpha == 0)
         {
            if(this.subAction)
            {
               this.middleMenu.getSubActionSlot().visible = true;
            }
            else
            {
               this.middleMenu.getSubActionSlot().visible = false;
            }
            _loc3_ = 0;
            while(_loc3_ < _loc2_.length)
            {
               _loc4_ = _loc2_[_loc3_];
               _loc4_.setDeselected();
               _loc3_++;
            }
            this.setSelected();
            this.updateButtonsInPool();
            if(this.id == 3)
            {
               this.middleMenu.getMenuManager().invalidateCPUButtons();
            }
            this.middleMenu.setPoolSlotVisibility(true);
            this.middleMenu.getMenuManager().getGuiManager().checkCooldowns();
         }
         else if(this.actionSelected.alpha == 1)
         {
            if(this.subAction)
            {
               this.middleMenu.getSubActionSlot().visible = false;
            }
            _loc3_ = 0;
            while(_loc3_ < _loc2_.length)
            {
               _loc4_ = _loc2_[_loc3_];
               _loc4_.setDeselected();
               _loc3_++;
            }
            _loc5_ = this.middleMenu.getPoolSlots();
            _loc3_ = 0;
            while(_loc3_ < _loc5_.length)
            {
               _loc6_ = _loc5_[_loc3_];
               _loc7_ = _loc6_.getActionButton();
               if(_loc7_ != null)
               {
                  this.middleMenu.getMenuManager().removeActionButton(_loc7_);
               }
               _loc6_.removeActionButton();
               _loc3_++;
            }
            this.middleMenu.setPoolSlotVisibility(false);
         }
         this.middleMenu.getMenuManager().updateTechs();
      }
      
      public function addActionID(param1:int) : void
      {
         this.actionIDs.push(param1);
      }
      
      public function getMC() : MovieClip
      {
         return this.mc;
      }
      
      public function setSelected() : void
      {
         this.preselected = true;
         TweenLite.to(this.actionSelected,0.25,{"alpha":1});
      }
      
      public function isSelected() : Boolean
      {
         if(this.actionSelected.alpha == 1)
         {
            return true;
         }
         return false;
      }
      
      public function setDeselected() : void
      {
         this.preselected = false;
         TweenLite.to(this.actionSelected,0.25,{"alpha":0});
      }
      
      public function getID() : int
      {
         return this.id;
      }
      
      public function getActionIDs() : Array
      {
         return this.actionIDs;
      }
      
      public function hasSubAction() : Boolean
      {
         return this.subAction;
      }
      
      public function isPreselected() : Boolean
      {
         return this.preselected;
      }
      
      public function hasActionID(param1:int) : Boolean
      {
         var _loc2_:int = 0;
         while(_loc2_ < this.actionIDs.length)
         {
            if(param1 == this.actionIDs[_loc2_])
            {
               return true;
            }
            _loc2_++;
         }
         return false;
      }
      
      public function get enabled() : Boolean
      {
         if(this.actionDisabled.visible)
         {
            return false;
         }
         return true;
      }
      
      public function set enabled(param1:Boolean) : void
      {
         if(param1)
         {
            this.actionDisabled.visible = false;
         }
         else
         {
            this.actionDisabled.visible = true;
         }
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   public class MgmtBtnConfig
   {
      
      public var tooltipKey:String = "";
      
      public var action:Function;
      
      public function MgmtBtnConfig(param1:Function = null, param2:String = "")
      {
         super();
         this.action = param1;
         this.tooltipKey = param2;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class NetworkMonitorWindowDecorator
   {
      
      private var guiManager:GuiManager;
      
      private var uiResources:SWFFinisher;
      
      public var playersLeft:int = 0;
      
      public function NetworkMonitorWindowDecorator(param1:GuiManager)
      {
         super();
         this.guiManager = param1;
         this.uiResources = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
      }
      
      public function decorate(param1:SimpleWindow) : void
      {
         var _loc2_:SimpleContainer = new SimpleContainer(this.guiManager,SimpleContainer.CLASS_LOG);
         var _loc3_:SimpleElement = new SimpleElement(SimpleElement.CONNECTION_STATUS);
         var _loc4_:TextField = this.returnFormattedTextField();
         _loc4_.text = BPLocale.getText("label_conn_status") + this.guiManager.getMain().getConnectionManager().xmlSocket.connected;
         _loc3_.addChild(_loc4_);
         _loc3_.y = 10;
         _loc2_.addElement(_loc3_);
         var _loc5_:SimpleElement = new SimpleElement(SimpleElement.CURRENT_IP);
         var _loc6_:TextField = this.returnFormattedTextField();
         _loc6_.text = BPLocale.getText("label_next_ip") + Settings.defaultGameServer;
         _loc5_.addChild(_loc6_);
         _loc5_.y = 10;
         _loc2_.addElement(_loc5_);
         var _loc7_:SimpleElement = new SimpleElement(SimpleElement.NEXT_IP);
         var _loc8_:TextField = this.returnFormattedTextField();
         _loc8_.text = BPLocale.getText("label_next_ip").replace(/%NEXT_IP%/,BPLocale.getText("label_not_set"));
         _loc7_.addChild(_loc8_);
         _loc7_.y = 15;
         _loc2_.addElement(_loc7_);
         var _loc9_:SimpleElement = new SimpleElement(SimpleElement.CURRENT_MAP);
         var _loc10_:TextField = this.returnFormattedTextField();
         _loc10_.text = BPLocale.getText("label_cur_map").replace(/%CUR_MAP%/,this.guiManager.getMain().screenManager.map.getMapID());
         _loc9_.addChild(_loc10_);
         _loc9_.y = 20;
         _loc2_.addElement(_loc9_);
         var _loc11_:SimpleElement = new SimpleElement(SimpleElement.NEXT_MAP);
         var _loc12_:TextField = this.returnFormattedTextField();
         _loc12_.text = BPLocale.getText("label_next_map").replace(/%NEXT_MAP%/,this.guiManager.getMain().screenManager.map.getMapID());
         _loc11_.addChild(_loc12_);
         _loc11_.y = 25;
         _loc2_.addElement(_loc11_);
         var _loc13_:SimpleElement = new SimpleElement(SimpleElement.CURRENT_PORT);
         var _loc14_:TextField = this.returnFormattedTextField();
         _loc14_.text = BPLocale.getText("label_cur_port").replace(/%CUR_PORT%/,this.guiManager.getMain().getConnectionManager().port);
         _loc13_.addChild(_loc14_);
         _loc13_.y = 30;
         _loc2_.addElement(_loc13_);
         var _loc15_:SimpleElement = new SimpleElement(SimpleElement.NUMBER_OF_TRIES);
         var _loc16_:TextField = this.returnFormattedTextField();
         _loc16_.text = BPLocale.getText("label_num_tries").replace(/%NUM_TRIES%/,BPLocale.getText("label_not_set"));
         _loc15_.addChild(_loc16_);
         _loc15_.y = 35;
         _loc2_.addElement(_loc15_);
         var _loc17_:SimpleElement = new SimpleElement(SimpleElement.CONNECT_PENDING_STATUS);
         var _loc18_:TextField = this.returnFormattedTextField();
         _loc18_.text = BPLocale.getText("label_conn_pending").replace(/%CONN_PENDING%/,BPLocale.getText("label_not_set"));
         _loc17_.addChild(_loc18_);
         _loc17_.y = 40;
         _loc2_.addElement(_loc17_);
         param1.addContainer(_loc2_);
         _loc2_.x = 20;
         _loc2_.y = 20;
      }
      
      private function returnFormattedTextField() : TextField
      {
         var _loc1_:TextField = new TextField();
         _loc1_.antiAliasType = AntiAliasType.ADVANCED;
         _loc1_.defaultTextFormat = Styles.logFmt;
         _loc1_.wordWrap = false;
         _loc1_.embedFonts = Styles.logEmbed;
         _loc1_.autoSize = TextFieldAutoSize.LEFT;
         return _loc1_;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import com.greensock.easing.Strong;
   import flash.display.Bitmap;
   import flash.display.InteractiveObject;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.gui.windows.components.BarComponent;
   import net.bigpoint.darkorbit.gui.windows.components.gear.GearComboBox;
   import net.bigpoint.darkorbit.gui.windows.components.gear.GearMenuContainer;
   import net.bigpoint.darkorbit.gui.windows.components.gear.GearScroller;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class PetWindowDecorator
   {
      
      public static const logger:ILogger = Log.getLogger("PetWindowDecorator");
      
      public static const barColors:Array = [65280,255,16711680,16777215];
      
      public static const EXPANDED_WINDOW_HEIGHT:int = 45;
      
      public static const IMAGE_SIZE_MAX:int = 70;
      
      public static const BORDER:int = 10;
      
      private var petNameTextfield:TextField;
      
      private var windowIcon:Bitmap;
      
      private var playButton:MovieClip;
      
      private var stopButton:MovieClip;
      
      private var fuelButton:MovieClip;
      
      private var expandButton:MovieClip;
      
      private var repairButton:MovieClip;
      
      private var collapsableContainer:Sprite;
      
      private var windowComponentsContainer:SimpleContainer;
      
      private var guiManager:GuiManager;
      
      private var barIcons:Array;
      
      private var window:SimpleWindow;
      
      private var gearsCombo:GearComboBox;
      
      public function PetWindowDecorator(param1:GuiManager)
      {
         super();
         this.guiManager = param1;
      }
      
      public function decorate(param1:SimpleWindow) : void
      {
         this.getAssets();
         this.window = param1;
         this.windowComponentsContainer = this.window.getContainer(SimpleContainer.CLASS_PET_WINDOW_CONTENT);
         param1.resizer.removeEventListener(MouseEvent.MOUSE_DOWN,param1.handleMouseDownResizer);
         param1.setLabelText("title_pet");
         this.initInfoBars();
         this.initButtons();
         this.initCollapsableMenu();
         this.initComboBoxBody();
      }
      
      private function initComboBoxBody() : void
      {
         var _loc1_:GearMenuContainer = new GearMenuContainer();
         _loc1_.x = BORDER * 13;
         _loc1_.y = BORDER * 13;
         var _loc2_:GearScroller = new GearScroller();
         _loc1_.addMainMenu(_loc2_);
         this.window.addChild(_loc1_);
      }
      
      private function initCollapsableMenu() : void
      {
         var _loc1_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_BUFF_CONTAINER);
         this.collapsableContainer = new Sprite();
         _loc1_.addChild(this.collapsableContainer);
         _loc1_.x = 0;
         _loc1_.y = BORDER * 13;
         this.windowComponentsContainer.addElement(_loc1_,SimpleContainer.NO_ALIGN);
         if(Settings.resolutionID > 0)
         {
            this.handleExpandButtonClick();
         }
      }
      
      private function initButtons() : void
      {
         var _loc1_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_PLAY_BTN);
         var _loc2_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_STOP_BTN);
         var _loc3_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_REPAIR_BTN);
         var _loc4_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_FUEL_BTN);
         var _loc5_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_EXPAND_BTN);
         var _loc6_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_GEAR_COMBO_CONTAINER);
         this.repairButton.gotoAndStop(1);
         this.playButton.gotoAndStop(1);
         this.stopButton.gotoAndStop(1);
         this.fuelButton.gotoAndStop(1);
         this.expandButton.gotoAndStop(1);
         this.repairButton.buttonMode = this.repairButton.useHandCursor = true;
         this.playButton.buttonMode = this.playButton.useHandCursor = true;
         this.stopButton.buttonMode = this.stopButton.useHandCursor = true;
         this.fuelButton.buttonMode = this.fuelButton.useHandCursor = true;
         this.expandButton.buttonMode = this.expandButton.useHandCursor = true;
         this.repairButton.visible = false;
         this.expandButton.addEventListener(MouseEvent.CLICK,this.handleExpandButtonClick);
         this.gearsCombo = new GearComboBox();
         _loc6_.addChild(this.gearsCombo);
         this.gearsCombo.init();
         this.addTooltip(this.playButton,"label_activate_pet");
         this.addTooltip(this.repairButton,"ttip_repair_pet");
         this.addTooltip(this.stopButton,"label_deactivate_pet");
         this.addTooltip(this.gearsCombo,"ttip_pet_gear_combobox");
         this.addTooltip(this.fuelButton,"ttip_buy_pet_fuel");
         _loc2_.addChild(this.stopButton);
         _loc1_.addChild(this.playButton);
         _loc3_.addChild(this.repairButton);
         _loc4_.addChild(this.fuelButton);
         _loc5_.addChild(this.expandButton);
         _loc3_.x = _loc2_.x = _loc1_.x = BORDER;
         _loc4_.x = BORDER * 7;
         _loc6_.x = BORDER * 12;
         _loc2_.y = _loc1_.y = _loc3_.y = _loc4_.y = _loc5_.y = _loc6_.y = 100;
         _loc5_.x = this.window.resizer.x + 2;
         _loc5_.y = this.window.resizer.y + 2;
         this.windowComponentsContainer.addElement(_loc2_,SimpleContainer.NO_ALIGN);
         this.windowComponentsContainer.addElement(_loc1_,SimpleContainer.NO_ALIGN);
         this.windowComponentsContainer.addElement(_loc4_,SimpleContainer.NO_ALIGN);
         this.windowComponentsContainer.addElement(_loc5_,SimpleContainer.NO_ALIGN);
         this.windowComponentsContainer.addElement(_loc3_,SimpleContainer.NO_ALIGN);
         this.windowComponentsContainer.addElement(_loc6_,SimpleContainer.NO_ALIGN);
         this.addButtonsListeners();
      }
      
      private function addButtonsListeners() : void
      {
         this.repairButton.addEventListener(MouseEvent.MOUSE_OVER,this.handleButtonOver);
         this.repairButton.addEventListener(MouseEvent.MOUSE_OUT,this.handleButtonOut);
         this.fuelButton.addEventListener(MouseEvent.MOUSE_OVER,this.handleButtonOver);
         this.fuelButton.addEventListener(MouseEvent.MOUSE_OUT,this.handleButtonOut);
         this.playButton.addEventListener(MouseEvent.MOUSE_OVER,this.handleButtonOver);
         this.playButton.addEventListener(MouseEvent.MOUSE_OUT,this.handleButtonOut);
         this.stopButton.addEventListener(MouseEvent.MOUSE_OVER,this.handleButtonOver);
         this.stopButton.addEventListener(MouseEvent.MOUSE_OUT,this.handleButtonOut);
      }
      
      private function initInfoBars() : void
      {
         var _loc10_:BarComponent = null;
         var _loc11_:BarComponent = null;
         var _loc12_:BarComponent = null;
         var _loc13_:BarComponent = null;
         var _loc1_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_HP_BAR);
         var _loc2_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_XP_BAR);
         var _loc3_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_FUEL_BAR);
         var _loc4_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_SHIELD_BAR);
         var _loc5_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_PETNAME_TEXT);
         var _loc6_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_IMAGE_CONTAINER);
         var _loc7_:int = 0;
         var _loc8_:int = BORDER * 5;
         var _loc9_:int = BORDER * 6.5;
         _loc10_ = new BarComponent(barColors[_loc7_],this.barIcons[_loc7_]);
         _loc11_ = new BarComponent(barColors[++_loc7_],this.barIcons[_loc7_]);
         _loc13_ = new BarComponent(barColors[++_loc7_],this.barIcons[_loc7_]);
         _loc12_ = new BarComponent(barColors[++_loc7_],this.barIcons[_loc7_]);
         _loc1_.y = _loc8_;
         _loc1_.x = _loc9_;
         _loc4_.y = _loc8_ + BORDER * 2;
         _loc4_.x = _loc9_;
         _loc3_.y = _loc8_;
         _loc3_.x = _loc9_ + BORDER * 10.5;
         _loc2_.y = _loc8_ + BORDER * 2;
         _loc2_.x = _loc9_ + BORDER * 10.5;
         var _loc14_:TextFormat = Styles.logFmt;
         this.petNameTextfield = new TextField();
         this.petNameTextfield.antiAliasType = AntiAliasType.ADVANCED;
         this.petNameTextfield.autoSize = TextFieldAutoSize.LEFT;
         this.petNameTextfield.embedFonts = true;
         this.petNameTextfield.defaultTextFormat = _loc14_;
         this.petNameTextfield.setTextFormat(_loc14_);
         this.petNameTextfield.x = BORDER * 10;
         this.petNameTextfield.y = BORDER * 3;
         this.petNameTextfield.width = 140;
         _loc1_.addChild(_loc10_);
         _loc4_.addChild(_loc11_);
         _loc3_.addChild(_loc12_);
         _loc2_.addChild(_loc13_);
         _loc5_.addChild(this.petNameTextfield);
         var _loc15_:Sprite = new Sprite();
         _loc15_.buttonMode = _loc15_.useHandCursor = true;
         _loc6_.x = BORDER;
         _loc6_.y = BORDER * 4;
         _loc6_.addChild(_loc15_);
         this.addTooltip(_loc10_,"ttip_hitpoints");
         this.addTooltip(_loc11_,"ttip_shield");
         this.addTooltip(_loc13_,"ttip_experience");
         this.addTooltip(_loc12_,"ttip_fuel");
         this.addTooltip(_loc15_,"title_pet");
         this.windowComponentsContainer.addElement(_loc6_,SimpleContainer.NO_ALIGN);
         this.windowComponentsContainer.addElement(_loc5_,SimpleContainer.NO_ALIGN);
         this.windowComponentsContainer.addElement(_loc1_,SimpleContainer.NO_ALIGN);
         this.windowComponentsContainer.addElement(_loc2_,SimpleContainer.NO_ALIGN);
         this.windowComponentsContainer.addElement(_loc3_,SimpleContainer.NO_ALIGN);
         this.windowComponentsContainer.addElement(_loc4_,SimpleContainer.NO_ALIGN);
      }
      
      private function handleExpandButtonClick(param1:MouseEvent = null) : void
      {
         this.expandButton.removeEventListener(MouseEvent.CLICK,this.handleExpandButtonClick);
         this.toggleMovieClipState(this.expandButton);
         this.toggleCollapseWindow();
      }
      
      private function handleButtonOver(param1:MouseEvent) : void
      {
         var _loc2_:MovieClip = param1.target as MovieClip;
         _loc2_.gotoAndStop(2);
      }
      
      private function handleButtonOut(param1:MouseEvent) : void
      {
         var _loc2_:MovieClip = param1.target as MovieClip;
         _loc2_.gotoAndStop(1);
      }
      
      private function toggleCollapseWindow() : void
      {
         var _loc1_:int = 0;
         if(this.isCollapsed())
         {
            _loc1_ = -EXPANDED_WINDOW_HEIGHT;
         }
         else
         {
            _loc1_ = EXPANDED_WINDOW_HEIGHT;
            this.toggleCollapsableFrameVisibility(true);
         }
         TweenLite.to(this.window.resizer,1,{
            "y":this.window.resizer.y + _loc1_,
            "ease":Strong.easeInOut,
            "onUpdate":this.updateWindowExpansionHandler,
            "onComplete":this.completeWindowExpansionHandler
         });
      }
      
      private function updateWindowExpansionHandler() : void
      {
         this.window.checkSize();
         this.windowComponentsContainer.getElement(SimpleElement.PET_WINDOW_EXPAND_BTN).y = this.window.resizer.y + 2;
      }
      
      private function completeWindowExpansionHandler() : void
      {
         this.expandButton.addEventListener(MouseEvent.CLICK,this.handleExpandButtonClick);
         this.toggleCollapsableFrameVisibility(!this.isCollapsed());
      }
      
      private function toggleCollapsableFrameVisibility(param1:Boolean) : void
      {
         this.collapsableContainer.visible = param1;
      }
      
      private function toggleMovieClipState(param1:MovieClip) : void
      {
         var _loc2_:int = 1;
         if(param1.currentFrame == _loc2_)
         {
            _loc2_ = 2;
         }
         param1.gotoAndStop(_loc2_);
      }
      
      private function getAssets() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("window1"));
         this.windowIcon = _loc1_.getEmbededBitmap("pet.png");
         _loc1_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.playButton = _loc1_.getEmbededMovieClip("petPlayButton");
         this.stopButton = _loc1_.getEmbededMovieClip("petStopButton");
         this.fuelButton = _loc1_.getEmbededMovieClip("petFuelButton");
         this.expandButton = _loc1_.getEmbededMovieClip("expandButton");
         this.repairButton = _loc1_.getEmbededMovieClip("petRepairButton");
         this.barIcons = [_loc1_.getEmbededBitmap("hp_small.png"),_loc1_.getEmbededBitmap("shild_small.png"),_loc1_.getEmbededBitmap("xp_small.png"),_loc1_.getEmbededBitmap("fuel_small.png")];
      }
      
      private function addTooltip(param1:InteractiveObject, param2:String) : void
      {
         TooltipControl.getInstance().addToolTip(param1,BPLocale.getText(param2));
      }
      
      private function isCollapsed() : Boolean
      {
         return this.expandButton.currentFrame == 1;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import fl.controls.Slider;
   import fl.events.SliderEvent;
   import flash.display.Shape;
   import flash.events.Event;
   import flash.events.MouseEvent;
   import flash.external.ExternalInterface;
   import flash.geom.Point;
   import flash.system.System;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.ButtonElement;
   import net.bigpoint.darkorbit.gui.elements.CheckBoxComponent;
   import net.bigpoint.darkorbit.gui.elements.SettingsField;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.elements.TextFieldElement;
   import net.bigpoint.darkorbit.gui.elements.combobox.ComboBoxComponent;
   import net.bigpoint.darkorbit.gui.elements.combobox.ComboboxItem;
   import net.bigpoint.darkorbit.gui.elements.slider.SliderComponent;
   import net.bigpoint.darkorbit.gui.elements.slider.SliderInterval;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.ConnectionManager;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.net.SettingsAssembly;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.resolution.ResolutionPattern;
   import net.bigpoint.darkorbit.settings.Presetting;
   import net.bigpoint.darkorbit.settings.PresettingItem;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class SettingsWindowDecorator
   {
      
      private static var settingsAssemblyDict:Dictionary;
      
      private var guiManager:GuiManager;
      
      private var uiResources:SWFFinisher;
      
      private var settingTabButtons:Dictionary = new Dictionary();
      
      private var settingTabPages:Dictionary = new Dictionary();
      
      private var qualityPresetting:Presetting;
      
      private var presettingSlider:SliderComponent;
      
      private var isAdvanced:Boolean = false;
      
      private var advancedBtn:ButtonElement;
      
      private var advancedTxt:TextFieldElement;
      
      public function SettingsWindowDecorator(param1:GuiManager)
      {
         super();
         this.guiManager = param1;
         this.uiResources = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.qualityPresetting = new Presetting();
      }
      
      public static function getCheckBoxSettingValue(param1:int) : Boolean
      {
         switch(param1)
         {
            case SettingsField.TYPE_DISPLAY_NOTIFICATIONS:
               return Settings.displayNotifications;
            case SettingsField.TYPE_SHOW_CHAT:
               return Settings.displayChat;
            case SettingsField.TYPE_PLAY_MUSIC:
               return Settings.playMusic;
            case SettingsField.TYPE_PLAY_SFX:
               return Settings.playSFX;
            case SettingsField.TYPE_SHOW_HITPOINT_BUBBLES:
               return Settings.displayHitpointBubbles;
            case SettingsField.TYPE_SHOW_PLAYERNAMES:
               return Settings.displayPlayerNames;
            case SettingsField.TYPE_AUTO_BOOST:
               return Settings.autoBoost;
            case SettingsField.TYPE_SHOW_RESOURCES:
               return Settings.displayResources;
            case SettingsField.TYPE_SHOW_BONUS_BOXES:
               return Settings.displayBonusBoxes;
            case SettingsField.TYPE_SHOW_FREE_CARGO_BOXES:
               return Settings.displayFreeCargoBoxes;
            case SettingsField.TYPE_SHOW_NOT_FREE_CARGO_BOXES:
               return Settings.displayNotFreeCargoBoxes;
            case SettingsField.TYPE_SHOW_DRONES:
               return Settings.displayDrones;
            case SettingsField.TYPE_AUTO_AMMUNITION_CHANGE:
               return Settings.autochangeAmmo;
            case SettingsField.TYPE_AUTO_REFINEMENT:
               return Settings.autoRefinement;
            case SettingsField.TYPE_QUICKSLOT_STOP_ATTACK:
               return Settings.quickSlotStopAttack;
            case SettingsField.TYPE_AUTOSTART:
               return Settings.autoStartEnabled;
            case SettingsField.TYPE_DOUBLECLICK_ATTACK:
               return Settings.doubleclickAttackEnabled;
            case SettingsField.TYPE_DISPLAY_WINDOW_BACKGROUND:
               return Settings.showWindowsBackground;
            case SettingsField.TYPE_ALWAYS_DRAGGABLE_WINDOWS:
               return Settings.dragWindowsAlways;
            case SettingsField.TYPE_PELOAD_USER_SHIPS:
               return Settings.preloadUserShips;
            default:
               return false;
         }
      }
      
      public static function getComboBoxSettingValue(param1:int) : int
      {
         switch(param1)
         {
            case SettingsField.TYPE_RESOLUTION:
               return Settings.resolutionID;
            case SettingsField.TYPE_QUALITY_BACKGROUND:
               return Settings.qualityBackground;
            case SettingsField.TYPE_QUALITY_POIZONE:
               return Settings.qualityPoizone;
            case SettingsField.TYPE_QUALITY_SHIP:
               return Settings.qualityShip;
            case SettingsField.TYPE_QUALITY_ENGINE:
               return Settings.qualityEngine;
            case SettingsField.TYPE_QUALITY_COLLECTABLE:
               return Settings.qualityCollectable;
            case SettingsField.TYPE_QUALITY_ATTACK:
               return Settings.qualityAttack;
            case SettingsField.TYPE_QUALITY_EFFECT:
               return Settings.qualityEffect;
            case SettingsField.TYPE_QUALITY_EXPLOSION:
               return Settings.qualityExplosion;
            default:
               return 0;
         }
      }
      
      public static function getSliderSettingValue(param1:int) : int
      {
         switch(param1)
         {
            case SettingsField.TYPE_QUALITY_PRESETTING:
               return Settings.qualityPresetting;
            default:
               return 0;
         }
      }
      
      public static function setSettableSettingValue(param1:int, param2:String) : void
      {
         var _loc3_:Dictionary = getSettingsAssembleDict();
         if(_loc3_[param1] != null)
         {
            SettingsAssembly.getInstance().assembleSetting([_loc3_[param1],param2]);
         }
      }
      
      private static function getSettingsAssembleDict() : Dictionary
      {
         if(settingsAssemblyDict == null)
         {
            settingsAssemblyDict = new Dictionary();
            settingsAssemblyDict[SettingsField.TYPE_SHOW_CHAT] = ServerCommands.SET_DISPLAY_CHAT;
            settingsAssemblyDict[SettingsField.TYPE_DISPLAY_NOTIFICATIONS] = ServerCommands.SET_DISPLAY_NOTIFICATIONS;
            settingsAssemblyDict[SettingsField.TYPE_PLAY_MUSIC] = ServerCommands.SET_PLAY_MUSIC;
            settingsAssemblyDict[SettingsField.TYPE_PLAY_SFX] = ServerCommands.SET_PLAY_SFX;
            settingsAssemblyDict[SettingsField.TYPE_SHOW_HITPOINT_BUBBLES] = ServerCommands.SET_DISPLAY_HITPOINT_BUBBLES;
            settingsAssemblyDict[SettingsField.TYPE_SHOW_PLAYERNAMES] = ServerCommands.SET_DISPLAY_PLAYER_NAMES;
            settingsAssemblyDict[SettingsField.TYPE_AUTO_BOOST] = ServerCommands.SET_AUTO_BOOST;
            settingsAssemblyDict[SettingsField.TYPE_SHOW_RESOURCES] = ServerCommands.SET_DISPLAY_ORE;
            settingsAssemblyDict[SettingsField.TYPE_SHOW_BONUS_BOXES] = ServerCommands.SET_DISPLAY_BONUS_BOXES;
            settingsAssemblyDict[SettingsField.TYPE_SHOW_FREE_CARGO_BOXES] = ServerCommands.SET_DISPLAY_FREE_CARGO_BOXES;
            settingsAssemblyDict[SettingsField.TYPE_SHOW_NOT_FREE_CARGO_BOXES] = ServerCommands.SET_DISPLAY_NOT_FREE_CARGO_BOXES;
            settingsAssemblyDict[SettingsField.TYPE_SHOW_DRONES] = ServerCommands.SET_SHOW_DRONES;
            settingsAssemblyDict[SettingsField.TYPE_AUTO_AMMUNITION_CHANGE] = ServerCommands.SET_AUTO_AMMO_CHANGE;
            settingsAssemblyDict[SettingsField.TYPE_AUTO_REFINEMENT] = ServerCommands.SET_AUTO_REFINEMENT;
            settingsAssemblyDict[SettingsField.TYPE_QUICKSLOT_STOP_ATTACK] = ServerCommands.SET_QUICKSLOT_STOP_ATTACK;
            settingsAssemblyDict[SettingsField.TYPE_AUTOSTART] = ServerCommands.SET_AUTO_START;
            settingsAssemblyDict[SettingsField.TYPE_DOUBLECLICK_ATTACK] = ServerCommands.SET_DOUBLECLICK_ATTACK;
            settingsAssemblyDict[SettingsField.TYPE_DISPLAY_WINDOW_BACKGROUND] = ServerCommands.SET_DISPLAY_WINDOW_BACKGROUND;
            settingsAssemblyDict[SettingsField.TYPE_ALWAYS_DRAGGABLE_WINDOWS] = ServerCommands.SET_ALWAYS_DRAGGABLE_WINDOWS;
            settingsAssemblyDict[SettingsField.TYPE_PELOAD_USER_SHIPS] = ServerCommands.SET_PRELOAD_USER_SHIPS;
            settingsAssemblyDict[SettingsField.TYPE_RESOLUTION] = ServerCommands.SET_RESOLUTION;
            settingsAssemblyDict[SettingsField.TYPE_QUALITY_PRESETTING] = ServerCommands.SET_QUALITY_PRESETTING;
            settingsAssemblyDict[SettingsField.TYPE_QUALITY_CUSTOMIZED] = ServerCommands.SET_QUALITY_CUSTOMIZED;
            settingsAssemblyDict[SettingsField.TYPE_QUALITY_BACKGROUND] = ServerCommands.SET_QUALITY_BACKGROUND;
            settingsAssemblyDict[SettingsField.TYPE_QUALITY_SHIP] = ServerCommands.SET_QUALITY_SHIP;
            settingsAssemblyDict[SettingsField.TYPE_QUALITY_POIZONE] = ServerCommands.SET_QUALITY_POIZONE;
            settingsAssemblyDict[SettingsField.TYPE_QUALITY_ENGINE] = ServerCommands.SET_QUALITY_ENGINE;
            settingsAssemblyDict[SettingsField.TYPE_QUALITY_COLLECTABLE] = ServerCommands.SET_QUALITY_COLLECTABLE;
            settingsAssemblyDict[SettingsField.TYPE_QUALITY_ATTACK] = ServerCommands.SET_QUALITY_ATTACK;
            settingsAssemblyDict[SettingsField.TYPE_QUALITY_EFFECT] = ServerCommands.SET_QUALITY_EFFECT;
            settingsAssemblyDict[SettingsField.TYPE_QUALITY_EXPLOSION] = ServerCommands.SET_QUALITY_EXPLOSION;
         }
         return settingsAssemblyDict;
      }
      
      public function decorate(param1:SimpleWindow) : void
      {
         param1.addEventListener(SimpleWindow.ON_MAXIMIZE_CLICKED,this.handleSettingsWindowRequested);
         var _loc2_:SimpleContainer = new SimpleContainer(this.guiManager,SimpleContainer.CLASS_SETTING_TABS);
         this.createTabButton(ButtonElement.TYPE_SETTINGS_TAB_DISPLAY,_loc2_,"setting_btn_display_tab",true);
         this.createTabButton(ButtonElement.TYPE_SETTINGS_TAB_GAMEPLAY,_loc2_,"setting_btn_gameplay_tab");
         this.createTabButton(ButtonElement.TYPE_SETTINGS_TAB_INTERFACE,_loc2_,"setting_btn_interface_tab");
         this.createTabButton(ButtonElement.TYPE_SETTINGS_TAB_SOUND,_loc2_,"setting_btn_sound_tab");
         this.createTabLine(_loc2_);
         param1.addContainer(_loc2_);
         _loc2_.addPredefinedPosition(new Point(20,45));
         _loc2_.setPredefinedPosition();
         this.renderTabPage(SimpleContainer.CLASS_SETTING_TABPAGE_DISPLAY,ButtonElement.TYPE_SETTINGS_TAB_DISPLAY,param1,Main.gameXML.settingsDisplay.settingField,true);
         this.renderTabPage(SimpleContainer.CLASS_SETTING_TABPAGE_GAMEPLAY,ButtonElement.TYPE_SETTINGS_TAB_GAMEPLAY,param1,Main.gameXML.settingsGameplay.settingField,false);
         this.renderTabPage(SimpleContainer.CLASS_SETTING_TABPAGE_INTERFACE,ButtonElement.TYPE_SETTINGS_TAB_INTERFACE,param1,Main.gameXML.settingsInterface.settingField,false);
         this.renderTabPage(SimpleContainer.CLASS_SETTING_TABPAGE_SOUND,ButtonElement.TYPE_SETTINGS_TAB_SOUND,param1,Main.gameXML.settingsSound.settingField,false);
         var _loc3_:SimpleContainer = new SimpleContainer(this.guiManager,SimpleContainer.CLASS_SETTING_BUTTONS);
         var _loc4_:ButtonElement = new ButtonElement(ButtonElement.TYPE_SAVE_SETTINGS,BPLocale.getText("sett_save"),this.uiResources.getEmbededMovieClip("button1"));
         _loc4_.addEventListener(MouseEvent.CLICK,this.handleSaveButtonClick);
         _loc3_.addElement(_loc4_,SimpleContainer.ALIGN_VERTICAL);
         var _loc5_:ButtonElement = new ButtonElement(ButtonElement.TYPE_CANCEL_SETTINGS,BPLocale.getText("btn_cancel"),this.uiResources.getEmbededMovieClip("button1"));
         _loc5_.addEventListener(MouseEvent.CLICK,this.handleCancelButtonClick);
         _loc3_.addElement(_loc5_,SimpleContainer.ALIGN_HORIZONTAL);
         var _loc6_:ButtonElement = new ButtonElement(ButtonElement.TYPE_RESET_SETTINGS,BPLocale.getText("btn_reset"),this.uiResources.getEmbededMovieClip("button1"));
         _loc6_.addEventListener(MouseEvent.CLICK,this.handleResetButtonClick);
         _loc3_.addElement(_loc6_,SimpleContainer.ALIGN_HORIZONTAL);
         param1.addContainer(_loc3_);
         _loc3_.addPredefinedPosition(new Point(30,param1.getWindowDimension().y - 11));
         _loc3_.setPredefinedPosition();
      }
      
      private function renderTabPage(param1:int, param2:int, param3:SimpleWindow, param4:XMLList, param5:Boolean = true) : SimpleContainer
      {
         var _loc8_:int = 0;
         var _loc9_:String = null;
         var _loc10_:String = null;
         var _loc11_:String = null;
         var _loc12_:String = null;
         var _loc13_:int = 0;
         var _loc14_:String = null;
         var _loc15_:Boolean = false;
         var _loc16_:XML = null;
         var _loc17_:Array = null;
         var _loc18_:ComboBoxComponent = null;
         var _loc19_:CheckBoxComponent = null;
         var _loc20_:XML = null;
         var _loc21_:TextFormat = null;
         var _loc22_:TextField = null;
         var _loc6_:int = 0;
         var _loc7_:SimpleContainer = new SimpleContainer(this.guiManager,param1);
         param3.addContainer(_loc7_);
         _loc7_.addPredefinedPosition(new Point(10,75));
         _loc7_.setPredefinedPosition();
         this.settingTabPages[param2] = _loc7_;
         _loc7_.visible = param5;
         for each(_loc20_ in param4)
         {
            _loc8_ = parseInt(_loc20_.@id);
            _loc9_ = _loc20_.@type;
            _loc10_ = _loc20_.@key;
            _loc12_ = _loc20_.@align;
            _loc11_ = _loc20_.@tooltipKey;
            _loc15_ = Main.parseBooleanFromString(_loc20_.@isAdvanced);
            switch(_loc9_)
            {
               case "slider":
                  _loc17_ = [];
                  for each(_loc16_ in _loc20_.item)
                  {
                     _loc13_ = int(_loc16_.@value);
                     _loc14_ = _loc16_.@languageKey;
                     _loc17_[_loc13_] = new SliderInterval(_loc13_,_loc14_);
                  }
                  this.presettingSlider = new SliderComponent(_loc8_,_loc10_,_loc17_);
                  this.presettingSlider.y = _loc6_;
                  _loc7_.addElement(this.presettingSlider,SimpleContainer.NO_ALIGN);
                  _loc6_ += 60;
                  this.presettingSlider.resetSetting();
                  this.presettingSlider.slider.addEventListener(SliderEvent.CHANGE,this.handlePresettingChanged);
                  this.advancedBtn = new ButtonElement(ButtonElement.TYPE_ADVANCED_SETTINGS,BPLocale.getText("btn_advanced"),this.uiResources.getEmbededMovieClip("button1"));
                  this.advancedBtn.addEventListener(MouseEvent.CLICK,this.handleAdvancedButtonClick);
                  this.advancedBtn.y = _loc6_;
                  _loc7_.addElement(this.advancedBtn,SimpleContainer.NO_ALIGN);
                  _loc6_ += 25;
                  this.advancedTxt = new TextFieldElement(340,40,new TextFormat(),"");
                  _loc21_ = new TextFormat(Styles.plainStdFmt.font,Styles.plainStdFontHeight,16777215);
                  _loc21_.align = TextFormatAlign.LEFT;
                  _loc22_ = this.advancedTxt.textField;
                  _loc22_.defaultTextFormat = _loc21_;
                  this.advancedTxt.updateText(BPLocale.getText("info_advanced_show"));
                  this.advancedTxt.y = _loc6_;
                  _loc7_.addElement(this.advancedTxt);
                  _loc6_ += 34;
                  break;
               case "combobox":
                  _loc17_ = [];
                  for each(_loc16_ in _loc20_.item)
                  {
                     _loc13_ = int(_loc16_.@value);
                     _loc14_ = _loc16_.@languageKey;
                     _loc17_.push(new ComboboxItem(_loc13_,BPLocale.getText(_loc14_)));
                  }
                  _loc18_ = new ComboBoxComponent(_loc8_,_loc10_,_loc17_,_loc11_,_loc15_);
                  switch(_loc12_)
                  {
                     case "right":
                        _loc7_.addElement(_loc18_,SimpleContainer.ALIGN_HORIZONTAL,40);
                        break;
                     case "left":
                     default:
                        _loc18_.y = _loc6_;
                        _loc7_.addElement(_loc18_,SimpleContainer.NO_ALIGN);
                        _loc6_ += 48;
                  }
                  _loc18_.resetSetting();
                  if(_loc15_)
                  {
                     _loc18_.addEventListener(Event.CHANGE,this.handlePresettingOverwritten);
                  }
                  break;
               case "checkbox":
                  _loc19_ = new CheckBoxComponent(_loc8_,_loc10_,this.guiManager,_loc11_,_loc15_);
                  _loc19_.y = _loc6_;
                  _loc7_.addElement(_loc19_,SimpleContainer.NO_ALIGN);
            }
            _loc6_ += 25;
            if(_loc15_)
            {
               _loc19_.addEventListener(Event.CHANGE,this.handlePresettingOverwritten);
            }
         }
         return _loc7_;
      }
      
      private function handlePresettingOverwritten(param1:Event) : void
      {
         if(!Settings.qualityCustomized)
         {
            setSettableSettingValue(SettingsField.TYPE_QUALITY_CUSTOMIZED,String(1));
         }
         this.presettingSlider.setCurrentValueText("quality_custom");
      }
      
      private function handlePresettingChanged(param1:SliderEvent) : void
      {
         var _loc6_:SimpleElement = null;
         var _loc7_:PresettingItem = null;
         var _loc2_:Slider = Slider(param1.target);
         if(Settings.qualityCustomized)
         {
            setSettableSettingValue(SettingsField.TYPE_QUALITY_CUSTOMIZED,String(0));
         }
         var _loc3_:SimpleContainer = this.settingTabPages[ButtonElement.TYPE_SETTINGS_TAB_DISPLAY];
         var _loc4_:Array = _loc3_.getAllElements();
         var _loc5_:Array = this.qualityPresetting.getQualitySet(_loc2_.value);
         for each(_loc7_ in _loc5_)
         {
            for each(_loc6_ in _loc4_)
            {
               if(_loc6_.getID() == SimpleElement.TYPE_CHECKBOX)
               {
                  if(CheckBoxComponent(_loc6_).typeID == _loc7_.typeID)
                  {
                     CheckBoxComponent(_loc6_).switchChecked(_loc7_.value);
                  }
               }
               if(_loc6_.getID() == SimpleElement.TYPE_COMBOBOX)
               {
                  if(ComboBoxComponent(_loc6_).type == _loc7_.typeID)
                  {
                     ComboBoxComponent(_loc6_).setSelected(_loc7_.value);
                  }
               }
            }
         }
      }
      
      private function createTabButton(param1:int, param2:SimpleContainer, param3:String, param4:Boolean = false) : void
      {
         var _loc5_:ButtonElement = new ButtonElement(param1,BPLocale.getText(param3),this.uiResources.getEmbededMovieClip("button1"));
         _loc5_.selected = param4;
         _loc5_.addEventListener(MouseEvent.CLICK,this.handleSettingsTabClick);
         param2.addElement(_loc5_,SimpleContainer.ALIGN_HORIZONTAL);
         this.settingTabButtons[param1] = _loc5_;
      }
      
      private function createTabLine(param1:SimpleContainer) : void
      {
         var _loc2_:SimpleElement = new SimpleElement(SimpleElement.TYPE_DEFAULT_ELEMENT);
         var _loc3_:Shape = new Shape();
         _loc3_.graphics.lineStyle(1,8289918);
         _loc3_.graphics.moveTo(0,0);
         _loc3_.graphics.lineTo(380,0);
         _loc2_.addChild(_loc3_);
         _loc2_.y = 20;
         param1.addElement(_loc2_,SimpleContainer.NO_ALIGN,0);
      }
      
      private function handleSettingsTabClick(param1:MouseEvent) : void
      {
         var _loc2_:int = (param1.currentTarget as ButtonElement).getType();
         (this.settingTabButtons[ButtonElement.TYPE_SETTINGS_TAB_GAMEPLAY] as ButtonElement).selected = _loc2_ == ButtonElement.TYPE_SETTINGS_TAB_GAMEPLAY;
         (this.settingTabButtons[ButtonElement.TYPE_SETTINGS_TAB_INTERFACE] as ButtonElement).selected = _loc2_ == ButtonElement.TYPE_SETTINGS_TAB_INTERFACE;
         (this.settingTabButtons[ButtonElement.TYPE_SETTINGS_TAB_DISPLAY] as ButtonElement).selected = _loc2_ == ButtonElement.TYPE_SETTINGS_TAB_DISPLAY;
         (this.settingTabButtons[ButtonElement.TYPE_SETTINGS_TAB_SOUND] as ButtonElement).selected = _loc2_ == ButtonElement.TYPE_SETTINGS_TAB_SOUND;
         (this.settingTabPages[ButtonElement.TYPE_SETTINGS_TAB_GAMEPLAY] as SimpleContainer).visible = _loc2_ == ButtonElement.TYPE_SETTINGS_TAB_GAMEPLAY;
         (this.settingTabPages[ButtonElement.TYPE_SETTINGS_TAB_INTERFACE] as SimpleContainer).visible = _loc2_ == ButtonElement.TYPE_SETTINGS_TAB_INTERFACE;
         (this.settingTabPages[ButtonElement.TYPE_SETTINGS_TAB_DISPLAY] as SimpleContainer).visible = _loc2_ == ButtonElement.TYPE_SETTINGS_TAB_DISPLAY;
         (this.settingTabPages[ButtonElement.TYPE_SETTINGS_TAB_SOUND] as SimpleContainer).visible = _loc2_ == ButtonElement.TYPE_SETTINGS_TAB_SOUND;
      }
      
      private function handleSettingsWindowRequested(param1:Event) : void
      {
         this.resetSettingFields();
      }
      
      private function handleAdvancedButtonClick(param1:MouseEvent) : void
      {
         this.showAdvancedSettings(!this.isAdvanced);
      }
      
      private function resetAdvancedSettings() : void
      {
         this.showAdvancedSettings(Settings.qualityCustomized);
      }
      
      private function showAdvancedSettings(param1:Boolean) : void
      {
         var _loc4_:SimpleElement = null;
         this.isAdvanced = param1;
         var _loc2_:SimpleContainer = this.settingTabPages[ButtonElement.TYPE_SETTINGS_TAB_DISPLAY];
         var _loc3_:Array = _loc2_.getAllElements();
         for each(_loc4_ in _loc3_)
         {
            if(_loc4_.getID() == SimpleElement.TYPE_CHECKBOX)
            {
               if(CheckBoxComponent(_loc4_).isAdvanced)
               {
                  CheckBoxComponent(_loc4_).show(param1);
               }
            }
            if(_loc4_.getID() == SimpleElement.TYPE_COMBOBOX)
            {
               if(ComboBoxComponent(_loc4_).isAdvanced)
               {
                  ComboBoxComponent(_loc4_).show(param1);
               }
            }
         }
         if(param1)
         {
            this.advancedBtn.labelText = BPLocale.getText("btn_simple");
            this.advancedTxt.updateText(BPLocale.getText("info_simple"));
         }
         else
         {
            this.advancedBtn.labelText = BPLocale.getText("btn_advanced");
            this.advancedTxt.updateText(BPLocale.getText("info_advanced"));
         }
      }
      
      private function handleResetButtonClick(param1:MouseEvent) : void
      {
         var _loc2_:SimpleWindow = this.guiManager.createWindow(SimpleWindow.WINDOW_CLASS_RESET_PROMPT);
         _loc2_.parent.removeChild(_loc2_);
         this.guiManager.getMain().screenManager.getWindowLayer2().addChild(_loc2_);
         var _loc3_:SimpleContainer = new SimpleContainer(this.guiManager,SimpleContainer.CLASS_PROMPT);
         var _loc4_:TextFieldElement = new TextFieldElement(280,80,new TextFormat(),"");
         var _loc5_:TextFormat = new TextFormat(Styles.plainBigFmt.font,Styles.plainBigFontHeight,16777215);
         _loc5_.align = TextFormatAlign.CENTER;
         var _loc6_:TextField = _loc4_.textField;
         _loc6_.defaultTextFormat = _loc5_;
         _loc6_.embedFonts = Styles.plainBigEmbed;
         _loc6_.antiAliasType = AntiAliasType.ADVANCED;
         _loc6_.autoSize = TextFieldAutoSize.CENTER;
         _loc6_.wordWrap = true;
         _loc6_.multiline = true;
         _loc6_.width = 280;
         _loc6_.text = BPLocale.getText("resetSettings");
         _loc3_.addElement(_loc4_);
         _loc3_.x = 16;
         _loc3_.y = 32;
         var _loc7_:ButtonElement = new ButtonElement(ButtonElement.TYPE_OK,BPLocale.getText("dest_ok"),this.uiResources.getEmbededMovieClip("button1"));
         _loc7_.addEventListener(MouseEvent.CLICK,this.handleConfirmResetSettingsButtonClick);
         _loc3_.addElement(_loc7_,SimpleContainer.ALIGN_VERTICAL_CENTER);
         _loc7_.x -= _loc7_.width;
         var _loc8_:ButtonElement = new ButtonElement(ButtonElement.TYPE_CANCEL,BPLocale.getText("btn_cancel"),this.uiResources.getEmbededMovieClip("button1"));
         _loc8_.addEventListener(MouseEvent.CLICK,this.handleResetSettingsCancel);
         _loc3_.addElement(_loc8_,SimpleContainer.ALIGN_HORIZONTAL);
         _loc2_.addContainer(_loc3_);
         _loc2_.modal = true;
      }
      
      private function handleConfirmResetSettingsButtonClick(param1:MouseEvent) : void
      {
         var _loc2_:int = int(PatternManager.resolutionPatterns.length);
         var _loc3_:Array = [];
         var _loc4_:String = ServerCommands.CLIENT_SETTING;
         var _loc5_:String = ServerCommands.REMOVE_KEY;
         var _loc6_:String = ServerCommands.SETTING_KEY_SEPERATOR;
         var _loc7_:int = 0;
         while(_loc7_ < _loc2_)
         {
            _loc3_.push(_loc4_);
            _loc3_.push(_loc5_);
            _loc3_.push(ServerCommands.SET_SLOTMENU_POSITION + _loc6_ + _loc7_);
            _loc3_.push(_loc4_);
            _loc3_.push(_loc5_);
            _loc3_.push(ServerCommands.SET_SLOTMENU_POSITION + _loc6_ + _loc7_);
            _loc3_.push(_loc4_);
            _loc3_.push(_loc5_);
            _loc3_.push(ServerCommands.SET_MAINMENU_POSITION + _loc6_ + _loc7_);
            _loc3_.push(_loc4_);
            _loc3_.push(_loc5_);
            _loc3_.push(ServerCommands.SET_MINIMAP_SCALE + _loc6_ + _loc7_);
            _loc3_.push(_loc4_);
            _loc3_.push(_loc5_);
            _loc3_.push(ServerCommands.SET_RESIZABLE_WINDOWS + _loc6_ + _loc7_);
            _loc3_.push(_loc4_);
            _loc3_.push(_loc5_);
            _loc3_.push(ServerCommands.SET_SLOTMENU_ORDER + _loc6_ + _loc7_);
            _loc7_++;
         }
         _loc3_.push(_loc4_);
         _loc3_.push(_loc5_);
         _loc3_.push(ServerCommands.SET_QUICKBAR_SLOT);
         _loc3_.push(_loc4_);
         _loc3_.push(_loc5_);
         _loc3_.push(ServerCommands.CLIENT_RESOLUTION);
         _loc3_.push(_loc4_);
         _loc3_.push(_loc5_);
         _loc3_.push(ServerCommands.SET_QUICKSLOT_STOP_ATTACK);
         _loc3_.push(_loc4_);
         _loc3_.push(_loc5_);
         _loc3_.push(ServerCommands.SET_SHOW_DRONES);
         _loc3_.push(_loc4_);
         _loc3_.push(_loc5_);
         _loc3_.push(ServerCommands.SET_AUTO_REFINEMENT);
         _loc3_.push(_loc4_);
         _loc3_.push(_loc5_);
         _loc3_.push(ServerCommands.SET_BAR_STATUS);
         _loc3_.push(_loc4_);
         _loc3_.push(_loc5_);
         _loc3_.push(ServerCommands.WINDOW_SETTINGS + _loc6_ + Settings.resolutionID);
         _loc3_.push("1");
         this.guiManager.getMain().getConnectionManager().sendCommand(_loc3_.join(ConnectionManager.ATTRIBUTE_SEPERATOR));
         if(ExternalInterface.available)
         {
            ExternalInterface.call("clientResolutionChanged","1");
         }
         else
         {
            System.exit(0);
         }
      }
      
      private function handleResetSettingsCancel(param1:MouseEvent) : void
      {
         this.closeResetSettingsWindow();
      }
      
      private function closeResetSettingsWindow() : void
      {
         var _loc5_:SimpleElement = null;
         var _loc6_:ButtonElement = null;
         var _loc1_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_RESET_PROMPT);
         var _loc2_:SimpleContainer = _loc1_.getContainer(SimpleContainer.CLASS_PROMPT);
         var _loc3_:Array = _loc2_.getAllElements();
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_.length)
         {
            _loc5_ = _loc3_[_loc4_];
            if(_loc5_.getID() == SimpleElement.TYPE_SIMPLE_BUTTON)
            {
               _loc6_ = ButtonElement(_loc5_);
               if(_loc6_.getID() == ButtonElement.TYPE_OK)
               {
                  _loc6_.removeEventListener(MouseEvent.CLICK,this.handleConfirmResetSettingsButtonClick);
               }
               if(_loc6_.getID() == ButtonElement.TYPE_CANCEL)
               {
                  _loc6_.removeEventListener(MouseEvent.CLICK,this.handleResetSettingsCancel);
               }
            }
            _loc4_++;
         }
         this.guiManager.closeWindow(_loc1_);
      }
      
      private function handleSaveButtonClick(param1:MouseEvent) : void
      {
         var _loc3_:SimpleContainer = null;
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc6_:SimpleElement = null;
         var _loc2_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_SETTINGS);
         for each(_loc3_ in this.settingTabPages)
         {
            _loc4_ = _loc3_.getAllElements();
            _loc5_ = 0;
            while(_loc5_ < _loc4_.length)
            {
               _loc6_ = _loc4_[_loc5_];
               if(_loc6_.getID() == SimpleElement.TYPE_SLIDER)
               {
                  SliderComponent(_loc6_).setSetting();
               }
               if(_loc6_.getID() == SimpleElement.TYPE_CHECKBOX)
               {
                  CheckBoxComponent(_loc6_).setSetting();
               }
               if(_loc6_.getID() == SimpleElement.TYPE_COMBOBOX)
               {
                  ComboBoxComponent(_loc6_).setSetting();
               }
               _loc5_++;
            }
         }
         this.saveFlashSettings();
         _loc2_.minimize();
      }
      
      private function handleCancelButtonClick(param1:MouseEvent) : void
      {
         this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_SETTINGS).minimize();
      }
      
      public function resetSettingFields() : void
      {
         var _loc1_:SimpleContainer = null;
         var _loc2_:Array = null;
         var _loc3_:int = 0;
         var _loc4_:SimpleElement = null;
         for each(_loc1_ in this.settingTabPages)
         {
            _loc2_ = _loc1_.getAllElements();
            _loc3_ = 0;
            while(_loc3_ < _loc2_.length)
            {
               _loc4_ = _loc2_[_loc3_];
               if(_loc4_.getID() == SimpleElement.TYPE_SLIDER)
               {
                  SliderComponent(_loc4_).resetSetting();
               }
               if(_loc4_.getID() == SimpleElement.TYPE_CHECKBOX)
               {
                  CheckBoxComponent(_loc4_).resetSetting();
               }
               if(_loc4_.getID() == SimpleElement.TYPE_COMBOBOX)
               {
                  ComboBoxComponent(_loc4_).resetSetting();
               }
               _loc3_++;
            }
         }
         this.resetAdvancedSettings();
      }
      
      private function saveFlashSettings() : void
      {
         var _loc1_:ResolutionPattern = null;
         var _loc2_:String = null;
         var _loc3_:SimpleWindow = null;
         this.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.SET_ATTRIBUTE,[ServerCommands.SET_FLASH_SETTINGS,this.getAsDigit(Settings.autoBoost),"1","1","1",this.getAsDigit(Settings.displayPlayerNames),"1","1",this.getAsDigit(Settings.displayResources),this.getAsDigit(Settings.displayBonusBoxes),"1","1",this.getAsDigit(Settings.playSFX),this.getAsDigit(Settings.playMusic),"1",this.getAsDigit(Settings.displayHitpointBubbles),Settings.selectedLaser,Settings.selectedRocket,"1",this.getAsDigit(Settings.displayChat),"0","0",this.getAsDigit(Settings.displayFreeCargoBoxes),this.getAsDigit(Settings.displayNotFreeCargoBoxes),this.getAsDigit(Settings.autochangeAmmo),"1"]);
         this.saveBooleanSetting(ServerCommands.SET_AUTO_REFINEMENT,Settings.autoRefinement);
         this.saveBooleanSetting(ServerCommands.SET_QUICKSLOT_STOP_ATTACK,Settings.quickSlotStopAttack);
         this.saveBooleanSetting(ServerCommands.SET_DOUBLECLICK_ATTACK,Settings.doubleclickAttackEnabled);
         this.saveBooleanSetting(ServerCommands.SET_AUTO_START,Settings.autoStartEnabled);
         this.saveBooleanSetting(ServerCommands.SET_DISPLAY_NOTIFICATIONS,Settings.displayNotifications);
         this.saveBooleanSetting(ServerCommands.SET_SHOW_DRONES,Settings.displayDrones);
         this.saveBooleanSetting(ServerCommands.SET_DISPLAY_WINDOW_BACKGROUND,Settings.showWindowsBackground);
         this.saveBooleanSetting(ServerCommands.SET_ALWAYS_DRAGGABLE_WINDOWS,Settings.dragWindowsAlways);
         this.saveBooleanSetting(ServerCommands.SET_PRELOAD_USER_SHIPS,Settings.preloadUserShips);
         this.saveIntSetting(ServerCommands.SET_QUALITY_PRESETTING,Settings.qualityPresetting);
         this.saveBooleanSetting(ServerCommands.SET_QUALITY_CUSTOMIZED,Settings.qualityCustomized);
         this.saveIntSetting(ServerCommands.SET_QUALITY_BACKGROUND,Settings.qualityBackground);
         this.saveIntSetting(ServerCommands.SET_QUALITY_POIZONE,Settings.qualityPoizone);
         this.saveIntSetting(ServerCommands.SET_QUALITY_SHIP,Settings.qualityShip);
         this.saveIntSetting(ServerCommands.SET_QUALITY_ENGINE,Settings.qualityEngine);
         this.saveIntSetting(ServerCommands.SET_QUALITY_COLLECTABLE,Settings.qualityCollectable);
         this.saveIntSetting(ServerCommands.SET_QUALITY_ATTACK,Settings.qualityAttack);
         this.saveIntSetting(ServerCommands.SET_QUALITY_EFFECT,Settings.qualityEffect);
         this.saveIntSetting(ServerCommands.SET_QUALITY_EXPLOSION,Settings.qualityExplosion);
         if(Settings.lastResolutionID != Settings.resolutionID)
         {
            _loc1_ = PatternManager.resolutionPatterns[Settings.resolutionID];
            _loc2_ = _loc1_.getPatternID() + ServerCommands.SETTING_PROPERTY_SEPERATOR + _loc1_.width + ServerCommands.SETTING_PROPERTY_SEPERATOR + _loc1_.height;
            this.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.CLIENT_SETTING,[ServerCommands.CLIENT_RESOLUTION,_loc2_,"1"]);
            Settings.lastResolutionID = Settings.resolutionID;
            if(ExternalInterface.available)
            {
               ExternalInterface.call("clientResolutionChanged","0");
            }
            _loc3_ = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_WARNING_PROMPT);
            if(_loc3_ != null)
            {
               this.guiManager.closeWindow(_loc3_);
            }
            this.guiManager.createPromptWindow();
         }
         this.guiManager.updateInfoFieldView();
         this.guiManager.getMenuManager().updateAmmunitionDisplay();
         this.guiManager.getMain().screenManager.map.getMinimapManager().createMinimap();
      }
      
      private function getAsDigit(param1:Boolean) : String
      {
         return param1 ? "1" : "0";
      }
      
      private function saveBooleanSetting(param1:String, param2:Boolean) : void
      {
         this.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.CLIENT_SETTING,[param1,this.getAsDigit(param2)]);
      }
      
      private function saveIntSetting(param1:String, param2:int) : void
      {
         this.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.CLIENT_SETTING,[param1,String(param2)]);
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.BlendMode;
   import flash.display.Sprite;
   import flash.geom.ColorTransform;
   import flash.geom.Rectangle;
   import mx.logging.ILogger;
   import mx.logging.Log;
   
   public class ShipIcon extends Sprite
   {
      
      public static const STATE_STD:int = 1;
      
      public static const STATE_FOGGY:int = 2;
      
      public static const STATE_ACTIVE:int = 3;
      
      private static const logger:ILogger = Log.getLogger("ShipIcon");
      
      private var _baseGraphic:Bitmap;
      
      private var _baseGraphicFull:Bitmap;
      
      private var _shutterGraphic:Bitmap;
      
      private var _cloaked:Boolean;
      
      private var _state:int = 1;
      
      private var _foggy:Boolean = true;
      
      private var _inFight:Boolean;
      
      private var _colors:Array = [];
      
      private var _isOffline:Boolean;
      
      public function ShipIcon()
      {
         super();
         this._colors[STATE_ACTIVE] = 14102062;
         this._colors[STATE_FOGGY] = 10066329;
         this._colors[STATE_STD] = 16777215;
         this.createShutterGraphic();
      }
      
      private function createShutterGraphic() : void
      {
         this._shutterGraphic = new Bitmap(new BitmapData(20,20,true,0));
         this._shutterGraphic.bitmapData.fillRect(new Rectangle(0,0,20,1),4294967295);
         this._shutterGraphic.bitmapData.fillRect(new Rectangle(0,2,20,1),4294967295);
         this._shutterGraphic.bitmapData.fillRect(new Rectangle(0,4,20,1),4294967295);
         this._shutterGraphic.bitmapData.fillRect(new Rectangle(0,6,20,1),4294967295);
         this._shutterGraphic.bitmapData.fillRect(new Rectangle(0,8,20,1),4294967295);
         this._shutterGraphic.bitmapData.fillRect(new Rectangle(0,10,20,1),4294967295);
         this._shutterGraphic.bitmapData.fillRect(new Rectangle(0,12,20,1),4294967295);
         this._shutterGraphic.bitmapData.fillRect(new Rectangle(0,14,20,1),4294967295);
         this._shutterGraphic.bitmapData.fillRect(new Rectangle(0,16,20,1),4294967295);
         this._shutterGraphic.bitmapData.fillRect(new Rectangle(0,18,20,1),4294967295);
      }
      
      public function get baseGraphic() : Bitmap
      {
         return this._baseGraphicFull;
      }
      
      public function set baseGraphic(param1:Bitmap) : void
      {
         if(this._baseGraphic != null && contains(this._baseGraphic))
         {
            removeChild(this._baseGraphic);
         }
         this._baseGraphicFull = param1;
         this._baseGraphic = new Bitmap(this._baseGraphicFull.bitmapData.clone());
         addChild(this._baseGraphic);
         this.updateColor();
      }
      
      public function set cloaked(param1:Boolean) : void
      {
         if(this._cloaked != param1)
         {
            this._cloaked = param1;
            if(this._isOffline)
            {
               return;
            }
            removeChild(this._baseGraphic);
            this._baseGraphic = new Bitmap(this._baseGraphicFull.bitmapData.clone());
            addChild(this._baseGraphic);
            if(this._cloaked)
            {
               this._baseGraphic.bitmapData.draw(this._shutterGraphic,null,null,BlendMode.ERASE);
            }
            this.updateColor();
         }
      }
      
      public function get cloaked() : Boolean
      {
         return this._cloaked;
      }
      
      public function get state() : int
      {
         return this._state;
      }
      
      public function set state(param1:int) : void
      {
         if(this._state != param1)
         {
            this._state = param1;
         }
      }
      
      public function get foggy() : Boolean
      {
         return this._foggy;
      }
      
      public function set foggy(param1:Boolean) : void
      {
         if(this._foggy != param1)
         {
            this._foggy = param1;
            if(this._isOffline)
            {
               return;
            }
            this.updateColor();
         }
      }
      
      private function updateColor() : void
      {
         if(this._isOffline)
         {
            return;
         }
         var _loc1_:ColorTransform = new ColorTransform();
         if(this._inFight)
         {
            _loc1_.color = this._colors[STATE_ACTIVE];
         }
         else if(this._foggy)
         {
            _loc1_.color = this._colors[STATE_FOGGY];
         }
         else
         {
            _loc1_.color = this._colors[STATE_STD];
         }
         this._baseGraphic.transform.colorTransform = _loc1_;
      }
      
      public function get inFight() : Boolean
      {
         return this._inFight;
      }
      
      public function set inFight(param1:Boolean) : void
      {
         if(this._inFight != param1)
         {
            this._inFight = param1;
            this.updateColor();
         }
      }
      
      public function get isOffline() : Boolean
      {
         return this._isOffline;
      }
      
      public function set isOffline(param1:Boolean) : void
      {
         if(this._isOffline != param1)
         {
            this._isOffline = param1;
         }
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.geom.Point;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFieldType;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.elements.SpacemapElement;
   import net.bigpoint.darkorbit.gui.elements.StarSystemView;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.ConnectionManager;
   
   public class SpacemapWindowDecorator
   {
      
      private static const BORDER:int = 10;
      
      private var guiManager:GuiManager;
      
      public function SpacemapWindowDecorator(param1:GuiManager)
      {
         super();
         this.guiManager = param1;
      }
      
      public function decorate(param1:SimpleWindow) : void
      {
         var _loc2_:Array = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];
         var _loc3_:Array = [16,17,18,19,20,21,22,23,24,25,26,27,28,29,91,92,93];
         var _loc4_:Array = [];
         _loc4_[1] = new Point(0,185);
         _loc4_[2] = new Point(107,185);
         _loc4_[3] = new Point(204,136);
         _loc4_[4] = new Point(204,235);
         _loc4_[5] = new Point(506,0);
         _loc4_[6] = new Point(408,38);
         _loc4_[7] = new Point(303,87);
         _loc4_[8] = new Point(508,97);
         _loc4_[9] = new Point(506,375);
         _loc4_[10] = new Point(407,326);
         _loc4_[11] = new Point(508,192);
         _loc4_[12] = new Point(301,283);
         _loc4_[13] = new Point(302,182);
         _loc4_[14] = new Point(398,151);
         _loc4_[15] = new Point(401,219);
         _loc4_[16] = new Point(272,138);
         _loc4_[17] = new Point(164,171);
         _loc4_[18] = new Point(84,107);
         _loc4_[19] = new Point(84,238);
         _loc4_[20] = new Point(0,171);
         _loc4_[21] = new Point(506,131);
         _loc4_[22] = new Point(506,43);
         _loc4_[23] = new Point(619,93);
         _loc4_[24] = new Point(619,0);
         _loc4_[25] = new Point(487,269);
         _loc4_[26] = new Point(519,363);
         _loc4_[27] = new Point(594,269);
         _loc4_[28] = new Point(628,363);
         _loc4_[29] = new Point(230,297);
         _loc4_[91] = new Point(202,60);
         _loc4_[92] = new Point(296,18);
         _loc4_[93] = new Point(388,60);
         var _loc5_:int = 15;
         var _loc6_:int = 34;
         var _loc7_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("spacemap"));
         var _loc8_:SimpleContainer = new SimpleContainer(this.guiManager,SimpleContainer.CLASS_SPACEMAP);
         var _loc9_:SpacemapElement = new SpacemapElement(this.guiManager);
         _loc9_.init(_loc4_);
         _loc9_.x = _loc5_;
         _loc9_.y = _loc6_;
         _loc8_.addElement(_loc9_);
         param1.addContainer(_loc8_);
         var _loc10_:SimpleContainer = new SimpleContainer(this.guiManager,SimpleContainer.CLASS_SPACEMAP_ADVANCED);
         var _loc11_:ConnectionManager = this.guiManager.getMain().getConnectionManager();
         var _loc12_:SimpleElement = new SimpleElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_SWITCHER);
         var _loc13_:SimpleElement = new SimpleElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_1);
         var _loc14_:SimpleElement = new SimpleElement(SimpleElement.ADVANCED_SPACEMAP_SYSTEM_2);
         var _loc15_:SimpleElement = new SimpleElement(SimpleElement.ADVANCED_SPACEMAP_BOTTOM_BAR);
         var _loc16_:SimpleElement = new SimpleElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_INFO_DISPLAY);
         var _loc17_:SimpleElement = new SimpleElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_PRICE_DISPLAY);
         var _loc18_:SimpleElement = new SimpleElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_BUTTON);
         var _loc19_:SimpleElement = new SimpleElement(SimpleElement.ADVANCED_SPACEMAP_JUMP_VOUCHER_LABEL);
         var _loc20_:StarSystemView = new StarSystemView();
         _loc20_.init(_loc2_,_loc4_,"advanced_page_0");
         _loc20_.setConnectionManager(_loc11_);
         _loc20_.setPosition(60,_loc6_);
         var _loc21_:StarSystemView = new StarSystemView();
         _loc21_.init(_loc3_,_loc4_,"advanced_page_1");
         _loc21_.setConnectionManager(_loc11_);
         _loc21_.setPosition(_loc5_,_loc6_);
         _loc13_.addChild(_loc20_);
         _loc14_.addChild(_loc21_);
         var _loc22_:Bitmap = _loc7_.getEmbededBitmap("bottom_bar");
         _loc22_.x = 5;
         _loc22_.y = _loc6_;
         var _loc23_:Bitmap = _loc7_.getEmbededBitmap("advanced_jump_icon");
         _loc23_.x = BORDER;
         _loc23_.y = _loc6_;
         var _loc24_:TextField = new TextField();
         _loc24_.x = _loc23_.x + _loc23_.width + BORDER;
         _loc24_.y = _loc6_ + 2;
         _loc24_.text = BPLocale.getText("title_advanced_jump_cpu");
         this.formatLabelTextfield(_loc24_);
         _loc15_.addChild(_loc22_);
         _loc15_.addChild(_loc23_);
         _loc15_.addChild(_loc24_);
         var _loc25_:TextField = new TextField();
         this.formatLabelTextfield(_loc25_);
         _loc25_.text = BPLocale.getText("label_current_map");
         var _loc26_:TextField = new TextField();
         this.formatLabelTextfield(_loc26_);
         _loc26_.text = BPLocale.getText("label_selected_map");
         _loc26_.y = 40;
         var _loc27_:Bitmap = _loc7_.getEmbededBitmap("from_to_display");
         _loc27_.x = BORDER + Math.max(_loc26_.width,_loc25_.width);
         _loc27_.y = 5;
         var _loc28_:TextField = new TextField();
         this.formatInfoTextfield(_loc28_);
         _loc28_.x = _loc27_.x;
         _loc28_.y = _loc27_.y - 5;
         _loc28_.width = 50;
         var _loc29_:TextField = new TextField();
         this.formatInfoTextfield(_loc29_);
         _loc29_.x = _loc27_.x;
         _loc29_.y = _loc27_.y + 35;
         _loc29_.width = 50;
         _loc16_.x = 30;
         _loc16_.y = 505;
         _loc16_.addChild(_loc27_);
         _loc16_.addChild(_loc28_);
         _loc16_.addChild(_loc29_);
         _loc16_.addChild(_loc25_);
         _loc16_.addChild(_loc26_);
         var _loc30_:Bitmap = _loc7_.getEmbededBitmap("price_display");
         var _loc31_:TextField = new TextField();
         _loc31_.width = _loc30_.width;
         this.formatInfoTextfield(_loc31_);
         _loc31_.y = 5;
         _loc17_.x = 310;
         _loc17_.y = 500;
         _loc17_.addChild(_loc30_);
         _loc17_.addChild(_loc31_);
         TooltipControl.getInstance().addToolTip(_loc17_,BPLocale.getText("label_cpu_jump_price"));
         var _loc32_:TextField = new TextField();
         _loc32_.name = "text";
         _loc32_.y = 0;
         _loc32_.defaultTextFormat = Styles.centeredHeavyFmt;
         _loc32_.embedFonts = Styles.centeredHeavyEmbed;
         _loc32_.width = _loc30_.width + 100;
         _loc32_.height = Styles.centeredHeavyFontHeight + 5;
         _loc19_.addChild(_loc32_);
         _loc19_.x = 260;
         _loc19_.y = 545;
         var _loc33_:MovieClip = _loc7_.getEmbededMovieClip("jumpButton");
         var _loc34_:TextField = new TextField();
         _loc34_.width = _loc33_.width;
         this.formatInfoTextfield(_loc34_);
         _loc34_.text = BPLocale.getText("label_jump_now");
         _loc34_.y = 10;
         _loc34_.mouseEnabled = false;
         _loc34_.selectable = false;
         _loc18_.x = 500;
         _loc18_.y = 515;
         _loc18_.buttonMode = true;
         _loc18_.useHandCursor = true;
         _loc18_.addChild(_loc33_);
         _loc18_.addChild(_loc34_);
         var _loc35_:Sprite = new Sprite();
         var _loc36_:TextField = new TextField();
         this.formatLabelTextfield(_loc36_);
         _loc36_.width = 350;
         _loc36_.mouseEnabled = false;
         _loc12_.x = 30;
         _loc12_.y = 40;
         _loc35_.graphics.beginFill(0,0);
         _loc35_.graphics.drawRect(0,0,_loc36_.width,_loc36_.height);
         _loc35_.graphics.endFill();
         _loc35_.useHandCursor = true;
         _loc35_.buttonMode = true;
         _loc35_.addChild(_loc36_);
         _loc12_.addChild(_loc35_);
         _loc10_.addElement(_loc13_,SimpleContainer.NO_ALIGN);
         _loc10_.addElement(_loc14_,SimpleContainer.NO_ALIGN);
         _loc10_.addElement(_loc15_,SimpleContainer.ALIGN_VERTICAL);
         _loc10_.addElement(_loc17_,SimpleContainer.NO_ALIGN);
         _loc10_.addElement(_loc16_,SimpleContainer.NO_ALIGN);
         _loc10_.addElement(_loc18_,SimpleContainer.NO_ALIGN);
         _loc10_.addElement(_loc12_,SimpleContainer.NO_ALIGN);
         _loc10_.addElement(_loc19_,SimpleContainer.NO_ALIGN);
         param1.addContainer(_loc10_);
         this.guiManager.updateJumpVoucherLabel();
      }
      
      private function formatLabelTextfield(param1:TextField) : void
      {
         param1.defaultTextFormat = Styles.h3Fmt;
         param1.textColor = 16777215;
         param1.embedFonts = true;
         param1.autoSize = TextFieldAutoSize.LEFT;
         param1.antiAliasType = AntiAliasType.ADVANCED;
         param1.selectable = false;
      }
      
      private function formatInfoTextfield(param1:TextField) : void
      {
         param1.defaultTextFormat = Styles.h2Fmt;
         param1.type = TextFieldType.DYNAMIC;
         param1.textColor = 16777215;
         param1.embedFonts = true;
         param1.autoSize = TextFieldAutoSize.CENTER;
         param1.antiAliasType = AntiAliasType.ADVANCED;
         param1.selectable = false;
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.bigpoint.utils.BPLocale;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Cubic;
   import flash.display.GradientType;
   import flash.display.SpreadMethod;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.external.ExternalInterface;
   import flash.geom.Matrix;
   import flash.geom.Point;
   import flash.system.System;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.ButtonElement;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.elements.TextFieldElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class StopoverView extends Sprite
   {
      
      private static const DESTROYER_TYPE_PLAYER:String = "PLAYER";
      
      private static const DESTROYER_TYPE_NPC:String = "NPC";
      
      private static const DESTROYER_TYPE_RADIATION:String = "RADIATION";
      
      private static const DESTROYER_TYPE_UNKNOWN:String = "UNKNOWN";
      
      private var guiManager:GuiManager;
      
      private var leaveButton:ButtonElement;
      
      private var showDetailsButton:ButtonElement;
      
      private var buttonPadding:int;
      
      private var combinedWidth:Number = 8;
      
      private var repairView:SimpleWindow;
      
      private var msgLabel:TextField;
      
      private var _repairRequested:Boolean;
      
      private var executePrimeAction:Function;
      
      public function StopoverView(param1:GuiManager, param2:int, param3:int)
      {
         super();
         this.guiManager = param1;
         var _loc4_:Sprite = new Sprite();
         var _loc5_:String = GradientType.RADIAL;
         var _loc6_:Array = [0,0];
         var _loc7_:Array = [0,0.5];
         var _loc8_:Array = [0,255];
         var _loc9_:Matrix = new Matrix();
         _loc9_.createGradientBox(param3,param3,param2 * 0.5 - param3 * 0.5,param2 * 0.5 - param3 * 0.5);
         var _loc10_:String = SpreadMethod.PAD;
         _loc4_.graphics.beginGradientFill(_loc5_,_loc6_,_loc7_,_loc8_,_loc9_,_loc10_);
         _loc4_.graphics.drawRect(0,0,param2,param3);
         _loc4_.graphics.endFill();
         addChild(_loc4_);
         this.msgLabel = new TextField();
         var _loc11_:TextFormat = new TextFormat(Styles.systemSplashFmt.font,Styles.systemSplashFmt.size,16777215);
         _loc11_.align = TextFormatAlign.CENTER;
         this.msgLabel.defaultTextFormat = _loc11_;
         this.msgLabel.embedFonts = Styles.systemSplashEmbed;
         this.msgLabel.x = param2 * 0.2;
         this.msgLabel.y = param3 * 0.33;
         this.msgLabel.width = param2 * 0.6;
         this.msgLabel.wordWrap = true;
         this.msgLabel.multiline = true;
         this.msgLabel.selectable = false;
         this.msgLabel.autoSize = TextFieldAutoSize.CENTER;
         addChild(this.msgLabel);
         this.buttonPadding = 8;
         this.showDetailsButton = new ButtonElement(ButtonElement.TYPE_OK,BPLocale.getText("btn_repair"),ResourceManager.getMovieClip("ui","button1"),Styles.h1Fmt);
         this.showDetailsButton.addEventListener(MouseEvent.CLICK,this.handleShowDetailsButtonClick);
         this.showDetailsButton.y = param3 * 0.66;
         this.leaveButton = new ButtonElement(ButtonElement.TYPE_OK,BPLocale.getText("btn_leaveGame"),ResourceManager.getMovieClip("ui","button1"),Styles.h1Fmt);
         this.leaveButton.addEventListener(MouseEvent.CLICK,this.handleLeaveButtonClick);
         this.leaveButton.y = param3 * 0.66;
         this.combinedWidth = this.showDetailsButton.width + this.leaveButton.width + this.buttonPadding;
         this.showDetailsButton.x = (param2 - this.combinedWidth) * 0.5;
         this.leaveButton.x = this.showDetailsButton.x + this.showDetailsButton.width + this.buttonPadding;
         this.msgLabel.alpha = 0;
         TweenLite.to(this.msgLabel,0.5,{"alpha":1});
         _loc4_.alpha = 0;
         this.fadeInUi();
         TweenLite.to(_loc4_,2.5,{
            "alpha":1,
            "ease":Cubic.easeIn
         });
      }
      
      public function updateKillMessage(param1:String, param2:int, param3:String) : void
      {
         var _loc4_:String = null;
         switch(param1)
         {
            case DESTROYER_TYPE_NPC:
               _loc4_ = BPLocale.getText("msg_destruction_by_npc").replace(/%nick%/,param3);
               break;
            case DESTROYER_TYPE_PLAYER:
               _loc4_ = BPLocale.getText("msg_destruction_by_player").replace(/%nick%/,param3);
               break;
            case DESTROYER_TYPE_RADIATION:
               _loc4_ = BPLocale.getText("msg_destruction_by_rad_zone");
               break;
            default:
               _loc4_ = BPLocale.getText("msg_destruction_by_unknown_reason");
         }
         this.msgLabel.text = _loc4_;
      }
      
      private function handleShowDetailsButtonClick(param1:MouseEvent = null) : void
      {
         this.updateRepairView();
      }
      
      private function updateRepairView() : void
      {
         var _loc1_:SimpleContainer = null;
         var _loc2_:TextFieldElement = null;
         var _loc3_:ButtonElement = null;
         var _loc4_:ButtonElement = null;
         if(this.repairView == null)
         {
            this._repairRequested = false;
            this.repairView = this.guiManager.createWindow(SimpleWindow.WINDOW_CLASS_REPAIR_SHIP);
            this.repairView.alpha = 0;
            _loc1_ = new SimpleContainer(this.guiManager,SimpleContainer.CLASS_REPAIR_SHIP);
            _loc2_ = new TextFieldElement(this.repairView.getWindowDimension().x - 32,int(Styles.simpleFmt.size),new TextFormat(Styles.simpleFmt.font,Styles.simpleFmt.size,16777215),Hero.repairInfo.getMessage());
            _loc2_.textField.autoSize = TextFieldAutoSize.CENTER;
            _loc2_.textField.wordWrap = true;
            _loc2_.textField.multiline = true;
            _loc1_.addElement(_loc2_);
            this.repairView.addContainer(_loc1_);
            _loc3_ = new ButtonElement(ButtonElement.TYPE_OK,Hero.repairInfo.getRepairButtonLabel(),ResourceManager.getMovieClip("ui","button1"));
            _loc3_.addEventListener(MouseEvent.CLICK,this.handlePrimeButtonClick);
            _loc4_ = new ButtonElement(ButtonElement.TYPE_CANCEL,BPLocale.getText("btn_hangar"),ResourceManager.getMovieClip("ui","button1"));
            _loc4_.addEventListener(MouseEvent.CLICK,this.handleLeaveButtonClick);
            _loc1_.addElement(_loc3_,SimpleContainer.ALIGN_VERTICAL_CENTER);
            _loc1_.addElement(_loc4_,SimpleContainer.ALIGN_HORIZONTAL);
            _loc3_.y += 8;
            _loc4_.y = _loc3_.y;
            this.combinedWidth = _loc3_.width + _loc4_.width + this.buttonPadding;
            _loc3_.x = (this.repairView.getWindowDimension().x - 32 - this.combinedWidth) * 0.5;
            _loc4_.x = _loc3_.x + _loc3_.width + this.buttonPadding;
            _loc1_.addPredefinedPosition(new Point(15,30));
            _loc1_.setPredefinedPosition();
            this.repairView.addContainer(_loc1_);
            this.repairView.setDimension(this.repairView.getWindowDimension().x,_loc2_.textField.height + 56);
            this.repairView.parent.removeChild(this.repairView);
            this.guiManager.getMain().screenManager.getWindowLayer2().addChild(this.repairView);
            TweenLite.to(this.repairView,0.5,{"alpha":1});
            TweenLite.to(this.msgLabel,0.5,{"alpha":0});
            this.fadeOutUi();
            if(Hero.repairInfo.isRepairPossible())
            {
               this.executePrimeAction = this.requestRepair;
            }
            else
            {
               this.executePrimeAction = this.openPaymentSection;
            }
         }
      }
      
      private function handlePrimeButtonClick(param1:MouseEvent = null) : void
      {
         this.executePrimeAction();
      }
      
      private function openPaymentSection() : void
      {
         var paymentLink:String = null;
         if(ExternalInterface.available)
         {
            paymentLink = Main.gameXML.tradeWindow.weblinks2.link.(@type == "1").@url;
            ExternalInterface.call("referToURL",Settings.dynamicHost + paymentLink);
            TweenMax.delayedCall(1,ExternalInterface.call,["bpCloseWindow"]);
         }
      }
      
      private function requestRepair() : void
      {
         if(!this._repairRequested)
         {
            this.guiManager.getMain().screenManager.zoomIn();
            this.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.BUY,["s"]);
            this._repairRequested = true;
         }
      }
      
      private function handleFadeOutUiComplete(param1:MouseEvent = null) : void
      {
         if(this.showDetailsButton != null)
         {
            if(contains(this.showDetailsButton))
            {
               removeChild(this.showDetailsButton);
            }
            this.showDetailsButton.removeEventListener(MouseEvent.CLICK,this.handleShowDetailsButtonClick);
            this.showDetailsButton = null;
         }
         if(this.leaveButton != null)
         {
            if(contains(this.leaveButton))
            {
               removeChild(this.leaveButton);
            }
            this.leaveButton.removeEventListener(MouseEvent.CLICK,this.handleLeaveButtonClick);
            this.leaveButton = null;
         }
      }
      
      private function handleLeaveButtonClick(param1:MouseEvent = null) : void
      {
         if(ExternalInterface.available)
         {
            ExternalInterface.call("bpCloseWindow");
         }
         else
         {
            System.exit(0);
         }
      }
      
      private function fadeInUi(param1:MouseEvent = null) : void
      {
         if(!contains(this.showDetailsButton))
         {
            addChild(this.showDetailsButton);
         }
         if(!contains(this.leaveButton))
         {
            addChild(this.leaveButton);
         }
         this.showDetailsButton.alpha = 0;
         TweenLite.to(this.showDetailsButton,0.5,{"alpha":1});
         this.leaveButton.alpha = 0;
         TweenLite.to(this.leaveButton,0.5,{"alpha":1});
      }
      
      private function fadeOutUi(param1:MouseEvent = null) : void
      {
         TweenLite.to(this.showDetailsButton,0.5,{
            "alpha":0,
            "onComplete":this.handleFadeOutUiComplete
         });
         TweenLite.to(this.leaveButton,0.5,{"alpha":0});
      }
      
      public function dispose() : void
      {
         var _loc3_:ButtonElement = null;
         this.handleFadeOutUiComplete();
         if(this.repairView == null)
         {
            this.repairView = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REPAIR_SHIP);
         }
         var _loc1_:SimpleContainer = this.repairView.getContainer(SimpleContainer.CLASS_REPAIR_SHIP);
         var _loc2_:Array = _loc1_.getElements(SimpleElement.TYPE_SIMPLE_BUTTON);
         for each(_loc3_ in _loc2_)
         {
            if(_loc3_.type == ButtonElement.TYPE_CANCEL)
            {
               _loc3_.removeEventListener(MouseEvent.CLICK,this.handlePrimeButtonClick);
            }
            else if(_loc3_.type == ButtonElement.TYPE_OK)
            {
               _loc3_.removeEventListener(MouseEvent.CLICK,this.handleLeaveButtonClick);
            }
         }
         this.guiManager.closeWindow(this.repairView);
         while(numChildren)
         {
            removeChildAt(0);
         }
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import com.greensock.TweenMax;
   import mx.logging.ILogger;
   import mx.logging.Log;
   
   public class TechCooldown
   {
      
      private static const logger:ILogger = Log.getLogger("TechCooldown");
      
      public var frameIndex:int = 1;
      
      public var seconds:int;
      
      public var startingTime:int;
      
      public var techID:int;
      
      public var isRunning:Boolean;
      
      public var onCompleteCallback:Function;
      
      public function TechCooldown(param1:int, param2:int)
      {
         super();
         this.techID = param1;
         this.seconds = param2;
         this.startingTime = param2;
      }
      
      public function cleanup() : void
      {
      }
      
      public function update() : void
      {
         if(this.seconds > 0 && !this.isRunning)
         {
            this.isRunning = true;
            this.tick();
         }
      }
      
      private function tick() : void
      {
         --this.seconds;
         if(this.seconds > 0)
         {
            TweenMax.delayedCall(1,this.tick);
         }
         else
         {
            this.isRunning = false;
            if(this.onCompleteCallback != null)
            {
               this.onCompleteCallback(this.techID);
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   import flash.geom.Rectangle;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.elements.TechSlotElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.models.TechModel;
   
   public class TechView
   {
      
      public static const logger:ILogger = Log.getLogger("TechView");
      
      private static const CONTENT_PADDING_X:int = 15;
      
      private static const CONTENT_PADDING_Y:int = 38;
      
      private static const MINIMUM_WIDTH:int = 96;
      
      private var main:Main;
      
      private var techModel:TechModel;
      
      private var coolDowns:Array = [];
      
      public function TechView(param1:Main, param2:TechModel)
      {
         super();
         this.techModel = param2;
         this.main = param1;
      }
      
      private function getView() : SimpleWindow
      {
         var _loc2_:SimpleContainer = null;
         var _loc3_:int = 0;
         var _loc1_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_TECHS);
         if(_loc1_ == null)
         {
            _loc1_ = this.main.getGuiManager().createWindow(SimpleWindow.WINDOW_CLASS_TECHS);
            _loc2_ = new SimpleContainer(this.main.getGuiManager(),SimpleContainer.CLASS_TECHS);
            _loc1_.addContainer(_loc2_);
            _loc3_ = 1;
            while(_loc3_ < this.techModel.techs.length)
            {
               this.addSlotElementAt(_loc2_);
               _loc3_++;
            }
            _loc2_.x = CONTENT_PADDING_X;
            _loc2_.y = CONTENT_PADDING_Y;
         }
         return _loc1_;
      }
      
      private function addSlotElementAt(param1:SimpleContainer) : void
      {
         var _loc2_:TechSlotElement = new TechSlotElement(this.main);
         _loc2_.handleClickCallBack = this.handleSlotClick;
         param1.addElement(_loc2_,SimpleContainer.ALIGN_HORIZONTAL,5);
      }
      
      public function update() : void
      {
         var _loc3_:TechSlotElement = null;
         var _loc7_:SimpleContainer = null;
         var _loc8_:int = 0;
         var _loc1_:SimpleWindow = this.getView();
         var _loc2_:Array = _loc1_.getContainer(SimpleContainer.CLASS_TECHS).getElements(SimpleElement.TYPE_TECH);
         if(_loc2_.length < this.techModel.techs.length - 1)
         {
            _loc7_ = _loc1_.getContainer(SimpleContainer.CLASS_TECHS);
            _loc8_ = _loc2_.length + 1;
            while(_loc8_ < this.techModel.techs.length)
            {
               this.addSlotElementAt(_loc7_);
               _loc8_++;
            }
            _loc2_ = _loc7_.getElements(SimpleElement.TYPE_TECH);
         }
         var _loc4_:int = 0;
         while(_loc4_ < _loc2_.length)
         {
            _loc3_ = _loc2_[_loc4_] as TechSlotElement;
            _loc4_++;
         }
         var _loc5_:Rectangle = _loc1_.getContainer(SimpleContainer.CLASS_TECHS).getRect(_loc1_);
         var _loc6_:int = Math.max(_loc5_.width + CONTENT_PADDING_X,MINIMUM_WIDTH);
         _loc1_.setDimension(_loc6_,_loc5_.height + CONTENT_PADDING_Y);
      }
      
      public function handleSlotClick(param1:int) : void
      {
         this.techModel.activateTechInSlot(param1);
      }
   }
}

package net.bigpoint.darkorbit.gui
{
   public class WindowSetting
   {
      
      private var windowID:int;
      
      private var maximized:Boolean;
      
      private var x:int;
      
      private var y:int;
      
      public function WindowSetting(param1:int, param2:int, param3:int, param4:Boolean)
      {
         super();
         this.windowID = param1;
         this.x = param2;
         this.y = param3;
         this.maximized = param4;
      }
      
      public function getWindowID() : int
      {
         return this.windowID;
      }
      
      public function isMaximized() : Boolean
      {
         return this.maximized;
      }
      
      public function getX() : int
      {
         return this.x;
      }
      
      public function getY() : int
      {
         return this.y;
      }
   }
}

package net.bigpoint.darkorbit.gui.container
{
   import fl.controls.TextArea;
   import fl.controls.TextInput;
   import flash.errors.EOFError;
   import flash.events.Event;
   import flash.events.KeyboardEvent;
   import flash.events.NetStatusEvent;
   import flash.net.SharedObject;
   import flash.net.SharedObjectFlushStatus;
   import flash.text.TextFormat;
   import flash.ui.Keyboard;
   import flash.utils.ByteArray;
   import flash.utils.Dictionary;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import mx.utils.StringUtil;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.ICommandLogTarget;
   import net.bigpoint.darkorbit.Main;
   
   public class CLILog extends SimpleContainer implements ICommandLogTarget
   {
      
      private static const logger:ILogger = Log.getLogger("CLILog");
      
      private var _main:Main;
      
      private var _outputField:TextArea;
      
      private var _inputField:TextInput;
      
      private var _firstCommand:LineCommand;
      
      private var _lastCommand:LineCommand;
      
      private var _currentCommand:LineCommand;
      
      private var _logSessionCookie:SharedObject;
      
      private var _cookieName:String;
      
      private var cmdWhiteList:Dictionary = new Dictionary();
      
      public function CLILog(param1:Main)
      {
         super(param1.getGuiManager(),SimpleContainer.CLASS_COMMAND_LINE_INTERFACE);
         this._main = param1;
         this._outputField = new TextArea();
         addChild(this._outputField);
         this._inputField = new TextInput();
         addChild(this._inputField);
         this._cookieName = "doclilog" + Hero.userID;
      }
      
      public function initSessionCookie() : void
      {
         this._logSessionCookie = SharedObject.getLocal(this._cookieName);
         if(this._logSessionCookie.size != 0)
         {
            if(this._logSessionCookie.data.commands != undefined)
            {
               this.initCommandHistory(ByteArray(this._logSessionCookie.data.commands));
            }
         }
         else
         {
            this.initCommandHistory();
         }
      }
      
      private function initCommandHistory(param1:ByteArray = null) : void
      {
         var commandRaw:String = null;
         var byteCommands:ByteArray = param1;
         this._firstCommand = null;
         this._firstCommand = new LineCommand();
         this._lastCommand = null;
         this._lastCommand = new LineCommand();
         this._firstCommand.next = this._lastCommand;
         this._lastCommand.previous = this._firstCommand;
         this._currentCommand = this._lastCommand;
         if(byteCommands != null)
         {
            while(byteCommands.bytesAvailable)
            {
               commandRaw = "";
               try
               {
                  commandRaw = byteCommands.readUTF();
                  if(commandRaw != "\n")
                  {
                     this.addCommand(commandRaw,false);
                  }
               }
               catch(e:EOFError)
               {
                  writeOutput("EOFError " + e.message);
               }
            }
         }
      }
      
      public function setOutputField(param1:TextArea) : void
      {
         if(this._outputField != null && contains(this._outputField))
         {
            removeChild(this._outputField);
         }
         this._outputField = param1;
         this._outputField.editable = false;
         this._outputField.textField.selectable = true;
         var _loc2_:TextFormat = new TextFormat();
         _loc2_.color = 8947848;
         _loc2_.size = 12;
         _loc2_.font = "Courier New";
         this._outputField.setStyle("textFormat",_loc2_);
         addChild(this._outputField);
      }
      
      public function setInputField(param1:TextInput) : void
      {
         if(this._inputField != null && contains(this._inputField))
         {
            removeChild(this._inputField);
         }
         this._inputField = param1;
         var _loc2_:TextFormat = new TextFormat();
         _loc2_.color = 1118481;
         _loc2_.size = 12;
         _loc2_.font = "Courier New";
         _loc2_.bold = true;
         this._inputField.setStyle("textFormat",_loc2_);
         this._inputField.addEventListener(Event.CHANGE,this.handleTextChange);
         this._inputField.addEventListener(KeyboardEvent.KEY_DOWN,this.handleKeyDown);
         this._inputField.addEventListener(KeyboardEvent.KEY_UP,this.handleKeyUp);
         addChild(this._inputField);
      }
      
      private function handleKeyDown(param1:KeyboardEvent) : void
      {
         var _loc2_:int = int(param1.keyCode);
         switch(_loc2_)
         {
            case Keyboard.DOWN:
               this.loopDown();
               break;
            case Keyboard.UP:
               this.loopUp();
               break;
            case Keyboard.ENTER:
               this.parseInput(this._inputField.text);
               this._inputField.text = "";
         }
      }
      
      private function handleKeyUp(param1:KeyboardEvent) : void
      {
         var _loc2_:int = int(param1.keyCode);
         switch(_loc2_)
         {
            case Keyboard.DOWN:
            case Keyboard.UP:
               this._inputField.setSelection(this._inputField.text.length,this._inputField.text.length);
         }
      }
      
      private function loopUp() : void
      {
         if(this._currentCommand == this._lastCommand)
         {
            this._currentCommand.value = this._inputField.text;
         }
         if(this._currentCommand.previous != null)
         {
            this._currentCommand = this._currentCommand.previous;
         }
         this._inputField.text = this._currentCommand.value;
      }
      
      private function loopDown() : void
      {
         if(this._currentCommand.next != null)
         {
            this._currentCommand = this._currentCommand.next;
         }
         this._inputField.text = this._currentCommand.value;
      }
      
      private function parseInput(param1:String) : void
      {
         param1 = StringUtil.trim(param1);
         if(param1.length == 0)
         {
            return;
         }
         if(param1.charAt(0) == "+")
         {
            param1 = param1.substring(1,param1.length);
            this.addToCmdWhiteList(param1.split(","));
         }
         else if(param1.charAt(0) == "-")
         {
            param1 = param1.substring(1,param1.length);
            this.removeFromCmdWhiteList(param1.split(","));
         }
         else if(param1.charAt(0) == ":")
         {
            param1 = param1.substring(1,param1.length);
            switch(param1)
            {
               case "reset":
               case "clear":
                  this.clearHistory();
            }
         }
         else
         {
            this._main.getConnectionManager().sendCommand(param1);
            this.writeOutput(param1);
            if(this._currentCommand.previous.value == param1)
            {
               logger.fatal("list stays untouched " + param1);
            }
            else if(this._lastCommand.value == this._lastCommand.previous.value)
            {
               this._lastCommand.value = "";
            }
            else
            {
               this.addCommand(param1);
            }
         }
      }
      
      private function addCommand(param1:String, param2:Boolean = true) : void
      {
         var _loc3_:LineCommand = new LineCommand();
         _loc3_.value = param1;
         _loc3_.next = this._lastCommand;
         this._lastCommand.previous.next = _loc3_;
         _loc3_.previous = this._lastCommand.previous;
         this._lastCommand.previous = _loc3_;
         this._currentCommand = this._lastCommand;
         if(param2)
         {
            this.saveCommands();
         }
      }
      
      private function removeFromCmdWhiteList(param1:Array) : void
      {
      }
      
      private function addToCmdWhiteList(param1:Array) : void
      {
         var _loc2_:String = null;
         for each(_loc2_ in param1)
         {
            this.cmdWhiteList[_loc2_] = true;
         }
      }
      
      public function setSize(param1:int, param2:int) : void
      {
         this._outputField.width = param1;
         this._outputField.height = param2 - 20;
         this._inputField.width = param1;
         this._inputField.height = 20;
         this._inputField.y = param2 - 20;
      }
      
      public function writeOutput(param1:String) : void
      {
         this._outputField.text += param1 + "\n";
         this._outputField.verticalScrollPosition = this._outputField.maxVerticalScrollPosition;
      }
      
      public function initOutput(param1:String) : void
      {
      }
      
      private function handleTextChange(param1:Event) : void
      {
         this._currentCommand = this._lastCommand;
         this._currentCommand.value = this._inputField.text;
      }
      
      private function saveCommands() : void
      {
         var flushStatus:String = null;
         var commandBytes:ByteArray = new ByteArray();
         var commandToStore:LineCommand = this._firstCommand;
         while(commandToStore.next != null)
         {
            if(commandToStore.value != "")
            {
               commandBytes.writeUTF(commandToStore.value);
               commandBytes.writeUTF("\n");
            }
            commandToStore = commandToStore.next;
         }
         this._logSessionCookie.data.commands = commandBytes;
         try
         {
            flushStatus = this._logSessionCookie.flush(10000);
         }
         catch(error:Error)
         {
            writeOutput("Error...Could not write SharedObject to disk");
         }
         if(flushStatus != null)
         {
            switch(flushStatus)
            {
               case SharedObjectFlushStatus.PENDING:
                  this.writeOutput("Requesting permission to save cookie...\n");
                  this._logSessionCookie.addEventListener(NetStatusEvent.NET_STATUS,this.onFlushStatus);
                  break;
               case SharedObjectFlushStatus.FLUSHED:
            }
         }
      }
      
      private function clearHistory() : void
      {
         this._logSessionCookie.clear();
         this.writeOutput("History cleared");
         this.initCommandHistory();
      }
      
      private function onFlushStatus(param1:NetStatusEvent) : void
      {
         this.writeOutput("User closed permission dialog...\n");
         switch(param1.info.code)
         {
            case "SharedObject.Flush.Success":
               this.writeOutput("User granted permission -- cookie saved.\n");
               break;
            case "SharedObject.Flush.Failed":
               this.writeOutput("User denied permission -- cookie not saved.\n");
         }
         this._logSessionCookie.removeEventListener(NetStatusEvent.NET_STATUS,this.onFlushStatus);
      }
      
      public function passFullInCommand(param1:String) : void
      {
         var _loc2_:int = 0;
         var _loc3_:String = null;
         for(_loc3_ in this.cmdWhiteList)
         {
            _loc2_ = int(this.cmdWhiteList[_loc3_]);
            if(param1.substring(0,_loc2_) == "0|" + _loc3_)
            {
               this.writeOutput(param1.substring(2,param1.length));
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.gui.container
{
   import com.bigpoint.utils.BPLocale;
   import flash.display.Bitmap;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.catalog.SpecialAmmunition;
   import net.bigpoint.darkorbit.combat.RocketPattern;
   import net.bigpoint.darkorbit.data.vo.RankedHuntStatsVO;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.elements.InfoField;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.Ship;
   
   public class InfoContainer extends SimpleContainer
   {
      
      public function InfoContainer(param1:GuiManager, param2:int)
      {
         super(param1,param2);
      }
      
      public function setInfoField(param1:int, param2:String) : void
      {
         var _loc4_:Object = null;
         var _loc3_:int = 0;
         while(_loc3_ < elements.length)
         {
            _loc4_ = elements[_loc3_];
            if(_loc4_ is InfoField)
            {
               if(InfoField(_loc4_).getID() == param1)
               {
                  InfoField(_loc4_).setText(param2);
               }
            }
            _loc3_++;
         }
      }
      
      public function updateInfoFieldView() : void
      {
         var _loc2_:Object = null;
         var _loc1_:int = 0;
         while(_loc1_ < elements.length)
         {
            _loc2_ = elements[_loc1_];
            if(_loc2_ is InfoField)
            {
               InfoField(_loc2_).updateView();
            }
            _loc1_++;
         }
      }
      
      public function updateInfoField(param1:int) : void
      {
         var _loc2_:int = 0;
         var _loc3_:RankedHuntStatsVO = null;
         var _loc5_:Object = null;
         var _loc6_:InfoField = null;
         var _loc7_:Map = null;
         var _loc8_:Ship = null;
         var _loc9_:int = 0;
         var _loc10_:Number = NaN;
         var _loc11_:Number = NaN;
         var _loc12_:Number = NaN;
         var _loc13_:Number = NaN;
         var _loc14_:int = 0;
         var _loc15_:Number = NaN;
         var _loc16_:Number = NaN;
         var _loc17_:Number = NaN;
         var _loc18_:Number = NaN;
         var _loc19_:Number = NaN;
         var _loc20_:Number = NaN;
         var _loc21_:Number = NaN;
         var _loc22_:int = 0;
         var _loc23_:Number = NaN;
         var _loc24_:Number = NaN;
         var _loc25_:int = 0;
         var _loc26_:Number = NaN;
         var _loc27_:Number = NaN;
         var _loc28_:Number = NaN;
         var _loc29_:Number = NaN;
         var _loc30_:int = 0;
         var _loc31_:Bitmap = null;
         var _loc32_:Boolean = false;
         var _loc4_:int = 0;
         for(; _loc4_ < elements.length; _loc4_++)
         {
            _loc5_ = elements[_loc4_];
            if(!(_loc5_ is InfoField))
            {
               continue;
            }
            _loc6_ = _loc5_ as InfoField;
            if(_loc6_.getID() != param1)
            {
               continue;
            }
            switch(param1)
            {
               case SimpleElement.TYPE_LASER:
                  _loc10_ = Hero.maxLaserCapacity;
                  _loc11_ = 0;
                  for each(_loc9_ in Hero.laserBatteryAmounts)
                  {
                     _loc11_ += _loc9_;
                  }
                  _loc6_.setLabel(BPLocale.roundInteger(_loc11_));
                  _loc6_.setText(BPLocale.roundInteger(_loc11_) + InfoField.FIELD_SEPERATOR + BPLocale.roundInteger(_loc10_));
                  _loc6_.setCounterbar(_loc11_,_loc10_);
                  break;
               case SimpleElement.TYPE_ROCKETS:
                  _loc12_ = Hero.maxRocketCapacity;
                  _loc13_ = 0;
                  _loc13_ = Hero.rocketAmounts[RocketPattern.R310] + Hero.rocketAmounts[RocketPattern.PLT_2021] + Hero.rocketAmounts[RocketPattern.PLT_2026] + Hero.rocketAmounts[RocketPattern.PLT_3030] + Hero.rocketAmounts[RocketPattern.ECO10] + Hero.explosiveAmounts[SpecialAmmunition.MINE];
                  _loc6_.setLabel(BPLocale.roundInteger(_loc13_));
                  _loc6_.setText(BPLocale.roundInteger(_loc13_) + InfoField.FIELD_SEPERATOR + BPLocale.roundInteger(_loc12_));
                  _loc6_.setCounterbar(_loc13_,_loc12_);
                  break;
               case SimpleElement.TYPE_CONFIGURATION:
                  _loc14_ = Settings.selectedConfiguration;
                  _loc6_.setLabel(_loc14_.toString());
                  _loc6_.setText(_loc14_.toString(),false);
                  break;
               case SimpleElement.TYPE_HITPOINTS:
                  _loc7_ = guiManager.getMain().screenManager.map;
                  if(_loc7_ != null)
                  {
                     _loc8_ = _loc7_.getShipManager().getHero();
                     if(_loc8_ != null)
                     {
                        _loc23_ = _loc8_.getHitpoints();
                        _loc24_ = _loc8_.getMaxHitpoints();
                        _loc6_.setLabel(BPLocale.roundInteger(_loc23_));
                        _loc6_.setText(BPLocale.roundInteger(_loc23_) + InfoField.FIELD_SEPERATOR + BPLocale.roundInteger(_loc24_));
                        _loc6_.setCounterbar(_loc23_,_loc24_);
                        _loc25_ = 0;
                        if(_loc23_ > _loc24_)
                        {
                           _loc25_ = _loc23_ - _loc24_;
                           _loc6_.setCounterbarVisibility(1,true);
                           _loc6_.setCounterbar(_loc25_,_loc24_,true,1);
                        }
                        else
                        {
                           _loc6_.setCounterbarVisibility(1,false);
                        }
                     }
                  }
                  break;
               case SimpleElement.TYPE_SHIELD:
                  _loc7_ = guiManager.getMain().screenManager.map;
                  if(_loc7_ != null)
                  {
                     _loc8_ = _loc7_.getShipManager().getHero();
                     if(_loc8_ != null)
                     {
                        _loc26_ = _loc8_.getShield();
                        _loc27_ = _loc8_.getMaxShield();
                        _loc6_.setLabel(BPLocale.roundInteger(_loc26_));
                        _loc6_.setText(BPLocale.roundInteger(_loc26_) + InfoField.FIELD_SEPERATOR + BPLocale.roundInteger(_loc27_));
                        _loc6_.setCounterbar(_loc26_,_loc27_);
                     }
                  }
                  break;
               case SimpleElement.TYPE_CARGO:
                  _loc7_ = guiManager.getMain().screenManager.map;
                  if(_loc7_ != null)
                  {
                     _loc8_ = _loc7_.getShipManager().getHero();
                     if(_loc8_ != null)
                     {
                        _loc28_ = _loc8_.getCargo();
                        _loc29_ = _loc8_.getMaxCargo();
                        _loc6_.setLabel(BPLocale.roundInteger(_loc28_));
                        _loc6_.setText(BPLocale.roundInteger(_loc28_) + InfoField.FIELD_SEPERATOR + BPLocale.roundInteger(_loc29_));
                        _loc6_.setCounterbar(_loc28_,_loc29_);
                     }
                  }
                  break;
               case SimpleElement.TYPE_CREDITS:
                  _loc15_ = Hero.creditsAmount;
                  _loc6_.setLabel(BPLocale.roundInteger(_loc15_));
                  _loc6_.setText(BPLocale.roundInteger(_loc15_));
                  break;
               case SimpleElement.TYPE_URIDIUM:
                  _loc16_ = Hero.uridiumAmount;
                  _loc6_.setLabel(BPLocale.roundInteger(_loc16_));
                  _loc6_.setText(BPLocale.roundInteger(_loc16_));
                  break;
               case SimpleElement.TYPE_BOOTY_KEYS:
                  _loc17_ = Hero.bootyKeysAmount;
                  _loc6_.setLabel(BPLocale.roundInteger(_loc17_));
                  _loc6_.setText(BPLocale.roundInteger(_loc17_),false);
                  break;
               case SimpleElement.TYPE_JUMP_VOUCHERS:
                  _loc18_ = Hero.jumpVouchersAmount;
                  _loc6_.setLabel(BPLocale.roundInteger(_loc18_));
                  _loc6_.setText(BPLocale.roundInteger(_loc18_),false);
                  break;
               case SimpleElement.TYPE_JACKPOT:
                  _loc19_ = Hero.jackpotAmount;
                  _loc6_.setLabel(BPLocale.round(_loc19_,2));
                  _loc6_.setText(BPLocale.round(_loc19_,2));
                  break;
               case SimpleElement.TYPE_EXPERIENCE:
                  _loc20_ = Hero.experiencePoints;
                  _loc6_.setLabel(BPLocale.roundInteger(_loc20_));
                  _loc6_.setText(BPLocale.roundInteger(_loc20_));
                  break;
               case SimpleElement.TYPE_HONOR:
                  _loc21_ = Hero.honorPoints;
                  _loc6_.setLabel(BPLocale.roundInteger(_loc21_));
                  _loc6_.setText(BPLocale.roundInteger(_loc21_));
                  break;
               case SimpleElement.TYPE_LEVEL:
                  _loc22_ = Hero.level;
                  _loc6_.setLabel(_loc22_.toString());
                  _loc6_.setText(_loc22_.toString(),false);
                  break;
               case SimpleElement.TYPE_RANKED_HUNT_POINTS:
                  _loc2_ = Hero.rankedHuntingEventData.currentID;
                  _loc3_ = Hero.rankedHuntingEventData.eventVOs[_loc2_];
                  if(_loc3_ != null)
                  {
                     _loc30_ = _loc3_.bountyPoints;
                     _loc6_.setLabel(BPLocale.roundInteger(_loc30_));
                     if(_loc3_.targetVerbose != null)
                     {
                        _loc6_.updateTooltip(BPLocale.getText(_loc6_.languageKey) + "\n" + _loc3_.targetVerbose);
                     }
                     if(_loc3_.targetList != null)
                     {
                        _loc31_ = ResourceManager.getBitmap("ui","npc" + _loc3_.targetList[0] + "icon");
                        if(_loc31_ != null)
                        {
                           _loc6_.updateIcon(_loc31_);
                        }
                     }
                  }
                  break;
               case SimpleElement.TYPE_CLAN_RANKED_CLAN_POINTS:
                  _loc2_ = Hero.rankedHuntingEventData.currentID;
                  _loc3_ = Hero.rankedHuntingEventData.eventVOs[_loc2_];
                  if(_loc3_ != null)
                  {
                     _loc32_ = true;
                     if(_loc3_.clanBountyPointsInSync)
                     {
                        _loc6_.setColor(15580416);
                        _loc32_ = false;
                     }
                     else
                     {
                        _loc6_.setColor(int(Styles.infoFieldFmt.color));
                        _loc32_ = _loc32_;
                     }
                     if(_loc32_)
                     {
                        _loc6_.setText(BPLocale.getText("ttip_clan_bounty_points_updated_in_5_minute_cycle"));
                     }
                     _loc6_.getChildByName("CLOCK_ICON").visible = _loc32_;
                     _loc6_.setLabel(BPLocale.roundInteger(_loc3_.clanBountyPoints));
                  }
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.gui.container
{
   public class LineCommand
   {
      
      public var value:String = "";
      
      public var next:LineCommand = null;
      
      public var previous:LineCommand = null;
      
      public function LineCommand()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.gui.container
{
   import flash.display.DisplayObject;
   import flash.display.Sprite;
   import flash.geom.Point;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   
   public class SimpleContainer extends Sprite
   {
      
      public static var CLASS_MINIMAP:int = 2;
      
      public static var CLASS_DARKORBIT_LOGO:int = 3;
      
      public static var CONTAINER_CLASS_HERO_INFO_0:int = 5;
      
      public static var CONTAINER_CLASS_HERO_INFO_1:int = 14;
      
      public static var CONTAINER_CLASS_HERO_INFO_2:int = 1;
      
      public static var CONTAINER_CLASS_HERO_INFO_3:int = 4;
      
      public static var CONTAINER_CLASS_OPPONENT_INFO:int = 0;
      
      public static const CLASS_BUTTONS:int = 6;
      
      public static const CLASS_LOG:int = 8;
      
      public static const CLASS_LOGOUT_WINDOW:int = 9;
      
      public static const CLASS_TRADE_ORE:int = 10;
      
      public static const CLASS_TRADE_WEBLINKS1:int = 11;
      
      public static const CLASS_TRADE_WEBLINKS2:int = 12;
      
      public static const CLASS_MINIMAP_LABEL:int = 13;
      
      public static const CLASS_QUEST_TREE:int = 15;
      
      public static const CLASS_QUEST_PAGE_DOTS:int = 16;
      
      public static const CLASS_CONNECTION_LOST:int = 17;
      
      public static const CLASS_SPACEMAP:int = 18;
      
      public static const CLASS_HERO_DESTROYED:int = 19;
      
      public static const CLASS_CONNECTION:int = 20;
      
      public static const CLASS_BETA:int = 21;
      
      public static const CLASS_BOOSTER:int = 22;
      
      public static const CLASS_SPACEBALL:int = 23;
      
      public static const CLASS_INVASION:int = 24;
      
      public static const CLASS_CTB:int = 25;
      
      public static const CLASS_TDM:int = 26;
      
      public static const CLASS_CHAT:int = 27;
      
      public static const CLASS_PROMPT:int = 28;
      
      public static const CLASS_COMMAND_LINE_INTERFACE:int = 29;
      
      public static const CLASS_GROUP_SYSTEM:int = 30;
      
      public static const CLASS_REFINEMENT_UPDATE_SOURCE:int = 31;
      
      public static const CLASS_REFINEMENT_UPDATE_TARGET:int = 32;
      
      public static const CLASS_REFINEMENT_QUERY:int = 33;
      
      public static const CLASS_REFINEMENT_BUTTONS:int = 36;
      
      public static const CLASS_REFINEMENT_UPDATE_STATIC:int = 37;
      
      public static const CLASS_REFINEMENT_REFINEMENT_STATIC:int = 38;
      
      public static const CLASS_REFINEMENT_REFINEMENT_SOURCE:int = 39;
      
      public static const CLASS_REFINEMENT_REFINEMENT_BUTTONS:int = 40;
      
      public static const CLASS_REFINEMENT_REFINEMENT_TREE:int = 41;
      
      public static const CLASS_DEFAULT:int = 35;
      
      public static const CLASS_SETTING_TABS:int = 42;
      
      public static const CLASS_SETTING_BUTTONS:int = 43;
      
      public static const CLASS_SETTING_TABPAGE_GAMEPLAY:int = 44;
      
      public static const CLASS_SETTING_TABPAGE_DISPLAY:int = 45;
      
      public static const CLASS_SETTING_TABPAGE_SOUND:int = 46;
      
      public static const CLASS_AUTOSTART_WARNING:int = 47;
      
      public static const CLASS_REPAIR_SHIP:int = 48;
      
      public static const CLASS_SCROLLABLE:int = 49;
      
      public static const CLASS_TECHS:int = 50;
      
      public static const CLASS_RANKED_HUNT_EVENT:int = 51;
      
      public static const CLASS_RANKED_HUNT_EVENT_COL_2:int = 52;
      
      public static const CLASS_SPACEMAP_ADVANCED:int = 53;
      
      public static const CLASS_PET_WINDOW_CONTENT:int = 54;
      
      public static const CLASS_PET_WINDOW_BANNER:int = 55;
      
      public static const CLASS_SETTING_TABPAGE_INTERFACE:int = 56;
      
      public static var NO_ALIGN:int = 0;
      
      public static var ALIGN_VERTICAL:int = 1;
      
      public static var ALIGN_HORIZONTAL:int = 2;
      
      public static var ALIGN_VERTICAL_CENTER:int = 3;
      
      private var positions:Array = [];
      
      protected var elements:Array = [];
      
      protected var guiManager:GuiManager;
      
      private var displayDigits:Boolean;
      
      private var classID:int;
      
      public function SimpleContainer(param1:GuiManager, param2:int)
      {
         super();
         this.guiManager = param1;
         this.classID = param2;
         this.cacheAsBitmap = true;
      }
      
      public function getClassID() : int
      {
         return this.classID;
      }
      
      public function removeElement(param1:DisplayObject) : void
      {
         var _loc3_:DisplayObject = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.elements.length)
         {
            _loc3_ = this.elements[_loc2_];
            if(_loc3_ == param1)
            {
               this.elements.splice(_loc2_,1);
               this.removeChild(param1);
               break;
            }
            _loc2_++;
         }
      }
      
      public function addElement(param1:DisplayObject, param2:int = 0, param3:int = 5) : void
      {
         var _loc4_:DisplayObject = null;
         if(this.numChildren > 0)
         {
            _loc4_ = this.getChildAt(this.numChildren - 1);
            if(param2 == ALIGN_VERTICAL)
            {
               param1.x = _loc4_.x;
               param1.y = _loc4_.y + _loc4_.height + param3;
            }
            else if(param2 == ALIGN_HORIZONTAL)
            {
               param1.y = _loc4_.y;
               param1.x = _loc4_.x + _loc4_.width + param3;
            }
            else if(param2 == ALIGN_VERTICAL_CENTER)
            {
               param1.x = this.width / 2 - param1.width / 2;
               param1.y = _loc4_.y + _loc4_.height + param3;
            }
         }
         this.elements.push(param1);
         this.addChild(param1);
      }
      
      public function getAllElements() : Array
      {
         return this.elements;
      }
      
      public function removeAllElements() : void
      {
         this.elements = [];
      }
      
      public function getElement(param1:int) : SimpleElement
      {
         var _loc3_:SimpleElement = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.elements.length)
         {
            _loc3_ = this.elements[_loc2_];
            if(_loc3_.getID() == param1)
            {
               return _loc3_;
            }
            _loc2_++;
         }
         return null;
      }
      
      public function getElementAt(param1:int) : SimpleElement
      {
         return this.elements[param1];
      }
      
      public function getElements(param1:int) : Array
      {
         var _loc4_:SimpleElement = null;
         var _loc2_:Array = [];
         var _loc3_:int = 0;
         while(_loc3_ < this.elements.length)
         {
            _loc4_ = this.elements[_loc3_];
            if(_loc4_.getID() == param1)
            {
               _loc2_.push(_loc4_);
            }
            _loc3_++;
         }
         return _loc2_;
      }
      
      override public function get width() : Number
      {
         var _loc3_:Object = null;
         var _loc4_:Number = NaN;
         var _loc1_:Number = super.width;
         var _loc2_:int = 0;
         while(_loc2_ < this.elements.length)
         {
            _loc3_ = this.elements[_loc2_];
            _loc4_ = this.recurseChildWidth(_loc3_);
            if(_loc4_ > _loc1_)
            {
               _loc1_ = _loc4_;
            }
            _loc2_++;
         }
         return _loc1_;
      }
      
      private function recurseChildWidth(param1:Object) : Number
      {
         var _loc3_:int = 0;
         var _loc4_:Object = null;
         var _loc5_:Number = NaN;
         var _loc2_:int = 0;
         if(param1 is Sprite)
         {
            _loc3_ = 0;
            while(_loc3_ < param1.numChildren)
            {
               _loc4_ = param1.getChildAt(_loc3_);
               if(_loc4_ is Sprite)
               {
                  if(_loc4_.width > _loc2_)
                  {
                     _loc2_ = int(_loc4_.width);
                  }
                  _loc5_ = this.recurseChildWidth(_loc4_);
                  if(_loc5_ > _loc2_)
                  {
                     _loc2_ = _loc5_;
                  }
               }
               _loc3_++;
            }
         }
         return _loc2_;
      }
      
      override public function get height() : Number
      {
         var _loc3_:Object = null;
         var _loc4_:Number = NaN;
         var _loc1_:Number = super.height;
         var _loc2_:int = 0;
         while(_loc2_ < this.elements.length)
         {
            _loc3_ = this.elements[_loc2_];
            _loc4_ = this.recurseChildHeight(_loc3_);
            if(_loc4_ > _loc1_)
            {
               _loc1_ = _loc4_;
            }
            _loc2_++;
         }
         return _loc1_;
      }
      
      private function recurseChildHeight(param1:Object) : Number
      {
         var _loc4_:Object = null;
         var _loc5_:Number = NaN;
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         while(_loc3_ < param1.numChildren)
         {
            _loc4_ = param1.getChildAt(_loc3_);
            if(_loc4_ is Sprite)
            {
               if(_loc4_.height > _loc2_)
               {
                  _loc2_ = int(_loc4_.height);
               }
               _loc5_ = this.recurseChildHeight(_loc4_);
               if(_loc5_ > _loc2_)
               {
                  _loc2_ = _loc5_;
               }
            }
            _loc3_++;
         }
         return _loc2_;
      }
      
      public function getParent() : DisplayObject
      {
         return this.parent;
      }
      
      public function setPredefinedPosition() : void
      {
         var _loc1_:Point = this.positions[0];
         if(this.isDisplayDigits())
         {
            if(this.positions[1] != null)
            {
               _loc1_ = this.positions[1];
            }
         }
         if(_loc1_ == null)
         {
            this.addPredefinedPosition(new Point(10,25));
            _loc1_ = this.positions[0];
         }
         this.x = _loc1_.x;
         this.y = _loc1_.y;
      }
      
      public function addPredefinedPosition(param1:Point) : void
      {
         this.positions.push(param1);
      }
      
      public function isDisplayDigits() : Boolean
      {
         return this.displayDigits;
      }
      
      public function setDisplayDigits(param1:Boolean) : void
      {
         this.displayDigits = param1;
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import flash.display.MovieClip;
   import flash.events.MouseEvent;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import net.bigpoint.darkorbit.Styles;
   
   public class ButtonElement extends SimpleElement
   {
      
      public static var TYPE_SAVE_SETTINGS:int = 0;
      
      public static var TYPE_CANCEL_SETTINGS:int = 1;
      
      public static var TYPE_CANCEL_LOGOUT:int = 2;
      
      public static var TYPE_SELL_ORE:int = 3;
      
      public static var TYPE_LAB_BTN:int = 4;
      
      public static const TYPE_RECONNECT:int = 5;
      
      public static const TYPE_CLOSE_APP:int = 6;
      
      public static const TYPE_OK:int = 7;
      
      public static const TYPE_UPDATE:int = 8;
      
      public static const TYPE_CANCEL:int = 9;
      
      public static const TYPE_REFINEMENT_UPDATE:int = 10;
      
      public static const TYPE_REFINEMENT_REFINEMENT:int = 11;
      
      public static var TYPE_RESET_SETTINGS:int = 12;
      
      public static const TYPE_SETTINGS_TAB_GAMEPLAY:int = 13;
      
      public static const TYPE_SETTINGS_TAB_DISPLAY:int = 14;
      
      public static const TYPE_SETTINGS_TAB_SOUND:int = 15;
      
      public static const TYPE_TUTORIAL_CONTINUE:int = 16;
      
      public static const TYPE_TUTORIAL_FASTER:int = 17;
      
      public static var TYPE_TRADE_ORE:int = 18;
      
      public static const TYPE_SETTINGS_TAB_INTERFACE:int = 19;
      
      public static const TYPE_ADVANCED_SETTINGS:int = 20;
      
      public static const TYPE_TRADE_SHOP:int = 21;
      
      public static const TYPE_TRADE_URIDIUM:int = 22;
      
      private var _type:int;
      
      private var label:String;
      
      private var buttonContainer:MovieClip;
      
      private var buttonMC:MovieClip;
      
      private var textField:TextField;
      
      private var format:TextFormat;
      
      private var embedFonts:Boolean;
      
      public function ButtonElement(param1:int, param2:String, param3:MovieClip, param4:TextFormat = null, param5:Boolean = true)
      {
         super(SimpleElement.TYPE_SIMPLE_BUTTON);
         this._type = param1;
         this.label = param2;
         this.embedFonts = param5;
         this.buttonContainer = param3;
         this.buttonMC = param3["buttonMC"];
         if(param4 == null)
         {
            this.format = Styles.plainStdFmt;
         }
         else
         {
            this.format = param4;
         }
         this.init();
      }
      
      private function init() : void
      {
         this.textField = new TextField();
         this.textField.antiAliasType = AntiAliasType.ADVANCED;
         this.buttonContainer.addChild(this.textField);
         this.buttonMC.gotoAndStop(1);
         this.buttonContainer.buttonMode = true;
         this.textField.defaultTextFormat = new TextFormat(this.format.font,this.format.size,16777215);
         this.textField.embedFonts = this.embedFonts;
         this.labelText = this.label;
         this.textField.mouseEnabled = false;
         this.buttonContainer.addEventListener(MouseEvent.MOUSE_OVER,this.onMouseOver);
         this.buttonContainer.addEventListener(MouseEvent.MOUSE_OUT,this.onMouseOut);
         this.addChild(this.buttonContainer);
      }
      
      public function set labelText(param1:String) : void
      {
         this.textField.text = param1;
         this.textField.autoSize = TextFieldAutoSize.LEFT;
         this.textField.x = 2;
         this.textField.y = 2;
         this.textField.width += 2;
         this.textField.height = int(this.format.size) + 5;
         this.buttonMC.width = this.textField.width + 5;
         this.buttonMC.height = int(this.format.size) + 9;
      }
      
      public function changeTextColour(param1:uint) : void
      {
         this.textField.textColor = param1;
      }
      
      private function onMouseOver(param1:MouseEvent) : void
      {
         if(this.buttonMC.currentFrame == 1)
         {
            this.buttonMC.gotoAndStop(2);
         }
      }
      
      private function onMouseOut(param1:MouseEvent) : void
      {
         if(this.buttonMC.currentFrame == 2)
         {
            this.buttonMC.gotoAndStop(1);
         }
      }
      
      public function getType() : int
      {
         return this._type;
      }
      
      public function get type() : int
      {
         return this._type;
      }
      
      public function cleanup() : void
      {
         this.removeButtonListeners();
      }
      
      public function addButtonListeners() : void
      {
         this.buttonContainer.addEventListener(MouseEvent.MOUSE_OVER,this.onMouseOver);
         this.buttonContainer.addEventListener(MouseEvent.MOUSE_OUT,this.onMouseOut);
      }
      
      public function removeButtonListeners() : void
      {
         this.buttonContainer.removeEventListener(MouseEvent.MOUSE_OVER,this.onMouseOver);
         this.buttonContainer.removeEventListener(MouseEvent.MOUSE_OUT,this.onMouseOut);
      }
      
      public function setDisableStatus() : void
      {
         this.buttonMC.gotoAndStop(2);
      }
      
      public function setEnableStatus() : void
      {
         this.buttonMC.gotoAndStop(1);
      }
      
      public function setTextPosY(param1:int) : void
      {
         this.textField.y = param1;
      }
      
      override public function set width(param1:Number) : void
      {
         this.buttonMC.width = param1;
         if(this.textField.width < param1 - 5)
         {
            this.textField.x = (param1 - this.textField.width) * 0.5;
         }
      }
      
      override public function set height(param1:Number) : void
      {
         this.buttonMC.height = param1;
      }
      
      public function set selected(param1:Boolean) : void
      {
         if(param1)
         {
            this.buttonMC.gotoAndStop(3);
         }
         else
         {
            this.buttonMC.gotoAndStop(1);
         }
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.ToolTipHook;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.SettingsWindowDecorator;
   
   public class CheckBoxComponent extends SimpleElement
   {
      
      public static const logger:ILogger = Log.getLogger("CheckBoxComponent");
      
      public static const TYPE_AUTO_BOOST:int = 1;
      
      public static const TYPE_SHOW_PLAYERNAMES:int = 5;
      
      public static const TYPE_SHOW_RESOURCES:int = 8;
      
      public static const TYPE_SHOW_BONUS_BOXES:int = 9;
      
      public static const TYPE_SHOW_HITPOINT_BUBBLES:int = 12;
      
      public static const TYPE_SHOW_CHAT:int = 14;
      
      public static const TYPE_PLAY_MUSIC:int = 15;
      
      public static const TYPE_PLAY_SFX:int = 16;
      
      public static const TYPE_SHOW_DRONES:int = 18;
      
      public static const TYPE_SHOW_FREE_CARGO_BOXES:int = 20;
      
      public static const TYPE_SHOW_NOT_FREE_CARGO_BOXES:int = 21;
      
      public static const TYPE_AUTO_AMMUNITION_CHANGE:int = 22;
      
      public static const TYPE_AUTO_REFINEMENT:int = 25;
      
      public static const TYPE_QUICKSLOT_STOP_ATTACK:int = 26;
      
      public static const TYPE_AUTOSTART:int = 27;
      
      public static const TYPE_DOUBLECLICK_ATTACK:int = 28;
      
      public static const TYPE_DISPLAY_WINDOW_BACKGROUND:int = 29;
      
      public static const TYPE_ALWAYS_DRAGGABLE_WINDOWS:int = 30;
      
      public static const TYPE_PELOAD_USER_SHIPS:int = 31;
      
      public var typeID:int;
      
      public var key:String;
      
      public var isAdvanced:Boolean;
      
      private var textField:TextField;
      
      private var guiManager:GuiManager;
      
      private var icon:MovieClip;
      
      private var tooltipKey:String;
      
      public function CheckBoxComponent(param1:int, param2:String, param3:GuiManager, param4:String = "", param5:Boolean = false)
      {
         super(SimpleElement.TYPE_CHECKBOX);
         this.typeID = param1;
         this.key = param2;
         this.guiManager = param3;
         this.isAdvanced = param5;
         this.tooltipKey = param4;
         this.init();
      }
      
      public static function convertFrameToBool(param1:int) : String
      {
         if(param1 == 1)
         {
            return "0";
         }
         return "1";
      }
      
      private function init() : void
      {
         var _loc2_:Sprite = null;
         var _loc3_:ToolTipHook = null;
         this.icon = ResourceManager.getMovieClip("ui","checkBox");
         this.icon.gotoAndStop(1);
         this.icon.buttonMode = true;
         var _loc1_:Function = this.handleCheckboxClick;
         if(this.typeID == TYPE_AUTOSTART)
         {
            _loc1_ = this.handleAutostartChange;
         }
         this.icon.addEventListener(MouseEvent.CLICK,_loc1_);
         this.addChild(this.icon);
         this.textField = new TextField();
         this.textField.defaultTextFormat = Styles.logFmt;
         this.textField.embedFonts = Styles.logEmbed;
         this.textField.text = BPLocale.getText(this.key);
         this.textField.border = false;
         this.textField.selectable = false;
         this.textField.autoSize = TextFieldAutoSize.LEFT;
         this.textField.antiAliasType = AntiAliasType.ADVANCED;
         this.textField.height = Styles.logFontHeight + 5;
         this.textField.x = this.icon.width + 5;
         this.textField.addEventListener(MouseEvent.CLICK,_loc1_);
         this.addChild(this.textField);
         if(this.tooltipKey != "")
         {
            _loc2_ = new Sprite();
            _loc2_.addChild(SWFFinisher(ResourceManager.fileCollection.getFinisher("icons")).getEmbededBitmap("general_help"));
            _loc2_.x = this.textField.x + this.textField.width + 5;
            _loc2_.y = this.textField.y;
            this.addChild(_loc2_);
            _loc3_ = TooltipControl.getInstance().addToolTip(_loc2_,BPLocale.getText(this.tooltipKey));
            _loc3_.showImmediately = true;
         }
         this.resetSetting();
      }
      
      public function switchChecked(param1:int) : void
      {
         var _loc2_:int = param1 == 1 ? 2 : 1;
         this.icon.gotoAndStop(_loc2_);
      }
      
      public function setSetting() : void
      {
         SettingsWindowDecorator.setSettableSettingValue(this.typeID,convertFrameToBool(this.icon.currentFrame));
      }
      
      public function resetSetting() : void
      {
         var _loc1_:Boolean = SettingsWindowDecorator.getCheckBoxSettingValue(this.typeID);
         var _loc2_:int = _loc1_ ? 2 : 1;
         this.icon.gotoAndStop(_loc2_);
      }
      
      private function handleAutostartChange(param1:MouseEvent) : void
      {
         if(this.icon.currentFrame == 1)
         {
            this.guiManager.createAutoStartWarning();
         }
         this.handleCheckboxClick();
      }
      
      private function handleCheckboxClick(param1:MouseEvent = null) : void
      {
         if(this.icon.currentFrame == 1)
         {
            this.icon.gotoAndStop(2);
         }
         else
         {
            this.icon.gotoAndStop(1);
         }
      }
      
      public function getType() : int
      {
         return this.typeID;
      }
      
      public function getIcon() : MovieClip
      {
         return this.icon;
      }
      
      public function show(param1:Boolean) : void
      {
         this.visible = param1;
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import flash.display.MovieClip;
   import flash.text.TextField;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   
   public class ConnectionElement extends SimpleElement
   {
      
      public function ConnectionElement()
      {
         super(TYPE_CONNECTION);
         this.init();
      }
      
      private function init() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc2_:MovieClip = MovieClip(_loc1_.getEmbededMovieClip("connectionWindow"));
         _loc2_.mouseEnabled = Main.mouseEventsEnabled;
         _loc2_.mouseChildren = Main.mouseEventsEnabled;
         _loc2_.txtHeader.text = "";
         var _loc3_:TextField = TextField(_loc2_.txtBody);
         _loc3_.defaultTextFormat = Styles.simpleFmt;
         _loc3_.embedFonts = Styles.simpleEmbed;
         _loc3_.text = BPLocale.getText("log_verbinde");
         var _loc4_:TextField = TextField(_loc2_.txtBottom);
         _loc4_.defaultTextFormat = Styles.simpleFmt;
         _loc4_.embedFonts = Styles.simpleEmbed;
         _loc4_.text = BPLocale.getText("log_warten");
         _loc4_.height = Styles.simpleFontHeight + 5;
         this.addChild(_loc2_);
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   public class ConnLostElement extends SimpleElement
   {
      
      public function ConnLostElement()
      {
         super(TYPE_CONNECTION_LOST);
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.windows.CTBBeacon;
   
   public class CTBScoreElement extends ScoreElement
   {
      
      private var rows:Array = [];
      
      public var _order:int;
      
      private var sortArray:Array = [];
      
      public function CTBScoreElement(param1:GuiManager, param2:int)
      {
         super(TYPE_CTB_SCORE,param1,param2);
         this.sortArray[1] = [1,2,3,2,1,3,3,1,2];
         this.sortArray[2] = [1,2,3,2,1,3,3,2,1];
         this.sortArray[3] = [1,3,2,2,3,1,3,1,2];
      }
      
      public function updateBeacon(param1:int, param2:int, param3:int) : void
      {
         var _loc4_:CTBBeacon = this.getBeacon(param1);
         if(_loc4_ == null)
         {
            _loc4_ = new CTBBeacon(this,param1,param2);
            this.rows.push(_loc4_);
            this.sortRows();
         }
         _loc4_.update(param3);
      }
      
      private function sortRows() : void
      {
         var _loc3_:int = 0;
         var _loc4_:CTBBeacon = null;
         var _loc5_:CTBBeacon = null;
         var _loc1_:Array = this.sortArray[String(Hero.factionID)];
         var _loc2_:int = 0;
         while(_loc2_ < _loc1_.length)
         {
            _loc3_ = int(_loc1_[_loc2_]);
            if(_loc3_ == companyID)
            {
               _loc4_ = this.getBeaconByCompanyID(_loc1_[_loc2_ + 1]);
               if(_loc4_ != null)
               {
                  _loc4_.y = 11;
                  if(companyID != Hero.factionID)
                  {
                     _loc4_.setHighlight();
                  }
               }
               _loc5_ = this.getBeaconByCompanyID(_loc1_[_loc2_ + 2]);
               if(_loc5_ != null)
               {
                  _loc5_.y = 22;
               }
            }
            _loc2_ += 3;
         }
      }
      
      private function getBeacon(param1:int) : CTBBeacon
      {
         var _loc3_:CTBBeacon = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.rows.length)
         {
            _loc3_ = this.rows[_loc2_];
            if(param1 == _loc3_.getID())
            {
               return _loc3_;
            }
            _loc2_++;
         }
         return null;
      }
      
      private function getBeaconByCompanyID(param1:int) : CTBBeacon
      {
         var _loc3_:CTBBeacon = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.rows.length)
         {
            _loc3_ = this.rows[_loc2_];
            if(param1 == _loc3_.companyID)
            {
               return _loc3_;
            }
            _loc2_++;
         }
         return null;
      }
      
      public function get order() : int
      {
         return this._order;
      }
      
      public function set order(param1:int) : void
      {
         this._order = param1;
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import net.bigpoint.darkorbit.ResourceManager;
   
   public class CTBScoreGridElement extends SimpleElement
   {
      
      public function CTBScoreGridElement()
      {
         super(TYPE_CTB_SCORE_GRID);
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.addChild(_loc1_.getEmbededBitmap("ctb_table"));
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.ToolTipHook;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import mx.utils.StringUtil;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.BarStatus;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class InfoField extends SimpleElement
   {
      
      public static var FIELD_SEPERATOR:String = "|";
      
      public static var MODE_BAR:int = 0;
      
      public static var MODE_TEXT:int = 1;
      
      private var guiManager:GuiManager;
      
      private var icon:Bitmap;
      
      private var textField:TextField;
      
      private var viewMode:int = MODE_BAR;
      
      public var languageKey:String;
      
      private var textFieldWidth:int;
      
      private var barKeys:Array;
      
      private var counterBars:Array = [];
      
      private var barMask:Sprite = new Sprite();
      
      private var toolTipHook:ToolTipHook;
      
      private var bg:Bitmap;
      
      private var textColor:int;
      
      public var amountSearchPattern:RegExp;
      
      public function InfoField(param1:GuiManager, param2:int, param3:Bitmap, param4:int = -1, param5:Array = null, param6:String = null, param7:int = 0)
      {
         super(param2);
         this.guiManager = param1;
         this.icon = param3;
         if(param6 != null)
         {
            this.createTooltip(BPLocale.getText(param6));
         }
         this.languageKey = param6;
         this.barKeys = param5;
         this.textFieldWidth = param4;
         this.viewMode = param7;
         this.init();
      }
      
      public function setCounterbarVisibility(param1:int, param2:Boolean) : void
      {
         var _loc3_:Bitmap = this.counterBars[param1];
         _loc3_.visible = param2;
      }
      
      public function createTooltip(param1:String) : void
      {
         this.toolTipHook = TooltipControl.getInstance().addToolTip(this,param1);
      }
      
      public function updateIcon(param1:Bitmap) : void
      {
         this.removeChild(this.icon);
         this.icon = param1;
         this.addChild(this.icon);
      }
      
      public function setTextfieldPulse(param1:Number) : void
      {
         TweenMax.to(this.textField,param1,{
            "yoyo":true,
            "repeat":-1,
            "alpha":1,
            "ease":Linear.easeNone,
            "startAt":{"alpha":0.2}
         });
      }
      
      public function removeTextfieldPulse() : void
      {
         TweenMax.killTweensOf(this.textField);
         this.textField.alpha = 1;
      }
      
      public function init() : void
      {
         var _loc1_:Bitmap = null;
         var _loc2_:String = null;
         var _loc3_:Bitmap = null;
         addChild(this.icon);
         if(id == TYPE_CLAN_RANKED_CLAN_POINTS)
         {
            _loc1_ = ResourceManager.getBitmap("ui","cbInfoIcon_timer");
            _loc1_.name = "CLOCK_ICON";
            _loc1_.x = this.icon.width + 5;
            _loc1_.visible = false;
            addChild(_loc1_);
         }
         this.textField = new TextField();
         this.textField.defaultTextFormat = Styles.infoFieldFmt;
         this.textField.embedFonts = Styles.infoFieldEmbed;
         this.textField.antiAliasType = AntiAliasType.ADVANCED;
         this.textField.mouseEnabled = false;
         this.textField.selectable = false;
         this.textColor = int(Styles.infoFieldFmt.color);
         if(this.textFieldWidth == -1)
         {
            this.textField.autoSize = TextFieldAutoSize.LEFT;
         }
         else
         {
            this.textField.width = this.textFieldWidth;
            this.textField.defaultTextFormat = Styles.infoFieldFixedFmt;
         }
         this.textField.textColor = this.textColor;
         this.textField.height = 20;
         this.textField.x = this.icon.width + 5;
         this.textField.y = 2;
         if(this.barKeys != null)
         {
            this.bg = ResourceManager.getBitmap("ui","bar_background");
            this.bg.x = this.icon.width + 5;
            this.bg.y = this.icon.height / 2 - 13 / 2;
            this.addChild(this.bg);
            this.barMask.graphics.beginFill(16777215);
            this.barMask.graphics.drawRect(0,0,62,14);
            this.barMask.graphics.endFill();
            this.barMask.x = this.icon.width + 5;
            this.barMask.y = this.icon.height / 2 - 13 / 2;
            this.addChild(this.barMask);
            for each(_loc2_ in this.barKeys)
            {
               _loc3_ = ResourceManager.getBitmap("ui",_loc2_);
               _loc3_.x = this.icon.width + 5;
               _loc3_.y = this.icon.height / 2 - _loc3_.height / 2;
               this.counterBars.push(_loc3_);
            }
            this.addEventListener(MouseEvent.CLICK,this.onClick);
            this.buttonMode = true;
            this.guiManager.setBarListInfoField(this);
         }
         if(id == TYPE_CONFIGURATION)
         {
            this.addEventListener(MouseEvent.CLICK,this.handleConfigurationChange);
            this.buttonMode = true;
         }
         this.updateView();
      }
      
      public function cleanup() : void
      {
         if(this.id == TYPE_CONFIGURATION)
         {
            this.removeEventListener(MouseEvent.CLICK,this.handleConfigurationChange);
         }
         if(this.toolTipHook != null)
         {
            TooltipControl.getInstance().removeToolTip(this);
         }
      }
      
      private function handleConfigurationChange(param1:MouseEvent) : void
      {
         var _loc3_:int = 0;
         var _loc2_:Map = this.guiManager.getMain().screenManager.map;
         if(_loc2_ != null)
         {
            _loc3_ = Settings.selectedConfiguration;
            if(_loc3_ == 1)
            {
               _loc2_.getEventManager().selectConfiguration(2);
            }
            else if(_loc3_ == 2)
            {
               _loc2_.getEventManager().selectConfiguration(1);
            }
         }
      }
      
      private function onClick(param1:MouseEvent) : void
      {
         if(this.viewMode == MODE_BAR)
         {
            this.viewMode = MODE_TEXT;
         }
         else if(this.viewMode == MODE_TEXT)
         {
            this.viewMode = MODE_BAR;
         }
         this.updateView();
         this.guiManager.saveBarView();
         var _loc2_:BarStatus = this.guiManager.getBarStatus(this.id);
         if(_loc2_ != null)
         {
            _loc2_.status = this.viewMode;
         }
      }
      
      public function getViewMode() : int
      {
         return this.viewMode;
      }
      
      public function updateView() : void
      {
         var _loc1_:Bitmap = null;
         if(this.viewMode == MODE_BAR && this.barKeys != null)
         {
            for each(_loc1_ in this.counterBars)
            {
               this.addChild(_loc1_);
               _loc1_.alpha = 0;
               TweenLite.to(_loc1_,0.25,{"alpha":1});
            }
            if(this.bg != null)
            {
               if(!this.contains(this.bg))
               {
                  this.addChild(this.bg);
                  this.setChildIndex(this.bg,0);
               }
            }
            if(this.contains(this.textField))
            {
               this.removeChild(this.textField);
            }
         }
         else
         {
            for each(_loc1_ in this.counterBars)
            {
               if(_loc1_ != null && this.contains(_loc1_))
               {
                  this.removeChild(_loc1_);
               }
            }
            if(this.bg != null)
            {
               if(this.contains(this.bg))
               {
                  this.removeChild(this.bg);
               }
            }
            addChild(this.textField);
            this.textField.alpha = 0;
            TweenMax.to(this.textField,0.25,{"alpha":1});
         }
         if(this.textFieldWidth == -1)
         {
            this.textField.autoSize = TextFieldAutoSize.LEFT;
         }
      }
      
      public function setLabel(param1:String) : void
      {
         this.textField.text = StringUtil.trim(param1);
      }
      
      public function setColor(param1:int) : void
      {
         this.textColor = param1;
         this.textField.textColor = this.textColor;
      }
      
      public function setText(param1:String, param2:Boolean = true) : void
      {
         if(this.toolTipHook != null)
         {
            if(param2)
            {
               this.toolTipHook.updateText(BPLocale.getText(this.languageKey) + "\n" + param1);
            }
            else if(this.amountSearchPattern != null)
            {
               this.toolTipHook.updateText(BPLocale.getText(this.languageKey).replace(this.amountSearchPattern,param1));
            }
            else
            {
               this.toolTipHook.updateText(BPLocale.getText(this.languageKey));
            }
         }
      }
      
      public function updateTooltip(param1:String) : void
      {
         if(this.toolTipHook != null)
         {
            this.toolTipHook.updateText(param1);
         }
      }
      
      public function setCounterbar(param1:int, param2:int, param3:Boolean = true, param4:int = 0) : void
      {
         var _loc6_:Number = NaN;
         var _loc5_:Bitmap = this.counterBars[param4];
         _loc5_.mask = this.barMask;
         if(_loc5_ != null)
         {
            if(param2 == 0)
            {
               this.barMask.width = 62;
               return;
            }
            _loc6_ = param1 * 62 / param2;
            if(param3)
            {
               TweenLite.to(this.barMask,0.5,{"width":_loc6_});
            }
            else
            {
               this.barMask.width = _loc6_;
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import net.bigpoint.darkorbit.gui.GuiManager;
   
   public class InvasionScoreElement extends ScoreElement
   {
      
      public function InvasionScoreElement(param1:GuiManager, param2:int)
      {
         super(TYPE_INVASION_SCORE,param1,param2);
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.utils.BPLocale;
   import flash.events.TimerEvent;
   import flash.external.ExternalInterface;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.GuiManager;
   
   public class LogoutTextElement extends SimpleElement
   {
      
      private var guiManager:GuiManager;
      
      private var textField:TextField = new TextField();
      
      private var countdown:int;
      
      private var timer:Timer;
      
      private var msgTop:String;
      
      private var msgBottom:String;
      
      public function LogoutTextElement(param1:GuiManager)
      {
         super(SimpleElement.TYPE_LOGOUT_TEXT);
         this.guiManager = param1;
         this.init();
      }
      
      public function init() : void
      {
         var _loc1_:Array = BPLocale.getText("msg_logout_seconds").split("%SEC%");
         this.msgTop = _loc1_[0];
         this.msgBottom = _loc1_[1];
         var _loc2_:TextFormat = new TextFormat(Styles.plainBigFmt.font,Styles.plainBigFontHeight,16777215);
         _loc2_.align = TextFormatAlign.CENTER;
         this.textField.defaultTextFormat = _loc2_;
         this.textField.embedFonts = Styles.plainBigEmbed;
         this.textField.antiAliasType = AntiAliasType.ADVANCED;
         this.textField.autoSize = TextFieldAutoSize.CENTER;
         this.textField.wordWrap = true;
         this.textField.multiline = true;
         this.textField.width = 200;
         this.updateText();
         this.addChild(this.textField);
         this.timer = new Timer(1000,0);
         this.timer.addEventListener(TimerEvent.TIMER,this.onTimerTick);
         this.timer.addEventListener(TimerEvent.TIMER_COMPLETE,this.onTimerComplete);
      }
      
      public function startCountdown() : void
      {
         if(Hero.premium || Hero.admin)
         {
            this.countdown = 5;
         }
         else
         {
            this.countdown = 20;
         }
         this.timer.start();
         this.updateText();
      }
      
      public function stopCountdown() : void
      {
         this.timer.stop();
         this.timer.reset();
      }
      
      private function onTimerComplete() : void
      {
         var _loc1_:* = this.guiManager.getGlobalchat();
         if(_loc1_ != null)
         {
            _loc1_.cleanup();
         }
         if(ExternalInterface.available)
         {
            ExternalInterface.call("bpCloseWindow","");
         }
      }
      
      private function updateText() : void
      {
         this.textField.text = this.msgTop + "\n\n" + this.countdown + "\n\n" + this.msgBottom;
      }
      
      private function onTimerTick(param1:TimerEvent) : void
      {
         if(this.countdown > 0)
         {
            --this.countdown;
            this.updateText();
         }
      }
      
      public function cleanup() : void
      {
         this.timer.stop();
         this.timer.removeEventListener(TimerEvent.TIMER,this.onTimerTick);
         this.timer.removeEventListener(TimerEvent.TIMER_COMPLETE,this.onTimerComplete);
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import flash.display.Bitmap;
   import flash.display.Sprite;
   
   public class MapItem extends Sprite
   {
      
      public var id:int;
      
      public var price:int;
      
      public var mapName:String;
      
      public function MapItem(param1:int, param2:Bitmap)
      {
         super();
         this.id = param1;
         this.addChild(param2);
      }
      
      public function setPosition(param1:int, param2:int) : void
      {
         this.x = param1;
         this.y = param2;
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenMax;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.ui.Keyboard;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.elements.numericstepper.NumericStepperEvent;
   import net.bigpoint.darkorbit.gui.elements.numericstepper.TradeModuleNumericStepper;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.pattern.OrePattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   
   public class OreTradeModule extends SimpleElement
   {
      
      public static const logger:ILogger = Log.getLogger("OreTradeModule");
      
      private var guiManager:GuiManager;
      
      private var type:int;
      
      private var languageKey:String;
      
      private var stepper:TradeModuleNumericStepper;
      
      private var ore_module:MovieClip;
      
      private var oreTarget:MovieClip;
      
      private var orePrice:int;
      
      private var sellButton:ButtonElement;
      
      private var priceTextField:TextField;
      
      private var priceTextFieldWidth:int;
      
      private var priceTextFieldX:Number;
      
      private var gainTextField:TextField;
      
      private var gainTextFieldWidth:int;
      
      private var gainTextFieldX:Number;
      
      private var pricetagLanguageKey:String;
      
      private var pricetagTooltipKey:String;
      
      private var gaintagLanguageKey:String;
      
      private var notavailableLanguageKey:String;
      
      private var gaintagTooltipKey:String;
      
      private var ratioValues:Array = null;
      
      private var displayRatioMode:Boolean = false;
      
      public function OreTradeModule(param1:GuiManager, param2:int, param3:String, param4:String, param5:String, param6:String, param7:String, param8:String, param9:Boolean = false)
      {
         super(SimpleElement.TYPE_ORE_MODULE);
         this.guiManager = param1;
         this.type = param2;
         this.languageKey = param3;
         this.pricetagLanguageKey = param4;
         this.pricetagTooltipKey = param6;
         this.notavailableLanguageKey = param8;
         if(param5 != "")
         {
            this.gaintagLanguageKey = param5;
         }
         else
         {
            this.gaintagLanguageKey = param4;
         }
         this.gaintagTooltipKey = param7;
         this.displayRatioMode = param9;
         if(this.displayRatioMode)
         {
            this.ratioValues = [];
            this.ratioValues[0] = 1;
            this.ratioValues[1] = 0;
         }
         this.init();
      }
      
      private function init() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.ore_module = _loc1_.getEmbededMovieClip("trade_module_1");
         this.ore_module.mouseEnabled = Main.mouseEventsEnabled;
         this.priceTextField = this.ore_module["ore_price"];
         this.priceTextField.defaultTextFormat = Styles.strongStdFmt;
         this.priceTextField.embedFonts = true;
         this.priceTextField.text = "";
         this.priceTextFieldWidth = this.priceTextField.width;
         this.priceTextFieldX = this.priceTextField.x;
         this.gainTextField = this.ore_module["ore_gain"];
         this.gainTextField.defaultTextFormat = Styles.strongStdFmt;
         this.gainTextField.embedFonts = true;
         this.gainTextField.text = "";
         this.gainTextFieldWidth = this.gainTextField.width;
         this.gainTextFieldX = this.gainTextField.x;
         var _loc2_:MovieClip = new MovieClip();
         _loc2_.x = 8;
         _loc2_.y = 79;
         this.ore_module.addChild(_loc2_);
         this.stepper = new TradeModuleNumericStepper(this);
         this.stepper.setIncreaseStep(this.displayRatioMode ? int(this.ratioValues[1]) : 1);
         this.stepper.addEventListener(NumericStepperEvent.CHANGE,this.handleNumericStepperChange);
         _loc2_.addChild(this.stepper);
         addChild(this.ore_module);
         this.oreTarget = this.ore_module["_oreTarget"];
         var _loc3_:OrePattern = PatternManager.orePatterns[int(this.type)];
         var _loc4_:Bitmap = _loc1_.getEmbededBitmap(_loc3_.getResKey());
         _loc4_.x = this.oreTarget.width / 2 - _loc4_.width / 2;
         _loc4_.y = this.oreTarget.height / 2 - _loc4_.height / 2;
         this.oreTarget.addChild(_loc4_);
         if(this.type == OrePattern.ORE_PALLADIUM)
         {
            this.sellButton = new ButtonElement(ButtonElement.TYPE_TRADE_ORE,BPLocale.getText("out_trade"),_loc1_.getEmbededMovieClip("tradeButton"),Styles.tradeWindowButtonFmt,true);
            this.sellButton.addEventListener(MouseEvent.CLICK,this.handleTradeButtonClick);
         }
         else
         {
            this.sellButton = new ButtonElement(ButtonElement.TYPE_SELL_ORE,BPLocale.getText("out_verkaufen"),_loc1_.getEmbededMovieClip("sellButton"),Styles.tradeWindowButtonFmt,true);
            this.sellButton.addEventListener(MouseEvent.CLICK,this.handleSellButtonClick);
         }
         this.sellButton.y = 135;
         this.sellButton.x = 6;
         this.sellButton.width = 70;
         this.sellButton.height = 15;
         this.sellButton.setTextPosY(0);
         addChild(this.sellButton);
      }
      
      public function disableSellButton() : void
      {
         this.stepper.removeListeners();
         this.showSellButton(false);
      }
      
      public function enableSellButton() : void
      {
         this.stepper.addListeners();
         this.showSellButton(true);
      }
      
      public function showSellButton(param1:Boolean) : void
      {
         if(param1)
         {
            TweenMax.to(this,1,{"colorMatrixFilter":{"saturation":1}});
            this.sellButton.changeTextColour(16777215);
            this.sellButton.addButtonListeners();
            this.sellButton.setEnableStatus();
         }
         else
         {
            TweenMax.to(this,1,{"colorMatrixFilter":{"saturation":0}});
            this.sellButton.changeTextColour(10066329);
            this.sellButton.removeButtonListeners();
            this.sellButton.setDisableStatus();
         }
      }
      
      private function handleNumericStepperChange(param1:NumericStepperEvent) : void
      {
         var _loc2_:int = param1.value;
         this.updateOreGain();
      }
      
      public function setOrePrice(param1:int) : void
      {
         var _loc2_:String = null;
         this.orePrice = param1;
         this.prepareNumericStepper(param1);
         this.oreTarget.alpha = 1;
         if(!this.displayRatioMode)
         {
            _loc2_ = BPLocale.getText(this.pricetagLanguageKey).replace(/%VALUE%/,param1);
            if(this.pricetagTooltipKey != "")
            {
               TooltipControl.getInstance().removeToolTip(this.priceTextField);
               TooltipControl.getInstance().removeToolTip(this.oreTarget);
               TooltipControl.getInstance().addToolTip(this.priceTextField,BPLocale.getText(this.pricetagTooltipKey).replace(/%VALUE%/,param1));
               TooltipControl.getInstance().addToolTip(this.oreTarget,BPLocale.getText(this.pricetagTooltipKey).replace(/%VALUE%/,param1));
            }
         }
         else
         {
            this.ratioValues[1] = this.orePrice;
            if(param1 == -1)
            {
               this.disableSellButton();
               TooltipControl.getInstance().removeToolTip(this.priceTextField);
               TooltipControl.getInstance().removeToolTip(this.oreTarget);
               if(this.notavailableLanguageKey != "")
               {
                  TooltipControl.getInstance().addToolTip(this.priceTextField,BPLocale.getText(this.notavailableLanguageKey).replace(/%VALUE%/,param1));
                  TooltipControl.getInstance().addToolTip(this.oreTarget,BPLocale.getText(this.notavailableLanguageKey).replace(/%VALUE%/,param1));
               }
               this.oreTarget.alpha = 0.5;
               _loc2_ = "";
            }
            else
            {
               this.enableSellButton();
               _loc2_ = BPLocale.getText(this.pricetagLanguageKey).replace(/%VALUE_OUTPUT%/,this.ratioValues[0]).replace(/%VALUE_INPUT%/,this.ratioValues[1]);
               if(this.pricetagTooltipKey != "")
               {
                  TooltipControl.getInstance().removeToolTip(this.priceTextField);
                  TooltipControl.getInstance().removeToolTip(this.oreTarget);
                  TooltipControl.getInstance().addToolTip(this.priceTextField,BPLocale.getText(this.pricetagTooltipKey).replace(/%VALUE_OUTPUT%/,this.ratioValues[0]).replace(/%VALUE_INPUT%/,this.ratioValues[1]));
                  TooltipControl.getInstance().addToolTip(this.oreTarget,BPLocale.getText(this.pricetagTooltipKey).replace(/%VALUE_OUTPUT%/,this.ratioValues[0]).replace(/%VALUE_INPUT%/,this.ratioValues[1]));
               }
               this.stepper.setIncreaseStep(this.displayRatioMode ? int(this.ratioValues[1]) : 1);
            }
         }
         this.priceTextField.text = "";
         this.priceTextField.autoSize = TextFieldAutoSize.NONE;
         this.priceTextField.width = this.priceTextFieldWidth;
         this.priceTextField.x = this.priceTextFieldX;
         BPLocale.distillAndWrite(_loc2_,this.priceTextField,TextFieldAutoSize.CENTER);
      }
      
      public function prepareNumericStepper(param1:int) : void
      {
         if(param1 < 0)
         {
            if(!this.displayRatioMode)
            {
               this.sellButton.visible = false;
               this.stepper.visible = false;
               this.stepper.removeListeners();
            }
            else
            {
               this.sellButton.visible = true;
               this.stepper.visible = true;
               this.stepper.addListeners();
            }
         }
         else
         {
            this.sellButton.visible = true;
            this.stepper.visible = true;
            this.stepper.addListeners();
         }
      }
      
      public function setOreCount(param1:int) : void
      {
         if(this.orePrice > 0 || this.displayRatioMode)
         {
            this.stepper.setOreAmount(param1,this.orePrice);
         }
         this.updateOreGain();
      }
      
      private function updateOreGain() : void
      {
         var _loc3_:String = null;
         var _loc1_:int = 0;
         var _loc2_:int = 0;
         if(this.displayRatioMode && int(this.ratioValues[1]) > 0)
         {
            _loc1_ = this.stepper.getValue();
            _loc2_ = this.getCorrectlyRoundedValue(this.stepper.getValue() / int(this.ratioValues[1]));
            _loc3_ = BPLocale.getText(this.gaintagLanguageKey).replace(/%VALUE%/,BPLocale.roundInteger(_loc2_));
            this.gainTextField.text = "";
            this.gainTextField.autoSize = TextFieldAutoSize.NONE;
            this.gainTextField.width = this.gainTextFieldWidth;
            this.gainTextField.x = this.gainTextFieldX;
            BPLocale.distillAndWrite(_loc3_,this.gainTextField,TextFieldAutoSize.CENTER);
            if(this.gaintagTooltipKey != "")
            {
               TooltipControl.getInstance().removeToolTip(this.gainTextField);
               if(_loc2_ > 0)
               {
                  TooltipControl.getInstance().addToolTip(this.gainTextField,BPLocale.getText(this.gaintagTooltipKey).replace(/%VALUE_OUTPUT%/,_loc2_).replace(/%VALUE_INPUT%/,_loc1_));
               }
            }
            return;
         }
         if(Boolean(this.ratioValues) && int(this.ratioValues[1]) < 0)
         {
            this.gainTextField.text = "";
            TooltipControl.getInstance().removeToolTip(this.gainTextField);
         }
         if(this.orePrice > 0)
         {
            _loc1_ = this.stepper.getValue();
            _loc2_ = this.orePrice * this.stepper.getValue();
            _loc3_ = BPLocale.getText(this.gaintagLanguageKey).replace(/%VALUE%/,BPLocale.roundInteger(_loc2_));
            this.gainTextField.text = "";
            this.gainTextField.autoSize = TextFieldAutoSize.NONE;
            this.gainTextField.width = this.gainTextFieldWidth;
            this.gainTextField.x = this.gainTextFieldX;
            BPLocale.distillAndWrite(_loc3_,this.gainTextField,TextFieldAutoSize.CENTER);
            if(this.gaintagTooltipKey != "")
            {
               TooltipControl.getInstance().removeToolTip(this.gainTextField);
               if(_loc2_ > 0)
               {
                  TooltipControl.getInstance().addToolTip(this.gainTextField,BPLocale.getText(this.gaintagTooltipKey).replace(/%VALUE_OUTPUT%/,_loc2_).replace(/%VALUE_INPUT%/,_loc1_));
               }
            }
         }
      }
      
      private function getCorrectlyRoundedValue(param1:Number) : int
      {
         if(param1 % 1 == 0)
         {
            return param1;
         }
         return Math.floor(param1);
      }
      
      private function handleSellButtonClick(param1:MouseEvent) : void
      {
         var _loc2_:int = this.stepper.getValue();
         if(_loc2_ < 1)
         {
            return;
         }
         this.stepper.dispatchEvent(new KeyboardEvent(KeyboardEvent.KEY_DOWN,true,false,Keyboard.ENTER,Keyboard.ENTER));
         this.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.SELL_ORE,[this.type,_loc2_.toString()]);
      }
      
      private function handleTradeButtonClick(param1:MouseEvent) : void
      {
         var _loc2_:int = this.stepper.getValue();
         if(_loc2_ < 1)
         {
            return;
         }
         this.stepper.dispatchEvent(new KeyboardEvent(KeyboardEvent.KEY_DOWN,true,false,Keyboard.ENTER,Keyboard.ENTER));
         var _loc3_:String = this.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.EXCHANGE_PALLADIUM,[_loc2_]);
      }
      
      public function getType() : int
      {
         return this.type;
      }
      
      public function getMC() : MovieClip
      {
         return this.ore_module;
      }
      
      public function cleanup() : void
      {
         if(this.sellButton != null)
         {
            if(this.type == OrePattern.ORE_PALLADIUM)
            {
               this.sellButton.removeEventListener(MouseEvent.CLICK,this.handleSellButtonClick);
            }
            else
            {
               this.sellButton.removeEventListener(MouseEvent.CLICK,this.handleTradeButtonClick);
            }
         }
         if(this.stepper != null)
         {
            this.stepper.removeListeners();
            this.stepper.removeEventListener(NumericStepperEvent.CHANGE,this.handleNumericStepperChange);
         }
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.GuiManager;
   
   public class ScoreElement extends SimpleElement
   {
      
      public static var COMPANY_TYPE_MMO:int = 1;
      
      public static var COMPANY_TYPE_EIC:int = 2;
      
      public static var COMPANY_TYPE_VRU:int = 3;
      
      protected var guiManager:GuiManager;
      
      protected var companyID:int;
      
      private var background:BitmapData;
      
      private var tfCompany:TextField;
      
      private var tfScore:TextField;
      
      public function ScoreElement(param1:int, param2:GuiManager, param3:int)
      {
         super(param1);
         this.guiManager = param2;
         this.companyID = param3;
         this.init();
      }
      
      private function init() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         if(getID() == TYPE_SPACEBALL_SCORE)
         {
            this.background = _loc1_.getEmbededBitmapData("spaceball_" + this.companyID);
         }
         else if(getID() == TYPE_INVASION_SCORE)
         {
            this.background = _loc1_.getEmbededBitmapData("invasion_" + this.companyID);
         }
         else if(getID() == TYPE_CTB_SCORE)
         {
            this.background = _loc1_.getEmbededBitmapData("ctb_" + this.companyID);
         }
         else if(getID() == TYPE_TDM_LEFT_SCORE)
         {
            this.background = _loc1_.getEmbededBitmapData("tdm_scoreboard_left_" + this.companyID);
         }
         else if(getID() == TYPE_TDM_RIGHT_SCORE)
         {
            this.background = _loc1_.getEmbededBitmapData("tdm_scoreboard_right_" + this.companyID);
         }
         this.addChild(new Bitmap(this.background));
         this.tfCompany = new TextField();
         this.tfCompany.defaultTextFormat = Styles.spaceballScoreFmt;
         this.tfCompany.embedFonts = Styles.spaceballScoreEmbed;
         this.tfCompany.antiAliasType = AntiAliasType.ADVANCED;
         this.tfCompany.mouseEnabled = false;
         this.tfCompany.selectable = false;
         this.tfCompany.width = this.background.width;
         this.tfCompany.height = Styles.spaceballScoreFontHeight + 5;
         this.tfCompany.multiline = false;
         this.tfCompany.y = 1;
         switch(this.companyID)
         {
            case COMPANY_TYPE_MMO:
               this.tfCompany.text = "MMO";
               break;
            case COMPANY_TYPE_EIC:
               this.tfCompany.text = "EIC";
               break;
            case COMPANY_TYPE_VRU:
               this.tfCompany.text = "VRU";
         }
         this.addChild(this.tfCompany);
         this.tfScore = new TextField();
         this.tfScore.defaultTextFormat = Styles.spaceballScoreFmt;
         this.tfScore.embedFonts = Styles.spaceballScoreEmbed;
         this.tfScore.antiAliasType = AntiAliasType.ADVANCED;
         this.tfScore.mouseEnabled = false;
         this.tfScore.selectable = false;
         this.tfScore.width = this.background.width;
         this.tfScore.height = Styles.spaceballScoreFontHeight + 5;
         this.tfScore.multiline = false;
         this.tfScore.y = 13;
         this.addChild(this.tfScore);
      }
      
      public function updateScore(param1:Number) : void
      {
         this.tfScore.text = BPLocale.roundInteger(param1);
      }
      
      public function getBackground() : BitmapData
      {
         return this.background;
      }
      
      public function getCompanyID() : int
      {
         return this.companyID;
      }
      
      public function setTitleYPosition(param1:int) : void
      {
         this.tfCompany.y = param1;
      }
      
      public function setScoreYPosition(param1:int) : void
      {
         this.tfScore.y = param1;
      }
      
      public function getGuiManager() : GuiManager
      {
         return this.guiManager;
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import mx.logging.ILogger;
   import mx.logging.Log;
   
   public class SettingsField
   {
      
      public static const logger:ILogger = Log.getLogger("SettingsField");
      
      public static const TYPE_AUTO_BOOST:int = 1;
      
      public static const TYPE_SHOW_PLAYERNAMES:int = 5;
      
      public static const TYPE_SHOW_RESOURCES:int = 8;
      
      public static const TYPE_SHOW_BONUS_BOXES:int = 9;
      
      public static const TYPE_SHOW_HITPOINT_BUBBLES:int = 12;
      
      public static const TYPE_DISPLAY_NOTIFICATIONS:int = 13;
      
      public static const TYPE_SHOW_CHAT:int = 14;
      
      public static const TYPE_PLAY_MUSIC:int = 15;
      
      public static const TYPE_PLAY_SFX:int = 16;
      
      public static const TYPE_SHOW_DRONES:int = 18;
      
      public static const TYPE_SHOW_FREE_CARGO_BOXES:int = 20;
      
      public static const TYPE_SHOW_NOT_FREE_CARGO_BOXES:int = 21;
      
      public static const TYPE_AUTO_AMMUNITION_CHANGE:int = 22;
      
      public static const TYPE_AUTO_REFINEMENT:int = 25;
      
      public static const TYPE_QUICKSLOT_STOP_ATTACK:int = 26;
      
      public static const TYPE_AUTOSTART:int = 27;
      
      public static const TYPE_DOUBLECLICK_ATTACK:int = 28;
      
      public static const TYPE_DISPLAY_WINDOW_BACKGROUND:int = 29;
      
      public static const TYPE_ALWAYS_DRAGGABLE_WINDOWS:int = 30;
      
      public static const TYPE_PELOAD_USER_SHIPS:int = 31;
      
      public static const TYPE_RESOLUTION:int = 32;
      
      public static const TYPE_QUALITY_PRESETTING:int = 33;
      
      public static const TYPE_QUALITY_CUSTOMIZED:int = 34;
      
      public static const TYPE_QUALITY_BACKGROUND:int = 35;
      
      public static const TYPE_QUALITY_POIZONE:int = 36;
      
      public static const TYPE_QUALITY_SHIP:int = 37;
      
      public static const TYPE_QUALITY_ENGINE:int = 38;
      
      public static const TYPE_QUALITY_COLLECTABLE:int = 39;
      
      public static const TYPE_QUALITY_ATTACK:int = 40;
      
      public static const TYPE_QUALITY_EFFECT:int = 41;
      
      public static const TYPE_QUALITY_EXPLOSION:int = 42;
      
      public function SettingsField()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import flash.display.DisplayObject;
   import flash.display.Sprite;
   
   public class SimpleElement extends Sprite
   {
      
      public static const TYPE_SIMPLE_BUTTON:int = 0;
      
      public static const TYPE_CHECKBOX:int = 1;
      
      public static const TYPE_LOG_TEXTAREA:int = 2;
      
      public static const TYPE_LOGOUT_TEXT:int = 3;
      
      public static const TYPE_ORE_MODULE:int = 4;
      
      public static const TYPE_WEBLINK_MODULE:int = 5;
      
      public static const TYPE_MINIMAP_LABEL:int = 6;
      
      public static const TYPE_RESOLUTION_CHANGER:int = 7;
      
      public static const TYPE_CONNECTION_LOST:int = 8;
      
      public static const TYPE_SPACEMAP:int = 9;
      
      public static const TYPE_TEXT:int = 10;
      
      public static const TYPE_CONNECTION:int = 11;
      
      public static const TYPE_BOOSTER:int = 12;
      
      public static const TYPE_SPACEBALL_SCORE:int = 13;
      
      public static const TYPE_INVASION_SCORE:int = 14;
      
      public static const TYPE_CTB_SCORE:int = 15;
      
      public static const TYPE_CTB_SCORE_GRID:int = 16;
      
      public static const TYPE_OPONNENT_USERID:int = 17;
      
      public static const TYPE_OPONNENT_SHIPTYPE:int = 18;
      
      public static const TYPE_OPONNENT_HITPOINTS:int = 19;
      
      public static const TYPE_OPONNENT_SHIELD:int = 18;
      
      public static const TYPE_OPONNENT_CARGO:int = 19;
      
      public static const TYPE_EXPERIENCE:int = 20;
      
      public static const TYPE_LEVEL:int = 21;
      
      public static const TYPE_HONOR:int = 22;
      
      public static const TYPE_HITPOINTS:int = 23;
      
      public static const TYPE_SHIELD:int = 24;
      
      public static const TYPE_CARGO:int = 25;
      
      public static const TYPE_LASER:int = 26;
      
      public static const TYPE_ROCKETS:int = 27;
      
      public static const TYPE_CONFIGURATION:int = 28;
      
      public static const TYPE_CREDITS:int = 29;
      
      public static const TYPE_JACKPOT:int = 30;
      
      public static const TYPE_URIDIUM:int = 31;
      
      public static const TYPE_BOOTY_KEYS:int = 86;
      
      public static const TYPE_JUMP_VOUCHERS:int = 87;
      
      public static const TYPE_BOOSTER_1:int = 32;
      
      public static const TYPE_BOOSTER_2:int = 33;
      
      public static const TYPE_BOOSTER_3:int = 34;
      
      public static const TYPE_BOOSTER_4:int = 35;
      
      public static const TYPE_BOOSTER_5:int = 36;
      
      public static const TYPE_BOOSTER_6:int = 37;
      
      public static const TYPE_BOOSTER_7:int = 38;
      
      public static const TYPE_BOOSTER_8:int = 39;
      
      public static const TYPE_BOOSTER_9:int = 83;
      
      public static const TYPE_BOOSTER_10:int = 84;
      
      public static const TYPE_TDM_TIMER:int = 40;
      
      public static const TYPE_TDM_GAMES:int = 41;
      
      public static const TYPE_TDM_QUEUE:int = 42;
      
      public static const TYPE_TDM_LEFT_SCORE:int = 43;
      
      public static const TYPE_TDM_RIGHT_SCORE:int = 44;
      
      public static const TYPE_CHAT:int = 45;
      
      public static const TYPE_REFINEMENT_MODULE:int = 46;
      
      public static const TYPE_COMBO_BOX_ELEMENT:int = 47;
      
      public static const TYPE_DEFAULT_ELEMENT:int = 48;
      
      public static const TYPE_VIDEO_ELEMENT:int = 49;
      
      public static const TYPE_ACHIEVEMENT:int = 50;
      
      public static const TYPE_TECH:int = 51;
      
      public static const CURRENT_IP:int = 52;
      
      public static const NEXT_IP:int = 53;
      
      public static const CURRENT_MAP:int = 54;
      
      public static const NEXT_MAP:int = 55;
      
      public static const CURRENT_PORT:int = 56;
      
      public static const CONNECTION_STATUS:int = 57;
      
      public static const NUMBER_OF_TRIES:int = 58;
      
      public static const CONNECT_PENDING_STATUS:int = 59;
      
      public static var PET_WINDOW_HP_BAR:int = 60;
      
      public static var PET_WINDOW_XP_BAR:int = 61;
      
      public static var PET_WINDOW_SHIELD_BAR:int = 62;
      
      public static var PET_WINDOW_FUEL_BAR:int = 63;
      
      public static var PET_WINDOW_PETNAME_TEXT:int = 64;
      
      public static const PET_WINDOW_PLAY_BTN:int = 65;
      
      public static const PET_WINDOW_STOP_BTN:int = 66;
      
      public static const PET_WINDOW_REPAIR_BTN:int = 67;
      
      public static const PET_WINDOW_FUEL_BTN:int = 68;
      
      public static const PET_WINDOW_EXPAND_BTN:int = 69;
      
      public static const PET_WINDOW_BUFF_CONTAINER:int = 70;
      
      public static const PET_WINDOW_IMAGE_CONTAINER:int = 71;
      
      public static const PET_WINDOW_GEAR_COMBO_CONTAINER:int = 72;
      
      public static const PET_WINDOW_BANNER_CONTAINER:int = 73;
      
      public static const ADVANCED_SPACEMAP_SYSTEM_1:int = 74;
      
      public static const ADVANCED_SPACEMAP_SYSTEM_2:int = 75;
      
      public static const ADVANCED_SPACEMAP_SYSTEM_SWITCHER:int = 76;
      
      public static const ADVANCED_SPACEMAP_BOTTOM_BAR:int = 77;
      
      public static const ADVANCED_SPACEMAP_JUMP_INFO_DISPLAY:int = 78;
      
      public static const ADVANCED_SPACEMAP_JUMP_PRICE_DISPLAY:int = 79;
      
      public static const ADVANCED_SPACEMAP_JUMP_BUTTON:int = 80;
      
      public static const ADVANCED_SPACEMAP_JUMP_VOUCHER_LABEL:int = 85;
      
      public static const TYPE_RANKED_HUNT_POINTS:int = 81;
      
      public static const TYPE_CLAN_RANKED_CLAN_POINTS:int = 82;
      
      public static const TYPE_COMBOBOX:int = 88;
      
      public static const TYPE_SLIDER:int = 89;
      
      protected var id:int;
      
      public function SimpleElement(param1:int)
      {
         super();
         this.id = param1;
         this.cacheAsBitmap = true;
      }
      
      public function getID() : int
      {
         return this.id;
      }
      
      public function getParent() : DisplayObject
      {
         return this.parent;
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.MovieClip;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.gui.GuiManager;
   
   public class SpaceballScoreElement extends ScoreElement
   {
      
      private var spaceball_speed:MovieClip;
      
      public function SpaceballScoreElement(param1:GuiManager, param2:int)
      {
         super(TYPE_SPACEBALL_SCORE,param1,param2);
         var _loc3_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.spaceball_speed = _loc3_.getEmbededMovieClip("spaceball_speed");
         this.spaceball_speed.mouseEnabled = Main.mouseEventsEnabled;
         this.spaceball_speed.mouseChildren = Main.mouseEventsEnabled;
         this.spaceball_speed.gotoAndStop(1);
         this.spaceball_speed.x = 15;
         this.spaceball_speed.y = 29;
         this.addChild(this.spaceball_speed);
      }
      
      public function setSpeed(param1:int) : void
      {
         this.spaceball_speed.gotoAndStop(param1 + 1);
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import flash.geom.Point;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFormat;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.map.Map;
   
   public class SpacemapElement extends SimpleElement
   {
      
      private var guiManager:GuiManager;
      
      private var blink_0:MovieClip;
      
      private var blink_1:MovieClip;
      
      private var positions:Array = [];
      
      private var mapContainer:MovieClip;
      
      private var textField:TextField;
      
      public function SpacemapElement(param1:GuiManager)
      {
         super(TYPE_SPACEMAP);
         this.guiManager = param1;
      }
      
      public function init(param1:Array) : void
      {
         this.positions = param1;
         this.mapContainer = new MovieClip();
         this.mapContainer.mouseEnabled = Main.mouseEventsEnabled;
         this.mapContainer.mouseChildren = Main.mouseEventsEnabled;
         this.addChild(this.mapContainer);
         var _loc2_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("spacemap"));
         this.blink_0 = _loc2_.getEmbededMovieClip("blink_0");
         this.blink_0.mouseEnabled = Main.mouseEventsEnabled;
         this.blink_1 = _loc2_.getEmbededMovieClip("blink_1");
         this.blink_1.mouseEnabled = Main.mouseEventsEnabled;
         this.addChild(this.blink_0);
         this.addChild(this.blink_1);
         this.textField = new TextField();
         var _loc3_:TextFormat = new TextFormat(Styles.simpleFmt.font,Styles.simpleFmt.size,16777215);
         this.textField.defaultTextFormat = _loc3_;
         this.textField.embedFonts = Styles.simpleEmbed;
         this.textField.wordWrap = true;
         this.textField.antiAliasType = AntiAliasType.ADVANCED;
         this.textField.text = BPLocale.getText("noSpacemapData");
         this.addChild(this.textField);
         this.update();
      }
      
      public function update() : void
      {
         var _loc4_:SWFFinisher = null;
         var _loc5_:Bitmap = null;
         var _loc6_:int = 0;
         var _loc7_:Point = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.mapContainer.numChildren)
         {
            this.mapContainer.removeChild(this.mapContainer.getChildAt(_loc1_));
            _loc1_++;
         }
         var _loc2_:int = -1;
         var _loc3_:Map = this.guiManager.getMain().screenManager.map;
         if(_loc3_ != null)
         {
            _loc2_ = _loc3_.getCurrentStarSystemIndex();
         }
         if(_loc2_ != -1)
         {
            _loc4_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("spacemap"));
            _loc5_ = _loc4_.getEmbededBitmap("normal_page_" + _loc3_.getCurrentStarSystemIndex());
            _loc5_.x = 10;
            this.mapContainer.addChild(_loc5_);
            this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP).setDimension(_loc5_.width + 12,_loc5_.height + 34);
            _loc6_ = _loc3_.getMapID();
            _loc7_ = this.positions[_loc6_];
            if(_loc6_ == 16 || _loc6_ == 29)
            {
               this.blink_1.visible = true;
               this.blink_0.visible = false;
            }
            else
            {
               this.blink_1.visible = false;
               this.blink_0.visible = true;
            }
            this.textField.visible = false;
            this.blink_0.x = _loc7_.x + 10;
            this.blink_0.y = _loc7_.y;
            this.blink_1.x = _loc7_.x + 10;
            this.blink_1.y = _loc7_.y;
         }
         else
         {
            this.blink_1.visible = false;
            this.blink_0.visible = false;
            this.textField.visible = true;
            this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP).setDimension(300,150);
            this.textField.width = 280;
            this.textField.height = 100;
            this.textField.x = 8;
            this.textField.y = 8;
         }
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import fl.transitions.easing.None;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.geom.Point;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFieldType;
   import net.bigpoint.darkorbit.InGameCatalog;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.net.ConnectionManager;
   import net.bigpoint.darkorbit.net.ServerCommands;
   
   public class StarSystemView extends Sprite
   {
      
      private var maps:Array = [];
      
      private var finisher:SWFFinisher;
      
      private var connectionManager:ConnectionManager;
      
      public var lastSelectedMapForJump:MapItem;
      
      private var tween:TweenLite;
      
      public var idleSystem:Boolean = false;
      
      public function StarSystemView()
      {
         super();
      }
      
      public function init(param1:Array, param2:Array, param3:String) : void
      {
         var _loc4_:MapItem = null;
         var _loc5_:Bitmap = null;
         var _loc6_:int = 0;
         var _loc7_:Point = null;
         this.finisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("spacemap"));
         this.addChild(this.finisher.getEmbededBitmap(param3));
         var _loc8_:int = 0;
         while(_loc8_ < param1.length)
         {
            _loc6_ = int(param1[_loc8_]);
            _loc7_ = Point(param2[_loc6_]);
            _loc5_ = this.finisher.getEmbededBitmap("map_" + _loc6_);
            _loc4_ = new MapItem(_loc6_,_loc5_);
            _loc4_.setPosition(_loc7_.x + 1,_loc7_.y + 1);
            this.maps[_loc6_] = _loc4_;
            this.addChild(_loc4_);
            this.setBlock(_loc4_);
            _loc8_++;
         }
      }
      
      public function update(param1:int, param2:Array, param3:Array, param4:Array) : void
      {
         var _loc5_:MapItem = null;
         this.removeListeners();
         var _loc6_:int = 0;
         while(_loc6_ < this.maps.length)
         {
            _loc5_ = this.maps[_loc6_];
            if(_loc5_ != null)
            {
               this.cleanup(_loc5_);
            }
            _loc6_++;
         }
         this.setCurrentMap(param1);
         this.setUriLockedMaps(param4);
         this.setLevelLockedMaps(param3);
         this.setAvailableMaps(param2);
         this.setSystemActive();
      }
      
      private function cleanup(param1:MapItem) : void
      {
         var _loc2_:int = 0;
         if(param1.numChildren > 1)
         {
            _loc2_ = 1;
            while(_loc2_ < param1.numChildren - 1)
            {
               param1.removeChildAt(_loc2_);
               _loc2_++;
            }
         }
      }
      
      private function setAvailableMaps(param1:Array) : void
      {
         var _loc3_:Array = null;
         var _loc4_:Array = null;
         var _loc5_:MapItem = null;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc9_:int = 0;
         var _loc2_:Array = [];
         var _loc8_:int = 0;
         while(_loc8_ < param1.length)
         {
            _loc3_ = param1[_loc8_];
            _loc6_ = int(_loc3_[0]);
            _loc4_ = _loc3_[1];
            _loc9_ = 0;
            while(_loc9_ < _loc4_.length)
            {
               _loc7_ = int(_loc4_[_loc9_]);
               _loc2_.push(_loc7_);
               _loc5_ = this.getMap(_loc7_);
               if(_loc5_ != null)
               {
                  _loc5_.mapName = InGameCatalog.getInstance().mapNames[_loc7_];
                  _loc5_.price = _loc6_;
                  this.setAvailable(_loc5_);
               }
               _loc9_++;
            }
            _loc8_++;
         }
         this.addListeners(_loc2_);
      }
      
      private function setUriLockedMaps(param1:Array) : void
      {
         var _loc2_:MapItem = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         while(_loc4_ < param1.length)
         {
            _loc3_ = int(param1[_loc4_]);
            _loc2_ = this.getMap(_loc3_);
            if(_loc2_ != null)
            {
               _loc2_.mapName = InGameCatalog.getInstance().mapNames[_loc3_];
               _loc2_.price = -1;
               this.setUriLock(_loc2_);
            }
            _loc4_++;
         }
      }
      
      private function setLevelLockedMaps(param1:Array) : void
      {
         var _loc2_:MapItem = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         while(_loc4_ < param1.length)
         {
            _loc3_ = int(param1[_loc4_]);
            _loc2_ = this.getMap(_loc3_);
            if(_loc2_ != null)
            {
               _loc2_.mapName = InGameCatalog.getInstance().mapNames[_loc3_];
               _loc2_.price = -1;
               this.setLevelLock(_loc2_);
            }
            _loc4_++;
         }
      }
      
      public function setSelectedMapForJump(param1:int) : void
      {
         var _loc2_:MapItem = null;
         if(this.getMap(param1) != null)
         {
            if(this.lastSelectedMapForJump != null)
            {
               _loc2_ = this.getMap(this.lastSelectedMapForJump.id);
               if(_loc2_.numChildren > 2)
               {
                  _loc2_.removeChildAt(2);
               }
            }
            _loc2_ = this.getMap(param1);
            if(_loc2_ != null)
            {
               this.lastSelectedMapForJump = _loc2_;
               this.lastSelectedMapForJump.addChild(this.getLoaderAsset());
            }
         }
      }
      
      public function startCastingCostTick(param1:int, param2:int) : void
      {
         var _loc3_:Sprite = null;
         var _loc4_:TextField = null;
         var _loc5_:Sprite = null;
         if(this.getMap(param2) != null)
         {
            _loc3_ = Sprite(this.lastSelectedMapForJump.getChildAt(2));
            _loc4_ = _loc3_.getChildAt(1) as TextField;
            _loc5_ = _loc3_.getChildAt(0) as Sprite;
            if(param1 > -1)
            {
               this.idleSystem = true;
               this.tween = TweenLite.to(_loc5_,param1,{
                  "ease":None.easeNone,
                  "rotation":-180 * param1,
                  "onUpdate":this.setText,
                  "onUpdateParams":[_loc4_]
               });
            }
            else
            {
               this.idleSystem = false;
               TweenLite.killTweensOf(_loc5_);
               _loc3_.getChildAt(1).rotation = 0;
               TextField(_loc3_.getChildAt(1)).text = "";
            }
         }
      }
      
      private function setSystemActive() : void
      {
         this.idleSystem = false;
      }
      
      private function setText(param1:TextField) : void
      {
         param1.text = (this.tween.duration - Math.round(this.tween.currentTime)).toString();
      }
      
      private function getLoaderAsset() : Sprite
      {
         var _loc1_:Sprite = new Sprite();
         var _loc2_:Sprite = new Sprite();
         var _loc3_:Bitmap = this.finisher.getEmbededBitmap("jump_cpu_loading_animation");
         _loc3_.cacheAsBitmap = true;
         _loc3_.x = -_loc3_.width * 0.5;
         _loc3_.y = -_loc3_.height * 0.5;
         _loc2_.x = this.lastSelectedMapForJump.width * 0.5;
         _loc2_.y = this.lastSelectedMapForJump.height * 0.5;
         _loc2_.addChild(_loc3_);
         var _loc4_:TextField = new TextField();
         _loc4_.defaultTextFormat = Styles.h2Fmt;
         _loc4_.setTextFormat(Styles.h2Fmt);
         _loc4_.type = TextFieldType.DYNAMIC;
         _loc4_.textColor = 15327936;
         _loc4_.embedFonts = true;
         _loc4_.autoSize = TextFieldAutoSize.CENTER;
         _loc4_.antiAliasType = AntiAliasType.ADVANCED;
         _loc4_.selectable = false;
         _loc4_.width = 40;
         _loc4_.x = this.lastSelectedMapForJump.width * 0.5 - 2;
         _loc4_.y = Math.round(this.lastSelectedMapForJump.height * 0.3);
         if(this.lastSelectedMapForJump.height > 50)
         {
            _loc4_.y = Math.round(this.lastSelectedMapForJump.height * 0.3) + 15;
         }
         _loc1_.addChild(_loc2_);
         _loc1_.addChild(_loc4_);
         return _loc1_;
      }
      
      private function setAvailable(param1:MapItem) : void
      {
         this.addAsset(param1,null);
      }
      
      private function setLevelLock(param1:MapItem) : void
      {
         var _loc2_:Bitmap = this.finisher.getEmbededBitmap("marker_level_locked");
         this.addAsset(param1,_loc2_);
      }
      
      public function setUriLock(param1:MapItem) : void
      {
         var _loc2_:Bitmap = this.finisher.getEmbededBitmap("marker_uri_locked");
         this.addAsset(param1,_loc2_);
      }
      
      private function setBlock(param1:MapItem) : void
      {
         var _loc2_:Bitmap = this.finisher.getEmbededBitmap("marker_blocked");
         this.addAsset(param1,_loc2_);
      }
      
      public function setCurrentMap(param1:int) : void
      {
         var _loc3_:Bitmap = null;
         this.lastSelectedMapForJump = null;
         var _loc2_:MapItem = this.getMap(param1);
         if(_loc2_ != null)
         {
            _loc3_ = this.finisher.getEmbededBitmap("marker_currentMap");
            this.addAsset(_loc2_,_loc3_);
         }
      }
      
      private function addAsset(param1:MapItem, param2:Bitmap = null) : void
      {
         if(param1.numChildren > 1)
         {
            param1.removeChildAt(1);
         }
         var _loc3_:Sprite = new Sprite();
         _loc3_.graphics.beginFill(0,0);
         _loc3_.graphics.drawRect(0,0,param1.width,param1.height);
         _loc3_.graphics.endFill();
         if(param2 != null)
         {
            param2.x = (param1.width - param2.width) * 0.5;
            param2.y = (param1.height - param2.height) * 0.5;
            _loc3_.addChild(param2);
         }
         _loc3_.mouseChildren = false;
         _loc3_.mouseEnabled = false;
         param1.addChild(_loc3_);
         param1.useHandCursor = true;
         param1.buttonMode = true;
      }
      
      public function setPosition(param1:int, param2:int) : void
      {
         this.x = param1;
         this.y = param2;
      }
      
      public function getMap(param1:int) : MapItem
      {
         return this.maps[param1] as MapItem;
      }
      
      public function addListeners(param1:Array) : void
      {
         var _loc2_:MapItem = null;
         var _loc3_:int = 0;
         while(_loc3_ < param1.length)
         {
            _loc2_ = this.getMap(param1[_loc3_]);
            if(_loc2_ != null)
            {
               _loc2_.addEventListener(MouseEvent.CLICK,this.handleMapItemClicked);
            }
            _loc3_++;
         }
      }
      
      public function removeListeners() : void
      {
         var _loc1_:MapItem = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.maps.length)
         {
            _loc1_ = this.maps[_loc2_];
            if(_loc1_ != null && _loc1_.hasEventListener(MouseEvent.CLICK))
            {
               _loc1_.removeEventListener(MouseEvent.CLICK,this.handleMapItemClicked);
            }
            _loc2_++;
         }
      }
      
      private function handleMapItemClicked(param1:MouseEvent) : void
      {
         var _loc2_:int = 0;
         if(!this.idleSystem && param1.target is MapItem)
         {
            _loc2_ = MapItem(param1.target).id;
            this.connectionManager.sendCommand(ServerCommands.ADVANCED_JUMP_CPU,[ServerCommands.SET_STATUS,_loc2_]);
         }
      }
      
      public function setConnectionManager(param1:ConnectionManager) : void
      {
         this.connectionManager = param1;
      }
      
      public function setAllMapsBlocked() : void
      {
         var _loc1_:MapItem = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.maps.length)
         {
            _loc1_ = this.maps[_loc2_];
            if(_loc1_ != null)
            {
               this.setUriLock(_loc1_);
            }
            _loc2_++;
         }
      }
      
      public function setUnavailableMap(param1:int) : void
      {
         var _loc2_:MapItem = this.getMap(param1);
         if(_loc2_ != null)
         {
         }
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.TimeFormatter;
   import com.bigpoint.utils.ui.tooltip.ToolTipHook;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.plugins.ColorTransformPlugin;
   import com.greensock.plugins.TweenPlugin;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.filters.DropShadowFilter;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.net.models.techs.TechItem;
   import net.bigpoint.darkorbit.net.models.techs.TechNames;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.TechDefault;
   
   public class TechSlotElement extends SimpleElement
   {
      
      private static const logger:ILogger = Log.getLogger("TechSlotElement");
      
      private var slotBitmap:Bitmap;
      
      private var icon:Bitmap;
      
      private var hoverClip:Sprite;
      
      private var type:int;
      
      private var slotID:int;
      
      private var baseTooltipText:String;
      
      private var techDefault:TechDefault;
      
      public var secondsLeft:int = 0;
      
      public var isCountingDown:Boolean;
      
      public var handleClickCallBack:Function;
      
      private var toolTipHook:ToolTipHook;
      
      private var activeAnimationMask:Bitmap;
      
      public var cooldownSecondsLeft:int;
      
      private var isCoolingDown:Boolean;
      
      private var amountDisplay:TextField;
      
      private var main:Main;
      
      public function TechSlotElement(param1:Main)
      {
         super(SimpleElement.TYPE_TECH);
         this.main = param1;
         this.init();
         TweenPlugin.activate([ColorTransformPlugin]);
      }
      
      private function init() : void
      {
         this.slotBitmap = ResourceManager.getBitmap("techs","slot");
         addChild(this.slotBitmap);
         this.hoverClip = new Sprite();
         this.hoverClip.addChild(ResourceManager.getBitmap("techs","layer_hover"));
         this.hoverClip.alpha = 0;
         TweenLite.to(this.hoverClip,0.3,{"colorTransform":{
            "tint":15658734,
            "tintAmount":0.6
         }});
         this.baseTooltipText = BPLocale.getText("tech_slot_empty");
         this.toolTipHook = TooltipControl.getInstance().addToolTip(this,this.baseTooltipText);
      }
      
      public function update(param1:TechItem) : void
      {
         if(param1 == null)
         {
            return;
         }
         this.slotID = param1.slot;
         if((param1.type == 0 || param1.status == TechItem.STATE_DEFAULT) && this.icon != null)
         {
            this.clear();
         }
         if(this.type != param1.type)
         {
            this.clear();
            this.type = param1.type;
         }
         if(this.type != 0 && param1.status != TechItem.STATE_DEFAULT)
         {
            this.techDefault = PatternManager.techDefaults[param1.type] as TechDefault;
            this.baseTooltipText = BPLocale.getText("tech_" + TechNames.getNameByType(this.type) + "_name");
            if(param1.status == TechItem.STATE_ACTIVE && this.techDefault.hasDuration)
            {
               this.baseTooltipText += "\n%TIME%";
            }
            if(this.icon != null && contains(this.icon))
            {
               removeChild(this.icon);
            }
            this.icon = ResourceManager.getBitmap("techs",this.techDefault.linkageID);
            addChildAt(this.icon,1);
            if(param1.status == TechItem.STATE_INACTIVE)
            {
               if(param1.hasRunningCooldown)
               {
                  this.icon.alpha = 0.4;
                  this.cooldownSecondsLeft = param1.cooldownSeconds;
                  this.baseTooltipText += "\n%TIME%";
                  if(this.cooldownSecondsLeft > 0 && !this.isCoolingDown)
                  {
                     this.isCoolingDown = true;
                     this.tickCooldown();
                  }
                  this.removeListeners();
               }
            }
            else if(param1.status == TechItem.STATE_READY)
            {
               this.icon.alpha = 1;
               if(!contains(this.hoverClip))
               {
                  addChild(this.hoverClip);
               }
               this.addListeners();
            }
            else
            {
               if(param1.status != TechItem.STATE_ACTIVE)
               {
                  this.icon.alpha = 0.4;
               }
               else
               {
                  if(!contains(this.hoverClip))
                  {
                     addChild(this.hoverClip);
                  }
                  this.hoverClip.alpha = 1;
                  TweenLite.to(this.icon,0.3,{"colorTransform":{
                     "tint":15658734,
                     "tintAmount":0.3
                  }});
                  TweenLite.to(this.hoverClip,0.3,{"glowFilter":{
                     "color":15658734,
                     "alpha":0.7,
                     "blurX":4,
                     "blurY":4
                  }});
                  this.secondsLeft = param1.secondsLeft + 1;
                  if(this.secondsLeft > 1 && !this.isCountingDown)
                  {
                     this.isCountingDown = true;
                     this.tick();
                  }
               }
               this.removeListeners();
            }
         }
         else
         {
            this.clear();
            this.baseTooltipText = BPLocale.getText("tech_state_" + TechItem.getNameByStatus(param1.status));
         }
         this.toolTipHook.updateText(this.baseTooltipText);
         this.updateAmountDisplay(param1.amount);
      }
      
      private function updateAmountDisplay(param1:int) : void
      {
         var _loc2_:TextFormat = null;
         var _loc3_:DropShadowFilter = null;
         if(this.amountDisplay == null)
         {
            _loc2_ = new TextFormat(Styles.logFmt.font,11,16777215);
            _loc3_ = new DropShadowFilter(1,0,1,1,1);
            _loc2_.align = TextFormatAlign.RIGHT;
            this.amountDisplay = new TextField();
            this.amountDisplay.height = Styles.logFontHeight + 5;
            this.amountDisplay.filters = [_loc3_];
            this.amountDisplay.mouseEnabled = false;
            this.amountDisplay.selectable = false;
            this.amountDisplay.defaultTextFormat = _loc2_;
            this.amountDisplay.embedFonts = Styles.logEmbed;
            this.amountDisplay.wordWrap = false;
            this.amountDisplay.antiAliasType = AntiAliasType.ADVANCED;
            this.amountDisplay.width = this.slotBitmap.width - 3;
            this.amountDisplay.text = "-";
            this.amountDisplay.y = this.slotBitmap.height - this.amountDisplay.height;
            addChild(this.amountDisplay);
         }
         if(param1 == 0)
         {
            this.amountDisplay.text = "";
         }
         else
         {
            this.amountDisplay.text = String(param1);
         }
      }
      
      private function addListeners() : void
      {
         this.hoverClip.addEventListener(MouseEvent.CLICK,this.handleMouseClick);
         this.hoverClip.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
         this.hoverClip.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
         this.hoverClip.buttonMode = true;
      }
      
      private function removeListeners() : void
      {
         this.hoverClip.removeEventListener(MouseEvent.CLICK,this.handleMouseClick);
         this.hoverClip.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
         this.hoverClip.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
         this.hoverClip.buttonMode = false;
      }
      
      private function handleMouseOut(param1:MouseEvent) : void
      {
         TweenLite.to(this.hoverClip,0.2,{"alpha":0});
      }
      
      private function handleMouseOver(param1:MouseEvent) : void
      {
         TweenLite.to(this.hoverClip,0.2,{"alpha":1});
      }
      
      private function tick() : void
      {
         --this.secondsLeft;
         if(this.secondsLeft > 0)
         {
            TweenMax.delayedCall(1,this.tick);
         }
         else
         {
            this.isCountingDown = false;
         }
         this.toolTipHook.updateText(this.baseTooltipText.replace(/%TIME%/,TimeFormatter.formatTime(this.secondsLeft)));
      }
      
      private function tickCooldown() : void
      {
         this.toolTipHook.updateText(this.baseTooltipText.replace(/%TIME%/,TimeFormatter.formatTime(this.cooldownSecondsLeft)));
         --this.cooldownSecondsLeft;
         if(this.cooldownSecondsLeft > 0)
         {
            TweenMax.delayedCall(1,this.tickCooldown);
         }
         else
         {
            this.isCoolingDown = false;
         }
      }
      
      private function handleMouseClick(param1:MouseEvent) : void
      {
         if(this.handleClickCallBack != null)
         {
            this.handleClickCallBack(this.slotID);
         }
      }
      
      private function clear() : void
      {
         if(this.icon != null)
         {
            removeChild(this.icon);
            this.icon = null;
         }
         TweenLite.killTweensOf(this.hoverClip);
         this.hoverClip.alpha = 0;
         this.removeListeners();
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import fl.controls.TextArea;
   import flash.text.AntiAliasType;
   import flash.text.TextFormat;
   import net.bigpoint.darkorbit.Styles;
   
   public class TextAreaElement extends SimpleElement
   {
      
      public var textArea:TextArea;
      
      private var tfWidth:int;
      
      private var tfHeight:int;
      
      private var text:String;
      
      private var align:String;
      
      private var border:Boolean;
      
      public function TextAreaElement(param1:int, param2:int, param3:String = "center", param4:Boolean = false)
      {
         super(SimpleElement.TYPE_TEXT);
         this.tfWidth = param1;
         this.tfHeight = param2;
         this.text = this.text;
         this.align = param3;
         this.border = param4;
         this.init();
      }
      
      public function init() : void
      {
         var _loc1_:TextFormat = new TextFormat(Styles.logFmt.font,Styles.logFmt.size,16777215);
         _loc1_.align = this.align;
         this.textArea = new TextArea();
         this.textArea.width = this.tfWidth;
         this.textArea.height = this.tfHeight;
         this.textArea.editable = false;
         this.textArea.textField.selectable = false;
         this.textArea.textField.border = this.border;
         this.textArea.textField.antiAliasType = AntiAliasType.ADVANCED;
         this.textArea.setStyle("textFormat",_loc1_);
         this.textArea.setStyle("embedFonts",Styles.logEmbed);
         this.addChild(this.textArea);
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFormat;
   import net.bigpoint.darkorbit.Styles;
   
   public class TextFieldElement extends SimpleElement
   {
      
      private var _textField:TextField;
      
      private var tfWidth:int;
      
      private var tfHeight:int;
      
      private var text:String;
      
      private var align:String;
      
      private var format:TextFormat;
      
      private var border:Boolean;
      
      public function TextFieldElement(param1:int, param2:int, param3:TextFormat, param4:String = null, param5:String = "center", param6:Boolean = false)
      {
         super(SimpleElement.TYPE_TEXT);
         this.tfWidth = param1;
         this.tfHeight = param2;
         this.format = param3;
         this.text = param4;
         this.align = param5;
         this.border = param6;
         this.init();
      }
      
      public function init() : void
      {
         this.format.align = this.align;
         this._textField = new TextField();
         this._textField.defaultTextFormat = this.format;
         this._textField.embedFonts = Styles.simpleEmbed;
         this._textField.wordWrap = true;
         this._textField.antiAliasType = AntiAliasType.ADVANCED;
         this._textField.width = this.tfWidth;
         this._textField.height = this.tfHeight;
         this._textField.border = this.border;
         this._textField.selectable = false;
         if(this.text != null)
         {
            this._textField.text = this.text;
         }
         this.addChild(this._textField);
      }
      
      public function updateText(param1:String) : void
      {
         this._textField.text = param1;
      }
      
      public function get textField() : TextField
      {
         return this._textField;
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Interference;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   
   public class VideoElement extends SimpleElement
   {
      
      public static const CLASS_COMMANDER:int = 0;
      
      public static const CLASS_HELPMOVIE:int = 1;
      
      private var videoID:int;
      
      private var classID:int;
      
      private var factionID:int;
      
      private var video:MovieClip;
      
      private var cMask:MovieClip;
      
      public var interference:Interference;
      
      public var border:Bitmap;
      
      public function VideoElement(param1:int, param2:int = 0, param3:int = 0)
      {
         super(TYPE_VIDEO_ELEMENT);
         this.videoID = param1;
         this.classID = param2;
         this.factionID = param3;
         this.init();
      }
      
      public static function getContentResKey(param1:int, param2:int) : String
      {
         var _loc3_:String = "";
         if(param1 == CLASS_COMMANDER)
         {
            _loc3_ = "videoPic";
         }
         else if(param1 == CLASS_HELPMOVIE)
         {
            _loc3_ = "helpmovie";
         }
         _loc3_ += "_" + param2;
         if(param1 == CLASS_HELPMOVIE && param2 == 1)
         {
            _loc3_ += "_faction" + Hero.factionID;
         }
         return _loc3_;
      }
      
      public function init() : void
      {
         var _loc1_:String = getContentResKey(this.classID,this.videoID);
         this.video = ResourceManager.getMovieClip(_loc1_,"video");
         this.video.mask = this.cMask;
         ScreenManager.playAnimation(this.video,20,true);
         this.interference = new Interference(this.video.width,this.video.height);
         this.interference.playSound = false;
         if(this.classID == CLASS_COMMANDER)
         {
            this.interference.fadeOut = false;
            this.interference.start();
            this.video.addChild(this.interference);
         }
         this.addChild(this.video);
         var _loc2_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.cMask = _loc2_.getEmbededMovieClip("cMask");
         this.addChild(this.cMask);
         this.video.mask = this.cMask;
         this.border = _loc2_.getEmbededBitmap("border");
         this.addChild(this.border);
      }
      
      override public function get width() : Number
      {
         if(this.border != null)
         {
            return this.border.width;
         }
         return super.width;
      }
      
      public function cleanup() : void
      {
         this.interference.cleanup();
         ScreenManager.stopAnimation(this.video);
         this.video.mask = null;
         removeChild(this.cMask);
         removeChild(this.border);
         removeChild(this.video);
      }
   }
}

package net.bigpoint.darkorbit.gui.elements
{
   import com.bigpoint.utils.BPLocale;
   import flash.display.MovieClip;
   import flash.events.MouseEvent;
   import flash.external.ExternalInterface;
   import flash.text.TextField;
   import flash.text.TextFormat;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class WebLinkModule extends SimpleElement
   {
      
      private var guiManager:GuiManager;
      
      private var type:int;
      
      private var languageKey:String;
      
      private var url:String;
      
      private var module:MovieClip;
      
      public function WebLinkModule(param1:GuiManager, param2:int, param3:String, param4:String, param5:MovieClip)
      {
         super(SimpleElement.TYPE_WEBLINK_MODULE);
         this.guiManager = param1;
         this.type = param2;
         this.languageKey = param3;
         this.url = param4;
         this.module = param5;
         this.init();
      }
      
      private function init() : void
      {
         var _loc1_:TextField = this.module["labelText"];
         _loc1_.defaultTextFormat = new TextFormat(Styles.logFmt.font,Styles.logFmt.size,16777215);
         _loc1_.embedFonts = Styles.logEmbed;
         _loc1_.height = Styles.logFontHeight + 5;
         _loc1_.text = BPLocale.getText(this.languageKey);
         _loc1_.mouseEnabled = false;
         this.module["icons"].gotoAndStop(this.type);
         this.module.addEventListener(MouseEvent.CLICK,this.onButtonClicked);
         this.module.buttonMode = true;
         this.addChild(this.module);
      }
      
      private function onButtonClicked(param1:MouseEvent) : void
      {
         if(ExternalInterface.available)
         {
            ExternalInterface.call("referToURL",Settings.dynamicHost + this.url);
         }
      }
      
      public function cleanup() : void
      {
         this.module.removeEventListener(MouseEvent.CLICK,this.onButtonClicked);
      }
   }
}

package net.bigpoint.darkorbit.gui.elements.combobox
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.ToolTipHook;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import fl.controls.ComboBox;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.SettingsWindowDecorator;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   
   public class ComboBoxComponent extends SimpleElement
   {
      
      public static const COMBO_GAP:int = 20;
      
      public var type:int;
      
      public var labelKey:String;
      
      private var labelTxt:TextField;
      
      private var elements:Array;
      
      public var isAdvanced:Boolean;
      
      private var tooltipKey:String;
      
      private var comboBox:ComboBox;
      
      private var ttipIcon:Sprite;
      
      public function ComboBoxComponent(param1:int, param2:String, param3:Array, param4:String = "", param5:Boolean = false)
      {
         super(SimpleElement.TYPE_COMBOBOX);
         this.type = param1;
         this.elements = param3;
         this.labelKey = param2;
         this.isAdvanced = param5;
         this.tooltipKey = param4;
         this.init();
      }
      
      private function init() : void
      {
         var _loc1_:ComboboxItem = null;
         var _loc2_:ToolTipHook = null;
         this.labelTxt = new TextField();
         this.labelTxt.selectable = false;
         this.labelTxt.defaultTextFormat = Styles.strongStdFmt;
         this.labelTxt.textColor = 16777215;
         this.labelTxt.text = BPLocale.getText(this.labelKey);
         this.labelTxt.border = false;
         this.labelTxt.embedFonts = Styles.strongStdEmbed;
         this.labelTxt.autoSize = TextFieldAutoSize.LEFT;
         this.labelTxt.antiAliasType = AntiAliasType.ADVANCED;
         this.labelTxt.wordWrap = true;
         this.labelTxt.height = Styles.strongStdFontHeight;
         this.labelTxt.width = 140;
         this.labelTxt.y = 0;
         addChild(this.labelTxt);
         this.comboBox = new ComboBox();
         this.comboBox.y = this.labelTxt.height + 2;
         this.comboBox.mouseFocusEnabled = false;
         for each(_loc1_ in this.elements)
         {
            this.comboBox.addItem({
               "id":_loc1_.getID(),
               "label":_loc1_.getValue()
            });
         }
         this.comboBox.addEventListener(Event.CHANGE,this.handleComboboxSelection);
         this.addChild(this.comboBox);
         if(this.tooltipKey != "")
         {
            this.ttipIcon = new Sprite();
            this.ttipIcon.addChild(SWFFinisher(ResourceManager.fileCollection.getFinisher("icons")).getEmbededBitmap("general_help"));
            this.ttipIcon.x = this.comboBox.x + this.comboBox.width + 5;
            this.ttipIcon.y = this.comboBox.y + 4;
            this.addChild(this.ttipIcon);
            _loc2_ = TooltipControl.getInstance().addToolTip(this.ttipIcon,BPLocale.getText(this.tooltipKey));
            _loc2_.showImmediately = true;
         }
      }
      
      public function setSelected(param1:int) : void
      {
         var _loc2_:Object = null;
         var _loc3_:uint = 0;
         _loc3_ = 0;
         while(_loc3_ < this.comboBox.length)
         {
            _loc2_ = this.comboBox.getItemAt(_loc3_);
            if(_loc2_.id == param1)
            {
               this.comboBox.selectedIndex = _loc3_;
            }
            _loc3_++;
         }
      }
      
      public function getSelectedID() : int
      {
         var _loc1_:Object = this.comboBox.getItemAt(this.comboBox.selectedIndex);
         return _loc1_.id;
      }
      
      public function setSetting() : void
      {
         var _loc1_:int = this.getSelectedID();
         SettingsWindowDecorator.setSettableSettingValue(this.type,String(_loc1_));
      }
      
      public function resetSetting() : void
      {
         var _loc1_:int = SettingsWindowDecorator.getComboBoxSettingValue(this.type);
         this.setSelected(_loc1_);
      }
      
      private function handleComboboxSelection(param1:Event) : void
      {
         dispatchEvent(new Event(Event.CHANGE));
      }
      
      public function show(param1:Boolean) : void
      {
         this.labelTxt.visible = param1;
         this.comboBox.visible = param1;
         if(this.ttipIcon != null)
         {
            this.ttipIcon.visible = param1;
         }
      }
   }
}

package net.bigpoint.darkorbit.gui.elements.combobox
{
   public class ComboboxItem
   {
      
      private var id:int;
      
      private var value:String;
      
      public function ComboboxItem(param1:int, param2:String)
      {
         super();
         this.value = param2;
         this.id = param1;
      }
      
      public function getID() : int
      {
         return this.id;
      }
      
      public function getValue() : String
      {
         return this.value;
      }
      
      public function toString() : String
      {
         return "ComboboxItem id:" + this.id + " value:" + this.value;
      }
   }
}

package net.bigpoint.darkorbit.gui.elements.numericstepper
{
   import flash.events.Event;
   
   public class NumericStepperEvent extends Event
   {
      
      public static const CHANGE:String = "CHANGE";
      
      public var value:int;
      
      public function NumericStepperEvent(param1:String, param2:int, param3:Boolean = false, param4:Boolean = false)
      {
         super(param1,param3,param4);
         this.value = param2;
      }
   }
}

package net.bigpoint.darkorbit.gui.elements.numericstepper
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.FocusEvent;
   import flash.events.MouseEvent;
   import flash.geom.Point;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldType;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.elements.OreTradeModule;
   
   public class TradeModuleNumericStepper extends Sprite
   {
      
      public static const OUT:int = 1;
      
      public static const HOVER:int = 2;
      
      public static const DOWN:int = 3;
      
      public static const INACTIVE:int = 4;
      
      public static const INCREMENT:String = "inc";
      
      public static const DECREMENT:String = "dec";
      
      private var tradeModule:OreTradeModule;
      
      private var amountAfterSaleTextField:TextField;
      
      private var amountToSellTextField:TextField;
      
      private var totalOre:int = -1;
      
      private var amountAfterSale:int = 0;
      
      private var amountToSell:int = 0;
      
      public var moreButton:MovieClip;
      
      public var lessButton:MovieClip;
      
      private var tmpSavedInputValue:String = "";
      
      private var tmpTotalInputValue:String = "";
      
      private var blockMoreButton:Boolean = false;
      
      private var blockLessButton:Boolean = false;
      
      private var incrementUnit:int;
      
      private var orePrice:int = -1;
      
      public function TradeModuleNumericStepper(param1:OreTradeModule)
      {
         super();
         this.tradeModule = param1;
         this.init();
      }
      
      public function getValue() : int
      {
         var _loc1_:int = 0;
         if(this.amountToSellTextField.text.length > 0)
         {
            _loc1_ = int(this.amountToSellTextField.text);
         }
         else
         {
            _loc1_ = 0;
         }
         return _loc1_;
      }
      
      public function setIncreaseStep(param1:int) : void
      {
         this.incrementUnit = param1;
      }
      
      public function setOreAmount(param1:int, param2:int) : void
      {
         this.orePrice = param2;
         if(this.totalOre > param1)
         {
            this.amountToSell = 0;
            this.totalOre = param1;
            this.amountAfterSale = param1;
            this.initButtons();
         }
         else
         {
            this.amountToSell = param1 - param1 % this.incrementUnit;
            this.totalOre = param1;
            this.amountAfterSale = this.totalOre - this.amountToSell;
            this.initButtons();
         }
         this.setText(this.amountToSellTextField,String(this.amountToSell));
         this.setText(this.amountAfterSaleTextField,String(this.totalOre));
         this.updateCheck();
      }
      
      public function printOreAmountValues() : void
      {
      }
      
      private function setText(param1:TextField, param2:String) : void
      {
         param1.text = param2;
      }
      
      private function initButtons() : void
      {
         if(this.totalOre == 0 || this.orePrice < 0 || this.totalOre < this.incrementUnit)
         {
            this.blockLessButton = true;
            this.blockMoreButton = true;
            this.setButtonState(this.lessButton,INACTIVE);
            this.setButtonState(this.moreButton,INACTIVE);
            this.removeListeners();
         }
         else
         {
            if(this.totalOre > this.amountToSell && this.totalOre - this.amountToSell >= this.incrementUnit)
            {
               this.blockMoreButton = false;
               this.setButtonState(this.moreButton,OUT);
            }
            if(this.amountToSell == 0)
            {
               this.blockLessButton = true;
               this.setButtonState(this.lessButton,INACTIVE);
            }
            else
            {
               this.blockLessButton = false;
               this.setButtonState(this.lessButton,OUT);
            }
            this.addListeners();
         }
      }
      
      private function init() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc2_:TextFormat = Styles.plainStdFmt;
         _loc2_.align = TextFormatAlign.CENTER;
         var _loc3_:Sprite = new Sprite();
         var _loc4_:Sprite = new Sprite();
         this.amountAfterSaleTextField = new TextField();
         this.amountAfterSaleTextField.antiAliasType = AntiAliasType.ADVANCED;
         this.amountAfterSaleTextField.defaultTextFormat = _loc2_;
         this.amountAfterSaleTextField.embedFonts = true;
         this.amountAfterSaleTextField.multiline = false;
         this.amountAfterSaleTextField.textColor = 10066329;
         this.amountAfterSaleTextField.setTextFormat(_loc2_);
         this.amountAfterSaleTextField.width = 50;
         this.amountAfterSaleTextField.height = 15;
         this.amountAfterSaleTextField.restrict = "0-9";
         this.amountAfterSaleTextField.maxChars = 6;
         this.amountAfterSaleTextField.y = 1;
         this.amountToSellTextField = new TextField();
         this.amountToSellTextField.type = TextFieldType.INPUT;
         this.amountToSellTextField.antiAliasType = AntiAliasType.ADVANCED;
         this.amountToSellTextField.defaultTextFormat = _loc2_;
         this.amountToSellTextField.embedFonts = true;
         this.amountToSellTextField.multiline = false;
         this.amountToSellTextField.selectable = true;
         this.amountToSellTextField.textColor = 16777215;
         this.amountToSellTextField.setTextFormat(_loc2_);
         this.amountToSellTextField.width = 40;
         this.amountToSellTextField.height = 15;
         this.amountToSellTextField.restrict = "0-9";
         this.amountToSellTextField.maxChars = 6;
         this.amountToSellTextField.y = this.amountAfterSaleTextField.y + this.amountAfterSaleTextField.height;
         this.moreButton = _loc1_.getEmbededMovieClip("numericStepperPlus");
         this.moreButton.y = 17;
         this.moreButton.x = 53;
         this.moreButton.buttonMode = this.moreButton.useHandCursor = true;
         this.setButtonState(this.moreButton,INACTIVE);
         this.lessButton = _loc1_.getEmbededMovieClip("numericStepperMinus");
         this.lessButton.y = 17;
         this.lessButton.buttonMode = this.lessButton.useHandCursor = true;
         this.setButtonState(this.lessButton,INACTIVE);
         _loc4_.x = this.moreButton.width * 0.5;
         _loc4_.y = this.moreButton.height * 0.5;
         _loc4_.addChild(this.moreButton);
         _loc4_.addChild(this.lessButton);
         this.amountToSellTextField.x = this.lessButton.x + this.lessButton.width - 1;
         this.amountAfterSaleTextField.width = _loc4_.width;
         _loc3_.addChild(this.amountToSellTextField);
         _loc3_.addChild(this.amountAfterSaleTextField);
         addChild(_loc4_);
         addChild(_loc3_);
      }
      
      private function handleLessButtonClick(param1:MouseEvent) : void
      {
         var _loc2_:int = 0;
         if(this.amountAfterSale + this.incrementUnit < this.totalOre)
         {
            _loc2_ = this.getCorrectIncrementUnit(this.amountAfterSale,DECREMENT);
            this.updateGain(this.amountAfterSale + _loc2_);
         }
         else
         {
            this.updateGain(this.totalOre);
         }
      }
      
      private function handleMoreButtonClick(param1:MouseEvent) : void
      {
         if(this.amountAfterSale - this.incrementUnit > 0)
         {
            this.updateGain(this.amountAfterSale - this.incrementUnit);
         }
         else
         {
            this.updateGain(0);
         }
      }
      
      private function getCorrectIncrementUnit(param1:int, param2:String) : int
      {
         var _loc4_:int = 0;
         var _loc3_:int = param1 % this.incrementUnit;
         param1 = this.totalOre - param1;
         if(_loc3_ == 0)
         {
            return this.incrementUnit;
         }
         switch(param2)
         {
            case INCREMENT:
               _loc4_ = _loc3_;
               break;
            case DECREMENT:
               _loc4_ = this.incrementUnit - _loc3_;
         }
         return _loc4_;
      }
      
      private function handleMouseOut(param1:MouseEvent) : void
      {
         var _loc2_:MovieClip = MovieClip(param1.target);
         if(!this.blockLessButton && _loc2_ == this.lessButton)
         {
            this.setButtonState(_loc2_,OUT);
         }
         else if(!this.blockMoreButton && _loc2_ == this.moreButton)
         {
            this.setButtonState(_loc2_,OUT);
         }
      }
      
      private function handleMouseOver(param1:MouseEvent) : void
      {
         var _loc2_:MovieClip = MovieClip(param1.target);
         if(!this.blockLessButton && _loc2_ == this.lessButton)
         {
            this.setButtonState(_loc2_,HOVER);
         }
         else if(!this.blockMoreButton && _loc2_ == this.moreButton)
         {
            this.setButtonState(_loc2_,HOVER);
         }
      }
      
      public function deactivateSellAmountTextField() : void
      {
         this.amountToSellTextField.removeEventListener(FocusEvent.FOCUS_IN,this.handleTotalAmountTextfieldFocusIn);
         this.amountToSellTextField.removeEventListener(FocusEvent.FOCUS_OUT,this.handleTotalAmountTextfieldFocusOut);
         this.amountToSellTextField.removeEventListener(Event.CHANGE,this.handleTotalAmountTextfieldChange);
         this.amountToSellTextField.type = TextFieldType.DYNAMIC;
         this.amountToSellTextField.selectable = false;
         this.amountToSellTextField.mouseEnabled = false;
      }
      
      public function activateSellAmountTextField() : void
      {
         this.amountToSellTextField.addEventListener(FocusEvent.FOCUS_IN,this.handleTotalAmountTextfieldFocusIn);
         this.amountToSellTextField.addEventListener(FocusEvent.FOCUS_OUT,this.handleTotalAmountTextfieldFocusOut);
         this.amountToSellTextField.addEventListener(Event.CHANGE,this.handleTotalAmountTextfieldChange);
         this.amountToSellTextField.type = TextFieldType.INPUT;
         this.amountToSellTextField.selectable = true;
         this.amountToSellTextField.mouseEnabled = true;
      }
      
      public function deactivateUpperButton() : void
      {
         this.blockMoreButton = true;
         this.setButtonState(this.moreButton,INACTIVE);
         this.moreButton.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
         this.moreButton.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
         this.moreButton.removeEventListener(MouseEvent.CLICK,this.handleMoreButtonClick);
      }
      
      public function deactivateLowerButton() : void
      {
         this.blockLessButton = true;
         this.setButtonState(this.lessButton,INACTIVE);
         this.lessButton.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
         this.lessButton.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
         this.lessButton.removeEventListener(MouseEvent.CLICK,this.handleLessButtonClick);
      }
      
      public function activateUpperButton() : void
      {
         this.blockMoreButton = false;
         this.setButtonState(this.moreButton,OUT);
         this.moreButton.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
         this.moreButton.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
         this.moreButton.addEventListener(MouseEvent.CLICK,this.handleMoreButtonClick);
      }
      
      public function activateLowerButton() : void
      {
         this.blockLessButton = false;
         this.setButtonState(this.lessButton,OUT);
         this.lessButton.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
         this.lessButton.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
         this.lessButton.addEventListener(MouseEvent.CLICK,this.handleLessButtonClick);
      }
      
      public function addListeners() : void
      {
         if(!this.moreButton.hasEventListener(MouseEvent.MOUSE_OVER))
         {
            this.activateUpperButton();
            this.activateLowerButton();
            this.activateSellAmountTextField();
         }
      }
      
      public function removeListeners() : void
      {
         if(this.moreButton.hasEventListener(MouseEvent.MOUSE_OVER))
         {
            this.deactivateUpperButton();
            this.deactivateLowerButton();
            this.deactivateSellAmountTextField();
            this.amountAfterSale = 0;
         }
      }
      
      private function handleSavedAmountTextfieldChange(param1:Event) : void
      {
         var _loc2_:int = int(TextField(param1.target).text);
         if(_loc2_ > this.totalOre)
         {
            _loc2_ = this.totalOre;
         }
         this.amountAfterSale = _loc2_;
         if(this.tmpSavedInputValue != String(_loc2_))
         {
            this.updateGain(this.amountAfterSale);
         }
      }
      
      private function handleSavedAmountTextfieldFocusOut(param1:FocusEvent) : void
      {
         var _loc2_:TextField = TextField(param1.target);
         if(!_loc2_.text.length > 0)
         {
            this.setText(_loc2_,this.tmpSavedInputValue);
         }
         this.tmpSavedInputValue = "";
      }
      
      private function handleSavedAmountTextfieldFocusIn(param1:FocusEvent) : void
      {
         this.tmpSavedInputValue = TextField(param1.target).text;
         this.setText(TextField(param1.target),"");
      }
      
      private function handleTotalAmountTextfieldFocusIn(param1:FocusEvent) : void
      {
         this.tmpTotalInputValue = TextField(param1.target).text;
         this.setText(TextField(param1.target),"");
      }
      
      private function handleTotalAmountTextfieldChange(param1:Event) : void
      {
         var _loc2_:int = int(TextField(param1.target).text);
         if(_loc2_ > this.totalOre)
         {
            _loc2_ = this.totalOre;
         }
         this.amountAfterSale = this.totalOre - _loc2_;
         if(this.tmpTotalInputValue != String(_loc2_))
         {
            this.updateGain(this.amountAfterSale);
         }
      }
      
      private function handleTotalAmountTextfieldFocusOut(param1:FocusEvent) : void
      {
         var _loc2_:TextField = TextField(param1.target);
         if(!_loc2_.text.length > 0)
         {
            this.setText(_loc2_,this.tmpTotalInputValue);
         }
         this.tmpTotalInputValue = "";
      }
      
      private function setButtonState(param1:MovieClip, param2:int) : void
      {
         param1.gotoAndStop(param2);
      }
      
      private function updateGain(param1:int) : void
      {
         var _loc2_:int = this.totalOre - param1;
         this.amountToSell = _loc2_ - _loc2_ % this.incrementUnit;
         this.amountAfterSale = param1;
         this.setText(this.amountToSellTextField,String(this.amountToSell));
         this.updateCheck();
         dispatchEvent(new NumericStepperEvent(NumericStepperEvent.CHANGE,this.amountToSell));
      }
      
      public function setFinalValueFieldEmpty() : void
      {
         this.setText(this.amountToSellTextField,String(0));
      }
      
      public function updateCheck() : void
      {
         this.blockMoreButton = false;
         this.blockLessButton = false;
         if(this.amountAfterSale < this.incrementUnit || this.orePrice < 0)
         {
            this.blockMoreButton = true;
            this.setButtonState(this.moreButton,INACTIVE);
         }
         else
         {
            this.blockMoreButton = false;
            this.setButtonState(this.moreButton,OUT);
         }
         if(this.totalOre == this.amountAfterSale || this.amountToSell == 0 || this.orePrice < 0)
         {
            this.blockLessButton = true;
            this.setButtonState(this.lessButton,INACTIVE);
         }
         else
         {
            this.blockLessButton = false;
            this.setButtonState(this.lessButton,OUT);
         }
         if(this.orePrice < 0)
         {
            this.setText(this.amountToSellTextField,"");
         }
         this.tradeModule.showSellButton(!this.blockMoreButton || !this.blockLessButton);
      }
      
      public function setRatio(param1:Point) : void
      {
         this.incrementUnit = param1.y;
      }
   }
}

package net.bigpoint.darkorbit.gui.elements.slider
{
   import com.bigpoint.utils.BPLocale;
   import fl.controls.Slider;
   import fl.controls.SliderDirection;
   import fl.events.SliderEvent;
   import flash.display.Shape;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.SettingsWindowDecorator;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class SliderComponent extends SimpleElement
   {
      
      public static const SLIDER_GAP:int = 20;
      
      public static const SLIDER_WIDTH:int = 350;
      
      private var typeID:int;
      
      private var labelKey:String;
      
      private var elements:Array;
      
      public var slider:Slider;
      
      private var currentValueTxt:TextField;
      
      public function SliderComponent(param1:int, param2:String, param3:Array)
      {
         super(SimpleElement.TYPE_SLIDER);
         this.typeID = param1;
         this.labelKey = param2;
         this.elements = param3;
         this.init();
      }
      
      private function init() : void
      {
         var _loc4_:TextField = null;
         var _loc5_:Shape = null;
         var _loc6_:SliderInterval = null;
         var _loc1_:TextField = new TextField();
         _loc1_.selectable = false;
         _loc1_.defaultTextFormat = Styles.strongStdFmt;
         _loc1_.textColor = 16777215;
         _loc1_.text = BPLocale.getText(this.labelKey);
         _loc1_.border = false;
         _loc1_.embedFonts = Styles.strongStdEmbed;
         _loc1_.autoSize = TextFieldAutoSize.LEFT;
         _loc1_.antiAliasType = AntiAliasType.ADVANCED;
         _loc1_.height = Styles.strongStdFontHeight + 6;
         _loc1_.y = 0;
         addChild(_loc1_);
         this.currentValueTxt = new TextField();
         this.currentValueTxt.selectable = false;
         this.currentValueTxt.defaultTextFormat = Styles.strongStdFmt;
         this.currentValueTxt.textColor = 15327936;
         this.currentValueTxt.border = false;
         this.currentValueTxt.embedFonts = Styles.strongStdEmbed;
         this.currentValueTxt.autoSize = TextFieldAutoSize.LEFT;
         this.currentValueTxt.antiAliasType = AntiAliasType.ADVANCED;
         this.currentValueTxt.height = Styles.strongStdFontHeight + 6;
         this.currentValueTxt.x = _loc1_.width + 10;
         this.currentValueTxt.y = 0;
         addChild(this.currentValueTxt);
         var _loc2_:int = Math.round(SLIDER_WIDTH / (this.elements.length - 1));
         var _loc3_:int = SLIDER_GAP;
         for each(_loc6_ in this.elements)
         {
            _loc4_ = new TextField();
            _loc4_.selectable = false;
            _loc4_.defaultTextFormat = Styles.logFmt;
            _loc4_.embedFonts = Styles.logEmbed;
            _loc4_.text = BPLocale.getText(_loc6_.labelKey);
            _loc4_.border = false;
            _loc4_.selectable = false;
            _loc4_.autoSize = TextFieldAutoSize.LEFT;
            _loc4_.antiAliasType = AntiAliasType.ADVANCED;
            _loc4_.height = Styles.logFontHeight + 5;
            _loc4_.x = _loc3_ - _loc4_.width / 2;
            _loc4_.y = _loc4_.height;
            addChild(_loc4_);
            _loc3_ += _loc2_;
         }
         this.slider = new Slider();
         this.slider.direction = SliderDirection.HORIZONTAL;
         this.slider.move(SLIDER_GAP,_loc1_.height + 20);
         this.slider.setSize(SLIDER_WIDTH,10);
         this.slider.maximum = this.elements.length - 1;
         this.slider.minimum = 0;
         this.slider.snapInterval = 1;
         addChild(this.slider);
         this.slider.addEventListener(SliderEvent.CHANGE,this.handleSliderChanged);
      }
      
      public function setSelectedInterval(param1:int) : void
      {
         this.slider.value = param1;
      }
      
      public function getSelectedInterval() : int
      {
         return int(this.slider.value);
      }
      
      public function setSetting() : void
      {
         SettingsWindowDecorator.setSettableSettingValue(this.typeID,String(this.slider.value));
      }
      
      public function resetSetting() : void
      {
         var _loc1_:int = SettingsWindowDecorator.getSliderSettingValue(this.typeID);
         this.setSelectedInterval(_loc1_);
         if(!Settings.qualityCustomized)
         {
            this.setCurrentValueText(SliderInterval(this.elements[_loc1_]).labelKey);
         }
         else
         {
            this.setCurrentValueText("quality_custom");
         }
      }
      
      public function setCurrentValueText(param1:String) : void
      {
         this.currentValueTxt.text = BPLocale.getText(param1);
      }
      
      private function handleSliderChanged(param1:SliderEvent) : void
      {
         this.setSelectedInterval(this.slider.value);
         this.setCurrentValueText(SliderInterval(this.elements[this.slider.value]).labelKey);
      }
   }
}

package net.bigpoint.darkorbit.gui.elements.slider
{
   public class SliderInterval
   {
      
      public var value:int;
      
      public var labelKey:String;
      
      public function SliderInterval(param1:int, param2:String)
      {
         super();
         this.value = param1;
         this.labelKey = param2;
      }
   }
}

package net.bigpoint.darkorbit.gui.windows
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import flash.events.Event;
   import flash.geom.Point;
   import flash.media.SoundChannel;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.gui.BannerAd;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.lazyload.BannerAdLazyLoader;
   import net.bigpoint.darkorbit.pattern.BannerAdPattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class BannerAdWindow extends SimpleWindow
   {
      
      public static const BANNERAD_X_BORDER:int = 10;
      
      public static const BANNERAD_Y_BORDER:int = 30;
      
      public var startX:int = 0;
      
      public var startY:int = 0;
      
      public var targetX:int = 0;
      
      public var targetY:int = 0;
      
      public var align:String = "n";
      
      public var scrollSpeed:Number = 0.5;
      
      private var simpleContainer:SimpleContainer;
      
      public var bannerAdId:int;
      
      private var noiseChannel:SoundChannel;
      
      private var valid:Boolean;
      
      private var bannerAdPattern:BannerAdPattern;
      
      private var loader:BannerAdLazyLoader;
      
      private var price:Number;
      
      private var enumKey:String;
      
      private var bannerAd:BannerAd;
      
      public function BannerAdWindow(param1:GuiManager, param2:int, param3:String, param4:String)
      {
         super(param1,param2,SWFFinisher(ResourceManager.fileCollection.getFinisher("window1")),false,true,false,true,false,false,SimpleWindow.SLOT_TYPE_NO_SLOT,true,"comb02_std.png","comb02_hover.png",SimpleWindow.WINDOW_TYPE_NORMAL,false);
         this.align = param4;
         this.enumKey = param3;
         this.bannerAdPattern = PatternManager.bannerAdPatterns[param3] as BannerAdPattern;
         this.bannerAdId = this.bannerAdPattern.id;
         this.price = this.bannerAdPattern.price;
         this.loader = new BannerAdLazyLoader(this.bannerAdPattern);
         if(this.price == -1)
         {
            BannerAdLazyLoader.loadBannerAdPatternAddon();
         }
      }
      
      public function init() : void
      {
         this.simpleContainer = new SimpleContainer(guiManager,SimpleContainer.CLASS_DEFAULT);
         addContainer(this.simpleContainer);
         this.simpleContainer.x = 15;
         this.simpleContainer.y = 35;
         var _loc1_:Point = dimensions[0];
         var _loc2_:int = _loc1_.x;
         var _loc3_:int = _loc1_.y;
         switch(this.align)
         {
            case "n":
               this.startX = ScreenManager.getHalfScreenWidth() - _loc2_ / 2;
               this.startY = -_loc3_ - 100;
               this.targetX = ScreenManager.getHalfScreenWidth() - _loc2_ / 2;
               this.targetY = 5;
               break;
            case "ne":
               this.startX = ScreenManager.getScreenWidth() + 10;
               this.startY = 5;
               this.targetX = ScreenManager.getScreenWidth() - _loc2_ - 30;
               this.targetY = 5;
               break;
            case "e":
               this.startX = ScreenManager.getScreenWidth() + 10;
               this.startY = ScreenManager.getHalfScreenHeight() - _loc3_ / 2;
               this.targetX = ScreenManager.getScreenWidth() - _loc2_ - 30;
               this.targetY = ScreenManager.getHalfScreenHeight() - _loc3_ / 2;
               break;
            case "se":
               this.startX = ScreenManager.getScreenWidth() + 10;
               this.startY = ScreenManager.getScreenHeight() - _loc3_ - 30;
               this.targetX = ScreenManager.getScreenWidth() - _loc2_ - 30;
               this.targetY = ScreenManager.getScreenHeight() - _loc3_ - 30;
               break;
            case "s":
               this.startX = ScreenManager.getHalfScreenWidth() - _loc2_ / 2;
               this.startY = ScreenManager.getScreenHeight() - 10;
               this.targetX = ScreenManager.getHalfScreenWidth() - _loc2_ / 2;
               this.targetY = ScreenManager.getScreenHeight() - _loc3_ - 30;
               break;
            case "sw":
               this.startX = -_loc2_ - 10;
               this.startY = ScreenManager.getScreenHeight() - _loc3_ - 30;
               this.targetX = 5;
               this.targetY = ScreenManager.getScreenHeight() - _loc3_ - 30;
               break;
            case "w":
               this.startX = -_loc2_ - 10;
               this.startY = ScreenManager.getHalfScreenHeight() - _loc3_ / 2;
               this.targetX = 5;
               this.targetY = ScreenManager.getHalfScreenHeight() - _loc3_ / 2;
               break;
            case "nw":
               this.startX = -_loc2_ - 10;
               this.startY = 5;
               this.targetX = 5;
               this.targetY = 5;
               break;
            case "c":
               this.startX = ScreenManager.getHalfScreenWidth() - _loc2_ / 2;
               this.startY = -_loc3_ - 100;
               this.targetX = ScreenManager.getHalfScreenWidth() - _loc2_ / 2;
               this.targetY = ScreenManager.getHalfScreenHeight() - _loc3_ / 2;
         }
         this.x = this.startX;
         this.y = this.startY;
         ScreenManager.getWindowLayer().addChild(this);
      }
      
      public function attemptToShow() : void
      {
         var _loc1_:String = this.bannerAdPattern.getImageLibID(Settings.language);
         if(!this.loader.isLoaded())
         {
            this.loader.addEventListener(BannerAdLazyLoader.BANNERAD_LOADED,this.addBanner);
            this.loader.loadBannerAd();
         }
         else
         {
            this.addBanner();
         }
      }
      
      private function addBanner(param1:Event = null) : void
      {
         if(this.loader.hasEventListener(BannerAdLazyLoader.BANNERAD_LOADED))
         {
            this.loader.removeEventListener(BannerAdLazyLoader.BANNERAD_LOADED,this.addBanner);
         }
         this.bannerAd = new BannerAd(this.bannerAdPattern);
         this.bannerAd.addEventListener(BannerAd.CLOSE_BANNER_WINDOW,this.closeBannerAd);
         addWindowDimension(new Point(this.bannerAd.sizerClip.width + BANNERAD_X_BORDER,this.bannerAd.sizerClip.height + BANNERAD_Y_BORDER));
         setPredefinedDimension();
         this.show();
         this.simpleContainer.addElement(this.bannerAd.bannerAdClip);
      }
      
      override public function cleanup() : void
      {
         super.cleanup();
         guiManager.getMain().getConnectionManager().sendCommand("UI|WD|AD|" + this.bannerAdPattern.paymentKey);
         this.bannerAd.cleanup();
      }
      
      private function closeBannerAd(param1:Event = null) : void
      {
         guiManager.closeWindow(this);
      }
      
      private function show() : void
      {
         this.init();
         this.x = this.startX;
         this.y = this.startY;
         TweenLite.to(this,this.scrollSpeed,{
            "x":this.targetX,
            "y":this.targetY,
            "onComplete":this.handleShowComplete
         });
      }
      
      public function hide() : void
      {
         this.valid = false;
         this.x = this.targetX;
         this.y = this.targetY;
         TweenLite.to(this,this.scrollSpeed,{
            "ease":Linear.easeNone,
            "x":this.startX,
            "y":this.startY,
            "onComplete":this.handleHideComplete
         });
         this.noiseChannel = AudioManager.playSoundEffect(42);
         TweenMax.delayedCall(0.25,this.stopSound);
      }
      
      private function stopSound() : void
      {
         if(this.noiseChannel != null)
         {
            AudioManager.removeLoop(this.noiseChannel);
         }
      }
      
      private function handleHideComplete() : void
      {
         this.simpleContainer.removeAllElements();
         this.cleanup();
      }
      
      private function handleShowComplete() : void
      {
         this.noiseChannel = AudioManager.playSoundEffect(42);
         TweenMax.delayedCall(0.25,this.stopSound);
      }
   }
}

package net.bigpoint.darkorbit.gui.windows
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFormat;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.InGameCatalog;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.elements.CTBScoreElement;
   
   public class CTBBeacon extends Sprite
   {
      
      private var id:int;
      
      private var scoreElement:CTBScoreElement;
      
      public var _companyID:int;
      
      private var homeSymbol:Bitmap;
      
      private var textField:TextField;
      
      public function CTBBeacon(param1:CTBScoreElement, param2:int, param3:int)
      {
         super();
         this.id = param2;
         this.scoreElement = param1;
         this._companyID = param3;
         this.init();
      }
      
      public function setHighlight() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc2_:Bitmap = _loc1_.getEmbededBitmap("ctb_" + Hero.factionID);
         this.addChildAt(_loc2_,0);
      }
      
      private function init() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc2_:Bitmap = _loc1_.getEmbededBitmap("company_symbol_" + this._companyID);
         _loc2_.x = 3.5;
         this.addChild(_loc2_);
         this.homeSymbol = _loc1_.getEmbededBitmap("home_symbol");
         this.homeSymbol.x = 17;
         this.addChild(this.homeSymbol);
      }
      
      public function update(param1:int) : void
      {
         var _loc2_:TextFormat = null;
         if(!this.scoreElement.contains(this))
         {
            this.scoreElement.addChild(this);
         }
         if(param1 == 0)
         {
            this.homeSymbol.visible = true;
            if(this.textField != null)
            {
               this.textField.visible = false;
            }
         }
         else
         {
            this.homeSymbol.visible = false;
            if(this.textField == null)
            {
               _loc2_ = new TextFormat(Styles.simpleFmt.font,11,16777215);
               this.textField = new TextField();
               this.textField.x = 17;
               this.textField.y = -3;
               this.textField.defaultTextFormat = _loc2_;
               this.textField.embedFonts = Styles.simpleEmbed;
               this.textField.wordWrap = true;
               this.textField.antiAliasType = AntiAliasType.ADVANCED;
               this.textField.width = this.scoreElement.getBackground().width - this.textField.x;
               this.textField.height = 10;
               this.textField.selectable = false;
               this.addChild(this.textField);
            }
            this.textField.text = InGameCatalog.instance.mapNames[param1];
         }
      }
      
      public function getID() : int
      {
         return this.id;
      }
      
      public function get companyID() : int
      {
         return this._companyID;
      }
      
      public function set companyID(param1:int) : void
      {
         this._companyID = param1;
      }
   }
}

package net.bigpoint.darkorbit.gui.windows
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Elastic;
   import com.greensock.easing.Expo;
   import flash.display.Bitmap;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.MouseEvent;
   import flash.events.TimerEvent;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.net.URLRequest;
   import flash.net.navigateToURL;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.utils.Timer;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class SimpleWindow extends MovieClip
   {
      
      public static const ZOOM_IN:String = "SimpleWindow.zoomIn";
      
      public static const ZOOM_OUT:String = "SimpleWindow.zoomOut";
      
      public static const ON_CLOSE:String = "SimpleWindow.onClose";
      
      public static const ON_RESIZE:String = "SimpleWindow.onResize";
      
      public static const ON_RESIZED:String = "SimpleWindow.onResized";
      
      public static const ON_MOVE:String = "SimpleWindow.onMove";
      
      public static const ON_MAXIMIZED:String = "SimpleWindow.onMaximized";
      
      public static const ON_MINIMIZED:String = "SimpleWindow.onMinimized";
      
      public static const ON_MINIMIZE:String = "SimpleWindow.onMinimize";
      
      public static const ON_MAXIMIZE_CLICKED:String = "SimpleWindow.onMaximizeClicked";
      
      public static const ON_MINIMIZE_CLICKED:String = "SimpleWindow.onMinimizeClicked";
      
      public static var POSITION_CENTER:int = 0;
      
      public static var POSITION_CENTER_HORIZONTAL:int = 1;
      
      public static var NO_ALIGN:int = 0;
      
      public static var ALIGN_VERTICAL:int = 1;
      
      public static var ALIGN_HORIZONTAL:int = 2;
      
      public static const WINDOW_CLASS_USER:int = 0;
      
      public static const WINDOW_CLASS_SHIP:int = 1;
      
      public static const WINDOW_CLASS_MINIMAP:int = 3;
      
      public static const WINDOW_CLASS_SETTINGS:int = 4;
      
      public static const WINDOW_CLASS_LOG:int = 5;
      
      public static const WINDOW_CLASS_TRADE:int = 6;
      
      public static const WINDOW_CLASS_LOGOUT:int = 7;
      
      public static const WINDOW_CLASS_CONNECTION:int = 8;
      
      public static const WINDOW_CLASS_BETA:int = 9;
      
      public static const WINDOW_CLASS_QUEST_SYSTEM:int = 10;
      
      public static const WINDOW_CLASS_HELP:int = 11;
      
      public static const WINDOW_CLASS_CONNECTION_LOST:int = 12;
      
      public static const WINDOW_CLASS_SPACEMAP:int = 13;
      
      public static const WINDOW_CLASS_HERO_DESTROYED:int = 14;
      
      public static const WINDOW_CLASS_BOOSTER:int = 15;
      
      public static const WINDOW_CLASS_SPACEBALL:int = 16;
      
      public static const WINDOW_CLASS_INVASION:int = 17;
      
      public static const WINDOW_CLASS_CTB:int = 18;
      
      public static const WINDOW_CLASS_TDM:int = 19;
      
      public static const WINDOW_CLASS_CHAT:int = 20;
      
      public static const WINDOW_CLASS_WARNING_PROMPT:int = 21;
      
      public static const WINDOW_CLASS_COMMAND_LINE:int = 22;
      
      public static const WINDOW_CLASS_GROUP_SYSTEM:int = 23;
      
      public static const WINDOW_CLASS_REFINEMENT:int = 24;
      
      public static const WINDOW_CLASS_REFINEMENT_UPDATE:int = 25;
      
      public static const WINDOW_CLASS_REFINEMENT_COUNT:int = 26;
      
      public static const WINDOW_CLASS_REFINEMENT_REFINE:int = 27;
      
      public static const WINDOW_CLASS_RESET_PROMPT:int = 28;
      
      public static const WINDOW_CLASS_SESSION_END:int = 29;
      
      public static const WINDOW_CLASS_REPAIR_SHIP:int = 30;
      
      public static const WINDOW_CLASS_AUTOSTART_WARNING:int = 31;
      
      public static const WINDOW_CLASS_ACHIEVMENT:int = 32;
      
      public static const WINDOW_CLASS_TECHS:int = 33;
      
      public static const WINDOW_CLASS_JACKPOTBATTLE:int = 34;
      
      public static const WINDOW_CLASS_NETWORK_MONITOR:int = 35;
      
      public static const WINDOW_CLASS_PET:int = 36;
      
      public static const WINDOW_CLASS_RANKED_HUNT_EVENT:int = 37;
      
      public static var SLOT_TYPE_NO_SLOT:int = 0;
      
      public static var SLOT_TYPE_STATIC:int = 1;
      
      public static var SLOT_TYPE_DYNAMIC_LEFT:int = 2;
      
      public static var SLOT_TYPE_DYNAMIC_RIGHT:int = 3;
      
      public static var WINDOW_TYPE_NORMAL:int = 0;
      
      public static var WINDOW_TYPE_WARNING:int = 1;
      
      private var windowContainer:MovieClip;
      
      private var window:MovieClip;
      
      public var resizementBounds:Rectangle;
      
      public var resizer:MovieClip;
      
      private var dragger:MovieClip;
      
      private var minimizeClicked:Boolean = false;
      
      private var closeButton:MovieClip;
      
      private var directionArrowTimer:Timer;
      
      private var directionArrow:MovieClip;
      
      private var zoominButton:MovieClip;
      
      private var zoomoutButton:MovieClip;
      
      private var closeBtnInitDistance:Number;
      
      private var zoominBtnInitDistance:Number;
      
      private var zoomoutBtnInitDistance:Number;
      
      private var minimizeButton:MovieClip;
      
      public var label:TextField;
      
      private var flashWindowCount:int;
      
      private var showCloseButton:Boolean;
      
      private var showLabel:Boolean = true;
      
      private var draggable:Boolean;
      
      private var resizable:Boolean;
      
      private var zoomable:Boolean;
      
      private var _modal:Boolean;
      
      private var fullDragger:Sprite;
      
      private var maximizeClicked:Boolean;
      
      private var displayDigits:Boolean;
      
      private var lastResizerPosition:Point;
      
      protected var guiManager:GuiManager;
      
      protected var dimensions:Array;
      
      private var containers:Array;
      
      private var oldResizerX:Number;
      
      private var oldResizerY:Number;
      
      private var blocker:Sprite;
      
      private var lastPosition:Point;
      
      private var minimizeIcon:MovieClip;
      
      private var minimizedWindowCount:int;
      
      private var _tweening:Boolean;
      
      public var classID:int;
      
      private var rootContainerMask:Sprite;
      
      private var rootContainer:MovieClip;
      
      private var icon:Bitmap;
      
      private var windowMask:MovieClip;
      
      private var slot:Bitmap;
      
      private var normalIcon:Bitmap;
      
      private var alwaysAtTop:Boolean;
      
      private var hoverIcon:Bitmap;
      
      private var selectedIcon:BitmapClip;
      
      private var actionDeactivated:Bitmap;
      
      private var maximizeOnClick:Boolean;
      
      private var minimizeOnClick:Boolean;
      
      private var slotType:int;
      
      private var windowType:int;
      
      private var saveSettings:Boolean;
      
      public var maxWindowWidth:int = 750;
      
      public var maxWindowHeight:int = 750;
      
      public var minWindowHeight:int = 100;
      
      public var shortcut:String;
      
      private var supportTransparency:Boolean;
      
      private var overlay:Sprite;
      
      public function SimpleWindow(param1:GuiManager, param2:int, param3:SWFFinisher, param4:Boolean = true, param5:Boolean = true, param6:Boolean = false, param7:Boolean = false, param8:Boolean = true, param9:Boolean = true, param10:int = 0, param11:Boolean = false, param12:String = "comb02_std.png", param13:String = "comb02_hover.png", param14:int = 0, param15:Boolean = false, param16:String = null, param17:Boolean = false)
      {
         var _loc19_:MovieClip = null;
         this.dimensions = [];
         this.containers = [];
         this.rootContainer = new MovieClip();
         super();
         this.cacheAsBitmap = true;
         this.guiManager = param1;
         this.classID = param2;
         this.slotType = param10;
         this.maximizeOnClick = param8;
         this.minimizeOnClick = param9;
         this.windowType = param14;
         this.saveSettings = param15;
         this.shortcut = param16;
         this.supportTransparency = param17;
         this.lastResizerPosition = new Point();
         this.lastPosition = new Point();
         this.alwaysAtTop = param11;
         if(param1.isWindowBlacklisted(param2))
         {
            this.visible = false;
         }
         var _loc18_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         this.slot = _loc18_.getEmbededBitmap("slot");
         this.normalIcon = _loc18_.getEmbededBitmap(param12);
         this.hoverIcon = _loc18_.getEmbededBitmap(param13);
         this.actionDeactivated = _loc18_.getEmbededBitmap("comb00_deactivated.png");
         this.selectedIcon = new BitmapClip(_loc18_.getEmbededMovieClip("windowFlashIcon"),"windowFlashIcon");
         this.selectedIcon.gotoAndStop(2);
         this.selectedIcon.x = -3;
         this.selectedIcon.y = -4;
         this.slot.x = -3;
         this.slot.y = -4;
         this.normalIcon.x = -3;
         this.normalIcon.y = -4;
         this.hoverIcon.x = -3;
         this.hoverIcon.y = -4;
         this.actionDeactivated.x = -3;
         this.actionDeactivated.y = -4;
         this.addChild(this.rootContainer);
         if(!(param6 && param4))
         {
            if(param6 && !param4)
            {
               this.windowContainer = MovieClip(param3.getEmbededMovieClip("windowContainer5"));
            }
            else if(param7 && !param4)
            {
               this.windowContainer = MovieClip(param3.getEmbededMovieClip("windowContainer3"));
            }
            else if(param4)
            {
               this.windowContainer = MovieClip(param3.getEmbededMovieClip("windowContainer2"));
            }
            else if(!param4)
            {
               this.windowContainer = MovieClip(param3.getEmbededMovieClip("windowContainer1"));
            }
         }
         this.windowContainer.addEventListener(MouseEvent.CLICK,this.handleWindowToFront);
         if(!Settings.showWindowsBackground && param17)
         {
            this.windowContainer.alpha = 0;
         }
         _loc19_ = this.windowContainer["windowMaskContainer"];
         _loc19_.mouseEnabled = false;
         _loc19_.cacheAsBitmap = true;
         this.windowMask = _loc19_["windowMask"];
         this.windowMask.mouseEnabled = false;
         var _loc20_:MovieClip = this.windowContainer["pattern"];
         _loc20_.mouseEnabled = false;
         _loc20_.cacheAsBitmap = true;
         _loc20_.mask = _loc19_;
         this.showCloseButton = param7;
         this.showLabel = this.showLabel;
         if(this._modal)
         {
            this.draggable = false;
         }
         else
         {
            this.draggable = param5;
         }
         this._modal = this._modal;
         if(param6)
         {
            param4 = false;
         }
         else
         {
            this.resizable = param4;
         }
         this.zoomable = param6;
         this.init();
         this.rootContainerMask = new Sprite();
         this.rootContainerMask.graphics.beginFill(16711680);
         this.rootContainerMask.graphics.drawRect(0,0,100,100);
         this.rootContainer.addChild(this.rootContainerMask);
         this.rootContainer.mask = this.rootContainerMask;
         var _loc21_:int = ScreenManager.getScreenWidth();
         if(this.maxWindowWidth > _loc21_)
         {
            this.maxWindowWidth = _loc21_ - 100;
         }
         var _loc22_:int = ScreenManager.getScreenHeight();
         if(this.maxWindowHeight > _loc22_)
         {
            this.maxWindowHeight = _loc22_ - 100;
         }
      }
      
      public function addLockOverlay(param1:int, param2:int, param3:int, param4:int, param5:uint = 4473924, param6:Number = 0.3) : void
      {
         this.lockWindow();
         if(this.overlay == null)
         {
            this.overlay = new Sprite();
            this.overlay.graphics.beginFill(param5,param6);
            this.overlay.graphics.drawRect(param1,param2,param3,param4);
            this.overlay.graphics.endFill();
            this.overlay.buttonMode = true;
            this.overlay.useHandCursor = true;
            this.addChild(this.overlay);
         }
      }
      
      public function removeLockOverlay() : void
      {
         if(this.overlay != null)
         {
            this.removeChild(this.overlay);
            this.overlay = null;
         }
         this.unlockWindow();
      }
      
      private function snapToGrid() : void
      {
         this.x = Math.floor(this.x / Settings.gridSize) * Settings.gridSize;
         this.y = Math.floor(this.y / Settings.gridSize) * Settings.gridSize;
      }
      
      private function handleWindowToFront(param1:MouseEvent) : void
      {
         var _loc2_:Sprite = Sprite(this.parent);
         _loc2_.swapChildren(this,_loc2_.getChildAt(_loc2_.numChildren - 1));
      }
      
      public function flashWindowIcon(param1:int = -1, param2:Boolean = false) : void
      {
         this.flashWindowCount = param1;
         TweenMax.killTweensOf(this.selectedIcon);
         this.selectedIcon.alpha = 0;
         this.selectedIcon.visible = true;
         TweenLite.to(this.selectedIcon,0.25,{
            "alpha":1,
            "onComplete":this.endFlash,
            "onCompleteParams":[this.selectedIcon,param2]
         });
      }
      
      public function startPointer() : void
      {
         this.stopPointer();
         this.directionArrow = ResourceManager.getMovieClip("ui","windowArrow");
         this.directionArrow.mouseEnabled = false;
         this.directionArrow.mouseChildren = false;
         this.directionArrow.x = this.getDynamicXPos();
         this.directionArrow.y = this.getDynamicYPos();
         this.directionArrow.scaleX = 0.7;
         this.directionArrow.scaleY = 0.7;
         this.directionArrow.rotation = -90;
         this.directionArrow.alpha = 0;
         this.updateArrowRotation(null);
         TweenLite.to(this.directionArrow,0.5,{"alpha":1});
         this.stage.addChild(this.directionArrow);
         this.handleWindowPointer1(this.directionArrow);
         this.directionArrowTimer = new Timer(40,0);
         this.directionArrowTimer.addEventListener(TimerEvent.TIMER,this.updateArrowRotation);
         this.directionArrowTimer.start();
      }
      
      private function getDynamicXPos() : int
      {
         var _loc1_:Point = this.localToGlobal(new Point(this.stage.x,this.stage.y));
         _loc1_.x += 14;
         return _loc1_.x;
      }
      
      private function getDynamicYPos() : int
      {
         var _loc1_:Point = this.localToGlobal(new Point(this.stage.x,this.stage.y));
         _loc1_.y += 14;
         return _loc1_.y;
      }
      
      public function stopPointer() : void
      {
         if(this.directionArrow != null)
         {
            TweenMax.killTweensOf(this.directionArrow);
            if(this.stage.contains(this.directionArrow))
            {
               TweenLite.to(this.directionArrow,0.5,{
                  "alpha":0,
                  "onComplete":this.directionArrow.parent.removeChild,
                  "onCompleteParams":[this.directionArrow]
               });
            }
         }
         if(this.directionArrowTimer != null)
         {
            this.directionArrowTimer.stop();
            this.directionArrowTimer.removeEventListener(TimerEvent.TIMER,this.updateArrowRotation);
         }
      }
      
      private function handleWindowPointer1(param1:MovieClip) : void
      {
         TweenLite.to(param1,0.5,{
            "x":this.getDynamicXPos(),
            "y":this.getDynamicYPos(),
            "onComplete":this.handleWindowPointer2,
            "onCompleteParams":[param1]
         });
      }
      
      private function handleWindowPointer2(param1:MovieClip) : void
      {
         var _loc2_:int = int(40 * Math.cos(param1.rotation * Math.PI / 180));
         var _loc3_:int = int(40 * Math.sin(param1.rotation * Math.PI / 180));
         TweenLite.to(param1,0.5,{
            "x":this.getDynamicXPos() + _loc2_,
            "y":this.getDynamicYPos() + _loc3_,
            "onComplete":this.handleWindowPointer1,
            "onCompleteParams":[param1]
         });
      }
      
      private function updateArrowRotation(param1:TimerEvent) : void
      {
         var _loc3_:int = 0;
         var _loc2_:Number = int(Math.atan2(this.y - ScreenManager.getHalfScreenHeight(),this.x - ScreenManager.getHalfScreenWidth()) * 180 / Math.PI);
         if(_loc2_ != 0)
         {
            _loc3_ = Math.round(_loc2_ + 180);
            this.directionArrow.rotation = _loc3_;
         }
      }
      
      public function endFlash(param1:DisplayObject, param2:Boolean) : void
      {
         TweenLite.to(param1,0.25,{
            "alpha":0,
            "onComplete":this.setBitmapInvisible,
            "onCompleteParams":[param1,param2]
         });
      }
      
      public function stopFlashWindowIcon() : void
      {
         this.flashWindowCount = 0;
         this.stopPointer();
      }
      
      protected function setBitmapInvisible(param1:DisplayObject, param2:Boolean) : void
      {
         param1.visible = false;
         if(this.flashWindowCount == -1)
         {
            this.flashWindowIcon(this.flashWindowCount,param2);
         }
         else
         {
            --this.flashWindowCount;
            if(this.flashWindowCount > 0)
            {
               this.flashWindowIcon(this.flashWindowCount,param2);
            }
            else
            {
               this.stopPointer();
            }
         }
      }
      
      public function checkPosition() : Boolean
      {
         var _loc1_:int = 80;
         if(this.x + _loc1_ < 0 || this.x + _loc1_ > ScreenManager.getScreenWidth() || this.y < -40 || this.y + 20 > ScreenManager.getScreenHeight() - 0)
         {
            this.resetPosition();
            return false;
         }
         return true;
      }
      
      public function setIcon(param1:Bitmap) : void
      {
         this.minimizeIcon = new MovieClip();
         this.slot.visible = false;
         this.normalIcon.visible = false;
         this.minimizeIcon.addChild(this.slot);
         this.minimizeIcon.addChild(this.normalIcon);
         this.hoverIcon.visible = false;
         this.minimizeIcon.addChild(this.hoverIcon);
         this.selectedIcon.visible = false;
         this.minimizeIcon.addChild(this.selectedIcon);
         this.actionDeactivated.visible = false;
         this.icon = param1;
         param1.x = 2;
         param1.y = 2;
         this.minimizeIcon.addChild(param1);
         if(!this._modal)
         {
            if(this.slotType != SLOT_TYPE_NO_SLOT)
            {
               this.minimizeIcon.addEventListener(MouseEvent.CLICK,this.toggleVisibility);
               this.minimizeIcon.addEventListener(MouseEvent.MOUSE_DOWN,this.onMouseDownIcon);
               this.minimizeIcon.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverMinimizeIcon);
               this.minimizeIcon.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutMinimizeIcon);
               this.minimizeIcon.buttonMode = true;
               if(!Settings.showWindowsBackground && this.supportTransparency)
               {
                  this.minimizeIcon.alpha = 0;
               }
            }
         }
         this.addChild(this.minimizeIcon);
         this.minimizeIcon.addChild(this.actionDeactivated);
      }
      
      public function setListeners() : void
      {
         this.setDraggerListeners();
         this.setResizerListeners();
         this.setZoomButtonListeners();
      }
      
      public function removeListeners() : void
      {
         this.removeDraggerTransparencyListeners();
         this.removeResizerTransparencyListeners();
         this.removeZoomButtonTransparencyListeners();
      }
      
      private function setDraggerListeners() : void
      {
         this.dragger.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverDragger);
         this.dragger.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutDragger);
      }
      
      private function setResizerListeners() : void
      {
         this.resizer.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverResizer);
         this.resizer.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutResizer);
      }
      
      private function setZoomButtonListeners() : void
      {
         this.zoominButton.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverMinimizeIcon);
         this.zoominButton.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutMinimizeIcon);
         this.zoomoutButton.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverMinimizeIcon);
         this.zoomoutButton.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutMinimizeIcon);
      }
      
      private function removeDraggerTransparencyListeners() : void
      {
         this.dragger.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverDragger);
         this.dragger.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutDragger);
      }
      
      private function removeResizerTransparencyListeners() : void
      {
         this.resizer.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverResizer);
         this.resizer.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutResizer);
      }
      
      private function removeZoomButtonTransparencyListeners() : void
      {
         this.zoominButton.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverMinimizeIcon);
         this.zoominButton.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutMinimizeIcon);
         this.zoomoutButton.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverMinimizeIcon);
         this.zoomoutButton.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutMinimizeIcon);
      }
      
      private function handleMouseOverMinimizeIcon(param1:MouseEvent) : void
      {
         if(!Settings.showWindowsBackground && this.supportTransparency)
         {
            this.fadeInWindow();
         }
         if(this.classID == SimpleWindow.WINDOW_CLASS_HELP)
         {
            TooltipControl.getInstance().toggleStickyToolTips();
         }
         if(this.isMaximized())
         {
            return;
         }
         this.hoverIcon.visible = true;
         TweenLite.to(this.hoverIcon,0.5,{"alpha":1});
      }
      
      public function fadeOutWindow() : void
      {
         if(this.supportTransparency && this.isMaximized())
         {
            TweenLite.to(this.windowContainer,0.25,{"alpha":0});
            TweenLite.to(this.minimizeIcon,0.25,{"alpha":0});
         }
      }
      
      public function fadeInWindow() : void
      {
         if(this.supportTransparency && this.isMaximized())
         {
            this.windowContainer.visible = true;
            TweenLite.to(this.windowContainer,0.25,{"alpha":Settings.maxWindowsTransparency});
            TweenLite.to(this.minimizeIcon,0.25,{"alpha":Settings.maxWindowsTransparency});
         }
      }
      
      private function handleMouseOutMinimizeIcon(param1:MouseEvent) : void
      {
         if(!Settings.showWindowsBackground && this.supportTransparency)
         {
            TweenLite.to(this.windowContainer,0.25,{"alpha":0});
            if(this.isMaximized() && !this.minimizeClicked)
            {
               TweenLite.to(this.minimizeIcon,0.25,{"alpha":0});
            }
         }
         if(this.classID == SimpleWindow.WINDOW_CLASS_HELP)
         {
            TooltipControl.getInstance().toggleStickyToolTips();
         }
         TweenLite.to(this.hoverIcon,0.5,{
            "alpha":0,
            "onComplete":this.setInvisible,
            "onCompleteParams":[this.hoverIcon]
         });
      }
      
      protected function setInvisible(param1:Bitmap) : void
      {
         if(TweenMax.isTweening(param1))
         {
            return;
         }
         param1.visible = false;
      }
      
      public function toggleVisibility(param1:MouseEvent) : void
      {
         var request:URLRequest = null;
         var evt:MouseEvent = param1;
         if(this.classID == SimpleWindow.WINDOW_CLASS_HELP)
         {
            request = new URLRequest(Main.helpLink);
            try
            {
               navigateToURL(request,"_blank");
            }
            catch(e:Error)
            {
            }
            return;
         }
         if(this.actionDeactivated.visible)
         {
            return;
         }
         if(TweenMax.isTweening(this.rootContainer) || TweenMax.isTweening(this.rootContainerMask))
         {
            return;
         }
         if(this.rootContainer.visible)
         {
            this.maximizeClicked = false;
            if(this.minimizeOnClick)
            {
               this.minimize();
               this.saveWindowSetting(false);
            }
            dispatchEvent(new Event(SimpleWindow.ON_MINIMIZE_CLICKED));
         }
         else
         {
            this.maximizeClicked = true;
            if(this.maximizeOnClick)
            {
               this.maximize();
               this.saveWindowSetting(true);
            }
            dispatchEvent(new Event(SimpleWindow.ON_MAXIMIZE_CLICKED));
         }
      }
      
      public function saveWindowSetting(param1:Boolean = false) : void
      {
         var _loc4_:SimpleWindow = null;
         var _loc5_:String = null;
         if(!this.saveSettings)
         {
            return;
         }
         var _loc2_:Array = this.guiManager.getWindows();
         var _loc3_:String = "";
         for each(_loc4_ in _loc2_)
         {
            if(_loc4_.isSaveSettings())
            {
               _loc5_ = "0";
               if(_loc4_ != this)
               {
                  if(_loc4_.isMaximized())
                  {
                     _loc5_ = "1";
                  }
               }
               else if(param1)
               {
                  _loc5_ = "1";
               }
               _loc3_ += _loc4_.classID + ServerCommands.SETTING_PROPERTY_SEPERATOR + _loc4_.lastPosition.x + ServerCommands.SETTING_PROPERTY_SEPERATOR + _loc4_.lastPosition.y + ServerCommands.SETTING_PROPERTY_SEPERATOR + _loc5_ + ServerCommands.SETTING_PROPERTY_SEPERATOR;
            }
         }
         this.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.CLIENT_SETTING,[ServerCommands.WINDOW_SETTINGS + ServerCommands.SETTING_KEY_SEPERATOR + Settings.resolutionID,Main.removeCommaAtEnd(_loc3_)]);
      }
      
      public function isMaximized() : Boolean
      {
         if(this.rootContainer.visible)
         {
            return true;
         }
         return false;
      }
      
      public function minimize(param1:Boolean = true) : void
      {
         this.minimizeClicked = true;
         this._tweening = true;
         this.maximizeClicked = false;
         parent.removeChild(this);
         this.guiManager.getMain().screenManager.getIconLayer().addChild(this);
         dispatchEvent(new Event(SimpleWindow.ON_MINIMIZE));
         this.lastPosition.x = this.x;
         this.lastPosition.y = this.y;
         if(this.slotType == SLOT_TYPE_DYNAMIC_LEFT)
         {
            this.minimizedWindowCount = this.guiManager.getMinimizedWindowCount();
            this.guiManager.increaseMinimizedWindowCount();
            this.guiManager.addToLeftDynamicSlot(this.classID);
         }
         if(param1)
         {
            TweenLite.to(this.rootContainerMask,0.25,{
               "ease":Expo.easeOut,
               "height":25,
               "onComplete":this.onMinimizedVertical
            });
            this.slot.alpha = 0;
            this.slot.visible = true;
            TweenLite.to(this.slot,0.25,{"alpha":1});
            this.normalIcon.alpha = 0;
            this.normalIcon.visible = true;
            TweenLite.to(this.normalIcon,0.25,{"alpha":1});
         }
         else
         {
            this.slot.visible = true;
            this.normalIcon.visible = true;
            this.onMinimized(this.rootContainer,false);
         }
      }
      
      private function onMinimizedVertical() : void
      {
         TweenLite.to(this.rootContainerMask,0.25,{
            "ease":Expo.easeOut,
            "width":0,
            "onComplete":this.onMinimized,
            "onCompleteParams":[this.rootContainer,true]
         });
         TweenLite.to(this.rootContainer,0.25,{"alpha":0});
      }
      
      private function onMinimized(param1:MovieClip, param2:Boolean = true) : void
      {
         var _loc3_:Point = null;
         this.minimizeClicked = false;
         if(!Settings.showWindowsBackground && this.supportTransparency)
         {
            this.minimizeIcon.alpha = Settings.maxWindowsTransparency;
         }
         param1.visible = false;
         if(this.slotType == SLOT_TYPE_STATIC)
         {
            _loc3_ = this.guiManager.getTopMenu().getStaticButtonsSlotPosition(this.classID);
            if(param2)
            {
               TweenLite.to(this,0.5,{
                  "ease":Expo.easeOut,
                  "x":_loc3_.x
               });
               TweenLite.to(this,0.5,{
                  "ease":Expo.easeOut,
                  "y":_loc3_.y
               });
            }
            else
            {
               this.x = _loc3_.x;
               this.y = _loc3_.y;
            }
         }
         else if(this.slotType == SLOT_TYPE_DYNAMIC_LEFT)
         {
            this.guiManager.resortLeftSlots();
         }
         TweenLite.to(this.icon,0.5,{
            "x":1,
            "y":1
         });
         dispatchEvent(new Event(SimpleWindow.ON_MINIMIZED));
         this.selectedIcon.x = -3;
         this.selectedIcon.y = -4;
         this.selectedIcon.gotoAndStop(1);
         this._tweening = false;
      }
      
      public function maximize() : void
      {
         this._tweening = true;
         this.maximizeClicked = true;
         parent.removeChild(this);
         if(this.classID == SimpleWindow.WINDOW_CLASS_SETTINGS)
         {
            this.guiManager.getMain().screenManager.getWindowLayer2().addChild(this);
         }
         else
         {
            ScreenManager.getWindowLayer().addChild(this);
         }
         if(this.slotType == SLOT_TYPE_DYNAMIC_LEFT)
         {
            this.guiManager.decreaseMinimizedWindowCount();
            this.guiManager.removeFromLeftDynamicSlot(this.classID);
         }
         TweenLite.to(this,0.5,{
            "ease":Expo.easeOut,
            "x":this.lastPosition.x,
            "y":this.lastPosition.y,
            "onComplete":this.onCompleteLastPosition
         });
         TweenLite.to(this.icon,0.5,{
            "x":2,
            "y":2
         });
      }
      
      private function onCompleteLastPosition() : void
      {
         this.rootContainer.visible = true;
         this.rootContainerMask.width = 0;
         TweenLite.to(this.rootContainerMask,0.25,{
            "ease":Expo.easeOut,
            "width":this.window.width,
            "onComplete":this.onMaximizedVertical
         });
         TweenLite.to(this.rootContainer,0.25,{"alpha":1});
         this.rootContainerMask.height = 25;
         TweenLite.to(this.slot,0.25,{
            "alpha":0,
            "onComplete":this.onMaximized2,
            "onCompleteParams":[this.slot]
         });
         TweenLite.to(this.normalIcon,0.25,{
            "alpha":0,
            "onComplete":this.onMaximized2,
            "onCompleteParams":[this.normalIcon]
         });
         TweenMax.delayedCall(0.25,this.onMaximized3);
      }
      
      private function onMaximizedVertical() : void
      {
         TweenLite.to(this.rootContainerMask,0.25,{
            "ease":Expo.easeOut,
            "height":this.window.height
         });
      }
      
      private function onMaximized2(param1:Bitmap) : void
      {
         param1.visible = true;
         this.createFullDragger();
      }
      
      private function onMaximized3() : void
      {
         if(!Settings.showWindowsBackground && this.supportTransparency)
         {
            TweenLite.to(this.minimizeIcon,0.25,{"alpha":0});
            TweenLite.to(this.windowContainer,0.25,{"alpha":0});
         }
         dispatchEvent(new Event(SimpleWindow.ON_MAXIMIZED));
         this.selectedIcon.x = -1;
         this.selectedIcon.y = -4;
         this.selectedIcon.gotoAndStop(2);
         this._tweening = false;
      }
      
      public function setPredefinedDimension() : void
      {
         var _loc1_:Point = null;
         if(this.isDisplayDigits())
         {
            _loc1_ = this.dimensions[1];
            if(_loc1_ == null)
            {
               _loc1_ = this.dimensions[0];
            }
            this.setDimension(_loc1_.x,_loc1_.y);
         }
         else
         {
            _loc1_ = this.dimensions[0];
            this.setDimension(_loc1_.x,_loc1_.y);
         }
      }
      
      public function addWindowDimension(param1:Point) : void
      {
         this.dimensions.push(param1);
      }
      
      public function setPosition(param1:int) : void
      {
         switch(param1)
         {
            case POSITION_CENTER:
               this.x = ScreenManager.getHalfScreenWidth() - this.window.width / 2;
               this.y = ScreenManager.getHalfScreenHeight() - this.window.height / 2;
               break;
            case POSITION_CENTER_HORIZONTAL:
               this.x = ScreenManager.getHalfScreenWidth() - this.window.width / 2;
         }
         if(this._modal)
         {
            this.blocker.x = -this.x;
            this.blocker.y = -this.y;
         }
      }
      
      private function init() : void
      {
         this.window = this.windowContainer["window"];
         this.dragger = this.windowContainer["dragger"];
         this.resizer = this.windowContainer["resizer"];
         this.zoominButton = this.windowContainer["zoominButton"];
         this.zoomoutButton = this.windowContainer["zoomoutButton"];
         this.closeButton = this.windowContainer["closeBtn"];
         this.minimizeButton = this.windowContainer["minimizeBtn"];
         this.window.cacheAsBitmap = true;
         if(this.dragger != null)
         {
            this.dragger.cacheAsBitmap = true;
         }
         if(this.resizer != null)
         {
            this.resizer.cacheAsBitmap = true;
         }
         if(this.zoominButton != null)
         {
            this.zoominButton.cacheAsBitmap = true;
         }
         if(this.zoomoutButton != null)
         {
            this.zoomoutButton.cacheAsBitmap = true;
         }
         if(this.closeButton != null)
         {
            this.closeButton.cacheAsBitmap = true;
         }
         if(this.minimizeButton != null)
         {
            this.minimizeButton.cacheAsBitmap = true;
         }
         if(this.showCloseButton)
         {
            this.closeBtnInitDistance = this.window.width - this.closeButton.x;
            this.closeButton.gotoAndStop(1);
            this.closeButton.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverCloseBtn);
            this.closeButton.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutCloseBtn);
            this.closeButton.addEventListener(MouseEvent.CLICK,this.handleCloseBtnClick);
            this.closeButton.buttonMode = true;
         }
         else
         {
            this.windowContainer.removeChild(this.closeButton);
         }
         if(this.draggable)
         {
            this.dragger.alpha = 0;
            this.dragger.addEventListener(MouseEvent.MOUSE_UP,this.handleMouseUp);
            this.dragger.addEventListener(MouseEvent.MOUSE_DOWN,this.handleMouseDownDragger);
            if(!Settings.showWindowsBackground && this.supportTransparency)
            {
               this.setDraggerListeners();
            }
            this.updateDraggerButtonMode();
         }
         else
         {
            this.windowContainer.removeChild(this.dragger);
         }
         if(this.resizable)
         {
            this.resizer.alpha = 0;
            this.resizer.addEventListener(MouseEvent.MOUSE_DOWN,this.handleMouseDownResizer);
            if(!Settings.showWindowsBackground && this.supportTransparency)
            {
               this.setResizerListeners();
            }
            this.resizer.buttonMode = true;
         }
         else
         {
            this.windowContainer.removeChild(this.resizer);
         }
         if(this.zoomable)
         {
            this.zoominBtnInitDistance = this.window.width - this.zoominButton.x;
            this.zoominButton.gotoAndStop(1);
            this.zoominButton.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverZoominBtn);
            this.zoominButton.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutZoominBtn);
            this.zoominButton.addEventListener(MouseEvent.CLICK,this.handleZoominBtnClick);
            this.zoominButton.buttonMode = true;
            this.zoomoutBtnInitDistance = this.window.width - this.zoomoutButton.x;
            this.zoomoutButton.gotoAndStop(1);
            this.zoomoutButton.addEventListener(MouseEvent.MOUSE_OVER,this.handleZoomoutBtnMouseOver);
            this.zoomoutButton.addEventListener(MouseEvent.MOUSE_OUT,this.handleZoomoutBtnMouseOut);
            this.zoomoutButton.addEventListener(MouseEvent.CLICK,this.handleZoomoutBtnClick);
            this.zoomoutButton.buttonMode = true;
            if(!Settings.showWindowsBackground && this.supportTransparency)
            {
               this.setZoomButtonListeners();
            }
         }
         else
         {
            this.windowContainer.removeChild(this.zoominButton);
            this.windowContainer.removeChild(this.zoomoutButton);
         }
         if(this.showLabel)
         {
            this.label = this.windowContainer["label"];
            this.label.defaultTextFormat = Styles.windowTitleFmt;
            this.label.embedFonts = Styles.windowTitleEmbed;
            this.label.height = Styles.windowTitleFontHeight + 8;
            this.label.autoSize = TextFieldAutoSize.LEFT;
            this.label.mouseEnabled = false;
         }
         this.rootContainer.addChild(this.windowContainer);
      }
      
      private function handleMouseOverDragger(param1:MouseEvent) : void
      {
         this.fadeInWindow();
      }
      
      private function handleMouseOutDragger(param1:MouseEvent) : void
      {
         this.fadeOutWindow();
      }
      
      public function handleMouseDownResizer(param1:MouseEvent) : void
      {
         this.guiManager.setCheckResizableWindows(true);
         if(this.resizementBounds != null)
         {
            this.resizer.startDrag(false,this.resizementBounds);
         }
         else
         {
            this.resizer.startDrag();
         }
      }
      
      public function handleMouseOverResizer(param1:MouseEvent) : void
      {
         this.fadeInWindow();
      }
      
      public function handleMouseOutResizer(param1:MouseEvent) : void
      {
         this.fadeOutWindow();
      }
      
      public function checkSize() : void
      {
         if(this.lastResizerPosition.x != this.resizer.x || this.lastResizerPosition.y != this.resizer.y)
         {
            dispatchEvent(new Event(SimpleWindow.ON_RESIZED));
         }
         this.lastResizerPosition.x = this.resizer.x;
         this.lastResizerPosition.y = this.resizer.y;
      }
      
      private function handleMouseDownDragger(param1:MouseEvent) : void
      {
         if(Settings.dragWindowsAlways || !this.guiManager.getMenuManager().getMainMenu().guiLocked)
         {
            this.guiManager.setCheckWindowPositions(true);
            this.startDrag();
            this.parent.swapChildren(this,parent.getChildAt(parent.numChildren - 1));
         }
      }
      
      private function handleMouseUpDragger(param1:MouseEvent) : void
      {
         this.snapToGrid();
         this.saveWindowPosition();
      }
      
      private function onMouseDownIcon(param1:MouseEvent) : void
      {
         if(this.rootContainer.visible)
         {
            return;
         }
         if(!this.isMaximized())
         {
            return;
         }
         this.startDrag();
      }
      
      public function autoSize() : void
      {
         this.setWidth(-1);
         this.setHeight(-1);
      }
      
      private function getAutoHeight() : int
      {
         var _loc3_:SimpleContainer = null;
         var _loc1_:int = 0;
         var _loc2_:int = 0;
         while(_loc2_ < this.containers.length)
         {
            _loc3_ = this.containers[_loc2_];
            if(_loc3_.height > _loc1_)
            {
               _loc1_ = _loc3_.height;
            }
            _loc2_++;
         }
         return _loc1_ + 25;
      }
      
      private function getAutoWidth() : int
      {
         var _loc3_:SimpleContainer = null;
         var _loc1_:int = 0;
         var _loc2_:int = 0;
         while(_loc2_ < this.containers.length)
         {
            _loc3_ = this.containers[_loc2_];
            _loc1_ += _loc3_.width;
            _loc2_++;
         }
         return _loc1_ + 15;
      }
      
      public function setDimension(param1:int, param2:int) : void
      {
         this.setWidth(param1);
         this.setHeight(param2);
      }
      
      public function getWindowDimension() : Point
      {
         return new Point(this.resizer.x,this.resizer.y);
      }
      
      private function saveResizerPosition() : void
      {
         if(this.resizable)
         {
            this.lastResizerPosition.x = this.resizer.x;
            this.lastResizerPosition.y = this.resizer.y;
         }
      }
      
      public function setWidth(param1:int) : void
      {
         if(param1 == -1)
         {
            param1 = this.getAutoWidth();
         }
         this.resizer.x = param1;
         this.saveResizerPosition();
         this.window.width = this.resizer.x + this.resizer.width;
         this.rootContainerMask.width = this.window.width;
         if(this.windowMask != null)
         {
            this.windowMask.width = this.window.width;
         }
      }
      
      public function setHeight(param1:int) : void
      {
         if(param1 == -1)
         {
            param1 = this.getAutoHeight();
         }
         this.resizer.y = param1;
         this.saveResizerPosition();
         this.window.height = this.resizer.y + this.resizer.height;
         this.rootContainerMask.height = this.window.height;
         if(this.windowMask != null)
         {
            this.windowMask.height = this.window.height;
         }
      }
      
      public function refreshMask() : void
      {
         ++this.oldResizerX;
         this.refreshWindow();
      }
      
      public function refreshWindow() : void
      {
         if(this.resizable || this.zoomable)
         {
            if(this.resizer.x != this.oldResizerX || this.resizer.y != this.oldResizerY)
            {
               if(this.resizer.x < 150)
               {
                  this.resizer.x = 150;
               }
               if(this.resizer.y < this.minWindowHeight)
               {
                  this.resizer.y = this.minWindowHeight;
               }
               if(this.resizer.x > this.maxWindowWidth)
               {
                  this.resizer.x = this.maxWindowWidth;
               }
               if(this.resizer.y > this.maxWindowHeight)
               {
                  this.resizer.y = this.maxWindowHeight;
               }
               this.window.width = this.resizer.x + this.resizer.width;
               this.window.height = this.resizer.y + this.resizer.height;
               if(this.windowMask != null)
               {
                  this.windowMask.width = this.window.width;
                  this.windowMask.height = this.window.height;
                  this.rootContainerMask.width = this.window.width;
                  this.rootContainerMask.height = this.window.height;
               }
               dispatchEvent(new Event(SimpleWindow.ON_RESIZE));
            }
         }
         this.oldResizerX = this.resizer.x;
         this.oldResizerY = this.resizer.y;
         if(this.draggable)
         {
            this.dragger.width = this.window.width;
         }
         if(this.showCloseButton)
         {
            this.closeButton.x = this.window.width - this.closeBtnInitDistance;
         }
         if(this.zoomable)
         {
            this.zoominButton.x = this.window.width - this.zoominBtnInitDistance;
            this.zoomoutButton.x = this.window.width - this.zoomoutBtnInitDistance;
         }
      }
      
      private function handleMouseOverCloseBtn(param1:MouseEvent) : void
      {
         this.closeButton.gotoAndStop(2);
      }
      
      private function handleMouseOutCloseBtn(param1:MouseEvent) : void
      {
         this.closeButton.gotoAndStop(1);
      }
      
      private function handleCloseBtnClick(param1:MouseEvent) : void
      {
         this.cleanup();
      }
      
      private function handleMouseOverZoominBtn(param1:MouseEvent) : void
      {
         this.zoominButton.gotoAndStop(2);
      }
      
      private function handleMouseOutZoominBtn(param1:MouseEvent) : void
      {
         this.zoominButton.gotoAndStop(1);
      }
      
      private function handleZoominBtnClick(param1:MouseEvent) : void
      {
         dispatchEvent(new Event(SimpleWindow.ZOOM_IN));
      }
      
      private function handleZoomoutBtnMouseOver(param1:MouseEvent) : void
      {
         this.zoomoutButton.gotoAndStop(2);
      }
      
      private function handleZoomoutBtnMouseOut(param1:MouseEvent) : void
      {
         this.zoomoutButton.gotoAndStop(1);
      }
      
      private function handleZoomoutBtnClick(param1:MouseEvent) : void
      {
         dispatchEvent(new Event(SimpleWindow.ZOOM_OUT));
      }
      
      public function cleanup() : void
      {
         this.windowContainer.removeEventListener(MouseEvent.CLICK,this.handleWindowToFront);
         if(this.showCloseButton)
         {
            this.closeButton.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverCloseBtn);
            this.closeButton.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutCloseBtn);
            this.closeButton.removeEventListener(MouseEvent.CLICK,this.handleCloseBtnClick);
         }
         if(this.draggable)
         {
            this.dragger.removeEventListener(MouseEvent.MOUSE_UP,this.handleMouseUp);
            this.dragger.removeEventListener(MouseEvent.MOUSE_DOWN,this.handleMouseDownDragger);
            this.removeDraggerTransparencyListeners();
         }
         if(this.resizable)
         {
            this.resizer.removeEventListener(MouseEvent.MOUSE_DOWN,this.handleMouseDownResizer);
            this.removeResizerTransparencyListeners();
         }
         if(this.zoomable)
         {
            this.zoominButton.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverZoominBtn);
            this.zoominButton.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutZoominBtn);
            this.zoominButton.removeEventListener(MouseEvent.CLICK,this.handleZoominBtnClick);
            this.zoomoutButton.removeEventListener(MouseEvent.MOUSE_OVER,this.handleZoomoutBtnMouseOver);
            this.zoomoutButton.removeEventListener(MouseEvent.MOUSE_OUT,this.handleZoomoutBtnMouseOut);
            this.zoomoutButton.removeEventListener(MouseEvent.CLICK,this.handleZoomoutBtnClick);
            this.removeZoomButtonTransparencyListeners();
         }
         if(this.minimizeIcon != null)
         {
            this.minimizeIcon.removeEventListener(MouseEvent.CLICK,this.toggleVisibility);
            this.minimizeIcon.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOverMinimizeIcon);
            this.minimizeIcon.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOutMinimizeIcon);
            this.minimizeIcon.removeEventListener(MouseEvent.MOUSE_DOWN,this.onMouseDownIcon);
         }
         TweenLite.to(this,0.25,{
            "alpha":0,
            "onComplete":this.handleCloseWindowComplete
         });
         this.modal = false;
         this.stopPointer();
      }
      
      public function setLabelText(param1:String) : void
      {
         var _loc2_:String = BPLocale.getText(param1);
         if(this.classID == SimpleWindow.WINDOW_CLASS_HELP)
         {
            TooltipControl.getInstance().addToolTip(this.minimizeIcon,_loc2_ + "\n" + Main.version);
            return;
         }
         if(_loc2_ != null)
         {
            this.label.text = _loc2_;
            if(this.minimizeIcon != null)
            {
               TooltipControl.getInstance().addToolTip(this.minimizeIcon,_loc2_);
            }
         }
      }
      
      private function handleCloseWindowComplete() : void
      {
         delete this.guiManager.getWindows()[int(this.classID)];
         parent.removeChild(this);
         dispatchEvent(new Event(SimpleWindow.ON_CLOSE));
      }
      
      private function handleMouseUp(param1:MouseEvent) : void
      {
         this.guiManager.setCheckWindowPositions(false);
         if(!this.checkPosition())
         {
            return;
         }
         if(!this.rootContainer.visible)
         {
            return;
         }
         if(this.lastPosition.x != this.x || this.lastPosition.y != this.y)
         {
            dispatchEvent(new Event(SimpleWindow.ON_MOVE));
         }
         this.lastPosition.x = this.x;
         this.lastPosition.y = this.y;
         this.saveWindowSetting(true);
      }
      
      private function saveWindowPosition() : void
      {
         this.guiManager.setCheckWindowPositions(false);
         if(!this.checkPosition())
         {
            return;
         }
         if(!this.rootContainer.visible)
         {
            return;
         }
         if(this.lastPosition.x != this.x || this.lastPosition.y != this.y)
         {
            dispatchEvent(new Event(SimpleWindow.ON_MOVE));
         }
         this.lastPosition.x = this.x;
         this.lastPosition.y = this.y;
         this.saveWindowSetting(true);
      }
      
      public function getWindow() : MovieClip
      {
         return this.window;
      }
      
      public function addContainer(param1:SimpleContainer) : void
      {
         this.containers.push(param1);
         this.rootContainer.addChild(param1);
      }
      
      public function removeContainerAt(param1:int) : void
      {
         var _loc2_:SimpleContainer = this.containers[param1];
         if(_loc2_ != null)
         {
            if(this.rootContainer.contains(_loc2_))
            {
               this.rootContainer.removeChild(_loc2_);
               this.containers.splice(param1,1);
            }
         }
      }
      
      public function getContainer(param1:int) : SimpleContainer
      {
         var _loc3_:SimpleContainer = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.containers.length)
         {
            _loc3_ = this.containers[_loc2_];
            if(_loc3_.getClassID() == param1)
            {
               return _loc3_;
            }
            _loc2_++;
         }
         return null;
      }
      
      public function removeContainer(param1:SimpleContainer) : void
      {
         var _loc3_:SimpleContainer = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.containers.length)
         {
            _loc3_ = this.containers[_loc2_];
            if(_loc3_ == param1)
            {
               this.rootContainer.removeChild(param1);
               this.containers.splice(_loc2_,1);
            }
            _loc2_++;
         }
      }
      
      public function getContainerAt(param1:int) : SimpleContainer
      {
         return this.containers[param1];
      }
      
      public function getID() : int
      {
         return this.classID;
      }
      
      public function isResizable() : Boolean
      {
         return this.resizable;
      }
      
      public function lockWindow() : void
      {
         this.actionDeactivated.visible = true;
         this.minimizeIcon.buttonMode = false;
      }
      
      public function isLocked() : Boolean
      {
         if(this.actionDeactivated.visible && !this.minimizeIcon.buttonMode)
         {
            return true;
         }
         return false;
      }
      
      public function unlockWindow() : void
      {
         this.actionDeactivated.visible = false;
         this.minimizeIcon.buttonMode = true;
      }
      
      public function isDisplayDigits() : Boolean
      {
         return this.displayDigits;
      }
      
      public function setDisplayDigits(param1:Boolean) : void
      {
         this.displayDigits = param1;
      }
      
      public function getSlotType() : int
      {
         return this.slotType;
      }
      
      public function isMaximizeClicked() : Boolean
      {
         return this.maximizeClicked;
      }
      
      override public function set x(param1:Number) : void
      {
         super.x = int(param1);
      }
      
      override public function set y(param1:Number) : void
      {
         super.y = int(param1);
      }
      
      public function resetPosition() : void
      {
         TweenLite.to(this,0.5,{
            "ease":Elastic.easeOut,
            "x":this.lastPosition.x,
            "y":this.lastPosition.y
         });
         this.guiManager.setCheckWindowPositions(false);
      }
      
      public function setLastPosition() : void
      {
         this.lastPosition.x = this.x;
         this.lastPosition.y = this.y;
      }
      
      public function get modal() : Boolean
      {
         return this._modal;
      }
      
      public function set modal(param1:Boolean) : void
      {
         this._modal = param1;
         if(this._modal && this.blocker == null)
         {
            this.blocker = new Sprite();
            this.blocker.graphics.beginFill(4278190080);
            this.blocker.graphics.drawRect(0,0,ScreenManager.getScreenWidth(),ScreenManager.getScreenHeight());
            this.blocker.alpha = 0.5;
            this.parent.addChild(this.blocker);
            this.parent.swapChildren(this,this.blocker);
         }
         else if(this.blocker != null && this.parent.contains(this.blocker))
         {
            this.parent.removeChild(this.blocker);
         }
      }
      
      public function isSaveSettings() : Boolean
      {
         return this.saveSettings;
      }
      
      public function get tweeening() : Boolean
      {
         return this._tweening;
      }
      
      public function getRootContainer() : MovieClip
      {
         return this.rootContainer;
      }
      
      public function setResizementBounds(param1:Rectangle) : void
      {
         this.resizementBounds = param1;
      }
      
      public function createFullDragger() : void
      {
         if(!this.guiManager.getMenuManager().getMainMenu().guiLocked && this.saveSettings && this.isMaximized())
         {
            if(this.fullDragger != null && this.contains(this.fullDragger))
            {
               this.removeFullDragger();
            }
            this.fullDragger = new Sprite();
            this.fullDragger.graphics.beginFill(16711680);
            this.fullDragger.graphics.drawRect(0,0,this.window.width,this.window.height);
            this.fullDragger.alpha = 0.3;
            this.fullDragger.addEventListener(MouseEvent.MOUSE_DOWN,this.handleMouseDownDragger);
            this.fullDragger.addEventListener(MouseEvent.MOUSE_UP,this.handleMouseUpDragger);
            this.fullDragger.buttonMode = true;
            this.addChild(this.fullDragger);
         }
      }
      
      public function removeFullDragger() : void
      {
         if(this.saveSettings && this.fullDragger != null && this.isMaximized())
         {
            this.fullDragger.removeEventListener(MouseEvent.MOUSE_DOWN,this.handleMouseDownDragger);
            this.fullDragger.removeEventListener(MouseEvent.MOUSE_UP,this.handleMouseUpDragger);
            this.removeChild(this.fullDragger);
         }
      }
      
      public function updateDraggerButtonMode() : void
      {
         if(this.dragger != null)
         {
            this.dragger.buttonMode = Settings.dragWindowsAlways;
         }
      }
      
      public function blink() : void
      {
         var _loc1_:Number = this.windowContainer.alpha;
         this.windowContainer.alpha = 1;
         this.minimizeIcon.alpha = 1;
         TweenMax.to(this.rootContainer,0.5,{
            "onComplete":this.resetWindowContainerStatus,
            "onCompleteParams":[_loc1_],
            "repeat":10,
            "yoyo":true,
            "glowFilter":{
               "color":15327936,
               "quality":2,
               "alpha":2,
               "blurX":30,
               "blurY":30,
               "remove":true
            }
         });
      }
      
      private function resetWindowContainerStatus(param1:Number) : void
      {
         this.windowContainer.alpha = param1;
         this.minimizeIcon.alpha = param1;
      }
   }
}

package net.bigpoint.darkorbit.gui.windows
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import flash.events.MouseEvent;
   import flash.events.TimerEvent;
   import flash.geom.Point;
   import flash.media.SoundChannel;
   import flash.text.TextFormatAlign;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.LogMessage;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.ButtonElement;
   import net.bigpoint.darkorbit.gui.elements.TextAreaElement;
   import net.bigpoint.darkorbit.gui.elements.VideoElement;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   
   public class VideoWindow extends SimpleWindow
   {
      
      public static const NOTIFICATION_FPS:int = 9876;
      
      public var startX:int = 0;
      
      public var startY:int = 0;
      
      public var targetX:int = 0;
      
      public var targetY:int = 0;
      
      public var align:String = "n";
      
      public var scrollSpeed:Number = 0.5;
      
      private var simpleContainer:SimpleContainer;
      
      private var videoElement:VideoElement;
      
      private var textAreaElement:TextAreaElement;
      
      public var videoID:int;
      
      public var videoClassID:int;
      
      private var logWriter:Timer;
      
      public var languageKeys:Array = [];
      
      private var continueButton:ButtonElement;
      
      private var fasterButton:ButtonElement;
      
      private var logCharIndex:int = 0;
      
      private var noiseChannel:SoundChannel;
      
      private var logMessage:LogMessage;
      
      private var valid:Boolean;
      
      public var showButtons:Boolean;
      
      private var factionID:int;
      
      public function VideoWindow(param1:GuiManager, param2:int, param3:int, param4:int, param5:String, param6:Boolean, param7:int = 0)
      {
         super(param1,param2,SWFFinisher(ResourceManager.fileCollection.getFinisher("window1")),false,param4 != VideoElement.CLASS_COMMANDER,false,param4 != VideoElement.CLASS_COMMANDER,false,false,SimpleWindow.SLOT_TYPE_NO_SLOT,true,"comb02_std.png","comb02_hover.png",SimpleWindow.WINDOW_TYPE_NORMAL,false);
         this.videoID = param3;
         this.videoClassID = param4;
         this.factionID = param7;
         this.align = param5;
         this.showButtons = param6;
      }
      
      public function init() : void
      {
         this.simpleContainer = new SimpleContainer(guiManager,SimpleContainer.CLASS_DEFAULT);
         this.videoElement = new VideoElement(this.videoID,this.videoClassID,this.factionID);
         this.simpleContainer.addElement(this.videoElement);
         this.textAreaElement = new TextAreaElement(238,125,TextFormatAlign.LEFT);
         this.simpleContainer.addElement(this.textAreaElement,SimpleContainer.ALIGN_HORIZONTAL);
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         if(this.showButtons)
         {
            this.fasterButton = new ButtonElement(ButtonElement.TYPE_TUTORIAL_FASTER,BPLocale.getText("video_btn_showAll"),_loc1_.getEmbededMovieClip("button1"));
            this.fasterButton.addEventListener(MouseEvent.CLICK,this.handleFasterButtonClick);
            this.fasterButton.x = this.textAreaElement.textArea.width + this.videoElement.border.width - this.fasterButton.width;
            this.fasterButton.y = this.videoElement.border.height - this.fasterButton.height;
            this.fasterButton.visible = false;
            this.simpleContainer.addElement(this.fasterButton,SimpleContainer.NO_ALIGN);
            this.continueButton = new ButtonElement(ButtonElement.TYPE_TUTORIAL_CONTINUE,"",_loc1_.getEmbededMovieClip("button1"));
            this.continueButton.addEventListener(MouseEvent.CLICK,this.handleContinueButtonClick);
            this.simpleContainer.addElement(this.continueButton,SimpleContainer.NO_ALIGN);
            this.continueButton.y = this.videoElement.border.height - this.continueButton.height;
            this.continueButton.visible = false;
            this.updateContinueButtonLabel();
         }
         this.addContainer(this.simpleContainer);
         this.simpleContainer.x = 15;
         this.simpleContainer.y = 35;
         var _loc2_:Point = dimensions[0];
         var _loc3_:int = _loc2_.x;
         var _loc4_:int = _loc2_.y;
         switch(this.align)
         {
            case "n":
               this.startX = ScreenManager.getHalfScreenWidth() - _loc3_ / 2;
               this.startY = -_loc4_ - 100;
               this.targetX = ScreenManager.getHalfScreenWidth() - _loc3_ / 2;
               this.targetY = 5;
               break;
            case "ne":
               this.startX = ScreenManager.getScreenWidth() + 10;
               this.startY = 5;
               this.targetX = ScreenManager.getScreenWidth() - _loc3_ - 30;
               this.targetY = 5;
               break;
            case "e":
               this.startX = ScreenManager.getScreenWidth() + 10;
               this.startY = ScreenManager.getHalfScreenHeight() - _loc4_ / 2;
               this.targetX = ScreenManager.getScreenWidth() - _loc3_ - 30;
               this.targetY = ScreenManager.getHalfScreenHeight() - _loc4_ / 2;
               break;
            case "se":
               this.startX = ScreenManager.getScreenWidth() + 10;
               this.startY = ScreenManager.getScreenHeight() - _loc4_ - 30;
               this.targetX = ScreenManager.getScreenWidth() - _loc3_ - 30;
               this.targetY = ScreenManager.getScreenHeight() - _loc4_ - 30;
               break;
            case "s":
               this.startX = ScreenManager.getHalfScreenWidth() - _loc3_ / 2;
               this.startY = ScreenManager.getScreenHeight() - 10;
               this.targetX = ScreenManager.getHalfScreenWidth() - _loc3_ / 2;
               this.targetY = ScreenManager.getScreenHeight() - _loc4_ - 30;
               break;
            case "sw":
               this.startX = -_loc3_ - 10;
               this.startY = ScreenManager.getScreenHeight() - _loc4_ - 30;
               this.targetX = 5;
               this.targetY = ScreenManager.getScreenHeight() - _loc4_ - 30;
               break;
            case "w":
               this.startX = -_loc3_ - 10;
               this.startY = ScreenManager.getHalfScreenHeight() - _loc4_ / 2;
               this.targetX = 5;
               this.targetY = ScreenManager.getHalfScreenHeight() - _loc4_ / 2;
               break;
            case "nw":
               this.startX = -_loc3_ - 10;
               this.startY = 5;
               this.targetX = 5;
               this.targetY = 5;
               break;
            case "c":
               this.startX = ScreenManager.getHalfScreenWidth() - _loc3_ / 2;
               this.startY = -_loc4_ - 100;
               this.targetX = ScreenManager.getHalfScreenWidth() - _loc3_ / 2;
               this.targetY = ScreenManager.getHalfScreenHeight() - _loc4_ / 2;
         }
         this.x = this.startX;
         this.y = this.startY;
         ScreenManager.getWindowLayer().addChild(this);
      }
      
      private function updateContinueButtonLabel() : void
      {
         var _loc1_:String = "label_close";
         if(this.languageKeys.length > 0)
         {
            _loc1_ = "video_btn_continue";
         }
         this.continueButton.labelText = BPLocale.getText(_loc1_);
         this.continueButton.x = this.textAreaElement.textArea.width + this.videoElement.border.width - this.continueButton.width;
      }
      
      public function attemptToShow() : void
      {
         this.valid = true;
         var _loc1_:String = VideoElement.getContentResKey(this.videoClassID,this.videoID);
         if(ResourceManager.fileCollection.isLoaded(_loc1_))
         {
            this.show();
         }
         else
         {
            ResourceManager.fileCollection.load(_loc1_,this.handleClipLoaded);
         }
      }
      
      private function handleClipLoaded(param1:SWFFinisher = null) : void
      {
         if(this.valid)
         {
            this.show();
         }
      }
      
      private function show() : void
      {
         this.init();
         this.x = this.startX;
         this.y = this.startY;
         TweenLite.to(this,this.scrollSpeed,{
            "x":this.targetX,
            "y":this.targetY,
            "onComplete":this.handleShowComplete
         });
      }
      
      public function hide() : void
      {
         this.valid = false;
         this.x = this.targetX;
         this.y = this.targetY;
         TweenLite.to(this,this.scrollSpeed,{
            "ease":Linear.easeNone,
            "x":this.startX,
            "y":this.startY,
            "onComplete":this.handleHideComplete
         });
         this.videoElement.interference.alpha = 1;
         this.noiseChannel = AudioManager.playSoundEffect(42);
         TweenMax.delayedCall(0.25,this.stopSound);
      }
      
      private function stopSound() : void
      {
         if(this.noiseChannel != null)
         {
            AudioManager.removeLoop(this.noiseChannel);
         }
      }
      
      private function handleHideComplete() : void
      {
         this.simpleContainer.removeAllElements();
         this.videoElement.cleanup();
         this.cleanup();
         this.removeLogWriter();
         guiManager.deleteWindow(this.classID);
         guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.USER_INTERFACE,[ServerCommands.VIDEO_WINDOW,ServerCommands.WINDOW_DESTROYED,this.classID]);
      }
      
      private function startLogTimer(param1:int) : void
      {
         this.removeLogWriter();
         this.logWriter = new Timer(param1,0);
         this.logWriter.addEventListener(TimerEvent.TIMER,this.handleLogWriterTick);
         this.logWriter.start();
      }
      
      private function handleLogWriterTick(param1:TimerEvent) : void
      {
         var _loc5_:int = 0;
         if(this.logMessage.isCompleted())
         {
            this.removeLogWriter();
            if(this.showButtons)
            {
               this.fasterButton.visible = false;
               this.updateContinueButtonLabel();
               this.continueButton.visible = true;
            }
            return;
         }
         var _loc2_:* = "";
         var _loc3_:String = this.logMessage.getPartialMessage(2);
         var _loc4_:String = _loc3_.charAt(_loc3_.length - 1);
         if(_loc4_ == "<")
         {
            _loc5_ = 0;
            while(_loc4_ != ">")
            {
               if(_loc5_ > 20)
               {
                  break;
               }
               _loc3_ = this.logMessage.getPartialMessage(1);
               _loc4_ = _loc3_.charAt(_loc3_.length - 1);
               _loc2_ = _loc2_ + _loc3_ + "\n";
               _loc5_++;
            }
         }
         _loc2_ = _loc2_ + _loc3_ + "\n";
         if(this.logCharIndex % Main.getRandomCount(1,6) == 0)
         {
            AudioManager.playSoundEffect(48);
         }
         ++this.logCharIndex;
         this.textAreaElement.textArea.htmlText = _loc2_;
         this.textAreaElement.textArea.verticalScrollPosition = this.textAreaElement.textArea.maxVerticalScrollPosition;
      }
      
      private function handleShowComplete() : void
      {
         this.videoElement.interference.alpha = 0.1;
         this.noiseChannel = AudioManager.playSoundEffect(42);
         TweenMax.delayedCall(0.25,this.stopSound);
         this.startTextWriter();
      }
      
      public function startTextWriter() : void
      {
         if(this.languageKeys.length == 0)
         {
            return;
         }
         var _loc1_:String = BPLocale.getText(this.languageKeys[0]);
         _loc1_ = this.replaceHTML(_loc1_);
         this.setText(_loc1_);
         this.languageKeys.shift();
         if(this.showButtons)
         {
            this.fasterButton.visible = true;
            this.continueButton.visible = false;
         }
      }
      
      private function replaceHTML(param1:String) : String
      {
         var _loc3_:String = null;
         var _loc2_:Array = PatternManager.videoWindowColorPatterns;
         for(_loc3_ in _loc2_)
         {
            param1 = param1.replace(new RegExp("<" + _loc3_ + ">","g"),"<font color=\'#" + _loc2_[_loc3_] + "\'>");
            param1 = param1.replace(new RegExp("</" + _loc3_ + ">","g"),"</font>");
         }
         return param1;
      }
      
      public function setText(param1:String) : void
      {
         this.logCharIndex = 0;
         this.logMessage = new LogMessage(param1);
         this.startLogTimer(25);
      }
      
      private function handleContinueButtonClick(param1:MouseEvent) : void
      {
         this.nextPage();
      }
      
      public function nextPage() : void
      {
         if(this.languageKeys.length != 0)
         {
            this.startTextWriter();
         }
         else
         {
            guiManager.removeVideoWindow(classID);
         }
      }
      
      private function handleFasterButtonClick(param1:MouseEvent) : void
      {
         this.removeLogWriter();
         this.textAreaElement.textArea.htmlText = this.logMessage.getMessage();
         this.textAreaElement.textArea.verticalScrollPosition = this.textAreaElement.textArea.maxVerticalScrollPosition;
         this.fasterButton.visible = false;
         this.updateContinueButtonLabel();
         this.continueButton.visible = true;
      }
      
      private function removeLogWriter() : void
      {
         if(this.logWriter != null)
         {
            this.logWriter.stop();
            this.logWriter.removeEventListener(TimerEvent.TIMER,this.handleLogWriterTick);
            this.logWriter = null;
         }
      }
   }
}

package net.bigpoint.darkorbit.gui.windows.components
{
   import com.bigpoint.utils.BPLocale;
   import com.greensock.TweenLite;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import net.bigpoint.darkorbit.Styles;
   
   public class BarComponent extends Sprite
   {
      
      private static const GAP:int = 2;
      
      private var backGroundContainer:Sprite;
      
      private var barContainer:Sprite;
      
      private var iconContainer:Sprite;
      
      private var barColor:uint;
      
      private var totalbarWidth:int = 70;
      
      private var totalbarHeight:int = 6;
      
      private var currenBarWidth:int = 0;
      
      private var currentAmount:int = 0;
      
      private var maxAmount:int = 0;
      
      private var icon:Bitmap;
      
      private var overlayContainer:Sprite;
      
      private var textContainer:Sprite;
      
      private var barValue:TextField;
      
      public function BarComponent(param1:uint, param2:Bitmap = null)
      {
         super();
         this.icon = param2;
         this.barColor = param1;
         this.init();
      }
      
      private function init() : void
      {
         var _loc1_:int = 0;
         var _loc2_:int = 5;
         this.backGroundContainer = new Sprite();
         this.barContainer = new Sprite();
         this.iconContainer = new Sprite();
         this.iconContainer.useHandCursor = true;
         this.iconContainer.buttonMode = true;
         this.textContainer = new Sprite();
         this.overlayContainer = new Sprite();
         if(this.icon != null)
         {
            this.iconContainer.addChild(this.icon);
            _loc1_ = this.iconContainer.width + _loc2_;
         }
         this.backGroundContainer.x = _loc1_;
         this.backGroundContainer.y = this.iconContainer.height * 0.5;
         this.backGroundContainer.addChild(this.barContainer);
         this.overlayContainer.graphics.beginFill(0,0);
         this.overlayContainer.graphics.drawRect(_loc1_,0,this.totalbarWidth,this.totalbarHeight * 4);
         this.overlayContainer.graphics.endFill();
         this.overlayContainer.addEventListener(MouseEvent.CLICK,this.handleOverlayClick);
         this.overlayContainer.useHandCursor = true;
         this.overlayContainer.buttonMode = true;
         var _loc3_:TextFormat = new TextFormat(Styles.plainBigFmt.font,10,16777215,false);
         this.barValue = new TextField();
         this.barValue.antiAliasType = AntiAliasType.ADVANCED;
         this.barValue.embedFonts = true;
         this.barValue.autoSize = TextFieldAutoSize.LEFT;
         this.barValue.defaultTextFormat = _loc3_;
         this.barValue.setTextFormat(_loc3_);
         this.barValue.width = this.totalbarWidth;
         this.barValue.x = this.iconContainer.width + 2;
         this.barValue.y = 2;
         this.textContainer.addChild(this.barValue);
         this.textContainer.visible = false;
         this.addChild(this.textContainer);
         this.addChild(this.backGroundContainer);
         this.addChild(this.iconContainer);
         this.addChild(this.overlayContainer);
         this.update(0,100);
      }
      
      private function toggleTextVisibility() : void
      {
         var _loc1_:Boolean = this.backGroundContainer.visible;
         this.backGroundContainer.visible = !_loc1_;
         this.textContainer.visible = _loc1_;
         this.backGroundContainer.alpha = 0;
         this.textContainer.alpha = 0;
         TweenLite.to(this.backGroundContainer,0.5,{"alpha":int(this.backGroundContainer.visible)});
         TweenLite.to(this.textContainer,0.5,{"alpha":int(this.textContainer.visible)});
      }
      
      private function handleOverlayClick(param1:MouseEvent) : void
      {
         this.toggleTextVisibility();
      }
      
      private function updateComponent(param1:int) : void
      {
         this.backGroundContainer.graphics.clear();
         this.barContainer.graphics.clear();
         this.backGroundContainer.graphics.beginFill(0,1);
         this.backGroundContainer.graphics.drawRect(0,0,this.totalbarWidth,this.totalbarHeight);
         this.backGroundContainer.graphics.endFill();
         this.barContainer.graphics.beginFill(this.barColor,1);
         this.barContainer.graphics.drawRect(0,0,1,this.totalbarHeight - GAP * 2);
         this.barContainer.graphics.endFill();
         this.barContainer.x = this.barContainer.y = GAP;
         this.barValue.text = this.formatText();
         TweenLite.to(this.barContainer,0.5,{"width":param1});
      }
      
      private function formatText() : String
      {
         var _loc1_:* = BPLocale.roundInteger(this.currentAmount);
         var _loc2_:* = BPLocale.roundInteger(this.maxAmount);
         if(this.currentAmount > 99999 || this.maxAmount > 99999)
         {
            _loc2_ = BPLocale.roundInteger(this.maxAmount * 0.001) + " K";
            _loc1_ = BPLocale.roundInteger(this.currentAmount * 0.001) + " K";
         }
         return _loc1_ + "/" + _loc2_;
      }
      
      public function update(param1:int, param2:int) : void
      {
         if(param1 > param2)
         {
            param1 = param2;
         }
         this.currentAmount = param1;
         this.maxAmount = param2;
         this.currenBarWidth = (this.totalbarWidth - 2 * GAP) * param1 / param2;
         this.updateComponent(this.currenBarWidth);
      }
      
      public function setSize(param1:int, param2:int) : void
      {
         this.totalbarWidth = param1;
         this.totalbarHeight = param2;
         this.updateComponent(this.currenBarWidth);
      }
      
      public function setColor(param1:uint) : void
      {
         this.barColor = param1;
         this.updateComponent(this.currenBarWidth);
      }
   }
}

package net.bigpoint.darkorbit.gui.windows.components.buff
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.ui.tooltip.ToolTipHook;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.pattern.BuffPattern;
   
   public class BuffItem extends Sprite
   {
      
      public var id:int;
      
      private var languageKey:String;
      
      private var resKey:String;
      
      public var tooltip:ToolTipHook;
      
      public var pattern:BuffPattern;
      
      public function BuffItem(param1:BuffPattern)
      {
         super();
         this.buttonMode = true;
         this.useHandCursor = true;
         this.id = param1.id;
         this.languageKey = param1.languageKey;
         this.resKey = param1.resKey;
         this.pattern = param1;
         this.setIcon(this.resKey);
      }
      
      private function setIcon(param1:String) : void
      {
         var _loc2_:Bitmap = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui")).getEmbededBitmap(param1);
         addChild(_loc2_);
      }
      
      public function setPosition(param1:int, param2:int) : void
      {
         this.x = param1;
         this.y = param2;
      }
   }
}

package net.bigpoint.darkorbit.gui.windows.components.gear
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.Bitmap;
   import flash.display.LineScaleMode;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.MouseEvent;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   
   public class GearComboBox extends Sprite
   {
      
      public static const COMBOBOX_CLICK:String = "COMBOBOX_CLICK";
      
      private var iconContainer:Sprite;
      
      private var comboboxHeaderContainer:Sprite;
      
      public var arrowButton:MovieClip;
      
      public var bodyWidth:int = 110;
      
      public var bodyHeight:int = 12;
      
      private var gearTextfield:TextField;
      
      public function GearComboBox()
      {
         super();
      }
      
      public function init() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc2_:Bitmap = _loc1_.getEmbededBitmap("gear_bg.png");
         this.arrowButton = _loc1_.getEmbededMovieClip("comboButton");
         this.iconContainer = new Sprite();
         this.iconContainer.addChild(_loc2_);
         addChild(this.iconContainer);
         this.comboboxHeaderContainer = new Sprite();
         this.comboboxHeaderContainer.graphics.beginFill(3355443,1);
         this.comboboxHeaderContainer.graphics.lineStyle(0.1,10066329,1,true,LineScaleMode.NORMAL);
         this.comboboxHeaderContainer.graphics.drawRect(0,0,this.bodyWidth,this.bodyHeight);
         this.comboboxHeaderContainer.graphics.endFill();
         this.comboboxHeaderContainer.x = this.iconContainer.width;
         this.comboboxHeaderContainer.y = 8;
         var _loc3_:TextFormat = new TextFormat(Styles.plainBigFmt.font,10,16777215,false);
         this.gearTextfield = new TextField();
         this.gearTextfield.antiAliasType = AntiAliasType.ADVANCED;
         this.gearTextfield.embedFonts = true;
         this.gearTextfield.autoSize = TextFieldAutoSize.LEFT;
         this.gearTextfield.defaultTextFormat = _loc3_;
         this.gearTextfield.setTextFormat(_loc3_);
         this.gearTextfield.width = this.bodyWidth;
         this.gearTextfield.height = 12;
         this.comboboxHeaderContainer.addChild(this.gearTextfield);
         addChild(this.comboboxHeaderContainer);
         this.arrowButton.gotoAndStop(1);
         this.arrowButton.x = this.comboboxHeaderContainer.x + this.comboboxHeaderContainer.width + 2;
         this.arrowButton.y = this.comboboxHeaderContainer.y - 2;
         addChild(this.arrowButton);
         var _loc4_:Sprite = new Sprite();
         _loc4_.graphics.beginFill(0,0);
         _loc4_.graphics.drawRect(0,0,this.width,this.height);
         _loc4_.graphics.endFill();
         _loc4_.useHandCursor = true;
         _loc4_.buttonMode = true;
         _loc4_.addEventListener(MouseEvent.CLICK,this.handleComboButtonClick);
         this.addChild(_loc4_);
      }
      
      private function handleComboButtonClick(param1:MouseEvent) : void
      {
         dispatchEvent(new Event(COMBOBOX_CLICK));
      }
      
      public function setIcon(param1:Bitmap) : void
      {
         if(this.iconContainer.numChildren > 1)
         {
            this.iconContainer.removeChildAt(1);
         }
         if(param1 != null)
         {
            param1.x = (this.iconContainer.width - param1.width) * 0.5;
            param1.y = (this.iconContainer.height - param1.height) * 0.5;
            this.iconContainer.addChild(param1);
         }
      }
      
      public function setSelectedText(param1:String) : void
      {
         this.gearTextfield.text = param1;
      }
   }
}

package net.bigpoint.darkorbit.gui.windows.components.gear
{
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.MouseEvent;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import net.bigpoint.darkorbit.Styles;
   
   public class GearItem extends Sprite
   {
      
      public static const MOUSE_OVER:String = "MOUSE_OVER";
      
      public static const MOUSE_OUT:String = "MOUSE_OUT";
      
      public static const CLICKED:String = "CLICKED";
      
      public static const ITEM_HEIGHT:int = 22;
      
      private static const ARROW_SIZE:int = 8;
      
      private var backgroundContainer:Sprite;
      
      private var activeContainer:Sprite;
      
      private var itemWidth:int;
      
      public var title:String;
      
      public var icon:Bitmap;
      
      public var gearID:int;
      
      public var submenuID:int = -1;
      
      private var subMenuArrow:Sprite;
      
      public function GearItem(param1:int, param2:String, param3:Bitmap, param4:int)
      {
         super();
         this.gearID = param1;
         this.title = param2;
         this.icon = param3;
         this.itemWidth = param4;
         this.init();
      }
      
      private function init() : void
      {
         this.useHandCursor = true;
         this.buttonMode = true;
         this.backgroundContainer = new Sprite();
         this.activeContainer = new Sprite();
         this.subMenuArrow = new Sprite();
         this.activeContainer.visible = false;
         this.backgroundContainer.addChild(this.activeContainer);
         this.addChild(this.backgroundContainer);
         this.addChild(this.subMenuArrow);
         this.icon.scaleX = this.icon.scaleY = ITEM_HEIGHT / this.icon.width;
         this.backgroundContainer.addChild(this.icon);
         this.backgroundContainer.addChild(this.getFormattedText());
         this.backgroundContainer.mouseEnabled = false;
         this.backgroundContainer.mouseChildren = false;
         this.drawButton(this.backgroundContainer,2236962);
         this.drawButton(this.activeContainer,6710886);
         this.addListeners();
      }
      
      public function addListeners() : void
      {
         this.addEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
         this.addEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
         this.addEventListener(MouseEvent.CLICK,this.handleClick);
      }
      
      public function removeListeners() : void
      {
         this.removeEventListener(MouseEvent.MOUSE_OVER,this.handleMouseOver);
         this.removeEventListener(MouseEvent.MOUSE_OUT,this.handleMouseOut);
         this.removeEventListener(MouseEvent.CLICK,this.handleClick);
      }
      
      private function handleClick(param1:MouseEvent) : void
      {
         this.activeContainer.visible = false;
         dispatchEvent(new Event(CLICKED));
      }
      
      private function handleMouseOver(param1:MouseEvent) : void
      {
         this.activeContainer.visible = true;
         dispatchEvent(new Event(MOUSE_OVER));
      }
      
      private function handleMouseOut(param1:MouseEvent) : void
      {
         this.activeContainer.visible = false;
         dispatchEvent(new Event(MOUSE_OUT));
      }
      
      private function getFormattedText() : TextField
      {
         var _loc1_:TextFormat = new TextFormat(Styles.plainBigFmt.font,11,16777215,false);
         var _loc2_:TextField = new TextField();
         _loc2_.antiAliasType = AntiAliasType.ADVANCED;
         _loc2_.embedFonts = true;
         _loc2_.autoSize = TextFieldAutoSize.LEFT;
         _loc2_.selectable = false;
         _loc2_.defaultTextFormat = _loc1_;
         _loc2_.setTextFormat(_loc1_);
         _loc2_.x = 25;
         _loc2_.y = 3;
         _loc2_.text = this.title;
         if(_loc2_.width > this.itemWidth - _loc2_.x)
         {
            _loc2_.text = this.title.substr(0,15) + "...";
         }
         return _loc2_;
      }
      
      private function drawButton(param1:Sprite, param2:uint) : void
      {
         param1.graphics.clear();
         param1.graphics.beginFill(param2);
         param1.graphics.drawRect(1,0,this.itemWidth - 2,this.icon.height);
         param1.graphics.endFill();
         param1.graphics.lineStyle(0.1,6710886);
         param1.graphics.moveTo(0,0);
         param1.graphics.lineTo(0,this.icon.height);
         param1.graphics.moveTo(this.itemWidth - 2,0);
         param1.graphics.lineTo(this.itemWidth - 2,this.icon.height);
      }
      
      public function drawArrow() : void
      {
         this.subMenuArrow.x = this.itemWidth - ARROW_SIZE;
         this.subMenuArrow.y = (this.icon.height - ARROW_SIZE) * 0.5;
         this.subMenuArrow.graphics.beginFill(16777215);
         this.subMenuArrow.graphics.lineTo(0,ARROW_SIZE);
         this.subMenuArrow.graphics.lineTo(ARROW_SIZE * 0.5,ARROW_SIZE * 0.5);
         this.subMenuArrow.graphics.lineTo(0,0);
      }
      
      public function setPosition(param1:int, param2:int) : void
      {
         this.x = param1;
         this.y = param2;
      }
   }
}

package net.bigpoint.darkorbit.gui.windows.components.gear
{
   import flash.display.Sprite;
   
   public class GearMenuContainer extends Sprite
   {
      
      public var submenus:Array = [];
      
      public var mainMenu:GearScroller;
      
      public function GearMenuContainer()
      {
         super();
      }
      
      public function addMainMenu(param1:GearScroller) : void
      {
         this.mainMenu = param1;
         this.addChild(param1);
      }
      
      public function removeAllSubmenus() : void
      {
         var _loc1_:GearScroller = null;
         for each(_loc1_ in this.submenus)
         {
            if(_loc1_ != null)
            {
               this.removeChild(_loc1_);
            }
         }
         this.submenus = [];
      }
      
      public function removeSubMenu(param1:int) : void
      {
         var _loc2_:GearScroller = this.submenus[param1] as GearScroller;
         if(_loc2_ != null)
         {
            this.removeChild(_loc2_);
            this.submenus[param1] = null;
         }
      }
      
      public function addSubMenu(param1:GearScroller) : void
      {
         this.submenus[param1.gearID] = param1;
         this.addChild(param1);
      }
      
      public function getSubMenu(param1:int) : GearScroller
      {
         return this.submenus[param1] as GearScroller;
      }
   }
}

package net.bigpoint.darkorbit.gui.windows.components.gear
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import net.bigpoint.darkorbit.ResourceManager;
   
   public class GearScroller extends Sprite
   {
      
      private var comboboxBodyTop:Bitmap;
      
      private var comboboxBodyBottom:Bitmap;
      
      private var container:Sprite;
      
      private var items:Array = [];
      
      public var gearID:int;
      
      public function GearScroller(param1:int = -1)
      {
         super();
         this.gearID = param1;
         this.visible = false;
         this.init();
      }
      
      private function init() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.comboboxBodyTop = _loc1_.getEmbededBitmap("top.png");
         this.comboboxBodyBottom = _loc1_.getEmbededBitmap("down.png");
         this.comboboxBodyBottom.x = -1;
         this.comboboxBodyTop.visible = false;
         this.comboboxBodyBottom.visible = false;
         this.container = new Sprite();
         this.container.y = this.comboboxBodyTop.height;
         this.addChild(this.comboboxBodyTop);
         this.addChild(this.comboboxBodyBottom);
         this.addChild(this.container);
      }
      
      public function addElement(param1:GearItem) : void
      {
         param1.submenuID = this.gearID;
         this.container.addChild(param1);
         this.items.push(param1);
         this.setPosition();
         this.comboboxBodyBottom.visible = true;
         this.comboboxBodyTop.visible = true;
      }
      
      private function setPosition() : void
      {
         var _loc2_:GearItem = null;
         var _loc1_:int = 0;
         var _loc3_:int = 0;
         while(_loc3_ < this.items.length)
         {
            _loc2_ = this.items[_loc3_];
            if(_loc2_ != null)
            {
               _loc2_.y = _loc1_;
               _loc1_ += _loc2_.height;
            }
            _loc3_++;
         }
         this.comboboxBodyBottom.y = _loc1_ + this.comboboxBodyTop.height;
      }
      
      public function removeElement(param1:GearItem) : void
      {
         var _loc2_:GearItem = null;
         var _loc3_:int = 0;
         while(_loc3_ < this.items.length)
         {
            _loc2_ = this.items[_loc3_];
            if(_loc2_ != null && _loc2_.gearID == param1.gearID)
            {
               this.container.removeChild(_loc2_);
               this.items[_loc3_] = null;
            }
            _loc3_++;
         }
         this.setPosition();
      }
      
      public function removeAllElements() : void
      {
         while(this.container.numChildren > 0)
         {
            this.container.removeChildAt(this.container.numChildren - 1);
         }
         this.items = [];
      }
      
      public function show() : void
      {
         this.visible = true;
      }
      
      public function hide() : void
      {
         this.visible = false;
      }
      
      public function toggleVisibility() : void
      {
         this.visible = !this.visible;
      }
      
      public function getElement(param1:int) : GearItem
      {
         return this.items[param1] as GearItem;
      }
      
      public function getElementByID(param1:int) : GearItem
      {
         var _loc2_:GearItem = null;
         var _loc3_:int = 0;
         while(_loc3_ < this.items.length)
         {
            _loc2_ = this.items[_loc3_] as GearItem;
            if(_loc2_ != null && _loc2_.gearID == param1)
            {
               return _loc2_;
            }
            _loc3_++;
         }
         return null;
      }
   }
}

package net.bigpoint.darkorbit.lazyload
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.events.EventDispatcher;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   
   public class AssetLazyLoader extends EventDispatcher
   {
      
      private static const logger:ILogger = Log.getLogger("AssetLazyLoader");
      
      public static const ASSET_LOADED:String = "ASSET_LOADED";
      
      public var resKeyForThisLoader:String;
      
      public function AssetLazyLoader()
      {
         super();
      }
      
      public function loadAsset(param1:String) : void
      {
         this.resKeyForThisLoader = param1;
         ResourceManager.lazyGetAsset(param1,this.handleAssetLoaded,this.handleAssetLoadingError);
      }
      
      private function handleAssetLoaded(param1:SWFFinisher = null) : void
      {
         dispatchEvent(new LazyLoadEvent(ASSET_LOADED,this.resKeyForThisLoader));
      }
      
      private function handleAssetLoadingError() : void
      {
      }
   }
}

package net.bigpoint.darkorbit.lazyload
{
   import com.bigpoint.filecollection.finish.ImageFinisher;
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.events.IOErrorEvent;
   import flash.net.URLLoader;
   import flash.net.URLRequest;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.pattern.BannerAdPattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class BannerAdLazyLoader extends EventDispatcher
   {
      
      public static const RESOURCE_LINK:String = "flashinput/dynamicPaymentItems.php";
      
      public static const XML_TEMPLATE:String = "<catalog><achievements><item id=\"2\" price=\"1.9900\" currency=\"EUR\"/><item id=\"4\" price=\"0.9900\" currency=\"EUR\"/><item id=\"6\" price=\"0.9900\" currency=\"EUR\"/><item id=\"7\" price=\"0.9900\" currency=\"EUR\"/><item id=\"9\" price=\"0.9900\" currency=\"EUR\"/><item id=\"10\" price=\"0.9900\" currency=\"EUR\"/><item id=\"11\" price=\"0.9900\" currency=\"EUR\"/><item id=\"12\" price=\"0.9900\" currency=\"EUR\"/></achievements><specialOffer><item id=\"1\" price=\"0.9900\" currency=\"EUR\"/><item id=\"2\" price=\"4.9900\" currency=\"EUR\"/><item id=\"3\" price=\"4.9900\" currency=\"EUR\"/><item id=\"4\" price=\"1.9900\" currency=\"EUR\"/></specialOffer></catalog>";
      
      public static const BANNERAD_LOADED:String = "BANNERAD_LOADED";
      
      private static var logger:ILogger = Log.getLogger("BannerAdLazyLoader");
      
      private var pattern:BannerAdPattern;
      
      public function BannerAdLazyLoader(param1:BannerAdPattern)
      {
         super();
         this.pattern = param1;
      }
      
      public static function loadBannerAdPatternAddon() : void
      {
         var _loc1_:URLRequest = null;
         _loc1_ = new URLRequest(Settings.dynamicHost + RESOURCE_LINK);
         var _loc2_:URLLoader = new URLLoader();
         _loc2_.addEventListener(Event.COMPLETE,handleBannerAddonsXMLLoaded);
         _loc2_.addEventListener(IOErrorEvent.IO_ERROR,handleXMLLoadingError);
         _loc2_.load(_loc1_);
      }
      
      private static function handleXMLLoadingError(param1:IOErrorEvent) : void
      {
         param1.target.removeEventListener(Event.COMPLETE,handleBannerAddonsXMLLoaded);
         param1.target.removeEventListener(IOErrorEvent.IO_ERROR,handleXMLLoadingError);
      }
      
      private static function handleBannerAddonsXMLLoaded(param1:Event) : void
      {
         var bannerPatternXML:XML = null;
         var event:Event = param1;
         event.target.removeEventListener(Event.COMPLETE,handleBannerAddonsXMLLoaded);
         event.target.removeEventListener(IOErrorEvent.IO_ERROR,handleXMLLoadingError);
         try
         {
            bannerPatternXML = XML(event.currentTarget.data);
         }
         catch(e:Error)
         {
         }
         if(bannerPatternXML == null || bannerPatternXML.specialOffer.item.length() == 0)
         {
            bannerPatternXML = new XML(XML_TEMPLATE);
         }
         PatternManager.parseSpecialOfferPrices(bannerPatternXML.specialOffer.item);
      }
      
      public function loadBannerAd() : void
      {
         var _loc1_:String = this.pattern.getSWFLibID();
         if(!ResourceManager.fileCollection.isLoaded(_loc1_))
         {
            ResourceManager.fileCollection.load(_loc1_,this.handleBannerAdSWFLoaded);
         }
      }
      
      private function handleBannerAdSWFLoaded(param1:SWFFinisher) : void
      {
         var _loc2_:String = this.pattern.getImageLibID(Settings.language);
         if(this.pattern.assetCount > 0)
         {
            if(!ResourceManager.fileCollection.isLoaded(_loc2_))
            {
               ResourceManager.fileCollection.load(_loc2_,this.handleBannerImageLoaded);
            }
         }
         else
         {
            this.handleBannerImageLoaded();
         }
      }
      
      public function isLoaded() : Boolean
      {
         if(this.pattern.assetCount > 0)
         {
            return ResourceManager.fileCollection.isLoaded(this.pattern.getImageLibID(Settings.language));
         }
         return ResourceManager.fileCollection.isLoaded(this.pattern.getSWFLibID());
      }
      
      private function handleBannerImageLoaded(param1:ImageFinisher = null) : void
      {
         dispatchEvent(new Event(BANNERAD_LOADED));
      }
   }
}

package net.bigpoint.darkorbit.lazyload
{
   import flash.events.Event;
   
   public class LazyLoadEvent extends Event
   {
      
      public static const ASSET_LOADED:String = "ASSET_LOADED";
      
      public var resKey:String;
      
      public function LazyLoadEvent(param1:String, param2:String = null, param3:Boolean = false, param4:Boolean = false)
      {
         super(param1,param3,param4);
         this.resKey = param2;
      }
   }
}

package net.bigpoint.darkorbit.lensflare
{
   import com.greensock.TweenLite;
   import flash.display.Bitmap;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.geom.Rectangle;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.FastMath;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.collisionDetection.PixelPerfectCollisionDetection;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.planet.Planet;
   import net.bigpoint.darkorbit.planet.PlanetPattern;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   import net.bigpoint.darkorbit.station.Station;
   
   public class LensFlare extends MovieClip
   {
      
      private static const logger:ILogger = Log.getLogger("Client.Lensflare");
      
      private var id:int;
      
      private var lenses:Array = [];
      
      public var star:MovieClip;
      
      private var rect:Rectangle;
      
      private var state:int = 0;
      
      private var hLimit:int;
      
      private var vLimit:int;
      
      private var init:Boolean;
      
      public var xGap:int;
      
      public var yGap:int;
      
      public var pFactor:Number;
      
      private var divider:int = 3;
      
      private var lensflareManager:LensflareManager;
      
      private var xTemp:int;
      
      private var yTemp:int;
      
      private var lensFlash:Bitmap;
      
      private var useLensFlash:Boolean;
      
      private var lastDistance:int;
      
      private var collisionDetection:Sprite;
      
      private var halfScreenWidth:int;
      
      private var halfScreenHeight:int;
      
      public function LensFlare(param1:LensflareManager, param2:int, param3:int, param4:int, param5:Rectangle, param6:Number = 1)
      {
         super();
         this.lensflareManager = param1;
         this.id = param2;
         this.xTemp = param3;
         this.yTemp = param4;
         this.halfScreenWidth = param5.width / 2;
         this.halfScreenHeight = param5.height / 2;
         this.xGap = param3 / param6;
         this.yGap = param4 / param6;
         this.rect = param5;
         this.pFactor = param6;
         this.hLimit = param5.width;
         this.vLimit = param5.height;
      }
      
      public function addLensFlare(param1:MovieClip) : void
      {
         this.lenses.push(param1);
         this.addChild(param1);
      }
      
      public function initLensflare() : void
      {
         this.init = true;
      }
      
      public function addStar(param1:MovieClip) : void
      {
         this.star = param1;
         param1.play();
         this.addChild(this.star);
         this.lensFlash = ResourceManager.getBitmap("lensFlash","lensFlash");
         this.lensFlash.x = -this.lensFlash.width / 2;
         this.lensFlash.y = -this.lensFlash.height / 2;
         this.addChild(this.lensFlash);
         this.lensFlash.visible = false;
      }
      
      public function addCollisionDetection() : void
      {
         this.collisionDetection = new Sprite();
         this.collisionDetection.graphics.beginFill(255);
         this.collisionDetection.graphics.drawCircle(0,0,5);
         this.collisionDetection.alpha = 0;
         this.addChild(this.collisionDetection);
      }
      
      public function rotate() : void
      {
         var _loc1_:int = this.lensflareManager.getMap().getMain().screenManager.getStaticContainer().mouseX;
         if(_loc1_ > this.halfScreenWidth)
         {
            this.star.rotation += 0.15;
         }
         else
         {
            this.star.rotation -= 0.15;
         }
      }
      
      public function updateLens(param1:int, param2:int) : void
      {
         if(!this.init)
         {
            return;
         }
         var _loc3_:int = param1 - this.x;
         var _loc4_:int = param2 - this.y;
         switch(this.state)
         {
            case 0:
               if(_loc3_ < -this.hLimit || _loc3_ > this.hLimit)
               {
                  this.state = 2;
                  break;
               }
               if(_loc4_ < -this.vLimit || _loc4_ > this.vLimit)
               {
                  this.state = 2;
                  break;
               }
               if(this.isBehindPlanet())
               {
                  this.state = 2;
                  this.useLensFlash = true;
                  break;
               }
               if(this.isBehindShip())
               {
                  this.state = 2;
                  break;
               }
               if(this.isBehindStations())
               {
                  this.state = 2;
                  break;
               }
               this.drawLenses(param1,param2);
               break;
            case 2:
               this.fadeOutChilds();
               this.state = 4;
               break;
            case 4:
               if(_loc3_ > -this.hLimit && _loc3_ < this.hLimit && _loc4_ > -this.vLimit && _loc4_ < this.vLimit && !this.isBehindPlanet() && !this.isBehindStations() && !this.isBehindShip())
               {
                  this.state = 1;
               }
               break;
            case 1:
               this.divider = 3;
               this.fadeInChilds();
               this.state = 0;
         }
      }
      
      private function fadeInChilds() : void
      {
         var _loc2_:MovieClip = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.lenses.length)
         {
            _loc2_ = this.lenses[_loc1_];
            TweenLite.to(_loc2_,0.5,{"alpha":1});
            _loc1_++;
         }
         if(this.star != null)
         {
            TweenLite.to(this.star,0.5,{"alpha":1});
            if(this.useLensFlash)
            {
               this.lensFlash.alpha = 0;
               this.lensFlash.visible = true;
               TweenLite.to(this.lensFlash,0.25,{
                  "alpha":0.75,
                  "onComplete":this.fadeOutLensFlash,
                  "onCompleteParams":[this.lensFlash]
               });
               this.useLensFlash = false;
            }
         }
      }
      
      private function fadeOutLensFlash(param1:Bitmap) : void
      {
         TweenLite.to(param1,3,{
            "alpha":0,
            "onComplete":this.handleRemoveLensFlash,
            "onCompleteParams":[param1]
         });
      }
      
      private function handleRemoveLensFlash(param1:Bitmap) : void
      {
         param1.visible = false;
      }
      
      private function fadeOutChilds() : void
      {
         var _loc2_:MovieClip = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.lenses.length)
         {
            _loc2_ = this.lenses[_loc1_];
            TweenLite.to(_loc2_,0.5,{"alpha":0});
            _loc1_++;
         }
         if(this.star != null)
         {
            TweenLite.to(this.star,0.5,{"alpha":0});
         }
      }
      
      private function drawLenses(param1:int, param2:int) : void
      {
         var _loc7_:MovieClip = null;
         var _loc8_:Number = NaN;
         var _loc9_:MovieClip = null;
         var _loc10_:Number = NaN;
         var _loc11_:Number = NaN;
         var _loc3_:Number = Math.atan2(param2 - this.y,param1 - this.x) * 180 / Math.PI;
         var _loc4_:Number = FastMath.sqrt(Math.pow(param2 - this.y,2) + Math.pow(param1 - this.x,2));
         _loc4_ = _loc4_ / this.divider;
         if(int(_loc4_) != this.lastDistance)
         {
            _loc7_ = this.lenses[5];
            _loc8_ = (_loc4_ + 50) * 0.0033;
            if(_loc8_ > 0 && _loc8_ < 1)
            {
               _loc7_.scaleX = _loc8_;
               _loc7_.scaleY = _loc8_;
            }
         }
         this.lastDistance = _loc4_;
         var _loc5_:int = 0;
         var _loc6_:int = 3;
         while(_loc6_ > -1)
         {
            _loc9_ = this.lenses[_loc6_];
            _loc10_ = -_loc5_ * _loc4_ * Math.cos(_loc3_ * Math.PI / 180);
            _loc11_ = -_loc5_ * _loc4_ * Math.sin(_loc3_ * Math.PI / 180);
            _loc9_.x = _loc10_;
            _loc9_.y = _loc11_;
            _loc5_++;
            _loc6_--;
         }
         _loc5_ = 1;
         _loc6_ = 3;
         while(_loc6_ < this.lenses.length)
         {
            _loc9_ = this.lenses[_loc6_];
            _loc10_ = _loc5_ * _loc4_ * Math.cos(_loc3_ * Math.PI / 180);
            _loc11_ = _loc5_ * _loc4_ * Math.sin(_loc3_ * Math.PI / 180);
            _loc9_.x = _loc10_;
            _loc9_.y = _loc11_;
            _loc5_++;
            _loc6_++;
         }
      }
      
      public function isBehindPlanet() : Boolean
      {
         var _loc3_:Planet = null;
         var _loc4_:PlanetPattern = null;
         var _loc5_:Number = NaN;
         var _loc1_:Array = this.lensflareManager.getMap().getMain().screenManager.planets;
         if(_loc1_ == null)
         {
            return false;
         }
         var _loc2_:int = 0;
         while(_loc2_ < _loc1_.length)
         {
            _loc3_ = _loc1_[_loc2_];
            if(_loc3_.clip != null)
            {
               _loc4_ = PatternManager.planetPatterns[int(_loc3_.getTypeID())];
               _loc5_ = Math.pow(_loc3_.clip.y - this.y,2) + Math.pow(_loc3_.clip.x - this.x,2);
               if(_loc5_ < _loc4_.radiusAndPaddingSquared)
               {
                  return true;
               }
            }
            _loc2_++;
         }
         return false;
      }
      
      private function isBehindStations() : Boolean
      {
         var _loc3_:Station = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc1_:Array = this.lensflareManager.getMap().getStationManager().getStations();
         var _loc2_:Ship = this.lensflareManager.getMap().getShipManager().getHero();
         for each(_loc3_ in _loc1_)
         {
            if(this.collisionDetection != null && _loc3_ != null && _loc3_.clip != null && _loc2_ != null)
            {
               _loc4_ = _loc3_.clip.x - _loc2_.x + this.halfScreenWidth;
               _loc5_ = _loc3_.clip.y - _loc2_.y + this.halfScreenHeight;
               _loc6_ = this.x;
               _loc7_ = this.y;
               if(_loc4_ - _loc3_.clip.width / 2 < _loc6_ && _loc6_ < _loc4_ + _loc3_.clip.width / 2 && _loc5_ - _loc3_.clip.height / 2 < _loc7_ && _loc7_ < _loc5_ + _loc3_.clip.height / 2)
               {
                  if(PixelPerfectCollisionDetection.isColliding(this.collisionDetection,_loc3_.clip,this.collisionDetection.parent,true))
                  {
                     return true;
                  }
               }
            }
         }
         return false;
      }
      
      public function getID() : int
      {
         return this.id;
      }
      
      private function isBehindShip() : Boolean
      {
         var _loc4_:MapObject = null;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc1_:Array = this.lensflareManager.getMap().getShipManager().getShips();
         var _loc2_:Ship = this.lensflareManager.getMap().getShipManager().getHero();
         var _loc3_:int = 20;
         if(_loc2_ != null)
         {
            for each(_loc4_ in _loc1_)
            {
               if(_loc4_ != null)
               {
                  _loc5_ = _loc4_.x - _loc2_.x + this.halfScreenWidth;
                  _loc6_ = _loc4_.y - _loc2_.y + this.halfScreenHeight;
                  _loc7_ = this.x;
                  _loc8_ = this.y;
                  if(_loc5_ - _loc3_ < _loc7_ && _loc7_ < _loc5_ + _loc3_ && _loc6_ - _loc3_ < _loc8_ && _loc8_ < _loc6_ + _loc3_)
                  {
                     return true;
                  }
               }
            }
         }
         return false;
      }
      
      public function cleanup() : void
      {
         var _loc2_:DisplayObject = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.numChildren)
         {
            _loc2_ = this.getChildAt(_loc1_);
            if(this.contains(_loc2_))
            {
               this.removeChild(_loc2_);
            }
            _loc1_++;
         }
      }
   }
}

package net.bigpoint.darkorbit.lensflare
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.MovieClip;
   import flash.events.TimerEvent;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class LensflareManager
   {
      
      private var map:Map;
      
      private var lensflares:Array = [];
      
      private var camera:Point;
      
      public var speedX:Number;
      
      public var speedY:Number;
      
      public var halfScreenWidth:Number;
      
      public var halfScreenHeight:Number;
      
      private var timer:Timer;
      
      private var fps:int = 25;
      
      public function LensflareManager(param1:Map)
      {
         super();
         this.map = param1;
         this.camera = ScreenManager.camera;
         this.halfScreenWidth = ScreenManager.halfScreenWidth;
         this.halfScreenHeight = ScreenManager.halfScreenHeight;
         this.timer = new Timer(1000 / this.fps,0);
         this.timer.addEventListener(TimerEvent.TIMER,this.onTimerTick);
         this.timer.start();
      }
      
      private function onTimerTick(param1:TimerEvent) : void
      {
         var _loc3_:LensFlare = null;
         var _loc4_:Number = NaN;
         var _loc5_:Number = NaN;
         var _loc2_:int = 0;
         while(_loc2_ < this.lensflares.length)
         {
            _loc3_ = this.lensflares[_loc2_];
            if(_loc3_ != null && _loc3_.visible)
            {
               _loc3_.x = -this.camera.x / _loc3_.pFactor + this.halfScreenWidth + _loc3_.xGap;
               _loc3_.y = -this.camera.y / _loc3_.pFactor + this.halfScreenHeight + _loc3_.yGap;
               _loc4_ = this.camera.x / _loc3_.pFactor + this.halfScreenWidth - _loc3_.xGap;
               _loc5_ = this.camera.y / _loc3_.pFactor + this.halfScreenHeight - _loc3_.yGap;
               _loc3_.updateLens(_loc4_,_loc5_);
               if(_loc3_.star != null && this.speedX != 0 && this.speedY != 0)
               {
                  _loc3_.rotate();
               }
            }
            _loc2_++;
         }
      }
      
      public function createLensFlare(param1:int, param2:int, param3:int, param4:Number, param5:Boolean = false, param6:int = 0) : void
      {
         var _loc12_:MovieClip = null;
         var _loc13_:MovieClip = null;
         var _loc7_:LensFlare = new LensFlare(this,param1,param2 * 10,param3 * 10,new Rectangle(0,0,this.map.getMain().screenManager.getScaledScreenWidth(),this.map.getMain().screenManager.getScaledScreenHeight()),param4);
         var _loc8_:ResourcePattern = PatternManager.lensflarePatterns[int(param6)];
         var _loc9_:String = _loc8_.getResKey();
         var _loc10_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc9_));
         if(param5)
         {
            _loc12_ = MovieClip(_loc10_.getEmbededMovieClip("star"));
            _loc7_.addStar(_loc12_);
         }
         _loc7_.addCollisionDetection();
         var _loc11_:int = 0;
         while(_loc11_ < 6)
         {
            _loc13_ = MovieClip(_loc10_.getEmbededMovieClip("lens" + _loc11_));
            _loc7_.addLensFlare(_loc13_);
            _loc11_++;
         }
         if(Settings.qualityBackground <= Settings.QUALITY_MEDIUM)
         {
            _loc7_.visible = false;
         }
         this.lensflares.push(_loc7_);
         _loc7_.initLensflare();
         this.map.getMain().screenManager.getLensflareLayer().addChild(_loc7_);
      }
      
      public function updateLensflareQuality(param1:int) : void
      {
         var _loc2_:LensFlare = null;
         if(Settings.qualityBackground != param1)
         {
            for each(_loc2_ in this.lensflares)
            {
               if(_loc2_ != null)
               {
                  switch(Settings.qualityBackground)
                  {
                     case Settings.QUALITY_LOW:
                     case Settings.QUALITY_MEDIUM:
                        _loc2_.visible = false;
                        break;
                     case Settings.QUALITY_GOOD:
                     case Settings.QUALITY_HIGH:
                        _loc2_.visible = true;
                  }
               }
            }
         }
      }
      
      public function cleanup() : void
      {
         var _loc2_:LensFlare = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.lensflares.length)
         {
            _loc2_ = this.lensflares[_loc1_];
            _loc2_.cleanup();
            this.map.getMain().screenManager.getLensflareLayer().removeChild(_loc2_);
            _loc1_++;
         }
         this.lensflares = [];
         if(this.timer != null)
         {
            this.timer.stop();
            this.timer.removeEventListener(TimerEvent.TIMER,this.onTimerTick);
         }
         this.map = null;
      }
      
      public function getMap() : Map
      {
         return this.map;
      }
   }
}

package net.bigpoint.darkorbit.map
{
   import flash.display.BitmapData;
   
   public class DesignMask
   {
      
      public var mask:BitmapData;
      
      public var scale:Number;
      
      public function DesignMask(param1:BitmapData = null, param2:Number = 1)
      {
         super();
         this.mask = param1;
         this.scale = param2;
      }
   }
}

package net.bigpoint.darkorbit.map
{
   import flash.display.BitmapData;
   
   public class Line extends BitmapData
   {
      
      public function Line(param1:int, param2:int, param3:Boolean = true, param4:uint = 4294967295)
      {
         super(param1,param2,param3,param4);
      }
      
      public function line(param1:int, param2:int, param3:int, param4:int, param5:uint) : void
      {
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:int = 0;
         var _loc10_:int = 0;
         var _loc11_:* = 0;
         var _loc12_:int = 0;
         var _loc13_:int = 0;
         _loc12_ = param1;
         _loc13_ = param2;
         _loc6_ = param3 - param1;
         _loc7_ = param4 - param2;
         _loc9_ = _loc6_ > 0 ? 1 : -1;
         _loc10_ = _loc7_ > 0 ? 1 : -1;
         _loc6_ = _loc6_ < 0 ? int(-_loc6_) : _loc6_;
         _loc7_ = _loc7_ < 0 ? int(-_loc7_) : _loc7_;
         setPixel32(_loc12_,_loc13_,param5);
         if(_loc6_ > _loc7_)
         {
            _loc11_ = _loc6_ >> 1;
            _loc8_ = 1;
            while(_loc8_ <= _loc6_)
            {
               _loc12_ += _loc9_;
               _loc11_ += _loc7_;
               if(_loc11_ >= _loc6_)
               {
                  _loc11_ -= _loc6_;
                  _loc13_ += _loc10_;
               }
               setPixel32(_loc12_,_loc13_,param5);
               _loc8_++;
            }
         }
         else
         {
            _loc11_ = _loc7_ >> 1;
            _loc8_ = 1;
            while(_loc8_ <= _loc7_)
            {
               _loc13_ += _loc10_;
               _loc11_ += _loc6_;
               if(_loc11_ >= _loc7_)
               {
                  _loc11_ -= _loc7_;
                  _loc12_ += _loc9_;
               }
               setPixel32(_loc12_,_loc13_,param5);
               _loc8_++;
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.map
{
   import com.bigpoint.filecollection.event.FileCollectionFileLoadEvent;
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import flash.events.Event;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.EventManager;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.alienmothership.AlienMothershipManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.background.BackgroundManager;
   import net.bigpoint.darkorbit.collectable.CollectableManager;
   import net.bigpoint.darkorbit.combat.CombatManager;
   import net.bigpoint.darkorbit.ctb.CTBManager;
   import net.bigpoint.darkorbit.drone.DroneManager;
   import net.bigpoint.darkorbit.fireworks.FireworksManager;
   import net.bigpoint.darkorbit.lensflare.LensflareManager;
   import net.bigpoint.darkorbit.meteor.MeteorManager;
   import net.bigpoint.darkorbit.mine.MineManager;
   import net.bigpoint.darkorbit.nebula.NebulaManager;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   import net.bigpoint.darkorbit.planet.PlanetManager;
   import net.bigpoint.darkorbit.portal.PortalManager;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.ShipManager;
   import net.bigpoint.darkorbit.starfield.Starfield;
   import net.bigpoint.darkorbit.station.StationManager;
   
   public class Map
   {
      
      private static const MMOHome:int = 1;
      
      private static const EICHome:int = 5;
      
      private static const VRUHome:int = 9;
      
      public static const LIMITED_WIDTH:int = 5000;
      
      public static const LIMITED_HEIGHT:int = 3119;
      
      public static const STD_WIDTH:int = 21000;
      
      public static const STD_HEIGHT:int = 13100;
      
      private var mapID:int;
      
      private var name:String;
      
      private var gameserverIP:String;
      
      private var showStarfield:Boolean;
      
      private var starfieldColor:uint = 16777215;
      
      private var neighbours:Array;
      
      private var scaleFactor:Number;
      
      private var musicTypeID:int;
      
      private var main:Main;
      
      private var shipManager:ShipManager;
      
      public var alienMothershipManager:AlienMothershipManager;
      
      private var minimapManager:MinimapManager;
      
      private var mineManager:MineManager;
      
      private var backgroundManager:BackgroundManager;
      
      private var ctbManager:CTBManager;
      
      private var nebulaManager:NebulaManager;
      
      private var planetManager:PlanetManager;
      
      public var portalManager:PortalManager;
      
      private var stationManager:StationManager;
      
      public var poiManager:POIManager;
      
      public var relayStationArray:Array = [];
      
      private var collectableManager:CollectableManager;
      
      private var droneManager:DroneManager;
      
      private var lensflareManager:LensflareManager;
      
      private var meteorManager:MeteorManager;
      
      private var combatManager:CombatManager;
      
      private var eventManager:EventManager;
      
      private var fireworksManager:FireworksManager;
      
      private var finisherList:Array = [];
      
      public var valid:Boolean = true;
      
      private var pvpAllowed:Boolean = true;
      
      private var homeMapFaction:int;
      
      public var serious_width:int = 21000;
      
      public var serious_height:int = 13100;
      
      private var showNebula:Boolean;
      
      public function Map(param1:Main, param2:int)
      {
         super();
         this.main = param1;
         this.mapID = param2;
         this.shipManager = new ShipManager(this);
         this.alienMothershipManager = new AlienMothershipManager(param1.screenManager);
         this.minimapManager = new MinimapManager(this);
         this.backgroundManager = new BackgroundManager(this);
         this.nebulaManager = new NebulaManager(this);
         this.planetManager = new PlanetManager(this);
         this.portalManager = new PortalManager(this);
         this.stationManager = new StationManager(this);
         this.poiManager = new POIManager(this);
         this.collectableManager = new CollectableManager(this);
         this.droneManager = new DroneManager(this);
         this.lensflareManager = new LensflareManager(this);
         this.meteorManager = new MeteorManager(this);
         this.combatManager = new CombatManager(this);
         this.eventManager = new EventManager(this);
         this.mineManager = new MineManager(param1.screenManager.collectableLayer,this.combatManager);
         this.ctbManager = new CTBManager(param1.getGuiManager(),this.shipManager,param1.screenManager.getPortalLayer());
         this.fireworksManager = new FireworksManager(this);
         if(param2 == MMOHome)
         {
            this.setPvpAllowed(0);
            this.setHomeMapFaction(1);
         }
         else if(param2 == EICHome)
         {
            this.setPvpAllowed(0);
            this.setHomeMapFaction(2);
         }
         else if(param2 == VRUHome)
         {
            this.setPvpAllowed(0);
            this.setHomeMapFaction(3);
         }
         else
         {
            this.setPvpAllowed(1);
         }
      }
      
      public function init() : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:Boolean = false;
         var _loc7_:int = 0;
         var _loc8_:Boolean = false;
         var _loc9_:int = 0;
         var _loc10_:int = 0;
         var _loc11_:Number = NaN;
         var _loc12_:int = 0;
         var _loc13_:XML = null;
         var _loc14_:XML = null;
         var _loc15_:XML = null;
         var _loc16_:XML = null;
         var _loc17_:int = 0;
         var _loc18_:int = 0;
         var _loc19_:int = 0;
         var _loc20_:int = 0;
         var _loc21_:Starfield = null;
         var _loc22_:XML = null;
         var _loc23_:ResourcePattern = null;
         var _loc24_:int = 0;
         var _loc25_:String = null;
         var _loc1_:XML = Main.mapsXML;
         for each(_loc2_ in _loc1_.map)
         {
            _loc3_ = int(_loc2_.@id);
            if(_loc3_ == this.mapID)
            {
               this.main.screenManager.resetDefaults(_loc3_);
               this.name = null;
               if(this.name == null)
               {
                  if(_loc2_.@name.length() > 0)
                  {
                     this.name = _loc2_.@name;
                  }
                  else
                  {
                     this.name = "xxx";
                  }
               }
               if(_loc2_.attribute("neighbours").length() > 0)
               {
                  this.neighbours = _loc2_.neighbours.split(",");
               }
               else
               {
                  this.neighbours = null;
               }
               this.gameserverIP = _loc2_.gameserverIP;
               this.showStarfield = Main.parseBooleanFromString(_loc2_.starfield);
               if(_loc2_.starfield.@color.length() > 0)
               {
                  this.starfieldColor = uint(_loc2_.starfield.@color);
               }
               if(_loc2_.@scaleFactor.length() > 0)
               {
                  this.scaleFactor = Number(_loc2_.@scaleFactor);
               }
               else
               {
                  this.scaleFactor = 1;
               }
               this.serious_width = STD_WIDTH * this.scaleFactor;
               this.serious_height = STD_HEIGHT * this.scaleFactor;
               POIManager.noaBmdScalefactor = this.serious_width / POIManager.NOA_BMP_WIDTH;
               MinimapManager.mapFactor = this.scaleFactor;
               if(Settings.createMeteors)
               {
                  for each(_loc15_ in _loc2_.meteors.meteor)
                  {
                     this.meteorManager.prepareMeteors(int(_loc15_.@typeID),int(_loc15_.@delay),int(_loc15_.@speed),int(_loc15_.@layer));
                  }
               }
               if(this.showNebula)
               {
                  for each(_loc16_ in _loc2_.nebulas.nebula)
                  {
                     _loc4_ = 0;
                     _loc5_ = 0;
                     if(_loc16_.@layerIndex.length() > 0)
                     {
                        _loc5_ = int(_loc16_.@layerIndex);
                     }
                     this.nebulaManager.showNebula(_loc4_,_loc5_);
                  }
               }
               if(this.showStarfield && Settings.createStarfield)
               {
                  _loc17_ = this.main.screenManager.getScaledScreenWidth();
                  _loc18_ = this.main.screenManager.getScaledScreenHeight();
                  _loc19_ = ScreenManager.getHalfScreenWidth() - _loc17_ * 0.5;
                  _loc20_ = ScreenManager.getHalfScreenHeight() - _loc18_ * 0.5;
                  _loc21_ = new Starfield(_loc17_,_loc18_,this.starfieldColor);
                  _loc21_.x = _loc19_;
                  _loc21_.y = _loc20_;
                  this.main.screenManager.addStarfield(_loc21_);
               }
               if(Settings.createLensflares)
               {
                  for each(_loc22_ in _loc2_.lensflares.lensflare)
                  {
                     if(_loc22_.@typeID.length() > 0)
                     {
                        _loc4_ = int(_loc22_.@typeID);
                     }
                     this.lensflareManager.createLensFlare(int(_loc22_.@id),int(_loc22_.@x),int(_loc22_.@y),Number(_loc22_.@pFactor),Main.parseBooleanFromString(_loc22_.@star),_loc4_);
                  }
               }
               if(_loc2_.minimap.@typeID.length() > 0)
               {
                  _loc4_ = int(_loc2_.minimap.@typeID);
                  _loc23_ = PatternManager.minimapPatterns[_loc4_];
                  this.minimapManager.createMinimap(_loc23_.resKey);
               }
               for each(_loc13_ in _loc2_.backgrounds.background)
               {
                  _loc6_ = false;
                  if(_loc13_.@isMain.length() > 0)
                  {
                     _loc6_ = Main.parseBooleanFromString(_loc13_.@isMain);
                  }
                  else if(_loc2_.backgrounds.background.length() == 1)
                  {
                     _loc6_ = true;
                  }
                  _loc7_ = 10;
                  if(_loc13_.@pFactor.length() > 0)
                  {
                     _loc7_ = int(_loc13_.@pFactor);
                  }
                  _loc5_ = 0;
                  if(_loc13_.@layer.length() > 0)
                  {
                     _loc5_ = int(_loc13_.@layer);
                  }
                  _loc8_ = false;
                  if(_loc13_.@hideLensflare.length() > 0)
                  {
                     _loc8_ = Main.parseBooleanFromString(_loc13_.@hideLensflare);
                     if(_loc8_)
                     {
                        Settings.pixelPerfectCollisionWithLayers = true;
                     }
                  }
                  _loc9_ = 0;
                  if(_loc13_.@shiftX.length() > 0)
                  {
                     _loc9_ = int(_loc13_.@shiftX);
                  }
                  _loc10_ = 0;
                  if(_loc13_.@shiftY.length() > 0)
                  {
                     _loc10_ = int(_loc13_.@shiftY);
                  }
                  _loc11_ = 1;
                  if(_loc13_.@scale.length() > 0)
                  {
                     _loc11_ = Number(_loc13_.@scale);
                  }
                  _loc12_ = -1;
                  if(_loc13_.@maskID.length() > 0)
                  {
                     _loc12_ = int(_loc13_.@maskID);
                  }
                  this.backgroundManager.createBackground(int(_loc13_.@typeID),_loc6_,_loc7_,_loc5_,_loc8_,_loc9_,_loc10_,_loc11_,_loc12_);
               }
               _loc5_ = 0;
               for each(_loc14_ in _loc2_.planets.planet)
               {
                  _loc24_ = -1;
                  if(_loc14_.@lightsourceID.length() > 0)
                  {
                     _loc24_ = int(_loc14_.@lightsourceID);
                  }
                  _loc25_ = "";
                  if(_loc14_.@layer.length() > 0)
                  {
                     _loc5_ = int(_loc14_.@layer);
                  }
                  this.planetManager.preparePlanet(int(_loc14_.@typeID),int(_loc14_.@x),int(_loc14_.@y),int(_loc14_.@rotation),Number(_loc14_.@pFactor),_loc5_,_loc24_);
               }
               this.planetManager.startTimer();
               this.planetManager.clipLoadedEvent.addEventListener(PlanetManager.CLIP_LOADED,this.handleClipLoaded);
               this.musicTypeID = int(_loc2_.@music);
               if(Settings.createMusic)
               {
                  if(Settings.playMusic)
                  {
                     this.loadMusic();
                  }
               }
            }
         }
         this.main.getConnectionManager().isMapLoaded = true;
         this.main.getConnectionManager().dispatchSpacemapLoaded();
      }
      
      private function handleClipLoaded(param1:Event) : void
      {
         if(this.minimapManager.getMiniMap())
         {
            this.minimapManager.getMiniMap().redrawEntities();
         }
      }
      
      public function loadMusic() : void
      {
         AudioManager.loadMusic(this.musicTypeID);
      }
      
      public function showMap() : void
      {
      }
      
      public function onFileLoadError(param1:FileCollectionFileLoadEvent) : void
      {
      }
      
      public function getMapID() : int
      {
         return this.mapID;
      }
      
      public function getGameserverIP() : String
      {
         return this.gameserverIP;
      }
      
      public function cleanup() : void
      {
         var _loc1_:int = 0;
         var _loc2_:SWFFinisher = null;
         TooltipControl.getInstance().hideAllToolTips();
         this.main.screenManager.removeRenderFrameListener();
         this.main.getGuiManager().removeAllCooldowns();
         this.eventManager.cleanup();
         this.minimapManager.cleanup();
         this.backgroundManager.cleanup();
         this.meteorManager.cleanup();
         this.main.screenManager.removeStarfield();
         this.combatManager.cleanup();
         this.droneManager.cleanup();
         this.shipManager.cleanup();
         this.nebulaManager.cleanup();
         this.portalManager.cleanup();
         this.lensflareManager.cleanup();
         this.planetManager.cleanup();
         this.stationManager.cleanup();
         this.collectableManager.cleanup();
         this.poiManager.cleanup();
         this.mineManager.cleanup();
         this.ctbManager.cleanup();
         if(Settings.unloadResources)
         {
            _loc1_ = 0;
            while(_loc1_ < this.finisherList.length)
            {
               _loc2_ = this.finisherList[_loc1_];
               _loc2_.clear();
               _loc1_++;
            }
            this.finisherList = [];
         }
         BitmapClip.clearCache();
         this.main.screenManager.addRenderFrameListener();
      }
      
      public function getScaleFactor() : Number
      {
         return this.scaleFactor;
      }
      
      public function getNeighbours() : Array
      {
         return this.neighbours;
      }
      
      public function getBackgroundManager() : BackgroundManager
      {
         return this.backgroundManager;
      }
      
      public function getShipManager() : ShipManager
      {
         return this.shipManager;
      }
      
      public function getNebulaManager() : NebulaManager
      {
         return this.nebulaManager;
      }
      
      public function getPlanetManager() : PlanetManager
      {
         return this.planetManager;
      }
      
      public function getLensflareManager() : LensflareManager
      {
         return this.lensflareManager;
      }
      
      public function getMain() : Main
      {
         return this.main;
      }
      
      public function getMinimapManager() : MinimapManager
      {
         return this.minimapManager;
      }
      
      public function getDroneManager() : DroneManager
      {
         return this.droneManager;
      }
      
      public function getCollectableManager() : CollectableManager
      {
         return this.collectableManager;
      }
      
      public function getCombatManager() : CombatManager
      {
         return this.combatManager;
      }
      
      public function getEventManager() : EventManager
      {
         return this.eventManager;
      }
      
      public function getStationManager() : StationManager
      {
         return this.stationManager;
      }
      
      public function getMineManager() : MineManager
      {
         return this.mineManager;
      }
      
      public function getName() : String
      {
         return this.name;
      }
      
      public function getPvpAllowed() : Boolean
      {
         return this.pvpAllowed;
      }
      
      public function setPvpAllowed(param1:int) : void
      {
         this.pvpAllowed = Boolean(param1);
      }
      
      public function setHomeMapFaction(param1:int) : void
      {
         this.homeMapFaction = param1;
      }
      
      public function getHomeMapFaction() : int
      {
         return this.homeMapFaction;
      }
      
      public function addFinisherToList(param1:SWFFinisher) : void
      {
         var _loc3_:SWFFinisher = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.finisherList.length)
         {
            _loc3_ = this.finisherList[_loc2_];
            if(_loc3_ == param1)
            {
               return;
            }
            _loc2_++;
         }
         this.finisherList.push(param1);
      }
      
      public function getCtbManager() : CTBManager
      {
         return this.ctbManager;
      }
      
      public function getFireworksManager() : FireworksManager
      {
         return this.fireworksManager;
      }
      
      public function getCurrentStarSystemIndex() : int
      {
         var _loc1_:int = -1;
         if(this.mapID > 0 && this.mapID < 16)
         {
            _loc1_ = 0;
         }
         else if(this.mapID > 15 && this.mapID < 30)
         {
            _loc1_ = 1;
         }
         return _loc1_;
      }
   }
}

package net.bigpoint.darkorbit.map
{
   import flash.display.MovieClip;
   import net.bigpoint.darkorbit.ResourceManager;
   
   public class MapMarker
   {
      
      public var id:int;
      
      public var count:int;
      
      public var mc:MovieClip;
      
      public var x:int;
      
      public var y:int;
      
      public function MapMarker(param1:int, param2:int, param3:int, param4:int)
      {
         super();
         this.id = param1;
         this.count = param4;
         this.mc = ResourceManager.getMovieClip("minimap","minimapmarker");
         this.x = param2;
         this.y = param3;
      }
   }
}

package net.bigpoint.darkorbit.map
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.events.TimerEvent;
   import flash.geom.Matrix;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.utils.Timer;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.FastMath;
   import net.bigpoint.darkorbit.Interference;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.collectable.Beacon;
   import net.bigpoint.darkorbit.collectable.Collectable;
   import net.bigpoint.darkorbit.ctb.HomeZone;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.net.ClientCommands;
   import net.bigpoint.darkorbit.planet.Planet;
   import net.bigpoint.darkorbit.portal.Portal;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   import net.bigpoint.darkorbit.ship.ShipManager;
   import net.bigpoint.darkorbit.station.Station;
   
   public class MiniMap extends SimpleContainer
   {
      
      public static const logger:ILogger = Log.getLogger("MiniMap");
      
      public var zoomFactor:Number;
      
      private var shipManager:ShipManager;
      
      private var timer:Timer;
      
      private var minimapManager:MinimapManager;
      
      public var mapScaleFactor:Number;
      
      private var background:Bitmap;
      
      private var foreground:Bitmap;
      
      public var clickMap:Sprite;
      
      private var poizonesBmp:Bitmap;
      
      private var sprite:Sprite;
      
      private var tmpPoint:Point;
      
      private var route:Point;
      
      private var mapLabel:TextField;
      
      private var coordinatesLabel:TextField;
      
      private var routeInfoLabel:TextField;
      
      public var miniMapWidth:int;
      
      public var miniMapHeight:int;
      
      private var markers:Array;
      
      public var yOffset:int = 27;
      
      private var mapInfoY:int = 9;
      
      private var distance:Number = -1;
      
      private var finisher:SWFFinisher;
      
      private var mapID:int;
      
      private var mapName:String;
      
      private var mapNameWidth:int;
      
      private var maxNeededCooWidth:int;
      
      private var sourceBitmapData:BitmapData;
      
      private var threatBitmapData:BitmapData;
      
      private var interference:Interference;
      
      private var overlay:MovieClip;
      
      public var combinedScaleFactor:Number;
      
      private var foreGroundRec:Rectangle;
      
      private var indicatorColors:Array;
      
      private var scaleSize:Point;
      
      public function MiniMap(param1:MinimapManager, param2:BitmapData, param3:Number, param4:Point = null)
      {
         var _loc8_:Planet = null;
         var _loc9_:Station = null;
         this.clickMap = new Sprite();
         this.poizonesBmp = new Bitmap();
         this.sprite = new Sprite();
         this.tmpPoint = new Point();
         this.mapLabel = new TextField();
         this.coordinatesLabel = new TextField();
         this.routeInfoLabel = new TextField();
         this.markers = new Array();
         this.foreGroundRec = new Rectangle();
         this.indicatorColors = [16777215,16772505,16767296,16763955,16751360,16737792];
         this.scaleSize = new Point();
         super(param1.getMap().getMain().getGuiManager(),SimpleContainer.CLASS_MINIMAP);
         this.finisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("minimap"));
         this.mapScaleFactor = param1.getMap().getScaleFactor();
         this.minimapManager = param1;
         this.shipManager = param1.getMap().getShipManager();
         this.sourceBitmapData = param2;
         this.zoomFactor = param3;
         this.combinedScaleFactor = 1 / (param3 * 10);
         this.route = param4;
         this.overlay = this.finisher.getEmbededMovieClip("minimapOverlay");
         this.overlay.mouseEnabled = false;
         this.setBackground(param2);
         this.timer = new Timer(250,0);
         this.timer.addEventListener(TimerEvent.TIMER,this.onTimerTick);
         this.startTimer();
         var _loc5_:Array = param1.getMap().getMain().screenManager.planets;
         var _loc6_:int = 0;
         while(_loc6_ < _loc5_.length)
         {
            _loc8_ = _loc5_[_loc6_];
            _loc8_.deleteIcon();
            _loc6_++;
         }
         var _loc7_:Array = param1.getMap().getStationManager().getStations();
         _loc6_ = 0;
         while(_loc6_ < _loc7_.length)
         {
            _loc9_ = _loc7_[_loc6_];
            _loc9_.deleteIcon();
            _loc6_++;
         }
         this.initMapInfoLabel(this.mapLabel);
         this.initMapInfoLabel(this.coordinatesLabel);
         this.coordinatesLabel.text = "999/999";
         this.maxNeededCooWidth = int(this.coordinatesLabel.width) + 2;
         this.coordinatesLabel.text = "";
         this.initMapInfoLabel(this.routeInfoLabel);
         this.addChild(this.overlay);
         this.updateCoordinates();
         this.foreground.bitmapData.lock();
         this.foreground.bitmapData.fillRect(this.foreground.bitmapData.rect,0);
         this.foreGroundRec = this.foreground.bitmapData.rect;
         this.redrawEntities();
         this.updateCross();
         this.updateHeroPosition();
         this.foreground.bitmapData.lock();
      }
      
      public function startInterference(param1:int) : void
      {
         if(this.interference != null)
         {
            this.interference.cleanup();
         }
         this.interference = new Interference(this.clickMap.width,this.clickMap.height);
         this.interference.duration = param1;
         this.interference.alpha = 0.2;
         this.interference.start();
         this.interference.mouseChildren = false;
         this.interference.mouseEnabled = false;
         this.clickMap.addChild(this.interference);
      }
      
      public function stopInterference() : void
      {
         if(this.interference != null)
         {
            this.interference.cleanup();
            this.clickMap.removeChild(this.interference);
         }
      }
      
      public function updateThreatIndicator(param1:int = 0) : void
      {
         var _loc8_:Bitmap = null;
         var _loc2_:int = 6;
         var _loc3_:Number = this.background.height / (_loc2_ - 1);
         var _loc4_:Sprite = new Sprite();
         var _loc5_:uint = uint(this.indicatorColors[param1]);
         _loc4_.graphics.beginFill(_loc5_);
         _loc4_.graphics.drawRect(0,(5 - param1) * _loc3_,3,_loc3_ * param1);
         _loc4_.graphics.lineStyle(1,10079487);
         _loc4_.graphics.moveTo(8,0);
         _loc4_.graphics.lineTo(8,this.background.height);
         var _loc6_:Number = 0;
         var _loc7_:int = 0;
         while(_loc7_ < _loc2_)
         {
            if(_loc7_ == _loc2_ - 1)
            {
               _loc6_--;
            }
            _loc4_.graphics.moveTo(4,_loc6_);
            _loc4_.graphics.lineTo(10,_loc6_);
            _loc6_ += _loc3_;
            _loc7_++;
         }
         _loc6_ = 0;
         _loc2_ = 21;
         _loc3_ = this.background.height / (_loc2_ - 1);
         _loc7_ = 0;
         while(_loc7_ < _loc2_)
         {
            if(_loc7_ == _loc2_ - 1)
            {
               _loc6_--;
            }
            _loc4_.graphics.lineTo(9,_loc6_);
            _loc6_ += _loc3_;
            _loc7_++;
         }
         if(this.threatBitmapData == null)
         {
            this.threatBitmapData = new BitmapData(10,this.background.height,true,255);
            this.threatBitmapData.draw(_loc4_);
            _loc8_ = new Bitmap(this.threatBitmapData);
            _loc8_.x = -12;
            _loc8_.y = this.yOffset;
            this.addChild(_loc8_);
         }
         else
         {
            this.threatBitmapData.fillRect(this.threatBitmapData.rect,0);
            this.threatBitmapData.draw(_loc4_);
         }
      }
      
      public function startTimer() : void
      {
         if(!this.timer.running)
         {
            this.timer.start();
         }
      }
      
      public function stopTimer() : void
      {
         this.timer.stop();
      }
      
      private function initMapInfoLabel(param1:TextField) : void
      {
         param1.defaultTextFormat = Styles.h3Fmt;
         param1.autoSize = TextFieldAutoSize.LEFT;
         param1.textColor = 16777215;
         param1.embedFonts = Styles.h3Embed;
         param1.antiAliasType = AntiAliasType.ADVANCED;
         param1.selectable = false;
         param1.mouseEnabled = false;
         param1.y = this.mapInfoY;
         if(!contains(param1))
         {
            addChild(param1);
         }
      }
      
      private function onTimerTick(param1:TimerEvent) : void
      {
         this.updateCoordinates();
         this.foreground.bitmapData.lock();
         this.foreground.bitmapData.fillRect(this.foreGroundRec,0);
         this.updateCross();
         this.updateHeroPosition();
         this.foreground.bitmapData.unlock();
      }
      
      private function updateCoordinates() : void
      {
         var _loc1_:Ship = this.minimapManager.getMap().getShipManager().getHero();
         if(_loc1_ != null)
         {
            this.writeMapName();
            this.coordinatesLabel.x = this.mapNameWidth + this.mapLabel.x;
            this.coordinatesLabel.text = int(_loc1_.x / 100) + "/" + int(_loc1_.y / 100);
            if(this.distance != -1)
            {
               this.routeInfoLabel.text = "> " + BPLocale.getText("travelling_distance").replace(/%DIST%/,BPLocale.round(this.distance,2));
            }
            else
            {
               this.routeInfoLabel.text = "";
            }
         }
      }
      
      public function drawPOIZones() : void
      {
         var _loc4_:POIZone = null;
         var _loc5_:Point = null;
         var _loc6_:Point = null;
         var _loc7_:Number = NaN;
         var _loc1_:Array = this.minimapManager.getMap().poiManager.poiZones;
         if(this.clickMap.contains(this.poizonesBmp))
         {
            this.clickMap.removeChild(this.poizonesBmp);
            this.poizonesBmp = new Bitmap();
         }
         this.poizonesBmp.bitmapData = new BitmapData(this.foreground.width,this.foreground.height,true,0);
         var _loc2_:Sprite = new Sprite();
         var _loc3_:int = 0;
         while(_loc3_ < _loc1_.length)
         {
            _loc4_ = _loc1_[_loc3_];
            _loc5_ = new Point(_loc4_.x * this.combinedScaleFactor,_loc4_.y * this.combinedScaleFactor);
            if(_loc4_.zoneType == POIManager.TYPE_NO_ACCESS)
            {
               _loc2_.graphics.beginFill(POIManager.zoneTypeColorDict[_loc4_.zoneType]);
               _loc2_.alpha = 0.7;
            }
            switch(_loc4_.shape)
            {
               case "REC":
                  _loc6_ = new Point(_loc4_.zoneWidth * this.combinedScaleFactor,_loc4_.zoneHeight * this.combinedScaleFactor);
                  _loc2_.graphics.drawRect(_loc5_.x,_loc5_.y,_loc6_.x,_loc6_.y);
                  break;
               case "CIR":
                  _loc7_ = _loc4_.radius * this.combinedScaleFactor;
                  _loc2_.graphics.drawCircle(_loc5_.x,_loc5_.y,_loc7_);
            }
            _loc2_.graphics.endFill();
            _loc3_++;
         }
         this.poizonesBmp.alpha = 0.4;
         this.poizonesBmp.bitmapData.draw(_loc2_);
         this.clickMap.addChild(this.poizonesBmp);
      }
      
      private function writeMapName() : void
      {
         if(this.mapID != this.minimapManager.getMap().getMapID())
         {
            this.mapID = this.minimapManager.getMap().getMapID();
            this.mapName = this.minimapManager.getMap().getName();
            this.mapLabel.text = this.mapName;
            this.mapNameWidth = int(this.mapLabel.width) + 2;
            this.routeInfoLabel.x = this.mapNameWidth + this.mapLabel.x + this.maxNeededCooWidth;
         }
      }
      
      public function setBackground(param1:BitmapData) : void
      {
         var _loc2_:BitmapData = this.scaleBitmapData(param1);
         this.background = new Bitmap(_loc2_);
         this.background.y = this.yOffset;
         this.overlay.width = _loc2_.width;
         this.overlay.height = _loc2_.height;
         this.overlay.y = this.yOffset;
         this.miniMapWidth = _loc2_.width;
         this.miniMapHeight = _loc2_.height;
         this.addChild(this.background);
         var _loc3_:BitmapData = new BitmapData(_loc2_.width,_loc2_.height,true,0);
         this.foreground = new Bitmap(_loc3_);
         this.clickMap.addChild(this.foreground);
         this.clickMap.addEventListener(MouseEvent.CLICK,this.handleMapClick);
         this.clickMap.buttonMode = true;
         this.clickMap.y = this.yOffset;
         this.addChild(this.clickMap);
         this.drawPOIZones();
      }
      
      private function handleMapClick(param1:MouseEvent) : void
      {
         var _loc2_:Map = this.minimapManager.getMap();
         if(_loc2_ == null)
         {
            return;
         }
         if(_loc2_.getEventManager().isControlsLocked())
         {
            return;
         }
         var _loc3_:Sprite = param1.target as Sprite;
         var _loc4_:int = _loc3_.mouseX;
         var _loc5_:int = _loc3_.mouseY;
         var _loc6_:Number = _loc4_ * this.zoomFactor * 10;
         var _loc7_:Number = _loc5_ * this.zoomFactor * 10;
         if(_loc2_.getMain().getGuiManager().getGroupUI() != null && _loc2_.getMain().getGuiManager().getGroupUI().isInPingMode)
         {
            _loc2_.getMain().getConnectionManager().sendCommand(ClientCommands.GROUPSYSTEM,[ClientCommands.GROUPSYSTEM_PING,ClientCommands.GROUPSYSTEM_PING_POSITION,_loc6_,_loc7_]);
            _loc2_.getMain().getGuiManager().getGroupUI().isInPingMode = false;
            return;
         }
         var _loc8_:Ship = _loc2_.getShipManager().getHero();
         if(_loc8_ == null)
         {
            return;
         }
         var _loc9_:Point = _loc2_.poiManager.checkPOIZoneCollisions(new Point(_loc8_.x,_loc8_.y),new Point(_loc6_,_loc7_));
         if(_loc9_ != null)
         {
            _loc6_ = _loc9_.x;
            _loc7_ = _loc9_.y;
         }
         _loc2_.getEventManager().moveHeroToCordinates(_loc6_,_loc7_);
         this.highlightRoute(_loc6_,_loc7_);
      }
      
      public function highlightRoute(param1:int, param2:int) : void
      {
         this.route = new Point(param1 * this.combinedScaleFactor,param2 * this.combinedScaleFactor);
         var _loc3_:MovieClip = this.finisher.getEmbededMovieClip("minimapPointer");
         _loc3_.x = this.route.x;
         _loc3_.y = this.route.y + this.yOffset;
         addChild(_loc3_);
         TweenLite.to(_loc3_,5,{
            "onUpdate":this.onUpdatePointer,
            "onUpdateParams":[_loc3_]
         });
      }
      
      private function onUpdatePointer(param1:MovieClip) : void
      {
         if(param1.framesLoaded == param1.currentFrame)
         {
            TweenMax.killTweensOf(param1);
            removeChild(param1);
         }
      }
      
      private function scaleBitmapData(param1:BitmapData) : BitmapData
      {
         var _loc2_:int = Math.round(this.minimapManager.getMap().serious_width / this.zoomFactor * 0.1);
         var _loc3_:int = Math.round(this.minimapManager.getMap().serious_height / this.zoomFactor * 0.1);
         this.scaleSize.x = _loc2_ / this.minimapManager.getMap().serious_width;
         this.scaleSize.y = _loc3_ / this.minimapManager.getMap().serious_height;
         var _loc4_:int = Math.round(param1.width / this.zoomFactor * 10);
         var _loc5_:int = Math.round(param1.height / this.zoomFactor * 10);
         var _loc6_:Bitmap = new Bitmap(param1);
         var _loc7_:Number = 1 / this.zoomFactor * 10;
         var _loc8_:Matrix = new Matrix();
         _loc8_.scale(_loc7_,_loc7_);
         _loc8_.translate((_loc2_ - _loc4_) / 2,(_loc3_ - _loc5_) / 2);
         var _loc9_:BitmapData = new BitmapData(_loc2_,_loc3_,false,0);
         _loc9_.draw(_loc6_,_loc8_,null,null,new Rectangle(0,0,_loc2_,_loc3_),false);
         return _loc9_;
      }
      
      public function cleanup() : void
      {
         this.timer.stop();
         this.timer.removeEventListener(TimerEvent.TIMER,this.onTimerTick);
         this.clickMap.removeEventListener(MouseEvent.CLICK,this.handleMapClick);
         this.sourceBitmapData = null;
         this.threatBitmapData = null;
         this.background = null;
         this.foreground = null;
         if(this.interference != null)
         {
            this.interference.cleanup();
         }
      }
      
      public function redrawEntities() : void
      {
         var _loc5_:Planet = null;
         var _loc6_:BitmapData = null;
         var _loc7_:Station = null;
         var _loc8_:BitmapData = null;
         var _loc9_:Portal = null;
         var _loc1_:Array = this.minimapManager.getMap().getMain().screenManager.planets;
         var _loc2_:int = 0;
         while(_loc2_ < 0)
         {
            _loc5_ = _loc1_[_loc2_];
            _loc6_ = _loc5_.getIcon();
            if(_loc5_.clip != null)
            {
               if(_loc6_ == null)
               {
                  _loc5_.scaleSize.x = this.scaleSize.x;
                  _loc5_.scaleSize.y = this.scaleSize.y;
                  _loc5_.setIcon(this.zoomFactor * this.mapScaleFactor);
               }
               this.drawPlanetIcon(_loc5_);
            }
            _loc2_++;
         }
         var _loc3_:Array = this.minimapManager.getMap().getStationManager().getStations();
         _loc2_ = 0;
         while(_loc2_ < _loc3_.length)
         {
            _loc7_ = _loc3_[_loc2_];
            _loc8_ = _loc7_.getIcon();
            if(_loc7_.clip != null)
            {
               if(_loc8_ == null)
               {
                  _loc7_.scaleSize.x = this.scaleSize.x;
                  _loc7_.scaleSize.y = this.scaleSize.y;
                  _loc7_.setIcon(this.zoomFactor * this.mapScaleFactor);
               }
               this.drawStationIcon(_loc7_);
            }
            _loc2_++;
         }
         var _loc4_:Vector.<Portal> = this.minimapManager.getMap().portalManager.getPortals();
         _loc2_ = int(_loc4_.length);
         while(--_loc2_ > -1)
         {
            _loc9_ = _loc4_[_loc2_];
            if(_loc9_.visibleOnMiniMap)
            {
               this.drawIcon(_loc9_.getPosX(),_loc9_.getPosY(),"mapIcon_portal");
            }
         }
      }
      
      private function updateCross() : void
      {
         var _loc2_:Ship = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc1_:BitmapData = this.foreground.bitmapData;
         if(_loc1_ != null)
         {
            _loc2_ = this.shipManager.getHero();
            if(_loc2_ != null)
            {
               _loc3_ = _loc2_.x * this.combinedScaleFactor;
               _loc4_ = _loc2_.y * this.combinedScaleFactor;
               _loc5_ = _loc1_.width;
               while(--_loc5_ > -1)
               {
                  _loc1_.setPixel32(_loc5_,_loc4_,2861864084);
                  _loc1_.setPixel32(_loc5_,_loc4_ + 1,2861864084);
               }
               _loc6_ = _loc1_.height;
               while(--_loc6_ > -1)
               {
                  _loc1_.setPixel32(_loc3_,_loc6_,2861864084);
                  _loc1_.setPixel32(_loc3_ + 1,_loc6_,2861864084);
               }
               this.drawPixel(_loc3_,_loc4_,4281584640);
               if(this.route != null)
               {
                  this.updateRoute(_loc3_,_loc4_,this.route.x,this.route.y);
                  this.drawIcon(this.route.x,this.route.y,"mapIcon_finish",false);
               }
            }
         }
      }
      
      public function updateHeroPosition() : void
      {
         var _loc4_:MapObject = null;
         var _loc5_:Array = null;
         var _loc6_:HomeZone = null;
         var _loc7_:Array = null;
         var _loc8_:Collectable = null;
         var _loc9_:int = 0;
         var _loc10_:int = 0;
         var _loc11_:Beacon = null;
         if(this.foreground == null)
         {
            return;
         }
         var _loc1_:BitmapData = this.foreground.bitmapData;
         if(_loc1_ == null)
         {
            return;
         }
         var _loc2_:Ship = this.shipManager.getHero();
         if(_loc2_ == null)
         {
            return;
         }
         var _loc3_:Array = this.shipManager.getShips();
         for each(_loc4_ in _loc3_)
         {
            _loc9_ = _loc4_.x * this.combinedScaleFactor;
            _loc10_ = _loc4_.y * this.combinedScaleFactor;
            if(!_loc4_.idleState)
            {
               if(_loc4_.isIconOnMiniMap())
               {
                  this.drawIcon(_loc9_,_loc10_,_loc4_.getMiniMapIcon(),false);
               }
               else
               {
                  this.drawPixel(_loc9_,_loc10_,_loc4_.getMiniMapColor());
               }
            }
            _loc11_ = _loc4_.getBeacon();
            if(_loc11_ != null)
            {
               this.drawIcon(_loc4_.x,_loc4_.y,"beacon_" + _loc11_.getToCompanyID() + "_" + _loc11_.getFromCompanyID());
            }
         }
         _loc5_ = this.minimapManager.getMap().getCtbManager().getHomezones();
         for each(_loc6_ in _loc5_)
         {
            this.drawIcon(_loc6_.getX(),_loc6_.getY(),"homezone_" + _loc6_.getCompanyID());
         }
         _loc7_ = this.minimapManager.getMap().getCollectableManager().getBeacons();
         for each(_loc8_ in _loc7_)
         {
            if(_loc8_ is Beacon && _loc8_.clip != null)
            {
               this.drawIcon(_loc8_.clip.x,_loc8_.clip.y,"beacon_" + Beacon(_loc8_).getToCompanyID() + "_" + Beacon(_loc8_).getFromCompanyID());
            }
         }
      }
      
      private function drawPixel(param1:int, param2:int, param3:uint) : void
      {
         var _loc4_:BitmapData = this.foreground.bitmapData;
         if(param1 > 2 && param2 > 2 && param1 < this.miniMapWidth - 4 && param2 < this.miniMapHeight - 4)
         {
            _loc4_.setPixel32(param1,param2,param3);
            _loc4_.setPixel32(param1 + 1,param2,param3);
            _loc4_.setPixel32(param1,param2 + 1,param3);
            _loc4_.setPixel32(param1 + 1,param2 + 1,param3);
         }
         else if(param1 <= 1)
         {
            if(param2 <= 2)
            {
               _loc4_.setPixel32(3,3,param3);
               _loc4_.setPixel32(4,4,param3);
               _loc4_.setPixel32(4,5,param3);
               _loc4_.setPixel32(5,4,param3);
            }
            else if(param2 >= this.miniMapHeight - 4)
            {
               _loc4_.setPixel32(3,this.miniMapHeight - 5,param3);
               _loc4_.setPixel32(4,this.miniMapHeight - 6,param3);
               _loc4_.setPixel32(4,this.miniMapHeight - 7,param3);
               _loc4_.setPixel32(5,this.miniMapHeight - 6,param3);
            }
            else
            {
               _loc4_.setPixel32(2,param2,param3);
               _loc4_.setPixel32(3,param2,param3);
               _loc4_.setPixel32(3,param2 + 1,param3);
               _loc4_.setPixel32(3,param2 - 1,param3);
               _loc4_.setPixel32(4,param2 + 1,param3);
               _loc4_.setPixel32(4,param2 - 1,param3);
            }
         }
         else if(param1 >= this.miniMapWidth - 4)
         {
            if(param2 <= 1)
            {
               _loc4_.setPixel32(this.miniMapWidth - 3,2,param3);
               _loc4_.setPixel32(this.miniMapWidth - 4,3,param3);
               _loc4_.setPixel32(this.miniMapWidth - 4,4,param3);
               _loc4_.setPixel32(this.miniMapWidth - 5,3,param3);
            }
            else if(param2 >= this.miniMapHeight - 4)
            {
               _loc4_.setPixel32(this.miniMapWidth - 3,this.miniMapHeight - 3,param3);
               _loc4_.setPixel32(this.miniMapWidth - 4,this.miniMapHeight - 4,param3);
               _loc4_.setPixel32(this.miniMapWidth - 4,this.miniMapHeight - 5,param3);
               _loc4_.setPixel32(this.miniMapWidth - 5,this.miniMapHeight - 4,param3);
            }
            else
            {
               _loc4_.setPixel32(this.miniMapWidth - 3,param2,param3);
               _loc4_.setPixel32(this.miniMapWidth - 4,param2,param3);
               _loc4_.setPixel32(this.miniMapWidth - 4,param2 + 1,param3);
               _loc4_.setPixel32(this.miniMapWidth - 4,param2 - 1,param3);
               _loc4_.setPixel32(this.miniMapWidth - 5,param2 + 1,param3);
               _loc4_.setPixel32(this.miniMapWidth - 5,param2 - 1,param3);
            }
         }
         else if(param2 <= 2)
         {
            _loc4_.setPixel32(param1,2,param3);
            _loc4_.setPixel32(param1,3,param3);
            _loc4_.setPixel32(param1 + 1,3,param3);
            _loc4_.setPixel32(param1 - 1,3,param3);
            _loc4_.setPixel32(param1 + 1,4,param3);
            _loc4_.setPixel32(param1 - 1,4,param3);
         }
         else if(param2 >= this.miniMapHeight - 4)
         {
            _loc4_.setPixel32(param1,this.miniMapHeight - 3,param3);
            _loc4_.setPixel32(param1,this.miniMapHeight - 4,param3);
            _loc4_.setPixel32(param1 + 1,this.miniMapHeight - 4,param3);
            _loc4_.setPixel32(param1 - 1,this.miniMapHeight - 4,param3);
            _loc4_.setPixel32(param1 + 1,this.miniMapHeight - 5,param3);
            _loc4_.setPixel32(param1 - 1,this.miniMapHeight - 5,param3);
         }
      }
      
      public function drawIcon(param1:int, param2:int, param3:String, param4:Boolean = true) : void
      {
         var _loc6_:BitmapData = null;
         var _loc5_:BitmapData = this.finisher.getEmbededBitmapData(param3);
         if(param4)
         {
            param1 *= this.combinedScaleFactor;
            param2 *= this.combinedScaleFactor;
         }
         if(param3 == "mapIcon_portal")
         {
            _loc6_ = this.background.bitmapData;
         }
         else
         {
            _loc6_ = this.foreground.bitmapData;
         }
         this.tmpPoint.x = param1 - _loc5_.width / 2;
         this.tmpPoint.y = param2 - _loc5_.height / 2;
         _loc6_.copyPixels(_loc5_,_loc5_.rect,this.tmpPoint,null,null,true);
      }
      
      private function updateRoute(param1:int, param2:int, param3:int, param4:int) : void
      {
         var _loc5_:BitmapData = this.foreground.bitmapData;
         this.sprite.graphics.clear();
         this.sprite.graphics.lineStyle(1,6649302);
         this.sprite.graphics.moveTo(param1,param2);
         this.sprite.graphics.lineTo(param3,param4);
         _loc5_.draw(this.sprite);
         this.distance = FastMath.sqrt(Math.pow(param2 - param4,2) + Math.pow(param4 - param2,2));
      }
      
      private function updateRouteImpossiblePath(param1:int, param2:int, param3:int, param4:int) : void
      {
         var _loc5_:Sprite = new Sprite();
         var _loc6_:BitmapData = this.foreground.bitmapData;
         _loc5_.graphics.clear();
         _loc5_.graphics.lineStyle(1,16711680);
         _loc5_.graphics.moveTo(param1,param2);
         _loc5_.graphics.lineTo(param3,param4);
         _loc6_.draw(_loc5_);
         this.distance = FastMath.sqrt(Math.pow(param2 - param4,2) + Math.pow(param4 - param2,2));
      }
      
      public function drawPlanetIcon(param1:Planet) : void
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:BitmapData = null;
         var _loc2_:BitmapData = param1.getIcon();
         if(_loc2_ != null)
         {
            _loc3_ = param1.x * this.miniMapWidth * param1.pFactor / this.minimapManager.getMap().serious_width;
            _loc4_ = param1.y * this.miniMapHeight * param1.pFactor / this.minimapManager.getMap().serious_height;
            _loc5_ = this.background.bitmapData;
            this.tmpPoint.x = _loc3_ + param1.originPoint.x * param1.pFactor * param1.scaleSize.x;
            this.tmpPoint.y = _loc4_ + param1.originPoint.y * param1.pFactor * param1.scaleSize.y;
            _loc5_.copyPixels(_loc2_,_loc2_.rect,this.tmpPoint,null,null,true);
         }
      }
      
      public function drawStationIcon(param1:Station) : void
      {
         var _loc2_:BitmapData = param1.getIcon();
         var _loc3_:BitmapData = this.background.bitmapData;
         this.tmpPoint.x = (param1.getPosX() - param1.clip.width / 2) * this.miniMapWidth / this.minimapManager.getMap().serious_width;
         this.tmpPoint.y = (param1.getPosY() - param1.clip.height / 2) * this.miniMapHeight / this.minimapManager.getMap().serious_height;
         _loc3_.copyPixels(_loc2_,_loc2_.rect,this.tmpPoint,null,null,true);
      }
      
      public function clearRoute() : void
      {
         this.distance = -1;
         this.route = null;
      }
      
      public function getScaleFactor() : int
      {
         return this.zoomFactor;
      }
      
      public function getLastRoute() : Point
      {
         return this.route;
      }
      
      public function addMapMarker(param1:int, param2:int, param3:int, param4:int = -1) : void
      {
         var _loc5_:MapMarker = new MapMarker(param1,param2,param3,param4);
         this.markers[param1] = _loc5_;
         this.addMapMarker2(_loc5_);
      }
      
      private function addMapMarker2(param1:MapMarker) : void
      {
         param1.mc.gotoAndStop(1);
         param1.mc.x = param1.x * this.combinedScaleFactor;
         param1.mc.y = param1.y * this.combinedScaleFactor + this.yOffset;
         param1.mc.mouseEnabled = false;
         param1.mc.mouseChildren = false;
         addChild(param1.mc);
         TweenLite.to(param1.mc,0.5,{
            "ease":Linear.easeNone,
            "frame":param1.mc.framesLoaded,
            "onComplete":this.handleMapMarker,
            "onCompleteParams":[param1]
         });
      }
      
      private function handleMapMarker(param1:MapMarker) : void
      {
         removeChild(param1.mc);
         if(param1.count == -1)
         {
            this.addMapMarker2(param1);
         }
         else if(param1.count > 1)
         {
            --param1.count;
            this.addMapMarker2(param1);
         }
         else
         {
            delete this.markers[param1.id];
         }
      }
      
      public function stopMapMarker(param1:int) : void
      {
         var _loc2_:MapMarker = this.markers[param1];
         _loc2_.count = 0;
         delete this.markers[param1];
      }
      
      private function pingCompleteHandler(param1:MovieClip) : void
      {
         removeChild(param1);
      }
   }
}

package net.bigpoint.darkorbit.map
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.geom.Matrix;
   import flash.geom.Point;
   import mx.controls.Image;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class MinimapManager
   {
      
      public static const logger:ILogger = Log.getLogger("MinimapManager");
      
      public static var isInitialized:Boolean = false;
      
      public static var scaleFactor:Number = 8;
      
      public static var mapFactor:Number = 1;
      
      private static const WINDOW_EDGE_BUFFER:Number = 30;
      
      private var miniMap:MiniMap;
      
      private var map:Map;
      
      private const MIN:Number = 3;
      
      private const MAX:Number = 11;
      
      public var backgroundBmd:BitmapData;
      
      private const BACKGROUND_WIDTH:int = 210;
      
      private const BACKGROUND_HEIGHT:int = 131;
      
      private var minimapReskey:String;
      
      public function MinimapManager(param1:Map)
      {
         super();
         this.map = param1;
      }
      
      public function createMinimap(param1:String = null) : void
      {
         if(!Settings.createMinimap)
         {
            return;
         }
         if(param1 != null)
         {
            this.minimapReskey = param1;
            isInitialized = true;
            this.loadBackground(param1);
         }
         else
         {
            this.attachBackground(this.minimapReskey);
         }
      }
      
      private function loadBackground(param1:String) : void
      {
         if(ResourceManager.fileCollection.isLoaded(param1))
         {
            this.attachBackground(param1);
         }
         else
         {
            ResourceManager.fileCollection.load(param1,this.handleBackgroundLoaded);
         }
      }
      
      private function handleBackgroundLoaded(param1:SWFFinisher) : void
      {
         var _loc2_:String = param1.fileVO.id;
         this.attachBackground(_loc2_);
      }
      
      private function attachBackground(param1:String = null) : void
      {
         var _loc2_:BitmapData = null;
         var _loc3_:Point = null;
         var _loc5_:SWFFinisher = null;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:Image = null;
         var _loc9_:Number = NaN;
         var _loc10_:Matrix = null;
         _loc2_ = new BitmapData(210,131,false,0);
         if(_loc2_ != null)
         {
            _loc6_ = Math.round(_loc2_.width);
            _loc7_ = Math.round(_loc2_.height);
            _loc8_ = new Image();
            _loc8_.load(new Bitmap(_loc2_,"auto",true));
            _loc9_ = mapFactor * this.BACKGROUND_WIDTH / _loc2_.width;
            if(_loc9_ < 1)
            {
               _loc9_ = 0.1;
            }
            else
            {
               _loc9_ = 1;
            }
            _loc10_ = new Matrix();
            _loc10_.scale(_loc9_,_loc9_);
            this.backgroundBmd = new BitmapData(_loc6_ * _loc9_,_loc7_ * _loc9_);
            this.backgroundBmd.draw(_loc8_.content,_loc10_);
         }
         var _loc4_:SimpleWindow = this.map.getMain().getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_MINIMAP);
         if(_loc4_ == null)
         {
            this.map.getMain().getGuiManager().createMinimapWindow();
            _loc4_ = this.map.getMain().getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_MINIMAP);
         }
         if(this.miniMap != null)
         {
            this.cleanup();
         }
         this.miniMap = new MiniMap(this,this.backgroundBmd,scaleFactor * mapFactor,_loc3_);
         this.miniMap.addPredefinedPosition(new Point(30,20));
         _loc4_.addContainer(this.miniMap);
         this.miniMap.setPredefinedPosition();
         _loc4_.setDimension(this.miniMap.width + 25,this.miniMap.height + 25);
         this.miniMap.updateThreatIndicator(Settings.enemyCount);
         this.checkMiniMapIsInsideClientBounds(_loc4_);
      }
      
      private function checkMiniMapIsInsideClientBounds(param1:SimpleWindow) : void
      {
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         var _loc2_:Boolean = false;
         var _loc3_:Number = ScreenManager.getScreenWidth();
         var _loc4_:Number = ScreenManager.getScreenHeight();
         var _loc5_:Point = new Point(param1.x,param1.y);
         if(_loc5_.x + this.miniMap.width > _loc3_)
         {
            _loc6_ = _loc5_.x + param1.getWindowDimension().x + WINDOW_EDGE_BUFFER - _loc3_;
            param1.x -= _loc6_;
            _loc2_ = true;
         }
         if(_loc5_.y + this.miniMap.height > _loc4_)
         {
            _loc7_ = _loc5_.y + param1.getWindowDimension().y + WINDOW_EDGE_BUFFER - _loc4_;
            param1.y -= _loc7_;
            _loc2_ = true;
         }
         if(_loc2_)
         {
            this.saveSetting();
            param1.saveWindowSetting(true);
         }
      }
      
      public function cleanup() : void
      {
         if(!Settings.createMinimap)
         {
            return;
         }
         isInitialized = false;
         if(this.miniMap != null)
         {
            this.miniMap.cleanup();
         }
         var _loc1_:SimpleWindow = this.map.getMain().getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_MINIMAP);
         if(_loc1_ != null)
         {
            _loc1_.removeContainer(this.miniMap);
         }
      }
      
      public function getMiniMap() : MiniMap
      {
         return this.miniMap;
      }
      
      public function zoomIn() : void
      {
         if(this.backgroundBmd != null)
         {
            if(scaleFactor > this.MIN)
            {
               this.cleanup();
               --scaleFactor;
               this.createMinimap();
            }
         }
         this.saveSetting();
      }
      
      public function zoomOut() : void
      {
         if(this.backgroundBmd != null)
         {
            if(scaleFactor < this.MAX)
            {
               this.cleanup();
               ++scaleFactor;
               this.createMinimap();
            }
         }
         this.saveSetting();
      }
      
      private function saveSetting() : void
      {
         this.map.getMain().getConnectionManager().sendCommand(ServerCommands.CLIENT_SETTING,[ServerCommands.SET_MINIMAP_SCALE + ServerCommands.SETTING_KEY_SEPERATOR + Settings.resolutionID,scaleFactor.toString()]);
      }
      
      public function getMap() : Map
      {
         return this.map;
      }
   }
}

package net.bigpoint.darkorbit.map
{
   import flash.display.BitmapData;
   import flash.display.Sprite;
   import flash.geom.Matrix;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.utils.Dictionary;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.FastMath;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.background.Background;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.PoizonePattern;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class POIManager
   {
      
      public static const logger:ILogger = Log.getLogger("POIManager");
      
      public static var noaBmdScalefactor:Number = 40;
      
      public static var designMaskScalefactor:Number = 10;
      
      public static const NOA_BMP_WIDTH:int = 525;
      
      public static const NOA_BMP_HEIGHT:int = 328;
      
      public static const MAX_VISUAL_DIMENSION:int = 1000;
      
      public static const SHAPE_CIRCLE:String = "CIR";
      
      public static const SHAPE_RECT:String = "REC";
      
      public static const SHAPE_POLYGON:String = "POL";
      
      public static const TYPE_NO_ACCESS:String = "NOA";
      
      public static const TYPE_HEALING:String = "HEA";
      
      public static const TYPE_TRIGGER:String = "TRG";
      
      public static const TYPE_DAMAGE:String = "DMG";
      
      public static const COLOR_RED:uint = 16711680;
      
      public static const COLOR_GREEN:uint = 65280;
      
      public static const COLOR_BLUE:uint = 255;
      
      public static const zoneTypeColorDict:Dictionary = new Dictionary();
      
      public var poiZones:Array;
      
      public var designMasks:Vector.<DesignMask>;
      
      public var noaZones:Array;
      
      public var noaBmd:BitmapData;
      
      public var noaRouteBmd:Line;
      
      public var healingZones:Array;
      
      public var triggerZones:Array;
      
      public var enterLeaveTriggerZones:Array;
      
      private var map:Map;
      
      private var halfScreenWidth:int;
      
      private var halfScreenHeight:int;
      
      public var currentVisualStyle:int;
      
      public function POIManager(param1:Map)
      {
         super();
         this.map = param1;
         this.halfScreenWidth = ScreenManager.getHalfScreenWidth();
         this.halfScreenHeight = ScreenManager.getHalfScreenHeight();
         this.poiZones = [];
         this.noaZones = [];
         this.healingZones = [];
         this.triggerZones = [];
         this.designMasks = new Vector.<DesignMask>();
         this.enterLeaveTriggerZones = [];
         this.createPOIColorReference();
         this.currentVisualStyle = Settings.qualityPoizone;
      }
      
      private function createPOIColorReference() : void
      {
         zoneTypeColorDict[TYPE_NO_ACCESS] = COLOR_RED;
         zoneTypeColorDict[TYPE_HEALING] = COLOR_GREEN;
         zoneTypeColorDict[TYPE_TRIGGER] = COLOR_BLUE;
         zoneTypeColorDict[TYPE_DAMAGE] = COLOR_BLUE;
      }
      
      public function addPOIZone(param1:String, param2:int, param3:String, param4:int, param5:Array) : void
      {
         var _loc6_:POIZone = null;
         switch(param3)
         {
            case SHAPE_CIRCLE:
               _loc6_ = new POIZone(param1,param2,param3,this.map,param4,param5,param5[2]);
               switch(param1)
               {
                  case "NOA":
                     this.noaZones.push(_loc6_);
                     this.expandNoaBmp(_loc6_);
                     break;
                  case "HEA":
                     this.healingZones.push(_loc6_);
                     break;
                  case "TRG":
                     this.triggerZones.push(_loc6_);
               }
               break;
            case SHAPE_RECT:
            case SHAPE_POLYGON:
               _loc6_ = new POIZone(param1,param2,param3,this.map,param4,param5);
               switch(param1)
               {
                  case "NOA":
                     this.noaZones.push(_loc6_);
                     this.expandNoaBmp(_loc6_);
                     break;
                  case "HEA":
                     this.healingZones.push(_loc6_);
                     break;
                  case "TRG":
                     this.triggerZones.push(_loc6_);
               }
         }
         this.poiZones.push(_loc6_);
         _loc6_.init();
      }
      
      private function drawDesignMasks() : void
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:int = 0;
         var _loc10_:int = 0;
         var _loc11_:Rectangle = null;
         var _loc12_:Sprite = null;
         var _loc13_:Matrix = null;
         var _loc14_:POIZone = null;
         var _loc1_:int = 2;
         for each(_loc14_ in this.poiZones)
         {
            if(_loc14_.designID != 0)
            {
               while(_loc14_.designID >= this.designMasks.length)
               {
                  this.designMasks[this.designMasks.length] = null;
               }
               if(this.designMasks[_loc14_.designID] == null)
               {
                  this.designMasks[_loc14_.designID] = new DesignMask(new BitmapData(Math.round(this.map.serious_width / designMaskScalefactor),Math.round(this.map.serious_height / designMaskScalefactor),true,0));
               }
               if(this.designMasks[_loc14_.designID].scale > 1)
               {
                  _loc9_ = Math.round((this.map.serious_width * this.designMasks[_loc14_.designID].scale - this.map.serious_width) / 2);
                  _loc10_ = Math.round((this.map.serious_height * this.designMasks[_loc14_.designID].scale - this.map.serious_height) / 2);
               }
               else
               {
                  _loc9_ = 0;
                  _loc10_ = 0;
               }
               switch(_loc14_.shape)
               {
                  case SHAPE_RECT:
                     if(_loc14_.topLeft.x + _loc9_ < 0)
                     {
                        this.expandDesignMask(_loc14_.designID,Math.abs(_loc14_.topLeft.x + _loc9_),0);
                        _loc9_ = Math.round((this.map.serious_width * this.designMasks[_loc14_.designID].scale - this.map.serious_width) / 2);
                        _loc10_ = Math.round((this.map.serious_height * this.designMasks[_loc14_.designID].scale - this.map.serious_height) / 2);
                     }
                     else if(_loc14_.topLeft.x + _loc9_ > this.map.serious_width + 2 * _loc9_)
                     {
                        this.expandDesignMask(_loc14_.designID,_loc14_.topLeft.x + _loc9_ - (this.map.serious_width + 2 * _loc9_),0);
                        _loc9_ = Math.round((this.map.serious_width * this.designMasks[_loc14_.designID].scale - this.map.serious_width) / 2);
                        _loc10_ = Math.round((this.map.serious_height * this.designMasks[_loc14_.designID].scale - this.map.serious_height) / 2);
                     }
                     if(_loc14_.topLeft.y + _loc10_ < 0)
                     {
                        this.expandDesignMask(_loc14_.designID,0,Math.abs(_loc14_.topLeft.y + _loc10_));
                        _loc9_ = Math.round((this.map.serious_width * this.designMasks[_loc14_.designID].scale - this.map.serious_width) / 2);
                        _loc10_ = Math.round((this.map.serious_height * this.designMasks[_loc14_.designID].scale - this.map.serious_height) / 2);
                     }
                     else if(_loc14_.topLeft.y + _loc10_ > this.map.serious_height + 2 * _loc10_)
                     {
                        this.expandDesignMask(_loc14_.designID,0,_loc14_.topLeft.y + _loc10_ - (this.map.serious_height + 2 * _loc10_));
                        _loc9_ = Math.round((this.map.serious_width * this.designMasks[_loc14_.designID].scale - this.map.serious_width) / 2);
                        _loc10_ = Math.round((this.map.serious_height * this.designMasks[_loc14_.designID].scale - this.map.serious_height) / 2);
                     }
                     if(_loc14_.botRight.x + _loc9_ > this.map.serious_width + 2 * _loc9_)
                     {
                        this.expandDesignMask(_loc14_.designID,_loc14_.botRight.x + _loc9_ - (this.map.serious_width + 2 * _loc9_),0);
                        _loc9_ = Math.round((this.map.serious_width * this.designMasks[_loc14_.designID].scale - this.map.serious_width) / 2);
                        _loc10_ = Math.round((this.map.serious_height * this.designMasks[_loc14_.designID].scale - this.map.serious_height) / 2);
                     }
                     if(_loc14_.botRight.y + _loc10_ > this.map.serious_height + 2 * _loc10_)
                     {
                        this.expandDesignMask(_loc14_.designID,0,_loc14_.botRight.y + _loc10_ - (this.map.serious_height + 2 * _loc10_));
                        _loc9_ = Math.round((this.map.serious_width * this.designMasks[_loc14_.designID].scale - this.map.serious_width) / 2);
                        _loc10_ = Math.round((this.map.serious_height * this.designMasks[_loc14_.designID].scale - this.map.serious_height) / 2);
                     }
                     _loc2_ = Math.round((_loc14_.topLeft.x + _loc9_) / designMaskScalefactor) - _loc1_;
                     _loc3_ = Math.round((_loc14_.topLeft.y + _loc10_) / designMaskScalefactor) - _loc1_;
                     _loc4_ = Math.round((_loc14_.botRight.x + _loc9_) / designMaskScalefactor) + _loc1_;
                     _loc5_ = Math.round((_loc14_.botRight.y + _loc10_) / designMaskScalefactor) + _loc1_;
                     _loc6_ = _loc4_ - _loc2_;
                     _loc7_ = _loc5_ - _loc3_;
                     _loc11_ = new Rectangle(_loc2_,_loc3_,_loc6_,_loc7_);
                     this.designMasks[_loc14_.designID].mask.fillRect(_loc11_,4278190080);
                     break;
                  case SHAPE_CIRCLE:
                     if(_loc14_.points[0] + _loc9_ - _loc8_ < 0)
                     {
                        this.expandDesignMask(_loc14_.designID,Math.abs(_loc14_.points[0] + _loc9_ - _loc8_),0);
                        _loc9_ = Math.round((this.map.serious_width * this.designMasks[_loc14_.designID].scale - this.map.serious_width) / 2);
                        _loc10_ = Math.round((this.map.serious_height * this.designMasks[_loc14_.designID].scale - this.map.serious_height) / 2);
                     }
                     else if(_loc14_.points[0] + _loc9_ + _loc8_ > this.map.serious_width + 2 * _loc9_)
                     {
                        this.expandDesignMask(_loc14_.designID,_loc14_.points[0] + _loc9_ + _loc8_ - (this.map.serious_width + 2 * _loc9_),0);
                        _loc9_ = Math.round((this.map.serious_width * this.designMasks[_loc14_.designID].scale - this.map.serious_width) / 2);
                        _loc10_ = Math.round((this.map.serious_height * this.designMasks[_loc14_.designID].scale - this.map.serious_height) / 2);
                     }
                     if(_loc14_.points[1] + _loc10_ - _loc8_ < 0)
                     {
                        this.expandDesignMask(_loc14_.designID,0,Math.abs(_loc14_.points[1] + _loc10_ - _loc8_));
                        _loc9_ = Math.round((this.map.serious_width * this.designMasks[_loc14_.designID].scale - this.map.serious_width) / 2);
                        _loc10_ = Math.round((this.map.serious_height * this.designMasks[_loc14_.designID].scale - this.map.serious_height) / 2);
                     }
                     else if(_loc14_.points[1] + _loc10_ + _loc8_ > this.map.serious_height + 2 * _loc10_)
                     {
                        this.expandDesignMask(_loc14_.designID,0,_loc14_.points[1] + _loc10_ + _loc8_ - (this.map.serious_height + 2 * _loc10_));
                        _loc9_ = Math.round((this.map.serious_width * this.designMasks[_loc14_.designID].scale - this.map.serious_width) / 2);
                        _loc10_ = Math.round((this.map.serious_height * this.designMasks[_loc14_.designID].scale - this.map.serious_height) / 2);
                     }
                     _loc2_ = Math.round((int(_loc14_.points[0]) + _loc9_) / designMaskScalefactor);
                     _loc3_ = Math.round((int(_loc14_.points[1]) + _loc10_) / designMaskScalefactor);
                     _loc8_ = Math.round(_loc14_.radius / designMaskScalefactor) + _loc1_;
                     _loc12_ = new Sprite();
                     _loc12_.graphics.beginFill(4278190080);
                     _loc12_.graphics.drawCircle(0,0,_loc8_);
                     _loc12_.graphics.endFill();
                     _loc13_ = new Matrix();
                     _loc13_.translate(_loc2_,_loc3_);
                     this.designMasks[_loc14_.designID].mask.draw(_loc12_,_loc13_);
                     break;
                  case SHAPE_POLYGON:
               }
            }
         }
      }
      
      private function expandDesignMask(param1:int, param2:int, param3:int) : void
      {
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:Number = NaN;
         var _loc8_:BitmapData = null;
         var _loc9_:Rectangle = null;
         var _loc10_:Point = null;
         var _loc4_:BitmapData = this.designMasks[param1].mask;
         if(_loc4_.width >= Map.LIMITED_WIDTH || _loc4_.height >= Map.LIMITED_HEIGHT)
         {
            return;
         }
         param2 = Math.round(param2 / designMaskScalefactor);
         param3 = Math.round(param3 / designMaskScalefactor);
         if(param2 > 0)
         {
            _loc5_ = _loc4_.width + 2 * param2;
            if(_loc5_ > Map.LIMITED_WIDTH)
            {
               _loc5_ = Map.LIMITED_WIDTH;
            }
            _loc7_ = _loc5_ / _loc4_.width;
            _loc6_ = _loc4_.height * _loc7_;
         }
         if(param3 > 0)
         {
            _loc6_ = _loc4_.height + 2 * param3;
            if(_loc6_ > Map.LIMITED_HEIGHT)
            {
               _loc6_ = Map.LIMITED_HEIGHT;
            }
            _loc7_ = _loc6_ / _loc4_.height;
            _loc5_ = _loc4_.width * _loc7_;
         }
         param2 = (_loc5_ - _loc4_.width) / 2;
         param3 = (_loc6_ - _loc4_.height) / 2;
         if(_loc5_ > 0 && _loc6_ > 0)
         {
            _loc8_ = new BitmapData(_loc5_,_loc6_,true,0);
            _loc9_ = new Rectangle(0,0,_loc4_.width,_loc4_.height);
            _loc10_ = new Point(param2,param3);
            _loc8_.copyPixels(_loc4_,_loc9_,_loc10_);
            this.designMasks[param1].mask = _loc8_;
            this.designMasks[param1].scale = _loc8_.width / (this.map.serious_width / designMaskScalefactor);
         }
         _loc4_.dispose();
      }
      
      public function drawPOIZones() : void
      {
         var _loc1_:POIZone = null;
         var _loc2_:Boolean = false;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:Boolean = false;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:Number = NaN;
         var _loc9_:int = 0;
         var _loc10_:Boolean = false;
         var _loc11_:int = 0;
         var _loc12_:BitmapData = null;
         var _loc13_:PoizonePattern = null;
         var _loc14_:int = 0;
         this.cleanupSimpleVisuals();
         this.cleanupNormalVisuals();
         if(Settings.qualityPoizone == Settings.QUALITY_LOW)
         {
            for each(_loc1_ in this.poiZones)
            {
               _loc1_.draw();
            }
         }
         else
         {
            this.drawDesignMasks();
            _loc2_ = false;
            _loc3_ = 1;
            _loc4_ = this.map.getMain().screenManager.getBackgroundContainer().numChildren;
            _loc5_ = true;
            _loc6_ = 0;
            _loc7_ = 0;
            _loc8_ = 1;
            _loc9_ = -1;
            _loc10_ = true;
            _loc11_ = 1;
            while(_loc11_ < this.designMasks.length)
            {
               if(this.designMasks[_loc11_] != null && this.designMasks[_loc11_].mask != null)
               {
                  if(this.designMasks[_loc11_].scale != 1)
                  {
                     _loc8_ = this.designMasks[_loc11_].scale;
                  }
                  else
                  {
                     _loc8_ = 1;
                  }
                  _loc13_ = PatternManager.poizonePatterns[_loc11_];
                  if(_loc13_ != null)
                  {
                     for each(_loc14_ in _loc13_.backgroundIDs)
                     {
                        this.map.getMain().screenManager.addBackgroundLayer();
                        _loc12_ = this.designMasks[_loc11_].mask.clone();
                        this.map.getBackgroundManager().createBackground(_loc14_,_loc2_,_loc3_,_loc4_,_loc5_,_loc6_,_loc7_,_loc8_,_loc9_,_loc10_,_loc12_);
                        _loc4_++;
                     }
                  }
               }
               _loc11_++;
            }
            _loc11_ = 1;
            while(_loc11_ < this.designMasks.length)
            {
               if(this.designMasks[_loc11_] != null && this.designMasks[_loc11_].mask != null)
               {
                  this.designMasks[_loc11_].mask.dispose();
                  this.designMasks[_loc11_].mask = null;
                  this.designMasks[_loc11_] = null;
               }
               _loc11_++;
            }
         }
         if(this.map.getMinimapManager().getMiniMap())
         {
            this.map.getMinimapManager().getMiniMap().drawPOIZones();
         }
      }
      
      public function expandNoaBmp(param1:POIZone) : void
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:int = 0;
         var _loc10_:Rectangle = null;
         var _loc11_:Sprite = null;
         var _loc12_:Matrix = null;
         if(this.noaBmd == null)
         {
            this.noaBmd = new BitmapData(NOA_BMP_WIDTH,NOA_BMP_HEIGHT,true,0);
         }
         if(this.noaRouteBmd == null)
         {
            this.noaRouteBmd = new Line(NOA_BMP_WIDTH,NOA_BMP_HEIGHT,true,0);
         }
         var _loc2_:int = 1;
         switch(param1.shape)
         {
            case SHAPE_RECT:
               _loc3_ = param1.topLeft.x;
               _loc4_ = param1.topLeft.y;
               _loc5_ = param1.botRight.x;
               _loc6_ = param1.botRight.y;
               if(_loc3_ < 0)
               {
                  _loc3_ = 0;
               }
               else if(_loc3_ > this.map.serious_width)
               {
                  _loc3_ = this.map.serious_width;
               }
               if(_loc4_ < 0)
               {
                  _loc4_ = 0;
               }
               else if(_loc4_ > this.map.serious_height)
               {
                  _loc4_ = this.map.serious_height;
               }
               if(_loc5_ < 0)
               {
                  _loc5_ = 0;
               }
               else if(_loc5_ > this.map.serious_width)
               {
                  _loc5_ = this.map.serious_width;
               }
               if(_loc6_ < 0)
               {
                  _loc6_ = 0;
               }
               else if(_loc6_ > this.map.serious_height)
               {
                  _loc6_ = this.map.serious_height;
               }
               _loc3_ = Math.round(_loc3_ / noaBmdScalefactor);
               _loc4_ = Math.round(_loc4_ / noaBmdScalefactor);
               _loc5_ = Math.round(_loc5_ / noaBmdScalefactor);
               if(_loc5_ < NOA_BMP_WIDTH)
               {
                  _loc5_ += _loc2_;
               }
               _loc6_ = Math.round(_loc6_ / noaBmdScalefactor);
               if(_loc6_ < NOA_BMP_HEIGHT)
               {
                  _loc6_ += _loc2_;
               }
               _loc8_ = _loc5_ - _loc3_;
               _loc9_ = _loc6_ - _loc4_;
               _loc10_ = new Rectangle(_loc3_,_loc4_,_loc8_,_loc9_);
               this.noaBmd.fillRect(_loc10_,4278190080);
               break;
            case SHAPE_CIRCLE:
               _loc3_ = int(param1.points[0]);
               _loc4_ = int(param1.points[1]);
               _loc3_ = Math.round(_loc3_ / noaBmdScalefactor);
               _loc4_ = Math.round(_loc4_ / noaBmdScalefactor);
               _loc7_ = Math.round(param1.radius / noaBmdScalefactor) + _loc2_;
               _loc11_ = new Sprite();
               _loc11_.graphics.beginFill(4278190080);
               _loc11_.graphics.drawCircle(0,0,_loc7_);
               _loc11_.graphics.endFill();
               _loc12_ = new Matrix();
               _loc12_.translate(_loc3_,_loc4_);
               this.noaBmd.draw(_loc11_,_loc12_);
               break;
            case SHAPE_POLYGON:
         }
      }
      
      public function checkPOIZoneCollisions(param1:Point, param2:Point) : Point
      {
         var _loc3_:Point = null;
         var _loc7_:Boolean = false;
         var _loc8_:Boolean = false;
         var _loc9_:Boolean = false;
         var _loc10_:Boolean = false;
         if(this.noaZones.length < 1)
         {
            return null;
         }
         var _loc4_:Point = new Point(param1.x,param1.y);
         var _loc5_:Point = new Point(param2.x,param2.y);
         var _loc6_:Boolean = false;
         if(_loc4_.x < 0)
         {
            _loc6_ = true;
         }
         else if(_loc4_.x > this.map.serious_width)
         {
            _loc6_ = true;
         }
         if(_loc4_.y < 0)
         {
            _loc6_ = true;
         }
         else if(_loc4_.y > this.map.serious_height)
         {
            _loc6_ = true;
         }
         if(_loc5_.x < 0)
         {
            _loc6_ = true;
         }
         else if(_loc5_.x > this.map.serious_width)
         {
            _loc6_ = true;
         }
         if(_loc5_.y < 0)
         {
            _loc6_ = true;
         }
         else if(_loc5_.y > this.map.serious_height)
         {
            _loc6_ = true;
         }
         if(_loc6_)
         {
            return this.checkPOIZoneCollisionsByLines(param1,param2);
         }
         _loc4_.x = Math.round(_loc4_.x / noaBmdScalefactor);
         _loc4_.y = Math.round(_loc4_.y / noaBmdScalefactor);
         _loc5_.x = Math.round(_loc5_.x / noaBmdScalefactor);
         _loc5_.y = Math.round(_loc5_.y / noaBmdScalefactor);
         if(param2.x > param1.x)
         {
            _loc7_ = true;
            _loc8_ = false;
         }
         else
         {
            _loc7_ = false;
            _loc8_ = true;
         }
         if(param2.y > param1.y)
         {
            _loc9_ = true;
            _loc10_ = false;
         }
         else
         {
            _loc9_ = false;
            _loc10_ = true;
         }
         if(this.isCollidingWithNoa(_loc4_,_loc4_))
         {
            return this.checkPOIZoneCollisionsByLines(param1,param2);
         }
         var _loc11_:Boolean = false;
         _loc11_ = this.isCollidingWithNoa(_loc4_,_loc5_);
         if(_loc11_)
         {
            _loc3_ = this.getCollisonPoint(_loc4_,_loc5_);
            if(_loc3_ == null)
            {
               return this.checkPOIZoneCollisionsByLines(param1,param2);
            }
            _loc3_.x = Math.round(_loc3_.x * noaBmdScalefactor);
            _loc3_.y = Math.round(_loc3_.y * noaBmdScalefactor);
            if(_loc3_.x > param1.x && _loc8_)
            {
               _loc3_.x = Math.floor(param1.x);
            }
            if(_loc3_.x < param1.x && _loc7_)
            {
               _loc3_.x = Math.ceil(param1.x);
            }
            if(_loc3_.y > param1.y && _loc10_)
            {
               _loc3_.y = Math.floor(param1.y);
            }
            if(_loc3_.y < param1.y && _loc9_)
            {
               _loc3_.y = Math.ceil(param1.y);
            }
            return _loc3_;
         }
         return null;
      }
      
      private function getCollisonPoint(param1:Point, param2:Point) : Point
      {
         var _loc3_:int = 0;
         var _loc5_:Point = null;
         var _loc4_:Point = new Point(0,0);
         _loc3_ = Point.distance(param1,param2);
         while(_loc3_ > 1)
         {
            _loc5_ = this.getMiddlePoint(param1,param2);
            if(this.isCollidingWithNoa(param1,_loc5_))
            {
               param2 = _loc5_;
            }
            else
            {
               param1 = _loc5_;
            }
            _loc3_ = Point.distance(param1,param2);
         }
         if(!this.isCollidingWithNoa(param1,param1))
         {
            return param1;
         }
         if(!this.isCollidingWithNoa(param2,param2))
         {
            return param2;
         }
         return null;
      }
      
      private function isCollidingWithNoa(param1:Point, param2:Point = null) : Boolean
      {
         var _loc3_:Boolean = false;
         var _loc4_:Point = new Point(0,0);
         if(param2 != null)
         {
            this.noaRouteBmd.line(param1.x,param1.y,param2.x,param2.y,4278190080);
            _loc3_ = this.noaBmd.hitTest(_loc4_,255,this.noaRouteBmd,_loc4_);
            this.noaRouteBmd.dispose();
            this.noaRouteBmd = new Line(NOA_BMP_WIDTH,NOA_BMP_HEIGHT,true,0);
            return _loc3_;
         }
         return this.noaBmd.hitTest(_loc4_,255,param1);
      }
      
      private function getMiddlePoint(param1:Point, param2:Point) : Point
      {
         var _loc3_:Point = new Point(0,0);
         var _loc4_:Point = new Point();
         _loc4_.x = Math.floor((param1.x - param2.x) * 0.5);
         _loc4_.y = Math.floor((param1.y - param2.y) * 0.5);
         _loc4_.x += param2.x;
         _loc4_.y += param2.y;
         return _loc4_;
      }
      
      private function getOnePixelLessIntersectPoint(param1:Point, param2:Point) : Point
      {
         var _loc3_:Number = NaN;
         var _loc4_:Number = NaN;
         if(param2.x < param1.x)
         {
            _loc3_ = param1.x - 5;
         }
         else if(param2.x > param1.x)
         {
            _loc3_ = param1.x + 5;
         }
         else if(param2.x == param1.x)
         {
            _loc3_ = param1.x;
         }
         if(param2.y < param1.y)
         {
            _loc4_ = param1.y - 5;
         }
         else if(param2.y > param1.y)
         {
            _loc4_ = param1.y + 5;
         }
         else if(param2.y == param1.y)
         {
            _loc4_ = param1.y;
         }
         return new Point(_loc3_,_loc4_);
      }
      
      public function checkPOIZoneCollisionsByLines(param1:Point, param2:Point) : Point
      {
         var _loc4_:Point = null;
         var _loc5_:POIZone = null;
         var _loc7_:Point = null;
         var _loc8_:Number = NaN;
         var _loc9_:Number = NaN;
         var _loc10_:Point = null;
         var _loc11_:Point = null;
         var _loc12_:Point = null;
         var _loc13_:Point = null;
         var _loc14_:Point = null;
         var _loc15_:Number = NaN;
         var _loc16_:Point = null;
         var _loc3_:Array = [];
         var _loc6_:int = 0;
         while(_loc6_ < this.noaZones.length)
         {
            _loc5_ = this.noaZones[_loc6_] as POIZone;
            if(_loc5_.shape == "REC")
            {
               _loc10_ = _loc5_.topLeft;
               _loc11_ = _loc5_.topRight;
               _loc12_ = _loc5_.botLeft;
               _loc13_ = _loc5_.botRight;
               _loc4_ = this.lineIntersect(param1,param2,_loc10_,_loc11_);
               if(_loc4_ != null)
               {
                  _loc3_.push(_loc4_);
               }
               _loc4_ = this.lineIntersect(param1,param2,_loc10_,_loc12_);
               if(_loc4_ != null)
               {
                  _loc3_.push(_loc4_);
               }
               _loc4_ = this.lineIntersect(param1,param2,_loc11_,_loc13_);
               if(_loc4_ != null)
               {
                  _loc3_.push(_loc4_);
               }
               _loc4_ = this.lineIntersect(param1,param2,_loc12_,_loc13_);
               if(_loc4_ != null)
               {
                  _loc3_.push(_loc4_);
               }
            }
            _loc6_++;
         }
         if(_loc3_.length < 1)
         {
            return null;
         }
         if(_loc3_.length == 1)
         {
            _loc14_ = this.getOnePixelLessIntersectPoint(_loc3_[0],param1);
            if(_loc14_.x == param1.x && _loc14_.y == param1.y)
            {
               _loc14_ = _loc3_[0];
            }
            _loc15_ = FastMath.sqrt(Math.pow(_loc14_.x - param1.x,2) + Math.pow(_loc14_.y - param1.y,2));
            if(_loc15_)
            {
            }
            if(_loc15_ > 0)
            {
               return this.getOnePixelLessIntersectPoint(_loc3_[0],param1);
            }
            return null;
         }
         _loc6_ = 0;
         while(_loc6_ < _loc3_.length)
         {
            _loc16_ = _loc3_[_loc6_];
            _loc9_ = FastMath.sqrt(Math.pow(_loc16_.x - param1.x,2) + Math.pow(_loc16_.y - param1.y,2));
            if(_loc6_ > 0)
            {
               if(_loc9_ < _loc8_)
               {
                  _loc7_ = _loc16_;
                  _loc8_ = _loc9_;
               }
            }
            else
            {
               _loc8_ = _loc9_;
               _loc7_ = _loc16_;
            }
            _loc6_++;
         }
         return this.getOnePixelLessIntersectPoint(_loc7_,param1);
      }
      
      private function testZoneCollisionsAgainstPoint(param1:Point) : Boolean
      {
         var _loc3_:POIZone = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.noaZones.length)
         {
            _loc3_ = this.noaZones[_loc2_];
            if(param1.x > _loc3_.topLeft.x && param1.x < _loc3_.topRight.x && param1.y > _loc3_.topLeft.y && param1.y < _loc3_.botLeft.y)
            {
               return true;
            }
            _loc2_++;
         }
         return false;
      }
      
      private function lineIntersect(param1:Point, param2:Point, param3:Point, param4:Point, param5:Boolean = true) : Point
      {
         var _loc6_:Point = null;
         var _loc7_:Number = NaN;
         var _loc8_:Number = NaN;
         var _loc9_:Number = NaN;
         var _loc10_:Number = NaN;
         var _loc11_:Number = NaN;
         var _loc12_:Number = NaN;
         _loc7_ = param2.y - param1.y;
         _loc9_ = param1.x - param2.x;
         _loc11_ = param2.x * param1.y - param1.x * param2.y;
         _loc8_ = param4.y - param3.y;
         _loc10_ = param3.x - param4.x;
         _loc12_ = param4.x * param3.y - param3.x * param4.y;
         var _loc13_:Number = _loc7_ * _loc10_ - _loc8_ * _loc9_;
         if(_loc13_ == 0)
         {
            return null;
         }
         _loc6_ = new Point();
         _loc6_.x = (_loc9_ * _loc12_ - _loc10_ * _loc11_) / _loc13_;
         _loc6_.y = (_loc8_ * _loc11_ - _loc7_ * _loc12_) / _loc13_;
         if(param5)
         {
            if(Point.distance(_loc6_,param2) > Point.distance(param1,param2))
            {
               return null;
            }
            if(Point.distance(_loc6_,param1) > Point.distance(param1,param2))
            {
               return null;
            }
            if(Point.distance(_loc6_,param4) > Point.distance(param3,param4))
            {
               return null;
            }
            if(Point.distance(_loc6_,param3) > Point.distance(param3,param4))
            {
               return null;
            }
         }
         return _loc6_;
      }
      
      public function updatePOIZoneVisualStyle() : void
      {
         if(Settings.qualityPoizone != this.currentVisualStyle)
         {
            switch(Settings.qualityPoizone)
            {
               case Settings.QUALITY_LOW:
                  this.cleanupSimpleVisuals();
                  break;
               case Settings.QUALITY_HIGH:
               default:
                  this.cleanupNormalVisuals();
            }
            this.drawPOIZones();
            this.currentVisualStyle = Settings.qualityPoizone;
         }
      }
      
      private function cleanupSimpleVisuals() : void
      {
         var _loc1_:POIZone = null;
         for each(_loc1_ in this.poiZones)
         {
            _loc1_.cleanup();
         }
      }
      
      private function cleanupNormalVisuals() : void
      {
         var _loc1_:Background = null;
         var _loc2_:int = int(this.map.getMain().screenManager.backgrounds.length - 1);
         while(_loc2_ >= 0)
         {
            _loc1_ = this.map.getMain().screenManager.backgrounds[_loc2_];
            if(_loc1_ != null && _loc1_.isPOIZone)
            {
               _loc1_.cleanup();
               this.map.getMain().screenManager.removeBackgroundLayer(_loc1_.getLayerIndex());
               this.map.getMain().screenManager.backgrounds.splice(_loc2_,1);
            }
            _loc2_--;
         }
      }
      
      public function cleanup() : void
      {
         var _loc1_:int = 0;
         while(_loc1_ < this.poiZones.length)
         {
            this.poiZones[_loc1_].cleanup();
            _loc1_++;
         }
         if(this.noaBmd != null)
         {
            this.noaBmd.dispose();
            this.noaBmd = null;
         }
         if(this.noaRouteBmd != null)
         {
            this.noaRouteBmd.dispose();
            this.noaRouteBmd = null;
         }
         _loc1_ = 1;
         while(_loc1_ < this.designMasks.length)
         {
            if(this.designMasks[_loc1_] != null && this.designMasks[_loc1_].mask != null)
            {
               this.designMasks[_loc1_].mask.dispose();
               this.designMasks[_loc1_].mask = null;
               this.designMasks[_loc1_] = null;
            }
            _loc1_++;
         }
      }
   }
}

package net.bigpoint.darkorbit.map
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.Shape;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.geom.Point;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.lazyload.AssetLazyLoader;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class POIZone extends Sprite
   {
      
      public static var displayPOIVisuals:Boolean = false;
      
      public static const TYPE_CIRCLE:String = "CIR";
      
      public static const TYPE_RECT:String = "REC";
      
      public static const TYPE_POLYGON:String = "POL";
      
      private var simpleVisualsAlpha:Number = 0.4;
      
      private var finisher:SWFFinisher;
      
      public var active:Boolean;
      
      public var zoneType:String;
      
      public var shape:String;
      
      public var designID:int;
      
      public var designBmc:BitmapClip;
      
      public var points:Array;
      
      public var radius:Number;
      
      public var zoneWidth:Number;
      
      public var zoneHeight:Number;
      
      public var topLeft:Point;
      
      public var topRight:Point;
      
      public var botLeft:Point;
      
      public var botRight:Point;
      
      public var first:Point;
      
      public var second:Point;
      
      public var third:Point;
      
      public var fourth:Point;
      
      private var pointsArray:Array;
      
      public var map:Map;
      
      private var visualRep:Shape;
      
      private var fillerHolder:Sprite;
      
      private var loader:AssetLazyLoader;
      
      public function POIZone(param1:String, param2:int, param3:String, param4:Map, param5:int, param6:Array, param7:Number = NaN)
      {
         var _loc8_:Array = null;
         super();
         this.zoneType = param1;
         this.active = Boolean(param5);
         this.points = param6;
         this.shape = param3;
         this.radius = param7;
         this.map = param4;
         this.designID = param2;
         if(!param7)
         {
            this.first = new Point(param6[0],param6[1]);
            this.second = new Point(param6[2],param6[3]);
            this.third = new Point(param6[4],param6[5]);
            this.fourth = new Point(param6[6],param6[7]);
            this.pointsArray = [this.first,this.second,this.third,this.fourth];
            _loc8_ = this.findAllCornerPoints();
            this.topLeft = _loc8_[0];
            this.topRight = _loc8_[1];
            this.botLeft = _loc8_[2];
            this.botRight = _loc8_[3];
         }
      }
      
      public static function getRandomCount(param1:int, param2:int) : int
      {
         return param1 + Math.floor(Math.random() * (param2 - param1 + 1));
      }
      
      private function findAllCornerPoints() : Array
      {
         var _loc6_:Point = null;
         var _loc1_:Point = this.pointsArray[0];
         var _loc2_:Point = this.pointsArray[0];
         var _loc3_:Point = this.pointsArray[0];
         var _loc4_:Point = this.pointsArray[0];
         var _loc5_:int = 0;
         while(_loc5_ < this.pointsArray.length)
         {
            _loc6_ = this.pointsArray[_loc5_];
            if(_loc6_.x < _loc1_.x || _loc6_.y < _loc1_.y)
            {
               _loc1_ = _loc6_;
            }
            if(_loc6_.x > _loc2_.x || _loc6_.y < _loc2_.y)
            {
               _loc2_ = _loc6_;
            }
            if(_loc6_.x < _loc3_.x || _loc6_.y > _loc3_.y)
            {
               _loc3_ = _loc6_;
            }
            if(_loc6_.x > _loc4_.x || _loc6_.y > _loc4_.y)
            {
               _loc4_ = _loc6_;
            }
            _loc5_++;
         }
         return [_loc1_,_loc2_,_loc3_,_loc4_];
      }
      
      public function init() : void
      {
         switch(this.shape)
         {
            case TYPE_RECT:
               this.createRectangleZone();
               break;
            case TYPE_CIRCLE:
               this.createCircularZone();
               break;
            case TYPE_POLYGON:
               this.createPolygonZone();
         }
      }
      
      public function draw() : void
      {
         switch(this.shape)
         {
            case TYPE_RECT:
               this.drawRectangleZone();
               break;
            case TYPE_CIRCLE:
               this.drawCircularZone();
               break;
            case TYPE_POLYGON:
               this.drawPolygonZone();
         }
      }
      
      private function createRectangleZone() : void
      {
         x = this.topLeft.x;
         y = this.topLeft.y;
         this.zoneWidth = Math.abs(this.topLeft.x - this.topRight.x);
         this.zoneHeight = Math.abs(this.topLeft.y - this.botLeft.y);
      }
      
      private function drawRectangleZone() : void
      {
         if(this.designID != 0 && Settings.qualityPoizone == Settings.QUALITY_LOW)
         {
            if(this.visualRep == null)
            {
               this.visualRep = new Shape();
               this.map.getMain().screenManager.getPoizoneLayer().addChild(this.visualRep);
            }
            this.visualRep.graphics.lineStyle(1,0);
            this.visualRep.graphics.beginFill(POIManager.zoneTypeColorDict[this.zoneType],this.simpleVisualsAlpha);
            this.visualRep.graphics.drawRect(x,y,this.zoneWidth,this.zoneHeight);
            this.visualRep.graphics.endFill();
         }
      }
      
      private function createCircularZone() : void
      {
         x = this.points[0];
         y = this.points[1];
      }
      
      private function drawCircularZone() : void
      {
         if(this.designID != 0 && Settings.qualityPoizone == Settings.QUALITY_LOW)
         {
            if(this.visualRep == null)
            {
               this.visualRep = new Shape();
               this.map.getMain().screenManager.getPoizoneLayer().addChild(this.visualRep);
            }
            this.visualRep.graphics.lineStyle(1,0);
            this.visualRep.graphics.beginFill(POIManager.zoneTypeColorDict[this.zoneType],this.simpleVisualsAlpha);
            this.visualRep.graphics.drawCircle(x,y,this.radius);
            this.visualRep.graphics.endFill();
         }
      }
      
      private function createPolygonZone() : void
      {
      }
      
      private function drawPolygonZone() : void
      {
      }
      
      private function beginPopulatingProcess() : void
      {
         this.loader = new AssetLazyLoader();
         if(!ResourceManager.fileCollection.isLoaded(PatternManager.poizonePatterns[this.designID].resKey))
         {
            this.loader.addEventListener(AssetLazyLoader.ASSET_LOADED,this.populateZones);
            this.loader.loadAsset(PatternManager.poizonePatterns[this.designID].resKey);
         }
         else
         {
            this.populateZones(null);
         }
      }
      
      private function populateZones(param1:Event) : void
      {
         var _loc3_:BitmapClip = null;
         var _loc4_:int = 0;
         var _loc11_:int = 0;
         this.finisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(PatternManager.poizonePatterns[this.designID].resKey));
         this.designBmc = new BitmapClip(this.finisher.getEmbededMovieClip("mc",true),PatternManager.poizonePatterns[this.designID].resKey);
         var _loc2_:int = this.designBmc.framesLoaded;
         var _loc5_:Array = [];
         this.fillerHolder = new Sprite();
         this.fillerHolder.mouseEnabled = false;
         this.fillerHolder.mouseChildren = false;
         var _loc6_:int = Math.round(this.zoneWidth / PatternManager.poizonePatterns[this.designID].avWidth);
         var _loc7_:int = Math.round(this.zoneHeight / PatternManager.poizonePatterns[this.designID].avHeight);
         _loc6_ = _loc6_ < 1 ? 1 : _loc6_;
         _loc7_ = _loc7_ < 1 ? 1 : _loc7_;
         var _loc8_:int = Math.round(this.zoneWidth / _loc6_);
         var _loc9_:int = Math.round(this.zoneHeight / _loc7_);
         var _loc10_:int = 0;
         while(_loc10_ < _loc7_)
         {
            _loc5_[_loc10_] = [];
            _loc11_ = 0;
            while(_loc11_ < _loc6_)
            {
               _loc3_ = BitmapClip(this.designBmc.clone());
               if(_loc2_ <= 1)
               {
                  _loc4_ = getRandomCount(1,_loc2_);
               }
               else if(_loc10_ == 0 && _loc11_ == 0)
               {
                  _loc4_ = getRandomCount(1,_loc2_);
               }
               else if(_loc10_ == 0)
               {
                  while(_loc5_[_loc10_][_loc11_ - 1] == _loc4_)
                  {
                     _loc4_ = getRandomCount(1,_loc2_);
                  }
               }
               else if(_loc11_ == 0)
               {
                  while(_loc5_[_loc10_ - 1][_loc11_] == _loc4_)
                  {
                     _loc4_ = getRandomCount(1,_loc2_);
                  }
               }
               else
               {
                  while(_loc5_[_loc10_][_loc11_ - 1] == _loc4_ || _loc5_[_loc10_ - 1][_loc11_] == _loc4_)
                  {
                     _loc4_ = getRandomCount(1,_loc2_);
                  }
               }
               _loc5_[_loc10_][_loc11_] = _loc4_;
               _loc3_.gotoAndStop(_loc4_);
               _loc3_.x = this.x + (_loc11_ * _loc8_ + _loc8_ * 0.5);
               _loc3_.y = this.y + (_loc10_ * _loc9_ + _loc9_ * 0.5);
               this.fillerHolder.addChild(_loc3_);
               _loc11_++;
            }
            _loc10_++;
         }
         this.map.getMain().screenManager.getPoizoneLayer().addChild(this.fillerHolder);
      }
      
      public function cleanup() : void
      {
         if(this.visualRep != null && this.map.getMain().screenManager.getPoizoneLayer().contains(this.visualRep))
         {
            this.map.getMain().screenManager.getPoizoneLayer().removeChild(this.visualRep);
            this.visualRep = null;
         }
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.TimeFormatter;
   import com.bigpoint.utils.ui.tooltip.ToolTipHook;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Back;
   import flash.display.Bitmap;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.events.MouseEvent;
   import flash.geom.Rectangle;
   import mx.utils.StringUtil;
   import net.bigpoint.AmmoPrice;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.InGameCatalog;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.catalog.SpecialAmmunition;
   import net.bigpoint.darkorbit.combat.RocketPattern;
   import net.bigpoint.darkorbit.gui.ActionEvent;
   import net.bigpoint.darkorbit.gui.BitmapFont;
   import net.bigpoint.darkorbit.gui.ButtonSlot;
   import net.bigpoint.darkorbit.gui.CPUItem;
   import net.bigpoint.darkorbit.gui.TechCooldown;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignItem;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignNames;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignShipNames;
   import net.bigpoint.darkorbit.net.models.techs.TechItem;
   import net.bigpoint.darkorbit.net.models.techs.TechNames;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class ActionButton extends SuperActionButton
   {
      
      public static var ENV_UNDEFINED:int = 0;
      
      public static var ENV_POOL:int = 1;
      
      public static var ENV_QUICKSTART:int = 2;
      
      public static var ENV_KEYBOARD:int = 3;
      
      public static const COOLDOWN_TYPE_TECH:String = "tech";
      
      public static const COOLDOWN_TYPE_SKILL:String = "skill";
      
      private var menuID:int;
      
      private var menuManager:MenuManager;
      
      private var dragging:Boolean;
      
      private var resKey:String;
      
      private var toolTipHook:ToolTipHook;
      
      private var cooldown:MovieClip;
      
      private var iconContainer:MovieClip;
      
      private var pattern:ActionButtonPattern;
      
      private var languageKey:String;
      
      public var buttonDecorator:IActionButtonDecorator;
      
      public var section:String;
      
      public var canActivate:Boolean;
      
      private var isCpuButton:Boolean;
      
      private var isRLButton:Boolean;
      
      public var isRunningCooldown:Boolean;
      
      public var isTechButton:Boolean = false;
      
      public var cooldownButtonType:String = "none";
      
      public var techDecorator:TechButtonDecorator;
      
      private var techTooltipText:String;
      
      private var isTechTimerRunning:Boolean;
      
      private var techTimerSecondsLeft:int;
      
      private var techTypeForThisButton:int;
      
      private var correspondingTechItem:IAbilityItem;
      
      private var techActiveClip:MovieClip;
      
      private var techCooldown:TechCooldown;
      
      public function ActionButton(param1:MenuManager, param2:ActionButtonPattern)
      {
         super();
         this.guiManager = param1.getMainMenu().getMenuManager().getGuiManager();
         this.pattern = param2;
         this.menuManager = param1;
         actionID = param2.actionID;
         this.menuID = param2.getMenuID();
         this.resKey = param2.getResKey();
         hasCounter = param2.hasCounter();
         this.languageKey = param2.getLanguageKey();
         this.section = param2.section;
         this.canActivate = param2.canActivate;
         this.isCpuButton = this.setCpuButtonBehavior();
         this.isRLButton = this.setRocketLauncherButtonBehavior();
      }
      
      private function setRocketLauncherButtonBehavior() : Boolean
      {
         if(actionID == SuperActionButton.SELECTION_LAUNCHER_ROCKET_HST01 || actionID == SuperActionButton.SELECTION_LAUNCHER_ROCKET_UBR100 || actionID == SuperActionButton.SELECTION_LAUNCHER_ROCKET_ECO10 || actionID == SuperActionButton.SELECTION_LOAD_ROCKET_LAUNCHER)
         {
            return true;
         }
         return false;
      }
      
      private function setCpuButtonBehavior() : Boolean
      {
         if(actionID == SuperActionButton.ACTIVATION_CPU_AIM || actionID == SuperActionButton.ACTIVATION_CPU_AMMOBUY || actionID == SuperActionButton.ACTIVATION_CPU_AROL || actionID == SuperActionButton.ACTIVATION_CPU_CLOAK || actionID == SuperActionButton.ACTIVATION_CPU_DRONE_REPAIR || actionID == SuperActionButton.ACTIVATION_CPU_HM7 || actionID == SuperActionButton.ACTIVATION_CPU_JUMP || actionID == SuperActionButton.ACTIVATION_CPU_RLLB || actionID == SuperActionButton.ACTIVATION_CPU_ROBOT || actionID == SuperActionButton.ACTIVATION_CPU_ROCKETBUY || actionID == SuperActionButton.SELECT_CPU_JUMP_TARGET)
         {
            return true;
         }
         return false;
      }
      
      public function init() : void
      {
         var _loc3_:Bitmap = null;
         var _loc4_:Array = null;
         var _loc5_:String = null;
         var _loc6_:int = 0;
         var _loc7_:TechItem = null;
         var _loc8_:MovieClip = null;
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         this.cooldown = _loc1_.getEmbededMovieClip("cooldown");
         this.cooldown.cacheAsBitmap = true;
         actionNormal = _loc1_.getEmbededBitmap(this.pattern.getStdIcon());
         actionHover = _loc1_.getEmbededBitmap(this.pattern.getHoverIcon());
         actionSelected = _loc1_.getEmbededBitmap(this.pattern.getSelectedIcon());
         actionSelected.x = -1;
         actionSelected.y = -2;
         actionDisabled = _loc1_.getEmbededBitmap("comb00_deactivated.png");
         actionHover.visible = false;
         actionSelected.visible = false;
         actionDisabled.visible = false;
         actionDisabled.alpha = 0.5;
         this.cooldown.visible = false;
         this.cooldown.alpha = 0.4;
         this.techActiveClip = _loc1_.getEmbededMovieClip("activeFlashing");
         buttonContainer = new MovieClip();
         this.iconContainer = new MovieClip();
         this.iconContainer.cacheAsBitmap = true;
         buttonContainer.addChild(actionNormal);
         buttonContainer.addChild(actionHover);
         buttonContainer.addChild(actionSelected);
         buttonContainer.addChild(this.iconContainer);
         if(guiManager.techModel != null)
         {
            if(this.menuManager.buttonIDToTechID[actionID] != null)
            {
               this.isTechButton = true;
               this.cooldownButtonType = COOLDOWN_TYPE_TECH;
               this.cooldown.alpha = 0.8;
               actionDisabled.alpha = 0.8;
            }
            else if(this.menuManager.buttonIDToSkillDesignID[actionID] != null)
            {
               this.cooldownButtonType = COOLDOWN_TYPE_SKILL;
               this.cooldown.alpha = 0.8;
            }
         }
         if(hasCounter)
         {
            bitmapFont = new BitmapFont(this);
            bitmapFont.y = 9;
            buttonContainer.addChild(bitmapFont);
            if(this.pattern.isAmmobar())
            {
               ammobar = _loc1_.getEmbededMovieClip("ammoBar");
               ammobar.mouseEnabled = false;
               ammobar.x = 3;
               ammobar.y = 9;
               buttonContainer.addChild(ammobar);
               bitmapFont.visible = false;
            }
         }
         buttonContainer.addChild(actionDisabled);
         buttonContainer.addChild(this.cooldown);
         buttonContainer.addEventListener(MouseEvent.CLICK,this.handleMouseClick);
         buttonContainer.addEventListener(MouseEvent.MOUSE_OVER,this.onMouseOver);
         buttonContainer.addEventListener(MouseEvent.MOUSE_OUT,this.onMouseOut);
         buttonContainer.buttonMode = true;
         buttonContainer.addEventListener(MouseEvent.MOUSE_DOWN,this.onMouseDown);
         var _loc2_:String = BPLocale.getText(this.languageKey);
         switch(actionID)
         {
            case SuperActionButton.SELECTION_LASER_1:
            case SuperActionButton.BUY_LASER_1:
               _loc2_ += InGameCatalog.instance.battery_types[1];
               break;
            case SuperActionButton.SELECTION_LASER_2:
            case SuperActionButton.BUY_LASER_2:
               _loc2_ += InGameCatalog.instance.battery_types[2];
               break;
            case SuperActionButton.SELECTION_LASER_3:
            case SuperActionButton.BUY_LASER_3:
               _loc2_ += InGameCatalog.instance.battery_types[3];
               break;
            case SuperActionButton.SELECTION_LASER_4:
               _loc2_ += InGameCatalog.instance.battery_types[4];
               break;
            case SuperActionButton.SELECTION_LASER_5:
            case SuperActionButton.BUY_LASER_5:
               _loc2_ += InGameCatalog.instance.battery_types[5];
               break;
            case SuperActionButton.SELECTION_LASER_6:
               _loc2_ += InGameCatalog.instance.battery_types[6];
               break;
            case SuperActionButton.SELECTION_ROCKET_R_310:
            case SuperActionButton.BUY_ROCKET_R_310:
               _loc2_ += InGameCatalog.instance.rocketNames[RocketPattern.R310];
               break;
            case SuperActionButton.SELECTION_ROCKET_PLT_2026:
            case SuperActionButton.BUY_ROCKET_PLT_2026:
               _loc2_ += InGameCatalog.instance.rocketNames[RocketPattern.PLT_2026];
               break;
            case SuperActionButton.SELECTION_ROCKET_PLT_2021:
            case SuperActionButton.BUY_ROCKET_PLT_2021:
               _loc2_ += InGameCatalog.instance.rocketNames[RocketPattern.PLT_2021];
               break;
            case SuperActionButton.SELECTION_ROCKET_PLT_3030:
            case SuperActionButton.BUY_ROCKET_PLT_3030:
               _loc2_ += InGameCatalog.instance.rocketNames[RocketPattern.PLT_3030];
               break;
            case SuperActionButton.SELECTION_ROCKET_PLD_8:
               _loc2_ += InGameCatalog.instance.rocketNames[RocketPattern.PLD_8];
               break;
            case SuperActionButton.SELECTION_ROCKET_DCR_250:
               _loc2_ += InGameCatalog.instance.rocketNames[RocketPattern.DCR_250];
               break;
            case SuperActionButton.SELECTION_ROCKET_WIZ:
               _loc2_ += InGameCatalog.instance.rocketNames[RocketPattern.WIZ];
               break;
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_HST01:
               _loc2_ += InGameCatalog.instance.rocketNames[RocketPattern.HSTRM01];
               break;
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_UBR100:
               _loc2_ += InGameCatalog.instance.rocketNames[RocketPattern.UBR100];
               break;
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_ECO10:
               _loc2_ += InGameCatalog.instance.rocketNames[RocketPattern.ECO10];
               break;
            case SuperActionButton.SELECTION_MINE:
               _loc2_ += InGameCatalog.instance.explosive_types[1];
               break;
            case SuperActionButton.SELECTION_SMARTBOMB:
               _loc2_ += InGameCatalog.instance.explosive_types[2];
               break;
            case SuperActionButton.SELECTION_INSTASHIELD:
               _loc2_ += InGameCatalog.instance.explosive_types[3];
               break;
            case SuperActionButton.SELECTION_EMP:
               _loc2_ += InGameCatalog.instance.explosive_types[4];
               break;
            case SuperActionButton.SELECTION_FIREWORK_1:
               _loc2_ += InGameCatalog.instance.explosive_types[5];
               break;
            case SuperActionButton.SELECTION_FIREWORK_2:
               _loc2_ += InGameCatalog.instance.explosive_types[6];
               break;
            case SuperActionButton.SELECTION_FIREWORK_3:
               _loc2_ += InGameCatalog.instance.explosive_types[7];
               break;
            case SuperActionButton.SELECTION_MINE_EMP:
               _loc2_ += InGameCatalog.instance.explosive_types[8];
               break;
            case SuperActionButton.SELECTION_MINE_SAB:
               _loc2_ += InGameCatalog.instance.explosive_types[9];
               break;
            case SuperActionButton.SELECTION_MINE_DDM:
               _loc2_ += InGameCatalog.instance.explosive_types[10];
               break;
            case SuperActionButton.ACTIVATION_ENERGY_LEECH:
               _loc2_ += BPLocale.getText("tech_" + TechNames.getNameByType(1) + "_name");
               break;
            case SuperActionButton.ACTIVATION_CHAIN_BOLT:
               _loc2_ += BPLocale.getText("tech_" + TechNames.getNameByType(2) + "_name");
               break;
            case SuperActionButton.ACTIVATION_ROCKET_PRECISION:
               _loc2_ += BPLocale.getText("tech_" + TechNames.getNameByType(3) + "_name");
               break;
            case SuperActionButton.ACTIVATION_SHIELD_BACKUP:
               _loc2_ += BPLocale.getText("tech_" + TechNames.getNameByType(4) + "_name");
               break;
            case SuperActionButton.ACTIVATION_SPEED_LEECH:
               _loc2_ += BPLocale.getText("tech_" + TechNames.getNameByType(5) + "_name");
               break;
            case SuperActionButton.ACTIVATION_BATTLE_REP_BOT:
               _loc2_ += BPLocale.getText("tech_" + TechNames.getNameByType(6) + "_name");
               break;
            case SuperActionButton.ACTIVATION_SKILL_SOLACE:
               _loc2_ += BPLocale.getText("ttip_" + SkillDesignNames.getNameByType(SkillDesignNames.SHIP_SKILL_SOLACE) + "_skill");
               break;
            case SuperActionButton.ACTIVATION_SKILL_DIMINISHER:
               _loc2_ += BPLocale.getText("ttip_" + SkillDesignNames.getNameByType(SkillDesignNames.SHIP_SKILL_DIMINISHER) + "_skill");
               break;
            case SuperActionButton.ACTIVATION_SKILL_SPECTRUM:
               _loc2_ += BPLocale.getText("ttip_" + SkillDesignNames.getNameByType(SkillDesignNames.SHIP_SKILL_SPECTRUM) + "_skill");
               break;
            case SuperActionButton.ACTIVATION_SKILL_SENTINEL:
               _loc2_ += BPLocale.getText("ttip_" + SkillDesignNames.getNameByType(SkillDesignNames.SHIP_SKILL_SENTINEL) + "_skill");
               break;
            case SuperActionButton.ACTIVATION_SKILL_VENOM:
               _loc2_ += BPLocale.getText("ttip_" + SkillDesignNames.getNameByType(SkillDesignNames.SHIP_SKILL_VENOM) + "_skill");
               break;
            case SuperActionButton.ACTIVATION_SKILL_LIGHNTING:
               _loc2_ += BPLocale.getText("ttip_" + SkillDesignNames.getNameByType(SkillDesignNames.SHIP_SKILL_LIGHTNING) + "_skill");
         }
         _loc2_ = this.replaceMissingType(_loc2_);
         if(this.languageKey != null)
         {
            this.toolTipHook = TooltipControl.getInstance().addToolTip(buttonContainer,_loc2_);
         }
         if(this.resKey != null && this.resKey != "")
         {
            _loc4_ = this.resKey.split(",");
            for each(_loc5_ in _loc4_)
            {
               _loc3_ = _loc1_.getEmbededBitmap(StringUtil.trim(_loc5_));
               _loc3_.visible = true;
               this.iconContainer.addChild(_loc3_);
            }
            if(this.isTechButton)
            {
               _loc6_ = int(this.menuManager.buttonIDToTechID[actionID]);
               _loc7_ = this.menuManager.getGuiManager().techModel.techs[_loc6_];
               this.techDecorator = new TechButtonDecorator(this.iconContainer,_loc7_.amount);
            }
         }
         else if(actionID == SuperActionButton.SELECTION_LOAD_ROCKET_LAUNCHER)
         {
            _loc8_ = _loc1_.getEmbededMovieClip("rocketlauncher");
            this.buttonDecorator = new RocketLauncherLoadDecorator(_loc8_);
            this.iconContainer.addChild(_loc8_);
            this.updateTooltip();
         }
         else if(actionID == SuperActionButton.ACTIVATION_CPU_ROCKETBUY)
         {
            _loc8_ = _loc1_.getEmbededMovieClip("rocketbuy");
            this.buttonDecorator = new RocketBuyCPUDecorator(_loc8_);
            this.iconContainer.addChild(_loc8_);
            this.updateTooltip();
         }
         else
         {
            _loc3_ = new Bitmap();
            _loc3_.visible = false;
            this.iconContainer.addChild(_loc3_);
         }
         this.setIcon(1);
         this.selectedIcon = _loc1_.getEmbededBitmap("comb02_flash.png");
         selectedIcon.visible = false;
         buttonContainer.addChild(selectedIcon);
      }
      
      public function changeRemainingTechAmount(param1:int) : void
      {
         this.techDecorator.updateDigits(param1);
      }
      
      private function replaceMissingType(param1:String) : String
      {
         return param1.replace(/%TYPE%/,BPLocale.getText("ttip_not_available"));
      }
      
      public function addMouseUpListener() : void
      {
         this.menuManager.getGuiManager().getMain().stage.addEventListener(MouseEvent.MOUSE_UP,this.onMouseUp);
      }
      
      public function removeMouseUpListener() : void
      {
         this.menuManager.getGuiManager().getMain().stage.removeEventListener(MouseEvent.MOUSE_UP,this.onMouseUp);
      }
      
      public function updateAmmunitionDisplay() : void
      {
         var _loc1_:Boolean = false;
         if(hasCounter)
         {
            _loc1_ = Settings.showAmmunitionNumeric;
            if(_loc1_)
            {
               if(ammobar != null)
               {
                  ammobar.visible = false;
               }
               bitmapFont.visible = true;
            }
            else
            {
               if(ammobar != null)
               {
                  ammobar.visible = true;
               }
               bitmapFont.visible = false;
            }
         }
      }
      
      public function hasAmmobar() : Boolean
      {
         if(ammobar != null)
         {
            return true;
         }
         return false;
      }
      
      public function updateTooltip() : void
      {
         switch(actionID)
         {
            case SuperActionButton.SELECTION_LASER_1:
               this.updateLaserTooltip(1);
               break;
            case SuperActionButton.SELECTION_LASER_2:
               this.updateLaserTooltip(2);
               break;
            case SuperActionButton.SELECTION_LASER_3:
               this.updateLaserTooltip(3);
               break;
            case SuperActionButton.SELECTION_LASER_4:
               this.updateLaserTooltip(4);
               break;
            case SuperActionButton.SELECTION_LASER_5:
               this.updateLaserTooltip(5);
               break;
            case SuperActionButton.SELECTION_LASER_6:
               this.updateLaserTooltip(6);
               break;
            case SuperActionButton.SELECTION_ROCKET_R_310:
            case SuperActionButton.SELECTION_ROCKET_PLT_2026:
            case SuperActionButton.SELECTION_ROCKET_PLT_2021:
            case SuperActionButton.SELECTION_ROCKET_PLT_3030:
            case SuperActionButton.SELECTION_ROCKET_PLD_8:
            case SuperActionButton.SELECTION_ROCKET_DCR_250:
            case SuperActionButton.SELECTION_ROCKET_WIZ:
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_HST01:
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_UBR100:
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_ECO10:
               this.updateRocketTooltip(this.menuManager.buttonIDToRocketID[actionID]);
               break;
            case SuperActionButton.SELECTION_LOAD_ROCKET_LAUNCHER:
               this.updateRocketLauncherTooltip();
               break;
            case SuperActionButton.SELECTION_MINE:
               this.updateExplosiveAmount(SuperActionButton.SELECTION_MINE);
               break;
            case SuperActionButton.SELECTION_MINE_EMP:
            case SuperActionButton.SELECTION_MINE_SAB:
            case SuperActionButton.SELECTION_MINE_DDM:
               this.updateExplosiveAmount(actionID);
               break;
            case SuperActionButton.SELECTION_SMARTBOMB:
               this.updateExplosiveAmount(SuperActionButton.SELECTION_SMARTBOMB);
               break;
            case SuperActionButton.SELECTION_INSTASHIELD:
               this.updateExplosiveAmount(SuperActionButton.SELECTION_INSTASHIELD);
               break;
            case SuperActionButton.SELECTION_EMP:
               this.updateExplosiveAmount(SuperActionButton.SELECTION_EMP);
               break;
            case SuperActionButton.SELECTION_FIREWORK_1:
               this.updateExplosiveAmount(SuperActionButton.SELECTION_FIREWORK_1);
               break;
            case SuperActionButton.SELECTION_FIREWORK_2:
               this.updateExplosiveAmount(SuperActionButton.SELECTION_FIREWORK_2);
               break;
            case SuperActionButton.SELECTION_FIREWORK_3:
               this.updateExplosiveAmount(SuperActionButton.SELECTION_FIREWORK_3);
               break;
            case SuperActionButton.BUY_LASER_1:
               this.updateBuyLaserTooltip(1);
               break;
            case SuperActionButton.BUY_LASER_2:
               this.updateBuyLaserTooltip(2);
               break;
            case SuperActionButton.BUY_LASER_3:
               this.updateBuyLaserTooltip(3);
               break;
            case SuperActionButton.BUY_LASER_4:
               this.updateBuyLaserTooltip(4);
               break;
            case SuperActionButton.BUY_LASER_5:
               this.updateBuyLaserTooltip(5);
               break;
            case SuperActionButton.BUY_ROCKET_R_310:
               this.updateBuyRocketTooltip(RocketPattern.R310);
               break;
            case SuperActionButton.BUY_ROCKET_PLT_2026:
               this.updateBuyRocketTooltip(2);
               this.updateBuyRocketTooltip(RocketPattern.PLT_2026);
               break;
            case SuperActionButton.BUY_ROCKET_PLT_2021:
               this.updateBuyRocketTooltip(3);
               this.updateBuyRocketTooltip(RocketPattern.PLT_2021);
               break;
            case SuperActionButton.BUY_ROCKET_PLT_3030:
               this.updateBuyRocketTooltip(RocketPattern.PLT_3030);
               break;
            case SuperActionButton.ACTIVATION_ENERGY_LEECH:
               this.techTypeForThisButton = TechItem.TYPE_ENERGY_LEECH_ARRAY;
               break;
            case SuperActionButton.ACTIVATION_CHAIN_BOLT:
               this.techTypeForThisButton = TechItem.TYPE_ENERGY_CHAIN_IMPULSE;
               break;
            case SuperActionButton.ACTIVATION_ROCKET_PRECISION:
               this.techTypeForThisButton = TechItem.TYPE_ROCKET_PROBABILITY_MAXIMIZER;
               break;
            case SuperActionButton.ACTIVATION_SHIELD_BACKUP:
               this.techTypeForThisButton = TechItem.TYPE_SHIELD_BACKUP;
               break;
            case SuperActionButton.ACTIVATION_SPEED_LEECH:
               this.techTypeForThisButton = TechItem.TYPE_SPEED_LEECH;
               break;
            case SuperActionButton.ACTIVATION_BATTLE_REP_BOT:
               this.techTypeForThisButton = TechItem.TYPE_BATTLE_REPAIR_BOT;
               break;
            case SuperActionButton.ACTIVATION_CPU_ROBOT:
            case SuperActionButton.ACTIVATION_CPU_JUMP:
            case SuperActionButton.ACTIVATION_CPU_AIM:
            case SuperActionButton.ACTIVATION_CPU_CLOAK:
            case SuperActionButton.ACTIVATION_CPU_AROL:
            case SuperActionButton.ACTIVATION_CPU_RLLB:
            case SuperActionButton.ACTIVATION_CPU_HM7:
            case SuperActionButton.ACTIVATION_CPU_DRONE_REPAIR:
            case SuperActionButton.ACTIVATION_CPU_AMMOBUY:
            case SuperActionButton.ACTIVATION_CPU_ROCKETBUY:
            case SuperActionButton.SELECT_CPU_JUMP_TARGET:
               this.updateCPUTooltip(actionID);
         }
      }
      
      private function updateLaserTooltip(param1:int) : void
      {
         var _loc2_:String = BPLocale.getText(this.languageKey).replace(/%TYPE%/,InGameCatalog.instance.battery_types[param1]);
         var _loc3_:int = int(Hero.laserBatteryAmounts[param1 - 1]);
         _loc2_ += "\n" + BPLocale.getText("ttip_battery_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
         if(this.toolTipHook != null)
         {
            this.toolTipHook.updateText(_loc2_);
         }
      }
      
      private function updateRocketTooltip(param1:int) : void
      {
         var _loc2_:String = BPLocale.getText(this.languageKey).replace(/%TYPE%/,InGameCatalog.instance.rocketNames[param1]);
         var _loc3_:int = int(Hero.rocketAmounts[param1]);
         _loc2_ += "\n" + BPLocale.getText("ttip_rocket_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
         if(this.toolTipHook != null)
         {
            this.toolTipHook.updateText(_loc2_);
         }
      }
      
      private function updateRocketLauncherTooltip() : void
      {
         var _loc1_:String = null;
         if(Settings.rocketLauncherType != 0)
         {
            _loc1_ = BPLocale.getText(this.languageKey).replace(/%TYPE%/,InGameCatalog.instance.rocketLauncherNames[Settings.rocketLauncherType]);
            _loc1_ += "\n" + BPLocale.getText("ttip_rocketlauncher_loadcount").replace(/%COUNT%/,Settings.rocketLauncherRocketsLoaded).replace(/%TYPE%/,InGameCatalog.instance.rocketNames[Settings.selectedLauncherRocket]);
         }
         else
         {
            _loc1_ = BPLocale.getText(this.languageKey).replace(/%TYPE%/,BPLocale.getText("ttip_rocketlauncher_unloaded"));
         }
         if(this.toolTipHook != null)
         {
            this.toolTipHook.updateText(_loc1_);
         }
      }
      
      private function updateExplosiveAmount(param1:int) : void
      {
         var _loc3_:int = 0;
         var _loc2_:String = BPLocale.getText(this.languageKey);
         switch(param1)
         {
            case SuperActionButton.SELECTION_MINE:
               _loc3_ = int(Hero.explosiveAmounts[SpecialAmmunition.MINE]);
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.explosive_types[SpecialAmmunition.MINE]);
               _loc2_ += "\n" + BPLocale.getText("ttip_mine_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
               break;
            case SuperActionButton.SELECTION_MINE_EMP:
               _loc3_ = int(Hero.explosiveAmounts[SpecialAmmunition.MINE_EMP]);
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.explosive_types[8]);
               _loc2_ += "\n" + BPLocale.getText("ttip_mine_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
               break;
            case SuperActionButton.SELECTION_MINE_SAB:
               _loc3_ = int(Hero.explosiveAmounts[SpecialAmmunition.MINE_SAB]);
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.explosive_types[9]);
               _loc2_ += "\n" + BPLocale.getText("ttip_mine_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
               break;
            case SuperActionButton.SELECTION_MINE_DDM:
               _loc3_ = int(Hero.explosiveAmounts[SpecialAmmunition.MINE_DDM]);
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.explosive_types[10]);
               _loc2_ += "\n" + BPLocale.getText("ttip_mine_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
               break;
            case SuperActionButton.SELECTION_SMARTBOMB:
               _loc3_ = int(Hero.explosiveAmounts[SpecialAmmunition.SMARTBOMB]);
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.explosive_types[SpecialAmmunition.SMARTBOMB]);
               _loc2_ += "\n" + BPLocale.getText("ttip_smartbomb_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
               if(Hero.cpuItems[CPUItem.TYPE_SMARTBOMB] == null)
               {
                  _loc2_ += " " + BPLocale.getText("ttip_cpu_not_equipped");
               }
               break;
            case SuperActionButton.SELECTION_INSTASHIELD:
               _loc3_ = int(Hero.explosiveAmounts[SpecialAmmunition.INSTASHIELD]);
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.explosive_types[SpecialAmmunition.INSTASHIELD]);
               _loc2_ += "\n" + BPLocale.getText("ttip_instashield_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
               if(Hero.cpuItems[CPUItem.TYPE_INSTASHIELD] == null)
               {
                  _loc2_ += " " + BPLocale.getText("ttip_cpu_not_equipped");
               }
               break;
            case SuperActionButton.SELECTION_EMP:
               _loc3_ = int(Hero.explosiveAmounts[SpecialAmmunition.EMP]);
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.explosive_types[SpecialAmmunition.EMP]);
               _loc2_ += "\n" + BPLocale.getText("ttip_emp_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
               break;
            case SuperActionButton.SELECTION_FIREWORK_1:
               _loc3_ = int(Hero.fireworksAmounts[0]);
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.explosive_types[5]);
               _loc2_ += "\n" + BPLocale.getText("ttip_firework_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
               break;
            case SuperActionButton.SELECTION_FIREWORK_2:
               _loc3_ = int(Hero.fireworksAmounts[1]);
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.explosive_types[6]);
               _loc2_ += "\n" + BPLocale.getText("ttip_firework_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
               break;
            case SuperActionButton.SELECTION_FIREWORK_3:
               _loc3_ = int(Hero.fireworksAmounts[2]);
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.explosive_types[7]);
               _loc2_ += "\n" + BPLocale.getText("ttip_firework_count").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
         }
         if(this.toolTipHook != null)
         {
            this.toolTipHook.updateText(_loc2_);
         }
      }
      
      public function updateAmmoMaxValue() : void
      {
         switch(actionID)
         {
            case SuperActionButton.SELECTION_LASER_1:
            case SuperActionButton.SELECTION_LASER_2:
            case SuperActionButton.SELECTION_LASER_3:
            case SuperActionButton.SELECTION_LASER_4:
            case SuperActionButton.SELECTION_LASER_5:
            case SuperActionButton.SELECTION_LASER_6:
               maxAmmo = 1000;
               break;
            case SuperActionButton.SELECTION_ROCKET_R_310:
            case SuperActionButton.SELECTION_ROCKET_PLT_2026:
            case SuperActionButton.SELECTION_ROCKET_PLT_2021:
            case SuperActionButton.SELECTION_ROCKET_PLT_3030:
            case SuperActionButton.SELECTION_ROCKET_PLD_8:
            case SuperActionButton.SELECTION_ROCKET_DCR_250:
            case SuperActionButton.SELECTION_ROCKET_WIZ:
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_HST01:
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_UBR100:
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_ECO10:
               maxAmmo = 100;
               break;
            case SuperActionButton.SELECTION_MINE:
            case SuperActionButton.SELECTION_MINE_EMP:
            case SuperActionButton.SELECTION_MINE_SAB:
            case SuperActionButton.SELECTION_MINE_DDM:
            case SuperActionButton.SELECTION_SMARTBOMB:
            case SuperActionButton.SELECTION_INSTASHIELD:
            case SuperActionButton.SELECTION_EMP:
            case SuperActionButton.SELECTION_FIREWORK_1:
            case SuperActionButton.SELECTION_FIREWORK_2:
            case SuperActionButton.SELECTION_FIREWORK_3:
               maxAmmo = 100;
         }
      }
      
      private function updateCPUTooltip(param1:int) : void
      {
         var _loc3_:CPUItem = null;
         var _loc2_:* = BPLocale.getText(this.languageKey);
         switch(param1)
         {
            case SuperActionButton.ACTIVATION_CPU_JUMP:
               _loc3_ = Hero.cpuItems[CPUItem.TYPE_JUMP];
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.jump_cpu_names[_loc3_.level]);
               _loc2_ += "\n" + BPLocale.getText("ttip_cpu_jump_count").replace(/%COUNT%/,_loc3_.amount);
               break;
            case SuperActionButton.SELECT_CPU_JUMP_TARGET:
               _loc3_ = Hero.cpuItems[CPUItem.TYPE_ADVANCED_JUMP];
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.advancedJumpCPUNames[1]);
               _loc2_ += "\n" + BPLocale.getText("ttip_jump-vouchers_count").replace(/%COUNT%/,Hero.jumpVouchersAmount);
               if(_loc3_.level == 0)
               {
                  _loc2_ += BPLocale.getText("ttip_cpu_not_equipped");
               }
               break;
            case SuperActionButton.ACTIVATION_CPU_AIM:
               _loc3_ = Hero.cpuItems[CPUItem.TYPE_AIM];
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.aim_cpu_names[_loc3_.level]);
               _loc2_ += "\n" + BPLocale.getText("ttip_cpu_aim_count").replace(/%COUNT%/,_loc3_.amount);
               break;
            case SuperActionButton.ACTIVATION_CPU_CLOAK:
               _loc3_ = Hero.cpuItems[CPUItem.TYPE_CLOAK];
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.cloak_cpu_names[_loc3_.level]);
               _loc2_ += "\n" + BPLocale.getText("ttip_cpu_cloak_count").replace(/%COUNT%/,_loc3_.amount);
               break;
            case SuperActionButton.ACTIVATION_CPU_AROL:
               _loc3_ = Hero.cpuItems[CPUItem.TYPE_AROL];
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.arol_cpu_names[_loc3_.level]);
               break;
            case SuperActionButton.ACTIVATION_CPU_RLLB:
               _loc3_ = Hero.cpuItems[CPUItem.TYPE_RLLB];
               if(_loc3_ != null)
               {
                  _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.rllbCpuNames[_loc3_.level]);
                  break;
               }
               _loc2_ = this.replaceMissingType(_loc2_);
               break;
            case SuperActionButton.ACTIVATION_CPU_ROBOT:
               _loc3_ = Hero.cpuItems[CPUItem.TYPE_ROBOT];
               if(_loc3_ != null)
               {
                  _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.robot_names[_loc3_.level]);
                  break;
               }
               _loc2_ = this.replaceMissingType(_loc2_);
               break;
            case SuperActionButton.ACTIVATION_CPU_HM7:
               _loc3_ = Hero.cpuItems[CPUItem.TYPE_HM7];
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.trade_cpu_names[_loc3_.level]);
               if(_loc3_.amount > 0)
               {
                  _loc2_ += "\n" + BPLocale.getText("ttip_cpu_trade_count").replace(/%COUNT%/,_loc3_.amount);
               }
               break;
            case SuperActionButton.ACTIVATION_CPU_DRONE_REPAIR:
               _loc3_ = Hero.cpuItems[CPUItem.TYPE_DRONE_REPAIR];
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.dronerepair_cpu_names[Math.abs(_loc3_.level)]);
               _loc2_ += "\n";
               if(_loc3_.level > 0)
               {
                  _loc2_ += BPLocale.getText("ttip_cpu_dronerep_count").replace(/%COUNT%/,_loc3_.amount);
                  break;
               }
               _loc2_ += BPLocale.getText("ttip_cpu_dronerep_not_equipped");
               break;
            case SuperActionButton.ACTIVATION_CPU_AMMOBUY:
               _loc3_ = Hero.cpuItems[CPUItem.TYPE_AMMOBUY];
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.battery_types[_loc3_.level]);
               break;
            case SuperActionButton.ACTIVATION_CPU_ROCKETBUY:
               _loc3_ = Hero.cpuItems[CPUItem.TYPE_ROCKETBUY];
               _loc2_ = _loc2_.replace(/%TYPE%/,InGameCatalog.instance.rocketNames[_loc3_.level]);
         }
         if(this.toolTipHook != null)
         {
            this.toolTipHook.updateText(_loc2_);
         }
      }
      
      private function updateBuyLaserTooltip(param1:int) : void
      {
         var _loc2_:String = BPLocale.getText(this.languageKey).replace(/%TYPE%/,InGameCatalog.instance.battery_types[param1]);
         var _loc3_:AmmoPrice = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_LASER,param1);
         _loc2_ += "\n" + BPLocale.getText("ttip_quickBuy_ammount").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_.amount));
         if(_loc3_.currency == AmmoPrice.CURRENCY_URIDIUM)
         {
            _loc2_ += "\n" + BPLocale.getText("ttip_quickBuy_price").replace(/%COUNT%/,BPLocale.getText("pricetag_uridium").replace(/%VALUE%/,BPLocale.round(_loc3_.summedPrice)));
         }
         if(_loc3_.currency == AmmoPrice.CURRENCY_CREDITS)
         {
            _loc2_ += "\n" + BPLocale.getText("ttip_quickBuy_price").replace(/%COUNT%/,BPLocale.getText("pricetag_credits").replace(/%VALUE%/,BPLocale.round(_loc3_.summedPrice)));
         }
         if(this.toolTipHook != null)
         {
            this.toolTipHook.updateText(_loc2_);
         }
      }
      
      private function updateBuyRocketTooltip(param1:int) : void
      {
         var _loc2_:String = BPLocale.getText(this.languageKey).replace(/%TYPE%/,InGameCatalog.instance.rocketNames[param1]);
         var _loc3_:AmmoPrice = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_ROCKET,param1);
         _loc2_ += "\n" + BPLocale.getText("ttip_quickBuy_ammount").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_.amount));
         if(_loc3_.currency == AmmoPrice.CURRENCY_URIDIUM)
         {
            _loc2_ += "\n" + BPLocale.getText("ttip_quickBuy_price").replace(/%COUNT%/,BPLocale.getText("pricetag_uridium").replace(/%VALUE%/,BPLocale.round(_loc3_.summedPrice)));
         }
         if(_loc3_.currency == AmmoPrice.CURRENCY_CREDITS)
         {
            _loc2_ += "\n" + BPLocale.getText("ttip_quickBuy_price").replace(/%COUNT%/,BPLocale.getText("pricetag_credits").replace(/%VALUE%/,BPLocale.round(_loc3_.summedPrice)));
         }
         if(this.toolTipHook != null)
         {
            this.toolTipHook.updateText(_loc2_);
         }
      }
      
      public function updateTechTooltip(param1:IAbilityItem) : void
      {
         var _loc2_:String = null;
         var _loc3_:String = null;
         var _loc4_:String = null;
         if(param1 == null)
         {
            return;
         }
         if(param1 is TechItem)
         {
            _loc2_ = "tech_";
            _loc3_ = "_name";
            _loc4_ = _loc2_ + param1.getName() + _loc3_;
         }
         else
         {
            _loc2_ = "ttip_";
            _loc3_ = "_skill";
            _loc4_ = _loc2_ + SkillDesignShipNames.getShipNameBySkillName(param1.getName()) + _loc3_;
         }
         this.techTooltipText = BPLocale.getText(_loc4_);
         switch(param1.getStatus())
         {
            case TechItem.STATE_DEFAULT:
               this.techTooltipText = BPLocale.getText(_loc4_);
               break;
            case TechItem.STATE_ACTIVE:
               this.techTooltipText += "\n%TIME%";
               break;
            case TechItem.STATE_INACTIVE:
               this.techTooltipText += "\n%TIME%";
               break;
            case TechItem.STATE_READY:
               this.techTooltipText = BPLocale.getText(_loc4_);
         }
         if(this.toolTipHook != null)
         {
            this.toolTipHook.updateText(this.techTooltipText);
         }
      }
      
      public function setTechActiveTimer(param1:int, param2:IAbilityItem) : void
      {
         this.correspondingTechItem = param2;
         if(!this.isTechTimerRunning)
         {
            this.isTechTimerRunning = true;
            this.techTimerSecondsLeft = param1;
            this.techTimerTick();
         }
      }
      
      private function techTimerTick() : void
      {
         if(this.techTooltipText == null)
         {
            return;
         }
         if(this.toolTipHook != null)
         {
            this.toolTipHook.updateText(this.techTooltipText.replace(/%TIME%/,TimeFormatter.formatTime(this.techTimerSecondsLeft)));
         }
         --this.techTimerSecondsLeft;
         if(this.correspondingTechItem is TechItem)
         {
            (this.correspondingTechItem as TechItem).secondsLeft = this.techTimerSecondsLeft;
         }
         else if(this.correspondingTechItem is SkillDesignItem)
         {
            (this.correspondingTechItem as SkillDesignItem).secondsLeft = this.techTimerSecondsLeft;
         }
         if(this.techTimerSecondsLeft > 0)
         {
            TweenMax.delayedCall(1,this.techTimerTick);
         }
         else
         {
            this.isTechTimerRunning = false;
            this.techActivePeriodComplete();
         }
      }
      
      private function techActivePeriodComplete() : void
      {
      }
      
      public function toggleTechActiveLayer(param1:Boolean) : void
      {
         if(param1)
         {
            buttonContainer.addChild(this.techActiveClip);
            buttonContainer.buttonMode = false;
         }
         else if(buttonContainer.contains(this.techActiveClip))
         {
            buttonContainer.removeChild(this.techActiveClip);
         }
      }
      
      public function setRocketCooldown(param1:int) : void
      {
         this.cooldown.gotoAndStop(param1);
         this.cooldown.visible = true;
         actionSelected.visible = false;
         lockButton();
      }
      
      public function setCooldown(param1:int, param2:IAbilityItem = null, param3:int = 0, param4:int = 0, param5:Boolean = false) : void
      {
         var _loc6_:TechItem = null;
         var _loc7_:SkillDesignItem = null;
         if(param5 && !this.isRunningCooldown)
         {
            this.isRunningCooldown = true;
            if(param2 is TechItem)
            {
               _loc6_ = param2 as TechItem;
               this.updateTechTooltip(_loc6_);
               this.techCooldown = guiManager.techModel.cooldowns[_loc6_.type];
            }
            else if(param2 is SkillDesignItem)
            {
               _loc7_ = param2 as SkillDesignItem;
               this.updateTechTooltip(_loc6_);
               this.techCooldown = guiManager.skillDesignsModel.cooldowns[_loc7_.type];
            }
            this.cooldown.visible = true;
            lockButton();
            this.updateButtonCooldown();
         }
         else
         {
            this.cooldown.gotoAndStop(param1);
         }
      }
      
      private function updateButtonCooldown() : void
      {
         var _loc1_:int = 0;
         if(this.techCooldown.seconds > 0)
         {
            if(this.toolTipHook != null)
            {
               this.toolTipHook.updateText(this.techTooltipText.replace(/%TIME%/,TimeFormatter.formatTime(this.techCooldown.seconds)));
            }
            _loc1_ = this.returnFrameForSecondsLeft(this.techCooldown.seconds);
            this.cooldown.gotoAndStop(_loc1_);
            TweenMax.delayedCall(1,this.updateButtonCooldown);
         }
         else
         {
            this.cooldownCompleted();
         }
      }
      
      public function cooldownCompleted(param1:int = 0) : void
      {
         this.cooldown.visible = false;
         this.isRunningCooldown = false;
         this.techTooltipText = BPLocale.getText("tech_" + TechNames.getNameByType(this.techTypeForThisButton) + "_name");
         unlockButton();
         guiManager.getMenuManager().updateTechs();
      }
      
      private function returnFrameForSecondsLeft(param1:int) : int
      {
         var _loc2_:int = Math.round(100 / this.techCooldown.startingTime * param1);
         return 100 - _loc2_;
      }
      
      public function setIcon(param1:int) : void
      {
         var _loc2_:Bitmap = null;
         if(actionID == SuperActionButton.SELECTION_LOAD_ROCKET_LAUNCHER || actionID == SuperActionButton.ACTIVATION_CPU_ROCKETBUY || this.isTechButton)
         {
            return;
         }
         var _loc3_:int = 0;
         while(_loc3_ < this.iconContainer.numChildren)
         {
            _loc2_ = Bitmap(this.iconContainer.getChildAt(_loc3_));
            if(_loc3_ == param1 - 1)
            {
               _loc2_.visible = true;
            }
            else
            {
               _loc2_.visible = false;
            }
            _loc3_++;
         }
      }
      
      public function isCooldownActive() : Boolean
      {
         if(this.cooldown.visible)
         {
            return true;
         }
         return false;
      }
      
      public function getIconIndex() : int
      {
         var _loc2_:Bitmap = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.iconContainer.numChildren)
         {
            _loc2_ = Bitmap(this.iconContainer.getChildAt(_loc1_));
            if(_loc2_.visible)
            {
               return _loc1_;
            }
            _loc1_++;
         }
         return -1;
      }
      
      private function handleMouseClick(param1:MouseEvent) : void
      {
         var _loc2_:Map = this.menuManager.getGuiManager().getMain().screenManager.map;
         if(_loc2_ != null)
         {
            if(_loc2_.getEventManager().isControlsLocked())
            {
               return;
            }
         }
         if(this.cooldown.visible || buttonContainer.buttonMode == false || !this.menuManager.getMainMenu().guiLocked)
         {
            return;
         }
         var _loc3_:ActionEvent = new ActionEvent(ActionEvent.ACTION);
         _loc3_.setActionID(actionID);
         _loc3_.setEnvironment(this.getEnvironment());
         dispatchEvent(_loc3_);
         AudioManager.playSoundEffect(25);
      }
      
      private function onMouseUp(param1:MouseEvent) : void
      {
         if(this.menuManager.getGuiManager().getMenuManager().getMainMenu().guiLocked)
         {
            return;
         }
         if(this.dragging)
         {
            this.buttonContainer.stopDrag();
            this.dragging = false;
            if(!this.testQuickstartSlotCollision())
            {
               TweenLite.to(this.buttonContainer,1,{
                  "ease":Back.easeIn,
                  "y":this.buttonContainer.y + 150
               });
               TweenLite.to(this.buttonContainer,1,{
                  "delay":0.25,
                  "alpha":0,
                  "onComplete":this.killActionButton
               });
            }
            this.saveQuickstartSettings();
         }
         this.menuManager.updateAllButtonAmounts();
      }
      
      private function saveQuickstartSettings() : void
      {
         var _loc4_:ButtonSlot = null;
         var _loc5_:ActionButton = null;
         var _loc1_:Array = this.menuManager.getQuickMenu().getQuickstartSlots();
         var _loc2_:String = "";
         var _loc3_:int = 0;
         while(_loc3_ < _loc1_.length)
         {
            _loc4_ = _loc1_[_loc3_];
            _loc5_ = _loc4_.getActionButton();
            if(_loc5_ == null)
            {
               _loc2_ = _loc2_ + "-1" + ServerCommands.SETTING_PROPERTY_SEPERATOR;
            }
            else
            {
               _loc2_ += _loc5_.getActionID() + ServerCommands.SETTING_PROPERTY_SEPERATOR;
            }
            _loc3_++;
         }
         if(_loc2_.length > 0)
         {
            this.menuManager.getGuiManager().getMain().getConnectionManager().sendCommand(ServerCommands.CLIENT_SETTING,[ServerCommands.SET_QUICKBAR_SLOT,Main.removeCommaAtEnd(_loc2_)]);
         }
      }
      
      public function killActionButton() : void
      {
         this.cleanup();
         if(this.getEnvironment() == ENV_UNDEFINED)
         {
            this.menuManager.removeChild(this.buttonContainer);
         }
         if(this.getEnvironment() == ENV_QUICKSTART)
         {
            this.removeSelfFromQuickstartSlot();
         }
         this.saveQuickstartSettings();
      }
      
      public function cleanup() : void
      {
         this.buttonContainer.removeEventListener(MouseEvent.CLICK,this.handleMouseClick);
         this.buttonContainer.removeEventListener(MouseEvent.MOUSE_OVER,this.onMouseOver);
         this.buttonContainer.removeEventListener(MouseEvent.MOUSE_OUT,this.onMouseOut);
         this.buttonContainer.removeEventListener(MouseEvent.MOUSE_DOWN,this.onMouseDown);
         this.removeEventListener(ActionEvent.ACTION,this.menuManager.onAction);
         this.removeMouseUpListener();
         if(TweenMax.isTweening(this.cooldown))
         {
            TweenMax.killTweensOf(this.cooldown);
         }
         if(this.toolTipHook != null)
         {
            TooltipControl.getInstance().removeToolTip(buttonContainer);
         }
         stopFlashIcon();
         TweenMax.killTweensOf(selectedIcon);
         removeAllDirectionArrows();
         stopPointer();
      }
      
      private function testQuickstartSlotCollision() : Boolean
      {
         var _loc3_:ButtonSlot = null;
         var _loc1_:Array = this.menuManager.getQuickMenu().getQuickstartSlots();
         var _loc2_:int = 0;
         while(_loc2_ < _loc1_.length)
         {
            _loc3_ = _loc1_[_loc2_];
            if(this.isInBounds(_loc3_))
            {
               if(this.getEnvironment() == ENV_QUICKSTART)
               {
                  this.removeSelfFromQuickstartSlot();
                  this.removeExistingAction(_loc3_);
                  _loc3_.addActionButton(this);
               }
               else if(this.getEnvironment() == ENV_UNDEFINED)
               {
                  this.removeExistingAction(_loc3_);
                  _loc3_.addActionButton(this);
                  this.removeSelfFromQuickstartSlot();
                  _loc3_.addActionButton(this);
               }
               this.menuManager.updateSelectableButtons();
               return true;
            }
            _loc2_++;
         }
         return false;
      }
      
      private function removeExistingAction(param1:ButtonSlot) : void
      {
         var _loc2_:ActionButton = param1.getActionButton();
         if(_loc2_ != null)
         {
            this.menuManager.removeActionButton(_loc2_);
            param1.removeActionButton();
         }
      }
      
      private function removeSelfFromQuickstartSlot() : void
      {
         var _loc3_:ButtonSlot = null;
         var _loc1_:Array = this.menuManager.getQuickMenu().getQuickstartSlots();
         var _loc2_:int = 0;
         while(_loc2_ < _loc1_.length)
         {
            _loc3_ = _loc1_[_loc2_];
            if(_loc3_.getActionButton() != null)
            {
               if(_loc3_.getActionButton() == this)
               {
                  _loc3_.removeActionButton();
                  if(this.menuManager.getMainMenu().guiLocked)
                  {
                     _loc3_.getMC().visible = false;
                  }
               }
            }
            _loc2_++;
         }
      }
      
      private function isInBounds(param1:ButtonSlot) : Boolean
      {
         var _loc2_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         var _loc3_:Bitmap = _loc2_.getEmbededBitmap(param1.getResKey());
         var _loc4_:Rectangle = _loc3_.getRect(this.menuManager);
         if(this.menuManager.mouseX > int(this.menuManager.getQuickMenu().x + param1.getMC().x) && this.menuManager.mouseX < int(this.menuManager.getQuickMenu().x + param1.getMC().x + _loc4_.width) && this.menuManager.mouseY > int(this.menuManager.getQuickMenu().y + param1.getMC().y) && this.menuManager.mouseY < int(this.menuManager.getQuickMenu().y + param1.getMC().y + _loc4_.height))
         {
            return true;
         }
         return false;
      }
      
      public function getEnvironment() : int
      {
         var _loc2_:ButtonSlot = null;
         var _loc1_:Array = this.menuManager.getQuickMenu().getQuickstartSlots();
         var _loc3_:int = 0;
         while(_loc3_ < _loc1_.length)
         {
            _loc2_ = _loc1_[_loc3_];
            if(_loc2_.getActionButton() == this)
            {
               return ENV_QUICKSTART;
            }
            _loc3_++;
         }
         var _loc4_:Array = this.menuManager.getMainMenu().getPoolSlots();
         _loc3_ = 0;
         while(_loc3_ < _loc4_.length)
         {
            _loc2_ = _loc4_[_loc3_];
            if(_loc2_.getActionButton() == this)
            {
               return ENV_POOL;
            }
            _loc3_++;
         }
         return ENV_UNDEFINED;
      }
      
      private function onMouseOver(param1:MouseEvent) : void
      {
         if(!this.menuManager.getMainMenu().guiLocked)
         {
            return;
         }
         if(actionSelected.visible || buttonContainer.buttonMode == false)
         {
            return;
         }
         actionHover.alpha = 0;
         actionHover.visible = true;
         TweenLite.to(actionHover,0.5,{"alpha":1});
      }
      
      private function onMouseOut(param1:MouseEvent) : void
      {
         TweenLite.to(actionHover,0.5,{
            "alpha":0,
            "onComplete":setInvisible,
            "onCompleteParams":[actionHover]
         });
      }
      
      private function onMouseDown(param1:MouseEvent) : void
      {
         var _loc2_:ActionButton = null;
         var _loc3_:int = 0;
         var _loc4_:DisplayObject = null;
         var _loc5_:Array = null;
         var _loc6_:ButtonSlot = null;
         var _loc7_:int = 0;
         if(this.menuManager.getMainMenu().guiLocked)
         {
            return;
         }
         if(!this.pattern.isCustomizable)
         {
            return;
         }
         if(this.cooldown.visible)
         {
            return;
         }
         if(this.getEnvironment() == ENV_POOL)
         {
            _loc2_ = this.menuManager.createActionButton(this.actionID);
            _loc2_.setDragging(true);
            this.menuManager.addChild(_loc2_.getMovieclip());
            _loc2_.getMovieclip().x = this.menuManager.mouseX - actionNormal.width / 2;
            _loc2_.getMovieclip().y = this.menuManager.mouseY - actionNormal.height / 2;
            _loc2_.getMovieclip().startDrag();
         }
         else if(this.getEnvironment() == ENV_QUICKSTART)
         {
            _loc3_ = this.menuManager.getQuickMenu().numChildren;
            _loc4_ = this.menuManager.getQuickMenu().getChildAt(_loc3_ - 1);
            _loc5_ = this.menuManager.getQuickMenu().getQuickstartSlots();
            _loc7_ = 0;
            while(_loc7_ < _loc5_.length)
            {
               _loc6_ = _loc5_[_loc7_];
               if(_loc6_.getActionButton() == this)
               {
                  break;
               }
               _loc7_++;
            }
            this.menuManager.getQuickMenu().swapChildren(_loc6_.getMC(),_loc4_);
            this.buttonContainer.startDrag();
            this.dragging = true;
         }
      }
      
      public function getMovieclip() : MovieClip
      {
         return buttonContainer;
      }
      
      public function setDeselected() : void
      {
         actionSelected.visible = false;
      }
      
      public function setSelected() : void
      {
         actionSelected.visible = true;
         this.updateSubActionSlotPosition();
      }
      
      private function updateSubActionSlotPosition() : void
      {
         var _loc1_:int = 0;
         var _loc3_:ActionButton = null;
         var _loc4_:ButtonSlot = null;
         var _loc2_:int = -(this.menuManager.getSlotWidth() + this.menuManager.getGap()) / 2 + this.menuManager.getMainMenu().getVisibleCountGap() - 2;
         if(this.getEnvironment() == ENV_POOL && !this.isCpuButton)
         {
            if(this.isRLButton)
            {
               _loc3_ = this.menuManager.getActionButtonInPoolByID(this.menuManager.rocketIDToButtonID[Settings.selectedRocket]);
               if(_loc3_)
               {
                  _loc1_ = this.menuManager.getParentSlot(_loc3_).getMC().x + _loc2_;
                  if(_loc1_ < -(this.menuManager.getSlotWidth() * 0.5) || _loc1_ > (this.menuManager.getSlotWidth() + this.menuManager.getGap()) * 6.5)
                  {
                     this.menuManager.getMainMenu().getSubActionSlot().visible = false;
                  }
                  else
                  {
                     this.menuManager.getMainMenu().getSubActionSlot().visible = true;
                  }
                  TweenLite.to(this.menuManager.getMainMenu().getSubActionSlot(),0.15,{"x":_loc1_});
               }
            }
            else
            {
               _loc4_ = this.menuManager.getParentSlot(this);
               if(_loc4_ != null && _loc4_.getMC() != this.menuManager.getMainMenu().getSubActionSlot())
               {
                  _loc1_ = _loc4_.getMC().x + _loc2_;
                  if(_loc1_ < -(_loc4_.getMC().width * 0.5) || _loc1_ > (this.menuManager.getSlotWidth() + this.menuManager.getGap()) * 5.5)
                  {
                     this.menuManager.getMainMenu().getSubActionSlot().visible = false;
                  }
                  else
                  {
                     this.menuManager.getMainMenu().getSubActionSlot().visible = true;
                  }
                  TweenLite.to(this.menuManager.getMainMenu().getSubActionSlot(),0.15,{"x":_loc1_});
               }
            }
         }
      }
      
      public function getID() : int
      {
         return actionID;
      }
      
      public function getResKey() : String
      {
         return this.resKey;
      }
      
      public function getMenuID() : int
      {
         return this.menuID;
      }
      
      public function setDragging(param1:Boolean) : void
      {
         this.dragging = param1;
      }
      
      public function getActionMenu() : MenuManager
      {
         return this.menuManager;
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import flash.display.MovieClip;
   import flash.events.MouseEvent;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.gui.ActionEvent;
   import net.bigpoint.darkorbit.gui.BitmapFont;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.map.Map;
   
   public class ActionButton2 extends SuperActionButton
   {
      
      public static const logger:ILogger = Log.getLogger("ActionButton2");
      
      public static var TYPE_STATIC_BUTTON:int = 0;
      
      public static var TYPE_DYNAMIC_BUTTON:int = 1;
      
      private var resKey:String;
      
      private var buttonType:int;
      
      private var languageKey:String;
      
      public function ActionButton2(param1:GuiManager, param2:String, param3:int, param4:int, param5:Boolean = false, param6:String = null)
      {
         super();
         this.guiManager = param1;
         this.resKey = param2;
         this.actionID = param3;
         this.buttonType = param4;
         this.hasCounter = param5;
         this.languageKey = param6;
      }
      
      public function init() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         buttonContainer = new MovieClip();
         if(this.buttonType == TYPE_STATIC_BUTTON)
         {
            if(actionID == ACTION_LOGOUT)
            {
               actionNormal = _loc1_.getEmbededBitmap("comb03_std.png");
               actionHover = _loc1_.getEmbededBitmap("comb03_hover.png");
            }
            else
            {
               actionNormal = _loc1_.getEmbededBitmap("comb02_std.png");
               actionHover = _loc1_.getEmbededBitmap("comb02_hover.png");
            }
            actionSelected = _loc1_.getEmbededBitmap("comb02_selected.png");
         }
         else if(this.buttonType == TYPE_DYNAMIC_BUTTON)
         {
            actionNormal = _loc1_.getEmbededBitmap("comb02_std.png");
            actionHover = _loc1_.getEmbededBitmap("comb02_hover.png");
            actionSelected = _loc1_.getEmbededBitmap("comb02_selected.png");
         }
         this.selectedIcon = _loc1_.getEmbededBitmap("comb02_flash.png");
         if(actionSelected != null)
         {
            actionSelected.x = -1;
            actionSelected.y = -2;
         }
         actionDisabled = _loc1_.getEmbededBitmap("comb00_deactivated.png");
         actionDisabled.visible = false;
         buttonContainer.addChild(_loc1_.getEmbededBitmap("slot"));
         buttonContainer.addChild(actionNormal);
         buttonContainer.addChild(actionHover);
         actionHover.visible = false;
         buttonContainer.addChild(actionSelected);
         actionSelected.visible = false;
         buttonContainer.addChild(_loc1_.getEmbededBitmap(this.resKey));
         buttonContainer.addChild(actionDisabled);
         buttonContainer.addEventListener(MouseEvent.CLICK,this.onMouseClick);
         buttonContainer.addEventListener(MouseEvent.MOUSE_OVER,this.onMouseOver);
         buttonContainer.addEventListener(MouseEvent.MOUSE_OUT,this.onMouseOut);
         buttonContainer.buttonMode = true;
         if(hasCounter)
         {
            bitmapFont = new BitmapFont(this);
            bitmapFont.y = 9;
            buttonContainer.addChild(bitmapFont);
            bitmapFont.setText("0");
         }
         if(this.languageKey != null)
         {
            TooltipControl.getInstance().addToolTip(buttonContainer,BPLocale.getText(this.languageKey));
         }
         selectedIcon.visible = false;
         buttonContainer.addChild(selectedIcon);
      }
      
      public function getMovieClip() : MovieClip
      {
         return buttonContainer;
      }
      
      private function onMouseClick(param1:MouseEvent) : void
      {
         var _loc2_:Map = guiManager.getMain().screenManager.map;
         if(_loc2_ != null)
         {
            if(_loc2_.getEventManager().isControlsLocked())
            {
               return;
            }
         }
         var _loc3_:ActionEvent = new ActionEvent(ActionEvent.ACTION);
         _loc3_.setActionID(actionID);
         dispatchEvent(_loc3_);
      }
      
      private function onMouseOver(param1:MouseEvent) : void
      {
         if(actionSelected.visible || buttonContainer.buttonMode == false)
         {
            return;
         }
         actionHover.alpha = 0;
         actionHover.visible = true;
         TweenLite.to(actionHover,0.5,{"alpha":1});
      }
      
      private function onMouseOut(param1:MouseEvent) : void
      {
         TweenLite.to(actionHover,0.5,{
            "alpha":0,
            "onComplete":setInvisible,
            "onCompleteParams":[actionHover]
         });
      }
      
      public function setDeselected() : void
      {
         actionSelected.visible = false;
      }
      
      public function setSelected() : void
      {
         actionSelected.visible = true;
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   public class ActionButtonDecorator implements IActionButtonDecorator
   {
      
      public function ActionButtonDecorator()
      {
         super();
      }
      
      public function update() : void
      {
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   public class ActionButtonPattern
   {
      
      public var actionID:int;
      
      private var menuID:int;
      
      public var resKey:String;
      
      private var alwaysExist:Boolean;
      
      public var isActiveAtStart:Boolean = true;
      
      private var cooldown:Boolean;
      
      private var counter:Boolean;
      
      private var stdIcon:String;
      
      private var hoverIcon:String;
      
      private var selectedIcon:String;
      
      public var isSelectable:Boolean = true;
      
      private var languageKey:String;
      
      private var ammobar:Boolean;
      
      public var isCustomizable:Boolean = true;
      
      public var section:String;
      
      public var canActivate:Boolean;
      
      public function ActionButtonPattern(param1:int, param2:int, param3:String, param4:String, param5:String, param6:String, param7:String, param8:String = null, param9:Boolean = false)
      {
         super();
         this.section = param8;
         this.actionID = param1;
         this.menuID = param2;
         this.resKey = param3;
         this.stdIcon = param4;
         this.hoverIcon = param5;
         this.selectedIcon = param6;
         this.languageKey = param7;
         this.canActivate = param9;
      }
      
      public function getMenuID() : int
      {
         return this.menuID;
      }
      
      public function getResKey() : String
      {
         return this.resKey;
      }
      
      public function isAlwaysExist() : Boolean
      {
         return this.alwaysExist;
      }
      
      public function setAlwaysExist(param1:Boolean) : void
      {
         this.alwaysExist = param1;
      }
      
      public function hasCooldown() : Boolean
      {
         return this.cooldown;
      }
      
      public function setCooldown(param1:Boolean) : void
      {
         this.cooldown = param1;
      }
      
      public function hasCounter() : Boolean
      {
         return this.counter;
      }
      
      public function setCounter(param1:Boolean) : void
      {
         this.counter = param1;
      }
      
      public function getStdIcon() : String
      {
         return this.stdIcon;
      }
      
      public function getHoverIcon() : String
      {
         return this.hoverIcon;
      }
      
      public function getSelectedIcon() : String
      {
         return this.selectedIcon;
      }
      
      public function getLanguageKey() : String
      {
         return this.languageKey;
      }
      
      public function isAmmobar() : Boolean
      {
         return this.ammobar;
      }
      
      public function setAmmobar(param1:Boolean) : void
      {
         this.ammobar = param1;
      }
      
      public function toString() : String
      {
         return "ActionButtonPattern actionID:" + this.actionID + " menuID:" + this.menuID + " resKey:" + this.resKey;
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   public interface IAbilityItem
   {
      
      function getName() : String;
      
      function getStatus() : int;
   }
}

package net.bigpoint.darkorbit.menu
{
   public interface IActionButtonDecorator
   {
      
      function update() : void;
   }
}

package net.bigpoint.darkorbit.menu
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import com.greensock.easing.Cubic;
   import com.greensock.easing.Elastic;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.events.TimerEvent;
   import flash.geom.Point;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.gui.ButtonSlot;
   import net.bigpoint.darkorbit.gui.MenuButton;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.ConnectionManager;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.resolution.ResolutionPattern;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class MainMenu extends Sprite
   {
      
      private var menuManager:MenuManager;
      
      private var menuSlots:Array = [];
      
      private var poolSlots:Array = [];
      
      private var poolContainer:Sprite = new Sprite();
      
      private var poolSubContainer:Sprite = new Sprite();
      
      private var maxVisiblePoolSlots:int;
      
      private var scrollRightMC:MovieClip;
      
      private var scrollLeftMC:MovieClip;
      
      private var subActionSlot:MovieClip;
      
      private var scrollButtonsLocked:Boolean = false;
      
      private var _menuButtons:Array = [];
      
      private var lastScrollButton:int;
      
      private var dragger:MovieClip;
      
      private var lock:MovieClip;
      
      private var timer:Timer;
      
      private var lastPosition:Point = new Point();
      
      private var _guiLocked:Boolean = true;
      
      private var grid:Sprite;
      
      public function MainMenu(param1:MenuManager)
      {
         super();
         this.menuManager = param1;
      }
      
      public function onMouseUp() : void
      {
         var _loc1_:ConnectionManager = null;
         this.timer.stop();
         this.timer.reset();
         this.stopDrag();
         if(this.lastPosition.x != this.x || this.lastPosition.y != this.y)
         {
            if(this.checkPosition())
            {
               _loc1_ = this.menuManager.getGuiManager().getMain().getConnectionManager();
               _loc1_.sendCommand(ServerCommands.CLIENT_SETTING,[ServerCommands.SET_MAINMENU_POSITION + ServerCommands.SETTING_KEY_SEPERATOR + Settings.resolutionID,this.x + ServerCommands.SETTING_PROPERTY_SEPERATOR + this.y]);
               this.lastPosition.x = this.x;
               this.lastPosition.y = this.y;
            }
         }
      }
      
      public function checkPosition() : Boolean
      {
         var _loc1_:int = this.menuManager.getSlotWidth();
         if(this.x + _loc1_ / 2 < 20 || this.x + _loc1_ > ScreenManager.getScreenWidth() || this.y < 0 || this.y + 20 > ScreenManager.getScreenHeight() - 0)
         {
            TweenLite.to(this,0.5,{
               "ease":Elastic.easeOut,
               "x":this.lastPosition.x,
               "y":this.lastPosition.y
            });
            return false;
         }
         return true;
      }
      
      public function init() : void
      {
         var _loc1_:ButtonSlot = null;
         var _loc2_:int = 0;
         var _loc10_:XML = null;
         var _loc11_:ResolutionPattern = null;
         var _loc12_:Point = null;
         var _loc13_:int = 0;
         var _loc14_:String = null;
         var _loc15_:String = null;
         var _loc16_:Boolean = false;
         var _loc17_:MenuButton = null;
         this.maxVisiblePoolSlots = Main.gameXML.menu.@maxVisiblePoolSlots;
         _loc2_ = 0;
         while(_loc2_ < Main.gameXML.menu.@menuSlots)
         {
            _loc1_ = new ButtonSlot("slot",this.menuManager.getGuiManager());
            _loc1_.getMC().x = this.menuManager.getSlotWidth() / 2 + _loc2_ * this.menuManager.getSlotWidth() + _loc2_ * this.menuManager.getGap();
            this.addChild(_loc1_.getMC());
            this.menuSlots.push(_loc1_);
            _loc2_++;
         }
         var _loc3_:int = int(Main.gameXML.menu.@poolSlots);
         _loc2_ = 0;
         while(_loc2_ < _loc3_)
         {
            if(_loc2_ == 0)
            {
               _loc1_ = new ButtonSlot("slot",this.menuManager.getGuiManager());
               _loc1_.getMC().x = this.menuManager.getSlotWidth() / 2 + 2;
               _loc1_.getMC().y = this.menuManager.getSlotHeight() * 5 / 3;
               this.subActionSlot = _loc1_.getMC();
               this.subActionSlot.visible = false;
               this.addChild(_loc1_.getMC());
               this.poolSlots.push(_loc1_);
            }
            _loc1_ = new ButtonSlot("slot",this.menuManager.getGuiManager());
            _loc1_.getMC().x = _loc2_ * _loc1_.getMC().width + _loc2_ * this.menuManager.getGap();
            this.poolSubContainer.addChild(_loc1_.getMC());
            this.poolSlots.push(_loc1_);
            _loc2_++;
         }
         this.x = 1;
         this.poolSubContainer.x = -1;
         this.poolContainer.addChild(this.poolSubContainer);
         this.poolContainer.y = this.menuManager.getSlotHeight() / 3 * 2 + this.menuManager.getGap() * 2;
         this.addChild(this.poolContainer);
         this.y = this.menuManager.getSlotHeight() / 3 * 2 + this.menuManager.getGap() * 2;
         var _loc4_:Sprite = new Sprite();
         _loc4_.x = -1;
         _loc4_.y = -2;
         _loc4_.graphics.beginFill(16711680);
         _loc4_.graphics.drawRect(0,0,this.maxVisiblePoolSlots * this.menuManager.getSlotWidth() + this.maxVisiblePoolSlots * this.menuManager.getGap() - 1,this.poolContainer.height + 5);
         this.poolContainer.addChild(_loc4_);
         this.poolContainer.mask = _loc4_;
         var _loc5_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         this.scrollRightMC = MovieClip(_loc5_.getEmbededMovieClip("scrollRight"));
         this.scrollRightMC.x = this.maxVisiblePoolSlots * (this.menuManager.getSlotWidth() + this.menuManager.getGap()) - this.menuManager.getGap() / 2;
         this.scrollRightMC.y = this.menuManager.getSlotHeight() / 3 * 2 + this.menuManager.getGap() * 2;
         this.scrollRightMC.buttonMode = true;
         this.scrollRightMC.gotoAndStop(1);
         this.addChild(this.scrollRightMC);
         this.scrollRightMC.addEventListener(MouseEvent.CLICK,this.onScroolPoolRight);
         this.scrollRightMC.addEventListener(MouseEvent.MOUSE_DOWN,this.onMouseDownRight);
         this.scrollRightMC.addEventListener(MouseEvent.MOUSE_OVER,this.onMouseOverRightScrollButton);
         this.scrollRightMC.addEventListener(MouseEvent.MOUSE_OUT,this.onMouseOutRightScrollButton);
         this.scrollLeftMC = MovieClip(_loc5_.getEmbededMovieClip("scrollLeft"));
         this.scrollLeftMC.x = -this.menuManager.getGap();
         this.scrollLeftMC.y = this.menuManager.getSlotHeight() / 3 * 2 + this.menuManager.getGap() * 2;
         this.scrollLeftMC.buttonMode = true;
         this.scrollLeftMC.gotoAndStop(1);
         this.addChild(this.scrollLeftMC);
         this.scrollLeftMC.addEventListener(MouseEvent.CLICK,this.onScroolPoolLeft);
         this.scrollLeftMC.addEventListener(MouseEvent.MOUSE_DOWN,this.onMouseDownLeft);
         this.scrollLeftMC.addEventListener(MouseEvent.MOUSE_OVER,this.onMouseOverLeftScrollButton);
         this.scrollLeftMC.addEventListener(MouseEvent.MOUSE_OUT,this.onMouseOutLeftScrollButton);
         this.setPoolSlotVisibility(false);
         var _loc6_:int = 0;
         var _loc7_:String = Main.gameXML.menu.menuButtons.@stdIcon;
         var _loc8_:String = Main.gameXML.menu.menuButtons.@hoverIcon;
         var _loc9_:String = Main.gameXML.menu.menuButtons.@selectedIcon;
         for each(_loc10_ in Main.gameXML.menu.menuButtons.menuButton)
         {
            _loc13_ = int(_loc10_.@id);
            _loc14_ = String(_loc10_.@resKey);
            _loc15_ = null;
            _loc16_ = Main.parseBooleanFromString(_loc10_.@subAction);
            if(_loc10_.@languageKey.length() > 0)
            {
               _loc15_ = String(_loc10_.@languageKey);
            }
            _loc17_ = new MenuButton(_loc13_,_loc14_,_loc16_,_loc7_,_loc8_,_loc9_,this,_loc15_);
            this._menuButtons[_loc13_] = _loc17_;
            _loc1_ = this.menuSlots[_loc6_];
            _loc1_.addMenu(_loc17_);
            _loc6_++;
         }
         this.dragger = MovieClip(_loc5_.getEmbededMovieClip("dragger"));
         this.dragger.x = -7;
         this.dragger.x += this.menuManager.getSlotWidth() / 2;
         this.dragger.y = -14;
         this.dragger.buttonMode = true;
         this.dragger.gotoAndStop(1);
         this.dragger.addEventListener(MouseEvent.MOUSE_DOWN,this.onMenuDragger);
         this.dragger.addEventListener(MouseEvent.MOUSE_OVER,this.onMouseOverDragger);
         this.dragger.addEventListener(MouseEvent.MOUSE_OUT,this.onMouseOutDragger);
         this.addChild(this.dragger);
         this.dragger.visible = false;
         this.lock = MovieClip(_loc5_.getEmbededMovieClip("lock"));
         this.lock.buttonMode = true;
         this.lock.gotoAndStop(1);
         this.lock.addEventListener(MouseEvent.MOUSE_DOWN,this.onQuickMenuLock);
         this.lock.addEventListener(MouseEvent.MOUSE_OVER,this.onMouseOverLock);
         this.lock.addEventListener(MouseEvent.MOUSE_OUT,this.onMouseOutLock);
         this.lock.x = -3;
         this.lock.y = 8;
         this.addChild(this.lock);
         _loc11_ = PatternManager.resolutionPatterns[Settings.resolutionID];
         _loc12_ = _loc11_.getMainMenuPosition();
         if(_loc12_ != null)
         {
            this.x = _loc12_.x;
            this.y = _loc12_.y;
         }
         this.menuManager.updateAmmunitionDisplay();
         this.timer = new Timer(250,0);
         this.timer.addEventListener(TimerEvent.TIMER,this.onTimerTick);
      }
      
      private function onMouseOverRightScrollButton(param1:MouseEvent) : void
      {
         this.scrollRightMC.gotoAndStop(2);
      }
      
      private function onMouseOutRightScrollButton(param1:MouseEvent) : void
      {
         this.scrollRightMC.gotoAndStop(1);
      }
      
      private function onMouseOverLeftScrollButton(param1:MouseEvent) : void
      {
         this.scrollLeftMC.gotoAndStop(2);
      }
      
      private function onMouseOutLeftScrollButton(param1:MouseEvent) : void
      {
         this.scrollLeftMC.gotoAndStop(1);
      }
      
      private function onMouseOverDragger(param1:MouseEvent) : void
      {
         this.dragger.gotoAndStop(2);
      }
      
      private function onMouseOutDragger(param1:MouseEvent) : void
      {
         this.dragger.gotoAndStop(1);
      }
      
      public function setPoolSlotVisibility(param1:Boolean) : void
      {
         if(param1)
         {
            this.poolSubContainer.x = 0;
         }
         this.poolContainer.visible = param1;
         this.updateScrollButtons();
         this.menuManager.updateSelectableButtons();
         this.menuManager.updateAllButtonAmounts();
      }
      
      public function updateScrollButtons() : void
      {
         var _loc1_:int = 0;
         var _loc2_:ButtonSlot = null;
         var _loc3_:MenuButton = null;
         if(!this.poolContainer.visible)
         {
            this.scrollRightMC.visible = false;
            this.scrollLeftMC.visible = false;
         }
         else
         {
            this.scrollRightMC.visible = true;
            this.scrollLeftMC.visible = true;
            if(this.poolSubContainer.x < 0)
            {
               this.scrollLeftMC.visible = true;
            }
            else
            {
               this.scrollLeftMC.visible = false;
            }
            _loc1_ = 0;
            for each(_loc2_ in this.poolSlots)
            {
               if(_loc2_.isAllocated())
               {
                  _loc1_++;
                  _loc2_.getMC().visible = true;
               }
               else
               {
                  _loc2_.getMC().visible = false;
               }
            }
            for each(_loc3_ in this._menuButtons)
            {
               if(_loc3_.isPreselected() && _loc3_.hasSubAction())
               {
                  _loc1_--;
                  break;
               }
            }
            if(_loc1_ * this.menuManager.getSlotWidth() + this.menuManager.getGap() + this.poolSubContainer.x > this.maxVisiblePoolSlots * (this.menuManager.getSlotWidth() + this.menuManager.getGap()))
            {
               this.scrollRightMC.visible = true;
            }
            else
            {
               this.scrollRightMC.visible = false;
            }
         }
         this.scrollButtonsLocked = false;
         this.menuManager.updateSelectableButtons();
      }
      
      private function onScroolPoolLeft(param1:MouseEvent) : void
      {
         if(this.scrollButtonsLocked)
         {
            return;
         }
         this.scrollButtonsLocked = true;
         TweenLite.to(this.poolSubContainer,0.25,{
            "ease":Cubic.easeOut,
            "x":this.poolSubContainer.x + this.menuManager.getSlotWidth() + this.menuManager.getGap(),
            "onComplete":this.updateScrollButtons
         });
      }
      
      private function onScroolPoolRight(param1:MouseEvent) : void
      {
         if(this.scrollButtonsLocked)
         {
            return;
         }
         this.scrollButtonsLocked = true;
         TweenLite.to(this.poolSubContainer,0.25,{
            "ease":Cubic.easeOut,
            "x":this.poolSubContainer.x - this.menuManager.getSlotWidth() - this.menuManager.getGap(),
            "onComplete":this.updateScrollButtons
         });
      }
      
      private function onMenuDragger(param1:MouseEvent) : void
      {
         this.startDrag();
      }
      
      public function getVisibleCountGap() : int
      {
         var _loc2_:MenuButton = null;
         var _loc1_:int = 1;
         for each(_loc2_ in this._menuButtons)
         {
            if(_loc2_.isPreselected() && _loc2_.hasSubAction())
            {
               _loc1_--;
               break;
            }
         }
         return _loc1_ * this.menuManager.getSlotWidth() + this.menuManager.getGap() + this.poolSubContainer.x;
      }
      
      private function onMouseDownRight(param1:MouseEvent) : void
      {
         this.lastScrollButton = 1;
         this.timer.start();
      }
      
      private function onMouseDownLeft(param1:MouseEvent) : void
      {
         this.lastScrollButton = 0;
         this.timer.start();
      }
      
      private function onTimerTick(param1:TimerEvent) : void
      {
         if(this.lastScrollButton == 0)
         {
            if(this.scrollLeftMC.visible)
            {
               this.onScroolPoolLeft(null);
            }
         }
         else if(this.lastScrollButton == 1)
         {
            if(this.scrollRightMC.visible)
            {
               this.onScroolPoolRight(null);
            }
         }
      }
      
      public function showMenuDragger() : void
      {
         this.dragger.visible = true;
      }
      
      public function hideMenuDragger() : void
      {
         this.dragger.visible = false;
      }
      
      public function getMenuButton(param1:int) : MenuButton
      {
         return this._menuButtons[param1];
      }
      
      public function getTimer() : Timer
      {
         return this.timer;
      }
      
      public function getPoolSlots() : Array
      {
         return this.poolSlots;
      }
      
      public function getSubActionSlot() : MovieClip
      {
         return this.subActionSlot;
      }
      
      public function getMenuManager() : MenuManager
      {
         return this.menuManager;
      }
      
      public function getMenuButtons() : Array
      {
         return this._menuButtons;
      }
      
      private function onMouseOverLock(param1:MouseEvent) : void
      {
         if(this._guiLocked)
         {
            this.lock.gotoAndStop(2);
         }
         else
         {
            this.lock.gotoAndStop(4);
         }
      }
      
      private function onMouseOutLock(param1:MouseEvent) : void
      {
         if(this._guiLocked)
         {
            this.lock.gotoAndStop(1);
         }
         else
         {
            this.lock.gotoAndStop(3);
         }
      }
      
      private function onQuickMenuLock(param1:MouseEvent) : void
      {
         if(this._guiLocked)
         {
            this._guiLocked = false;
            this.lock.gotoAndStop(4);
            this.menuManager.getMainMenu().showMenuDragger();
            this.menuManager.getQuickMenu().showMenuDragger();
            this.menuManager.getQuickMenu().showSlots();
            this.menuManager.addOnMouseUpListeners();
            this.createGrid();
         }
         else if(!this._guiLocked)
         {
            this._guiLocked = true;
            this.lock.gotoAndStop(2);
            this.menuManager.getMainMenu().hideMenuDragger();
            this.menuManager.getQuickMenu().hideMenuDragger();
            this.menuManager.getQuickMenu().hideSlots();
            this.menuManager.removeOnMouseUpListeners();
            this.removeGrid();
         }
      }
      
      private function createGrid() : void
      {
         var _loc4_:SimpleWindow = null;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc1_:int = 1;
         if(this.grid == null)
         {
            this.grid = new Sprite();
            this.grid.graphics.lineStyle(_loc1_,16777215);
            _loc5_ = 0;
            while(_loc5_ < ScreenManager.getScreenHeight() / Settings.gridSize)
            {
               this.grid.graphics.moveTo(0,_loc5_ * Settings.gridSize);
               this.grid.graphics.lineTo(2000,_loc5_ * Settings.gridSize);
               _loc5_++;
            }
            _loc6_ = 0;
            while(_loc6_ < ScreenManager.getScreenWidth() / Settings.gridSize)
            {
               this.grid.graphics.moveTo(_loc6_ * Settings.gridSize,0);
               this.grid.graphics.lineTo(_loc6_ * Settings.gridSize,2000);
               _loc6_++;
            }
            this.grid.mouseEnabled = false;
            this.grid.mouseChildren = false;
         }
         var _loc2_:Sprite = ScreenManager.getWindowLayer();
         this.grid.alpha = 0;
         _loc2_.addChildAt(this.grid,0);
         TweenLite.to(this.grid,0.5,{"alpha":0.3});
         var _loc3_:Array = this.menuManager.getGuiManager().getWindows();
         for each(_loc4_ in _loc3_)
         {
            _loc4_.createFullDragger();
         }
      }
      
      private function removeGrid() : void
      {
         var _loc2_:SimpleWindow = null;
         if(this.grid != null)
         {
            TweenLite.to(this.grid,0.25,{
               "alpha":0,
               "onComplete":this.grid.parent.removeChild,
               "onCompleteParams":[this.grid]
            });
         }
         var _loc1_:Array = this.menuManager.getGuiManager().getWindows();
         for each(_loc2_ in _loc1_)
         {
            _loc2_.removeFullDragger();
         }
      }
      
      public function get guiLocked() : Boolean
      {
         return this._guiLocked;
      }
      
      public function set guiLocked(param1:Boolean) : void
      {
         this._guiLocked = param1;
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.utils.Dictionary;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.AmmoPrice;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.InGameCatalog;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.catalog.SpecialAmmunition;
   import net.bigpoint.darkorbit.combat.LaserAttackJob;
   import net.bigpoint.darkorbit.combat.RocketPattern;
   import net.bigpoint.darkorbit.gui.ActionEvent;
   import net.bigpoint.darkorbit.gui.ButtonSlot;
   import net.bigpoint.darkorbit.gui.CPUItem;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.MenuButton;
   import net.bigpoint.darkorbit.gui.TechCooldown;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.net.models.SkillDesignsModel;
   import net.bigpoint.darkorbit.net.models.TechModel;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignItem;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignNames;
   import net.bigpoint.darkorbit.net.models.techs.TechItem;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   
   public class MenuManager extends Sprite
   {
      
      public static const logger:ILogger = Log.getLogger("MenuManager");
      
      private static var buttonBlacklist:Dictionary = new Dictionary();
      
      private static var menuButtonBlacklist:Dictionary = new Dictionary();
      
      private static var menuBlacklist:Dictionary = new Dictionary();
      
      private var guiManager:GuiManager;
      
      private var mainMenu:MainMenu;
      
      private var quickMenu:QuickMenu;
      
      private var actionSlotCount:int;
      
      private var gap:int;
      
      private var slotWidth:int;
      
      private var slotHeight:int;
      
      public var actionButtons:Array = [];
      
      public var actionButtonsWithCooldowns:Array = [];
      
      public var actionButtonPatterns:Array = [];
      
      private var flashingButtons:Array = [];
      
      public var rocketIDToButtonID:Dictionary = new Dictionary();
      
      public var buttonIDToRocketID:Dictionary = new Dictionary();
      
      private var lastClickedButtonID:int;
      
      public var buttonIDToTechID:Dictionary = new Dictionary();
      
      public var techIDToButtonID:Array = [];
      
      public var buttonIDToSkillDesignID:Dictionary = new Dictionary();
      
      public var skillDesignIDTobuttonID:Dictionary = new Dictionary();
      
      public var skillDesignButtonsArray:Array = [];
      
      public function MenuManager(param1:GuiManager)
      {
         super();
         this.guiManager = param1;
         this.initButtonBlacklist();
         this.initMenuButtonBlacklist();
         this.getGuiManager().getMain().stage.addEventListener(MouseEvent.MOUSE_UP,this.handleMouseUp);
         this.init();
         this.quickMenu = new QuickMenu(this);
         this.quickMenu.init();
         this.addChild(this.quickMenu);
         TooltipControl.getInstance().addStickyToolTip(this.quickMenu,BPLocale.getText("httip_quickmenu"),param1.getMain().x,-80 + param1.getMain().y);
         this.mainMenu = new MainMenu(this);
         this.mainMenu.init();
         this.addChild(this.mainMenu);
         TooltipControl.getInstance().addStickyToolTip(this.mainMenu,BPLocale.getText("httip_mainmenu"),param1.getMain().x - 130,param1.getMain().y,600);
      }
      
      public function registerFlashingButton(param1:int, param2:Boolean) : void
      {
         this.flashingButtons[param1] = param2;
      }
      
      public function unregisterFlashingButton(param1:int) : void
      {
         delete this.flashingButtons[param1];
      }
      
      public function updateRegisteredFlashingButtons() : void
      {
         var _loc1_:int = 0;
         var _loc2_:String = null;
         for(_loc2_ in this.flashingButtons)
         {
            _loc1_ = int(_loc2_);
            this.guiManager.getMenuManager().flashButtonIcon(_loc1_,-1,this.flashingButtons[_loc1_]);
            this.guiManager.getTopMenu().flashButtonIcon(this.flashingButtons[_loc1_],-1,this.flashingButtons[_loc1_]);
         }
      }
      
      private function initButtonBlacklist() : void
      {
      }
      
      public function addButtonToBlacklist(param1:int) : void
      {
         buttonBlacklist[param1] = 1;
         this.updateSelectedMenu();
         this.quickMenu.refreshQuickmenu();
         this.guiManager.getTopMenu().refresh();
      }
      
      public function removeButtonFromBlacklist(param1:int) : void
      {
         buttonBlacklist[param1] = null;
         this.updateSelectedMenu();
         this.quickMenu.refreshQuickmenu();
         this.guiManager.getTopMenu().refresh();
      }
      
      public function isButtonBlacklisted(param1:int) : Boolean
      {
         if(buttonBlacklist[param1] != null)
         {
            return true;
         }
         return false;
      }
      
      private function initMenuButtonBlacklist() : void
      {
      }
      
      public function addMenuButtonToBlacklist(param1:int) : void
      {
         menuButtonBlacklist[param1] = 1;
         var _loc2_:MenuButton = this.getMainMenu().getMenuButton(param1);
         if(_loc2_ != null)
         {
            _loc2_.enabled = false;
         }
      }
      
      public function removeMenuButtonFromBlacklist(param1:int) : void
      {
         delete menuButtonBlacklist[param1];
         var _loc2_:MenuButton = this.getMainMenu().getMenuButton(param1);
         if(_loc2_ != null)
         {
            _loc2_.enabled = true;
         }
      }
      
      public function isMenuButtonBlacklisted(param1:int) : Boolean
      {
         if(menuButtonBlacklist[param1] != null)
         {
            return true;
         }
         return false;
      }
      
      public function addMenuToBlacklist(param1:String) : void
      {
         menuBlacklist[param1] = 1;
         this.updateMenuVisibility();
      }
      
      public function removeMenuFromBlacklist(param1:String) : void
      {
         delete menuBlacklist[param1];
         this.updateMenuVisibility();
      }
      
      public function isMenuBlacklisted(param1:String) : Boolean
      {
         if(menuBlacklist[param1] != null)
         {
            return true;
         }
         return false;
      }
      
      private function updateMenuVisibility() : void
      {
         if(this.isMenuBlacklisted("TOP"))
         {
            this.guiManager.getTopMenu().visible = false;
         }
         else
         {
            this.guiManager.getTopMenu().visible = true;
         }
         if(this.isMenuBlacklisted("MAIN"))
         {
            this.mainMenu.visible = false;
         }
         else
         {
            this.mainMenu.visible = true;
         }
         if(this.isMenuBlacklisted("QUICK"))
         {
            this.quickMenu.visible = false;
         }
         else
         {
            this.quickMenu.visible = true;
         }
      }
      
      public function updateSelectedMenu() : void
      {
         var _loc2_:MenuButton = null;
         var _loc1_:Array = this.mainMenu.getMenuButtons();
         for each(_loc2_ in _loc1_)
         {
            if(_loc2_.isSelected())
            {
               _loc2_.updateButtonsInPool();
            }
         }
      }
      
      public function updateAllCPUButtons() : void
      {
         var _loc1_:MenuButton = this.mainMenu.getMenuButton(3);
         if(_loc1_.isSelected())
         {
            _loc1_.updateButtonsInPool();
         }
         this.guiManager.getMenuManager().getQuickMenu().updateCPUButtonsInSlotMenu();
      }
      
      private function handleMouseUp(param1:MouseEvent) : void
      {
         this.mainMenu.onMouseUp();
         this.quickMenu.onMouseUp();
      }
      
      public function updateTechs() : void
      {
         var _loc1_:TechModel = null;
         var _loc4_:ActionButton = null;
         var _loc5_:TechItem = null;
         var _loc6_:SkillDesignItem = null;
         _loc1_ = this.guiManager.techModel;
         var _loc2_:SkillDesignsModel = this.guiManager.skillDesignsModel;
         if(_loc1_ == null)
         {
            return;
         }
         var _loc3_:int = 0;
         while(_loc3_ < this.actionButtonsWithCooldowns.length)
         {
            _loc4_ = this.actionButtonsWithCooldowns[_loc3_];
            switch(_loc4_.cooldownButtonType)
            {
               case ActionButton.COOLDOWN_TYPE_TECH:
                  _loc5_ = _loc1_.techs[this.buttonIDToTechID[_loc4_.actionID]];
                  if(_loc5_ != null)
                  {
                     this.updateButtonForTechID(_loc4_,_loc5_);
                     _loc4_.changeRemainingTechAmount(_loc5_.amount);
                     this.checkActionButtonCooldown(_loc4_,ActionButton.COOLDOWN_TYPE_TECH);
                  }
                  break;
               case ActionButton.COOLDOWN_TYPE_SKILL:
                  if(_loc2_ != null)
                  {
                     _loc6_ = _loc2_.skillDesigns[this.buttonIDToSkillDesignID[_loc4_.actionID]];
                     if(_loc6_ != null)
                     {
                        this.updateButtonForSkillDesign(_loc4_,_loc6_);
                        this.checkActionButtonCooldown(_loc4_,ActionButton.COOLDOWN_TYPE_SKILL);
                     }
                  }
            }
            _loc3_++;
         }
      }
      
      private function updateButtonForSkillDesign(param1:ActionButton, param2:SkillDesignItem) : void
      {
         param1.updateTechTooltip(param2);
         if(!param2.equipped)
         {
            param1.lockButton();
            param1.toggleTechActiveLayer(false);
            return;
         }
         if(param2.status == SkillDesignItem.STATE_ACTIVE)
         {
            param1.setTechActiveTimer(param2.secondsLeft,param2);
            param1.toggleTechActiveLayer(true);
            param1.lockButton();
         }
         else if(param2.status == SkillDesignItem.STATE_READY)
         {
            param1.toggleTechActiveLayer(false);
            param1.unlockButton();
         }
         else if(param2.status == SkillDesignItem.STATE_COOLING)
         {
            param1.lockButton();
            param1.toggleTechActiveLayer(false);
         }
      }
      
      private function updateButtonForTechID(param1:ActionButton, param2:TechItem) : void
      {
         param1.updateTechTooltip(param2);
         switch(param2.status)
         {
            case TechItem.STATE_ACTIVE:
               param1.setTechActiveTimer(param2.secondsLeft,param2);
               param1.toggleTechActiveLayer(true);
               break;
            case TechItem.STATE_INACTIVE:
               param1.toggleTechActiveLayer(false);
               param1.lockButton();
               break;
            case TechItem.STATE_DEFAULT:
               param1.toggleTechActiveLayer(false);
               param1.lockButton();
               break;
            case TechItem.STATE_READY:
               param1.toggleTechActiveLayer(false);
               param1.unlockButton();
         }
      }
      
      private function checkActionButtonCooldown(param1:ActionButton, param2:String) : void
      {
         var _loc3_:TechModel = null;
         var _loc4_:SkillDesignsModel = null;
         var _loc5_:TechCooldown = null;
         var _loc6_:TechItem = null;
         var _loc7_:SkillDesignItem = null;
         _loc3_ = this.guiManager.techModel;
         _loc4_ = this.guiManager.skillDesignsModel;
         switch(param2)
         {
            case ActionButton.COOLDOWN_TYPE_TECH:
               _loc5_ = _loc3_.cooldowns[this.buttonIDToTechID[param1.actionID]];
               _loc6_ = _loc3_.techs[this.buttonIDToTechID[param1.actionID]];
               if(_loc5_.seconds != 0)
               {
                  this.setActionButtonCooldownGeneric(_loc6_,param1,_loc5_.seconds,_loc5_.startingTime,true);
               }
               break;
            case ActionButton.COOLDOWN_TYPE_SKILL:
               _loc5_ = _loc4_.cooldowns[this.buttonIDToSkillDesignID[param1.actionID]];
               _loc7_ = _loc4_.skillDesigns[this.buttonIDToSkillDesignID[param1.actionID]];
               if(_loc5_.seconds != 0)
               {
                  this.setActionButtonCooldownGeneric(_loc7_,param1,_loc5_.seconds,_loc5_.startingTime,true);
               }
         }
      }
      
      private function checkActionButtonCooldowns(param1:TechModel) : void
      {
         var _loc4_:TechCooldown = null;
         var _loc2_:int = param1.NUMBER_OF_TECHS;
         var _loc3_:int = 1;
         while(_loc3_ <= _loc2_)
         {
            _loc4_ = param1.cooldowns[_loc3_];
            if(_loc4_.seconds != 0)
            {
               this.setActionButtonCooldown(_loc4_.techID,_loc4_.seconds,_loc4_.startingTime,true);
            }
            _loc3_++;
         }
      }
      
      public function setActionButtonCooldownGeneric(param1:IAbilityItem, param2:ActionButton, param3:int, param4:int = 0, param5:Boolean = false) : void
      {
         if(!param2.isRunningCooldown)
         {
            if(param5 == false)
            {
               param2.setCooldown(0,param1,param3,param3,true);
            }
            else
            {
               param2.setCooldown(0,param1,param3,param4,true);
            }
         }
      }
      
      public function setActionButtonCooldown(param1:int, param2:int, param3:int = 0, param4:Boolean = false) : void
      {
         var _loc8_:ActionButton = null;
         var _loc5_:int = int(this.techIDToButtonID[param1]);
         var _loc6_:TechItem = this.guiManager.techModel.techs[param1];
         var _loc7_:int = 0;
         while(_loc7_ < this.actionButtons.length)
         {
            _loc8_ = this.actionButtons[_loc7_];
            if(_loc8_.getID() == _loc5_ && !_loc8_.isRunningCooldown)
            {
               if(param4 == false)
               {
                  _loc8_.setCooldown(0,_loc6_,param2,param2,true);
               }
               else
               {
                  _loc8_.setCooldown(0,_loc6_,param2,param3,true);
               }
            }
            _loc7_++;
         }
      }
      
      private function init() : void
      {
         var _loc3_:XML = null;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:String = null;
         var _loc7_:String = null;
         var _loc8_:XMLList = null;
         var _loc9_:XML = null;
         var _loc10_:int = 0;
         var _loc11_:String = null;
         var _loc12_:String = null;
         var _loc13_:ActionButtonPattern = null;
         var _loc14_:XML = null;
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         var _loc2_:Bitmap = _loc1_.getEmbededBitmap("slot");
         this.slotWidth = _loc2_.width;
         this.slotHeight = _loc2_.height;
         this.gap = int(Main.gameXML.menu.@gap);
         this.actionSlotCount = int(Main.gameXML.menu.@actionSlots);
         this.rocketIDToButtonID[RocketPattern.R310] = SuperActionButton.SELECTION_ROCKET_R_310;
         this.rocketIDToButtonID[RocketPattern.PLT_2026] = SuperActionButton.SELECTION_ROCKET_PLT_2026;
         this.rocketIDToButtonID[RocketPattern.PLT_2021] = SuperActionButton.SELECTION_ROCKET_PLT_2021;
         this.rocketIDToButtonID[RocketPattern.PLT_3030] = SuperActionButton.SELECTION_ROCKET_PLT_3030;
         this.rocketIDToButtonID[RocketPattern.PLD_8] = SuperActionButton.SELECTION_ROCKET_PLD_8;
         this.rocketIDToButtonID[RocketPattern.DCR_250] = SuperActionButton.SELECTION_ROCKET_DCR_250;
         this.rocketIDToButtonID[RocketPattern.WIZ] = SuperActionButton.SELECTION_ROCKET_WIZ;
         this.rocketIDToButtonID[RocketPattern.HSTRM01] = SuperActionButton.SELECTION_LAUNCHER_ROCKET_HST01;
         this.rocketIDToButtonID[RocketPattern.ECO10] = SuperActionButton.SELECTION_LAUNCHER_ROCKET_ECO10;
         this.rocketIDToButtonID[RocketPattern.UBR100] = SuperActionButton.SELECTION_LAUNCHER_ROCKET_UBR100;
         this.rocketIDToButtonID[RocketPattern.TYPE_ROCKET_LAUNCHER] = SuperActionButton.SELECTION_LOAD_ROCKET_LAUNCHER;
         this.buttonIDToRocketID[SuperActionButton.SELECTION_ROCKET_R_310] = RocketPattern.R310;
         this.buttonIDToRocketID[SuperActionButton.SELECTION_ROCKET_PLT_2026] = RocketPattern.PLT_2026;
         this.buttonIDToRocketID[SuperActionButton.SELECTION_ROCKET_PLT_2021] = RocketPattern.PLT_2021;
         this.buttonIDToRocketID[SuperActionButton.SELECTION_ROCKET_PLT_3030] = RocketPattern.PLT_3030;
         this.buttonIDToRocketID[SuperActionButton.SELECTION_ROCKET_PLD_8] = RocketPattern.PLD_8;
         this.buttonIDToRocketID[SuperActionButton.SELECTION_ROCKET_DCR_250] = RocketPattern.DCR_250;
         this.buttonIDToRocketID[SuperActionButton.SELECTION_ROCKET_WIZ] = RocketPattern.WIZ;
         this.buttonIDToRocketID[SuperActionButton.SELECTION_LAUNCHER_ROCKET_HST01] = RocketPattern.HSTRM01;
         this.buttonIDToRocketID[SuperActionButton.SELECTION_LAUNCHER_ROCKET_ECO10] = RocketPattern.ECO10;
         this.buttonIDToRocketID[SuperActionButton.SELECTION_LAUNCHER_ROCKET_UBR100] = RocketPattern.UBR100;
         this.buttonIDToRocketID[SuperActionButton.SELECTION_LOAD_ROCKET_LAUNCHER] = RocketPattern.TYPE_ROCKET_LAUNCHER;
         this.buttonIDToTechID[SuperActionButton.ACTIVATION_CHAIN_BOLT] = TechItem.TYPE_ENERGY_CHAIN_IMPULSE;
         this.buttonIDToTechID[SuperActionButton.ACTIVATION_ENERGY_LEECH] = TechItem.TYPE_ENERGY_LEECH_ARRAY;
         this.buttonIDToTechID[SuperActionButton.ACTIVATION_ROCKET_PRECISION] = TechItem.TYPE_ROCKET_PROBABILITY_MAXIMIZER;
         this.buttonIDToTechID[SuperActionButton.ACTIVATION_SHIELD_BACKUP] = TechItem.TYPE_SHIELD_BACKUP;
         this.buttonIDToTechID[SuperActionButton.ACTIVATION_SPEED_LEECH] = TechItem.TYPE_SPEED_LEECH;
         this.buttonIDToTechID[SuperActionButton.ACTIVATION_BATTLE_REP_BOT] = TechItem.TYPE_BATTLE_REPAIR_BOT;
         this.techIDToButtonID[TechItem.TYPE_ENERGY_CHAIN_IMPULSE] = SuperActionButton.ACTIVATION_CHAIN_BOLT;
         this.techIDToButtonID[TechItem.TYPE_ENERGY_LEECH_ARRAY] = SuperActionButton.ACTIVATION_ENERGY_LEECH;
         this.techIDToButtonID[TechItem.TYPE_ROCKET_PROBABILITY_MAXIMIZER] = SuperActionButton.ACTIVATION_ROCKET_PRECISION;
         this.techIDToButtonID[TechItem.TYPE_SHIELD_BACKUP] = SuperActionButton.ACTIVATION_SHIELD_BACKUP;
         this.techIDToButtonID[TechItem.TYPE_SPEED_LEECH] = SuperActionButton.ACTIVATION_SPEED_LEECH;
         this.techIDToButtonID[TechItem.TYPE_BATTLE_REPAIR_BOT] = SuperActionButton.ACTIVATION_BATTLE_REP_BOT;
         this.buttonIDToSkillDesignID[SuperActionButton.ACTIVATION_SKILL_SOLACE] = SkillDesignNames.SHIP_SKILL_SOLACE;
         this.buttonIDToSkillDesignID[SuperActionButton.ACTIVATION_SKILL_DIMINISHER] = SkillDesignNames.SHIP_SKILL_DIMINISHER;
         this.buttonIDToSkillDesignID[SuperActionButton.ACTIVATION_SKILL_SPECTRUM] = SkillDesignNames.SHIP_SKILL_SPECTRUM;
         this.buttonIDToSkillDesignID[SuperActionButton.ACTIVATION_SKILL_SENTINEL] = SkillDesignNames.SHIP_SKILL_SENTINEL;
         this.buttonIDToSkillDesignID[SuperActionButton.ACTIVATION_SKILL_VENOM] = SkillDesignNames.SHIP_SKILL_VENOM;
         this.buttonIDToSkillDesignID[SuperActionButton.ACTIVATION_SKILL_LIGHNTING] = SkillDesignNames.SHIP_SKILL_LIGHTNING;
         this.skillDesignIDTobuttonID[SkillDesignNames.SHIP_SKILL_SOLACE] = SuperActionButton.ACTIVATION_SKILL_SOLACE;
         this.skillDesignIDTobuttonID[SkillDesignNames.SHIP_SKILL_DIMINISHER] = SuperActionButton.ACTIVATION_SKILL_DIMINISHER;
         this.skillDesignIDTobuttonID[SkillDesignNames.SHIP_SKILL_SPECTRUM] = SuperActionButton.ACTIVATION_SKILL_SPECTRUM;
         this.skillDesignIDTobuttonID[SkillDesignNames.SHIP_SKILL_SENTINEL] = SuperActionButton.ACTIVATION_SKILL_SENTINEL;
         this.skillDesignIDTobuttonID[SkillDesignNames.SHIP_SKILL_VENOM] = SuperActionButton.ACTIVATION_SKILL_VENOM;
         this.skillDesignIDTobuttonID[SkillDesignNames.SHIP_SKILL_LIGHTNING] = SuperActionButton.ACTIVATION_SKILL_LIGHNTING;
         this.lastClickedButtonID = this.rocketIDToButtonID[Settings.selectedRocket];
         for each(_loc3_ in Main.gameXML.menu.menuButtons.menuButton)
         {
            _loc4_ = int(_loc3_.@id);
            _loc5_ = _loc3_.actionButtons.@stdIcon;
            _loc6_ = _loc3_.actionButtons.@hoverIcon;
            _loc7_ = _loc3_.actionButtons.@selectedIcon;
            if(_loc3_.actionButtons.activateButton.length() == 1)
            {
               _loc9_ = _loc3_.actionButtons.activateButton[0];
               _loc10_ = int(_loc9_.@id);
               _loc11_ = _loc9_.@resKey;
               _loc12_ = _loc9_.@languageKey;
               _loc13_ = new ActionButtonPattern(_loc10_,_loc4_,_loc11_,_loc5_,_loc6_,_loc7_,_loc12_,null,true);
               if(_loc9_.@customizable.length() > 0)
               {
                  _loc13_.isCustomizable = Main.parseBooleanFromString(_loc9_.@customizable);
               }
               this.actionButtonPatterns.push(_loc13_);
            }
            if(_loc3_.actionButtons.section.length() > 0)
            {
               for each(_loc14_ in _loc3_.actionButtons.section)
               {
                  _loc8_ = _loc14_.actionButton;
                  this.parseAndAddButtonPatterns(_loc8_,_loc4_,_loc5_,_loc6_,_loc7_,String(_loc14_.@id));
               }
            }
            else
            {
               _loc8_ = _loc3_.actionButtons.actionButton;
               this.parseAndAddButtonPatterns(_loc8_,_loc4_,_loc5_,_loc6_,_loc7_);
            }
         }
      }
      
      private function parseAndAddButtonPatterns(param1:XMLList, param2:int, param3:String, param4:String, param5:String, param6:String = null) : void
      {
         var _loc7_:XML = null;
         var _loc8_:int = 0;
         var _loc9_:String = null;
         var _loc10_:String = null;
         var _loc11_:ActionButtonPattern = null;
         for each(_loc7_ in param1)
         {
            _loc8_ = int(_loc7_.@id);
            _loc9_ = _loc7_.@resKey;
            if(_loc7_.@languageKey.length() > 0)
            {
               _loc10_ = _loc7_.@languageKey;
            }
            _loc11_ = new ActionButtonPattern(_loc8_,param2,_loc9_,param3,param4,param5,_loc10_,param6);
            if(_loc7_.@ammobar.length() > 0)
            {
               _loc11_.setAmmobar(Main.parseBooleanFromString(_loc7_.@ammobar));
            }
            if(_loc7_.@alwaysExist.length() > 0)
            {
               _loc11_.setAlwaysExist(Main.parseBooleanFromString(_loc7_.@alwaysExist));
            }
            if(_loc7_.@counter.length() > 0)
            {
               _loc11_.setCounter(Main.parseBooleanFromString(_loc7_.@counter));
            }
            if(_loc7_.@active.length() > 0)
            {
               _loc11_.isActiveAtStart = Main.parseBooleanFromString(_loc7_.@active);
            }
            if(_loc7_.@cooldown.length() > 0)
            {
               _loc11_.setCooldown(Main.parseBooleanFromString(_loc7_.@cooldown));
            }
            if(_loc7_.@customizable.length() > 0)
            {
               _loc11_.isCustomizable = Main.parseBooleanFromString(_loc7_.@customizable);
            }
            this.actionButtonPatterns.push(_loc11_);
         }
      }
      
      public function addOnMouseUpListeners() : void
      {
         var _loc2_:ActionButton = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.actionButtons.length)
         {
            _loc2_ = this.actionButtons[_loc1_];
            _loc2_.addMouseUpListener();
            _loc1_++;
         }
      }
      
      public function removeOnMouseUpListeners() : void
      {
         var _loc2_:ActionButton = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.actionButtons.length)
         {
            _loc2_ = this.actionButtons[_loc1_];
            _loc2_.removeMouseUpListener();
            _loc1_++;
         }
      }
      
      public function getParentSlot(param1:ActionButton) : ButtonSlot
      {
         var _loc3_:ButtonSlot = null;
         var _loc4_:ActionButton = null;
         var _loc2_:Array = this.mainMenu.getPoolSlots();
         for each(_loc3_ in _loc2_)
         {
            _loc4_ = _loc3_.getActionButton();
            if(_loc4_ != null && _loc4_ == param1)
            {
               return _loc3_;
            }
         }
         return null;
      }
      
      public function setButtonLabel(param1:int, param2:int) : void
      {
         var _loc4_:ActionButton = null;
         var _loc3_:int = 0;
         while(_loc3_ < this.actionButtons.length)
         {
            _loc4_ = this.actionButtons[_loc3_];
            if(_loc4_.getID() == param1)
            {
               if(!_loc4_.isTechButton)
               {
                  if(_loc4_.containsNumbersContainer())
                  {
                     _loc4_.setCount(param2);
                  }
                  if(_loc4_.hasAmmobar())
                  {
                     _loc4_.updateAmmoMaxValue();
                     _loc4_.setAmmobar(param2);
                  }
               }
               _loc4_.updateTooltip();
            }
            _loc3_++;
         }
      }
      
      public function updateAmmunitionDisplay() : void
      {
         var _loc2_:ActionButton = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.actionButtons.length)
         {
            _loc2_ = this.actionButtons[_loc1_];
            _loc2_.updateAmmunitionDisplay();
            _loc1_++;
         }
      }
      
      public function setIconIndex(param1:int, param2:int = 0) : void
      {
         var _loc4_:ActionButton = null;
         var _loc3_:int = 0;
         while(_loc3_ < this.actionButtons.length)
         {
            _loc4_ = this.actionButtons[_loc3_];
            if(_loc4_.getID() == param1 && param2 > 0)
            {
               _loc4_.setIcon(param2);
               _loc4_.unlockButton();
               if(_loc4_.containsNumbersContainer())
               {
                  _loc4_.setCounterVisibility(true);
               }
            }
            _loc3_++;
         }
      }
      
      public function invalidateCPUButtons() : void
      {
         var _loc12_:int = 0;
         var _loc14_:Map = null;
         var _loc15_:Ship = null;
         var _loc1_:CPUItem = Hero.cpuItems[CPUItem.TYPE_JUMP];
         var _loc2_:CPUItem = Hero.cpuItems[CPUItem.TYPE_CLOAK];
         var _loc3_:CPUItem = Hero.cpuItems[CPUItem.TYPE_AROL];
         var _loc4_:CPUItem = Hero.cpuItems[CPUItem.TYPE_RLLB];
         var _loc5_:CPUItem = Hero.cpuItems[CPUItem.TYPE_ROBOT];
         var _loc6_:CPUItem = Hero.cpuItems[CPUItem.TYPE_AIM];
         var _loc7_:CPUItem = Hero.cpuItems[CPUItem.TYPE_HM7];
         var _loc8_:CPUItem = Hero.cpuItems[CPUItem.TYPE_DRONE_REPAIR];
         var _loc9_:CPUItem = Hero.cpuItems[CPUItem.TYPE_AMMOBUY];
         var _loc10_:CPUItem = Hero.cpuItems[CPUItem.TYPE_ROCKETBUY];
         var _loc11_:CPUItem = Hero.cpuItems[CPUItem.TYPE_ADVANCED_JUMP];
         var _loc13_:int = 3;
         if(_loc1_ != null)
         {
            _loc12_ = _loc1_.level;
            this.setIconIndex(SuperActionButton.ACTIVATION_CPU_JUMP,_loc12_);
            this.setButtonLabel(SuperActionButton.ACTIVATION_CPU_JUMP,_loc1_.amount);
         }
         if(_loc11_ != null)
         {
            _loc12_ = _loc11_.level;
            this.setIconIndex(SuperActionButton.SELECT_CPU_JUMP_TARGET,_loc12_);
            this.setButtonLabel(SuperActionButton.SELECT_CPU_JUMP_TARGET,_loc11_.amount);
         }
         if(_loc2_ != null)
         {
            _loc12_ = 1;
            this.setIconIndex(SuperActionButton.ACTIVATION_CPU_CLOAK,_loc12_);
            this.setButtonLabel(SuperActionButton.ACTIVATION_CPU_CLOAK,_loc2_.amount);
            _loc14_ = this.guiManager.getMain().screenManager.map;
            if(_loc14_ != null)
            {
               _loc15_ = _loc14_.getShipManager().getHero();
               if(_loc15_ != null)
               {
                  if(_loc15_.isInvisible())
                  {
                     this.setButtonAccess(SuperActionButton.ACTIVATION_CPU_CLOAK,false);
                     this.setButtonSelected(SuperActionButton.ACTIVATION_CPU_CLOAK,true);
                  }
                  else
                  {
                     this.setButtonAccess(SuperActionButton.ACTIVATION_CPU_CLOAK,true);
                     this.setButtonSelected(SuperActionButton.ACTIVATION_CPU_CLOAK,false);
                  }
               }
            }
         }
         if(_loc3_ != null)
         {
            _loc12_ = _loc3_.level;
            this.setIconIndex(SuperActionButton.ACTIVATION_CPU_AROL,_loc12_);
            this.setButtonLabel(SuperActionButton.ACTIVATION_CPU_AROL,_loc3_.amount);
            this.togglePoolButton(SuperActionButton.ACTIVATION_CPU_AROL,_loc3_.state,_loc13_);
            this.toggleQuickstartButton(SuperActionButton.ACTIVATION_CPU_AROL,_loc3_.state);
         }
         if(_loc4_ != null)
         {
            _loc12_ = _loc4_.level;
            this.setIconIndex(SuperActionButton.ACTIVATION_CPU_RLLB,_loc12_);
            this.setButtonLabel(SuperActionButton.ACTIVATION_CPU_RLLB,_loc4_.amount);
            this.togglePoolButton(SuperActionButton.ACTIVATION_CPU_RLLB,_loc4_.state,_loc13_);
            this.toggleQuickstartButton(SuperActionButton.ACTIVATION_CPU_RLLB,_loc4_.state);
         }
         if(_loc5_ != null)
         {
            _loc12_ = _loc5_.level;
            this.setIconIndex(SuperActionButton.ACTIVATION_CPU_ROBOT,_loc12_);
            this.setButtonLabel(SuperActionButton.ACTIVATION_CPU_ROBOT,_loc5_.amount);
         }
         if(_loc6_ != null)
         {
            _loc12_ = _loc6_.level;
            this.setIconIndex(SuperActionButton.ACTIVATION_CPU_AIM,_loc12_);
            this.setButtonLabel(SuperActionButton.ACTIVATION_CPU_AIM,_loc6_.amount);
            this.togglePoolButton(SuperActionButton.ACTIVATION_CPU_AIM,_loc6_.state,_loc13_);
            this.toggleQuickstartButton(SuperActionButton.ACTIVATION_CPU_AIM,_loc6_.state);
         }
         if(_loc7_ != null)
         {
            _loc12_ = _loc7_.level;
            this.setIconIndex(SuperActionButton.ACTIVATION_CPU_HM7,_loc12_);
            this.setButtonLabel(SuperActionButton.ACTIVATION_CPU_HM7,_loc7_.amount);
            this.togglePoolButton(SuperActionButton.ACTIVATION_CPU_HM7,_loc7_.state,_loc13_);
         }
         if(_loc8_ != null)
         {
            _loc12_ = _loc8_.level;
            this.setIconIndex(SuperActionButton.ACTIVATION_CPU_DRONE_REPAIR,_loc12_);
            this.setButtonLabel(SuperActionButton.ACTIVATION_CPU_DRONE_REPAIR,_loc8_.amount);
            this.togglePoolButton(SuperActionButton.ACTIVATION_CPU_DRONE_REPAIR,_loc8_.state,_loc13_);
         }
         if(_loc9_ != null)
         {
            _loc12_ = _loc9_.level;
            this.setIconIndex(SuperActionButton.ACTIVATION_CPU_AMMOBUY,_loc12_);
            this.setButtonLabel(SuperActionButton.ACTIVATION_CPU_AMMOBUY,_loc9_.amount);
            this.togglePoolButton(SuperActionButton.ACTIVATION_CPU_AMMOBUY,_loc9_.state,_loc13_);
         }
         if(_loc10_ != null)
         {
            _loc12_ = _loc10_.level;
            this.setButtonLabel(SuperActionButton.ACTIVATION_CPU_ROCKETBUY,_loc10_.amount);
            this.togglePoolButton(SuperActionButton.ACTIVATION_CPU_ROCKETBUY,true,_loc13_);
         }
      }
      
      public function updateAllButtonAmounts() : void
      {
         this.updateLaserButtonAmounts();
         this.updateRocketButtonAmounts();
         this.updateLauncherRocketButtonAmounts();
         this.updateExplosiveButtonAmmounts();
         this.updateFireworkButtonAmounts();
      }
      
      public function updateLaserButtonAmounts() : void
      {
         this.setButtonLabel(SuperActionButton.SELECTION_LASER_1,Hero.laserBatteryAmounts[0]);
         this.setButtonLabel(SuperActionButton.SELECTION_LASER_2,Hero.laserBatteryAmounts[1]);
         this.setButtonLabel(SuperActionButton.SELECTION_LASER_3,Hero.laserBatteryAmounts[2]);
         this.setButtonLabel(SuperActionButton.SELECTION_LASER_4,Hero.laserBatteryAmounts[3]);
         this.setButtonLabel(SuperActionButton.SELECTION_LASER_5,Hero.laserBatteryAmounts[4]);
         this.setButtonLabel(SuperActionButton.SELECTION_LASER_6,Hero.laserBatteryAmounts[5]);
      }
      
      public function updateTechButtonLabels() : void
      {
         this.setButtonLabel(SuperActionButton.ACTIVATION_ENERGY_LEECH,0);
         this.setButtonLabel(SuperActionButton.ACTIVATION_CHAIN_BOLT,0);
         this.setButtonLabel(SuperActionButton.ACTIVATION_ROCKET_PRECISION,0);
         this.setButtonLabel(SuperActionButton.ACTIVATION_SHIELD_BACKUP,0);
         this.setButtonLabel(SuperActionButton.ACTIVATION_SPEED_LEECH,0);
         this.setButtonLabel(SuperActionButton.ACTIVATION_BATTLE_REP_BOT,0);
      }
      
      public function updateRocketButtonAmounts() : void
      {
         this.setButtonLabel(SuperActionButton.SELECTION_ROCKET_R_310,Hero.rocketAmounts[RocketPattern.R310]);
         this.setButtonLabel(SuperActionButton.SELECTION_ROCKET_PLT_2026,Hero.rocketAmounts[RocketPattern.PLT_2026]);
         this.setButtonLabel(SuperActionButton.SELECTION_ROCKET_PLT_2021,Hero.rocketAmounts[RocketPattern.PLT_2021]);
         this.setButtonLabel(SuperActionButton.SELECTION_ROCKET_PLT_3030,Hero.rocketAmounts[RocketPattern.PLT_3030]);
         this.setButtonLabel(SuperActionButton.SELECTION_ROCKET_PLD_8,Hero.rocketAmounts[RocketPattern.PLD_8]);
         this.setButtonLabel(SuperActionButton.SELECTION_ROCKET_DCR_250,Hero.rocketAmounts[RocketPattern.DCR_250]);
         this.setButtonLabel(SuperActionButton.SELECTION_ROCKET_WIZ,Hero.rocketAmounts[RocketPattern.WIZ]);
      }
      
      public function updateLauncherRocketButtonAmounts() : void
      {
         this.setButtonLabel(SuperActionButton.SELECTION_LAUNCHER_ROCKET_HST01,Hero.rocketAmounts[RocketPattern.HSTRM01]);
         this.setButtonLabel(SuperActionButton.SELECTION_LAUNCHER_ROCKET_UBR100,Hero.rocketAmounts[RocketPattern.UBR100]);
         this.setButtonLabel(SuperActionButton.SELECTION_LAUNCHER_ROCKET_ECO10,Hero.rocketAmounts[RocketPattern.ECO10]);
      }
      
      public function updateExplosiveButtonAmmounts() : void
      {
         this.setButtonLabel(SuperActionButton.SELECTION_MINE,Hero.explosiveAmounts[SpecialAmmunition.MINE]);
         this.setButtonLabel(SuperActionButton.SELECTION_MINE_EMP,Hero.explosiveAmounts[SpecialAmmunition.MINE_EMP]);
         this.setButtonLabel(SuperActionButton.SELECTION_MINE_SAB,Hero.explosiveAmounts[SpecialAmmunition.MINE_SAB]);
         this.setButtonLabel(SuperActionButton.SELECTION_MINE_DDM,Hero.explosiveAmounts[SpecialAmmunition.MINE_DDM]);
         this.setButtonLabel(SuperActionButton.SELECTION_SMARTBOMB,Hero.explosiveAmounts[SpecialAmmunition.SMARTBOMB]);
         this.setButtonLabel(SuperActionButton.SELECTION_INSTASHIELD,Hero.explosiveAmounts[SpecialAmmunition.INSTASHIELD]);
         this.setButtonLabel(SuperActionButton.SELECTION_EMP,Hero.explosiveAmounts[SpecialAmmunition.EMP]);
         this.setButtonAccess(SuperActionButton.SELECTION_INSTASHIELD,Hero.cpuItems[CPUItem.TYPE_INSTASHIELD] != null);
         this.setButtonAccess(SuperActionButton.SELECTION_SMARTBOMB,Hero.cpuItems[CPUItem.TYPE_SMARTBOMB] != null);
      }
      
      public function updateFireworkButtonAmounts() : void
      {
         var _loc2_:int = 0;
         this.setButtonLabel(SuperActionButton.SELECTION_FIREWORK_1,Hero.fireworksAmounts[0]);
         this.setButtonLabel(SuperActionButton.SELECTION_FIREWORK_2,Hero.fireworksAmounts[1]);
         this.setButtonLabel(SuperActionButton.SELECTION_FIREWORK_3,Hero.fireworksAmounts[2]);
         var _loc1_:MenuManager = this.guiManager.getMenuManager();
         if(_loc1_ != null)
         {
            _loc2_ = Settings.fireworksLoaded;
         }
      }
      
      public function createActionButton(param1:int) : ActionButton
      {
         var _loc3_:ActionButton = null;
         var _loc2_:ActionButtonPattern = this.getActionButtonPattern(param1);
         if(_loc2_ == null)
         {
            return null;
         }
         _loc3_ = new ActionButton(this,_loc2_);
         _loc3_.isRunningCooldown = false;
         _loc3_.init();
         if(_loc2_.isActiveAtStart)
         {
            _loc3_.unlockButton();
         }
         else
         {
            _loc3_.lockButton();
         }
         this.actionButtons.push(_loc3_);
         _loc3_.addEventListener(ActionEvent.ACTION,this.onAction);
         this.updateAllButtonAmounts();
         this.invalidateCPUButtons();
         this.updateAmmoPrices();
         this.updateSelectableButtons();
         _loc3_.addMouseUpListener();
         return _loc3_;
      }
      
      public function onAction(param1:ActionEvent) : void
      {
         this.proccessAction(param1.getActionID(),param1.getEnvironment());
      }
      
      public function proccessAction(param1:int, param2:int) : void
      {
         var _loc3_:SimpleWindow = null;
         var _loc4_:int = 0;
         switch(param1)
         {
            case SuperActionButton.ACTIVATION_LASER:
               this.guiManager.getMain().screenManager.map.getEventManager().toggleLaserAttack(param2);
               break;
            case SuperActionButton.ACTIVATION_ROCKET:
               this.guiManager.getMain().screenManager.map.getEventManager().activateRocket(param2);
               break;
            case SuperActionButton.ACTIVATION_EXPLOSIVE:
               this.guiManager.getMain().screenManager.map.getEventManager().activateExplosive();
               break;
            case SuperActionButton.SELECTION_LASER_1:
               this.laserSelected(1,param2);
               break;
            case SuperActionButton.SELECTION_LASER_2:
               this.laserSelected(2,param2);
               break;
            case SuperActionButton.SELECTION_LASER_3:
               this.laserSelected(3,param2);
               break;
            case SuperActionButton.SELECTION_LASER_4:
               this.laserSelected(4,param2);
               break;
            case SuperActionButton.SELECTION_LASER_5:
               this.laserSelected(5,param2);
               break;
            case SuperActionButton.SELECTION_LASER_6:
               this.laserSelected(6,param2);
               break;
            case SuperActionButton.SELECTION_ROCKET_R_310:
            case SuperActionButton.SELECTION_ROCKET_PLT_2026:
            case SuperActionButton.SELECTION_ROCKET_PLT_2021:
            case SuperActionButton.SELECTION_ROCKET_PLT_3030:
            case SuperActionButton.SELECTION_ROCKET_PLD_8:
            case SuperActionButton.SELECTION_ROCKET_DCR_250:
            case SuperActionButton.SELECTION_ROCKET_WIZ:
            case SuperActionButton.SELECTION_LOAD_ROCKET_LAUNCHER:
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_HST01:
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_UBR100:
            case SuperActionButton.SELECTION_LAUNCHER_ROCKET_ECO10:
               this.updateRocketTypeSelection(this.buttonIDToRocketID[param1],param2);
               break;
            case SuperActionButton.SELECTION_MINE:
               this.explosiveSelected(1,param2);
               break;
            case SuperActionButton.SELECTION_SMARTBOMB:
               this.explosiveSelected(2,param2);
               break;
            case SuperActionButton.SELECTION_INSTASHIELD:
               this.explosiveSelected(3,param2);
               break;
            case SuperActionButton.SELECTION_EMP:
               this.explosiveSelected(4,param2);
               break;
            case SuperActionButton.SELECTION_FIREWORK_1:
               this.explosiveSelected(5,param2);
               break;
            case SuperActionButton.SELECTION_FIREWORK_2:
               this.explosiveSelected(6,param2);
               break;
            case SuperActionButton.SELECTION_FIREWORK_3:
               this.explosiveSelected(7,param2);
               break;
            case SuperActionButton.FIREWORK_IGNITE:
               this.explosiveSelected(8,param2);
               break;
            case SuperActionButton.SELECTION_MINE_EMP:
               this.explosiveSelected(9,param2);
               break;
            case SuperActionButton.SELECTION_MINE_SAB:
               this.explosiveSelected(10,param2);
               break;
            case SuperActionButton.SELECTION_MINE_DDM:
               this.explosiveSelected(11,param2);
               break;
            case SuperActionButton.ACTIVATION_CPU_JUMP:
               this.guiManager.getMain().screenManager.map.getEventManager().activateJumpCPU();
               break;
            case SuperActionButton.SELECT_CPU_JUMP_TARGET:
               this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP).maximize();
               break;
            case SuperActionButton.ACTIVATION_CPU_CLOAK:
               this.guiManager.getMain().screenManager.map.getEventManager().activateCloakCPU();
               break;
            case SuperActionButton.ACTIVATION_CPU_ROBOT:
               this.guiManager.getMain().screenManager.map.getEventManager().activateRobot();
               break;
            case SuperActionButton.ACTIVATION_CPU_AIM:
               this.guiManager.getMain().screenManager.map.getEventManager().activateAimCPU();
               break;
            case SuperActionButton.ACTIVATION_CPU_AROL:
               this.guiManager.getMain().screenManager.map.getEventManager().activateArolCPU();
               break;
            case SuperActionButton.ACTIVATION_CPU_RLLB:
               this.guiManager.getMain().screenManager.map.getEventManager().toggleRllbCpu();
               break;
            case SuperActionButton.ACTIVATION_CPU_HM7:
               _loc3_ = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_TRADE);
               _loc3_.unlockWindow();
               _loc3_.maximize();
               this.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.GET_ORE_PRICES);
               break;
            case SuperActionButton.BUY_LASER_1:
               Settings.selectedQuickBuyIcon = 1;
               if(param2 == ActionButton.ENV_QUICKSTART)
               {
                  this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_LASER,1);
                  this.flashButton(SuperActionButton.BUY_LASER_1,true);
                  break;
               }
               this.updateSelectedQuickBuyButtons();
               break;
            case SuperActionButton.BUY_LASER_2:
               Settings.selectedQuickBuyIcon = 2;
               if(param2 == ActionButton.ENV_QUICKSTART)
               {
                  this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_LASER,2);
                  this.flashButton(SuperActionButton.BUY_LASER_2,true);
                  break;
               }
               this.updateSelectedQuickBuyButtons();
               break;
            case SuperActionButton.BUY_LASER_3:
               Settings.selectedQuickBuyIcon = 3;
               if(param2 == ActionButton.ENV_QUICKSTART)
               {
                  this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_LASER,3);
                  this.flashButton(SuperActionButton.BUY_LASER_3,true);
                  break;
               }
               this.updateSelectedQuickBuyButtons();
               break;
            case SuperActionButton.BUY_LASER_4:
               break;
            case SuperActionButton.BUY_LASER_5:
               Settings.selectedQuickBuyIcon = 5;
               if(param2 == ActionButton.ENV_QUICKSTART)
               {
                  this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_LASER,5);
                  this.flashButton(SuperActionButton.BUY_LASER_5,true);
                  break;
               }
               this.updateSelectedQuickBuyButtons();
               break;
            case SuperActionButton.BUY_ROCKET_R_310:
               Settings.selectedQuickBuyIcon = 6;
               if(param2 == ActionButton.ENV_QUICKSTART)
               {
                  this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_ROCKET,1);
                  this.flashButton(SuperActionButton.BUY_ROCKET_R_310,true);
                  break;
               }
               this.updateSelectedQuickBuyButtons();
               break;
            case SuperActionButton.BUY_ROCKET_PLT_2026:
               Settings.selectedQuickBuyIcon = 7;
               if(param2 == ActionButton.ENV_QUICKSTART)
               {
                  this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_ROCKET,2);
                  this.flashButton(SuperActionButton.BUY_ROCKET_PLT_2026,true);
                  break;
               }
               this.updateSelectedQuickBuyButtons();
               break;
            case SuperActionButton.BUY_ROCKET_PLT_2021:
               Settings.selectedQuickBuyIcon = 8;
               if(param2 == ActionButton.ENV_QUICKSTART)
               {
                  this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_ROCKET,3);
                  this.flashButton(SuperActionButton.BUY_ROCKET_PLT_2021,true);
                  break;
               }
               this.updateSelectedQuickBuyButtons();
               break;
            case SuperActionButton.BUY_ROCKET_PLT_3030:
               Settings.selectedQuickBuyIcon = 9;
               if(param2 == ActionButton.ENV_QUICKSTART)
               {
                  this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_ROCKET,RocketPattern.PLT_3030);
                  this.flashButton(SuperActionButton.BUY_ROCKET_PLT_3030,true);
                  break;
               }
               this.updateSelectedQuickBuyButtons();
               break;
            case SuperActionButton.ACTIVATION_BUY:
               _loc4_ = Settings.selectedQuickBuyIcon;
               switch(_loc4_)
               {
                  case 1:
                     this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_LASER,1);
                     break;
                  case 2:
                     this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_LASER,2);
                     break;
                  case 3:
                     this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_LASER,3);
                     break;
                  case 5:
                     this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_LASER,5);
                     break;
                  case 6:
                     this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_ROCKET,RocketPattern.R310);
                     break;
                  case 7:
                     this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_ROCKET,RocketPattern.PLT_2026);
                     break;
                  case 8:
                     this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_ROCKET,RocketPattern.PLT_2021);
                     break;
                  case 9:
                     this.guiManager.getMain().screenManager.map.getEventManager().quickBuy(ServerCommands.BUY_ROCKET,RocketPattern.PLT_3030);
               }
               this.flashButton(SuperActionButton.ACTIVATION_BUY);
               break;
            case SuperActionButton.ACTIVATION_CHAIN_BOLT:
            case SuperActionButton.ACTIVATION_ENERGY_LEECH:
            case SuperActionButton.ACTIVATION_SHIELD_BACKUP:
            case SuperActionButton.ACTIVATION_ROCKET_PRECISION:
            case SuperActionButton.ACTIVATION_BATTLE_REP_BOT:
            case SuperActionButton.ACTIVATION_SPEED_LEECH:
               if(this.guiManager.techModel != null)
               {
                  this.guiManager.techModel.activateTechByID(this.buttonIDToTechID[param1]);
               }
               break;
            case SuperActionButton.ACTIVATION_SKILL_SOLACE:
            case SuperActionButton.ACTIVATION_SKILL_DIMINISHER:
            case SuperActionButton.ACTIVATION_SKILL_SPECTRUM:
            case SuperActionButton.ACTIVATION_SKILL_SENTINEL:
            case SuperActionButton.ACTIVATION_SKILL_VENOM:
            case SuperActionButton.ACTIVATION_SKILL_LIGHNTING:
               if(this.guiManager.skillDesignsModel != null)
               {
                  this.guiManager.skillDesignsModel.activateCurrentSkill();
               }
         }
      }
      
      public function removeActionButton(param1:ActionButton) : void
      {
         var _loc3_:ActionButton = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.actionButtons.length)
         {
            _loc3_ = this.actionButtons[_loc2_];
            if(_loc3_ == param1)
            {
               param1.cleanup();
               this.actionButtons.splice(_loc2_,1);
            }
            _loc2_++;
         }
      }
      
      public function getActionButtonPattern(param1:int) : ActionButtonPattern
      {
         var _loc3_:ActionButtonPattern = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.actionButtonPatterns.length)
         {
            _loc3_ = this.actionButtonPatterns[_loc2_];
            if(_loc3_.actionID == param1)
            {
               return _loc3_;
            }
            _loc2_++;
         }
         return null;
      }
      
      public function getActionButton(param1:int) : ActionButton
      {
         var _loc3_:ActionButton = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.actionButtons.length)
         {
            _loc3_ = this.actionButtons[_loc2_];
            if(_loc3_.getID() == param1)
            {
               return _loc3_;
            }
            _loc2_++;
         }
         return null;
      }
      
      public function setButtonAccess(param1:int, param2:Boolean) : void
      {
         var _loc3_:ActionButton = null;
         for each(_loc3_ in this.actionButtons)
         {
            if(_loc3_.getID() == param1)
            {
               if(param2)
               {
                  _loc3_.unlockButton();
               }
               else
               {
                  _loc3_.lockButton();
               }
            }
         }
      }
      
      public function setButtonSelected(param1:int, param2:Boolean) : void
      {
         var _loc3_:ActionButton = null;
         for each(_loc3_ in this.actionButtons)
         {
            if(_loc3_.getID() == param1)
            {
               if(param2)
               {
                  _loc3_.setSelected();
               }
               else
               {
                  _loc3_.setDeselected();
               }
            }
         }
      }
      
      public function getActionButtons() : Array
      {
         return this.actionButtons;
      }
      
      public function getActionButtonsByID(param1:int) : Array
      {
         var _loc3_:ActionButton = null;
         var _loc2_:Array = [];
         var _loc4_:int = 0;
         while(_loc4_ < this.actionButtons.length)
         {
            _loc3_ = this.actionButtons[_loc4_] as ActionButton;
            if(_loc3_.actionID == param1)
            {
               _loc2_.push(_loc3_);
            }
            _loc4_++;
         }
         return _loc2_;
      }
      
      public function getActionButtonInPoolByID(param1:int) : ActionButton
      {
         var _loc2_:ActionButton = null;
         for each(_loc2_ in this.actionButtons)
         {
            if(_loc2_.actionID == param1 && _loc2_.getEnvironment() == ActionButton.ENV_POOL)
            {
               return _loc2_;
            }
         }
         return null;
      }
      
      private function updateRocketTypeSelection(param1:int, param2:int) : void
      {
         var _loc3_:MapObject = null;
         if(param1 == RocketPattern.TYPE_ROCKET_LAUNCHER)
         {
            this.guiManager.getMain().screenManager.map.getEventManager().loadRocketLauncher(param2);
         }
         else
         {
            this.guiManager.getMain().screenManager.map.getEventManager().selectRocket(param1);
            _loc3_ = this.guiManager.getMain().screenManager.map.getShipManager().getSelectedShip();
            if(param2 == ActionButton.ENV_QUICKSTART && _loc3_ != null)
            {
               this.guiManager.getMain().screenManager.map.getEventManager().activateRocket(param2);
            }
         }
         this.lastClickedButtonID = this.rocketIDToButtonID[param1];
         this.updateQuickstartRocketButtons();
         this.updateRocketCategoryButtons();
      }
      
      public function togglePoolButton(param1:int, param2:Boolean, param3:int = 0) : void
      {
         var _loc4_:String = null;
         var _loc5_:ActionButton = null;
         if(param3 == SuperActionButton.ACTIVATION_ROCKET && this.getActionButton(param1) != null)
         {
            _loc4_ = this.getActionButton(param1).section;
         }
         for each(_loc5_ in this.actionButtons)
         {
            if(_loc5_ != null)
            {
               if(_loc5_.getEnvironment() == ActionButton.ENV_POOL)
               {
                  if(_loc5_.getMenuID() == param3)
                  {
                     if(_loc5_.getID() == param1)
                     {
                        if(param2)
                        {
                           _loc5_.setSelected();
                        }
                        else
                        {
                           _loc5_.setDeselected();
                        }
                     }
                     else if(null != _loc4_ && _loc5_.section == _loc4_)
                     {
                        _loc5_.setDeselected();
                     }
                  }
               }
            }
         }
      }
      
      public function toggleQuickstartButton(param1:int, param2:Boolean) : void
      {
         var _loc3_:ActionButton = null;
         for each(_loc3_ in this.actionButtons)
         {
            if(_loc3_ != null)
            {
               if(_loc3_.getEnvironment() == ActionButton.ENV_QUICKSTART)
               {
                  if(_loc3_.getID() == param1)
                  {
                     if(param2)
                     {
                        _loc3_.setSelected();
                     }
                     else
                     {
                        _loc3_.setDeselected();
                     }
                  }
               }
            }
         }
      }
      
      public function flashButton(param1:int, param2:Boolean = false) : void
      {
         var _loc4_:ActionButton = null;
         var _loc5_:ButtonSlot = null;
         var _loc6_:Array = null;
         var _loc3_:Array = this.quickMenu.getQuickstartSlots();
         for each(_loc5_ in _loc3_)
         {
            _loc4_ = _loc5_.getActionButton();
            if(_loc4_ != null)
            {
               if(_loc4_.getID() == param1)
               {
                  _loc4_.startFlash();
               }
            }
         }
         _loc6_ = this.mainMenu.getPoolSlots();
         if(!param2)
         {
            for each(_loc5_ in _loc6_)
            {
               _loc4_ = _loc5_.getActionButton();
               if(_loc4_ != null)
               {
                  if(_loc4_.getID() == param1)
                  {
                     _loc4_.startFlash();
                  }
               }
            }
         }
      }
      
      public function getGuiManager() : GuiManager
      {
         return this.guiManager;
      }
      
      public function updateSelectableButtons() : void
      {
         this.updatePoolLaserButtons();
         this.updateRocketCategoryButtons();
         this.updatePoolExplosiveButtons();
         this.updateSelectedQuickBuyButtons();
      }
      
      private function updateRocketCategoryButtons() : void
      {
         this.togglePoolButton(this.lastClickedButtonID,true,SuperActionButton.ACTIVATION_ROCKET);
      }
      
      public function updatePoolLaserButtons() : void
      {
         this.togglePoolButton(SuperActionButton.SELECTION_LASER_1,false);
         this.togglePoolButton(SuperActionButton.SELECTION_LASER_2,false);
         this.togglePoolButton(SuperActionButton.SELECTION_LASER_3,false);
         this.togglePoolButton(SuperActionButton.SELECTION_LASER_4,false);
         this.togglePoolButton(SuperActionButton.SELECTION_LASER_5,false);
         this.togglePoolButton(SuperActionButton.SELECTION_LASER_6,false);
         switch(Settings.selectedLaser)
         {
            case 1:
               this.togglePoolButton(SuperActionButton.SELECTION_LASER_1,true);
               break;
            case 2:
               this.togglePoolButton(SuperActionButton.SELECTION_LASER_2,true);
               break;
            case 3:
               this.togglePoolButton(SuperActionButton.SELECTION_LASER_3,true);
               break;
            case 4:
               this.togglePoolButton(SuperActionButton.SELECTION_LASER_4,true);
               break;
            case 5:
               this.togglePoolButton(SuperActionButton.SELECTION_LASER_5,true);
               break;
            case 6:
               this.togglePoolButton(SuperActionButton.SELECTION_LASER_6,true);
         }
      }
      
      public function updateQuickstartLaserButtons() : void
      {
         this.switchOffQuickstartLaserButtons();
         var _loc1_:int = Settings.selectedLaser;
         switch(_loc1_)
         {
            case 1:
               this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_1,true);
               break;
            case 2:
               this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_2,true);
               break;
            case 3:
               this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_3,true);
               break;
            case 4:
               this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_4,true);
               break;
            case 5:
               this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_5,true);
               break;
            case 6:
               this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_6,true);
         }
      }
      
      private function updateQuickstartRocketButtons() : void
      {
         this.switchOffQuickstartRocketButtons();
         var _loc1_:int = Settings.selectedRocket;
         if(this.rocketIDToButtonID[_loc1_] != undefined)
         {
            this.toggleQuickstartButton(this.rocketIDToButtonID[_loc1_],true);
         }
      }
      
      public function switchOffQuickstartLaserButtons() : void
      {
         this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_1,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_2,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_3,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_4,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_5,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_LASER_6,false);
      }
      
      public function switchOffQuickstartRocketButtons() : void
      {
         this.toggleQuickstartButton(SuperActionButton.SELECTION_ROCKET_R_310,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_ROCKET_PLT_2026,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_ROCKET_PLT_2021,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_ROCKET_PLT_3030,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_ROCKET_PLD_8,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_ROCKET_DCR_250,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_ROCKET_WIZ,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_LOAD_ROCKET_LAUNCHER,false);
      }
      
      public function switchOffQuickstartExplosiveButtons() : void
      {
         this.toggleQuickstartButton(SuperActionButton.SELECTION_MINE,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_MINE_EMP,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_MINE_SAB,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_MINE_DDM,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_SMARTBOMB,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_INSTASHIELD,false);
         this.toggleQuickstartButton(SuperActionButton.SELECTION_EMP,false);
      }
      
      public function updatePoolExplosiveButtons() : void
      {
         var _loc1_:int = 2;
         this.togglePoolButton(SuperActionButton.SELECTION_MINE,false,_loc1_);
         this.togglePoolButton(SuperActionButton.SELECTION_MINE_EMP,false,_loc1_);
         this.togglePoolButton(SuperActionButton.SELECTION_MINE_SAB,false,_loc1_);
         this.togglePoolButton(SuperActionButton.SELECTION_MINE_DDM,false,_loc1_);
         this.togglePoolButton(SuperActionButton.SELECTION_SMARTBOMB,false,_loc1_);
         this.togglePoolButton(SuperActionButton.SELECTION_INSTASHIELD,false,_loc1_);
         this.togglePoolButton(SuperActionButton.SELECTION_EMP,false,_loc1_);
         this.togglePoolButton(SuperActionButton.SELECTION_FIREWORK_1,false,_loc1_);
         this.togglePoolButton(SuperActionButton.SELECTION_FIREWORK_2,false,_loc1_);
         this.togglePoolButton(SuperActionButton.SELECTION_FIREWORK_3,false,_loc1_);
         this.togglePoolButton(SuperActionButton.FIREWORK_IGNITE,false,_loc1_);
         var _loc2_:int = Settings.selectedExplosive;
         if(_loc2_ == 0)
         {
            _loc2_ = 1;
         }
         switch(_loc2_)
         {
            case 1:
               this.togglePoolButton(SuperActionButton.SELECTION_MINE,true,_loc1_);
               break;
            case 2:
               this.togglePoolButton(SuperActionButton.SELECTION_SMARTBOMB,true,_loc1_);
               break;
            case 3:
               this.togglePoolButton(SuperActionButton.SELECTION_INSTASHIELD,true,_loc1_);
               break;
            case 4:
               this.togglePoolButton(SuperActionButton.SELECTION_EMP,true,_loc1_);
               break;
            case 5:
               this.togglePoolButton(SuperActionButton.SELECTION_FIREWORK_1,true,_loc1_);
               break;
            case 6:
               this.togglePoolButton(SuperActionButton.SELECTION_FIREWORK_2,true,_loc1_);
               break;
            case 7:
               this.togglePoolButton(SuperActionButton.SELECTION_FIREWORK_3,true,_loc1_);
               break;
            case 8:
               this.togglePoolButton(SuperActionButton.FIREWORK_IGNITE,true,_loc1_);
               break;
            case 9:
               this.togglePoolButton(SuperActionButton.SELECTION_MINE_EMP,true,_loc1_);
               break;
            case 10:
               this.togglePoolButton(SuperActionButton.SELECTION_MINE_SAB,true,_loc1_);
               break;
            case 11:
               this.togglePoolButton(SuperActionButton.SELECTION_MINE_DDM,true,_loc1_);
         }
      }
      
      public function updateSelectedQuickBuyButtons() : void
      {
         var _loc2_:AmmoPrice = null;
         var _loc1_:int = 4;
         this.togglePoolButton(SuperActionButton.BUY_LASER_1,false,_loc1_);
         this.togglePoolButton(SuperActionButton.BUY_LASER_2,false,_loc1_);
         this.togglePoolButton(SuperActionButton.BUY_LASER_3,false,_loc1_);
         this.togglePoolButton(SuperActionButton.BUY_LASER_5,false,_loc1_);
         this.togglePoolButton(SuperActionButton.BUY_ROCKET_R_310,false,_loc1_);
         this.togglePoolButton(SuperActionButton.BUY_ROCKET_PLT_2026,false,_loc1_);
         this.togglePoolButton(SuperActionButton.BUY_ROCKET_PLT_2021,false,_loc1_);
         this.togglePoolButton(SuperActionButton.BUY_ROCKET_PLT_3030,false,_loc1_);
         switch(Settings.selectedQuickBuyIcon)
         {
            case 1:
               this.togglePoolButton(SuperActionButton.BUY_LASER_1,true,_loc1_);
               _loc2_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_LASER,1);
               break;
            case 2:
               this.togglePoolButton(SuperActionButton.BUY_LASER_2,true,_loc1_);
               _loc2_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_LASER,2);
               break;
            case 3:
               this.togglePoolButton(SuperActionButton.BUY_LASER_3,true,_loc1_);
               _loc2_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_LASER,3);
               break;
            case 5:
               this.togglePoolButton(SuperActionButton.BUY_LASER_5,true,_loc1_);
               _loc2_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_LASER,5);
               break;
            case 6:
               this.togglePoolButton(SuperActionButton.BUY_ROCKET_R_310,true,_loc1_);
               _loc2_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_ROCKET,RocketPattern.R310);
               break;
            case 7:
               this.togglePoolButton(SuperActionButton.BUY_ROCKET_PLT_2026,true,_loc1_);
               _loc2_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_ROCKET,RocketPattern.PLT_2026);
               break;
            case 8:
               this.togglePoolButton(SuperActionButton.BUY_ROCKET_PLT_2021,true,_loc1_);
               _loc2_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_ROCKET,RocketPattern.PLT_2021);
               break;
            case 9:
               this.togglePoolButton(SuperActionButton.BUY_ROCKET_PLT_3030,true,_loc1_);
               _loc2_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_ROCKET,RocketPattern.PLT_3030);
         }
         var _loc3_:ActionButton = this.getActionButtonInPoolByID(SuperActionButton.ACTIVATION_BUY);
         if(_loc3_ != null)
         {
            if(_loc2_.currency == AmmoPrice.CURRENCY_URIDIUM)
            {
               _loc3_.setIcon(1);
            }
            else
            {
               _loc3_.setIcon(2);
            }
            this.setButtonLabel(SuperActionButton.ACTIVATION_BUY,_loc2_.summedPrice);
         }
      }
      
      public function getSlotWidth() : int
      {
         return this.slotWidth;
      }
      
      public function getGap() : int
      {
         return this.gap;
      }
      
      public function updateAmmoPrices() : void
      {
         var _loc1_:AmmoPrice = null;
         _loc1_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_LASER,1);
         if(_loc1_ != null)
         {
            this.setButtonLabel(SuperActionButton.BUY_LASER_1,_loc1_.amount);
         }
         _loc1_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_LASER,2);
         if(_loc1_ != null)
         {
            this.setButtonLabel(SuperActionButton.BUY_LASER_2,_loc1_.amount);
         }
         _loc1_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_LASER,3);
         if(_loc1_ != null)
         {
            this.setButtonLabel(SuperActionButton.BUY_LASER_3,_loc1_.amount);
         }
         _loc1_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_LASER,4);
         if(_loc1_ != null)
         {
            this.setButtonLabel(SuperActionButton.BUY_LASER_4,_loc1_.amount);
         }
         _loc1_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_LASER,5);
         if(_loc1_ != null)
         {
            this.setButtonLabel(SuperActionButton.BUY_LASER_5,_loc1_.amount);
         }
         _loc1_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_ROCKET,RocketPattern.R310);
         if(_loc1_ != null)
         {
            this.setButtonLabel(SuperActionButton.BUY_ROCKET_R_310,_loc1_.amount);
         }
         _loc1_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_ROCKET,RocketPattern.PLT_2026);
         if(_loc1_ != null)
         {
            this.setButtonLabel(SuperActionButton.BUY_ROCKET_PLT_2026,_loc1_.amount);
         }
         _loc1_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_ROCKET,RocketPattern.PLT_2021);
         if(_loc1_ != null)
         {
            this.setButtonLabel(SuperActionButton.BUY_ROCKET_PLT_2021,_loc1_.amount);
         }
         _loc1_ = PatternManager.getAmmoPrice(AmmoPrice.CATEGORY_ROCKET,RocketPattern.PLT_3030);
         if(_loc1_ != null)
         {
            this.setButtonLabel(SuperActionButton.BUY_ROCKET_PLT_3030,_loc1_.amount);
         }
      }
      
      public function checkLaserToggleButton(param1:MapObject) : void
      {
         if(this.guiManager.getMain().screenManager.map.getCombatManager().isShipAttackedByHero(param1.getUserId()))
         {
            this.togglePoolButton(SuperActionButton.ACTIVATION_LASER,false);
         }
      }
      
      private function isHeroAttacking() : Boolean
      {
         var _loc2_:Ship = null;
         var _loc3_:LaserAttackJob = null;
         var _loc1_:Map = this.guiManager.getMain().screenManager.map;
         if(_loc1_ != null)
         {
            _loc2_ = _loc1_.getShipManager().getHero();
            _loc3_ = _loc1_.getCombatManager().isShipAttacking(_loc2_.getUserId());
            if(_loc3_ != null)
            {
               return true;
            }
         }
         return false;
      }
      
      private function laserSelected(param1:int, param2:int) : void
      {
         var _loc3_:int = 0;
         var _loc4_:MapObject = null;
         if(Hero.laserBatteryAmounts[param1 - 1] > 0)
         {
            _loc3_ = Settings.lastSelectedLaser;
            this.guiManager.getMain().screenManager.map.getEventManager().selectLaser(param1);
            _loc4_ = this.guiManager.getMain().screenManager.map.getShipManager().getSelectedShip();
            if(param2 == ActionButton.ENV_QUICKSTART && _loc4_ != null)
            {
               if(_loc3_ == param1)
               {
                  this.guiManager.getMain().screenManager.map.getEventManager().toggleLaserAttack(param2);
               }
               else if(!this.isHeroAttacking())
               {
                  this.guiManager.getMain().screenManager.map.getEventManager().toggleLaserAttack(param2);
               }
            }
         }
         this.updateQuickstartLaserButtons();
         this.updatePoolLaserButtons();
      }
      
      private function explosiveSelected(param1:int, param2:int) : void
      {
         Settings.selectedExplosive = param1;
         if(param2 == ActionButton.ENV_QUICKSTART)
         {
            this.guiManager.getMain().screenManager.map.getEventManager().activateExplosive();
         }
         this.updatePoolExplosiveButtons();
      }
      
      public function autoAmmunitionChange(param1:String, param2:int) : void
      {
         switch(param1)
         {
            case "L":
               this.guiManager.writeToLog(BPLocale.getText("chgbat").replace(/%!/,InGameCatalog.instance.battery_types[param2]));
               this.laserSelected(param2,ActionButton.ENV_POOL);
               break;
            case "R":
               this.guiManager.writeToLog(BPLocale.getText("chgrok").replace(/%!/,InGameCatalog.instance.rocketNames[param2]));
               this.updateRocketTypeSelection(param2,ActionButton.ENV_POOL);
         }
      }
      
      public function getSlotHeight() : int
      {
         return this.slotHeight;
      }
      
      public function getActionSlotCount() : int
      {
         return this.actionSlotCount;
      }
      
      public function getMainMenu() : MainMenu
      {
         return this.mainMenu;
      }
      
      public function getQuickMenu() : QuickMenu
      {
         return this.quickMenu;
      }
      
      public function flashButtonIcon(param1:int, param2:int, param3:Boolean) : void
      {
         var _loc5_:ActionButton = null;
         var _loc4_:int = 0;
         while(_loc4_ < this.actionButtons.length)
         {
            _loc5_ = this.actionButtons[_loc4_];
            if(_loc5_.actionID == param1)
            {
               _loc5_.flashIcon(param2);
               if(param3)
               {
                  _loc5_.startPointer();
               }
            }
            _loc4_++;
         }
      }
      
      public function stopFlashButtonIcon(param1:int) : void
      {
         var _loc3_:ActionButton = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.actionButtons.length)
         {
            _loc3_ = this.actionButtons[_loc2_];
            if(_loc3_.actionID == param1)
            {
               _loc3_.stopFlashIcon();
            }
            _loc2_++;
         }
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import com.greensock.easing.Elastic;
   import com.greensock.easing.Expo;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.MouseEvent;
   import flash.geom.Point;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.gui.ButtonSlot;
   import net.bigpoint.darkorbit.gui.CPUItem;
   import net.bigpoint.darkorbit.net.ConnectionManager;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.resolution.ResolutionPattern;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class QuickMenu extends Sprite
   {
      
      public static var predefinedActions:Array;
      
      public static const logger:ILogger = Log.getLogger("QuickMenu");
      
      public static const HORIZONTAL_ORDER:int = 0;
      
      public static const HORIZONTAL_COMPACT_ORDER:int = 1;
      
      public static const VERTICAL_ORDER:int = 2;
      
      public static const VERTICAL_COMPACT_ORDER:int = 3;
      
      public static var slotOrder:int = HORIZONTAL_ORDER;
      
      private var menuManager:MenuManager;
      
      private var actionSlotCount:int;
      
      private var dragger:MovieClip;
      
      private var rotator:MovieClip;
      
      private var quickstartSlots:Array = [];
      
      private var slotWidth:int;
      
      private var slotHeight:int;
      
      private var gap:int;
      
      private var lastPosition:Point = new Point();
      
      public var predefinedActionsSet:Boolean;
      
      private var compactHorizontalPositions:Array = [];
      
      private var compactVerticalPositions:Array = [];
      
      public function QuickMenu(param1:MenuManager)
      {
         super();
         this.menuManager = param1;
         this.compactHorizontalPositions[0] = new Point(0,0);
         this.compactHorizontalPositions[1] = new Point(17,-29);
         this.compactHorizontalPositions[2] = new Point(17,29);
         this.compactHorizontalPositions[3] = new Point(34,0);
         this.compactHorizontalPositions[4] = new Point(51,-29);
         this.compactHorizontalPositions[5] = new Point(51,29);
         this.compactHorizontalPositions[6] = new Point(68,0);
         this.compactHorizontalPositions[7] = new Point(85,-29);
         this.compactHorizontalPositions[8] = new Point(85,29);
         this.compactHorizontalPositions[9] = new Point(102,0);
         this.compactVerticalPositions[0] = new Point(0,0);
         this.compactVerticalPositions[1] = new Point(-17,29);
         this.compactVerticalPositions[2] = new Point(17,29);
         this.compactVerticalPositions[3] = new Point(0,58);
         this.compactVerticalPositions[4] = new Point(-17,87);
         this.compactVerticalPositions[5] = new Point(17,87);
         this.compactVerticalPositions[6] = new Point(0,116);
         this.compactVerticalPositions[7] = new Point(-17,145);
         this.compactVerticalPositions[8] = new Point(17,145);
         this.compactVerticalPositions[9] = new Point(0,174);
      }
      
      public function onMouseUp() : void
      {
         var _loc1_:ConnectionManager = null;
         if(this.lastPosition.x != this.x || this.lastPosition.y != this.y)
         {
            if(this.checkPosition())
            {
               _loc1_ = this.menuManager.getGuiManager().getMain().getConnectionManager();
               _loc1_.sendCommand(ServerCommands.CLIENT_SETTING,[ServerCommands.SET_SLOTMENU_POSITION + ServerCommands.SETTING_KEY_SEPERATOR + Settings.resolutionID,this.x + ServerCommands.SETTING_PROPERTY_SEPERATOR + this.y]);
               this.lastPosition.x = this.x;
               this.lastPosition.y = this.y;
            }
         }
      }
      
      public function checkPosition() : Boolean
      {
         var _loc1_:int = this.menuManager.getSlotWidth();
         if(this.x < 0 || this.x + _loc1_ > ScreenManager.getScreenWidth() || this.y < 0 || this.y + 20 > ScreenManager.getScreenHeight() - 0)
         {
            TweenLite.to(this,0.5,{
               "ease":Elastic.easeOut,
               "x":this.lastPosition.x,
               "y":this.lastPosition.y
            });
            return false;
         }
         return true;
      }
      
      public function init() : void
      {
         var _loc4_:Point = null;
         var _loc6_:ButtonSlot = null;
         this.actionSlotCount = Main.gameXML.menu.@actionSlots;
         this.gap = Main.gameXML.menu.@gap;
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         var _loc2_:Bitmap = _loc1_.getEmbededBitmap("slot");
         this.slotWidth = _loc2_.width;
         this.slotHeight = _loc2_.height;
         this.dragger = _loc1_.getEmbededMovieClip("dragger");
         this.dragger.x = -7;
         this.dragger.y = -14;
         this.dragger.buttonMode = true;
         this.dragger.gotoAndStop(1);
         this.dragger.addEventListener(MouseEvent.MOUSE_DOWN,this.onQuickMenuDragger);
         this.dragger.addEventListener(MouseEvent.MOUSE_OVER,this.onMouseOverDragger);
         this.dragger.addEventListener(MouseEvent.MOUSE_OUT,this.onMouseOutDragger);
         this.addChild(this.dragger);
         this.dragger.visible = false;
         this.rotator = _loc1_.getEmbededMovieClip("rotator");
         this.rotator.x = -7;
         this.rotator.y = 32;
         this.rotator.buttonMode = true;
         this.rotator.gotoAndStop(1);
         this.rotator.addEventListener(MouseEvent.MOUSE_DOWN,this.onQuickMenuRotator);
         this.rotator.addEventListener(MouseEvent.MOUSE_OVER,this.onMouseOverRotator);
         this.rotator.addEventListener(MouseEvent.MOUSE_OUT,this.onMouseOutRotator);
         this.addChild(this.rotator);
         this.rotator.visible = false;
         var _loc3_:ResolutionPattern = PatternManager.resolutionPatterns[Settings.resolutionID];
         _loc4_ = _loc3_.getSlotMenuPosition();
         if(_loc4_ != null)
         {
            this.x = _loc4_.x;
            this.y = _loc4_.y;
         }
         var _loc5_:int = 0;
         while(_loc5_ < this.actionSlotCount)
         {
            _loc6_ = new ButtonSlot("slot",this.menuManager.getGuiManager(),_loc5_ + 1);
            this.addChild(_loc6_.getMC());
            this.quickstartSlots.push(_loc6_);
            _loc5_++;
         }
         this.sortSlots(slotOrder);
      }
      
      public function sortSlots(param1:int, param2:Boolean = false) : void
      {
         var _loc4_:int = 0;
         var _loc5_:ButtonSlot = null;
         var _loc6_:Point = null;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc3_:Number = 0;
         switch(param1)
         {
            case HORIZONTAL_ORDER:
               TweenLite.to(this.rotator,0.2,{
                  "ease":Expo.easeOut,
                  "x":-7,
                  "y":29
               });
               _loc4_ = 0;
               while(_loc4_ < this.actionSlotCount)
               {
                  _loc5_ = this.quickstartSlots[_loc4_];
                  _loc7_ = _loc4_ * this.slotWidth + _loc4_ * this.gap;
                  if(param2)
                  {
                     TweenLite.to(_loc5_.getMC(),0.3,{
                        "ease":Expo.easeOut,
                        "x":_loc7_,
                        "y":0,
                        "delay":_loc3_,
                        "onStart":this.onSlotMove
                     });
                     _loc3_ += 0.05;
                  }
                  else
                  {
                     _loc5_.getMC().x = _loc7_;
                     _loc5_.getMC().y = 0;
                  }
                  _loc4_++;
               }
               slotOrder = HORIZONTAL_ORDER;
               break;
            case HORIZONTAL_COMPACT_ORDER:
               TweenLite.to(this.rotator,0.2,{
                  "ease":Expo.easeOut,
                  "x":-7,
                  "y":29
               });
               _loc4_ = 0;
               while(_loc4_ < this.actionSlotCount)
               {
                  _loc5_ = this.quickstartSlots[_loc4_];
                  _loc6_ = this.compactHorizontalPositions[_loc4_];
                  if(param2)
                  {
                     TweenLite.to(_loc5_.getMC(),0.3,{
                        "ease":Expo.easeOut,
                        "x":_loc6_.x,
                        "y":_loc6_.y,
                        "delay":_loc3_,
                        "onStart":this.onSlotMove
                     });
                     _loc3_ += 0.05;
                  }
                  else
                  {
                     _loc5_.getMC().x = _loc6_.x;
                     _loc5_.getMC().y = _loc6_.y;
                  }
                  _loc4_++;
               }
               slotOrder = HORIZONTAL_COMPACT_ORDER;
               break;
            case VERTICAL_ORDER:
               TweenLite.to(this.rotator,0.2,{
                  "ease":Expo.easeOut,
                  "x":21,
                  "y":-14
               });
               _loc4_ = 0;
               while(_loc4_ < this.actionSlotCount)
               {
                  _loc5_ = this.quickstartSlots[_loc4_];
                  _loc8_ = _loc4_ * this.slotWidth + _loc4_ * this.gap;
                  if(param2)
                  {
                     TweenLite.to(_loc5_.getMC(),0.3,{
                        "ease":Expo.easeOut,
                        "x":0,
                        "y":_loc8_,
                        "delay":_loc3_,
                        "onStart":this.onSlotMove
                     });
                     _loc3_ += 0.05;
                  }
                  else
                  {
                     _loc5_.getMC().x = 0;
                     _loc5_.getMC().y = _loc8_;
                  }
                  _loc4_++;
               }
               slotOrder = VERTICAL_ORDER;
               break;
            case VERTICAL_COMPACT_ORDER:
               TweenLite.to(this.rotator,0.2,{
                  "ease":Expo.easeOut,
                  "x":21,
                  "y":-14
               });
               _loc4_ = 0;
               while(_loc4_ < this.actionSlotCount)
               {
                  _loc5_ = this.quickstartSlots[_loc4_];
                  _loc6_ = this.compactVerticalPositions[_loc4_];
                  if(param2)
                  {
                     TweenLite.to(_loc5_.getMC(),0.3,{
                        "ease":Expo.easeOut,
                        "x":_loc6_.x,
                        "y":_loc6_.y,
                        "delay":_loc3_,
                        "onStart":this.onSlotMove
                     });
                     _loc3_ += 0.05;
                  }
                  else
                  {
                     _loc5_.getMC().x = _loc6_.x;
                     _loc5_.getMC().y = _loc6_.y;
                  }
                  _loc4_++;
               }
               slotOrder = VERTICAL_COMPACT_ORDER;
         }
      }
      
      private function onSlotMove() : void
      {
         AudioManager.playSoundEffect(33);
      }
      
      private function onMouseOverDragger(param1:MouseEvent) : void
      {
         this.dragger.gotoAndStop(2);
      }
      
      private function onMouseOutDragger(param1:MouseEvent) : void
      {
         this.dragger.gotoAndStop(1);
      }
      
      private function onMouseOverRotator(param1:MouseEvent) : void
      {
         this.rotator.gotoAndStop(2);
      }
      
      private function onMouseOutRotator(param1:MouseEvent) : void
      {
         this.rotator.gotoAndStop(1);
      }
      
      public function updateCPUButtonsInSlotMenu() : void
      {
         var _loc1_:ButtonSlot = null;
         var _loc2_:ActionButton = null;
         var _loc3_:CPUItem = null;
         for each(_loc1_ in this.quickstartSlots)
         {
            _loc2_ = _loc1_.getActionButton();
            if(_loc2_ == null)
            {
               continue;
            }
            switch(_loc2_.getActionID())
            {
               case SuperActionButton.ACTIVATION_CPU_JUMP:
                  _loc3_ = Hero.cpuItems[CPUItem.TYPE_JUMP];
                  if(_loc3_ == null)
                  {
                     _loc2_.lockButton();
                  }
                  else
                  {
                     _loc2_.unlockButton();
                  }
                  break;
               case SuperActionButton.SELECT_CPU_JUMP_TARGET:
                  _loc3_ = Hero.cpuItems[CPUItem.TYPE_ADVANCED_JUMP];
                  if(_loc3_ == null)
                  {
                     _loc2_.lockButton();
                  }
                  else
                  {
                     _loc2_.unlockButton();
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_AIM:
                  _loc3_ = Hero.cpuItems[CPUItem.TYPE_AIM];
                  if(_loc3_ == null)
                  {
                     _loc2_.lockButton();
                  }
                  else
                  {
                     _loc2_.unlockButton();
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_AROL:
                  _loc3_ = Hero.cpuItems[CPUItem.TYPE_AROL];
                  if(_loc3_ == null)
                  {
                     _loc2_.lockButton();
                  }
                  else
                  {
                     _loc2_.unlockButton();
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_RLLB:
                  _loc3_ = Hero.cpuItems[CPUItem.TYPE_RLLB];
                  _loc2_.updateTooltip();
                  if(_loc3_ == null)
                  {
                     _loc2_.lockButton();
                  }
                  else
                  {
                     _loc2_.unlockButton();
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_CLOAK:
                  _loc3_ = Hero.cpuItems[CPUItem.TYPE_CLOAK];
                  if(_loc3_ == null)
                  {
                     _loc2_.lockButton();
                  }
                  else
                  {
                     _loc2_.unlockButton();
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_ROBOT:
                  _loc3_ = Hero.cpuItems[CPUItem.TYPE_ROBOT];
                  if(_loc3_ == null)
                  {
                     _loc2_.lockButton();
                     _loc2_.updateTooltip();
                  }
                  else
                  {
                     _loc2_.unlockButton();
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_HM7:
                  _loc3_ = Hero.cpuItems[CPUItem.TYPE_HM7];
                  if(_loc3_ == null)
                  {
                     _loc2_.lockButton();
                  }
                  else
                  {
                     _loc2_.unlockButton();
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_DRONE_REPAIR:
                  _loc3_ = Hero.cpuItems[CPUItem.TYPE_DRONE_REPAIR];
                  if(_loc3_ == null)
                  {
                     _loc2_.lockButton();
                  }
                  else
                  {
                     _loc2_.unlockButton();
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_AMMOBUY:
                  _loc3_ = Hero.cpuItems[CPUItem.TYPE_AMMOBUY];
                  if(_loc3_ == null)
                  {
                     _loc2_.lockButton();
                  }
                  else
                  {
                     _loc2_.unlockButton();
                  }
                  break;
               case SuperActionButton.ACTIVATION_CPU_ROCKETBUY:
                  _loc3_ = Hero.cpuItems[CPUItem.TYPE_ROCKETBUY];
                  if(_loc3_ == null)
                  {
                     _loc2_.lockButton();
                  }
                  else
                  {
                     _loc2_.unlockButton();
                  }
            }
         }
      }
      
      private function onQuickMenuDragger(param1:MouseEvent) : void
      {
         this.startDrag();
      }
      
      private function onQuickMenuRotator(param1:MouseEvent) : void
      {
         if(slotOrder == HORIZONTAL_ORDER)
         {
            this.sortSlots(HORIZONTAL_COMPACT_ORDER,true);
         }
         else if(slotOrder == HORIZONTAL_COMPACT_ORDER)
         {
            this.sortSlots(VERTICAL_ORDER,true);
         }
         else if(slotOrder == VERTICAL_ORDER)
         {
            this.sortSlots(VERTICAL_COMPACT_ORDER,true);
         }
         else if(slotOrder == VERTICAL_COMPACT_ORDER)
         {
            this.sortSlots(HORIZONTAL_ORDER,true);
         }
         var _loc2_:ConnectionManager = this.menuManager.getGuiManager().getMain().getConnectionManager();
         _loc2_.sendCommand(ServerCommands.CLIENT_SETTING,[ServerCommands.SET_SLOTMENU_ORDER + ServerCommands.SETTING_KEY_SEPERATOR + Settings.resolutionID,slotOrder.toString()]);
      }
      
      public function hideMenuDragger() : void
      {
         this.dragger.visible = false;
         this.rotator.visible = false;
      }
      
      public function showMenuDragger() : void
      {
         this.dragger.visible = true;
         this.rotator.visible = true;
      }
      
      public function showSlots() : void
      {
         var _loc1_:ButtonSlot = null;
         for each(_loc1_ in this.quickstartSlots)
         {
            if(!_loc1_.getMC().visible)
            {
               _loc1_.getMC().visible = true;
            }
         }
      }
      
      public function hideSlots() : void
      {
         var _loc1_:ButtonSlot = null;
         for each(_loc1_ in this.quickstartSlots)
         {
            if(!_loc1_.isAllocated())
            {
               _loc1_.getMC().visible = false;
            }
         }
      }
      
      public function refreshQuickmenu() : void
      {
         var _loc1_:ButtonSlot = null;
         var _loc2_:ActionButton = null;
         for each(_loc1_ in this.quickstartSlots)
         {
            _loc2_ = _loc1_.getActionButton();
            if(_loc2_ != null)
            {
               if(this.menuManager.isButtonBlacklisted(_loc2_.getActionID()))
               {
                  _loc1_.setVisibility(false);
               }
               else
               {
                  _loc1_.setVisibility(true);
               }
            }
         }
      }
      
      public function updateCooldownButtonsArray() : void
      {
         var _loc1_:int = 0;
         while(_loc1_ < this.quickstartSlots.length)
         {
            if(this.quickstartSlots[_loc1_].getActionButton() != null)
            {
               if(Boolean(this.quickstartSlots[_loc1_].getActionButton().isTechButton) || this.quickstartSlots[_loc1_].getActionButton().cooldownButtonType == ActionButton.COOLDOWN_TYPE_SKILL)
               {
                  this.menuManager.actionButtonsWithCooldowns.push(this.quickstartSlots[_loc1_].getActionButton());
               }
            }
            _loc1_++;
         }
      }
      
      public function updateQuickmenu() : void
      {
         var _loc1_:ActionButton = null;
         var _loc2_:ButtonSlot = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         if(this.predefinedActionsSet)
         {
            return;
         }
         this.predefinedActionsSet = true;
         var _loc3_:int = int(this.menuManager.rocketIDToButtonID[Settings.selectedRocket]);
         if(predefinedActions != null)
         {
            _loc4_ = 0;
            while(_loc4_ < predefinedActions.length)
            {
               _loc5_ = int(predefinedActions[_loc4_]);
               if(_loc5_ != -1)
               {
                  if(!this.menuManager.isButtonBlacklisted(_loc5_))
                  {
                     if(_loc5_ == SuperActionButton.ACTIVATION_CPU_JUMP)
                     {
                        if(Hero.cpuItems[CPUItem.TYPE_JUMP] == null)
                        {
                           this.menuManager.setButtonAccess(SuperActionButton.ACTIVATION_CPU_JUMP,false);
                        }
                     }
                     if(_loc5_ == SuperActionButton.SELECT_CPU_JUMP_TARGET)
                     {
                        if(Hero.cpuItems[CPUItem.TYPE_ADVANCED_JUMP] == null)
                        {
                           this.menuManager.setButtonAccess(SuperActionButton.SELECT_CPU_JUMP_TARGET,false);
                        }
                     }
                     if(_loc5_ == SuperActionButton.ACTIVATION_CPU_AIM)
                     {
                        if(Hero.cpuItems[CPUItem.TYPE_AIM] == null)
                        {
                           this.menuManager.setButtonAccess(SuperActionButton.ACTIVATION_CPU_AIM,false);
                        }
                     }
                     if(_loc5_ == SuperActionButton.ACTIVATION_CPU_AROL)
                     {
                        if(Hero.cpuItems[CPUItem.TYPE_AROL] == null)
                        {
                           this.menuManager.setButtonAccess(SuperActionButton.ACTIVATION_CPU_AROL,false);
                        }
                     }
                     if(_loc5_ == SuperActionButton.ACTIVATION_CPU_RLLB)
                     {
                        if(Hero.cpuItems[CPUItem.TYPE_RLLB] == null)
                        {
                           this.menuManager.setButtonAccess(SuperActionButton.ACTIVATION_CPU_RLLB,false);
                        }
                     }
                     if(_loc5_ == SuperActionButton.ACTIVATION_CPU_CLOAK)
                     {
                        if(Hero.cpuItems[CPUItem.TYPE_CLOAK] == null)
                        {
                           this.menuManager.setButtonAccess(SuperActionButton.ACTIVATION_CPU_CLOAK,false);
                        }
                     }
                     if(_loc5_ == SuperActionButton.ACTIVATION_CPU_ROBOT)
                     {
                        if(Hero.cpuItems[CPUItem.TYPE_ROBOT] == null)
                        {
                           this.menuManager.setButtonAccess(SuperActionButton.ACTIVATION_CPU_ROBOT,false);
                        }
                     }
                     if(_loc5_ == SuperActionButton.ACTIVATION_CPU_HM7)
                     {
                        if(Hero.cpuItems[CPUItem.TYPE_HM7] == null)
                        {
                           this.menuManager.setButtonAccess(SuperActionButton.ACTIVATION_CPU_HM7,false);
                        }
                     }
                     if(_loc5_ == SuperActionButton.ACTIVATION_CPU_DRONE_REPAIR)
                     {
                        if(Hero.cpuItems[CPUItem.TYPE_DRONE_REPAIR] == null)
                        {
                           this.menuManager.setButtonAccess(SuperActionButton.ACTIVATION_CPU_DRONE_REPAIR,false);
                        }
                     }
                     if(_loc5_ == SuperActionButton.ACTIVATION_CPU_AMMOBUY)
                     {
                        if(Hero.cpuItems[CPUItem.TYPE_AMMOBUY] == null)
                        {
                           this.menuManager.setButtonAccess(SuperActionButton.ACTIVATION_CPU_AMMOBUY,false);
                        }
                     }
                     if(_loc5_ == SuperActionButton.ACTIVATION_CPU_ROCKETBUY)
                     {
                        if(Hero.cpuItems[CPUItem.TYPE_ROCKETBUY] == null)
                        {
                           this.menuManager.setButtonAccess(SuperActionButton.ACTIVATION_CPU_ROCKETBUY,false);
                        }
                     }
                     _loc1_ = this.menuManager.createActionButton(_loc5_);
                     if(_loc1_ != null)
                     {
                        _loc2_ = this.quickstartSlots[_loc4_];
                        _loc2_.addActionButton(_loc1_);
                        if(_loc1_.actionID == _loc3_)
                        {
                           _loc1_.setSelected();
                        }
                     }
                  }
               }
               _loc4_++;
            }
         }
         this.updateCooldownButtonsArray();
         this.menuManager.updateTechs();
      }
      
      public function activateSlot(param1:int) : void
      {
         var _loc3_:ActionButton = null;
         var _loc2_:ButtonSlot = this.quickstartSlots[param1];
         if(_loc2_ != null)
         {
            _loc3_ = _loc2_.getActionButton();
            if(_loc3_ != null && !(_loc3_.isCooldownActive() || _loc3_.isLocked()))
            {
               this.menuManager.proccessAction(_loc3_.getActionID(),_loc3_.getEnvironment());
            }
         }
      }
      
      public function getQuickstartSlots() : Array
      {
         return this.quickstartSlots;
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   import flash.display.MovieClip;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.gui.CPUItem;
   
   public class RocketBuyCPUDecorator implements IActionButtonDecorator
   {
      
      public static const logger:ILogger = Log.getLogger("RocketBuyCPUDecorator");
      
      public var rocketsClip:MovieClip;
      
      private var mc:MovieClip;
      
      public function RocketBuyCPUDecorator(param1:MovieClip)
      {
         super();
         this.mc = param1;
         this.rocketsClip = this.mc["rocketsSlot"];
         this.update();
      }
      
      public function update() : void
      {
         if(CPUItem(Hero.cpuItems[CPUItem.TYPE_ROCKETBUY]) != null)
         {
            this.rocketsClip.gotoAndStop("rockettype_" + CPUItem(Hero.cpuItems[CPUItem.TYPE_ROCKETBUY]).level);
         }
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   import flash.display.MovieClip;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class RocketLauncherLoadDecorator extends ActionButtonDecorator implements IActionButtonDecorator
   {
      
      public static const logger:ILogger = Log.getLogger("RocketLauncherLoadDecorator");
      
      public var slotRL0:MovieClip;
      
      public var slotRL1:MovieClip;
      
      public var slotRL2:MovieClip;
      
      private var mc:MovieClip;
      
      public var rocketLauncherSlotCount:Array = [0,3,5];
      
      public function RocketLauncherLoadDecorator(param1:MovieClip)
      {
         super();
         this.mc = param1;
         this.mc.visible = false;
         this.mc.mouseChildren = false;
         this.mc.mouseEnabled = false;
         this.slotRL0 = this.mc["slots"]["slotRL0"];
         this.slotRL1 = this.mc["slots"]["slotRL1"];
         this.slotRL2 = this.mc["slots"]["slotRL2"];
         this.slotRL0.visible = false;
         this.slotRL1.visible = false;
         this.slotRL2.visible = false;
         this.update();
      }
      
      override public function update() : void
      {
         var _loc2_:int = 0;
         var _loc3_:MovieClip = null;
         var _loc4_:int = 0;
         this.mc.visible = true;
         this.slotRL0.visible = false;
         this.slotRL1.visible = false;
         this.slotRL2.visible = false;
         var _loc1_:MovieClip = this["slotRL" + Settings.rocketLauncherType];
         _loc1_.visible = true;
         if(Settings.rocketLauncherType != 0)
         {
            _loc2_ = int(this.rocketLauncherSlotCount[Settings.rocketLauncherType]);
            _loc4_ = 0;
            while(_loc4_ < _loc2_)
            {
               _loc3_ = _loc1_["filledSlots"]["slot" + (_loc4_ + 1)] as MovieClip;
               if(_loc3_ != null)
               {
                  if(_loc4_ < Settings.rocketLauncherRocketsLoaded)
                  {
                     _loc3_.visible = true;
                     _loc3_.gotoAndStop(Settings.selectedLauncherRocket);
                  }
                  else
                  {
                     _loc3_.visible = false;
                  }
               }
               _loc4_++;
            }
            this.mc["selectedLauncherRocket"].gotoAndStop(Settings.selectedLauncherRocket);
         }
         else
         {
            this.mc["selectedLauncherRocket"].gotoAndStop(1);
         }
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import flash.events.EventDispatcher;
   import flash.events.TimerEvent;
   import flash.geom.Point;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.gui.BitmapFont;
   import net.bigpoint.darkorbit.gui.GuiManager;
   
   public class SuperActionButton extends EventDispatcher
   {
      
      public static const ACTION_ACTIVATE_GATE:int = 2;
      
      public static const ACTION_SHOW_SETTINGS_WINDOW:int = 8;
      
      public static const ACTION_LOGOUT:int = 9;
      
      public static const ACTION_TRADE:int = 10;
      
      public static const ACTION_HELP:int = 25;
      
      public static const ACTION_FASTREPAIR:int = 34;
      
      public static const ACTIVATION_LASER:int = 0;
      
      public static const SELECTION_LASER_1:int = 3;
      
      public static const SELECTION_LASER_2:int = 4;
      
      public static const SELECTION_LASER_3:int = 5;
      
      public static const SELECTION_LASER_4:int = 6;
      
      public static const SELECTION_LASER_5:int = 7;
      
      public static const SELECTION_LASER_6:int = 39;
      
      public static const ACTIVATION_ROCKET:int = 1;
      
      public static const SELECTION_ROCKET_R_310:int = 11;
      
      public static const SELECTION_ROCKET_PLT_2026:int = 12;
      
      public static const SELECTION_ROCKET_PLT_2021:int = 13;
      
      public static const SELECTION_ROCKET_PLT_3030:int = 57;
      
      public static const SELECTION_ROCKET_PLD_8:int = 44;
      
      public static const SELECTION_ROCKET_DCR_250:int = 72;
      
      public static const SELECTION_ROCKET_WIZ:int = 43;
      
      public static const SELECTION_LOAD_ROCKET_LAUNCHER:int = 46;
      
      public static const SELECTION_LAUNCHER_ROCKET_HST01:int = 48;
      
      public static const SELECTION_LAUNCHER_ROCKET_UBR100:int = 49;
      
      public static const SELECTION_LAUNCHER_ROCKET_ECO10:int = 50;
      
      public static const ACTIVATION_CHAIN_BOLT:int = 51;
      
      public static const ACTIVATION_TECH:int = 52;
      
      public static const ACTIVATION_SHIELD_BACKUP:int = 53;
      
      public static const ACTIVATION_ENERGY_LEECH:int = 54;
      
      public static const ACTIVATION_ROCKET_PRECISION:int = 55;
      
      public static const ACTIVATION_BATTLE_REP_BOT:int = 59;
      
      public static const ACTIVATION_SPEED_LEECH:int = 60;
      
      public static const ACTIVATION_SKILL_SOLACE:int = 63;
      
      public static const ACTIVATION_SKILL_DIMINISHER:int = 64;
      
      public static const ACTIVATION_SKILL_SPECTRUM:int = 65;
      
      public static const ACTIVATION_SKILL_SENTINEL:int = 66;
      
      public static const ACTIVATION_SKILL_VENOM:int = 67;
      
      public static const ACTIVATION_SKILL_LIGHNTING:int = 73;
      
      public static const ACTIVATION_EXPLOSIVE:int = 14;
      
      public static const SELECTION_MINE:int = 15;
      
      public static const SELECTION_MINE_EMP:int = 68;
      
      public static const SELECTION_MINE_SAB:int = 69;
      
      public static const SELECTION_MINE_DDM:int = 70;
      
      public static const SELECTION_EMP:int = 45;
      
      public static const SELECTION_SMARTBOMB:int = 16;
      
      public static const SELECTION_INSTASHIELD:int = 17;
      
      public static const ACTIVATION_CPU_JUMP:int = 20;
      
      public static const ACTIVATION_CPU_CLOAK:int = 21;
      
      public static const ACTIVATION_CPU_AROL:int = 22;
      
      public static const ACTIVATION_CPU_ROBOT:int = 23;
      
      public static const ACTIVATION_CPU_AIM:int = 24;
      
      public static const ACTIVATION_CPU_HM7:int = 35;
      
      public static const ACTIVATION_CPU_DRONE_REPAIR:int = 41;
      
      public static const ACTIVATION_CPU_AMMOBUY:int = 42;
      
      public static const ACTIVATION_CPU_RLLB:int = 47;
      
      public static const ACTIVATION_CPU_ROCKETBUY:int = 56;
      
      public static const SELECT_CPU_JUMP_TARGET:int = 71;
      
      public static const ACTIVATION_BUY:int = 25;
      
      public static const BUY_LASER_1:int = 26;
      
      public static const BUY_LASER_2:int = 27;
      
      public static const BUY_LASER_3:int = 28;
      
      public static const BUY_LASER_4:int = 29;
      
      public static const BUY_LASER_5:int = 30;
      
      public static const BUY_ROCKET_R_310:int = 31;
      
      public static const BUY_ROCKET_PLT_2026:int = 32;
      
      public static const BUY_ROCKET_PLT_2021:int = 33;
      
      public static const BUY_ROCKET_PLT_3030:int = 58;
      
      public static const SELECTION_FIREWORK_1:int = 36;
      
      public static const SELECTION_FIREWORK_2:int = 37;
      
      public static const SELECTION_FIREWORK_3:int = 38;
      
      public static const FIREWORK_IGNITE:int = 40;
      
      public var actionID:int;
      
      protected var guiManager:GuiManager;
      
      private var directionArrowTimer:Timer;
      
      private var directionArrow:MovieClip;
      
      protected var actionNormal:Bitmap;
      
      protected var actionHover:Bitmap;
      
      protected var actionSelected:Bitmap;
      
      protected var actionDisabled:Bitmap;
      
      protected var selectedIcon:Bitmap;
      
      protected var count:int;
      
      protected var bitmapFont:BitmapFont;
      
      protected var hasCounter:Boolean;
      
      protected var buttonContainer:MovieClip;
      
      protected var ammobar:MovieClip;
      
      protected var maxAmmo:int;
      
      private var flashCount:int;
      
      private var directionArrows:Array = [];
      
      public function SuperActionButton()
      {
         super();
      }
      
      protected function setInvisible(param1:Bitmap) : void
      {
         if(TweenMax.isTweening(param1))
         {
            return;
         }
         param1.visible = false;
      }
      
      public function getActionNormal() : Bitmap
      {
         return this.actionNormal;
      }
      
      public function getActionID() : int
      {
         return this.actionID;
      }
      
      public function getCount() : int
      {
         return this.count;
      }
      
      public function setCount(param1:int) : void
      {
         if(this.hasCounter)
         {
            this.bitmapFont.setText(param1.toString());
         }
      }
      
      public function setAmmobar(param1:int) : void
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         if(this.ammobar != null)
         {
            _loc2_ = this.ammobar.framesLoaded;
            _loc3_ = _loc2_ / this.maxAmmo * param1;
            if(_loc3_ > _loc2_)
            {
               _loc3_ = _loc2_;
            }
            _loc3_ = _loc2_ - _loc3_ + 1;
            this.ammobar.gotoAndStop(_loc3_);
         }
      }
      
      public function containsNumbersContainer() : Boolean
      {
         if(this.bitmapFont == null)
         {
            return false;
         }
         return true;
      }
      
      public function startFlash() : void
      {
         this.actionSelected.alpha = 0;
         this.actionSelected.visible = true;
         TweenLite.to(this.actionSelected,0.25,{
            "alpha":1,
            "onComplete":this.endFlash
         });
      }
      
      public function endFlash() : void
      {
         TweenLite.to(this.actionSelected,0.25,{
            "alpha":0,
            "onComplete":this.setInvisible,
            "onCompleteParams":[this.actionSelected]
         });
      }
      
      public function isLocked() : Boolean
      {
         return this.actionDisabled.visible;
      }
      
      public function lockButton() : void
      {
         this.actionDisabled.visible = true;
         this.buttonContainer.buttonMode = false;
      }
      
      public function unlockButton() : void
      {
         this.actionDisabled.visible = false;
         this.buttonContainer.buttonMode = true;
      }
      
      public function setCounterVisibility(param1:Boolean) : void
      {
         if(this.bitmapFont != null)
         {
            this.bitmapFont.visible = param1;
         }
      }
      
      public function getButtonContainer() : MovieClip
      {
         return this.buttonContainer;
      }
      
      public function flashIcon(param1:int = -1) : void
      {
         if(TweenMax.isTweening(this.selectedIcon))
         {
            return;
         }
         this.flashCount = param1;
         TweenMax.killTweensOf(this.selectedIcon);
         this.selectedIcon.alpha = 0;
         this.selectedIcon.visible = true;
         TweenLite.to(this.selectedIcon,0.25,{
            "alpha":1,
            "onComplete":this.endFlash2,
            "onCompleteParams":[this.selectedIcon]
         });
      }
      
      public function endFlash2(param1:Bitmap) : void
      {
         TweenLite.to(param1,0.25,{
            "alpha":0,
            "onComplete":this.setBitmapInvisible,
            "onCompleteParams":[param1]
         });
      }
      
      protected function setBitmapInvisible(param1:Bitmap) : void
      {
         param1.visible = false;
         if(this.flashCount == -1)
         {
            this.flashIcon(this.flashCount);
         }
         else
         {
            --this.flashCount;
            if(this.flashCount > 0)
            {
               this.flashIcon(this.flashCount);
            }
            else
            {
               this.stopPointer();
            }
         }
      }
      
      public function stopFlashIcon() : void
      {
         this.flashCount = 0;
         this.stopPointer();
      }
      
      protected function removeAllDirectionArrows() : void
      {
         var _loc2_:MovieClip = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.directionArrows.length)
         {
            _loc2_ = this.directionArrows[_loc1_];
            TweenMax.killTweensOf(_loc2_);
            TweenMax.killDelayedCallsTo(_loc2_);
            _loc2_.parent.removeChild(_loc2_);
            _loc1_++;
         }
         this.directionArrows = [];
      }
      
      public function startPointer() : void
      {
         this.stopPointer();
         this.directionArrow = ResourceManager.getMovieClip("ui","windowArrow");
         this.directionArrow.mouseEnabled = false;
         this.directionArrow.mouseChildren = false;
         this.directionArrow.x = this.getDynamicXPos();
         this.directionArrow.y = this.getDynamicYPos();
         this.directionArrow.scaleX = 0.7;
         this.directionArrow.scaleY = 0.7;
         this.directionArrow.rotation = -90;
         this.directionArrow.alpha = 0;
         this.updateArrowRotation(null);
         TweenLite.to(this.directionArrow,0.5,{"alpha":1});
         this.buttonContainer.stage.addChild(this.directionArrow);
         this.handleWindowPointer1(this.directionArrow);
         this.directionArrowTimer = new Timer(40,0);
         this.directionArrowTimer.addEventListener(TimerEvent.TIMER,this.updateArrowRotation);
         this.directionArrowTimer.start();
      }
      
      public function stopPointer() : void
      {
         if(this.directionArrow != null)
         {
            TweenMax.killTweensOf(this.directionArrow);
            if(this.buttonContainer.stage.contains(this.directionArrow))
            {
               TweenLite.to(this.directionArrow,0.5,{
                  "alpha":0,
                  "onComplete":this.directionArrow.parent.removeChild,
                  "onCompleteParams":[this.directionArrow]
               });
            }
         }
         if(this.directionArrowTimer != null)
         {
            this.directionArrowTimer.stop();
            this.directionArrowTimer.removeEventListener(TimerEvent.TIMER,this.updateArrowRotation);
         }
      }
      
      private function handleWindowPointer1(param1:MovieClip) : void
      {
         TweenLite.to(param1,0.5,{
            "x":this.getDynamicXPos(),
            "y":this.getDynamicYPos(),
            "onComplete":this.handleWindowPointer2,
            "onCompleteParams":[param1]
         });
      }
      
      private function handleWindowPointer2(param1:MovieClip) : void
      {
         var _loc2_:int = int(40 * Math.cos(param1.rotation * Math.PI / 180));
         var _loc3_:int = int(40 * Math.sin(param1.rotation * Math.PI / 180));
         TweenLite.to(param1,0.5,{
            "x":this.getDynamicXPos() + _loc2_,
            "y":this.getDynamicYPos() + _loc3_,
            "onComplete":this.handleWindowPointer1,
            "onCompleteParams":[param1]
         });
      }
      
      private function updateArrowRotation(param1:TimerEvent) : void
      {
         var _loc3_:int = 0;
         var _loc2_:Number = int(Math.atan2(this.getDynamicYPos() - ScreenManager.getHalfScreenHeight() - this.guiManager.getMain().y,this.getDynamicXPos() - ScreenManager.getHalfScreenWidth() - this.guiManager.getMain().x) * 180 / Math.PI);
         if(_loc2_ != 0)
         {
            _loc3_ = Math.round(_loc2_ + 180);
            this.directionArrow.rotation = _loc3_;
         }
      }
      
      private function getDynamicXPos() : int
      {
         var _loc1_:Point = this.buttonContainer.localToGlobal(new Point(this.buttonContainer.stage.x,this.buttonContainer.stage.y));
         _loc1_.x += this.actionNormal.width / 2;
         return _loc1_.x;
      }
      
      private function getDynamicYPos() : int
      {
         var _loc1_:Point = this.buttonContainer.localToGlobal(new Point(this.buttonContainer.stage.x,this.buttonContainer.stage.y));
         _loc1_.y += this.actionNormal.height / 2;
         return _loc1_.y;
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.MovieClip;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   
   public class TechButtonDecorator
   {
      
      public static const logger:ILogger = Log.getLogger("TechButtonDecorator");
      
      private var iconContainer:MovieClip;
      
      private var firstDigit:MovieClip;
      
      private var secondDigit:MovieClip;
      
      private var singleDigit:MovieClip;
      
      private var doubleDigits:MovieClip;
      
      private var initComplete:Boolean = false;
      
      private var numberBg:MovieClip;
      
      public function TechButtonDecorator(param1:MovieClip, param2:int)
      {
         super();
         var _loc3_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         this.singleDigit = _loc3_.getEmbededMovieClip("keyboardIconsBlack");
         this.singleDigit.cacheAsBitmap = true;
         this.doubleDigits = _loc3_.getEmbededMovieClip("keyboardIconsTwoDigits");
         this.doubleDigits.cacheAsBitmap = true;
         this.numberBg = _loc3_.getEmbededMovieClip("techDigitBg");
         this.singleDigit.x = param1.width * 0.5 - this.singleDigit.width * 0.5;
         this.singleDigit.y = this.singleDigit.height * 0.5;
         this.doubleDigits.x = param1.width * 0.5 - this.doubleDigits.width * 0.5;
         this.doubleDigits.y = this.doubleDigits.height * 0.5;
         this.numberBg.x = 1.5;
         this.numberBg.y = 1.5;
         this.numberBg.alpha = 0.7;
         this.iconContainer = param1;
         var _loc4_:Array = this.splitDigits(param2);
         if(_loc4_ != null)
         {
            if(_loc4_.length == 1)
            {
               this.iconContainer.addChild(this.numberBg);
               this.iconContainer.addChild(this.singleDigit);
               this.singleDigit.gotoAndStop(_loc4_[0]);
            }
            else if(_loc4_.length == 2)
            {
               this.iconContainer.addChild(this.numberBg);
               this.iconContainer.addChild(this.doubleDigits);
               this.doubleDigits.first.gotoAndStop(_loc4_[1]);
               this.doubleDigits.second.gotoAndStop(_loc4_[0]);
            }
         }
         this.initComplete = true;
      }
      
      public function updateDigits(param1:int) : void
      {
         if(!this.initComplete)
         {
            return;
         }
         var _loc2_:Array = this.splitDigits(param1);
         if(_loc2_ == null)
         {
            if(this.iconContainer.contains(this.singleDigit))
            {
               this.iconContainer.removeChild(this.singleDigit);
            }
            if(this.iconContainer.contains(this.doubleDigits))
            {
               this.iconContainer.removeChild(this.doubleDigits);
            }
            if(this.iconContainer.contains(this.numberBg))
            {
               this.iconContainer.removeChild(this.numberBg);
            }
            return;
         }
         if(_loc2_.length == 1)
         {
            if(!this.iconContainer.contains(this.numberBg))
            {
               this.iconContainer.addChild(this.numberBg);
            }
            if(!this.iconContainer.contains(this.singleDigit))
            {
               this.iconContainer.addChild(this.singleDigit);
            }
            this.singleDigit.gotoAndStop(_loc2_[0]);
            if(this.iconContainer.contains(this.doubleDigits))
            {
               this.iconContainer.removeChild(this.doubleDigits);
            }
         }
         else if(_loc2_.length == 2)
         {
            if(!this.iconContainer.contains(this.numberBg))
            {
               this.iconContainer.addChild(this.numberBg);
            }
            if(!this.iconContainer.contains(this.doubleDigits))
            {
               this.iconContainer.addChild(this.doubleDigits);
            }
            this.doubleDigits.first.gotoAndStop(_loc2_[1]);
            this.doubleDigits.second.gotoAndStop(_loc2_[0]);
            if(this.iconContainer.contains(this.singleDigit))
            {
               this.iconContainer.removeChild(this.singleDigit);
            }
         }
      }
      
      private function splitDigits(param1:int) : Array
      {
         var _loc2_:Array = [];
         var _loc3_:String = String(param1);
         if(param1 <= 99)
         {
            if(_loc3_.length > 1)
            {
               _loc2_.push(this.setDigit(String(param1).substring(1,2)));
               _loc2_.push(this.setDigit(String(param1).substring(0,1)));
            }
            else if(_loc3_.length == 1)
            {
               if(this.setDigit(String(param1).substring(0,1)) == 10)
               {
                  return null;
               }
               _loc2_.push(this.setDigit(String(param1).substring(0,1)));
            }
         }
         else
         {
            _loc2_.push(11);
         }
         return _loc2_;
      }
      
      private function setDigit(param1:String) : int
      {
         if(int(param1) == 0)
         {
            return 10;
         }
         return int(param1);
      }
      
      private function createDigitMC(param1:int) : MovieClip
      {
         var _loc2_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         var _loc3_:MovieClip = _loc2_.getEmbededMovieClip("keyboardIconsBlack");
         _loc3_.cacheAsBitmap = true;
         _loc3_.gotoAndStop(param1);
         _loc3_.y = _loc3_.height / 2;
         return _loc3_;
      }
   }
}

package net.bigpoint.darkorbit.menu
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import flash.geom.Point;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.gui.ActionEvent;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   
   public class TopMenu extends Sprite
   {
      
      public static const logger:ILogger = Log.getLogger("TopMenu");
      
      private var guiManager:GuiManager;
      
      private var staticButtonSlots:Array = [];
      
      private var buttons:Array = [];
      
      public function TopMenu(param1:GuiManager)
      {
         super();
         this.guiManager = param1;
         this.init();
      }
      
      private function init() : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:XML = null;
         var _loc8_:XML = null;
         var _loc9_:Point = null;
         var _loc10_:String = null;
         var _loc11_:String = null;
         var _loc12_:Boolean = false;
         var _loc13_:ActionButton2 = null;
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("actionMenu"));
         var _loc2_:Bitmap = _loc1_.getEmbededBitmap("sticky_nav_bg.png");
         var _loc3_:Bitmap = _loc1_.getEmbededBitmap("sticky_nav_logo.png");
         addChild(_loc2_);
         addChild(_loc3_);
         _loc3_.x = 36;
         this.x = ScreenManager.getScreenWidth() - _loc2_.width;
         for each(_loc7_ in Main.gameXML.topMenu.staticButtonSlots.staticButtonSlot)
         {
            _loc4_ = parseInt(_loc7_.attribute("id"));
            _loc5_ = parseInt(_loc7_.attribute("iconXPos")) + this.x;
            _loc6_ = parseInt(_loc7_.attribute("iconYPos")) + this.y;
            _loc9_ = new Point();
            _loc9_.x = _loc5_;
            _loc9_.y = _loc6_;
            this.staticButtonSlots[_loc4_] = _loc9_;
         }
         for each(_loc8_ in Main.gameXML.topMenu.buttons.button)
         {
            _loc4_ = parseInt(_loc8_.attribute("id"));
            _loc5_ = parseInt(_loc8_.attribute("iconXPos"));
            _loc6_ = parseInt(_loc8_.attribute("iconYPos"));
            _loc10_ = _loc8_.attribute("resKey");
            _loc11_ = null;
            _loc12_ = false;
            if(_loc8_.attribute("counter").length() > 0)
            {
               _loc12_ = Main.parseBooleanFromString(_loc8_.attribute("counter"));
            }
            if(_loc8_.attribute("languageKey").length() > 0)
            {
               _loc11_ = _loc8_.attribute("languageKey");
            }
            _loc13_ = new ActionButton2(this.guiManager,_loc10_,_loc4_,ActionButton2.TYPE_DYNAMIC_BUTTON,_loc12_,_loc11_);
            _loc13_.init();
            _loc13_.getMovieClip().x = _loc5_;
            _loc13_.getMovieClip().y = _loc6_;
            _loc13_.addEventListener(ActionEvent.ACTION,this.onAction);
            this.buttons[_loc4_] = _loc13_;
            this.addChild(_loc13_.getMovieClip());
         }
      }
      
      public function onAction(param1:ActionEvent) : void
      {
         var _loc2_:ActionButton2 = param1.target as ActionButton2;
         if(_loc2_.getButtonContainer().buttonMode == false)
         {
            return;
         }
         switch(param1.getActionID())
         {
            case SuperActionButton.ACTION_ACTIVATE_GATE:
               this.guiManager.getMain().screenManager.map.getEventManager().activateGate();
               break;
            case SuperActionButton.ACTION_FASTREPAIR:
               this.guiManager.getMain().screenManager.map.getEventManager().activateInstaRepair();
         }
      }
      
      public function getStaticButtonsSlotPosition(param1:int) : Point
      {
         var _loc2_:Point = this.staticButtonSlots[param1];
         if(_loc2_ == null)
         {
            logger.fatal("no static slot position found for id:" + param1);
         }
         return _loc2_;
      }
      
      public function getGuiManager() : GuiManager
      {
         return this.guiManager;
      }
      
      public function setButtonAccess(param1:int, param2:Boolean) : void
      {
         var _loc3_:ActionButton2 = null;
         for each(_loc3_ in this.buttons)
         {
            if(_loc3_.getActionID() == param1)
            {
               if(param2)
               {
                  _loc3_.unlockButton();
               }
               else
               {
                  _loc3_.lockButton();
               }
            }
         }
      }
      
      public function setWindowAccess(param1:int, param2:Boolean) : void
      {
         var _loc3_:SimpleWindow = this.guiManager.getWindow(param1);
         if(_loc3_ != null)
         {
            if(param2)
            {
               _loc3_.unlockWindow();
            }
            else
            {
               _loc3_.lockWindow();
            }
         }
      }
      
      public function getButton(param1:int) : ActionButton2
      {
         return this.buttons[param1];
      }
      
      public function flashButtonIcon(param1:int, param2:int, param3:Boolean) : void
      {
         var _loc4_:ActionButton2 = this.buttons[param1];
         if(_loc4_ != null)
         {
            _loc4_.flashIcon(param2);
            if(param3)
            {
               _loc4_.startPointer();
            }
         }
      }
      
      public function stopFlashButtonIcon(param1:int) : void
      {
         var _loc2_:ActionButton2 = this.buttons[param1];
         if(_loc2_ != null)
         {
            _loc2_.stopFlashIcon();
         }
      }
      
      public function refresh() : void
      {
         var _loc1_:ActionButton2 = null;
         for each(_loc1_ in this.buttons)
         {
            if(this.guiManager.getMenuManager().isButtonBlacklisted(_loc1_.getActionID()))
            {
               _loc1_.getMovieClip().visible = false;
            }
            else
            {
               _loc1_.getMovieClip().visible = true;
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.meteor
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.geom.Rectangle;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class MeteorManager
   {
      
      public static const logger:ILogger = Log.getLogger("Client.MeteorManager");
      
      private var meteorSwarms:Array;
      
      private var map:Map;
      
      public function MeteorManager(param1:Map)
      {
         super();
         this.map = param1;
         this.meteorSwarms = [];
      }
      
      public function displayMeteor(param1:MeteorPattern) : void
      {
         var _loc2_:ResourcePattern = PatternManager.meteorPatterns[int(param1.getTypeID())];
         if(ResourceManager.fileCollection.isLoaded(_loc2_.getResKey()))
         {
            this.attachClip(param1,_loc2_);
         }
         else
         {
            ResourceManager.fileCollection.load(_loc2_.getResKey(),this.onClipLoaded);
         }
      }
      
      private function attachClip(param1:MeteorPattern, param2:ResourcePattern) : void
      {
         var _loc3_:MeteorSwarm = new MeteorSwarm(this,param2.getResKey(),new Rectangle(0,0,ScreenManager.getScreenWidth(),ScreenManager.getScreenHeight()),param1.getDelay(),param1.getSpeed());
         param1.clip = _loc3_;
         this.map.getMain().screenManager.getMeteorLayer(param1.getLayerIndex()).addChild(_loc3_);
      }
      
      private function onClipLoaded(param1:SWFFinisher) : void
      {
         var _loc3_:MeteorPattern = null;
         var _loc4_:ResourcePattern = null;
         if(Settings.unloadResources)
         {
            this.map.addFinisherToList(param1);
         }
         var _loc2_:int = 0;
         while(_loc2_ < this.meteorSwarms.length)
         {
            _loc3_ = this.meteorSwarms[_loc2_];
            _loc4_ = PatternManager.meteorPatterns[int(_loc3_.getTypeID())];
            if(_loc4_.getResKey() == param1.fileVO.id)
            {
               this.attachClip(_loc3_,_loc4_);
            }
            _loc2_++;
         }
      }
      
      public function cleanup() : void
      {
         var _loc2_:MeteorPattern = null;
         var _loc3_:MeteorSwarm = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.meteorSwarms.length)
         {
            _loc2_ = this.meteorSwarms[_loc1_];
            _loc3_ = MeteorSwarm(_loc2_.clip);
            _loc3_.cleanup();
            this.map.getMain().screenManager.getMeteorLayer(_loc2_.getLayerIndex()).removeChild(_loc3_);
            _loc2_.removeClip();
            _loc1_++;
         }
         this.meteorSwarms = [];
      }
      
      public function prepareMeteors(param1:int, param2:int, param3:int, param4:int) : void
      {
         var _loc5_:MeteorPattern = new MeteorPattern(param1,param2,param3,param4);
         this.meteorSwarms.push(_loc5_);
         this.displayMeteor(_loc5_);
      }
      
      public function getMap() : Map
      {
         return this.map;
      }
   }
}

package net.bigpoint.darkorbit.meteor
{
   import net.bigpoint.darkorbit.pattern.DynamicResource;
   
   public class MeteorPattern extends DynamicResource
   {
      
      private var delay:int;
      
      private var speed:int;
      
      private var layerIndex:int;
      
      public function MeteorPattern(param1:int, param2:int, param3:int, param4:int)
      {
         super(param1);
         this.delay = param2;
         this.speed = param3;
         this.layerIndex = param4;
      }
      
      public function getDelay() : int
      {
         return this.delay;
      }
      
      public function getSpeed() : int
      {
         return this.speed;
      }
      
      public function getLayerIndex() : int
      {
         return this.layerIndex;
      }
   }
}

package net.bigpoint.darkorbit.meteor
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import com.greensock.easing.Linear;
   import flash.display.MovieClip;
   import flash.events.TimerEvent;
   import flash.geom.Rectangle;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   
   public class MeteorSwarm extends MovieClip
   {
      
      private var resKey:String;
      
      private var rect:Rectangle;
      
      private var finisher:SWFFinisher;
      
      private var speed:int;
      
      private var meteorManager:MeteorManager;
      
      private var timer:Timer;
      
      public function MeteorSwarm(param1:MeteorManager, param2:String, param3:Rectangle, param4:int, param5:int, param6:int = 25)
      {
         super();
         this.meteorManager = param1;
         this.resKey = param2;
         this.rect = param3;
         this.speed = param5;
         this.finisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(param2));
         this.timer = new Timer(param4,0);
         this.timer.addEventListener(TimerEvent.TIMER,this.spawnMeteorit);
         this.timer.start();
      }
      
      public function cleanup() : void
      {
         this.timer.stop();
         this.timer.removeEventListener(TimerEvent.TIMER,this.spawnMeteorit);
      }
      
      private function spawnMeteorit(param1:TimerEvent) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc2_:MovieClip = this.finisher.getEmbededMovieClip("mc");
         _loc2_.mouseEnabled = Main.mouseEventsEnabled;
         _loc2_.mouseChildren = Main.mouseEventsEnabled;
         var _loc3_:int = Math.floor(Math.random() * 4);
         switch(_loc3_)
         {
            case 0:
               _loc4_ = Math.floor(Math.random() * this.rect.width);
               _loc5_ = Math.floor(Math.random() * this.rect.width);
               _loc6_ = this.rect.y - _loc2_.height;
               _loc7_ = this.rect.height + _loc2_.height;
               break;
            case 1:
               _loc4_ = this.rect.width + _loc2_.width;
               _loc5_ = this.rect.x - _loc2_.width;
               _loc6_ = Math.floor(Math.random() * this.rect.height);
               _loc7_ = Math.floor(Math.random() * this.rect.height);
               break;
            case 2:
               _loc4_ = Math.floor(Math.random() * this.rect.width);
               _loc5_ = Math.floor(Math.random() * this.rect.width);
               _loc6_ = this.rect.height + _loc2_.height;
               _loc7_ = this.rect.y - _loc2_.height;
               break;
            case 3:
               _loc4_ = this.rect.x - _loc2_.width;
               _loc5_ = this.rect.width + _loc2_.width;
               _loc6_ = Math.floor(Math.random() * this.rect.height);
               _loc7_ = Math.floor(Math.random() * this.rect.height);
         }
         _loc2_.x = _loc4_;
         _loc2_.y = _loc6_;
         _loc2_.play();
         this.addChild(_loc2_);
         TweenLite.to(_loc2_,this.speed,{
            "ease":Linear.easeNone,
            "x":_loc5_,
            "y":_loc7_,
            "onComplete":this.onFinishTween,
            "onCompleteParams":[_loc2_]
         });
      }
      
      private function onFinishTween(param1:MovieClip) : void
      {
         if(param1 != null)
         {
            this.removeChild(param1);
         }
      }
   }
}

package net.bigpoint.darkorbit.mine
{
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   
   public class Mine
   {
      
      public var clip:DisplayObject;
      
      public var typeID:int;
      
      public var hash:String;
      
      public var posX:int;
      
      public var posY:int;
      
      public var pulseColorId:int;
      
      public var shockwaveColorID:int;
      
      public var pulseClip:MovieClip;
      
      public var yMov:int;
      
      public var moveSpeed:Number = 1;
      
      public function Mine(param1:int, param2:String, param3:int, param4:int, param5:int = 0, param6:int = 0)
      {
         super();
         this.typeID = param1;
         this.hash = param2;
         this.posX = param3;
         this.posY = param4;
         this.pulseColorId = param5;
         this.shockwaveColorID = param6;
      }
   }
}

package net.bigpoint.darkorbit.mine
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.TimerEvent;
   import flash.geom.ColorTransform;
   import flash.utils.Timer;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.combat.CombatManager;
   import net.bigpoint.darkorbit.combat.ExplosionPattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   
   public class MineManager
   {
      
      public static const logger:ILogger = Log.getLogger("MineManager");
      
      private var mines:Array = [];
      
      private var collectableLayer:Sprite;
      
      private var combatManager:CombatManager;
      
      private var animationTimer:Timer;
      
      private var animations:Array = [];
      
      private var moveTimer:Timer = new Timer(200);
      
      private var moveDelta:int = 12;
      
      private var clip:DisplayObject;
      
      private var timerStarted:Boolean = false;
      
      public function MineManager(param1:Sprite, param2:CombatManager)
      {
         super();
         this.combatManager = param2;
         this.collectableLayer = param1;
         this.animationTimer = new Timer(25,0);
         this.animationTimer.addEventListener(TimerEvent.TIMER,this.handleAnimationTimerTick);
         this.animationTimer.start();
      }
      
      public static function getRandomCount(param1:int, param2:int) : int
      {
         return param1 + Math.floor(Math.random() * (param2 - param1 + 1));
      }
      
      public function removeMine(param1:String, param2:Boolean = false) : Boolean
      {
         var _loc3_:int = 0;
         var _loc4_:Mine = null;
         var _loc5_:DisplayObject = null;
         var _loc6_:MinePattern = null;
         var _loc7_:ExplosionPattern = null;
         _loc3_ = 0;
         while(_loc3_ < this.mines.length)
         {
            _loc4_ = this.mines[_loc3_] as Mine;
            if(_loc4_.hash == param1)
            {
               _loc5_ = _loc4_.clip;
               if(_loc5_ != null)
               {
                  this.collectableLayer.removeChild(_loc5_);
                  this.removeFromAnimations(_loc5_);
                  ScreenManager.stopAnimation(_loc5_);
                  if(_loc4_.pulseClip != null)
                  {
                     ScreenManager.stopAnimation(_loc4_.pulseClip);
                     if(_loc5_ is BitmapClip)
                     {
                        (_loc5_ as BitmapClip).removeChild(_loc4_.pulseClip);
                     }
                     else if(_loc5_ is MovieClip)
                     {
                        (_loc5_ as MovieClip).removeChild(_loc4_.pulseClip);
                     }
                  }
               }
               if(param2)
               {
                  if(_loc4_.typeID == MinePattern.MINE_EMP01)
                  {
                     this.combatManager.addEMPtoMap(_loc4_.posX,_loc4_.posY);
                  }
                  else
                  {
                     _loc6_ = PatternManager.minePatterns[int(_loc4_.typeID)] as MinePattern;
                     _loc7_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_MINE_EXPLOSION,_loc6_.explodeType);
                     this.combatManager.showPyroEffect(_loc4_.posX,_loc4_.posY,_loc7_);
                     if(_loc4_.shockwaveColorID > 0)
                     {
                        this.combatManager.showShockwave(0,_loc4_.posX,_loc4_.posY,true);
                     }
                  }
               }
               this.mines.splice(_loc3_,1);
               return true;
            }
            _loc3_++;
         }
         return false;
      }
      
      public function init() : void
      {
         var _loc1_:XML = Main.gameXML;
         if(_loc1_ == null)
         {
            Main.fatalError("game xml not loaded - terminating process");
         }
      }
      
      public function createMine(param1:String, param2:int, param3:int, param4:int, param5:int = 0, param6:int = 0) : void
      {
         var _loc7_:Mine = new Mine(param2,param1,param3,param4,param5,param6);
         var _loc8_:MinePattern = PatternManager.minePatterns[int(param2)] as MinePattern;
         this.mines.push(_loc7_);
         if(ResourceManager.fileCollection.isLoaded(_loc8_.getResKey()))
         {
            this.attachClip(_loc7_,_loc8_);
         }
         else
         {
            ResourceManager.fileCollection.load(_loc8_.getResKey(),this.handleClipLoaded);
         }
      }
      
      private function attachClip(param1:Mine, param2:MinePattern) : void
      {
         var _loc3_:DisplayObject = null;
         var _loc4_:int = 0;
         var _loc5_:MovieClip = null;
         var _loc6_:MinePulsePattern = null;
         var _loc7_:ColorTransform = null;
         if(param2.useBitmapClip)
         {
            _loc3_ = new BitmapClip(ResourceManager.getMovieClip(param2.resKey,"mc"),param2.resKey);
         }
         else
         {
            _loc3_ = ResourceManager.getMovieClip(param2.resKey,"mc");
            MovieClip(_loc3_).mouseEnabled = Main.mouseEventsEnabled;
            MovieClip(_loc3_).mouseChildren = Main.mouseEventsEnabled;
         }
         if(!this.timerStarted && param2.shake)
         {
            this.moveTimer.addEventListener(TimerEvent.TIMER,this.moveMines);
            this.moveTimer.start();
            this.timerStarted = true;
         }
         _loc3_.x = param1.posX;
         _loc3_.y = param1.posY;
         if(_loc3_ is MovieClip)
         {
            _loc4_ = Math.random() * MovieClip(_loc3_).framesLoaded;
            MovieClip(_loc3_).gotoAndStop(_loc4_);
         }
         else if(_loc3_ is BitmapClip)
         {
            _loc4_ = Math.random() * BitmapClip(_loc3_).framesLoaded;
            BitmapClip(_loc3_).gotoAndStop(_loc4_);
         }
         this.animations.push(_loc3_);
         this.animations.push(_loc3_);
         param1.yMov = getRandomCount(0,this.moveDelta);
         param1.clip = _loc3_;
         _loc3_.alpha = 0;
         TweenLite.to(_loc3_,0.3,{
            "ease":Linear.easeNone,
            "alpha":1
         });
         if(param1.pulseColorId > 0 && !param2.hasStaticEffect)
         {
            _loc5_ = ResourceManager.getMovieClip("minePulse","mc");
            _loc6_ = PatternManager.minePulsePatterns[param1.pulseColorId] as MinePulsePattern;
            _loc7_ = new ColorTransform();
            _loc7_.color = _loc6_.color;
            _loc7_.alphaMultiplier = _loc6_.alpha;
            _loc5_.scaleX = _loc6_.scale;
            _loc5_.scaleY = _loc6_.scale;
            _loc5_.transform.colorTransform = _loc7_;
            param1.pulseClip = _loc5_;
            if(param2.useBitmapClip)
            {
               (_loc3_ as BitmapClip).addChild(_loc5_);
            }
            else
            {
               (_loc3_ as MovieClip).addChild(_loc5_);
            }
            this.playPulseAnimation(_loc5_,15);
         }
         this.collectableLayer.addChild(_loc3_);
      }
      
      private function playPulseAnimation(param1:MovieClip, param2:int) : void
      {
         var _loc3_:int = param1.framesLoaded;
         var _loc4_:Number = _loc3_ / param2;
         param1.gotoAndStop(1);
         TweenMax.to(param1,_loc4_,{
            "ease":Linear.easeNone,
            "frame":_loc3_,
            "repeat":-1
         });
      }
      
      private function handleClipLoaded(param1:SWFFinisher) : void
      {
         var _loc2_:Mine = null;
         var _loc3_:MinePattern = null;
         var _loc4_:int = 0;
         while(_loc4_ < this.mines.length)
         {
            _loc2_ = this.mines[_loc4_];
            _loc3_ = PatternManager.minePatterns[int(_loc2_.typeID)] as MinePattern;
            if(_loc3_.getResKey() == param1.fileVO.id)
            {
               this.attachClip(_loc2_,_loc3_);
            }
            _loc4_++;
         }
      }
      
      private function handleAnimationTimerTick(param1:TimerEvent) : void
      {
         var _loc2_:DisplayObject = null;
         for each(_loc2_ in this.animations)
         {
            if(_loc2_ is MovieClip)
            {
               if(MovieClip(_loc2_).currentFrame == MovieClip(_loc2_).framesLoaded)
               {
                  MovieClip(_loc2_).gotoAndStop(1);
               }
               else
               {
                  MovieClip(_loc2_).nextFrame();
               }
            }
            else if(_loc2_ is BitmapClip)
            {
               if(BitmapClip(_loc2_).frame == BitmapClip(_loc2_).framesLoaded)
               {
                  BitmapClip(_loc2_).frame = 1;
               }
               else
               {
                  BitmapClip(_loc2_).frame = BitmapClip(_loc2_).frame + 1;
               }
            }
         }
      }
      
      private function removeFromAnimations(param1:DisplayObject) : void
      {
         var _loc2_:DisplayObject = null;
         var _loc3_:int = 0;
         while(_loc3_ < this.animations.length)
         {
            _loc2_ = this.animations[_loc3_] as DisplayObject;
            if(param1 == _loc2_)
            {
               this.animations.splice(_loc3_,1);
               return;
            }
            _loc3_++;
         }
      }
      
      public function cleanup() : void
      {
         var _loc1_:int = 0;
         var _loc2_:Mine = null;
         var _loc3_:DisplayObject = null;
         this.moveTimer.stop();
         this.moveTimer.removeEventListener(TimerEvent.TIMER,this.moveMines);
         _loc1_ = 0;
         while(_loc1_ < this.mines.length)
         {
            _loc2_ = this.mines[_loc1_] as Mine;
            _loc3_ = _loc2_.clip;
            if(_loc3_ != null)
            {
               this.collectableLayer.removeChild(_loc3_);
               ScreenManager.stopAnimation(_loc3_);
               if(_loc2_.pulseClip != null)
               {
                  ScreenManager.stopAnimation(_loc2_.pulseClip);
                  if(_loc3_ is BitmapClip)
                  {
                     (_loc3_ as BitmapClip).removeChild(_loc2_.pulseClip);
                  }
                  else if(_loc3_ is MovieClip)
                  {
                     (_loc3_ as MovieClip).removeChild(_loc2_.pulseClip);
                  }
               }
            }
            _loc1_++;
         }
         this.mines = [];
      }
      
      private function moveMines(param1:TimerEvent) : void
      {
         var _loc4_:Mine = null;
         var _loc2_:int = int(this.mines.length);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            _loc4_ = this.mines[_loc3_];
            this.clip = _loc4_.clip;
            if(this.clip)
            {
               if(_loc4_.yMov < this.moveDelta)
               {
                  this.clip.y += _loc4_.moveSpeed;
                  ++_loc4_.yMov;
               }
               else
               {
                  _loc4_.yMov = 0;
                  _loc4_.moveSpeed = ~_loc4_.moveSpeed + 1;
               }
            }
            _loc3_++;
         }
      }
   }
}

package net.bigpoint.darkorbit.mine
{
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   
   public class MinePattern extends ResourcePattern
   {
      
      public static const MINE_ACM1:int = 1;
      
      public static const MINE_EMP01:int = 2;
      
      public static const MINE_SAB01:int = 3;
      
      public static const MINE_DDM01:int = 4;
      
      public var explodeType:int = 0;
      
      public var useBitmapClip:Boolean;
      
      public var shake:Boolean;
      
      public var hasStaticEffect:Boolean;
      
      public function MinePattern(param1:int, param2:String)
      {
         super(param1,param2);
      }
   }
}

package net.bigpoint.darkorbit.mine
{
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   
   public class MinePulsePattern extends ResourcePattern
   {
      
      public var color:uint;
      
      public var alpha:Number;
      
      public var scale:Number;
      
      public function MinePulsePattern(param1:int, param2:String, param3:uint, param4:Number, param5:Number)
      {
         super(param1,param2);
         this.color = param3;
         this.alpha = param4;
         this.scale = param5;
      }
   }
}

package net.bigpoint.darkorbit.nebula
{
   import net.bigpoint.darkorbit.pattern.DynamicResource;
   
   public class Nebula extends DynamicResource
   {
      
      private var layerIndex:int;
      
      public function Nebula(param1:int, param2:int)
      {
         super(param1);
         this.layerIndex = param2;
      }
      
      public function getLayerIndex() : int
      {
         return this.layerIndex;
      }
   }
}

package net.bigpoint.darkorbit.nebula
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class NebulaManager
   {
      
      public static const logger:ILogger = Log.getLogger("NebulaManager");
      
      private var nebulas:Array;
      
      private var map:Map;
      
      public function NebulaManager(param1:Map)
      {
         super();
         this.map = param1;
         this.nebulas = [];
      }
      
      public function showNebula(param1:int, param2:int) : void
      {
         var _loc3_:Nebula = new Nebula(param1,param2);
         this.nebulas.push(_loc3_);
         var _loc4_:ResourcePattern = PatternManager.nebulaPatterns[int(param1)];
         if(ResourceManager.fileCollection.isLoaded(_loc4_.getResKey()))
         {
            this.attachClip(_loc3_,_loc4_);
         }
         else
         {
            ResourceManager.fileCollection.load(_loc4_.getResKey(),this.onClipLoaded);
         }
      }
      
      private function attachClip(param1:Nebula, param2:ResourcePattern) : void
      {
      }
      
      private function onClipLoaded(param1:SWFFinisher) : void
      {
         var _loc3_:Nebula = null;
         var _loc4_:ResourcePattern = null;
         if(Settings.unloadResources)
         {
            this.map.addFinisherToList(param1);
         }
         var _loc2_:int = 0;
         while(_loc2_ < this.nebulas.length)
         {
            _loc3_ = this.nebulas[_loc2_];
            if(_loc3_ != null)
            {
               _loc4_ = PatternManager.nebulaPatterns[int(_loc3_.getTypeID())];
               if(_loc4_.getResKey() == param1.fileVO.id)
               {
                  this.attachClip(_loc3_,_loc4_);
               }
            }
            _loc2_++;
         }
      }
      
      public function updateNebula() : void
      {
      }
      
      public function cleanup() : void
      {
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.BufferedShip;
   import net.bigpoint.darkorbit.ship.Ship;
   import net.bigpoint.darkorbit.ship.ShipManager;
   import net.bigpoint.darkorbit.station.RelayStation;
   import net.bigpoint.darkorbit.station.Station;
   
   public class AssetAssembly extends BaseAssembly
   {
      
      private static var _instance:AssetAssembly;
      
      private var map:Map;
      
      private var delegateDict:Dictionary;
      
      private var main:Main;
      
      public function AssetAssembly(param1:Function)
      {
         super();
         if(param1 != hidden)
         {
            throw new Error("AssetAssembly is a Singleton and can only be accessed through AssetAssembly.getInstance()");
         }
         this.main = _main;
         this.initDelegateDict();
      }
      
      public static function getInstance() : AssetAssembly
      {
         if(_instance == null)
         {
            _instance = new AssetAssembly(hidden);
         }
         return _instance;
      }
      
      private static function hidden() : void
      {
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.CREATE_ASSET] = this.assembleCreateAssetCommand;
      }
      
      public function assembleCommand(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      public function assembleCreateAssetCommand(param1:Array) : void
      {
         var _loc9_:Station = null;
         var _loc10_:Station = null;
         var _loc25_:ShipManager = null;
         var _loc26_:Ship = null;
         var _loc27_:BufferedShip = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         var _loc4_:String = String(param1[6]);
         var _loc5_:Number = Number(param1[9]);
         var _loc6_:Number = Number(param1[10]);
         var _loc7_:RelayStation = new RelayStation(_loc2_,_loc3_,_loc4_,_loc5_,_loc6_,this.main.screenManager.map);
         _loc7_.mouseEnabled = true;
         _loc7_.x = _loc5_;
         _loc7_.y = _loc6_;
         this.main.screenManager.map.relayStationArray.push(_loc7_);
         this.main.screenManager.getShipLayer().addChild(_loc7_);
         var _loc8_:Array = this.main.screenManager.map.getStationManager().getStations();
         var _loc11_:int = 0;
         while(_loc11_ < _loc8_.length)
         {
            _loc9_ = _loc8_[_loc11_] as Station;
            if(_loc9_.getTypeID() == 4)
            {
               _loc10_ = _loc9_;
            }
            _loc11_++;
         }
         _loc7_.healthStation = _loc10_;
         var _loc12_:int = _loc2_;
         var _loc13_:int = 84;
         var _loc14_:int = 0;
         var _loc15_:String = "nan";
         var _loc16_:String = _loc4_;
         var _loc17_:int = Hero.factionID;
         var _loc18_:int = 1;
         var _loc19_:int = int(param1[11]);
         var _loc20_:Boolean = false;
         var _loc21_:int = 0;
         var _loc22_:int = 0;
         var _loc23_:Boolean = true;
         var _loc24_:Boolean = true;
         if(_loc13_ == 84 || _loc13_ == 85)
         {
            _loc14_ = 1;
         }
         _loc13_ = this.main.getConnectionManager().getMappedShipType(_loc13_);
         if(!Settings.createOpponents)
         {
            return;
         }
         if(_loc17_ > 3)
         {
            _loc17_ = 0;
         }
         if(_loc12_ == Hero.userID)
         {
            return;
         }
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc25_ = this.map.getShipManager();
            if(_loc25_ != null)
            {
               _loc26_ = _loc25_.createShip(_loc13_,_loc12_,_loc5_,_loc6_,1,_loc16_,_loc15_,_loc17_,_loc18_,_loc21_,_loc19_,_loc14_,_loc20_,_loc22_,_loc23_);
               if(_loc26_ != null)
               {
                  _loc26_.setCloak(_loc24_);
               }
               if(this.main.getConnectionManager()._watchedShipInits[_loc12_])
               {
                  this.main.getGroupManager().initMemberTarget(_loc12_);
               }
            }
         }
         else
         {
            _loc27_ = new BufferedShip(_loc13_,_loc12_,_loc5_,_loc6_,1,_loc16_,_loc15_,_loc17_,_loc18_,_loc21_,_loc19_,_loc14_,_loc20_,_loc22_,_loc23_,_loc24_);
            this.main.getConnectionManager().bufferedShips.push(_loc27_);
         }
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import net.bigpoint.darkorbit.Main;
   
   public class BaseAssembly
   {
      
      protected static var _main:Main;
      
      public function BaseAssembly()
      {
         super();
      }
      
      public static function setMain(param1:Main) : void
      {
         _main = param1;
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import com.bigpoint.utils.BPLocale;
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.InGameCatalog;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.collectable.CollectableManager;
   import net.bigpoint.darkorbit.config.items.SysItem;
   import net.bigpoint.darkorbit.gui.LogMessageProfileFactory;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.effects.CollectorBeamEffect;
   import net.bigpoint.darkorbit.ship.effects.EffectBase;
   import net.bigpoint.darkorbit.ship.effects.EffectIDList;
   import net.bigpoint.darkorbit.ship.effects.EffectsManager;
   import net.bigpoint.darkorbit.ship.effects.EntityEffectEvent;
   import net.bigpoint.darkorbit.vo.ItemSysMine;
   
   public class BoxCollectResponseAssembly extends BaseAssembly
   {
      
      private static var _instance:BoxCollectResponseAssembly;
      
      private var param1:String;
      
      private var param2:String;
      
      private var delegateDict:Dictionary;
      
      private var mineTypesDict:Dictionary;
      
      private var main:Main;
      
      private var effectsManager:EffectsManager = EffectsManager.getInstance();
      
      public function BoxCollectResponseAssembly(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("SettingsAssembly is a Singleton and can only be accessed through BoxCollectResponseAssembly.getInstance()");
         }
         this.main = _main;
         this.initDelegateDict();
      }
      
      public static function getInstance() : BoxCollectResponseAssembly
      {
         if(_instance == null)
         {
            _instance = new BoxCollectResponseAssembly(hidden);
         }
         return _instance;
      }
      
      private static function hidden() : void
      {
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.BOX_CONTENT_ORE] = this.assembleOre;
         this.delegateDict[ServerCommands.BOX_CONTENT_JACKPOT] = this.assembleJackpot;
         this.delegateDict[ServerCommands.BOX_CONTENT_CREDITS] = this.assembleCredits;
         this.delegateDict[ServerCommands.BOX_CONTENT_URIDIUM] = this.assembleUridium;
         this.delegateDict[ServerCommands.BOX_CONTENT_EXPERIENCE_POINTS] = this.assembleExperiencePoints;
         this.delegateDict[ServerCommands.BOX_CONTENT_HONOR_POINTS] = this.assembleHonorPoints;
         this.delegateDict[ServerCommands.BOX_CONTENT_HITPOINTS] = this.assembleHitPoints;
         this.delegateDict[ServerCommands.BOX_CONTENT_FIREWORK] = this.assembleFireworks;
         this.delegateDict[ServerCommands.BOX_CONTENT_ROCKETS] = this.assembleRockets;
         this.delegateDict[ServerCommands.BOX_CONTENT_LASER_BATTERIES] = this.assembleLaserBatteries;
         this.delegateDict[ServerCommands.BOX_CONTENT_BANKING_MULTIPLIKATOR] = this.assembleBankingMultiplier;
         this.delegateDict[ServerCommands.BOX_CONTENT_DEDUCTION_HITPOINTS] = this.assembleHitpointDeduct;
         this.delegateDict[ServerCommands.BOX_CONTENT_EXTRA_ENERGY] = this.assembleExtraEnergy;
         this.delegateDict[ServerCommands.BOX_CONTENT_JUMP_VOUCHERS] = this.assembleJumpVoucherLoot;
         this.delegateDict[ServerCommands.BOX_CONTENT_MINE] = this.assembleMineLoot;
         this.delegateDict[ServerCommands.BOX_CONTENT_PET_FUEL] = this.assemblePetFuelLoot;
         this.delegateDict[ServerCommands.ITEM_LOOT] = this.assembleItemLoot;
         this.delegateDict[ServerCommands.BOX_TOO_BIG] = this.assembleBoxTooBig;
         this.delegateDict[ServerCommands.BOX_ALREADY_COLLECTED] = this.assembleAlreadyCollectedBox;
         this.delegateDict[ServerCommands.MINE_EXPLODE] = this.assembleMineExplode;
         this.delegateDict[ServerCommands.AVAILABLE_SHIPS_ON_MAP] = this.assembleAvailableShipsOnMap;
         this.delegateDict[ServerCommands.ROCKETLAUNCHER] = this.assembleRocketLauncher;
         this.delegateDict[ServerCommands.LOGFILE] = this.assembleLogFile;
         this.delegateDict[ServerCommands.DISCOUNT_MESSAGE] = this.assembleDiscountMessage;
         this.delegateDict[ServerCommands.SET_ITEM_LOOTING_ACTIVE] = this.assembleItemLootActive;
         this.delegateDict[ServerCommands.SET_ITEM_LOOTING_CANCELLED] = this.assembleItemLootCancelling;
         this.mineTypesDict = new Dictionary();
         this.mineTypesDict[ServerCommands.MINE_ACM] = new ItemSysMine("mine_acm-01","ACM-01");
         this.mineTypesDict[ServerCommands.MINE_DDM] = new ItemSysMine("mine_ddm-01","DDM-01");
         this.mineTypesDict[ServerCommands.MINE_EMP] = new ItemSysMine("mine_empm-01","EMPM-01");
         this.mineTypesDict[ServerCommands.MINE_SAB] = new ItemSysMine("mine_sabm-01","SABM-01");
         this.delegateDict[ServerCommands.NEWBIE_BOOSTER] = this.assembleBoosterMessage;
      }
      
      private function assembleBoosterMessage(param1:Array) : void
      {
         var _loc5_:String = null;
         var _loc2_:String = param1[2];
         var _loc3_:String = param1[4];
         var _loc4_:int = int(param1[5]);
         switch(_loc3_)
         {
            case ServerCommands.BOOSTER_QUEST_REWARD:
               _loc5_ = "msg_info_booster_quest_reward_higher_loot_level";
               break;
            case ServerCommands.BOOSTER_BONUS_BOX:
               _loc5_ = "msg_info_booster_bonus_box_higher_box_content_level";
         }
         if(_loc4_ > 0)
         {
            this.main.getGuiManager().writeToLog(BPLocale.getText(_loc5_).replace(/%AMOUNT%/,_loc4_),_loc2_);
         }
      }
      
      private function assembleDiscountMessage(param1:Array) : void
      {
         var _loc5_:String = null;
         var _loc2_:String = param1[2];
         var _loc3_:String = param1[4];
         var _loc4_:int = int(param1[5]);
         switch(_loc3_)
         {
            case ServerCommands.LOOT_DISCOUNT:
               if(_loc4_ > 0)
               {
                  _loc5_ = "msg_warning_less_box_content_level";
                  break;
               }
               _loc5_ = "msg_warning_no_box_content_level";
               break;
            case ServerCommands.REWARD_DISCOUNT:
               if(_loc4_ > 0)
               {
                  _loc5_ = "msg_warning_less_loot_level";
                  break;
               }
               _loc5_ = "msg_warning_no_loot_level";
         }
         this.main.getGuiManager().writeToLog(BPLocale.getText(_loc5_).replace(/%AMOUNT%/,_loc4_),_loc2_);
      }
      
      private function assembleLogFile(param1:Array) : void
      {
         var _loc5_:String = null;
         var _loc2_:int = int(param1[4]);
         var _loc3_:String = param1[2];
         var _loc4_:int = int(param1[5]);
         if(_loc2_ == 1)
         {
            _loc5_ = BPLocale.getText("log_msg_gather_log-file_s");
         }
         else
         {
            _loc5_ = BPLocale.getText("log_msg_gather_log-file_p").replace(/%COUNT%/,_loc2_);
         }
         this.main.getGuiManager().writeToLog(_loc5_,_loc3_);
      }
      
      private function assembleRocketLauncher(param1:Array) : void
      {
         var _loc5_:String = null;
         var _loc2_:int = int(param1[4]);
         var _loc3_:int = int(param1[5]);
         var _loc4_:String = param1[2];
         _loc5_ = BPLocale.getText("getbonusrok").replace(/%!/,BPLocale.roundInteger(_loc3_)).replace(/%2!/,InGameCatalog.instance.rocketNames[_loc2_]);
         this.main.getGuiManager().writeToLog(_loc5_,_loc4_);
      }
      
      private function assembleMineLoot(param1:Array) : void
      {
         var _loc6_:String = null;
         var _loc2_:String = param1[4];
         var _loc3_:int = int(param1[5]);
         var _loc4_:String = "log_msg_gather_mine_";
         var _loc5_:String = param1[2];
         if(_loc3_ == 1)
         {
            _loc6_ = BPLocale.getText(_loc4_ + "s");
         }
         else
         {
            _loc6_ = BPLocale.getText(_loc4_ + "p").replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
         }
         _loc6_ = _loc6_.replace(/%TYPE%/,(this.mineTypesDict[_loc2_] as ItemSysMine).name);
         this.main.getGuiManager().writeToLog(_loc6_,_loc5_);
      }
      
      private function assembleAvailableShipsOnMap(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         this.main.getGuiManager().writeToLog(BPLocale.getText("msg_jackpot_players_left").replace(/%COUNT%/,param1[4]),_loc2_);
      }
      
      private function assembleMineExplode(param1:Array) : void
      {
         var _loc2_:String = param1[4];
         var _loc3_:Map = this.main.screenManager.map;
         if(_loc3_ != null)
         {
            this.main.screenManager.map.getMineManager().removeMine(_loc2_,true);
         }
      }
      
      private function assembleAlreadyCollectedBox(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:Map = this.main.screenManager.map;
         if(_loc3_ != null)
         {
            this.main.screenManager.map.getCollectableManager().setLastSelectedHash(null);
         }
         this.main.getGuiManager().writeToLog(BPLocale.getText("boxdisabled"),_loc2_);
      }
      
      private function assembleBoxTooBig(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:Map = this.main.screenManager.map;
         if(_loc3_ != null)
         {
            this.main.screenManager.map.getCollectableManager().setLastSelectedHash(null);
         }
         this.main.getGuiManager().writeToLog(BPLocale.getText("boxtoobig"),_loc2_);
      }
      
      private function assembleExtraEnergy(param1:Array) : void
      {
         var _loc5_:String = null;
         var _loc2_:int = int(param1[4]);
         var _loc3_:String = param1[2];
         var _loc4_:String = "log_msg_gather_extra-energy_";
         if(_loc2_ > 1)
         {
            _loc5_ = BPLocale.getText(_loc4_ + "p").replace(/%COUNT%/,_loc2_);
         }
         else
         {
            _loc5_ = BPLocale.getText(_loc4_ + "s");
         }
         this.main.getGuiManager().writeToLog(_loc5_,_loc3_);
      }
      
      private function assembleJumpVoucherLoot(param1:Array) : void
      {
         var _loc5_:String = null;
         var _loc2_:int = int(param1[4]);
         var _loc3_:String = param1[2];
         var _loc4_:String = "log_msg_gather_jump-voucher_";
         if(_loc2_ == 1)
         {
            _loc5_ = BPLocale.getText(_loc4_ + "s");
         }
         else
         {
            _loc5_ = BPLocale.getText(_loc4_ + "p").replace(/%COUNT%/,_loc2_);
         }
         this.main.getGuiManager().writeToLog(_loc5_,_loc3_);
      }
      
      private function assemblePetFuelLoot(param1:Array) : void
      {
         var _loc5_:String = null;
         var _loc2_:int = int(param1[4]);
         var _loc3_:String = param1[2];
         var _loc4_:String = "log_msg_gather_pet-fuel_";
         if(_loc2_ == 1)
         {
            _loc5_ = BPLocale.getText(_loc4_ + "s");
         }
         else
         {
            _loc5_ = BPLocale.getText(_loc4_ + "p").replace(/%COUNT%/,_loc2_);
         }
         this.main.getGuiManager().writeToLog(_loc5_,_loc3_);
      }
      
      private function assembleItemLoot(param1:Array) : void
      {
         var _loc7_:String = null;
         var _loc2_:String = param1[4];
         var _loc3_:int = int(param1[5]);
         var _loc4_:String = param1[2];
         var _loc5_:String = "log_msg_gather_";
         var _loc6_:SysItem = InGameCatalog.getInstance().sysItems[_loc2_] as SysItem;
         if(_loc3_ == 1)
         {
            _loc7_ = BPLocale.getText(_loc5_ + _loc6_.category + "_s").replace(/%TYPE%/,_loc6_.name);
         }
         else
         {
            _loc7_ = BPLocale.getText(_loc5_ + _loc6_.category + "_p").replace(/%TYPE%/,_loc6_.name).replace(/%COUNT%/,BPLocale.roundInteger(_loc3_));
         }
         this.main.getGuiManager().writeToLog(_loc7_,_loc4_);
      }
      
      private function assembleItemLootActive(param1:Array) : void
      {
         var _loc5_:CollectorBeamEffect = null;
         var _loc2_:int = int(param1[4]);
         var _loc3_:MapObject = this.main.screenManager.map.getShipManager().getHero();
         if(!this.effectsManager.doesEffectExistOn(_loc3_,EffectIDList.COLLECTOR_BEAM))
         {
            _loc5_ = new CollectorBeamEffect(EffectIDList.COLLECTOR_BEAM,PatternManager.effectPatterns[EffectIDList.COLLECTOR_BEAM],false,[_loc2_,_loc3_,true]);
            this.effectsManager.addEffect(_loc5_,_loc3_,EffectsManager.BEHIND_MAP_OBJECT_EFFECT);
         }
         var _loc4_:String = BPLocale.getText("msg_loot_harvest_init");
         this.main.getGuiManager().writeToLog(_loc4_);
      }
      
      private function assembleItemLootCancelling(param1:Array) : void
      {
         var _loc2_:MapObject = this.main.screenManager.map.getShipManager().getHero();
         this.effectsManager.removeEffectByIdFromEntity(_loc2_,EffectIDList.COLLECTOR_BEAM);
         var _loc3_:String = BPLocale.getText("msg_loot_error_generic");
         this.main.getGuiManager().writeToLog(_loc3_);
      }
      
      private function handleLootComplete(param1:EntityEffectEvent) : void
      {
         var _loc2_:MapObject = this.main.screenManager.map.getShipManager().getHero();
         var _loc3_:EffectBase = this.effectsManager.getEffectFromEntity(_loc2_,EffectIDList.COLLECTOR_BEAM);
         if(_loc3_ != null)
         {
            _loc3_.removeEventListener(EntityEffectEvent.EFFECT_FINISHED,this.handleLootComplete);
         }
      }
      
      private function handleStopLooting(param1:EntityEffectEvent) : void
      {
         var _loc2_:MapObject = this.main.screenManager.map.getShipManager().getHero();
         var _loc3_:EffectBase = this.effectsManager.getEffectFromEntity(_loc2_,EffectIDList.COLLECTOR_BEAM);
         if(_loc3_ != null)
         {
            _loc3_.removeEventListener(EntityEffectEvent.EFFECT_CANCELLED,this.handleStopLooting);
         }
      }
      
      private function assembleHitpointDeduct(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:int = int(param1[4]);
         this.main.getGuiManager().writeToLog(BPLocale.getText("minushp").replace(this.param1,_loc3_),_loc2_);
      }
      
      private function assembleBankingMultiplier(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:int = int(param1[4]);
         this.main.getGuiManager().writeToLog(BPLocale.getText("banking_multiplier_active").replace(this.param1,_loc3_),_loc2_);
      }
      
      private function assembleLaserBatteries(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:int = parseInt(param1[4]);
         var _loc4_:int = int(param1[5]);
         this.main.getGuiManager().writeToLog(BPLocale.getText("getbonuslas").replace(this.param1,_loc4_).replace(this.param2,InGameCatalog.instance.battery_types[_loc3_]),_loc2_);
      }
      
      private function assembleRockets(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:int = int(param1[4]);
         var _loc4_:int = int(param1[5]);
         this.main.getGuiManager().writeToLog(BPLocale.getText("getbonusrok").replace(this.param1,_loc4_).replace(this.param2,InGameCatalog.instance.rocketNames[_loc3_]),_loc2_);
      }
      
      private function assembleFireworks(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:int = int(param1[4]);
         var _loc4_:int = int(param1[5]);
         this.main.getGuiManager().writeToLog(BPLocale.getText("log_collected_firework").replace(this.param1,_loc4_).replace(this.param2,InGameCatalog.instance.explosive_types[_loc3_]),_loc2_);
      }
      
      private function assembleHitPoints(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:Number = parseFloat(param1[4]);
         this.main.getGuiManager().writeToLog(BPLocale.getText("gethp").replace(this.param1,_loc3_),_loc2_);
      }
      
      private function assembleHonorPoints(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:Number = Number(param1[4]);
         this.main.getGuiManager().writeToLog(BPLocale.getText("gatherep").replace(this.param1,_loc3_),_loc2_);
         Hero.honorPoints = param1[5];
         this.updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_2,SimpleElement.TYPE_HONOR);
      }
      
      private function assembleExperiencePoints(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:Number = parseFloat(param1[4]);
         this.main.getGuiManager().writeToLog(BPLocale.getText("getexp").replace(this.param1,BPLocale.roundInteger(_loc3_)),_loc2_);
         Hero.experiencePoints = parseFloat(param1[5]);
         this.updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_2,SimpleElement.TYPE_EXPERIENCE);
         Hero.level = int(param1[6]);
         this.updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_2,SimpleElement.TYPE_LEVEL);
      }
      
      private function assembleUridium(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:Number = parseFloat(param1[4]);
         this.main.getGuiManager().writeToLog(BPLocale.getText("geturidium").replace(this.param1,BPLocale.roundInteger(_loc3_)),_loc2_);
         Hero.uridiumAmount = parseFloat(param1[5]);
         this.updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_3,SimpleElement.TYPE_URIDIUM);
      }
      
      private function assembleCredits(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:Number = parseFloat(param1[4]);
         this.main.getGuiManager().writeToLog(BPLocale.getText("getcredits").replace(this.param1,BPLocale.roundInteger(_loc3_)),_loc2_);
         Hero.creditsAmount = Number(param1[5]);
         this.updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_3,SimpleElement.TYPE_CREDITS);
      }
      
      private function assembleJackpot(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:Number = parseFloat(param1[4]);
         this.main.getGuiManager().writeToLog(BPLocale.getText("getjackpot").replace(this.param1,BPLocale.round(_loc3_,2)),_loc2_);
         Hero.jackpotAmount = parseFloat(param1[5]);
         this.updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_3,SimpleElement.TYPE_JACKPOT);
      }
      
      private function assembleOre(param1:Array) : void
      {
         var _loc7_:int = 0;
         var _loc2_:String = param1[2];
         var _loc3_:String = BPLocale.getText("farmresult");
         var _loc4_:int = 4;
         var _loc5_:int = 11;
         var _loc6_:int = _loc4_;
         while(_loc6_ < _loc5_)
         {
            _loc7_ = int(param1[_loc6_]);
            if(_loc7_ > 0)
            {
               _loc3_ += "\n" + _loc7_ + " " + BPLocale.getText(CollectableManager.loot_ore_keys[_loc6_ - _loc4_]);
            }
            _loc6_++;
         }
         if(_loc3_.length != BPLocale.getText("farmresult").length)
         {
            this.main.getGuiManager().writeToLog(_loc3_,_loc2_);
         }
      }
      
      private function updateInfoField(param1:int, param2:int, param3:int) : void
      {
         this.main.getGuiManager().updateInfoField(param1,param2,param3);
      }
      
      public function assembleBoxCollectResponse(param1:Array) : void
      {
         var _loc3_:String = null;
         param1 = this.formatLegacy(param1);
         var _loc2_:String = param1[3];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
         else
         {
            _loc3_ = BPLocale.getText(_loc2_);
            if(_loc3_.length > 0)
            {
               this.main.getGuiManager().writeToLog(_loc3_,param1[2]);
            }
         }
      }
      
      private function formatLegacy(param1:Array) : Array
      {
         if(param1[1] == ServerCommands.BOX_COLLECT_RESPONSE)
         {
            param1[0] = ServerCommands.LOG_MESSAGE;
            param1[1] = LogMessageProfileFactory.STANDARD_MESSAGE;
            param1.unshift("0");
         }
         return param1;
      }
      
      public function setParams(param1:String, param2:String) : void
      {
         this.param1 = param1;
         this.param2 = param2;
      }
   }
}

package net.bigpoint.darkorbit.net
{
   public class ClientCommands
   {
      
      public static const SELECT_SHIP:String = "SES";
      
      public static const COLLECT_ORE:String = "w";
      
      public static const COLLECT_BOX:String = "x";
      
      public static const PORTAL_JUMP:String = "j";
      
      public static const LASER_STOP:String = "G";
      
      public static const SELECT:String = "S";
      
      public static const SELECT_LASER:String = "u";
      
      public static const SELECT_ROCKET:String = "d";
      
      public static const SELECT_CLOAK:String = "CLK";
      
      public static const CONFIGURATION:String = "CFG";
      
      public static const INSTAREPAIR:String = "IR";
      
      public static const ROBOT:String = "ROB";
      
      public static const AROL:String = "ARL";
      
      public static const RLLB:String = "RLC";
      
      public static const AIM:String = "AIM";
      
      public static const FORCE_INIT:String = "i";
      
      public static const SET_SPECIAL_OFFERS_AVAILABLE:String = "SOA";
      
      public static const GROUPSYSTEM:String = "ps";
      
      public static const TELEPORT:String = "tele";
      
      public static const GROUPSYSTEM_PING:String = "png";
      
      public static const GROUPSYSTEM_PING_POSITION:String = "pos";
      
      public static const GROUPSYSTEM_PING_USER:String = "usr";
      
      public static const GROUPSYSTEM_LEAVE:String = "lv";
      
      public static const GROUPSYSTEM_KICK:String = "kick";
      
      public static const GROUPSYSTEM_PROMOTE:String = "lc";
      
      public static const GROUPSYSTEM_SET_REMOTE:String = "s";
      
      public static const GROUPSYSTEM_CHANGE_INVITATON_BEHAVIOUR:String = "i";
      
      public static const GROUPSYSTEM_FOLLOW:String = "flw";
      
      public static const GROUPSYSTEM_BLOCK_INVITATIONS:String = "blk";
      
      public static const ROCKETLAUNCHER:String = "RL";
      
      public static const ROCKETLAUNCHER_ATTACK:String = "A";
      
      public static const ROCKETLAUNCHER_LOAD:String = "L";
      
      public static const ROCKETLAUNCHER_SELECT_ROCKET:String = "SEL";
      
      public static const TRADE_WINDOW_MINIMIZED:String = "TWC";
      
      public static const MINE:String = "MIN";
      
      public static const REQUEST:String = "RQ";
      
      public function ClientCommands()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import com.bigpoint.utils.BPLocale;
   import com.greensock.TweenMax;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.DataEvent;
   import flash.events.Event;
   import flash.events.IOErrorEvent;
   import flash.events.SecurityErrorEvent;
   import flash.events.TimerEvent;
   import flash.external.ExternalInterface;
   import flash.geom.Point;
   import flash.net.XMLSocket;
   import flash.system.Capabilities;
   import flash.system.System;
   import flash.text.TextField;
   import flash.utils.Timer;
   import mx.utils.StringUtil;
   import net.bigpoint.AmmoPrice;
   import net.bigpoint.darkorbit.CommandLog;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.InGameCatalog;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.catalog.SpecialAmmunition;
   import net.bigpoint.darkorbit.collectable.Collectable;
   import net.bigpoint.darkorbit.collectable.CollectablePattern;
   import net.bigpoint.darkorbit.combat.ExplosionPattern;
   import net.bigpoint.darkorbit.combat.RocketPattern;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.map.MiniMap;
   import net.bigpoint.darkorbit.map.MinimapManager;
   import net.bigpoint.darkorbit.menu.ActionButton2;
   import net.bigpoint.darkorbit.menu.SuperActionButton;
   import net.bigpoint.darkorbit.menu.TopMenu;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.pattern.OrePattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.BufferedShip;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   import net.bigpoint.darkorbit.ship.ShipManager;
   import net.bigpoint.darkorbit.ship.effects.BattleRepBotTechEffect;
   import net.bigpoint.darkorbit.ship.effects.EffectIDList;
   import net.bigpoint.darkorbit.ship.effects.EffectsManager;
   import net.bigpoint.darkorbit.ship.pet.Pet;
   import net.bigpoint.darkorbit.station.RelayStation;
   import net.bigpoint.darkorbit.station.Station;
   
   public class ConnectionManager
   {
      
      public static var ATTRIBUTE_SEPERATOR:String = "|";
      
      public static var LIST_SEPERATOR:String = ",";
      
      public static var PARAM_1:String = "%!";
      
      public static var PARAM_2:String = "%2!";
      
      private var lastConnectedServerIP:String;
      
      public var port:int = 8080;
      
      public var xmlSocket:XMLSocket;
      
      private var main:Main;
      
      private var pingTimer:Timer;
      
      public var bufferedShips:Array = [];
      
      public var _watchedShipInits:Object = {};
      
      private var lockedShip:MapObject;
      
      private var settingsAssembly:SettingsAssembly;
      
      private var uiAssembly:UserInterfaceAssembly;
      
      private var attributesAssembly:SetAttributeAssembly;
      
      private var techAssembly:TechAssembly;
      
      private var assetAssembly:AssetAssembly;
      
      private var boxCollectAssembly:BoxCollectResponseAssembly;
      
      private var rocketLauncherAssembly:RocketLauncherAssembly;
      
      private var groupSystemAssembly:GroupSystemAssembly;
      
      private var _isLoggingGameServerIO:Boolean;
      
      private var ioLogger:CommandLog;
      
      private var adminNetworkMonitorTimer:Timer;
      
      private var currentIPAddress:String;
      
      private var connectionMonitorTimer:Timer = new Timer(500,0);
      
      private var skillsAssembly:SkillsAssembly;
      
      private var petAssembly:PetAssembly;
      
      private var mapEventsAssembly:MapEventsAssembly;
      
      private var questAssembly:QuestAssembly;
      
      public var isMapLoaded:Boolean = false;
      
      public var isHeroLoaded:Boolean = false;
      
      private var poiAssembly:POIAssembly;
      
      private var effectsManager:EffectsManager = EffectsManager.getInstance();
      
      public function ConnectionManager(param1:Main)
      {
         super();
         this._isLoggingGameServerIO = false;
         this.main = param1;
         this.uiAssembly = UserInterfaceAssembly.getInstance();
         this.rocketLauncherAssembly = RocketLauncherAssembly.getInstance();
         this.attributesAssembly = SetAttributeAssembly.getInstance();
         this.boxCollectAssembly = BoxCollectResponseAssembly.getInstance();
         this.boxCollectAssembly.setParams(PARAM_1,PARAM_2);
         this.groupSystemAssembly = GroupSystemAssembly.getInstance();
         this.petAssembly = PetAssembly.getInstance();
         this.questAssembly = new QuestAssembly();
         this.questAssembly.setMain(param1);
      }
      
      private function handlePingTick(param1:TimerEvent) : void
      {
         this.sendCommand(ServerCommands.PING);
      }
      
      public function watchShipInit(param1:int) : void
      {
         this._watchedShipInits[param1] = true;
      }
      
      public function unwatchShipInit(param1:int) : void
      {
         delete this._watchedShipInits[param1];
      }
      
      public function connectToMap(param1:int) : void
      {
         var _mapID:int = param1;
         Settings.mapID = _mapID;
         if(this.main.screenManager.map != null)
         {
            this.main.screenManager.map.getStationManager().cleanup();
         }
         this.settingsAssembly = SettingsAssembly.getInstance();
         this.uiAssembly = UserInterfaceAssembly.getInstance();
         if(Settings.defaultGameServer != null)
         {
            this.connect(Settings.defaultGameServer);
         }
         else
         {
            this.connect(Main.mapsXML.map.(@id == _mapID).gameserverIP);
         }
      }
      
      private function handleConnectionLost(param1:Event) : void
      {
         var _loc2_:ShipManager = null;
         this.isHeroLoaded = false;
         this.main.getGroupManager().dispose();
         if(!Hero.isKilled)
         {
            if(this.main.getScheduledDisconnect())
            {
               this.connectToMap(Settings.nextMapID);
            }
            else
            {
               this.main.getGuiManager().removeConnectionWindow();
               this.main.getGuiManager().showConnectionLostWindow();
               if(this.main.screenManager.map != null)
               {
                  this.main.screenManager.map.getCollectableManager().cleanup();
               }
            }
         }
         this.petAssembly.assemblePetDeactivation();
         if(this.main.screenManager.map != null)
         {
            _loc2_ = this.main.screenManager.map.getShipManager();
            if(_loc2_.getHero() != null && _loc2_.getHero().pet != null)
            {
               _loc2_.removeOpponentShip(_loc2_.getHero().pet.userID);
            }
         }
      }
      
      public function connect(param1:String) : void
      {
         this.currentIPAddress = param1;
         this.stopConnectionMonitorTimer();
         if(this.xmlSocket != null)
         {
            this.xmlSocket.removeEventListener(Event.CONNECT,this.handleGameServerConnect);
            this.xmlSocket.removeEventListener(IOErrorEvent.IO_ERROR,this.handleGameServerIOError);
            this.xmlSocket.removeEventListener(DataEvent.DATA,this.onData);
            this.xmlSocket.removeEventListener(Event.CLOSE,this.handleConnectionLost);
            this.xmlSocket.removeEventListener(SecurityErrorEvent.SECURITY_ERROR,this.handleGameServerConnSecurityError);
            if(this.xmlSocket.connected)
            {
               this.xmlSocket.close();
            }
         }
         this.xmlSocket = new XMLSocket();
         this.xmlSocket.addEventListener(Event.CONNECT,this.handleGameServerConnect);
         this.xmlSocket.addEventListener(IOErrorEvent.IO_ERROR,this.handleGameServerIOError);
         this.xmlSocket.addEventListener(SecurityErrorEvent.SECURITY_ERROR,this.handleGameServerConnSecurityError);
         this.xmlSocket.addEventListener(DataEvent.DATA,this.onData);
         this.xmlSocket.addEventListener(Event.CLOSE,this.handleConnectionLost);
         this.xmlSocket.connect(param1,this.port);
         this.lastConnectedServerIP = param1;
      }
      
      private function handleGameServerConnSecurityError(param1:SecurityErrorEvent) : void
      {
         if(!this.xmlSocket.connected)
         {
            this.main.setScheduledDisconnect(false);
            this.handleConnectionLost(new Event(Event.CLOSE));
         }
      }
      
      private function startConnectionMonitorTimer() : void
      {
         this.connectionMonitorTimer.addEventListener(TimerEvent.TIMER,this.handleMonitorTick);
         this.connectionMonitorTimer.start();
      }
      
      private function stopConnectionMonitorTimer() : void
      {
         if(this.connectionMonitorTimer != null)
         {
            this.connectionMonitorTimer.stop();
            this.connectionMonitorTimer.removeEventListener(TimerEvent.TIMER,this.handleMonitorTick);
         }
      }
      
      private function handleMonitorTick(param1:TimerEvent) : void
      {
         if(this.xmlSocket.connected)
         {
            this.stopConnectionMonitorTimer();
         }
         else if(!Hero.isKilled)
         {
            this.main.setScheduledDisconnect(false);
            this.main.getGuiManager().showConnectionLostWindow();
            this.stopConnectionMonitorTimer();
         }
      }
      
      public function getLastConnectedServerIP() : String
      {
         return this.lastConnectedServerIP;
      }
      
      public function sendCommand(param1:String, param2:Array = null) : String
      {
         if(!this.xmlSocket.connected)
         {
            return "";
         }
         var _loc3_:* = param1;
         if(param2 != null)
         {
            _loc3_ += ATTRIBUTE_SEPERATOR + param2.join(ATTRIBUTE_SEPERATOR);
         }
         _loc3_ += "\n";
         this.xmlSocket.send(_loc3_);
         return _loc3_;
      }
      
      public function sendRawCommand(param1:String) : void
      {
         if(!this.xmlSocket.connected)
         {
            return;
         }
         if(param1.charAt(param1.length - 1) != "\n")
         {
            param1 += "\n";
         }
         if(this._isLoggingGameServerIO)
         {
         }
         this.xmlSocket.send(param1);
      }
      
      public function dispatchSpacemapLoaded() : void
      {
         if(this.isHeroLoaded && this.isMapLoaded)
         {
            this.sendCommand(ServerCommands.READY_COMMAND,[ServerCommands.SPACEMAP_LOADED]);
            if(Settings.displayNotifications)
            {
               this.main.getProfiler().start();
            }
         }
         this.main.getGuiManager().initDebugView();
      }
      
      public function handleGameServerConnect(param1:Event) : void
      {
         this.startConnectionMonitorTimer();
         var _loc2_:Array = [Hero.userID,Hero.sessionID,Main.version];
         if(Hero.factionID != 0 && Settings.mapID == 255)
         {
            _loc2_.push(Hero.factionID);
         }
         this.sendCommand("LOGIN",_loc2_);
         if(this.pingTimer == null)
         {
            this.pingTimer = new Timer(25000,0);
            this.pingTimer.addEventListener(TimerEvent.TIMER,this.handlePingTick);
            this.handlePingTick(null);
            this.pingTimer.start();
         }
      }
      
      public function handleGameServerIOError(param1:Event) : void
      {
         param1.stopPropagation();
         this.main.setScheduledDisconnect(false);
         this.handleConnectionLost(new Event(Event.CLOSE));
      }
      
      private function onData(param1:DataEvent) : void
      {
         var _loc3_:Array = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:Map = null;
         var _loc10_:Ship = null;
         var _loc11_:BufferedShip = null;
         var _loc12_:Number = NaN;
         var _loc13_:int = 0;
         var _loc14_:String = null;
         var _loc15_:Boolean = false;
         var _loc16_:int = 0;
         var _loc17_:int = 0;
         var _loc18_:String = null;
         var _loc19_:int = 0;
         var _loc20_:int = 0;
         var _loc21_:Number = NaN;
         var _loc22_:int = 0;
         var _loc23_:Number = NaN;
         var _loc24_:Number = NaN;
         var _loc25_:Number = NaN;
         var _loc26_:int = 0;
         var _loc27_:int = 0;
         var _loc28_:Number = NaN;
         var _loc29_:int = 0;
         var _loc30_:MapObject = null;
         var _loc31_:ShipManager = null;
         var _loc32_:int = 0;
         var _loc33_:Number = NaN;
         var _loc34_:String = null;
         var _loc35_:int = 0;
         var _loc36_:int = 0;
         var _loc37_:SimpleWindow = null;
         var _loc38_:String = null;
         var _loc39_:int = 0;
         var _loc40_:int = 0;
         var _loc41_:String = null;
         var _loc42_:String = null;
         var _loc43_:int = 0;
         var _loc44_:String = null;
         var _loc45_:int = 0;
         var _loc46_:String = null;
         var _loc47_:int = 0;
         var _loc48_:int = 0;
         var _loc49_:int = 0;
         var _loc50_:String = null;
         var _loc51_:int = 0;
         var _loc52_:String = null;
         var _loc53_:int = 0;
         var _loc54_:int = 0;
         var _loc55_:Boolean = false;
         var _loc56_:Array = null;
         var _loc57_:ExplosionPattern = null;
         var _loc58_:Collectable = null;
         var _loc59_:int = 0;
         var _loc60_:int = 0;
         var _loc61_:int = 0;
         var _loc62_:int = 0;
         var _loc63_:int = 0;
         var _loc65_:String = null;
         var _loc66_:GuiManager = null;
         var _loc67_:Boolean = false;
         var _loc68_:String = null;
         var _loc69_:String = null;
         var _loc70_:int = 0;
         var _loc71_:Boolean = false;
         var _loc72_:int = 0;
         var _loc73_:Boolean = false;
         var _loc74_:Boolean = false;
         var _loc75_:int = 0;
         var _loc76_:Boolean = false;
         var _loc77_:int = 0;
         var _loc78_:Boolean = false;
         var _loc79_:Boolean = false;
         var _loc80_:int = 0;
         var _loc81_:int = 0;
         var _loc82_:Boolean = false;
         var _loc83_:int = 0;
         var _loc84_:int = 0;
         var _loc85_:int = 0;
         var _loc86_:RelayStation = null;
         var _loc87_:int = 0;
         var _loc88_:RelayStation = null;
         var _loc89_:int = 0;
         var _loc90_:int = 0;
         var _loc91_:int = 0;
         var _loc92_:Boolean = false;
         var _loc93_:String = null;
         var _loc94_:Sprite = null;
         var _loc95_:int = 0;
         var _loc96_:int = 0;
         var _loc97_:int = 0;
         var _loc98_:int = 0;
         var _loc99_:TextField = null;
         var _loc100_:int = 0;
         var _loc101_:int = 0;
         var _loc102_:SimpleWindow = null;
         var _loc103_:Boolean = false;
         var _loc104_:Boolean = false;
         var _loc105_:Boolean = false;
         var _loc106_:Boolean = false;
         var _loc107_:Boolean = false;
         var _loc108_:int = 0;
         var _loc109_:ActionButton2 = null;
         var _loc110_:int = 0;
         var _loc111_:Array = null;
         var _loc112_:int = 0;
         var _loc113_:int = 0;
         var _loc114_:int = 0;
         var _loc115_:int = 0;
         var _loc116_:int = 0;
         var _loc117_:int = 0;
         var _loc118_:int = 0;
         var _loc119_:String = null;
         var _loc120_:Array = null;
         var _loc121_:Boolean = false;
         var _loc122_:Station = null;
         var _loc123_:int = 0;
         var _loc124_:int = 0;
         var _loc125_:Boolean = false;
         var _loc126_:Vector.<int> = null;
         var _loc127_:int = 0;
         var _loc128_:int = 0;
         var _loc129_:int = 0;
         var _loc130_:MovieClip = null;
         var _loc131_:String = null;
         var _loc132_:int = 0;
         var _loc133_:int = 0;
         var _loc134_:int = 0;
         var _loc135_:int = 0;
         var _loc136_:int = 0;
         var _loc137_:int = 0;
         var _loc138_:int = 0;
         var _loc139_:int = 0;
         var _loc140_:MapObject = null;
         var _loc141_:MapObject = null;
         var _loc142_:Point = null;
         var _loc143_:MinimapManager = null;
         var _loc144_:MiniMap = null;
         var _loc145_:int = 0;
         var _loc146_:SimpleWindow = null;
         var _loc147_:TopMenu = null;
         var _loc148_:ResourcePattern = null;
         var _loc149_:BattleRepBotTechEffect = null;
         var _loc150_:int = 0;
         var _loc151_:Boolean = false;
         var _loc152_:int = 0;
         var _loc153_:String = null;
         var _loc154_:Array = null;
         var _loc155_:int = 0;
         var _loc156_:Pet = null;
         var _loc157_:CollectablePattern = null;
         var _loc158_:int = 0;
         var _loc159_:int = 0;
         var _loc160_:int = 0;
         var _loc161_:String = null;
         var _loc162_:String = null;
         var _loc163_:Array = null;
         var _loc164_:int = 0;
         var _loc165_:int = 0;
         var _loc166_:int = 0;
         var _loc167_:int = 0;
         var _loc168_:AmmoPrice = null;
         var _loc169_:int = 0;
         var _loc170_:String = null;
         var _loc171_:int = 0;
         var _loc172_:int = 0;
         var _loc173_:int = 0;
         var _loc174_:int = 0;
         var _loc175_:uint = 0;
         var _loc2_:String = String(param1.data);
         _loc3_ = _loc2_.split(ATTRIBUTE_SEPERATOR);
         if(this._isLoggingGameServerIO)
         {
            _loc68_ = StringUtil.trim(_loc2_);
            _loc69_ = _loc68_.replace(/</g,"^").replace(/\>/g,"^");
         }
         var _loc64_:int = 0;
         switch(_loc3_[1])
         {
            case ServerCommands.PET:
               this.petAssembly.assembleCommand(_loc3_);
               break;
            case ServerCommands.SHIP_MOVEMENT:
               _loc4_ = int(_loc3_[2]);
               _loc5_ = int(_loc3_[3]);
               _loc6_ = int(_loc3_[4]);
               _loc70_ = int(_loc3_[5]);
               _loc71_ = false;
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc9_.getShipManager().moveShip(_loc4_,_loc5_,_loc6_,_loc70_);
               }
               break;
            case ServerCommands.LASER_ATTACK:
               _loc7_ = int(_loc3_[2]);
               _loc8_ = int(_loc3_[3]);
               _loc72_ = int(_loc3_[4]);
               _loc73_ = Boolean(int(_loc3_[5]));
               _loc74_ = Boolean(int(_loc3_[6]));
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc9_.getCombatManager().addLaserAttack(_loc7_,_loc8_,_loc72_,_loc73_,_loc74_);
                  _loc140_ = _loc9_.getShipManager().getShip(_loc7_);
                  if(_loc140_ != null && _loc140_.energyLeechActive)
                  {
                     _loc9_.getCombatManager().addLaserAttack(_loc8_,_loc7_,7,false,false);
                  }
               }
               if(_loc7_ == Hero.userID)
               {
                  _loc10_ = _loc9_.getShipManager().getHero();
                  if(!_loc10_.shipPattern.playLoop)
                  {
                     _loc141_ = _loc9_.getShipManager().getShip(_loc8_);
                     _loc9_.getEventManager().heroLockToTarget = _loc141_;
                  }
               }
               break;
            case ServerCommands.HERO_MOVEMENT:
               _loc5_ = int(_loc3_[2]);
               _loc6_ = int(_loc3_[3]);
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc10_ = _loc9_.getShipManager().getHero();
                  if(_loc10_ != null)
                  {
                     _loc142_ = _loc9_.poiManager.checkPOIZoneCollisions(new Point(_loc10_.x,_loc10_.y),new Point(_loc5_,_loc6_));
                     if(_loc142_ != null)
                     {
                        _loc5_ = _loc142_.x;
                        _loc6_ = _loc142_.y;
                     }
                     _loc9_.getEventManager().moveHeroToCordinates(_loc5_,_loc6_);
                     _loc143_ = _loc9_.getMinimapManager();
                     if(_loc143_ != null)
                     {
                        _loc144_ = _loc143_.getMiniMap();
                        if(_loc144_ != null)
                        {
                           _loc144_.highlightRoute(_loc5_,_loc6_);
                        }
                     }
                  }
               }
               break;
            case ServerCommands.CREATE_SHIP:
               _loc4_ = int(_loc3_[2]);
               _loc29_ = int(_loc3_[3]);
               _loc75_ = int(_loc3_[4]);
               _loc14_ = _loc3_[5];
               _loc34_ = _loc3_[6];
               _loc26_ = int(_loc3_[7]);
               _loc27_ = int(_loc3_[8]);
               _loc19_ = int(_loc3_[9]);
               _loc13_ = int(_loc3_[10]);
               _loc16_ = int(_loc3_[11]);
               _loc76_ = Boolean(int(_loc3_[12]));
               _loc77_ = int(_loc3_[13]);
               _loc17_ = int(_loc3_[14]);
               _loc78_ = Boolean(int(_loc3_[16]));
               _loc15_ = Boolean(int(_loc3_[17]));
               if(_loc29_ == 84 || _loc29_ == 85)
               {
                  _loc75_ = 1;
               }
               _loc29_ = this.getMappedShipType(_loc29_);
               if(!Settings.createOpponents)
               {
                  break;
               }
               if(_loc19_ > 3)
               {
                  _loc19_ = 0;
               }
               if(_loc4_ == Hero.userID)
               {
                  break;
               }
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc31_ = _loc9_.getShipManager();
                  if(_loc31_ != null)
                  {
                     _loc30_ = _loc31_.createShip(_loc29_,_loc4_,_loc26_,_loc27_,1,_loc34_,_loc14_,_loc19_,_loc13_,_loc77_,_loc16_,_loc75_,_loc76_,_loc17_,_loc78_);
                     if(_loc30_ != null)
                     {
                        _loc30_.setCloak(_loc15_);
                     }
                     if(this._watchedShipInits[_loc4_])
                     {
                        this.main.getGroupManager().initMemberTarget(_loc4_);
                     }
                  }
                  break;
               }
               _loc11_ = new BufferedShip(_loc29_,_loc4_,_loc26_,_loc27_,1,_loc34_,_loc14_,_loc19_,_loc13_,_loc77_,_loc16_,_loc75_,_loc76_,_loc17_,_loc78_,_loc15_);
               this.bufferedShips.push(_loc11_);
               break;
            case ServerCommands.ROCKET_ATTACK:
               _loc7_ = int(_loc3_[2]);
               _loc8_ = int(_loc3_[3]);
               if(_loc3_[4] == "H")
               {
                  _loc79_ = true;
               }
               _loc80_ = int(_loc3_[5]);
               _loc81_ = int(_loc3_[6]);
               _loc82_ = Boolean(int(_loc3_[7]));
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc9_.getCombatManager().addRocketAttack(_loc7_,_loc8_,_loc80_,_loc79_,_loc81_,_loc82_);
               }
               break;
            case ServerCommands.TECHS:
               if(this.techAssembly == null)
               {
                  this.techAssembly = TechAssembly.getInstance();
               }
               this.techAssembly.assembleCommand(_loc3_);
               break;
            case ServerCommands.SKILL_DESIGNS:
               if(this.skillsAssembly == null)
               {
                  this.skillsAssembly = SkillsAssembly.getInstance();
               }
               this.skillsAssembly.assembleCommand(_loc3_);
               break;
            case ServerCommands.NEW_ASSET:
               if(this.assetAssembly == null)
               {
                  this.assetAssembly = AssetAssembly.getInstance();
               }
               this.assetAssembly.assembleCommand(_loc3_);
               break;
            case ServerCommands.ASSET_INFO:
               _loc9_ = this.main.screenManager.map;
               _loc83_ = int(_loc3_[3]);
               _loc84_ = int(_loc3_[5]);
               _loc85_ = int(_loc3_[6]);
               _loc86_ = _loc9_.getStationManager().getAssetForID(_loc83_);
               _loc86_.toggleBorderClip(true);
               _loc86_.setDamageBarVisibility(true);
               _loc86_.updateHitpointBar(_loc84_,_loc85_);
               _loc87_ = _loc83_;
               if(_loc87_ == -1)
               {
                  if(_loc9_ != null)
                  {
                     _loc9_.getShipManager().deselectSelectedShip();
                  }
                  break;
               }
               _loc28_ = int(0);
               _loc25_ = int(0);
               _loc21_ = _loc84_;
               _loc24_ = _loc85_;
               _loc67_ = false;
               if(_loc9_ != null)
               {
                  _loc30_ = _loc9_.getShipManager().selectShip(_loc87_,_loc21_,_loc24_,_loc28_,_loc25_,_loc67_);
                  if(_loc30_ != null && !_loc30_.isNPC())
                  {
                     this.main.getGroupManager().prepareCandidate(_loc30_);
                  }
               }
               break;
            case ServerCommands.ASSET_HIT:
               _loc18_ = _loc3_[3];
               _loc21_ = int(_loc3_[4]);
               _loc28_ = int(_loc3_[5]);
               _loc20_ = int(_loc3_[6]);
               _loc4_ = int(_loc3_[7]);
               _loc64_ = int(_loc3_[8]);
               _loc9_ = this.main.screenManager.map;
               if(Settings.qualityExplosion == Settings.QUALITY_HIGH)
               {
                  if(_loc9_ != null)
                  {
                     _loc88_ = this.main.screenManager.map.getStationManager().getAssetForID(_loc4_);
                     if(_loc88_ != null)
                     {
                        _loc88_.updateHitpointBar(_loc21_,1000,true);
                     }
                  }
               }
               break;
            case ServerCommands.TARGET_IN_RANGE:
               this.main.getGuiManager().writeToLog(BPLocale.getText("fightcont"));
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc9_.getCombatManager().resumeLaserAttack(Hero.userID);
                  _loc9_.getCombatManager().resumeLaserAttackTo(Hero.userID);
               }
               break;
            case ServerCommands.ATTACK_INFO:
               _loc89_ = 1;
               _loc90_ = int(_loc3_[++_loc89_]);
               _loc91_ = int(_loc3_[++_loc89_]);
               _loc18_ = _loc3_[++_loc89_];
               _loc21_ = int(_loc3_[++_loc89_]);
               _loc28_ = Number(_loc3_[++_loc89_]);
               _loc20_ = int(_loc3_[++_loc89_]);
               _loc92_ = false;
               switch(_loc18_)
               {
                  case "H":
                     _loc64_ = 2;
                     _loc92_ = true;
                     break;
                  case "L":
                  case "R":
                  case "ECI":
                  case "SIN":
                  default:
                     _loc64_ = 0;
               }
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc30_ = _loc9_.getShipManager().getShip(_loc91_);
                  if(_loc30_ != null)
                  {
                     if(Settings.qualityExplosion == Settings.QUALITY_HIGH)
                     {
                        _loc30_.addShipDamage(_loc18_);
                     }
                     _loc30_.setHitpoints(_loc21_);
                     _loc30_.setShield(_loc28_);
                     _loc30_.updateHitpointShieldBar(true);
                     if(!_loc30_.shipPattern.isSpaceball() && Settings.displayHitpointBubbles && _loc20_ != 0)
                     {
                        this.main.getGuiManager().showHitpointDelta(_loc30_,_loc20_,_loc64_,_loc92_);
                     }
                  }
               }
               break;
            case ServerCommands.SHOOT_MISSED_A:
               _loc93_ = _loc3_[2];
               _loc4_ = int(_loc3_[3]);
               if(_loc3_[4] != undefined)
               {
                  _loc64_ = int(_loc3_[4]);
               }
               if(_loc93_ == "R")
               {
                  break;
               }
               if(Settings.displayHitpointBubbles)
               {
                  _loc9_ = this.main.screenManager.map;
                  if(_loc9_ != null)
                  {
                     _loc30_ = _loc9_.getShipManager().getShip(_loc4_);
                     if(_loc30_ != null && !_loc30_.shipPattern.isSpaceball())
                     {
                        this.main.getGuiManager().showHitpointDelta(_loc30_,0,_loc64_);
                     }
                  }
               }
               break;
            case ServerCommands.SET_MARKER:
               _loc94_ = new Sprite();
               _loc95_ = int(_loc3_[2]);
               _loc96_ = int(_loc3_[3]);
               _loc97_ = 40;
               _loc98_ = 4;
               _loc94_.graphics.beginFill(8453888);
               _loc94_.graphics.drawRect(_loc95_ - _loc97_ / 2,_loc96_ - _loc98_ / 2,_loc97_,_loc98_);
               _loc94_.graphics.drawRect(_loc95_ - _loc98_ / 2,_loc96_ - _loc97_ / 2,_loc98_,_loc97_);
               _loc94_.graphics.endFill();
               _loc99_ = new TextField();
               _loc99_.text = _loc95_ + "/" + _loc96_;
               _loc99_.textColor = 16711935;
               _loc99_.x = _loc95_ + 22;
               _loc99_.y = _loc96_ - 14;
               _loc94_.addChild(_loc99_);
               this.main.screenManager.getExplosionLayer().addChild(_loc94_);
               break;
            case ServerCommands.REMOVE_MARKERS:
               _loc100_ = this.main.screenManager.getExplosionLayer().numChildren;
               _loc145_ = 0;
               while(_loc145_ < _loc100_)
               {
                  this.main.screenManager.getExplosionLayer().removeChildAt(0);
                  _loc145_++;
               }
               break;
            case ServerCommands.SHOOT_MISSED_T:
               if(_loc3_[4] != undefined)
               {
                  _loc64_ = int(_loc3_[4]);
               }
               if(_loc93_ == "R")
               {
                  break;
               }
               if(Settings.displayHitpointBubbles)
               {
                  _loc9_ = this.main.screenManager.map;
                  if(_loc9_ != null)
                  {
                     _loc30_ = _loc9_.getShipManager().getHero();
                     if(_loc30_ != null && !_loc30_.shipPattern.isSpaceball())
                     {
                        this.main.getGuiManager().showHitpointDelta(_loc30_,0,_loc64_);
                     }
                  }
               }
               break;
            case ServerCommands.ATTACK_STOPPED_A:
               this.main.getGuiManager().writeToLog(BPLocale.getText("fightcanceled"));
               break;
            case ServerCommands.ATTACK_STOPPED_T:
               this.main.getGuiManager().writeToLog(BPLocale.getText("fightcanceledbyop"));
               break;
            case ServerCommands.HERO_INIT:
               _loc4_ = int(_loc3_[2]);
               _loc34_ = _loc3_[3];
               _loc32_ = int(_loc3_[4]);
               _loc33_ = int(_loc3_[5]) * 0.97;
               _loc28_ = int(_loc3_[6]);
               _loc25_ = int(_loc3_[7]);
               _loc21_ = int(_loc3_[8]);
               _loc24_ = int(_loc3_[9]);
               _loc12_ = int(_loc3_[10]);
               _loc23_ = int(_loc3_[11]);
               _loc35_ = int(_loc3_[12]);
               _loc36_ = int(_loc3_[13]);
               _loc22_ = int(_loc3_[14]);
               _loc19_ = int(_loc3_[15]);
               _loc13_ = int(_loc3_[16]);
               Hero.maxLaserCapacity = int(_loc3_[17]);
               Hero.maxRocketCapacity = int(_loc3_[18]);
               _loc101_ = int(_loc3_[19]);
               Hero.premium = Boolean(int(_loc3_[20]));
               Hero.experiencePoints = Number(_loc3_[21]);
               Hero.honorPoints = Number(_loc3_[22]);
               Hero.level = int(_loc3_[23]);
               Hero.creditsAmount = Number(_loc3_[24]);
               Hero.uridiumAmount = Number(_loc3_[25]);
               Hero.jackpotAmount = Number(_loc3_[26]);
               _loc16_ = int(_loc3_[27]);
               _loc14_ = _loc3_[28];
               _loc17_ = int(_loc3_[29]);
               _loc15_ = Boolean(int(_loc3_[31]));
               Hero.isKilled = false;
               this.main.getGuiManager().removeStopoverView();
               _loc32_ = this.getMappedShipType(_loc32_);
               if(_loc16_ == 21)
               {
                  Hero.admin = true;
               }
               else
               {
                  Hero.admin = false;
               }
               Hero.username = _loc34_;
               if(StringUtil.trim(_loc14_).length > 0)
               {
                  Hero.clan = _loc14_;
               }
               Hero.factionID = _loc19_;
               if(Settings.lastMapID != -1 && Settings.lastMapID != _loc22_)
               {
                  AudioManager.playSoundEffect(6);
               }
               if(Settings.lastMapID != _loc22_)
               {
                  this.isMapLoaded = false;
                  this.main.createMap(_loc22_);
                  Settings.lastMapID = _loc22_;
               }
               _loc10_ = this.main.screenManager.map.getShipManager().createShip(_loc32_,_loc4_,_loc35_,_loc36_,_loc33_,_loc34_,_loc14_,_loc19_,_loc13_,-1,_loc16_,_loc101_,false,_loc17_,false);
               if(_loc32_ == 80)
               {
                  _loc10_.isCubicon = true;
               }
               if(_loc10_ == null)
               {
                  return;
               }
               _loc10_.setHitpoints(_loc21_);
               _loc10_.setMaxHitpoints(_loc24_);
               _loc10_.setCargo(_loc23_ - _loc12_);
               _loc10_.setMaxCargo(_loc23_);
               _loc10_.setShieldChunk(_loc28_,_loc25_,true);
               if(Settings.createOpponents)
               {
                  _loc9_ = this.main.screenManager.map;
                  _loc31_ = _loc9_.getShipManager();
                  _loc59_ = 0;
                  while(_loc59_ < this.bufferedShips.length)
                  {
                     _loc11_ = this.bufferedShips[_loc59_];
                     if(_loc19_ > 3)
                     {
                        _loc19_ = 0;
                     }
                     if(_loc31_ != null)
                     {
                        _loc30_ = _loc31_.createShip(_loc11_.typeID,_loc11_.userID,_loc11_.xPos,_loc11_.yPos,1,_loc11_.username,_loc11_.clanTag,_loc11_.fractionID,_loc11_.clanID,_loc11_.clanDiplomacy,_loc11_.dailyRank,_loc11_.expansionstage,_loc11_.warnIconOnMap,_loc11_.galaxyGatesFinished,_loc11_.isNPC);
                        _loc30_.setCloak(_loc11_.cloaked);
                     }
                     _loc59_++;
                  }
                  this.bufferedShips = [];
               }
               this.main.getGuiManager().removeConnectionWindow();
               this.main.screenManager.map.getEventManager().unlockControls();
               this.main.getGuiManager().loadChat();
               this.main.getGuiManager().createLogWindow();
               this.main.getGuiManager().addGUI();
               _loc102_ = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_JACKPOTBATTLE);
               if(_loc102_ != null)
               {
                  this.main.getGuiManager().closeWindow(this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_JACKPOTBATTLE));
               }
               this.main.getGuiManager().createWindow(SimpleWindow.WINDOW_CLASS_USER);
               this.main.getGuiManager().createWindow(SimpleWindow.WINDOW_CLASS_SHIP);
               this.main.getGuiManager().createQuestWindow();
               if(Settings.showInstantLog)
               {
                  this.main.getGuiManager().createInstantLogView();
               }
               this.main.getGuiManager().createGlobalNotificationView();
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_1,SimpleElement.TYPE_LASER);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_1,SimpleElement.TYPE_ROCKETS);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_3,SimpleElement.TYPE_CREDITS);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_3,SimpleElement.TYPE_URIDIUM);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_3,SimpleElement.TYPE_JACKPOT);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_2,SimpleElement.TYPE_EXPERIENCE);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_2,SimpleElement.TYPE_HONOR);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_2,SimpleElement.TYPE_LEVEL);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_2,SimpleElement.TYPE_JUMP_VOUCHERS);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_0,SimpleElement.TYPE_HITPOINTS);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_0,SimpleElement.TYPE_SHIELD);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_0,SimpleElement.TYPE_CARGO);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_1,SimpleElement.TYPE_LASER);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_1,SimpleElement.TYPE_ROCKETS);
               this.main.setScheduledDisconnect(false);
               if(Hero.admin)
               {
                  this.main.getGuiManager().createCommandLineInterface();
               }
               this.main.getGuiManager().unlockWindow(SimpleWindow.WINDOW_CLASS_LOGOUT);
               this.main.getGroupManager().init();
               this.main.getGuiManager().destroyWindow(SimpleWindow.WINDOW_CLASS_TDM);
               this.main.getTDMManager().cleanUp();
               if(Main.showCross)
               {
                  this.main.getGuiManager().showCrosshair();
                  this.main.getGuiManager().moveCrosshairs(_loc35_,_loc36_);
               }
               _loc10_.setCloak(_loc15_);
               this.isHeroLoaded = true;
               this.dispatchSpacemapLoaded();
               break;
            case ServerCommands.BEACON:
               _loc5_ = int(_loc3_[2]);
               _loc6_ = int(_loc3_[3]);
               _loc103_ = Boolean(int(_loc3_[4]));
               _loc104_ = Boolean(int(_loc3_[5]));
               _loc105_ = Boolean(int(_loc3_[6]));
               _loc106_ = Boolean(int(_loc3_[7]));
               _loc107_ = Boolean(int(_loc3_[8]));
               _loc108_ = int(_loc3_[9]);
               Hero.setDemilitarizedZone(_loc103_,this.main);
               Hero.setInTradeArea(_loc105_,this.main);
               Hero.setInJumpArea(_loc107_);
               _loc66_ = this.main.getGuiManager();
               if(_loc66_ != null)
               {
                  _loc146_ = _loc66_.getWindow(SimpleWindow.WINDOW_CLASS_LOGOUT);
                  if(_loc146_ != null && _loc146_.isMaximizeClicked())
                  {
                     return;
                  }
               }
               Settings.fastRepair = _loc108_;
               if(_loc66_ != null)
               {
                  _loc147_ = _loc66_.getTopMenu();
                  if(_loc147_ != null)
                  {
                     if(_loc108_ > 0)
                     {
                        _loc147_.setButtonAccess(SuperActionButton.ACTION_FASTREPAIR,true);
                        _loc109_ = _loc147_.getButton(SuperActionButton.ACTION_FASTREPAIR);
                        _loc109_.setCounterVisibility(true);
                        _loc109_.setCount(_loc108_);
                     }
                     else
                     {
                        _loc147_.setButtonAccess(SuperActionButton.ACTION_FASTREPAIR,false);
                        _loc109_ = _loc147_.getButton(SuperActionButton.ACTION_FASTREPAIR);
                        _loc109_.setCounterVisibility(false);
                     }
                  }
               }
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc31_ = _loc9_.getShipManager();
                  _loc10_ = _loc31_.getHero();
                  if(_loc10_ != null)
                  {
                     this.main.getGuiManager().showRadiationWarning(_loc106_);
                     if(Main.showCross)
                     {
                        this.main.getGuiManager().moveCrosshairs(_loc5_,_loc6_);
                     }
                     if(_loc104_ && Hero.repairSkillId != -1)
                     {
                        _loc148_ = PatternManager.robotPatterns[Hero.repairSkillId];
                        if(!this.effectsManager.doesEffectExistOn(_loc10_,EffectIDList.TECH_BATTLE_REP_BOT_EFFECT))
                        {
                           _loc149_ = new BattleRepBotTechEffect(EffectIDList.TECH_BATTLE_REP_BOT_EFFECT,new EffectPattern(EffectIDList.TECH_BATTLE_REP_BOT_EFFECT,_loc148_.resKey));
                           this.effectsManager.addEffect(_loc149_,_loc10_,EffectsManager.NORMAL_EFFECT);
                        }
                        break;
                     }
                     this.effectsManager.removeEffectByIdFromEntity(_loc10_,EffectIDList.TECH_BATTLE_REP_BOT_EFFECT);
                  }
               }
               break;
            case ServerCommands.SHIP_SELECTED:
               _loc110_ = int(_loc3_[2]);
               _loc9_ = this.main.screenManager.map;
               _loc111_ = _loc9_.getStationManager().assets;
               _loc59_ = 0;
               while(_loc59_ < _loc111_.length)
               {
                  _loc111_[_loc59_].toggleBorderClip(false);
                  _loc111_[_loc59_].setDamageBarVisibility(false);
                  _loc59_++;
               }
               if(_loc110_ == -1)
               {
                  if(_loc9_ != null)
                  {
                     _loc9_.getShipManager().deselectSelectedShip();
                  }
                  break;
               }
               _loc28_ = int(_loc3_[4]);
               _loc25_ = int(_loc3_[5]);
               _loc21_ = int(_loc3_[6]);
               _loc24_ = int(_loc3_[7]);
               _loc67_ = Boolean(int(_loc3_[8]));
               if(_loc9_ != null)
               {
                  _loc30_ = _loc9_.getShipManager().selectShip(_loc110_,_loc21_,_loc24_,_loc28_,_loc25_,_loc67_);
                  if(_loc67_)
                  {
                     _loc30_.showShield(0);
                  }
                  if(!_loc30_.isNPC())
                  {
                     this.main.getGroupManager().prepareCandidate(_loc30_);
                  }
               }
               break;
            case ServerCommands.DESTROY_SHIP:
               _loc4_ = int(_loc3_[2]);
               _loc112_ = -1;
               if(_loc4_ != Hero.userID)
               {
                  _loc9_ = this.main.screenManager.map;
                  if(_loc9_ != null)
                  {
                     if(_loc3_.length > 3)
                     {
                        _loc112_ = int(_loc3_[3]);
                        _loc30_ = _loc9_.getShipManager().getShip(_loc4_);
                        if(_loc30_ != null)
                        {
                           _loc30_.explodeTypeID = _loc112_;
                        }
                     }
                     this.main.screenManager.map.getShipManager().removeOpponentShip(_loc4_,true);
                  }
                  break;
               }
               Hero.isKilled = true;
               this.main.screenManager.map.getShipManager().destroyHero();
               break;
            case ServerCommands.REMOVE_SHIP:
               _loc4_ = int(_loc3_[2]);
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc9_.getShipManager().removeOpponentShip(_loc4_);
               }
               break;
            case ServerCommands.REMOVE_BOX:
               _loc38_ = _loc3_[2];
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc9_.getCollectableManager().removeCollectable(_loc38_);
               }
               break;
            case ServerCommands.PLAY_PORTAL_ANIMATION:
               this.main.setScheduledDisconnect(true);
               _loc39_ = int(_loc3_[2]);
               _loc40_ = int(_loc3_[3]);
               Settings.nextMapID = _loc39_;
               AudioManager.playSoundEffect(21);
               this.main.getGuiManager().lockWindow(SimpleWindow.WINDOW_CLASS_LOGOUT);
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null && _loc9_.getMapID() != _loc39_)
               {
                  _loc9_.portalManager.playPortalAnimation(_loc40_);
                  _loc9_.getDroneManager().minimizeDrones();
               }
               break;
            case ClientCommands.SELECT:
               _loc41_ = _loc3_[2];
               switch(_loc41_)
               {
                  case ClientCommands.CONFIGURATION:
                     _loc54_ = int(_loc3_[3]);
                     Settings.selectedConfiguration = _loc54_;
                     this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_1,SimpleElement.TYPE_CONFIGURATION);
                     this.main.getGuiManager().updateSpacemapWindow();
               }
               break;
            case ServerCommands.PORTAL_JUMP:
               this.main.setScheduledDisconnect(true);
               Settings.nextMapID = int(_loc3_[2]);
               break;
            case ServerCommands.PRIMARY_WEAPON_INFO:
               _loc113_ = 0;
               _loc59_ = 2;
               while(_loc59_ < _loc3_.length)
               {
                  var _loc176_:*;
                  Hero.laserBatteryAmounts[_loc176_ = _loc113_++] = int(_loc3_[_loc59_]);
                  _loc59_++;
               }
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_1,SimpleElement.TYPE_LASER);
               this.main.getGuiManager().getMenuManager().updateLaserButtonAmounts();
               break;
            case ServerCommands.SECONDARY_WEAPON_INFO:
               _loc89_ = 1;
               Hero.rocketAmounts[RocketPattern.R310] = int(_loc3_[++_loc89_]);
               Hero.rocketAmounts[RocketPattern.PLT_2026] = int(_loc3_[++_loc89_]);
               Hero.rocketAmounts[RocketPattern.PLT_2021] = int(_loc3_[++_loc89_]);
               Hero.rocketAmounts[RocketPattern.PLT_3030] = int(_loc3_[++_loc89_]);
               Hero.rocketAmounts[RocketPattern.PLD_8] = int(_loc3_[++_loc89_]);
               Hero.rocketAmounts[RocketPattern.DCR_250] = int(_loc3_[++_loc89_]);
               Hero.rocketAmounts[RocketPattern.WIZ] = int(_loc3_[++_loc89_]);
               Hero.explosiveAmounts[SpecialAmmunition.MINE] = int(_loc3_[++_loc89_]);
               Hero.explosiveAmounts[SpecialAmmunition.SMARTBOMB] = int(_loc3_[++_loc89_]);
               Hero.explosiveAmounts[SpecialAmmunition.INSTASHIELD] = int(_loc3_[++_loc89_]);
               Hero.explosiveAmounts[SpecialAmmunition.EMP] = int(_loc3_[++_loc89_]);
               Hero.explosiveAmounts[SpecialAmmunition.MINE_EMP] = int(_loc3_[++_loc89_]);
               Hero.explosiveAmounts[SpecialAmmunition.MINE_SAB] = int(_loc3_[++_loc89_]);
               Hero.explosiveAmounts[SpecialAmmunition.MINE_DDM] = int(_loc3_[++_loc89_]);
               this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_1,SimpleElement.TYPE_ROCKETS);
               this.main.getGuiManager().getMenuManager().updateRocketButtonAmounts();
               this.main.getGuiManager().getMenuManager().updateExplosiveButtonAmmounts();
               break;
            case ServerCommands.BOX_COLLECT_RESPONSE:
            case ServerCommands.LOG_MESSAGE:
               this.boxCollectAssembly.assembleBoxCollectResponse(_loc3_);
               break;
            case ServerCommands.SET_ATTRIBUTE:
               this.attributesAssembly.assembleCommand(_loc3_);
               break;
            case ServerCommands.ACHIEVEMENTS:
               switch(_loc3_[2])
               {
                  case ServerCommands.ACHIEVEMENT_SET:
                     _loc59_ = 3;
                     while(_loc59_ < _loc3_.length - 2)
                     {
                        _loc150_ = int(_loc3_[_loc59_]);
                        _loc151_ = Boolean(int(_loc3_[_loc59_ + 1]));
                        _loc152_ = int(_loc3_[_loc59_ + 2]);
                        this.main.achievementManager.setAchievement(_loc150_,_loc151_,_loc152_);
                        _loc59_ += 3;
                     }
                     break;
                  case ServerCommands.ACHIEVEMENT_REMOVE:
                     _loc59_ = 3;
                     while(_loc59_ < _loc3_.length)
                     {
                        _loc150_ = int(_loc3_[_loc59_]);
                        this.main.achievementManager.removeAchievement(_loc150_);
                        _loc59_++;
                     }
                     break;
                  case ServerCommands.ACHIEVEMENT_END:
                     this.main.achievementManager.removeAchievementWindow();
               }
               break;
            case ServerCommands.GROUPSYSTEM:
               this.groupSystemAssembly.assembleGroupSystemEvent(_loc3_);
               break;
            case ServerCommands.QUESTFM_INFO:
               this.questAssembly.assembleCommand(_loc3_);
               break;
            case ServerCommands.OUT_OF_RANGE:
               this.main.getGuiManager().writeToLog(BPLocale.getText("outofrange"));
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc9_.getCombatManager().idleLaserAttack(Hero.userID,true);
                  _loc9_.getCombatManager().idleLaserAttackTo(Hero.userID);
               }
               break;
            case ServerCommands.ESCAPE:
               this.main.getGuiManager().writeToLog(BPLocale.getText("attescape"));
               break;
            case ServerCommands.IN_NO_ATTACK_ZONE:
               this.main.getGuiManager().writeToLog(BPLocale.getText("peacearea"));
               break;
            case ServerCommands.NO_AMMUNITION:
               _loc44_ = _loc3_[2];
               _loc114_ = int(_loc3_[4]);
               this.main.getGuiManager().noAmmunition(_loc44_,_loc114_);
               break;
            case ServerCommands.AUTO_AMMUNITION_CHANGE:
               _loc44_ = _loc3_[2];
               _loc115_ = int(_loc3_[4]);
               this.main.getGuiManager().getMenuManager().autoAmmunitionChange(_loc44_,_loc115_);
               break;
            case ServerCommands.NEW_MAP:
               break;
            case ServerCommands.SET_MAP_PVP_STATUS:
               _loc116_ = int(_loc3_[2]);
               _loc117_ = int(_loc3_[3]);
               _loc9_ = this.main.screenManager.map;
               _loc9_.setPvpAllowed(_loc116_);
               _loc9_.setHomeMapFaction(_loc117_);
               break;
            case ServerCommands.POI:
               if(this.poiAssembly == null)
               {
                  this.poiAssembly = POIAssembly.getInstance();
               }
               this.poiAssembly.assembleCommand(_loc3_);
               break;
            case ServerCommands.CREATE_STATION:
               _loc45_ = int(_loc3_[3]);
               _loc118_ = int(_loc3_[2]);
               _loc119_ = _loc3_[4];
               _loc19_ = int(_loc3_[5]);
               _loc26_ = int(_loc3_[7]);
               _loc27_ = int(_loc3_[8]);
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null && Settings.qualityBackground >= Settings.QUALITY_LOW)
               {
                  this.main.screenManager.map.getStationManager().addSpaceStation(_loc118_,_loc19_,_loc119_,_loc26_,_loc27_);
               }
               break;
            case ServerCommands.CHANGE_HEALTH_STATION_STATUS:
               _loc9_ = this.main.screenManager.map;
               _loc120_ = _loc9_.getStationManager().getStations();
               _loc121_ = Boolean(int(_loc3_[2]));
               _loc59_ = 0;
               while(_loc59_ < _loc120_.length)
               {
                  if(_loc120_[_loc59_] != undefined)
                  {
                     _loc122_ = _loc120_[_loc59_] as Station;
                     if(_loc122_.getTypeID() == 4)
                     {
                        _loc122_.setHealthStationStatus(_loc121_);
                     }
                  }
                  _loc59_++;
               }
               break;
            case ServerCommands.CREATE_PORTAL:
               _loc125_ = true;
               _loc126_ = new Vector.<int>();
               if(_loc3_.length < 9)
               {
                  _loc123_ = int(_loc3_[2]);
                  _loc45_ = int(_loc3_[3]);
                  _loc26_ = int(_loc3_[5]);
                  _loc27_ = int(_loc3_[6]);
               }
               else
               {
                  _loc123_ = int(_loc3_[2]);
                  _loc124_ = int(_loc3_[3]);
                  _loc45_ = int(_loc3_[4]);
                  _loc26_ = int(_loc3_[5]);
                  _loc27_ = int(_loc3_[6]);
                  _loc125_ = Boolean(int(_loc3_[7]));
                  _loc153_ = String(_loc3_[8]);
                  _loc154_ = _loc153_.split(LIST_SEPERATOR);
                  for each(_loc155_ in _loc154_)
                  {
                     if(_loc155_ > 0)
                     {
                        _loc126_.push(_loc155_);
                     }
                  }
               }
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null && Settings.createPortals)
               {
                  this.main.screenManager.map.portalManager.createPortal(_loc123_,_loc124_,_loc45_,_loc26_,_loc27_,_loc125_,_loc126_);
               }
               break;
            case ServerCommands.CREATE_MINE:
               _loc38_ = _loc3_[2];
               _loc45_ = int(_loc3_[3]);
               _loc26_ = int(_loc3_[4]);
               _loc27_ = int(_loc3_[5]);
               _loc127_ = int(_loc3_[6]);
               _loc128_ = int(_loc3_[7]);
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  if(_loc45_ >= 100 && _loc45_ <= 533)
                  {
                     _loc9_.getCollectableManager().createCollectable(CollectablePattern.TYPE_FIREWORKS_BOX,_loc38_,_loc45_,_loc26_,_loc27_);
                     break;
                  }
                  _loc9_.getMineManager().createMine(_loc38_,_loc45_,_loc26_,_loc27_,_loc127_,_loc128_);
               }
               break;
            case ServerCommands.CREATE_ORE:
               _loc38_ = _loc3_[2];
               _loc45_ = int(_loc3_[3]);
               _loc26_ = int(_loc3_[4]);
               _loc27_ = int(_loc3_[5]);
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  if(_loc45_ < 10 || _loc45_ == 15)
                  {
                     if(!Settings.createCollectables)
                     {
                        break;
                     }
                     _loc9_.getCollectableManager().createCollectable(CollectablePattern.TYPE_ORE,_loc38_,_loc45_,_loc26_,_loc27_);
                     break;
                  }
                  if(_loc45_ == 10)
                  {
                     _loc9_.getMineManager().createMine(_loc38_,_loc45_,_loc26_,_loc27_);
                     break;
                  }
                  if(_loc45_ >= 100 && _loc45_ <= 533)
                  {
                     _loc9_.getCollectableManager().createCollectable(CollectablePattern.TYPE_FIREWORKS_BOX,_loc38_,_loc45_,_loc26_,_loc27_);
                  }
               }
               break;
            case ServerCommands.ORE_COLLECTED_BY_HERO:
               _loc129_ = int(_loc3_[2]);
               if(_loc3_.length > 3)
               {
                  _loc156_ = this.main.screenManager.map.getShipManager().getHero().pet;
                  _loc157_ = PatternManager.getCollectablePattern(CollectablePattern.TYPE_BOX,CollectablePattern.TYPE_BOX);
                  _loc158_ = _loc156_.x;
                  _loc159_ = _loc156_.y + _loc156_.getClipContainer().height * 0.5;
                  this.main.screenManager.map.getCollectableManager().showBeam(_loc158_,_loc159_,1000,"beam0");
                  _loc160_ = _loc157_.getSoundID();
                  if(_loc160_ != -1)
                  {
                     AudioManager.playSoundEffect(_loc160_,false,false,_loc156_.x,_loc156_.y);
                  }
               }
               if(_loc129_ != 666)
               {
                  _loc161_ = BPLocale.getText("oksammel");
                  _loc161_ = _loc161_.replace(/%!/,InGameCatalog.instance.ore_names[_loc129_]);
                  this.main.getGuiManager().writeToLog(_loc161_);
               }
               break;
            case ServerCommands.CARGO_FULL:
               this.main.getGuiManager().writeToLog(BPLocale.getText("loadfull"));
               if(Settings.JS_EVENT_TRACKING_ENABLED)
               {
                  if(ExternalInterface.available)
                  {
                     ExternalInterface.call("clientEvent","cargoFull");
                  }
               }
               break;
            case ServerCommands.BOX_DISABLED:
               this.main.getGuiManager().writeToLog(BPLocale.getText("boxdisabled"));
               break;
            case ServerCommands.REMOVE_ORE:
               _loc38_ = _loc3_[2];
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  if(!this.main.screenManager.map.getMineManager().removeMine(_loc38_))
                  {
                     this.main.screenManager.map.getCollectableManager().removeCollectable(_loc38_);
                  }
               }
               break;
            case ServerCommands.CREATE_BOX:
               _loc38_ = _loc3_[2];
               _loc45_ = int(_loc3_[3]);
               _loc26_ = int(_loc3_[4]);
               _loc27_ = int(_loc3_[5]);
               if(!Settings.createCollectables)
               {
                  break;
               }
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  if(_loc45_ > CollectablePattern.BEACON_FRONTIER_ID)
                  {
                     _loc9_.getCollectableManager().createCollectable(CollectablePattern.TYPE_BEACON,_loc38_,_loc45_,_loc26_,_loc27_);
                     break;
                  }
                  if(_loc3_[6] != undefined)
                  {
                     _loc9_.getCollectableManager().createCollectable(CollectablePattern.TYPE_BOX,_loc38_,_loc45_,_loc26_,_loc27_,int(_loc3_[6]));
                     break;
                  }
                  _loc9_.getCollectableManager().createCollectable(CollectablePattern.TYPE_BOX,_loc38_,_loc45_,_loc26_,_loc27_);
               }
               break;
            case ServerCommands.MAP_EVENT:
               if(this.mapEventsAssembly == null)
               {
                  this.mapEventsAssembly = MapEventsAssembly.getInstance();
               }
               this.mapEventsAssembly.assembleCommand(_loc3_);
               break;
            case ServerCommands.LOGOUT:
               _loc130_ = this.main.getGuiManager().getGlobalchat();
               if(_loc130_ != null)
               {
                  _loc130_.cleanup();
               }
               this.main.setScheduledDisconnect(true);
               if(ExternalInterface.available)
               {
                  ExternalInterface.call("bpCloseWindow","");
                  break;
               }
               System.exit(0);
               break;
            case ServerCommands.LOGOUT_CANCEL_FROM_SERVER:
               this.main.getGuiManager().logoutCancelFromServer();
               break;
            case ServerCommands.SET_PRICES:
               switch(_loc3_[2])
               {
                  case ServerCommands.SET_AMMO_PRICES:
                     _loc59_ = 3;
                     while(_loc59_ < _loc3_.length)
                     {
                        _loc162_ = _loc3_[_loc59_];
                        _loc163_ = _loc162_.split(",");
                        _loc50_ = StringUtil.trim(_loc163_.shift());
                        _loc51_ = int(_loc163_.shift());
                        _loc164_ = 0;
                        _loc165_ = 0;
                        while(_loc165_ < _loc163_.length / 3)
                        {
                           _loc166_ = int(_loc163_[_loc164_]);
                           _loc167_ = int(_loc163_[_loc164_ + 1]);
                           _loc52_ = _loc163_[_loc164_ + 2];
                           if(_loc50_ == "b")
                           {
                              _loc168_ = new AmmoPrice(AmmoPrice.CATEGORY_LASER,_loc51_,_loc166_,_loc167_,_loc52_);
                           }
                           else if(_loc50_ == "r")
                           {
                              _loc168_ = new AmmoPrice(AmmoPrice.CATEGORY_ROCKET,_loc51_,_loc166_,_loc167_,_loc52_);
                           }
                           PatternManager.ammoPrices.push(_loc168_);
                           _loc164_ += 3;
                           _loc165_++;
                        }
                        _loc59_++;
                     }
                     this.main.getGuiManager().getMenuManager().updateAmmoPrices();
                     break;
                  default:
                     OrePattern(PatternManager.orePatterns[OrePattern.ORE_PROMETIUM]).price = int(_loc3_[2]);
                     OrePattern(PatternManager.orePatterns[OrePattern.ORE_ENDURIUM]).price = int(_loc3_[3]);
                     OrePattern(PatternManager.orePatterns[OrePattern.ORE_TERBIUM]).price = int(_loc3_[4]);
                     OrePattern(PatternManager.orePatterns[OrePattern.ORE_PROMETID]).price = int(_loc3_[5]);
                     OrePattern(PatternManager.orePatterns[OrePattern.ORE_DURANIUM]).price = int(_loc3_[6]);
                     OrePattern(PatternManager.orePatterns[OrePattern.ORE_PROMERIUM]).price = int(_loc3_[7]);
                     OrePattern(PatternManager.orePatterns[OrePattern.ORE_PALLADIUM]).price = int(_loc3_[8]);
                     this.main.getGuiManager().updateTradeWindow();
                     this.main.getGuiManager().showTradeWindow();
               }
               break;
            case ServerCommands.SET_ORE_COUNT:
               OrePattern(PatternManager.orePatterns[OrePattern.ORE_PROMETIUM]).count = int(_loc3_[2]);
               OrePattern(PatternManager.orePatterns[OrePattern.ORE_ENDURIUM]).count = int(_loc3_[3]);
               OrePattern(PatternManager.orePatterns[OrePattern.ORE_TERBIUM]).count = int(_loc3_[4]);
               OrePattern(PatternManager.orePatterns[OrePattern.ORE_XENOMIT]).count = int(_loc3_[5]);
               OrePattern(PatternManager.orePatterns[OrePattern.ORE_PROMETID]).count = int(_loc3_[6]);
               OrePattern(PatternManager.orePatterns[OrePattern.ORE_DURANIUM]).count = int(_loc3_[7]);
               OrePattern(PatternManager.orePatterns[OrePattern.ORE_PROMERIUM]).count = int(_loc3_[8]);
               OrePattern(PatternManager.orePatterns[OrePattern.ORE_SEPROM]).count = int(_loc3_[9]);
               OrePattern(PatternManager.orePatterns[OrePattern.ORE_PALLADIUM]).count = int(_loc3_[10]);
               this.main.getGuiManager().updateTradeWindow();
               this.main.getGuiManager().updateRefinementWindow();
               _loc9_ = this.main.screenManager.map;
               if(_loc9_ != null)
               {
                  _loc9_.getShipManager().updateHeroCargo();
               }
               break;
            case ServerCommands.BUY:
               loop20:
               switch(_loc3_[2])
               {
                  case ServerCommands.BUY_SUCCESS:
                     _loc50_ = _loc3_[3];
                     _loc169_ = int(_loc3_[4]);
                     _loc51_ = int(_loc3_[5]);
                     if(_loc50_ == "b")
                     {
                        this.main.getGuiManager().writeToLog(BPLocale.getText("bought_bat").replace("%TYPE%",_loc169_).replace("%COUNT%",BPLocale.roundInteger(_loc51_)));
                        break;
                     }
                     if(_loc50_ == "r")
                     {
                        this.main.getGuiManager().writeToLog(BPLocale.getText("bought_rok").replace("%TYPE%",_loc169_).replace("%COUNT%",BPLocale.roundInteger(_loc51_)));
                     }
                     break;
                  case ServerCommands.BUY_FAILED:
                     switch(_loc3_[3])
                     {
                        case ServerCommands.BUY_FAILED_NO_MONEY:
                           _loc52_ = _loc3_[4];
                           if(_loc52_ == "U")
                           {
                              this.main.getGuiManager().writeToLog(BPLocale.getText("ammobuy_fail_uri"));
                              break loop20;
                           }
                           if(_loc52_ == "C")
                           {
                              this.main.getGuiManager().writeToLog(BPLocale.getText("ammobuy_fail_cre"));
                           }
                           break loop20;
                        case ServerCommands.BUY_FAILED_NO_CARGO:
                           this.main.getGuiManager().writeToLog(BPLocale.getText("ammobuy_fail_space"));
                           break loop20;
                        default:
                           break loop20;
                     }
               }
               break;
            case ServerCommands.CLIENT_SETTING:
               this.settingsAssembly.assembleSetting(_loc3_.splice(2));
               break;
            case ServerCommands.JUMP_FAILED:
               _loc65_ = BPLocale.getText("jumplevelfalse").replace(/%!/,_loc3_[2]);
               this.main.getGuiManager().writeToLog(_loc65_);
               AudioManager.playSoundEffect(29);
               break;
            case ServerCommands.LAB:
               loop23:
               switch(_loc3_[2])
               {
                  case ServerCommands.UPDATE:
                     switch(_loc3_[3])
                     {
                        case ServerCommands.INFO:
                           _loc59_ = 4;
                           while(true)
                           {
                              if(_loc59_ >= _loc3_.length)
                              {
                                 break loop23;
                              }
                              _loc170_ = _loc3_[_loc59_];
                              _loc171_ = int(_loc3_[_loc59_ + 1]);
                              _loc172_ = int(_loc3_[_loc59_ + 2]);
                              _loc59_ += 2;
                              this.main.getGuiManager().refinementManager.updateItem(_loc170_,_loc171_,_loc172_);
                              _loc59_++;
                           }
                           break loop23;
                        case ServerCommands.GET:
                           break loop23;
                        default:
                           break loop23;
                     }
               }
               break;
            case ServerCommands.USER_INTERFACE:
               this.uiAssembly.assembleCommand(_loc3_);
               break;
            case ServerCommands.ROCKETLAUNCHER:
               this.rocketLauncherAssembly.assembleCommand(_loc3_);
               break;
            case ServerCommands.SPECIAL_ENEMY:
               loop26:
               switch(_loc3_[2])
               {
                  case ServerCommands.ALIENMOTHERSHIP:
                     _loc9_ = this.main.screenManager.map;
                     _loc123_ = int(_loc3_[4]);
                     _loc173_ = int(_loc3_[5]);
                     switch(_loc3_[3])
                     {
                        case ServerCommands.MOVE:
                           if(_loc9_ != null)
                           {
                              _loc60_ = int(_loc3_[5]);
                              _loc61_ = int(_loc3_[6]);
                              _loc174_ = int(_loc3_[7]);
                              _loc9_.alienMothershipManager.move(_loc123_,_loc60_,_loc61_,_loc174_);
                           }
                           break loop26;
                        case ServerCommands.CREATE:
                           _loc60_ = int(_loc3_[5]);
                           _loc61_ = int(_loc3_[6]);
                           if(_loc9_ != null)
                           {
                              _loc9_.alienMothershipManager.createAlienMothership(_loc123_,_loc60_,_loc61_);
                           }
                           break loop26;
                        case ServerCommands.ROTATE:
                           if(_loc9_ != null)
                           {
                              _loc9_.alienMothershipManager.rotateAlienMothership(_loc123_,_loc173_);
                           }
                           break loop26;
                        case ServerCommands.PREPARE_ATTACK:
                           if(_loc9_ != null)
                           {
                              _loc9_.alienMothershipManager.prepareAttack(_loc123_,_loc173_);
                           }
                           break loop26;
                        case ServerCommands.PREPARE_BIG_ATTACK:
                           if(_loc9_ != null)
                           {
                              _loc9_.alienMothershipManager.prepareBigAttack(_loc123_,_loc173_);
                           }
                           break loop26;
                        case ServerCommands.CLOAK:
                           if(_loc9_ != null)
                           {
                              _loc9_.alienMothershipManager.cloak(_loc123_,_loc173_);
                           }
                           break loop26;
                        case ServerCommands.IDLE:
                           if(_loc9_ != null)
                           {
                              _loc9_.alienMothershipManager.idle(_loc123_);
                           }
                           break loop26;
                        case ServerCommands.KILL:
                           if(_loc9_ != null)
                           {
                              _loc9_.alienMothershipManager.kill(_loc123_);
                           }
                           break loop26;
                        default:
                           break loop26;
                     }
               }
               break;
            case ServerCommands.TRACKING:
               _loc131_ = Capabilities.version;
               _loc132_ = int(this.main.getGuiManager().debugView.currentFPS);
               _loc133_ = int(this.main.getGuiManager().debugView.currentMem);
               _loc134_ = int(this.main.getGuiManager().debugView.averageFPS);
               _loc135_ = int(this.main.getGuiManager().debugView.minFPS);
               _loc136_ = int(this.main.getGuiManager().debugView.maxFPS);
               _loc137_ = int(this.main.getGuiManager().debugView.averageMem);
               _loc138_ = int(this.main.getGuiManager().debugView.minMem);
               _loc139_ = int(this.main.getGuiManager().debugView.maxMem);
               this.main.getGuiManager().debugView.refreshTracking();
               this.sendCommand(ServerCommands.TRACKING,[_loc131_,_loc132_,_loc133_,_loc134_,_loc135_,_loc136_,_loc137_,_loc138_,_loc139_]);
               break;
            case ServerCommands.CHANGE_MAP:
               this.isHeroLoaded = false;
         }
         loop30:
         switch(_loc3_[0])
         {
            case ServerCommands.ERROR:
               _loc175_ = uint(int(_loc3_[1]));
               switch(_loc175_)
               {
                  case ServerCommands.NO_HITPOINTS:
                     Hero.isKilled = true;
                     if(this.xmlSocket.connected)
                     {
                        this.main.setScheduledDisconnect(true);
                        this.xmlSocket.close();
                     }
                     this.main.getGuiManager().removeConnectionWindow();
                     TweenMax.delayedCall(2,this.main.getGuiManager().showHeroDestroyedWindow);
                     break loop30;
                  case ServerCommands.NOT_LOGGED_IN:
                     this.main.setScheduledDisconnect(true);
                     this.main.getGuiManager().removeConnectionWindow();
                     this.main.screenManager.showSimpleMessage(BPLocale.getText("notloggedin"));
                     break loop30;
                  case ServerCommands.DOUBLE_LOGGED_IN:
                     this.main.setScheduledDisconnect(true);
                     this.main.getGuiManager().removeConnectionWindow();
                     this.main.screenManager.showSimpleMessage(BPLocale.getText("doubleloggedin"));
                     break loop30;
                  case ServerCommands.INVALID_SESSION:
                     break loop30;
                  default:
                     break loop30;
               }
               break;
            case ServerCommands.KICKED:
         }
      }
      
      public function getMappedShipType(param1:int) : int
      {
         var _loc2_:Array = [171,71,173,73,175,75,176,76,177,77,178,78,179,79,181,81,183,83];
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_.length)
         {
            if(param1 == _loc2_[_loc3_])
            {
               return _loc2_[_loc3_ + 1];
            }
            _loc3_ += 2;
         }
         return param1;
      }
      
      public function get isLoggingGameServerIO() : Boolean
      {
         return this._isLoggingGameServerIO;
      }
      
      public function set isLoggingGameServerIO(param1:Boolean) : void
      {
         this._isLoggingGameServerIO = param1;
         if(this._isLoggingGameServerIO)
         {
            this.ioLogger = CommandLog.instance;
         }
      }
   }
}

package net.bigpoint.darkorbit.net
{
   public class CooldownCommandMap
   {
      
      private var mappedFunction:Function;
      
      private var serverCommands:Array;
      
      public function CooldownCommandMap(param1:Function, param2:Array)
      {
         super();
         this.mappedFunction = param1;
         this.serverCommands = param2;
      }
      
      public function callMappedFunction(param1:int) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this.serverCommands.length)
         {
            this.mappedFunction(this.serverCommands[_loc2_],param1);
            _loc2_++;
         }
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Main;
   
   public class GroupSystemAssembly extends BaseAssembly
   {
      
      private static var _instance:GroupSystemAssembly;
      
      private var delegateDict:Dictionary;
      
      private var main:Main;
      
      public function GroupSystemAssembly(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("SettingsAssembly is a Singleton and can only be accessed through GroupSystemAssembly.getInstance()");
         }
         this.main = _main;
         this.initDelegateDict();
      }
      
      public static function getInstance() : GroupSystemAssembly
      {
         if(_instance == null)
         {
            _instance = new GroupSystemAssembly(hidden);
         }
         return _instance;
      }
      
      private static function hidden() : void
      {
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.GROUPSYSTEM_ERROR] = this.assembleGroupSystemError;
         this.delegateDict[ServerCommands.GROUPSYSTEM_GROUP_EVENT_UPDATE] = this.assembleGroupEventUpdate;
         this.delegateDict[ServerCommands.GROUPSYSTEM_INIT] = this.assembleGroupSystemInit;
         this.delegateDict[ServerCommands.GROUPSYSTEM_GROUP_INVITE] = this.assembleGroupSystemInvite;
         this.delegateDict[ServerCommands.GROUPSYSTEM_GROUP_EVENT_END] = this.assembleGroupEventEnd;
         this.delegateDict[ServerCommands.GROUPSYSTEM_GROUP_EVENT_PING] = this.assembleGroupEventPing;
         this.delegateDict[ServerCommands.GROUPSYSTEM_GROUP_EVENT_MEMBER_LEAVES] = this.assembleGroupMemberLeaves;
         this.delegateDict[ServerCommands.GROUPSYSTEM_GROUP_EVENT_KILL] = this.assembleGroupEventKill;
         this.delegateDict[ServerCommands.GROUPSYSTEM_GROUP_EVENT_ERROR] = this.assembleGroupEventError;
         this.delegateDict[ServerCommands.GROUPSYSTEM_GROUP_EVENT_JUMP] = this.assembleGroupEventJump;
         this.delegateDict[ServerCommands.GROUPSYSTEM_GROUP_EVENT_NEW_LEADER] = this.assembleGroupEventNewLeader;
         this.delegateDict[ServerCommands.GROUPSYSTEM_GROUP_EVENT_INVITATION_BEHAVIOUR_CHANGE] = this.assembleGroupEventChangeInvitationBehaviour;
         this.delegateDict[ServerCommands.GROUPSYSTEM_INIT_UI] = this.assembleGroupEventInit;
         this.delegateDict[ServerCommands.GROUPSYSTEM_BLOCK_INVITATIONS] = this.assembleGroupEventBlockInvitation;
      }
      
      private function assembleGroupSystemError(param1:Array) : void
      {
         var _loc2_:String = param1[3];
         switch(_loc2_)
         {
            case ServerCommands.GROUPSYSTEM_ERROR_CONNECTION:
               this.main.getGroupManager().terminateGroup();
               this.main.getGroupManager().deleteAllInvitations();
         }
      }
      
      private function assembleGroupSystemInit(param1:Array) : void
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc2_:String = param1[3];
         switch(_loc2_)
         {
            case ServerCommands.GROUPSYSTEM_INIT_SUB_GROUP:
               param1.splice(0,4);
               _loc3_ = int(param1.shift());
               _loc4_ = int(param1.shift());
               _loc5_ = int(param1.shift());
               _loc6_ = int(param1.shift());
               _loc7_ = int(param1.shift());
               this.main.getGroupManager().initGroupWithMembers(_loc3_,_loc4_,_loc5_,_loc6_,_loc7_,param1);
               break;
            case ServerCommands.GROUPSYSTEM_INIT_SUB_PLAYER:
         }
      }
      
      private function assembleGroupSystemInvite(param1:Array) : void
      {
         var _loc3_:String = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:String = null;
         var _loc2_:String = param1[3];
         switch(_loc2_)
         {
            case ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_BY_ID:
               param1.splice(0,4);
               this.main.getGroupManager().handleRawInvitation(param1);
               break;
            case ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_DELETE:
               _loc3_ = param1[4];
               _loc4_ = int(param1[5]);
               _loc5_ = int(param1[6]);
               this.main.getGroupManager().deleteInvitation(_loc4_,_loc5_,_loc3_);
               break;
            case ServerCommands.GROUPSYSTEM_GROUP_INVITE_SUB_ERROR:
               _loc6_ = param1[4];
               this.main.getGroupManager().handleInvitationError(_loc6_);
         }
      }
      
      private function assembleGroupEventBlockInvitation(param1:Array) : void
      {
         var _loc2_:Boolean = Boolean(int(param1[3]));
         this.main.getGroupManager().changeBlockInvitationsState(_loc2_);
      }
      
      private function assembleGroupEventInit(param1:Array) : void
      {
         this.main.getGroupManager();
      }
      
      private function assembleGroupEventChangeInvitationBehaviour(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         this.main.getGroupManager().handleInvitationBehaviourChange(_loc2_);
      }
      
      private function assembleGroupEventNewLeader(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         this.main.getGroupManager().handleLeaderChange(_loc2_);
      }
      
      private function assembleGroupEventJump(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         this.main.getGroupManager().handleMemberJump(_loc2_);
      }
      
      private function assembleGroupEventError(param1:Array) : void
      {
         var _loc2_:String = param1[3];
         var _loc3_:int = -1;
         if(param1[4] != null)
         {
            _loc3_ = int(param1[4]);
         }
         this.main.getGroupManager().handleGroupError(_loc2_,_loc3_);
      }
      
      private function assembleGroupEventKill(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         this.main.getGroupManager().handleMemberKill(_loc2_);
      }
      
      private function assembleGroupMemberLeaves(param1:Array) : void
      {
         var _loc2_:String = param1[3];
         var _loc3_:int = int(param1[4]);
         this.main.getGroupManager().onMemberLeft(_loc3_,_loc2_);
      }
      
      private function assembleGroupEventPing(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         this.main.getGroupManager().createMapmarker(0,0,_loc2_,_loc3_);
      }
      
      private function assembleGroupEventEnd(param1:Array) : void
      {
         this.main.getGroupManager().terminateGroup();
      }
      
      private function assembleGroupEventUpdate(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:XML = new XML(param1[4]);
         this.main.getGroupManager().updateMemberStats(_loc2_,_loc3_);
      }
      
      private function defaultCaseDelegate(param1:Array) : void
      {
      }
      
      public function assembleGroupSystemEvent(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
         else
         {
            this.defaultCaseDelegate(param1);
         }
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.TextReplacementList;
   import flash.display.MovieClip;
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.InGameCatalog;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.collectable.Collectable;
   import net.bigpoint.darkorbit.combat.CombatManager;
   import net.bigpoint.darkorbit.combat.ExplosionPattern;
   import net.bigpoint.darkorbit.data.vo.RankedHuntStatsVO;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.ShipManager;
   import net.bigpoint.darkorbit.ship.effects.EffectIDList;
   import net.bigpoint.darkorbit.ship.effects.EffectsManager;
   import net.bigpoint.darkorbit.ship.effects.InvincibilityEffect;
   import net.bigpoint.darkorbit.ship.effects.RageEffect;
   import net.bigpoint.darkorbit.ship.effects.SaboteurEffect;
   import net.bigpoint.darkorbit.ship.effects.SkullEffect;
   import net.bigpoint.darkorbit.ship.effects.SpeedBuffEffect;
   
   public class MapEventsAssembly extends BaseAssembly
   {
      
      private static var instance:MapEventsAssembly;
      
      private var map:Map;
      
      private var main:Main;
      
      private var delegateDict:Dictionary;
      
      private var effectsManager:EffectsManager = EffectsManager.getInstance();
      
      public function MapEventsAssembly(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("MapEventsAssembly is a Singleton and can only be accessed through MapEventsAssembly.getInstance()");
         }
         this.main = _main;
         this.initDelegateDict();
      }
      
      public static function getInstance() : MapEventsAssembly
      {
         if(instance == null)
         {
            instance = new MapEventsAssembly(hidden);
         }
         return instance;
      }
      
      private static function hidden() : void
      {
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.SET_PLAYER_ATTACKABLE] = this.assembleSetPlayerAttackable;
         this.delegateDict[ServerCommands.DISPLAY_MESSAGE] = this.assembleDisplayMessage;
         this.delegateDict[ServerCommands.TARGET_FADE_TO_GRAY] = this.assembleTargetFadeToGray;
         this.delegateDict[ServerCommands.TARGET_FADE_TO_GRAY_ABORT] = this.assembleTargetFadeToGrayAbort;
         this.delegateDict[ServerCommands.TARGET_INVISIBLE] = this.assembleTargetInvisible;
         this.delegateDict[ServerCommands.SET_DRONES] = this.assembleSetDrones;
         this.delegateDict[ServerCommands.SET_DRONE_DISPLAY] = this.assembleSetDroneDisplay;
         this.delegateDict[ServerCommands.EMP_MALUS_BOLT] = this.assembleEmpMalusBolt;
         this.delegateDict[ServerCommands.ENEMY_WARNING] = this.assembleEnemyWarning;
         this.delegateDict[ServerCommands.SPAWN_ENEMIES] = this.assembleSpawnEnemies;
         this.delegateDict[ServerCommands.SET_TITLE] = this.assembleSetTitle;
         this.delegateDict[ServerCommands.REMOVE_TITLE] = this.assembleRemoveTitle;
         this.delegateDict[ServerCommands.SET_PERMANENT_TITLE] = this.assembleSetPermanentTitle;
         this.delegateDict[ServerCommands.MALUS] = this.assembleMalus;
         this.delegateDict[ServerCommands.SMARTBOMB] = this.assembleSmartbomb;
         this.delegateDict[ServerCommands.INSTASHIELD] = this.assembleInstashield;
         this.delegateDict[ServerCommands.EMP] = this.assembleEmp;
         this.delegateDict[ServerCommands.TECHS_UPDATE] = this.assembleTechsUpdate;
         this.delegateDict[ServerCommands.SET_PORTAL] = this.assembleSetPortal;
         this.delegateDict[ServerCommands.BOOSTER_FOUND] = this.assembleBoosterFound;
         this.delegateDict[ServerCommands.FIREWORKS_IGNITE] = this.assembleFireworksIgnite;
         this.delegateDict[ServerCommands.FIREWORKS_IGNITE_GROUP] = this.assembleFireworksIgniteGroup;
         this.delegateDict[ServerCommands.INDEPENDENCE_DAY_MODE] = this.assembleIndependenceDayMode;
         this.delegateDict[ServerCommands.INIT_SCOREBOARD] = this.assembleInitScoreboard;
         this.delegateDict[ServerCommands.SET_SCORE] = this.assembleSetScore;
         this.delegateDict[ServerCommands.SET_SPEED] = this.assembleSetSpeed;
         this.delegateDict[ServerCommands.INIT_INVASION_SCOREBOARD] = this.assembleInitInvasionScoreboard;
         this.delegateDict[ServerCommands.SET_INVASION_SCORE] = this.assembleSetInvasionScore;
         this.delegateDict[ServerCommands.SET_INVASION_WAVE] = this.assembleSetInvasionWave;
         this.delegateDict[ServerCommands.CTB] = this.assembleCtb;
         this.delegateDict[ServerCommands.TEAM_DEATHMATCH] = this.assembleTeamDeathmatch;
         this.delegateDict[ServerCommands.SKILL_DESIGNS] = this.assembleSkillDesigns;
         this.delegateDict[ServerCommands.MINE_EXPLODE] = this.assembleMineExplode;
         this.delegateDict[ServerCommands.RANKED_HUNT_EVENT_UPDATE] = this.assembleRankedHuntEventUpdate;
         this.delegateDict[ServerCommands.PLAY_SPECIAL_EXPLOSION] = this.assemblePlaySpecialExplosion;
         this.delegateDict[ServerCommands.SAB_SHOT] = this.assembleSabShot;
         this.delegateDict[ServerCommands.SPAWN] = this.assembleSpawn;
         this.delegateDict[ServerCommands.DESPAWN] = this.assembleSpawn;
         this.delegateDict[ServerCommands.HEAL_RAY] = this.assembleHealRay;
         this.delegateDict[ServerCommands.GRAPHIC_FX] = this.assembleGraphicFx;
      }
      
      public function assembleSubCommand(param1:Array) : void
      {
         var _loc2_:String = param1[3];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      public function assembleCommand(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      private function assemblePlaySpecialExplosion(param1:Array) : void
      {
         var _loc3_:MapObject = null;
         var _loc2_:int = int(param1[3]);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc3_ = this.map.getShipManager().getShip(_loc2_);
            if(_loc3_ != null)
            {
               _loc3_.explodeTypeID = 6;
               AudioManager.playSoundEffect(75,false,false,_loc3_.x,_loc3_.y,true);
            }
         }
      }
      
      private function assembleSabShot(param1:Array) : void
      {
         var _loc4_:CombatManager = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc4_ = this.map.getCombatManager();
            if(_loc4_ != null)
            {
               _loc4_.addChasingShot(_loc2_,_loc3_,"sab_shot");
            }
         }
      }
      
      private function assembleSpawn(param1:Array) : void
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:MapObject = null;
         if(param1.length == 4)
         {
            _loc6_ = int(param1[3]);
            _loc7_ = this.main.screenManager.map.getShipManager().getShip(_loc6_);
            if(_loc7_ == null)
            {
               return;
            }
            _loc2_ = _loc7_.x;
            _loc3_ = _loc7_.y;
         }
         else
         {
            if(param1.length != 5)
            {
               return;
            }
            _loc2_ = int(param1[3]);
            _loc3_ = int(param1[4]);
         }
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("spawn0"));
         var _loc5_:MovieClip = MovieClip(_loc4_.getEmbededMovieClip("mc"));
         this.main.screenManager.getExplosionLayer().addChild(_loc5_);
         _loc5_.x = _loc2_;
         _loc5_.y = _loc3_;
         ScreenManager.playAnimation(_loc5_,20,false,1,true);
         AudioManager.playSoundEffect(79,false,false,_loc2_,_loc3_,true);
      }
      
      private function assembleHealRay(param1:Array) : void
      {
         var _loc4_:CombatManager = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         if(this.map != null)
         {
            _loc4_ = this.map.getCombatManager();
            if(_loc4_ != null)
            {
               _loc4_.addHealingBeam(_loc2_,_loc3_);
            }
         }
      }
      
      private function assembleGraphicFx(param1:Array) : void
      {
         var _loc6_:MapObject = null;
         var _loc7_:RageEffect = null;
         var _loc8_:SaboteurEffect = null;
         var _loc9_:SpeedBuffEffect = null;
         var _loc10_:SkullEffect = null;
         var _loc11_:InvincibilityEffect = null;
         var _loc2_:ShipManager = this.main.screenManager.map.getShipManager();
         var _loc3_:int = int(param1[5]);
         var _loc4_:String = param1[3];
         var _loc5_:String = param1[4];
         if(_loc4_ == ServerCommands.GRAPHIC_FX_START)
         {
            _loc6_ = _loc2_.getShip(_loc3_);
            if(_loc5_ == ServerCommands.GRAPHIC_FX_RAGE)
            {
               if(_loc6_ != null && !this.effectsManager.doesEffectExistOn(_loc6_,EffectIDList.RAGE))
               {
                  _loc7_ = new RageEffect(EffectIDList.RAGE,new EffectPattern(EffectIDList.RAGE,""),false,[_loc6_]);
                  this.effectsManager.addEffect(_loc7_,_loc6_);
                  AudioManager.playSoundEffect(78,false,false,_loc6_.x,_loc6_.y,true);
               }
            }
            else if(_loc5_ == ServerCommands.GRAPHIC_FX_SABOTEUR_DEBUFF)
            {
               if(_loc6_ != null && !this.effectsManager.doesEffectExistOn(_loc6_,EffectIDList.SABOTEUR_SLOW_DOWN_EFFECT))
               {
                  _loc8_ = new SaboteurEffect(EffectIDList.SABOTEUR_SLOW_DOWN_EFFECT,new EffectPattern(EffectIDList.SABOTEUR_SLOW_DOWN_EFFECT,"slow-effect"));
                  this.effectsManager.addEffect(_loc8_,_loc6_,EffectsManager.ROTATION_DEPENDANT_EFFECT);
                  _loc6_.isDebuffed = true;
               }
            }
            else if(_loc5_ == ServerCommands.SPEED_BUFF)
            {
               _loc9_ = new SpeedBuffEffect(EffectIDList.SPEED_BUFF_EFFECT,new EffectPattern(EffectIDList.SPEED_BUFF_EFFECT,"speed-buff-effect"));
               this.effectsManager.addEffect(_loc9_,_loc2_.getShip(_loc3_),EffectsManager.ROTATION_DEPENDANT_EFFECT);
            }
            else if(_loc5_ == ServerCommands.GRAPHIC_FX_SKULL)
            {
               if(_loc6_ != null && !this.effectsManager.doesEffectExistOn(_loc6_,EffectIDList.SKULL))
               {
                  _loc10_ = new SkullEffect(EffectIDList.SKULL,new EffectPattern(EffectIDList.SKULL,"skull"));
                  this.effectsManager.addEffect(_loc10_,_loc6_);
               }
            }
            else if(_loc5_ == ServerCommands.GRAPHIC_FX_INVINCIBILITY)
            {
               if(_loc6_ != null && !this.effectsManager.doesEffectExistOn(_loc6_,EffectIDList.INVINCIBILITY))
               {
                  _loc11_ = new InvincibilityEffect(EffectIDList.INVINCIBILITY,new EffectPattern(EffectIDList.INVINCIBILITY,"invincibilityShield"));
                  this.effectsManager.addEffect(_loc11_,_loc6_);
                  AudioManager.playSoundEffect(80,false,false,_loc6_.x,_loc6_.y,true);
               }
            }
            else if(_loc5_ == ServerCommands.GRAPHIC_FX_KAMIKAZE)
            {
               if(_loc6_ != null)
               {
                  AudioManager.playSoundEffect(75,false,false,_loc6_.x,_loc6_.y,true);
               }
            }
         }
         else if(_loc4_ == ServerCommands.GRAPHIC_FX_END)
         {
            if(_loc5_ == ServerCommands.GRAPHIC_FX_RAGE)
            {
               _loc6_ = _loc2_.getShip(_loc3_);
               this.effectsManager.removeEffectByIdFromEntity(_loc6_,EffectIDList.RAGE);
            }
            else if(_loc5_ == ServerCommands.GRAPHIC_FX_SABOTEUR_DEBUFF)
            {
               _loc6_ = _loc2_.getShip(_loc3_);
               if(_loc6_ != null)
               {
                  this.effectsManager.removeEffectByIdFromEntity(_loc6_,EffectIDList.SABOTEUR_SLOW_DOWN_EFFECT);
                  _loc6_.isDebuffed = false;
               }
            }
            else if(_loc5_ == ServerCommands.SPEED_BUFF)
            {
               this.effectsManager.removeEffectByIdFromEntity(_loc2_.getShip(_loc3_),EffectIDList.SPEED_BUFF_EFFECT);
            }
            else if(_loc5_ == ServerCommands.GRAPHIC_FX_SKULL)
            {
               this.effectsManager.removeEffectByIdFromEntity(_loc2_.getShip(_loc3_),EffectIDList.SKULL);
            }
            else if(_loc5_ == ServerCommands.GRAPHIC_FX_INVINCIBILITY)
            {
               _loc6_ = _loc2_.getShip(_loc3_);
               if(_loc6_ != null)
               {
                  this.effectsManager.removeEffectByIdFromEntity(_loc6_,EffectIDList.INVINCIBILITY);
               }
            }
         }
      }
      
      private function assembleSetPlayerAttackable(param1:Array) : void
      {
         var _loc4_:MapObject = null;
         var _loc2_:Boolean = Boolean(int(param1[4]));
         var _loc3_:int = int(param1[3]);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc4_ = this.map.getShipManager().getShip(_loc3_);
            if(_loc4_ != null)
            {
               _loc4_.changeAttackableStateInNonPvPMap(_loc2_);
            }
         }
         if(_loc4_ != null)
         {
            if(_loc2_)
            {
               this.main.getGuiManager().writeToLog(BPLocale.getText("msg_recovery_of_ceasefire").replace(/%nick%/,_loc4_.getUsername()));
            }
            else
            {
               this.main.getGuiManager().writeToLog(BPLocale.getText("msg_loss_of_ceasefire").replace(/%nick%/,_loc4_.getUsername()));
            }
         }
      }
      
      private function assembleDisplayMessage(param1:Array) : void
      {
         var _loc5_:TextReplacementList = null;
         var _loc2_:String = param1[3];
         var _loc3_:int = int(param1[4]);
         var _loc4_:String = BPLocale.getText(param1[5]);
         if(param1[6] != undefined)
         {
            _loc5_ = TextReplacementList.parseRawTextReplacement(param1[6]);
            _loc4_ = _loc5_.replace(_loc4_);
         }
         this.main.getGuiManager().addNotification(_loc4_);
      }
      
      private function assembleTargetFadeToGray(param1:Array) : void
      {
         var _loc4_:MapObject = null;
         this.map = this.main.screenManager.map;
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         if(_loc3_ != Hero.userID)
         {
            if(this.map != null)
            {
               _loc4_ = this.map.getShipManager().getShip(_loc2_);
               if(_loc4_ != null && !_loc4_.isGroupMember)
               {
                  _loc4_.setCrossHairColor(MapObject.CROSSHAIR_GRAY);
               }
            }
         }
      }
      
      private function assembleTargetFadeToGrayAbort(param1:Array) : void
      {
         var _loc3_:MapObject = null;
         this.map = this.main.screenManager.map;
         var _loc2_:int = int(param1[3]);
         if(this.map != null)
         {
            _loc3_ = this.map.getShipManager().getShip(_loc2_);
            if(_loc3_ != null)
            {
               _loc3_.setCrossHairColor(MapObject.CROSSHAIR_RED);
            }
         }
      }
      
      private function assembleTargetInvisible(param1:Array) : void
      {
         var _loc4_:MapObject = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:Boolean = Boolean(int(param1[4]));
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc4_ = this.map.getShipManager().getShip(_loc2_);
            if(_loc4_ != null)
            {
               _loc4_.setCloak(_loc3_);
            }
         }
      }
      
      private function assembleSetDrones(param1:Array) : void
      {
         var _loc4_:MapObject = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:String = param1[4];
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc4_ = this.map.getShipManager().getShip(_loc2_);
            if(_loc4_ != null)
            {
               _loc4_.removeDrones();
               _loc4_.removeSimpleDroneDisplay();
               this.map.getDroneManager().parseDroneString(_loc2_,_loc3_);
               this.map.getDroneManager().deployDrones(_loc2_);
            }
         }
      }
      
      private function assembleSetDroneDisplay(param1:Array) : void
      {
         var _loc6_:MapObject = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:Array = String(param1[4]).split("/");
         var _loc4_:int = int(_loc3_[0]);
         var _loc5_:int = int(_loc3_[1]);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc6_ = this.map.getShipManager().getShip(_loc2_);
            if(_loc6_ != null)
            {
               _loc6_.removeDrones();
               _loc6_.removeSimpleDroneDisplay();
               _loc6_.updateDroneDisplay(_loc4_,_loc5_);
            }
         }
      }
      
      private function assembleEmpMalusBolt(param1:Array) : void
      {
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            this.map.getMinimapManager().getMiniMap().startInterference(int(param1[3]));
         }
      }
      
      private function assembleEnemyWarning(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         this.main.getGuiManager().setThreadIndicator(_loc2_);
      }
      
      private function assembleSpawnEnemies(param1:Array) : void
      {
      }
      
      private function assembleSetTitle(param1:Array) : void
      {
         var _loc4_:MapObject = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:String = param1[4];
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc4_ = this.map.getShipManager().getShip(_loc2_);
            if(_loc4_ != null)
            {
               if(_loc3_ == "-1")
               {
                  _loc4_.removeTitle();
               }
               else
               {
                  _loc4_.updateTitle(_loc3_);
               }
            }
         }
      }
      
      private function assembleRemoveTitle(param1:Array) : void
      {
         var _loc3_:MapObject = null;
         var _loc2_:int = int(param1[3]);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc3_ = this.map.getShipManager().getShip(_loc2_);
            if(_loc3_ != null)
            {
               _loc3_.removeTitle();
            }
         }
      }
      
      private function assembleSetPermanentTitle(param1:Array) : void
      {
         var _loc4_:MapObject = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:String = param1[4];
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc4_ = this.map.getShipManager().getShip(_loc2_);
            if(_loc4_ != null)
            {
               if(_loc3_ == "-1")
               {
                  _loc4_.removePermanentTitle();
               }
               else
               {
                  _loc4_.updatePermanentTitle(BPLocale.getText(_loc3_));
               }
            }
         }
      }
      
      private function assembleMalus(param1:Array) : void
      {
         var _loc5_:MapObject = null;
         var _loc2_:String = param1[3];
         var _loc3_:int = int(param1[4]);
         var _loc4_:* = _loc3_ == Hero.userID;
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc5_ = this.map.getShipManager().getShip(_loc3_);
            if(_loc5_ != null)
            {
               switch(_loc2_)
               {
                  case ServerCommands.MALUS_SET:
                     _loc5_.addMalus();
                     if(_loc4_)
                     {
                        this.main.getGuiManager().writeToLog(BPLocale.getText("msg_arms_harmed"));
                     }
                     break;
                  case ServerCommands.MALUS_REMOVE:
                     _loc5_.removeMalus();
                     if(_loc4_)
                     {
                        this.main.getGuiManager().writeToLog(BPLocale.getText("msg_arms_recovered"));
                     }
               }
            }
         }
      }
      
      private function assembleMultiplierFound(param1:Array) : void
      {
      }
      
      private function assembleSmartbomb(param1:Array) : void
      {
         var _loc4_:MapObject = null;
         var _loc5_:ExplosionPattern = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = 0;
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc4_ = this.map.getShipManager().getShip(_loc2_);
            if(_loc4_ != null)
            {
               _loc5_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_SMARTBOMB_EXPLOSION,_loc3_);
               this.map.getCombatManager().showPyroEffect(_loc4_.x,_loc4_.y,_loc5_,50,true);
               AudioManager.playSoundEffect(30);
            }
         }
      }
      
      private function assembleInstashield(param1:Array) : void
      {
         var _loc4_:MapObject = null;
         var _loc5_:ExplosionPattern = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = 0;
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc4_ = this.map.getShipManager().getShip(_loc2_);
            if(_loc4_ != null)
            {
               _loc5_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_INSTASHIELD,_loc3_);
               this.map.getCombatManager().showPyroEffectOnShip(_loc5_,_loc4_,50);
               AudioManager.playSoundEffect(31);
            }
         }
      }
      
      private function assembleEmp(param1:Array) : void
      {
         var _loc3_:MapObject = null;
         var _loc2_:int = int(param1[3]);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc3_ = this.map.getShipManager().getShip(_loc2_);
            if(_loc3_ != null)
            {
               this.map.getCombatManager().addEMPtoShip(_loc3_);
            }
         }
      }
      
      private function assembleTechsUpdate(param1:Array) : void
      {
         TechAssembly.getInstance().assembleSubCommand(param1);
      }
      
      private function assembleSetPortal(param1:Array) : void
      {
         var _loc3_:int = 0;
         var _loc2_:String = param1[3];
         if(_loc2_ == ServerCommands.SET_PORTAL_REMOVE)
         {
            this.map = this.main.screenManager.map;
            if(this.map != null)
            {
               if(param1[4] == ServerCommands.SET_PORTAL_REMOVE_ALL)
               {
                  this.map.portalManager.deleteAllPortals();
               }
               else
               {
                  _loc3_ = int(param1[4]);
                  this.map.portalManager.deletePortal(_loc3_);
               }
            }
         }
      }
      
      private function assembleMineExplode(param1:Array) : void
      {
         var _loc2_:String = param1[3];
         var _loc3_:Map = this.main.screenManager.map;
         if(_loc3_ != null)
         {
            _loc3_.getMineManager().removeMine(_loc2_,true);
         }
      }
      
      private function assembleRankedHuntEventUpdate(param1:Array) : void
      {
         var _loc3_:int = 0;
         var _loc4_:RankedHuntStatsVO = null;
         var _loc2_:String = param1[3];
         switch(_loc2_)
         {
            case ServerCommands.RANKED_HUNT_EVENT_END:
               _loc3_ = int(param1[4]);
               if(Hero.rankedHuntingEventData != null && Hero.rankedHuntingEventData.eventVOs != null)
               {
                  _loc4_ = Hero.rankedHuntingEventData.eventVOs[_loc3_] as RankedHuntStatsVO;
                  if(_loc4_ != null)
                  {
                     delete Hero.rankedHuntingEventData.eventVOs[_loc3_];
                     this.main.getGuiManager().initUpdateRankedHuntStats(_loc3_);
                  }
               }
         }
      }
      
      private function assembleBoosterFound(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         var _loc4_:String = BPLocale.getText("booster_found");
         _loc4_ = _loc4_.replace("%BOOSTERNAME%",InGameCatalog.instance.boosterNames[_loc2_]);
         _loc4_ = _loc4_.replace("%HOURS%",_loc3_);
         this.main.getGuiManager().writeToLog(_loc4_);
      }
      
      private function assembleFireworksIgnite(param1:Array) : void
      {
         var _loc3_:Collectable = null;
         var _loc2_:String = param1[3];
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc3_ = this.map.getCollectableManager().getCollectable(_loc2_);
            this.map.getFireworksManager().showFirework(_loc3_.getTypeID(),_loc3_.clip.x,_loc3_.clip.y);
            this.map.getCollectableManager().removeCollectable(_loc2_);
         }
      }
      
      private function assembleFireworksIgniteGroup(param1:Array) : void
      {
         var _loc3_:String = null;
         var _loc4_:Collectable = null;
         var _loc2_:int = 3;
         while(_loc2_ < param1.length)
         {
            _loc3_ = param1[_loc2_];
            this.map = this.main.screenManager.map;
            if(this.map != null)
            {
               _loc4_ = this.map.getCollectableManager().getCollectable(_loc3_);
               this.map.getFireworksManager().showFirework(_loc4_.getTypeID(),_loc4_.clip.x,_loc4_.clip.y);
               this.map.getCollectableManager().removeCollectable(_loc3_);
            }
            _loc2_++;
         }
      }
      
      private function assembleIndependenceDayMode(param1:Array) : void
      {
         Settings.fireworksModeIndependenceDay = Boolean(int(param1[3]));
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            this.map.getFireworksManager().updateColorsHashmap();
         }
      }
      
      private function assembleInitScoreboard(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         var _loc4_:int = int(param1[5]);
         var _loc5_:int = int(param1[6]);
         var _loc6_:int = int(param1[7]);
         this.main.getGuiManager().createSpaceballScoreboard([_loc2_,_loc3_,_loc4_]);
         this.main.getGuiManager().setSpaceballSpeed(_loc6_,_loc5_);
      }
      
      private function assembleSetScore(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         var _loc4_:int = int(param1[5]);
         this.main.getGuiManager().updateScoreboard(SimpleWindow.WINDOW_CLASS_SPACEBALL,SimpleContainer.CLASS_SPACEBALL,_loc2_,_loc3_);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            this.map.portalManager.playPortalAnimation(_loc4_,true);
         }
      }
      
      private function assembleSetSpeed(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         this.main.getGuiManager().setSpaceballSpeed(_loc2_,_loc3_);
      }
      
      private function assembleInitInvasionScoreboard(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         var _loc4_:int = int(param1[5]);
         var _loc5_:int = int(param1[6]);
         this.main.getGuiManager().createInvasionScoreboard([_loc2_,_loc3_,_loc4_]);
         this.main.getGuiManager().setInvasionWave(_loc5_);
      }
      
      private function assembleSetInvasionScore(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         this.main.getGuiManager().updateScoreboard(SimpleWindow.WINDOW_CLASS_INVASION,SimpleContainer.CLASS_INVASION,_loc2_,_loc3_);
      }
      
      private function assembleSetInvasionWave(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         this.main.getGuiManager().setInvasionWave(_loc2_);
      }
      
      private function assembleCtb(param1:Array) : void
      {
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            this.map.getCtbManager().parseCommands(param1);
         }
      }
      
      private function assembleTeamDeathmatch(param1:Array) : void
      {
         this.main.getTDMManager().parseCommands(param1);
      }
      
      private function assembleSkillDesigns(param1:Array) : void
      {
         SkillsAssembly.getInstance().assembleSubCommand(param1);
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.ToolTipHook;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import flash.display.Bitmap;
   import flash.display.InteractiveObject;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.MouseEvent;
   import flash.external.ExternalInterface;
   import flash.text.TextField;
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.InGameCatalog;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.gui.BannerAd;
   import net.bigpoint.darkorbit.gui.BitmapFont;
   import net.bigpoint.darkorbit.gui.BuffCoolDown;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.gui.windows.components.BarComponent;
   import net.bigpoint.darkorbit.gui.windows.components.buff.BuffItem;
   import net.bigpoint.darkorbit.gui.windows.components.gear.GearComboBox;
   import net.bigpoint.darkorbit.gui.windows.components.gear.GearItem;
   import net.bigpoint.darkorbit.gui.windows.components.gear.GearMenuContainer;
   import net.bigpoint.darkorbit.gui.windows.components.gear.GearScroller;
   import net.bigpoint.darkorbit.lazyload.BannerAdLazyLoader;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.BannerAdPattern;
   import net.bigpoint.darkorbit.pattern.BuffPattern;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.pattern.GearPattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   import net.bigpoint.darkorbit.ship.ShipManager;
   import net.bigpoint.darkorbit.ship.effects.EffectBase;
   import net.bigpoint.darkorbit.ship.effects.EffectFactory;
   import net.bigpoint.darkorbit.ship.effects.EffectIDList;
   import net.bigpoint.darkorbit.ship.effects.EffectsManager;
   import net.bigpoint.darkorbit.ship.effects.LevelUpEffect;
   import net.bigpoint.darkorbit.ship.effects.PetEffect;
   import net.bigpoint.darkorbit.ship.pet.Gear;
   import net.bigpoint.darkorbit.ship.pet.GearFactory;
   import net.bigpoint.darkorbit.ship.pet.Pet;
   
   public class PetAssembly extends BaseAssembly
   {
      
      private static var instance:PetAssembly;
      
      public static const DELIMITER:String = "-";
      
      private var main:Main;
      
      private var delegateDict:Dictionary;
      
      private var effectsManager:EffectsManager = EffectsManager.getInstance();
      
      public function PetAssembly(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("PetAssembly is a Singleton and can only be accessed through PetAssembly.getInstance()");
         }
         this.main = _main;
         this.initDelegateDict();
      }
      
      public static function getInstance() : PetAssembly
      {
         if(instance == null)
         {
            instance = new PetAssembly(hidden);
         }
         return instance;
      }
      
      private static function hidden() : void
      {
      }
      
      public function assembleCommand(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
         else
         {
            this.playSound(73);
         }
      }
      
      public function assembleSubCommand(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         var _loc3_:String = param1[3];
         if(this.delegateDict[_loc2_ + DELIMITER + _loc3_] != null)
         {
            this.delegateDict[_loc2_ + DELIMITER + _loc3_](param1);
         }
         else
         {
            this.playSound(73);
         }
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.PET_INIT] = this.assemblePetInitilization;
         this.delegateDict[ServerCommands.PET_ACQUIRED] = this.assembleRemoveBanner;
         this.delegateDict[ServerCommands.ACTIVATE_HERO_PET] = this.assembleHeroPetActivation;
         this.delegateDict[ServerCommands.ACTIVATE_EXTERNAL_PET] = this.assembleExternalPetActivation;
         this.delegateDict[ServerCommands.DEACTIVATE_PET] = this.assemblePetDeactivation;
         this.delegateDict[ServerCommands.PET_DISTROYED] = this.assemblePetDestroyed;
         this.delegateDict[ServerCommands.PET_STATUS] = this.assemblePetStatus;
         this.delegateDict[ServerCommands.REPAIR_PET] = this.assemblePetRepair;
         this.delegateDict[ServerCommands.BLOCK_PET_WINDOW] = this.assembleLockWindow;
         this.delegateDict[ServerCommands.TRADE_WINDOW_ACTIVATION] = this.assembleActivateTradeWindow;
         this.delegateDict[ServerCommands.OUT_OF_FUEL] = this.assembleFuelMissingMode;
         this.delegateDict[ServerCommands.PET_IDLE] = this.assembleInvisibleMode;
         this.delegateDict[ServerCommands.PET_STOP_LASER_ATTACK] = this.assembleStopLaserAttack;
         this.delegateDict[ServerCommands.PET_RESET] = this.assembleResetStatus;
         this.delegateDict[ServerCommands.PET_REPAIR_BUTTON] = this.assembleSetRepairButtonState;
         this.delegateDict[ServerCommands.PET_ATTRIBUTE_INFO] = this.assembleSubCommand;
         this.delegateDict[ServerCommands.PET_GEAR_INFO] = this.assembleSubCommand;
         this.delegateDict[ServerCommands.PET_BUFF_INFO] = this.assembleSubCommand;
         this.delegateDict[ServerCommands.PET_ATTRIBUTE_INFO + DELIMITER + ServerCommands.EXPERIENCE_POINTS_UPDATE] = this.assemblePetXPInfo;
         this.delegateDict[ServerCommands.PET_ATTRIBUTE_INFO + DELIMITER + ServerCommands.HITPOINTS_INFO] = this.assemblePetHPInfo;
         this.delegateDict[ServerCommands.PET_ATTRIBUTE_INFO + DELIMITER + ServerCommands.SHIELD_INFO] = this.assemblePetShieldInfo;
         this.delegateDict[ServerCommands.PET_ATTRIBUTE_INFO + DELIMITER + ServerCommands.FUEL_INFO] = this.assemblePetFuelInfo;
         this.delegateDict[ServerCommands.PET_ATTRIBUTE_INFO + DELIMITER + ServerCommands.PET_LEVEL_UP] = this.assembleLevelUp;
         this.delegateDict[ServerCommands.EVASION_PROTOCOL_INFO] = this.assembleEvasionProtocolInfo;
         this.delegateDict[ServerCommands.PET_GEAR_INFO + DELIMITER + ServerCommands.LOACTOR_GEAR_INFO] = this.assembleLocatorGearInfo;
         this.delegateDict[ServerCommands.PET_GEAR_INFO + DELIMITER + ServerCommands.GEAR_TARGET_LIST] = this.assembleGearTargetsList;
         this.delegateDict[ServerCommands.PET_GEAR_INFO + DELIMITER + ServerCommands.SELECT] = this.assembleSelectGear;
         this.delegateDict[ServerCommands.PET_GEAR_INFO + DELIMITER + ServerCommands.ADD_TO_PET] = this.assembleAddGear;
         this.delegateDict[ServerCommands.PET_BUFF_INFO + DELIMITER + ServerCommands.ADD_TO_PET] = this.assembleAddBuff;
         this.delegateDict[ServerCommands.PET_GEAR_INFO + DELIMITER + ServerCommands.REMOVE_FROM_PET] = this.assembleRemoveGear;
         this.delegateDict[ServerCommands.PET_BUFF_INFO + DELIMITER + ServerCommands.REMOVE_FROM_PET] = this.assembleRemoveBuff;
      }
      
      private function assembleSetRepairButtonState(param1:Array) : void
      {
         var _loc6_:String = null;
         var _loc7_:InteractiveObject = null;
         var _loc2_:SimpleContainer = this.getPetWindowContainer();
         var _loc3_:SimpleElement = _loc2_.getElement(SimpleElement.PET_WINDOW_REPAIR_BTN);
         var _loc4_:MovieClip = _loc3_.getChildAt(0) as MovieClip;
         var _loc5_:Boolean = Boolean(int(param1[3]));
         TooltipControl.getInstance().removeToolTip(_loc3_);
         TooltipControl.getInstance().removeToolTip(_loc4_);
         if(_loc5_)
         {
            _loc4_.gotoAndStop(1);
            _loc6_ = "ttip_repair_pet";
            _loc7_ = _loc4_;
         }
         else
         {
            _loc4_.gotoAndStop(3);
            _loc6_ = "ttip_pet_repair_disabled_through_money";
            _loc7_ = _loc3_;
         }
         _loc4_.mouseChildren = _loc5_;
         _loc4_.mouseEnabled = _loc5_;
         TooltipControl.getInstance().addToolTip(_loc7_,BPLocale.getText(_loc6_));
      }
      
      private function launchPet() : void
      {
         this.main.getGuiManager().getMain().getConnectionManager().sendCommand(ServerCommands.PET,[ServerCommands.ACTIVATE_HERO_PET]);
      }
      
      private function stopPet() : void
      {
         this.main.getGuiManager().getMain().getConnectionManager().sendCommand(ServerCommands.PET,[ServerCommands.DEACTIVATE_PET]);
      }
      
      private function requestRepair() : void
      {
         this.main.getGuiManager().getMain().getConnectionManager().sendCommand(ServerCommands.PET,[ServerCommands.REPAIR_PET]);
      }
      
      private function requestGearActivation(param1:int, param2:String) : void
      {
         this.main.getGuiManager().getMain().getConnectionManager().sendCommand(ServerCommands.PET,[ServerCommands.PET_GEAR_INFO,ServerCommands.ACTIVATE_HERO_PET,param1,param2]);
      }
      
      private function assembleFuelMissingMode(param1:Array) : void
      {
         this.setFuelMissingMode();
      }
      
      private function requestFuel() : void
      {
         if(ExternalInterface.available)
         {
            ExternalInterface.call("showPetFuel");
         }
      }
      
      private function handleClickFuelButton(param1:MouseEvent) : void
      {
         this.requestFuel();
      }
      
      private function handleClickRepairButton(param1:MouseEvent) : void
      {
         this.requestRepair();
      }
      
      private function assemblePetInitilization(param1:Array) : void
      {
         var _loc2_:int = 2;
         var _loc3_:Boolean = Boolean(int(param1[++_loc2_]));
         var _loc4_:Boolean = Boolean(int(param1[++_loc2_]));
         var _loc5_:Boolean = Boolean(int(param1[++_loc2_]));
         this.main.getGuiManager().createPetWindow();
         this.initPetWindow(_loc3_,_loc4_,!_loc5_);
      }
      
      private function initPetWindow(param1:Boolean, param2:Boolean, param3:Boolean) : void
      {
         var _loc4_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc5_:SimpleContainer = this.getPetWindowContainer();
         if(!_loc5_.getElement(SimpleElement.PET_WINDOW_PLAY_BTN).getChildAt(0).hasEventListener(MouseEvent.CLICK))
         {
            _loc5_.getElement(SimpleElement.PET_WINDOW_REPAIR_BTN).getChildAt(0).addEventListener(MouseEvent.CLICK,this.handleClickRepairButton);
            _loc5_.getElement(SimpleElement.PET_WINDOW_PLAY_BTN).getChildAt(0).addEventListener(MouseEvent.CLICK,this.handleClickPlayButton);
            _loc5_.getElement(SimpleElement.PET_WINDOW_STOP_BTN).getChildAt(0).addEventListener(MouseEvent.CLICK,this.handleClickStopButton);
            _loc5_.getElement(SimpleElement.PET_WINDOW_FUEL_BTN).getChildAt(0).addEventListener(MouseEvent.CLICK,this.handleClickFuelButton);
            _loc4_.addEventListener(SimpleWindow.ON_MINIMIZE,this.handleMinimizeWindow);
         }
         if(!param2)
         {
            this.setFuelMissingMode();
         }
         if(param3)
         {
            this.toggleRepairButtonVisbility(true);
         }
         if(!param1)
         {
            this.initPetBanner();
         }
         this.updatePetImage(-1);
      }
      
      private function assembleLockWindow(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:Boolean = Boolean(int(param1[_loc2_]));
         if(_loc3_)
         {
            this.blockPetWindow();
         }
         else
         {
            this.unblockPetWindow();
         }
      }
      
      private function blockPetWindow() : void
      {
         var _loc1_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         _loc1_.addLockOverlay(10,25,_loc1_.getWindowDimension().x,115);
      }
      
      private function unblockPetWindow() : void
      {
         var _loc1_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         if(_loc1_ != null)
         {
            _loc1_.removeLockOverlay();
         }
      }
      
      private function handleMinimizeWindow(param1:Event = null) : void
      {
         var _loc2_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc3_:GearComboBox = _loc2_.getContainer(SimpleContainer.CLASS_PET_WINDOW_CONTENT).getElement(SimpleElement.PET_WINDOW_GEAR_COMBO_CONTAINER).getChildAt(0) as GearComboBox;
         var _loc4_:GearScroller = this.getGearMenuContainer(_loc2_).mainMenu;
         _loc4_.visible = false;
         _loc3_.arrowButton.gotoAndStop(1);
         this.closeAllSubMenus();
      }
      
      private function assembleResetStatus(param1:Array) : void
      {
         this.resetPetWindowValues();
         var _loc2_:Array = this.main.screenManager.map.getShipManager().getHero().pet.gears;
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_.length)
         {
            this.removeGear(_loc2_[_loc3_]);
            _loc3_++;
         }
         var _loc4_:Ship = this.main.screenManager.map.getShipManager().getHero();
         this.effectsManager.removeAllEffects(_loc4_);
      }
      
      private function assembleStopLaserAttack(param1:Array) : void
      {
         var _loc2_:int = 2;
         var _loc3_:int = int(param1[++_loc2_]);
         var _loc4_:Map = this.main.screenManager.map;
         _loc4_.getCombatManager().removeLaserAttack(_loc3_);
      }
      
      private function assembleInvisibleMode(param1:Array) : void
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:Boolean = false;
         var _loc6_:Pet = null;
         if(this.main.screenManager.map != null)
         {
            _loc2_ = 2;
            _loc3_ = int(param1[++_loc2_]);
            _loc4_ = int(param1[++_loc2_]);
            _loc5_ = Boolean(_loc4_);
            _loc6_ = this.main.screenManager.map.getShipManager().getPet(_loc3_);
            if(_loc6_ != null)
            {
               _loc6_.setIdle(_loc5_);
               _loc6_.getClipContainer().visible = !_loc5_;
            }
         }
      }
      
      private function assembleActivateTradeWindow(param1:Array) : void
      {
         var _loc2_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_TRADE);
         _loc2_.addEventListener(SimpleWindow.ON_MINIMIZED,this.handleTradeWindowMinimized);
         _loc2_.unlockWindow();
         _loc2_.maximize();
         this.main.getGuiManager().updateTradeWindow();
      }
      
      private function handleTradeWindowMinimized(param1:Event) : void
      {
         var _loc2_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_TRADE);
         _loc2_.removeEventListener(SimpleWindow.ON_MINIMIZED,this.handleTradeWindowMinimized);
         if(!Hero.inTradeArea)
         {
            _loc2_.lockWindow();
         }
      }
      
      private function assembleLevelUp(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:int = int(param1[++_loc2_]);
         var _loc4_:int = int(param1[++_loc2_]);
         var _loc5_:Pet = this.main.screenManager.map.getShipManager().getHero().pet;
         var _loc6_:LevelUpEffect = new LevelUpEffect(EffectIDList.LEVEL_UP_EFFECT,new EffectPattern(EffectIDList.LEVEL_UP_EFFECT,"levelUp"));
         this.effectsManager.addEffect(_loc6_,_loc5_,EffectsManager.TIMEOUT_EFFECT);
         this.main.getGuiManager().writeToLog(BPLocale.getText("msg_pet_level_up").replace("%LEVEL%",_loc3_));
         this.playSound(70);
      }
      
      private function assembleEvasionProtocolInfo(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:int = int(param1[_loc2_]);
         var _loc4_:Boolean = Boolean(int(param1[++_loc2_]));
         if(this.main.screenManager.map.getShipManager().getPet(_loc3_) != null)
         {
            this.main.screenManager.map.getShipManager().getPet(_loc3_).evasionProtocolEquiped = _loc4_;
         }
      }
      
      private function assembleLocatorGearInfo(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:Ship = this.main.screenManager.map.getShipManager().getHero();
         var _loc4_:int = int(param1[++_loc2_]);
         var _loc5_:int = int(param1[++_loc2_]);
         var _loc6_:EffectBase = this.effectsManager.getEffectFromEntity(_loc3_,1);
         _loc6_.update(this.main,[_loc4_,_loc5_]);
      }
      
      private function assemblePetDestroyed(param1:Array) : void
      {
         this.resetPetWindowValues();
         var _loc2_:Ship = this.main.screenManager.map.getShipManager().getHero();
         this.effectsManager.removeAllEffects(_loc2_);
         this.toggleRepairButtonVisbility(true);
         this.removeGearComboListeners();
         this.playSound(69);
         this.main.getGuiManager().writeToLog(BPLocale.getText("msg_pet_is_dead"));
      }
      
      private function assemblePetRepair(param1:Array) : void
      {
         this.playSound(71);
         this.toggleRepairButtonVisbility(false);
      }
      
      private function addCooldown(param1:int, param2:int) : void
      {
         var _loc3_:BuffItem = this.getBuff(param1);
         var _loc4_:BuffCoolDown = new BuffCoolDown(_loc3_,param2,_loc3_.tooltip,_loc3_.pattern.languageKey);
         _loc4_.addCoolDown();
      }
      
      private function addPetSpawnAnimation(param1:Pet) : void
      {
         var _loc3_:PetEffect = null;
         var _loc2_:EffectPattern = PatternManager.effectPatterns[EffectIDList.PET_SPAWN];
         if(_loc2_ != null)
         {
            _loc3_ = new PetEffect(EffectIDList.PET_SPAWN,_loc2_,false,[],false);
            this.effectsManager.addEffectControllerToObject(param1);
            this.effectsManager.addEffect(_loc3_,param1);
         }
      }
      
      private function assemblePetStatus(param1:Array) : void
      {
         var _loc2_:int = 2;
         var _loc3_:int = int(param1[++_loc2_]);
         var _loc4_:int = int(param1[++_loc2_]);
         var _loc5_:int = int(param1[++_loc2_]);
         var _loc6_:int = int(param1[++_loc2_]);
         var _loc7_:int = int(param1[++_loc2_]);
         var _loc8_:int = int(param1[++_loc2_]);
         var _loc9_:int = int(param1[++_loc2_]);
         var _loc10_:int = int(param1[++_loc2_]);
         var _loc11_:int = int(param1[++_loc2_]);
         var _loc12_:int = int(param1[++_loc2_]);
         var _loc13_:int = int(param1[++_loc2_]);
         var _loc14_:String = String(param1[++_loc2_]);
         this.setPetNameTextfieldValue(_loc14_);
         this.updateBar(SimpleElement.PET_WINDOW_HP_BAR,_loc7_,_loc8_);
         this.updateBar(SimpleElement.PET_WINDOW_SHIELD_BAR,_loc9_,_loc10_);
         this.updateBar(SimpleElement.PET_WINDOW_FUEL_BAR,_loc11_,_loc12_);
         this.updateBar(SimpleElement.PET_WINDOW_XP_BAR,_loc5_,_loc6_);
         this.updatePetImage(_loc4_);
      }
      
      public function assemblePetDeactivation(param1:Array = null) : void
      {
         var _loc3_:MapObject = null;
         var _loc2_:Map = this.main.screenManager.map;
         if(this.getPetWindowContainer() != null)
         {
            _loc3_ = _loc2_.getShipManager().getHero();
            if(_loc3_ != null)
            {
               this.effectsManager.removeAllEffects(_loc3_);
            }
            this.removeGearComboListeners();
            this.resetPetWindowValues();
            this.handleMinimizeWindow();
            this.togglePlayStopButtonVisibility(true);
            if(param1 != null)
            {
               this.playSound(68);
            }
         }
      }
      
      private function assembleHeroPetActivation(param1:Array) : void
      {
         var _loc2_:Pet = this.createPet(param1,"neutral");
         var _loc3_:ShipManager = this.main.screenManager.map.getShipManager();
         _loc3_.getHero().pet = _loc2_;
         var _loc4_:int = int(param1[12]);
         var _loc5_:int = int(param1[13]);
         var _loc6_:SimpleContainer = this.getPetWindowContainer();
         var _loc7_:GearComboBox = _loc6_.getElement(SimpleElement.PET_WINDOW_GEAR_COMBO_CONTAINER).getChildAt(0) as GearComboBox;
         if(!_loc7_.hasEventListener(MouseEvent.CLICK))
         {
            _loc7_.addEventListener(MouseEvent.CLICK,this.handleClickGearCombo);
         }
         _loc2_.setHitpoints(_loc4_);
         _loc2_.setMaxHitpoints(_loc5_);
         _loc2_.updateHitpointShieldBar();
         this.togglePlayStopButtonVisibility(false);
         _loc2_.setSelected(true);
         _loc2_.setSelected(false);
         _loc2_.setMinimapIcon("mapIcon_pet");
         this.playSound(67);
         this.addPetSpawnAnimation(_loc2_);
      }
      
      private function assembleExternalPetActivation(param1:Array) : void
      {
         var _loc3_:Boolean = false;
         var _loc4_:Pet = null;
         var _loc2_:int = int(param1[4]);
         if(this.main.screenManager.map.getShipManager().getPet(_loc2_) == null)
         {
            _loc3_ = Boolean(int(param1[15]));
            _loc4_ = this.createPet(param1);
            _loc4_.updateLabel();
            _loc4_.setIdle(_loc3_);
            _loc4_.getClipContainer().visible = !_loc3_;
            if(!_loc3_)
            {
               this.addPetSpawnAnimation(_loc4_);
            }
         }
      }
      
      private function createPet(param1:Array, param2:String = "") : Pet
      {
         var _loc3_:int = 2;
         var _loc4_:int = int(param1[++_loc3_]);
         var _loc5_:int = int(param1[++_loc3_]);
         var _loc6_:int = int(param1[++_loc3_]);
         var _loc7_:String = String(param1[++_loc3_]);
         var _loc8_:int = int(param1[++_loc3_]);
         var _loc9_:int = int(param1[++_loc3_]);
         var _loc10_:int = int(param1[++_loc3_]);
         var _loc11_:String = String(param1[++_loc3_]);
         var _loc12_:int = int(param1[++_loc3_]);
         var _loc13_:int = int(param1[++_loc3_]);
         var _loc14_:int = int(param1[++_loc3_]);
         var _loc15_:int = int(param1[++_loc3_]);
         var _loc16_:int = int(param1[++_loc3_]);
         var _loc17_:ShipManager = this.main.screenManager.map.getShipManager();
         return _loc17_.createPet(_loc6_,_loc5_,_loc4_,_loc13_,_loc14_,_loc15_,_loc7_,_loc10_,_loc8_,_loc9_,_loc11_,_loc12_,param2);
      }
      
      private function getPetWindowContainer() : SimpleContainer
      {
         var _loc2_:SimpleContainer = null;
         var _loc1_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         if(_loc1_ != null)
         {
            _loc2_ = _loc1_.getContainer(SimpleContainer.CLASS_PET_WINDOW_CONTENT);
         }
         return _loc2_;
      }
      
      private function getGearMenuContainer(param1:SimpleWindow) : GearMenuContainer
      {
         var _loc2_:GearMenuContainer = null;
         if(param1.getChildAt(param1.numChildren - 2) is GearMenuContainer)
         {
            _loc2_ = param1.getChildAt(param1.numChildren - 2) as GearMenuContainer;
         }
         else
         {
            _loc2_ = param1.getChildAt(param1.numChildren - 1) as GearMenuContainer;
         }
         return _loc2_;
      }
      
      private function initPetBanner() : void
      {
         var _loc1_:BannerAdPattern = PatternManager.bannerAdPatterns["buyPet"];
         if(_loc1_.price == -1)
         {
            BannerAdLazyLoader.loadBannerAdPatternAddon();
         }
         var _loc2_:BannerAdLazyLoader = new BannerAdLazyLoader(_loc1_);
         _loc2_.addEventListener(BannerAdLazyLoader.BANNERAD_LOADED,this.handleBannerAdLoaded);
         _loc2_.loadBannerAd();
      }
      
      private function handleBannerAdLoaded(param1:Event) : void
      {
         var _loc2_:BannerAdLazyLoader = param1.target as BannerAdLazyLoader;
         _loc2_.removeEventListener(BannerAdLazyLoader.BANNERAD_LOADED,this.handleBannerAdLoaded);
         var _loc3_:BannerAdPattern = PatternManager.bannerAdPatterns["buyPet"];
         var _loc4_:BannerAd = new BannerAd(_loc3_);
         var _loc5_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc6_:SimpleContainer = _loc5_.getContainer(SimpleContainer.CLASS_PET_WINDOW_BANNER);
         _loc5_.getContainer(SimpleContainer.CLASS_PET_WINDOW_CONTENT).getElement(SimpleElement.PET_WINDOW_EXPAND_BTN).visible = false;
         var _loc7_:SimpleElement = new SimpleElement(SimpleElement.PET_WINDOW_BANNER_CONTAINER);
         _loc4_.bannerAdClip.y = 20;
         _loc4_.bannerAdClip.x = 5;
         _loc4_.allTextsWrapper.x = 10;
         _loc4_.allTextsWrapper.y = 20;
         _loc4_.bannerAdClip.scaleX = 0.93;
         _loc4_.setButtonText("label_buy_achievement_reward_no_price");
         _loc4_.overrideMouseClick(this.handleBannerAdClicked);
         _loc7_.addChild(_loc4_.bannerAdClip);
         _loc6_.addElement(_loc7_,SimpleContainer.NO_ALIGN);
      }
      
      private function assembleRemoveBanner(param1:Array) : void
      {
         var _loc2_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         _loc2_.getContainer(SimpleContainer.CLASS_PET_WINDOW_CONTENT).getElement(SimpleElement.PET_WINDOW_EXPAND_BTN).visible = true;
         var _loc3_:SimpleElement = _loc2_.getContainer(SimpleContainer.CLASS_PET_WINDOW_BANNER).getElement(SimpleElement.PET_WINDOW_BANNER_CONTAINER);
         this.toggleRepairButtonVisbility(false);
         if(_loc3_.numChildren > 0)
         {
            _loc3_.removeChildAt(0);
         }
      }
      
      private function handleClickGearCombo(param1:MouseEvent) : void
      {
         this.toggleComboboxState();
      }
      
      private function handleBannerAdClicked() : void
      {
         if(ExternalInterface.available)
         {
            ExternalInterface.call("showPetFuel");
         }
      }
      
      private function resetPetWindowValues() : void
      {
         var _loc1_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc2_:GearComboBox = _loc1_.getContainer(SimpleContainer.CLASS_PET_WINDOW_CONTENT).getElement(SimpleElement.PET_WINDOW_GEAR_COMBO_CONTAINER).getChildAt(0) as GearComboBox;
         var _loc3_:GearMenuContainer = this.getGearMenuContainer(_loc1_);
         this.updateBar(SimpleElement.PET_WINDOW_SHIELD_BAR,0,0);
         this.updateBar(SimpleElement.PET_WINDOW_HP_BAR,0,0);
         this.updateBar(SimpleElement.PET_WINDOW_XP_BAR,0,0);
         this.updateBar(SimpleElement.PET_WINDOW_FUEL_BAR,0,0);
         this.setPetNameTextfieldValue("");
         this.updatePetImage(-1);
         _loc3_.mainMenu.removeAllElements();
         _loc3_.removeAllSubmenus();
         _loc2_.setIcon(null);
         _loc2_.setSelectedText("");
         this.removeAllBuffs();
      }
      
      private function updatePetImage(param1:int) : void
      {
         var _loc4_:Bitmap = null;
         var _loc5_:int = 0;
         var _loc6_:BitmapFont = null;
         var _loc2_:SimpleContainer = this.getPetWindowContainer();
         var _loc3_:Sprite = _loc2_.getElement(SimpleElement.PET_WINDOW_IMAGE_CONTAINER).getChildAt(0) as Sprite;
         if(_loc3_.numChildren > 0)
         {
            _loc5_ = 0;
            while(_loc5_ < _loc3_.numChildren)
            {
               _loc3_.removeChildAt(_loc5_);
               _loc5_++;
            }
         }
         if(param1 > -1)
         {
            this.updatePetLevelTooltip(_loc3_,param1);
            _loc4_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui")).getEmbededBitmap("pet_level_" + param1 + ".jpg");
            _loc3_.addChild(_loc4_);
            _loc6_ = new BitmapFont(null);
            _loc6_.setText(param1.toString());
            _loc6_.x = _loc4_.width - _loc6_.width - 5;
            _loc6_.y = _loc4_.height - 10;
            _loc6_.scaleX = _loc6_.scaleY = 1.5;
            _loc3_.alpha = 1;
            _loc3_.addChild(_loc6_);
         }
         else
         {
            _loc4_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui")).getEmbededBitmap("pet_level_0.jpg");
            _loc3_.addChild(_loc4_);
            _loc3_.alpha = 0.4;
         }
      }
      
      private function updatePetLevelTooltip(param1:InteractiveObject, param2:int) : void
      {
         TooltipControl.getInstance().removeToolTip(param1);
         TooltipControl.getInstance().addToolTip(param1,BPLocale.getText("title_pet") + " " + BPLocale.getText("ttip_level").replace("%COUNT%",param2));
      }
      
      private function setPetNameTextfieldValue(param1:String) : void
      {
         var _loc2_:SimpleContainer = this.getPetWindowContainer();
         var _loc3_:TextField = _loc2_.getElement(SimpleElement.PET_WINDOW_PETNAME_TEXT).getChildAt(0) as TextField;
         _loc3_.text = param1;
      }
      
      private function updateBar(param1:int, param2:int, param3:int) : void
      {
         var _loc4_:SimpleContainer = this.getPetWindowContainer();
         var _loc5_:BarComponent = _loc4_.getElement(param1).getChildAt(0) as BarComponent;
         _loc5_.update(param2,param3);
      }
      
      private function toggleRepairButtonVisbility(param1:Boolean) : void
      {
         var _loc2_:SimpleContainer = this.getPetWindowContainer();
         MovieClip(_loc2_.getElement(SimpleElement.PET_WINDOW_REPAIR_BTN).getChildAt(0)).gotoAndStop(1);
         _loc2_.getElement(SimpleElement.PET_WINDOW_REPAIR_BTN).getChildAt(0).visible = param1;
         _loc2_.getElement(SimpleElement.PET_WINDOW_STOP_BTN).getChildAt(0).visible = !param1;
         _loc2_.getElement(SimpleElement.PET_WINDOW_PLAY_BTN).getChildAt(0).visible = !param1;
      }
      
      public function setFuelMissingMode() : void
      {
         var _loc1_:SimpleContainer = this.getPetWindowContainer();
         _loc1_.getElement(SimpleElement.PET_WINDOW_STOP_BTN).getChildAt(0).visible = false;
         _loc1_.getElement(SimpleElement.PET_WINDOW_PLAY_BTN).getChildAt(0).visible = false;
         _loc1_.getElement(SimpleElement.PET_WINDOW_REPAIR_BTN).getChildAt(0).visible = false;
         MovieClip(_loc1_.getElement(SimpleElement.PET_WINDOW_FUEL_BTN).getChildAt(0)).gotoAndStop(1);
      }
      
      public function setFuelAvailableMode() : void
      {
         var _loc1_:SimpleContainer = this.getPetWindowContainer();
         _loc1_.getElement(SimpleElement.PET_WINDOW_STOP_BTN).getChildAt(0).visible = true;
         _loc1_.getElement(SimpleElement.PET_WINDOW_PLAY_BTN).getChildAt(0).visible = true;
         _loc1_.getElement(SimpleElement.PET_WINDOW_REPAIR_BTN).getChildAt(0).visible = false;
         MovieClip(_loc1_.getElement(SimpleElement.PET_WINDOW_FUEL_BTN).getChildAt(0)).gotoAndStop(1);
      }
      
      private function togglePlayStopButtonVisibility(param1:Boolean) : void
      {
         var _loc2_:SimpleContainer = this.getPetWindowContainer();
         MovieClip(_loc2_.getElement(SimpleElement.PET_WINDOW_PLAY_BTN).getChildAt(0)).gotoAndStop(1);
         MovieClip(_loc2_.getElement(SimpleElement.PET_WINDOW_STOP_BTN).getChildAt(0)).gotoAndStop(1);
         MovieClip(_loc2_.getElement(SimpleElement.PET_WINDOW_PLAY_BTN).getChildAt(0)).visible = param1;
         MovieClip(_loc2_.getElement(SimpleElement.PET_WINDOW_STOP_BTN).getChildAt(0)).visible = !param1;
         MovieClip(_loc2_.getElement(SimpleElement.PET_WINDOW_REPAIR_BTN).getChildAt(0)).visible = false;
      }
      
      private function assemblePetHPInfo(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:int = int(param1[++_loc2_]);
         var _loc4_:int = int(param1[++_loc2_]);
         var _loc5_:int = int(param1[++_loc2_]);
         var _loc6_:Pet = this.main.screenManager.map.getShipManager().getHero().pet;
         if(_loc6_ != null)
         {
            _loc6_.setHitpoints(_loc3_);
            _loc6_.setMaxHitpoints(_loc4_);
            this.updateBar(SimpleElement.PET_WINDOW_HP_BAR,_loc3_,_loc4_);
            _loc6_.updateHitpointShieldBar();
            if(_loc6_ != null && Boolean(_loc5_))
            {
               _loc6_.showRepairRobot(1);
            }
            else
            {
               _loc6_.hideRepairRobot();
            }
            this.playSound(71);
         }
      }
      
      private function assemblePetXPInfo(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:int = int(param1[++_loc2_]);
         var _loc4_:int = int(param1[++_loc2_]);
         this.updateBar(SimpleElement.PET_WINDOW_XP_BAR,_loc3_,_loc4_);
      }
      
      private function assemblePetShieldInfo(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:int = int(param1[++_loc2_]);
         var _loc4_:int = int(param1[++_loc2_]);
         var _loc5_:Pet = this.main.screenManager.map.getShipManager().getHero().pet;
         if(_loc5_ != null)
         {
            _loc5_.setShieldChunk(_loc3_,_loc4_,false);
         }
         this.updateBar(SimpleElement.PET_WINDOW_SHIELD_BAR,_loc3_,_loc4_);
      }
      
      private function assemblePetFuelInfo(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:int = int(param1[++_loc2_]);
         var _loc4_:int = int(param1[++_loc2_]);
         this.updateBar(SimpleElement.PET_WINDOW_FUEL_BAR,_loc3_,_loc4_);
      }
      
      private function handleClickPlayButton(param1:MouseEvent) : void
      {
         this.togglePlayStopButtonVisibility(false);
         var _loc2_:SimpleContainer = this.getPetWindowContainer();
         if(!Sprite(_loc2_.getElement(SimpleElement.PET_WINDOW_GEAR_COMBO_CONTAINER).getChildAt(0)).hasEventListener(MouseEvent.CLICK))
         {
            _loc2_.getElement(SimpleElement.PET_WINDOW_GEAR_COMBO_CONTAINER).getChildAt(0).addEventListener(MouseEvent.CLICK,this.handleClickGearCombo);
         }
         this.launchPet();
      }
      
      private function handleClickStopButton(param1:MouseEvent = null) : void
      {
         if(param1 != null)
         {
            this.stopPet();
         }
      }
      
      private function removeGearComboListeners() : void
      {
         var _loc2_:GearComboBox = null;
         var _loc1_:SimpleContainer = this.getPetWindowContainer();
         if(_loc1_ != null)
         {
            _loc2_ = _loc1_.getElement(SimpleElement.PET_WINDOW_GEAR_COMBO_CONTAINER).getChildAt(0) as GearComboBox;
            if(_loc2_.hasEventListener(MouseEvent.CLICK))
            {
               _loc2_.removeEventListener(MouseEvent.CLICK,this.handleClickGearCombo);
            }
         }
      }
      
      private function addEffect(param1:int, param2:Array) : void
      {
         var _loc3_:EffectBase = EffectFactory.getInstance().createEffect(param1,param2);
         var _loc4_:Ship = this.main.screenManager.map.getShipManager().getHero();
         this.effectsManager.removeAllEffects(_loc4_);
         if(_loc3_ != null)
         {
            this.effectsManager.addEffectControllerToObject(_loc4_);
            this.effectsManager.addEffect(_loc3_,_loc4_);
         }
      }
      
      private function removeEffect(param1:int) : void
      {
      }
      
      private function assembleRemoveBuff(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:int = int(param1[++_loc2_]);
         this.removeBuff(_loc3_);
      }
      
      private function assembleGearTargetsList(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:int = int(param1[++_loc2_]);
         var _loc4_:Array = param1.slice(5);
         this.addTargetsForGear(_loc3_,_loc4_);
      }
      
      private function assembleRemoveGear(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:int = int(param1[++_loc2_]);
         this.removeGear(_loc3_);
      }
      
      private function assembleAddGear(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:int = int(param1[++_loc2_]);
         var _loc4_:int = int(param1[++_loc2_]);
         var _loc5_:int = int(param1[++_loc2_]);
         this.addGear(_loc3_,_loc4_,_loc5_);
      }
      
      private function addGear(param1:int, param2:int, param3:int) : void
      {
         var _loc4_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc5_:Pet = this.main.screenManager.map.getShipManager().getHero().pet;
         _loc5_.gears.push(param1);
         var _loc6_:Gear = GearFactory.getGear(param1,param2,param3);
         var _loc7_:Bitmap = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui")).getEmbededBitmap(_loc6_.pattern.resKey);
         var _loc8_:GearScroller = this.getGearMenuContainer(_loc4_).mainMenu;
         var _loc9_:GearItem = new GearItem(param1,_loc6_.pattern.gearName,_loc7_,_loc8_.width - 1);
         _loc9_.addEventListener(GearItem.MOUSE_OVER,this.closeAllSubMenus);
         _loc9_.addEventListener(GearItem.CLICKED,this.handleMenuClick);
         _loc8_.addElement(_loc9_);
      }
      
      private function removeGear(param1:int) : void
      {
         var _loc2_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc3_:Pet = this.main.screenManager.map.getShipManager().getHero().pet;
         delete _loc3_.gears[param1];
         var _loc4_:GearMenuContainer = this.getGearMenuContainer(_loc2_);
         var _loc5_:GearItem = _loc4_.mainMenu.getElementByID(param1);
         if(_loc5_ != null)
         {
            _loc4_.mainMenu.removeElement(_loc5_);
            if(_loc4_.getSubMenu(param1) != null)
            {
               _loc4_.removeSubMenu(param1);
            }
         }
      }
      
      private function assembleSelectGear(param1:Array) : void
      {
         var _loc2_:int = 4;
         var _loc3_:int = int(param1[_loc2_]);
         var _loc4_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc5_:GearMenuContainer = this.getGearMenuContainer(_loc4_);
         var _loc6_:GearItem = _loc5_.mainMenu.getElementByID(_loc3_);
         this.setSelectedItem(_loc6_.icon,_loc6_.title,_loc3_);
      }
      
      private function getGearItem(param1:int) : GearItem
      {
         var _loc2_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc3_:GearScroller = this.getGearMenuContainer(_loc2_).mainMenu;
         return _loc3_.getElementByID(param1);
      }
      
      private function addTargetsForGear(param1:int, param2:Array) : void
      {
         var _loc3_:Bitmap = null;
         var _loc5_:GearItem = null;
         var _loc11_:String = null;
         var _loc4_:String = "";
         var _loc6_:InGameCatalog = InGameCatalog.getInstance();
         var _loc7_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc8_:GearMenuContainer = this.getGearMenuContainer(_loc7_);
         var _loc9_:GearScroller = _loc8_.getSubMenu(param1);
         if(_loc9_ == null)
         {
            _loc9_ = new GearScroller(param1);
            _loc9_.x = _loc8_.mainMenu.width + 10;
            _loc9_.y = this.getGearItem(param1).y;
            _loc8_.addSubMenu(_loc9_);
            this.getGearItem(param1).drawArrow();
            this.addSubmenuListener(param1);
         }
         else
         {
            _loc9_.removeAllElements();
         }
         var _loc10_:GearPattern = PatternManager.petGearPatterns[param1];
         var _loc12_:int = 0;
         while(_loc12_ < param2.length)
         {
            _loc4_ = _loc6_[_loc10_.targetListKey + "_names"][param2[_loc12_]];
            _loc11_ = _loc6_[_loc10_.targetListKey + "_icons"][int(param2[_loc12_])] + _loc10_.suffix;
            _loc3_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("icons")).getEmbededBitmap(_loc11_) as Bitmap;
            if(_loc3_ == null)
            {
               _loc3_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("icons")).getEmbededBitmap("npc_unknown_placeholder_icon.png");
            }
            _loc5_ = new GearItem(param2[_loc12_],_loc4_,_loc3_,_loc8_.mainMenu.width - 1);
            _loc5_.addEventListener(GearItem.CLICKED,this.handleSubmenuClick);
            _loc9_.addElement(_loc5_);
            _loc12_++;
         }
      }
      
      private function closeAllSubMenus(param1:Event = null) : void
      {
         var _loc4_:GearScroller = null;
         var _loc2_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc3_:GearMenuContainer = this.getGearMenuContainer(_loc2_);
         for each(_loc4_ in _loc3_.submenus)
         {
            if(_loc4_ != null)
            {
               _loc4_.hide();
            }
         }
      }
      
      private function addSubmenuListener(param1:int) : void
      {
         var _loc2_:GearItem = this.getGearItem(param1);
         if(_loc2_ != null)
         {
            _loc2_.addEventListener(GearItem.MOUSE_OVER,this.showSubmenu);
         }
      }
      
      private function showSubmenu(param1:Event) : void
      {
         var _loc2_:GearScroller = this.getSubMenu(GearItem(param1.target).gearID);
         if(_loc2_ != null)
         {
            _loc2_.show();
         }
      }
      
      private function getSubMenu(param1:int) : GearScroller
      {
         var _loc2_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc3_:GearMenuContainer = this.getGearMenuContainer(_loc2_);
         return _loc3_.getSubMenu(param1);
      }
      
      private function handleMenuClick(param1:Event) : void
      {
         var _loc2_:GearItem = GearItem(param1.target);
         var _loc3_:String = "";
         var _loc4_:GearScroller = this.getSubMenu(_loc2_.gearID);
         if(_loc4_ != null)
         {
            if(_loc4_.getElement(0) != null)
            {
               _loc3_ = _loc4_.getElement(0).gearID.toString();
            }
         }
         this.setSelectedItem(_loc2_.icon,_loc2_.title,_loc2_.gearID,_loc3_);
         this.toggleComboboxState();
      }
      
      private function handleSubmenuClick(param1:Event) : void
      {
         var _loc2_:GearItem = GearItem(param1.target);
         var _loc3_:int = GearItem(param1.target).submenuID;
         var _loc4_:GearItem = this.getGearItem(_loc3_);
         this.setSelectedItem(_loc2_.icon,_loc4_.title,_loc3_,_loc2_.gearID.toString());
         this.toggleComboboxState();
      }
      
      private function setSelectedItem(param1:Bitmap, param2:String, param3:int, param4:String = "") : void
      {
         var _loc5_:SimpleContainer = this.getPetWindowContainer();
         var _loc6_:GearComboBox = _loc5_.getElement(SimpleElement.PET_WINDOW_GEAR_COMBO_CONTAINER).getChildAt(0) as GearComboBox;
         var _loc7_:GearPattern = PatternManager.petGearPatterns[param3];
         this.closeAllSubMenus();
         _loc6_.setIcon(new Bitmap(param1.bitmapData));
         _loc6_.setSelectedText(param2);
         this.addEffect(_loc7_.effect,[param4,new Bitmap(param1.bitmapData)]);
         this.requestGearActivation(param3,param4);
         this.playSound(72);
      }
      
      private function toggleComboboxState() : void
      {
         var _loc1_:SimpleContainer = this.getPetWindowContainer();
         var _loc2_:GearComboBox = Sprite(_loc1_.getElement(SimpleElement.PET_WINDOW_GEAR_COMBO_CONTAINER)).getChildAt(0) as GearComboBox;
         var _loc3_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_PET);
         var _loc4_:GearScroller = this.getGearMenuContainer(_loc3_).mainMenu;
         this.closeAllSubMenus();
         _loc4_.toggleVisibility();
         this.toggleMovieClipState(_loc2_.arrowButton);
      }
      
      private function toggleMovieClipState(param1:MovieClip) : void
      {
         var _loc2_:int = 1;
         if(param1.currentFrame == _loc2_)
         {
            _loc2_ = 2;
         }
         param1.gotoAndStop(_loc2_);
      }
      
      private function assembleAddBuff(param1:Array) : void
      {
         var _loc5_:int = 0;
         var _loc2_:int = 4;
         var _loc3_:int = int(param1[_loc2_]);
         var _loc4_:BuffItem = this.addBuff(_loc3_);
         switch(_loc3_)
         {
            case BuffPattern.SINGULARITY_BUFF:
            case BuffPattern.WEAKENSHIELD_BUFF:
            case BuffPattern.SPEEDLEACH_BUFF:
               break;
            case BuffPattern.TRADE_BUFF:
               _loc5_ = int(param1[5]);
               this.addCooldown(BuffPattern.TRADE_BUFF,_loc5_);
         }
      }
      
      private function addBuff(param1:int) : BuffItem
      {
         var _loc2_:BuffPattern = PatternManager.petBuffPatterns[param1];
         var _loc3_:BuffItem = new BuffItem(_loc2_);
         var _loc4_:ToolTipHook = TooltipControl.getInstance().addToolTip(_loc3_,BPLocale.getText(_loc2_.languageKey));
         _loc3_.tooltip = _loc4_;
         var _loc5_:SimpleContainer = this.getPetWindowContainer();
         var _loc6_:Sprite = Sprite(_loc5_.getElement(SimpleElement.PET_WINDOW_BUFF_CONTAINER).getChildAt(0));
         _loc6_.addChild(_loc3_);
         this.positionBuffs();
         return _loc3_;
      }
      
      private function getBuff(param1:int) : BuffItem
      {
         var _loc5_:BuffItem = null;
         var _loc2_:SimpleContainer = this.getPetWindowContainer();
         var _loc3_:Sprite = _loc2_.getElement(SimpleElement.PET_WINDOW_BUFF_CONTAINER).getChildAt(0) as Sprite;
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_.numChildren)
         {
            _loc5_ = _loc3_.getChildAt(_loc4_) as BuffItem;
            if(_loc5_ != null && _loc5_.id == param1)
            {
               return _loc5_;
            }
            _loc4_++;
         }
         return null;
      }
      
      private function removeBuff(param1:int) : void
      {
         this.removeBuffById(param1);
         this.positionBuffs();
      }
      
      private function removeAllBuffs() : void
      {
         var _loc1_:SimpleContainer = this.getPetWindowContainer();
         var _loc2_:Sprite = _loc1_.getElement(SimpleElement.PET_WINDOW_BUFF_CONTAINER).getChildAt(0) as Sprite;
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_.numChildren)
         {
            _loc2_.removeChild(_loc2_.getChildAt(_loc3_));
            _loc3_++;
         }
      }
      
      private function removeBuffById(param1:int) : void
      {
         var _loc4_:BuffItem = null;
         var _loc2_:SimpleContainer = this.getPetWindowContainer();
         var _loc3_:Sprite = _loc2_.getElement(SimpleElement.PET_WINDOW_BUFF_CONTAINER).getChildAt(0) as Sprite;
         var _loc5_:int = 0;
         while(_loc5_ < _loc3_.numChildren)
         {
            _loc4_ = _loc3_.getChildAt(_loc5_) as BuffItem;
            if(_loc4_ != null && _loc4_.id == param1)
            {
               TooltipControl.getInstance().removeToolTip(_loc4_ as InteractiveObject);
               _loc3_.removeChild(_loc4_);
               return;
            }
            _loc5_++;
         }
      }
      
      private function positionBuffs() : void
      {
         var _loc3_:BuffItem = null;
         var _loc1_:SimpleContainer = this.getPetWindowContainer();
         var _loc2_:Sprite = _loc1_.getElement(SimpleElement.PET_WINDOW_BUFF_CONTAINER).getChildAt(0) as Sprite;
         var _loc4_:int = 15;
         var _loc5_:int = 0;
         while(_loc5_ < _loc2_.numChildren)
         {
            _loc3_ = _loc2_.getChildAt(_loc5_) as BuffItem;
            _loc3_.setPosition(_loc5_ * _loc3_.getChildAt(0).width + _loc4_,_loc4_);
            _loc5_++;
         }
      }
      
      private function playSound(param1:int) : void
      {
         if(Settings.playSFX)
         {
            AudioManager.playSoundEffect(param1);
         }
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import flash.events.TimerEvent;
   import flash.utils.Dictionary;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.map.Map;
   
   public class POIAssembly extends BaseAssembly
   {
      
      private static var instance:POIAssembly;
      
      private var main:Main;
      
      private var map:Map;
      
      private var delegateDict:Dictionary;
      
      private var damageTimer:Timer = new Timer(1000 * 2);
      
      private var shipID:int;
      
      public function POIAssembly()
      {
         super();
         if(instance)
         {
            throw new Error("Singleton and can only access with POIAssembly.getInstance()");
         }
         this.main = _main;
         this.map = this.main.screenManager.map;
         this.initDelegateDict();
      }
      
      public static function getInstance() : POIAssembly
      {
         if(instance == null)
         {
            instance = new POIAssembly();
         }
         return instance;
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.CREATE_POI] = this.assembleCreatePOI;
         this.delegateDict[ServerCommands.READY] = this.assemblePOIReady;
         this.delegateDict[ServerCommands.ENTER] = this.assembleEnterPOI;
         this.delegateDict[ServerCommands.LEAVE] = this.assembleLeavePOI;
      }
      
      public function assembleCommand(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      private function assembleCreatePOI(param1:Array) : void
      {
         var _loc2_:String = String(param1[3]);
         var _loc3_:int = int(param1[4]);
         var _loc4_:int = int(param1[5]);
         var _loc5_:String = String(param1[6]);
         var _loc6_:Array = [];
         var _loc7_:int = 7;
         while(_loc7_ < param1.length)
         {
            _loc6_.push(param1[_loc7_]);
            _loc7_++;
         }
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            this.map.poiManager.addPOIZone(_loc2_,_loc3_,_loc5_,_loc4_,_loc6_);
         }
      }
      
      private function assemblePOIReady(param1:Array) : void
      {
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            this.map.poiManager.drawPOIZones();
         }
      }
      
      private function assembleEnterPOI(param1:Array) : void
      {
         if(param1[3] == ServerCommands.DAMAGE)
         {
            this.shipID = param1[4];
            this.damageTimer.start();
            this.damageTimer.addEventListener(TimerEvent.TIMER,this.startDamage);
         }
      }
      
      private function assembleLeavePOI(param1:Array) : void
      {
         if(param1[3] == ServerCommands.DAMAGE)
         {
            this.shipID = param1[4];
            this.damageTimer.stop();
            this.damageTimer.reset();
            this.damageTimer.removeEventListener(TimerEvent.TIMER,this.startDamage);
         }
      }
      
      private function startDamage(param1:TimerEvent) : void
      {
         this.map.getShipManager().getShip(this.shipID).addShipDamage("L");
      }
      
      public function cleanupShieldDamage() : void
      {
         this.damageTimer.stop();
         this.damageTimer.reset();
         this.damageTimer.removeEventListener(TimerEvent.TIMER,this.startDamage);
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.QuestManager;
   
   public class QuestAssembly
   {
      
      private var delegateDict:Dictionary;
      
      private var main:Main;
      
      public function QuestAssembly()
      {
         super();
         this.initDelegateDict();
      }
      
      private static function hidden() : void
      {
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.QUESTFM_INIT] = this.assembleQuestInit;
         this.delegateDict[ServerCommands.QUESTFM_UPDATE] = this.assembleQuestUpdate;
         this.delegateDict[ServerCommands.QUESTFM_PRIVILEGE_QUEST] = this.assemblePrivilegedQuest;
         this.delegateDict[ServerCommands.QUESTFM_ACCOMPLISH_QUEST] = this.assembleQuestAccomplished;
         this.delegateDict[ServerCommands.QUESTFM_CANCEL_QUEST] = this.assembleQuestCancelled;
         this.delegateDict[ServerCommands.QUESTFM_FAIL_QUEST] = this.assembleQuestFailed;
      }
      
      private function assembleQuestFailed(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         this.main.getQuestManager().setQuestFailed(_loc2_);
      }
      
      private function assembleQuestCancelled(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         this.main.getQuestManager().setQuestCancelled(_loc2_);
      }
      
      private function assembleQuestAccomplished(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         this.main.getQuestManager().setQuestAccomplished(_loc2_,_loc3_);
      }
      
      private function assemblePrivilegedQuest(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         this.main.getQuestManager().privilegeQuestByID(_loc2_);
      }
      
      private function assembleQuestUpdate(param1:Array) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:Boolean = false;
         var _loc2_:int = int(param1[3]);
         var _loc3_:String = param1[4];
         switch(_loc3_)
         {
            case "o":
               break;
            case "i":
               _loc4_ = int(param1[5]);
               _loc5_ = int(param1[6]);
               _loc6_ = int(param1[7]);
               _loc7_ = Boolean(int(param1[8]));
               this.main.getQuestManager().updateCondition(_loc2_,_loc4_,_loc5_,_loc6_,_loc7_);
         }
      }
      
      private function assembleQuestInit(param1:Array) : void
      {
         var _loc2_:String = null;
         _loc2_ = param1[3];
         var _loc3_:String = _loc2_.charAt(0);
         if(_loc3_ == "{")
         {
            this.main.getConnectionManager().sendCommand(ServerCommands.QUESTFM_INFO,["s","f",QuestManager.QUESTFM_INI_FMT_XML]);
            this.main.getConnectionManager().sendCommand(ServerCommands.QUESTFM_INFO,["g"]);
            return;
         }
         this.main.getQuestManager().iniFormat = QuestManager.QUESTFM_INI_FMT_XML;
         var _loc4_:String = "";
         if(param1[4] != undefined)
         {
            _loc4_ = param1[4];
         }
         this.main.getQuestManager().initQuest(_loc2_,_loc4_);
      }
      
      public function assembleCommand(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      public function setMain(param1:Main) : void
      {
         if(this.main == null)
         {
            this.main = param1;
         }
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.combat.RocketPattern;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.menu.ActionButton;
   import net.bigpoint.darkorbit.menu.SuperActionButton;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class RocketLauncherAssembly extends BaseAssembly
   {
      
      private static var instance:RocketLauncherAssembly;
      
      private var delegateDict:Dictionary;
      
      private var main:Main;
      
      public function RocketLauncherAssembly(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("RocketLauncherAssembly is a Singleton and can only be accessed through RocketLauncherAssembly.getInstance()");
         }
         this.main = _main;
         this.initDelegateDict();
      }
      
      public static function getInstance() : RocketLauncherAssembly
      {
         if(instance == null)
         {
            instance = new RocketLauncherAssembly(hidden);
         }
         return instance;
      }
      
      private static function hidden() : void
      {
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.ROCKETLAUNCHER_STATUS] = this.assembleSetStatusCommand;
         this.delegateDict[ServerCommands.ROCKETLAUNCHER_STATUS_LOWER] = this.assembleSetStatusCommand;
         this.delegateDict[ServerCommands.ROCKETLAUNCHER_ATTACK] = this.assembleRocketLauncherAttackCommand;
         this.delegateDict[ServerCommands.ROCKETLAUNCHER_ATTACK_LOWER] = this.assembleRocketLauncherAttackCommand;
         this.delegateDict[ServerCommands.SET_ROCKETLAUNCHER_ROCKETS] = this.assembleSetRocketsCommand;
      }
      
      public function assembleCommand(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      public function assembleRocketLauncherAttackCommand(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         var _loc4_:int = int(param1[5]);
         var _loc5_:int = int(param1[6]);
         var _loc6_:Boolean = false;
         if(param1[7] == "M")
         {
            _loc6_ = true;
         }
         if(_main.screenManager.map != null)
         {
            _main.screenManager.map.getCombatManager().addAirstrike(_loc2_,_loc3_,_loc5_,_loc4_,_loc6_);
         }
      }
      
      public function assembleSetRocketsCommand(param1:Array) : void
      {
         Hero.rocketAmounts[RocketPattern.HSTRM01] = int(param1[3]);
         Hero.rocketAmounts[RocketPattern.UBR100] = int(param1[4]);
         Hero.rocketAmounts[RocketPattern.ECO10] = int(param1[5]);
         _main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_1,SimpleElement.TYPE_ROCKETS);
         _main.getGuiManager().getMenuManager().updateLauncherRocketButtonAmounts();
      }
      
      public function assembleSetStatusCommand(param1:Array) : void
      {
         var _loc3_:ActionButton = null;
         var _loc4_:int = 0;
         Settings.rocketLauncherType = int(param1[3]);
         Settings.selectedLauncherRocket = int(param1[4]);
         Settings.rocketLauncherRocketsLoaded = int(param1[5]);
         if(Settings.rocketLauncherType == 0)
         {
            Settings.rocketLauncherRocketsLoaded = 0;
            _main.getGuiManager().getMenuManager().updateRocketButtonAmounts();
         }
         else if(Settings.rocketLauncherType == 1)
         {
            if(Settings.rocketLauncherRocketsLoaded > 0 && Settings.rocketLauncherRocketsLoaded < 3)
            {
               AudioManager.playSoundEffect(46);
            }
            else if(Settings.rocketLauncherRocketsLoaded == 3)
            {
               AudioManager.playSoundEffect(47);
            }
         }
         else if(Settings.rocketLauncherType == 2)
         {
            if(Settings.rocketLauncherRocketsLoaded > 0 && Settings.rocketLauncherRocketsLoaded < 5)
            {
               AudioManager.playSoundEffect(46);
            }
            else if(Settings.rocketLauncherRocketsLoaded == 5)
            {
               AudioManager.playSoundEffect(47);
            }
         }
         var _loc2_:Array = _main.getGuiManager().getMenuManager().getActionButtonsByID(SuperActionButton.SELECTION_LOAD_ROCKET_LAUNCHER);
         if(_loc2_ != null && _loc2_.length > 0)
         {
            _loc4_ = 0;
            while(_loc4_ < _loc2_.length)
            {
               _loc3_ = _loc2_[_loc4_] as ActionButton;
               _loc3_.buttonDecorator.update();
               _loc3_.updateTooltip();
               _loc4_++;
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.net
{
   public class ServerCommands
   {
      
      public static const PET:String = "PET";
      
      public static const PET_INIT:String = "I";
      
      public static const PET_ACQUIRED:String = "Q";
      
      public static const ACTIVATE_HERO_PET:String = "L";
      
      public static const ACTIVATE_EXTERNAL_PET:String = "C";
      
      public static const DEACTIVATE_PET:String = "D";
      
      public static const PET_DISTROYED:String = "Z";
      
      public static const PET_STOP_LASER_ATTACK:String = "SL";
      
      public static const PET_REPAIR_BUTTON:String = "RB";
      
      public static const TRACKING:String = "TR";
      
      public static const MAP_READY_HANDSHAKE:String = "HS";
      
      public static const REPAIR_PET:String = "R";
      
      public static const PET_STATUS:String = "S";
      
      public static const PET_GEAR_INFO:String = "G";
      
      public static const PET_PROTOCOL_INFO:String = "P";
      
      public static const PET_ATTRIBUTE_INFO:String = "A";
      
      public static const PET_BUFF_INFO:String = "E";
      
      public static const FUEL_INFO:String = "FL";
      
      public static const TRADE_WINDOW_ACTIVATION:String = "TW";
      
      public static const OUT_OF_FUEL:String = "NOFL";
      
      public static const PET_IDLE:String = "IDLE";
      
      public static const GEAR_TARGET_LIST:String = "TL";
      
      public static const LOACTOR_GEAR_INFO:String = "LS";
      
      public static const BLOCK_PET_WINDOW:String = "W";
      
      public static const EVASION_PROTOCOL_INFO:String = "EV";
      
      public static const ADD_TO_PET:String = "A";
      
      public static const REMOVE_FROM_PET:String = "R";
      
      public static const SELECT:String = "SEL";
      
      public static const PET_RESET:String = "RESET";
      
      public static const PET_LEVEL_UP:String = "LUP";
      
      public static const READY_COMMAND:String = "RDY";
      
      public static const SHIP_LOADED:String = "SHP";
      
      public static const UI_WINDOW_LOADED:String = "WND";
      
      public static const UI_QUICKSLOT_LOADED:String = "QSL";
      
      public static const CHAT_LOADED:String = "CHA";
      
      public static const LOG_LOADED:String = "LOG";
      
      public static const SPACEMAP_LOADED:String = "MAP";
      
      public static const LOG_MESSAGE:String = "LM";
      
      public static const LOOT_DISCOUNT:String = "LD";
      
      public static const REWARD_DISCOUNT:String = "RD";
      
      public static const DISCOUNT_MESSAGE:String = "DIS";
      
      public static const BOX_COLLECT_RESPONSE:String = "y";
      
      public static const NEWBIE_BOOSTER:String = "NB";
      
      public static const BOOSTER_QUEST_REWARD:String = "QB";
      
      public static const BOOSTER_BONUS_BOX:String = "BB";
      
      public static const BOX_CONTENT_ORE:String = "CAR";
      
      public static const BOX_CONTENT_JACKPOT:String = "JPE";
      
      public static const BOX_CONTENT_CREDITS:String = "CRE";
      
      public static const BOX_CONTENT_URIDIUM:String = "URI";
      
      public static const BOX_CONTENT_EXPERIENCE_POINTS:String = "EP";
      
      public static const BOX_CONTENT_HONOR_POINTS:String = "HON";
      
      public static const BOX_CONTENT_HITPOINTS:String = "HTP";
      
      public static const BOX_CONTENT_ROCKETS:String = "ROK";
      
      public static const BOX_CONTENT_LASER_BATTERIES:String = "BAT";
      
      public static const BOX_CONTENT_BANKING_MULTIPLIKATOR:String = "BMP";
      
      public static const BOX_CONTENT_DEDUCTION_HITPOINTS:String = "DHP";
      
      public static const BOX_CONTENT_EXTRA_ENERGY:String = "XEN";
      
      public static const SET_ITEM_LOOTING_ACTIVE:String = "SLA";
      
      public static const SET_ITEM_LOOTING_CANCELLED:String = "SLC";
      
      public static const BOX_CONTENT_MINE:String = "AMI";
      
      public static const ITEM_LOOT:String = "LOT";
      
      public static const BOX_CONTENT_PET_FUEL:String = "PFL";
      
      public static const BOX_CONTENT_JUMP_VOUCHERS:String = "JV";
      
      public static const BOX_CONTENT_LEVEL_UP:String = "NL";
      
      public static const BOX_CONTENT_FIREWORK:String = "FW";
      
      public static const BOX_TOO_BIG:String = "BTB";
      
      public static const BOX_ALREADY_COLLECTED:String = "BAH";
      
      public static const MINE_EXPLODE:String = "MIN";
      
      public static const MINE_ACM:String = "ACM";
      
      public static const MINE_EMP:String = "EMP";
      
      public static const MINE_SAB:String = "SAB";
      
      public static const MINE_DDM:String = "DDM";
      
      public static const AVAILABLE_SHIPS_ON_MAP:String = "SLE";
      
      public static const YOU_WIN:String = "JPW";
      
      public static const LOGFILE:String = "LOG";
      
      public static const SET_ATTRIBUTE:String = "A";
      
      public static const SERVER_MSG:String = "STD";
      
      public static const TEXTBOX_MSG:String = "KMS";
      
      public static const LOCALIZED_SERVER_MSG:String = "STM";
      
      public static const EXTRAS_INFO:String = "ITM";
      
      public static const SET_FLASH_SETTINGS:String = "SET";
      
      public static const SHIELD_INFO:String = "SHD";
      
      public static const HITPOINTS_INFO:String = "HPT";
      
      public static const ROCKET_COOLDOWN_COMPLETED:String = "RCD";
      
      public static const EXPERIENCE_POINTS_UPDATE:String = "EP";
      
      public static const CREDITS_UPDATE:String = "C";
      
      public static const LEVEL_UPDATE:String = "LUP";
      
      public static const VELOCITY_UPDATE:String = "v";
      
      public static const CARGO_CHANGE:String = "c";
      
      public static const AMMUNITION_CAPACITY_CHANGE:String = "a";
      
      public static const UPDATE_CONFIGURATION_COUNT:String = "CC";
      
      public static const INIT_UPDATE_BOOSTERS:String = "BS";
      
      public static const INIT_UPDATE_PIRATE_HUNT_STATS:String = "PH";
      
      public static const INIT_UPDATE_PIRATE_HUNT_CLAN_STATS:String = "PHC";
      
      public static const RANKED_HUNT_EVENT_UPDATE:String = "RHE";
      
      public static const RANKED_HUNT_EVENT_INFO:String = "NFO";
      
      public static const RANKED_HUNT_EVENT_END:String = "END";
      
      public static const RANKED_HUNT_EVENT_STATS_CLASS_PLAYER:String = "P";
      
      public static const RANKED_HUNT_EVENT_STATS_CLASS_CLAN:String = "C";
      
      public static const RANKED_HUNT_EVENT_TARGET_MATCH_CLASS_PLAYER:String = "P";
      
      public static const RANKED_HUNT_EVENT_TARGET_MATCH_CLASS_NPC:String = "N";
      
      public static const UPDATE_COMMAND_LINE_INTERFACE:String = "CLI";
      
      public static const FIREWORKS:String = "FWX";
      
      public static const FIREWORK_INSTALLATIONS_LEFT:String = "INL";
      
      public static const FIREWORKS_LEFT:String = "FWL";
      
      public static const FIREWORKS_IGNITE:String = "FWI";
      
      public static const FIREWORKS_IGNITE_GROUP:String = "FWG";
      
      public static const WIZ_ROCKET:String = "WIZ";
      
      public static const DCR_ROCKET:String = "DCR";
      
      public static const REPAIR_SKILL_UPDATE:String = "RS";
      
      public static const SHIELD_SKILL_UPDATE:String = "SHS";
      
      public static const SET_REPAIR_DATA:String = "REP";
      
      public static const SET_GS_IO_LOGGING:String = "IOLOG";
      
      public static const SET_DISPLAY_CROSSHAIR:String = "DCH";
      
      public static const HEAL:String = "HL";
      
      public static const STATS_TYPE_SHIELD:String = "SHD";
      
      public static const STATS_TYPE_HITPOINTS:String = "HPT";
      
      public static const SERVER_VERSION:String = "VERSION";
      
      public static const SET_COOLDOWN:String = "CLD";
      
      public static const COOLDOWN_COMPLETED:String = "CLR";
      
      public static const MINE_COOLDOWN:String = "MIN";
      
      public static const SMARTBOMB_COOLDOWN:String = "SMB";
      
      public static const INSTASHIELD_COOLDOWN:String = "ISH";
      
      public static const ROCKET_COOLDOWN:String = "ROK";
      
      public static const RSB_COOLDOWN:String = "RSB";
      
      public static const PLASMA_DISCONNECT_COOLDOWN:String = "PLA";
      
      public static const EMP_COOLDOWN:String = "EMP";
      
      public static const ADVANCED_JUMP_CPU_COOLDOWN:String = "SJ";
      
      public static const CPU_INFO:String = "CPU";
      
      public static const JUMP_CPU:String = "J";
      
      public static const ADVANCED_JUMP_CPU:String = "JCPU";
      
      public static const TRADE_DRONE_INFO:String = "T";
      
      public static const DRONEREPAIR_CPU_INFO:String = "D";
      
      public static const DIPLO_CPU_INFO:String = "E";
      
      public static const AIM_CPU_INFO:String = "A";
      
      public static const CLOAK_CPU_INFO:String = "C";
      
      public static const AUTO_ROCKET_CPU_INFO:String = "R";
      
      public static const ROCKETLAUNCHER_AUTO_CPU_INFO:String = "Y";
      
      public static const QUESTFM_INFO:String = "9";
      
      public static const QUESTFM_UPDATE:String = "upd";
      
      public static const QUESTFM_INIT:String = "ini";
      
      public static const QUESTFM_PRIVILEGE_QUEST:String = "p";
      
      public static const QUESTFM_ACCOMPLISH_QUEST:String = "a";
      
      public static const QUESTFM_ABORT_QUEST:String = "a";
      
      public static const QUESTFM_CANCEL_QUEST:String = "c";
      
      public static const QUESTFM_FAIL_QUEST:String = "f";
      
      public static const QUESTFM_SUBSEQUENT_QUEST:String = "SUBSEQ";
      
      public static const QUESTFM_HIGHLIGHT_QUEST:String = "HLT";
      
      public static const ACHIEVEMENTS:String = "ach";
      
      public static const ACHIEVEMENT_SET:String = "set";
      
      public static const ACHIEVEMENT_REMOVE:String = "rm";
      
      public static const ACHIEVEMENT_END:String = "end";
      
      public static const ACHIEVEMENT_BUY:String = "buy";
      
      public static const GROUPSYSTEM:String = "ps";
      
      public static const GROUPSYSTEM_INIT_UI:String = "nscht";
      
      public static const GROUPSYSTEM_INIT:String = "init";
      
      public static const GROUPSYSTEM_INIT_SUB_GROUP:String = "grp";
      
      public static const GROUPSYSTEM_INIT_SUB_PLAYER:String = "plr";
      
      public static const GROUPSYSTEM_ERROR:String = "err";
      
      public static const GROUPSYSTEM_ERROR_CONNECTION:String = "conn";
      
      public static const GROUPSYSTEM_INFO_CANDIDATES:String = "all";
      
      public static const GROUPSYSTEM_INFO_ME:String = "me";
      
      public static const GROUPSYSTEM_INFO_GRP:String = "grp";
      
      public static const GROUPSYSTEM_BLOCK_INVITATIONS:String = "blk";
      
      public static const GROUPSYSTEM_GROUP_EVENT_MEMBER_LOGOUT:String = "mlo";
      
      public static const GROUPSYSTEM_GROUP_EVENT_MEMBER_RETURN:String = "back";
      
      public static const GROUPSYSTEM_GROUP_EVENT_MEMBER_LEAVES:String = "lp";
      
      public static const GROUPSYSTEM_GROUP_EVENT_MEMBER_LEAVES_SUB_LEAVE:String = "lv";
      
      public static const GROUPSYSTEM_GROUP_EVENT_MEMBER_LEAVES_SUB_KICK:String = "kick";
      
      public static const GROUPSYSTEM_GROUP_EVENT_MEMBER_LEAVES_SUB_NONE:String = "none";
      
      public static const GROUPSYSTEM_GROUP_EVENT_END:String = "end";
      
      public static const GROUPSYSTEM_GROUP_EVENT_NEW_LEADER:String = "nl";
      
      public static const GROUPSYSTEM_GROUP_EVENT_INVITATION_BEHAVIOUR_CHANGE:String = "chib";
      
      public static const GROUPSYSTEM_GROUP_EVENT_STATS_CHANGE:String = "sc";
      
      public static const GROUPSYSTEM_GROUP_EVENT_UPDATE:String = "upd";
      
      public static const GROUPSYSTEM_GROUP_EVENT_JUMP:String = "jump";
      
      public static const GROUPSYSTEM_GROUP_EVENT_PING:String = "png";
      
      public static const GROUPSYSTEM_GROUP_EVENT_KILL:String = "kill";
      
      public static const GROUPSYSTEM_GROUP_EVENT_ERROR:String = "err";
      
      public static const GROUPSYSTEM_GROUP_EVENT_ERROR_SUB_ATTACK:String = "a";
      
      public static const GROUPSYSTEM_GROUP_EVENT_ERROR_SUB_FOLLOW:String = "f";
      
      public static const GROUPSYSTEM_GROUP_EVENT_ERROR_SUB_PING:String = "png";
      
      public static const GROUPSYSTEM_GROUP_INVITE:String = "inv";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_BY_ID:String = "new";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_BY_NAME:String = "name";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_REJECT:String = "rjc";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_REVOKE:String = "rji";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_DELETE:String = "del";
      
      public static const GROUPSYSTEM_GROUP_INVITATION_DELETE_REVOKE:String = "rv";
      
      public static const GROUPSYSTEM_GROUP_INVITATION_DELETE_REJECT:String = "rj";
      
      public static const GROUPSYSTEM_GROUP_INVITATION_DELETE_NONE:String = "none";
      
      public static const GROUPSYSTEM_GROUP_INVITATION_DELETE_TIMEOUT:String = "to";
      
      public static const GROUPSYSTEM_GROUP_INVITATION_DELETE_ACCEPT:String = "ack";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ACKNOWLEDGE:String = "ack";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_BOSS_YES:String = "byes";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_BOSS_NO:String = "bno";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR:String = "err";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_BLOCKED:String = "blk";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_SPAM:String = "spam";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_CANDIDATE_NON_EXISTANT:String = "cnx";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_CANDIDATE_NOT_AVAILABLE:String = "cna";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_BOSS_ONLY:String = "boss";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_DUPLICATE:String = "dpl";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_CANDIDATE_IN_GROUP:String = "cig";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_GROUP_FULL:String = "full";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_INVITER_NONEXISTENT:String = "inx";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_NO_INVITATION:String = "noi";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_MAX_INVITATIONS_INVITER:String = "mxi";
      
      public static const GROUPSYSTEM_GROUP_INVITE_SUB_ERROR_MAX_INVITATIONS_CANDIDATE:String = "mxc";
      
      public static const QUEST_INFO:String = "Q";
      
      public static const QUEST_DONE:String = "DONE";
      
      public static const QUEST_CANCEL:String = "CANCEL";
      
      public static const QUEST_STATUS:String = "STA";
      
      public static const LASER_ATTACK:String = "a";
      
      public static const ROCKET_ATTACK:String = "v";
      
      public static const OUT_OF_RANGE:String = "O";
      
      public static const ESCAPE:String = "V";
      
      public static const IN_NO_ATTACK_ZONE:String = "P";
      
      public static const NO_AMMUNITION:String = "W";
      
      public static const AUTO_AMMUNITION_CHANGE:String = "4";
      
      public static const TARGET_IN_RANGE:String = "X";
      
      public static const ATTACKED_SHIP_INFO:String = "H";
      
      public static const ATTACK_INFO:String = "Y";
      
      public static const SHOOT_MISSED_A:String = "M";
      
      public static const SHOOT_MISSED_T:String = "Z";
      
      public static const ATTACK_STOPPED_A:String = "F";
      
      public static const ATTACK_STOPPED_T:String = "J";
      
      public static const NEW_MAP:String = "m";
      
      public static const CREATE_STATION:String = "s";
      
      public static const CREATE_PORTAL:String = "p";
      
      public static const CREATE_ORE:String = "r";
      
      public static const ORE_COLLECTED_BY_HERO:String = "e";
      
      public static const CARGO_FULL:String = "f";
      
      public static const BOX_DISABLED:String = "h";
      
      public static const REMOVE_ORE:String = "q";
      
      public static const CREATE_BOX:String = "c";
      
      public static const CREATE_MINE:String = "L";
      
      public static const SET_MAP_PVP_STATUS:String = "SMP";
      
      public static const CHANGE_HEALTH_STATION_STATUS:String = "CSS";
      
      public static const NEW_ASSET:String = "CRE";
      
      public static const ASSET_INFO:String = "NFO";
      
      public static const ASSET_HIT:String = "HIT";
      
      public static const CREATE_ASSET:String = "AST";
      
      public static const POI:String = "POI";
      
      public static const CREATE_POI:String = "CRE";
      
      public static const READY:String = "RDY";
      
      public static const ENTER:String = "ENT";
      
      public static const LEAVE:String = "LEA";
      
      public static const DAMAGE:String = "DMG";
      
      public static const POI_RDY:String = "POIRDY";
      
      public static const MAP_EVENT:String = "n";
      
      public static const DISPLAY_MESSAGE:String = "MSG";
      
      public static const ORE_COLLECTED:String = "RCO";
      
      public static const BOX_COLLECTED:String = "BCO";
      
      public static const TARGET_FADE_TO_GRAY:String = "LSH";
      
      public static const TARGET_FADE_TO_GRAY_ABORT:String = "USH";
      
      public static const TARGET_INVISIBLE:String = "INV";
      
      public static const SET_DRONES:String = "d";
      
      public static const SET_PORTAL:String = "p";
      
      public static const SET_PORTAL_REMOVE:String = "REM";
      
      public static const SET_PORTAL_REMOVE_ALL:String = "ALL";
      
      public static const SET_DRONE_DISPLAY:String = "e";
      
      public static const ENEMY_WARNING:String = "w";
      
      public static const SPAWN_ENEMIES:String = "s";
      
      public static const SET_TITLE:String = "t";
      
      public static const REMOVE_TITLE:String = "trm";
      
      public static const SET_PERMANENT_TITLE:String = "pt";
      
      public static const MULTIPLIER_FOUND:String = "MDL";
      
      public static const SMARTBOMB:String = "SMB";
      
      public static const INSTASHIELD:String = "ISH";
      
      public static const EMP:String = "EMP";
      
      public static const BOOSTER_FOUND:String = "fbo";
      
      public static const MALUS:String = "MAL";
      
      public static const SET_PLAYER_ATTACKABLE:String = "pvp";
      
      public static const PLAY_SPECIAL_EXPLOSION:String = "BOOOM";
      
      public static const SAB_SHOT:String = "SAB_SHOT";
      
      public static const SPAWN:String = "Spawn";
      
      public static const DESPAWN:String = "Despawn";
      
      public static const HEAL_RAY:String = "HEAL_RAY";
      
      public static const INDEPENDENCE_DAY_MODE:String = "ID4";
      
      public static const MALUS_SET:String = "SET";
      
      public static const MALUS_REMOVE:String = "REM";
      
      public static const INIT_SCOREBOARD:String = "ssi";
      
      public static const SET_SCORE:String = "ssc";
      
      public static const SET_SPEED:String = "sss";
      
      public static const INIT_INVASION_SCOREBOARD:String = "isi";
      
      public static const SET_INVASION_SCORE:String = "isc";
      
      public static const SET_INVASION_WAVE:String = "isw";
      
      public static const CTB:String = "ctb";
      
      public static const CTB_INIT_SCOREBOARD:String = "m";
      
      public static const CTB_UPDATE_BEACON_POSITION:String = "p";
      
      public static const CTB_UPDATE_SCOREBOARD:String = "s";
      
      public static const CTB_SET_HOMEZONES:String = "z";
      
      public static const CTB_ATTACH_BEACON_TO_USER:String = "c";
      
      public static const CTB_REMOVE_BEACON_FROM_USER:String = "r";
      
      public static const INIT_SCORE:String = "sgi";
      
      public static const SET_SPECIFIC_SCORE:String = "sgs";
      
      public static const SET_MULTI_SCORE:String = "sgm";
      
      public static const SET_DISCIPLINE:String = "sgd";
      
      public static const TEAM_DEATHMATCH:String = "tdm";
      
      public static const DRAFT:String = "drf";
      
      public static const GAMES_COUNT:String = "gms";
      
      public static const MESSAGE:String = "msg";
      
      public static const GATE_MAPS_MESSAGE:String = "quu";
      
      public static const TDM_EVENT:String = "evt";
      
      public static const TDM_INTRO_PHASE:String = "dmz";
      
      public static const TDM_KICK_OFF:String = "go!";
      
      public static const TDM_STATS_INIT:String = "nfo";
      
      public static const TDM_MATCH_RESULT:String = "fnl";
      
      public static const TECHS_UPDATE:String = "TX";
      
      public static const TECHS_ACTIVATE:String = "A";
      
      public static const TECHS_DEACTIVATE:String = "D";
      
      public static const SKILL_DESIGNS:String = "SD";
      
      public static const REMOVE_SKILL_FX:String = "R";
      
      public static const SKILLS_ACTIVATE:String = "A";
      
      public static const SKILLS_DEACTIVATE:String = "D";
      
      public static const SKILL_SOLACE:String = "IH";
      
      public static const SKILL_DIMINISHER:String = "WS";
      
      public static const SKILL_SPECTRUM:String = "PS";
      
      public static const SKILL_SENTINEL:String = "FOR";
      
      public static const SKILL_VENOM:String = "SIN";
      
      public static const SPEED_BUFF:String = "SPEED_BUFF";
      
      public static const SPEED_BUFF_COOL_DOWN:String = "SB";
      
      public static const GRAPHIC_FX:String = "fx";
      
      public static const GRAPHIC_FX_START:String = "start";
      
      public static const GRAPHIC_FX_END:String = "end";
      
      public static const GRAPHIC_FX_RAGE:String = "RAGE";
      
      public static const GRAPHIC_FX_SABOTEUR_DEBUFF:String = "SABOTEUR_DEBUFF";
      
      public static const GRAPHIC_FX_SKULL:String = "SKULL";
      
      public static const GRAPHIC_FX_INVINCIBILITY:String = "INVINCIBILITY";
      
      public static const GRAPHIC_FX_KAMIKAZE:String = "KAM";
      
      public static const HERO_INIT:String = "I";
      
      public static const SHIP_SELECTED:String = "N";
      
      public static const CREATE_SHIP:String = "C";
      
      public static const REMOVE_SHIP:String = "R";
      
      public static const SHIP_MOVEMENT:String = "1";
      
      public static const HERO_MOVEMENT:String = "T";
      
      public static const BEACON:String = "D";
      
      public static const PRIMARY_WEAPON_INFO:String = "B";
      
      public static const SECONDARY_WEAPON_INFO:String = "3";
      
      public static const DESTROY_SHIP:String = "K";
      
      public static const PLAY_PORTAL_ANIMATION:String = "U";
      
      public static const PORTAL_JUMP:String = "i";
      
      public static const ERROR:String = "ERR";
      
      public static const NO_HITPOINTS:uint = 1;
      
      public static const NOT_LOGGED_IN:uint = 2;
      
      public static const DOUBLE_LOGGED_IN:uint = 3;
      
      public static const INVALID_SESSION:uint = 4;
      
      public static const LOGOUT:String = "l";
      
      public static const LOGOUT_CANCEL_FROM_SERVER:String = "t";
      
      public static const LOGOUT_CANCEL_FROM_CLIENT:String = "o";
      
      public static const GET_ORE_PRICES:String = "b";
      
      public static const SET_PRICES:String = "g";
      
      public static const SET_AMMO_PRICES:String = "a";
      
      public static const SET_ORE_PRICES:String = "r";
      
      public static const SET_ORE_COUNT:String = "E";
      
      public static const SELL_ORE:String = "T";
      
      public static const EXCHANGE_PALLADIUM:String = "XCP";
      
      public static const REMOVE_BOX:String = "2";
      
      public static const CHANGE_MAP:String = "z";
      
      public static const GRACEFUL_KILL:String = "GKL";
      
      public static const KICKED:String = "KIK";
      
      public static const PING:String = "PNG";
      
      public static const REQUEST_SHIP:String = "i";
      
      public static const CLIENT_SETTING:String = "7";
      
      public static const CLIENT_RESOLUTION:String = "CLIENT_RESOLUTION";
      
      public static const SET_RESOLUTION:String = "SET_RESOLUTION";
      
      public static const SET_QUICKBAR_SLOT:String = "QUICKBAR_SLOT";
      
      public static const SET_SLOTMENU_ORDER:String = "SLOTMENU_ORDER";
      
      public static const SET_SLOTMENU_POSITION:String = "SLOTMENU_POSITION";
      
      public static const SET_MAINMENU_POSITION:String = "MAINMENU_POSITION";
      
      public static const WINDOW_SETTINGS:String = "WINDOW_SETTINGS";
      
      public static const SET_MINIMAP_SCALE:String = "MINIMAP_SCALE";
      
      public static const SET_RESIZABLE_WINDOWS:String = "RESIZABLE_WINDOWS";
      
      public static const SET_BAR_STATUS:String = "BAR_STATUS";
      
      public static const SET_AUTO_REFINEMENT:String = "AUTO_REFINEMENT";
      
      public static const SET_QUICKSLOT_STOP_ATTACK:String = "QUICKSLOT_STOP_ATTACK";
      
      public static const SET_SHOW_DRONES:String = "SHOW_DRONES";
      
      public static const SET_AUTO_START:String = "AUTO_START";
      
      public static const SET_DOUBLECLICK_ATTACK:String = "DOUBLECLICK_ATTACK";
      
      public static const SET_SHOW_INSTANT_LOG:String = "SHOW_INSTANT_LOG";
      
      public static const SET_AUTO_BOOST:String = "AUTO_BOOST";
      
      public static const SET_DISPLAY_HITPOINT_BUBBLES:String = "DISPLAY_HITPOINT_BUBBLES";
      
      public static const SET_DISPLAY_PLAYER_NAMES:String = "DISPLAY_PLAYER_NAMES";
      
      public static const SET_DISPLAY_ORE:String = "DISPLAY_ORE";
      
      public static const SET_DISPLAY_BONUS_BOXES:String = "DISPLAY_BONUS_BOXES";
      
      public static const SET_PLAY_SFX:String = "PLAY_SFX";
      
      public static const SET_PLAY_MUSIC:String = "PLAY_MUSIC";
      
      public static const SET_SELECTED_BATTERY:String = "SELECTED_BATTERY";
      
      public static const SET_SELECTED_ROCKET:String = "SELECTED_ROCKET";
      
      public static const SET_DISPLAY_NOTIFICATIONS:String = "DISPLAY_NOTIFICATIONS";
      
      public static const SET_DISPLAY_CHAT:String = "DISPLAY_CHAT";
      
      public static const SET_DISPLAY_FREE_CARGO_BOXES:String = "DISPLAY_FREE_CARGO_BOXES";
      
      public static const SET_DISPLAY_NOT_FREE_CARGO_BOXES:String = "DISPLAY_NOT_FREE_CARGO_BOXES";
      
      public static const SET_AUTO_AMMO_CHANGE:String = "AUTO_AMMO_CHANGE";
      
      public static const SET_DISPLAY_WINDOW_BACKGROUND:String = "DISPLAY_WINDOW_BACKGROUND";
      
      public static const SET_ALWAYS_DRAGGABLE_WINDOWS:String = "ALWAYS_DRAGGABLE_WINDOWS";
      
      public static const SET_PRELOAD_USER_SHIPS:String = "PRELOAD_USER_SHIPS";
      
      public static const SETTING_KEY_SEPERATOR:String = ",";
      
      public static const SETTING_PROPERTY_SEPERATOR:String = ",";
      
      public static const REMOVE_KEY:String = "REM";
      
      public static const SET_QUALITY_PRESETTING:String = "QUALITY_PRESETTING";
      
      public static const SET_QUALITY_CUSTOMIZED:String = "QUALITY_CUSTOMIZED";
      
      public static const SET_QUALITY_BACKGROUND:String = "QUALITY_BACKGROUND";
      
      public static const SET_QUALITY_POIZONE:String = "QUALITY_POIZONE";
      
      public static const SET_QUALITY_SHIP:String = "QUALITY_SHIP";
      
      public static const SET_QUALITY_ENGINE:String = "QUALITY_ENGINE";
      
      public static const SET_QUALITY_COLLECTABLE:String = "QUALITY_COLLECTABLE";
      
      public static const SET_QUALITY_ATTACK:String = "QUALITY_ATTACK";
      
      public static const SET_QUALITY_EFFECT:String = "QUALITY_EFFECT";
      
      public static const SET_QUALITY_EXPLOSION:String = "QUALITY_EXPLOSION";
      
      public static const BUY:String = "5";
      
      public static const BUY_LASER:String = "b";
      
      public static const BUY_ROCKET:String = "r";
      
      public static const BUY_SUCCESS:String = "o";
      
      public static const BUY_FAILED:String = "f";
      
      public static const BUY_FAILED_NO_MONEY:String = "F";
      
      public static const BUY_FAILED_NO_CARGO:String = "S";
      
      public static const JUMP_FAILED:String = "k";
      
      public static const LAB:String = "LAB";
      
      public static const UPDATE:String = "UPD";
      
      public static const GET:String = "GET";
      
      public static const INFO:String = "INFO";
      
      public static const SET:String = "SET";
      
      public static const REFINEMENT:String = "REF";
      
      public static const PRODUCE:String = "PROD";
      
      public static const USER_INTERFACE:String = "UI";
      
      public static const MINIMAP:String = "MM";
      
      public static const NOISE:String = "NOISE";
      
      public static const SHOW_MARKER:String = "SM";
      
      public static const HIDE_MARKER:String = "HM";
      
      public static const EMP_MALUS_BOLT:String = "EMAL";
      
      public static const CAMERA:String = "CAM";
      
      public static const CAMERA_LOCK_TO_HERO:String = "LTH";
      
      public static const CAMERA_LOCK_TO_SHIP:String = "LTS";
      
      public static const CAMERA_LOCK_TO_COORDINATES:String = "LTC";
      
      public static const ADVERTISING_BANNER:String = "AD";
      
      public static const ASSIST_WINDOW:String = "AST";
      
      public static const CREATE_WINDOW:String = "CW";
      
      public static const DESTROY_WINDOW:String = "DW";
      
      public static const VIDEO_WINDOW:String = "VID";
      
      public static const CREATE_VIDEO_WINDOW:String = "CW";
      
      public static const DESTROY_VIDEO_WINDOW:String = "DW";
      
      public static const NEXT_PAGE:String = "NP";
      
      public static const WINDOW_DESTROYED:String = "WD";
      
      public static const ARROW:String = "AR";
      
      public static const SHOW_ARROW:String = "SA";
      
      public static const HIDE_ARROW:String = "HA";
      
      public static const WINDOW:String = "W";
      
      public static const BUTTON:String = "B";
      
      public static const SHOW_WINDOW:String = "SW";
      
      public static const HIDE_WINDOW:String = "HW";
      
      public static const SHOW_BUTTON:String = "SB";
      
      public static const HIDE_BUTTON:String = "HB";
      
      public static const SHOW_FLASH:String = "SF";
      
      public static const HIDE_FLASH:String = "HF";
      
      public static const MINIMIZE_WINDOW:String = "MIW";
      
      public static const MAXIMIZE_WINDOW:String = "MAW";
      
      public static const SET_MENU_VISIBILITY:String = "MV";
      
      public static const SHOW_MENU:String = "SM";
      
      public static const HIDE_MENU:String = "HM";
      
      public static const SET_MENUBUTTON_ACCESS:String = "MBA";
      
      public static const MENUBUTTON_ENABLED:String = "EB";
      
      public static const MENUBUTTON_DISABLED:String = "DB";
      
      public static const TECHS:String = "TX";
      
      public static const CHAIN_BOLT:String = "ECI";
      
      public static const TECH_BATTLE_REP_BOT:String = "BRB";
      
      public static const SET_STATUS:String = "S";
      
      public static const TECH_ENERGY_LEECH:String = "ELA";
      
      public static const TECH_SHIELD_BACK_UP:String = "SBU";
      
      public static const TECH_ELECTRIC_CHAIN_IMPULSE:String = "ECI";
      
      public static const TECH_ROCKET_PROBABILITY_MAXIMIZER:String = "RPM";
      
      public static const ROCKETLAUNCHER:String = "RL";
      
      public static const ROCKETLAUNCHER_ATTACK:String = "A";
      
      public static const ROCKETLAUNCHER_ATTACK_LOWER:String = "a";
      
      public static const ROCKETLAUNCHER_STATUS:String = "S";
      
      public static const ROCKETLAUNCHER_STATUS_LOWER:String = "s";
      
      public static const SET_ROCKETLAUNCHER_ROCKETS:String = "R";
      
      public static const SPECIAL_ENEMY:String = "SE";
      
      public static const ALIENMOTHERSHIP:String = "AMS";
      
      public static const CREATE:String = "C";
      
      public static const ROTATE:String = "R";
      
      public static const PREPARE_ATTACK:String = "PA";
      
      public static const PREPARE_BIG_ATTACK:String = "PBA";
      
      public static const CLOAK:String = "CL";
      
      public static const IDLE:String = "I";
      
      public static const MOVE:String = "M";
      
      public static const KILL:String = "K";
      
      public static const SET_SPECIAL_OFFERS_NEEDED:String = "SON";
      
      public static const ADVANCED_JUMP_CPU_INIT:String = "I";
      
      public static const ADVANCED_JUMP_CPU_SELECTED_MAP_FEEDBACK:String = "C";
      
      public static const JUMP_VOUCHERS_UPDATE:String = "JV";
      
      public static const SET_MARKER:String = "MARK";
      
      public static const REMOVE_MARKERS:String = "NOMARK";
      
      public static const BOOTY_KEYS_UPDATE:String = "BK";
      
      public function ServerCommands()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import com.bigpoint.utils.BPLocale;
   import flash.external.ExternalInterface;
   import flash.utils.Dictionary;
   import mx.utils.StringUtil;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.InGameCatalog;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.data.RankedHuntingEventData;
   import net.bigpoint.darkorbit.data.vo.RankedHuntStatsVO;
   import net.bigpoint.darkorbit.fireworks.FireworksManager;
   import net.bigpoint.darkorbit.gui.CPUItem;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.MenuButton;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.menu.ActionButton;
   import net.bigpoint.darkorbit.menu.MenuManager;
   import net.bigpoint.darkorbit.menu.SuperActionButton;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.pattern.RepairInfo;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   import net.bigpoint.darkorbit.ship.effects.EffectIDList;
   import net.bigpoint.darkorbit.ship.effects.EffectsManager;
   import net.bigpoint.darkorbit.ship.effects.LevelUpEffect;
   
   public class SetAttributeAssembly extends BaseAssembly
   {
      
      private static var instance:SetAttributeAssembly;
      
      private var map:Map;
      
      private var hero:Ship;
      
      private var cpuDict:Dictionary;
      
      private var delegateDict:Dictionary;
      
      private var settingsAssembly:SettingsAssembly;
      
      private var cooldownClassToButtonIDs:Dictionary;
      
      private var main:Main;
      
      private var effectsManager:EffectsManager = EffectsManager.getInstance();
      
      public function SetAttributeAssembly(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("SetAttributeAssembly is a Singleton and can only be accessed through SetAttributeAssembly.getInstance()");
         }
         this.main = _main;
         this.initDelegateDict();
         this.initDicts();
         this.settingsAssembly = SettingsAssembly.getInstance();
      }
      
      public static function getInstance() : SetAttributeAssembly
      {
         if(instance == null)
         {
            instance = new SetAttributeAssembly(hidden);
         }
         return instance;
      }
      
      private static function hidden() : void
      {
      }
      
      private function initDicts() : void
      {
         this.cpuDict = new Dictionary();
         this.cpuDict[3] = CPUItem.TYPE_DRONE_REPAIR;
         this.cpuDict[4] = CPUItem.TYPE_RADAR;
         this.cpuDict[5] = CPUItem.TYPE_JUMP;
         this.cpuDict[6] = CPUItem.TYPE_AMMOBUY;
         this.cpuDict[7] = CPUItem.TYPE_ROBOT;
         this.cpuDict[8] = CPUItem.TYPE_HM7;
         this.cpuDict[10] = CPUItem.TYPE_SMARTBOMB;
         this.cpuDict[11] = CPUItem.TYPE_INSTASHIELD;
         this.cpuDict[12] = CPUItem.TYPE_MINETURBO;
         this.cpuDict[13] = CPUItem.TYPE_AIM;
         this.cpuDict[14] = CPUItem.TYPE_AROL;
         this.cpuDict[15] = CPUItem.TYPE_CLOAK;
         this.cpuDict[16] = CPUItem.TYPE_RLLB;
         this.cpuDict[17] = CPUItem.TYPE_ROCKETBUY;
         this.cpuDict[18] = CPUItem.TYPE_ADVANCED_JUMP;
         this.cooldownClassToButtonIDs = new Dictionary();
         this.cooldownClassToButtonIDs[ServerCommands.MINE_COOLDOWN] = new CooldownCommandMap(this.addCoolDown,[SuperActionButton.SELECTION_MINE,SuperActionButton.SELECTION_MINE_EMP,SuperActionButton.SELECTION_MINE_SAB,SuperActionButton.SELECTION_MINE_DDM]);
         this.cooldownClassToButtonIDs[ServerCommands.SMARTBOMB_COOLDOWN] = new CooldownCommandMap(this.addCoolDown,[SuperActionButton.SELECTION_SMARTBOMB]);
         this.cooldownClassToButtonIDs[ServerCommands.INSTASHIELD_COOLDOWN] = new CooldownCommandMap(this.addCoolDown,[SuperActionButton.SELECTION_INSTASHIELD]);
         this.cooldownClassToButtonIDs[ServerCommands.EMP_COOLDOWN] = new CooldownCommandMap(this.addCoolDown,[SuperActionButton.SELECTION_EMP]);
         this.cooldownClassToButtonIDs[ServerCommands.ROCKET_COOLDOWN] = new CooldownCommandMap(this.addCoolDown,[SuperActionButton.SELECTION_ROCKET_R_310,SuperActionButton.SELECTION_ROCKET_PLT_2026,SuperActionButton.SELECTION_ROCKET_PLT_2021,SuperActionButton.SELECTION_ROCKET_PLT_3030]);
         this.cooldownClassToButtonIDs[ServerCommands.RSB_COOLDOWN] = new CooldownCommandMap(this.addCoolDown,[SuperActionButton.SELECTION_LASER_6]);
         this.cooldownClassToButtonIDs[ServerCommands.PLASMA_DISCONNECT_COOLDOWN] = new CooldownCommandMap(this.addCoolDown,[SuperActionButton.SELECTION_ROCKET_PLD_8]);
         this.cooldownClassToButtonIDs[ServerCommands.WIZ_ROCKET] = new CooldownCommandMap(this.addCoolDown,[SuperActionButton.SELECTION_ROCKET_WIZ]);
         this.cooldownClassToButtonIDs[ServerCommands.DCR_ROCKET] = new CooldownCommandMap(this.addCoolDown,[SuperActionButton.SELECTION_ROCKET_DCR_250]);
         this.cooldownClassToButtonIDs[ServerCommands.ROCKETLAUNCHER] = new CooldownCommandMap(this.addCoolDown,[SuperActionButton.SELECTION_LOAD_ROCKET_LAUNCHER]);
         this.cooldownClassToButtonIDs[ServerCommands.TECH_SHIELD_BACK_UP] = new CooldownCommandMap(this.addTechCooldown,[ServerCommands.TECH_SHIELD_BACK_UP]);
         this.cooldownClassToButtonIDs[ServerCommands.TECH_ENERGY_LEECH] = new CooldownCommandMap(this.addTechCooldown,[ServerCommands.TECH_ENERGY_LEECH]);
         this.cooldownClassToButtonIDs[ServerCommands.TECH_ELECTRIC_CHAIN_IMPULSE] = new CooldownCommandMap(this.addTechCooldown,[ServerCommands.TECH_ELECTRIC_CHAIN_IMPULSE]);
         this.cooldownClassToButtonIDs[ServerCommands.TECH_ROCKET_PROBABILITY_MAXIMIZER] = new CooldownCommandMap(this.addTechCooldown,[ServerCommands.TECH_ROCKET_PROBABILITY_MAXIMIZER]);
         this.cooldownClassToButtonIDs[ServerCommands.TECH_BATTLE_REP_BOT] = new CooldownCommandMap(this.addTechCooldown,[ServerCommands.TECH_BATTLE_REP_BOT]);
         this.cooldownClassToButtonIDs[ServerCommands.SKILL_SOLACE] = new CooldownCommandMap(this.addSkillDesignCooldown,[ServerCommands.SKILL_SOLACE]);
         this.cooldownClassToButtonIDs[ServerCommands.SKILL_DIMINISHER] = new CooldownCommandMap(this.addSkillDesignCooldown,[ServerCommands.SKILL_DIMINISHER]);
         this.cooldownClassToButtonIDs[ServerCommands.SKILL_SPECTRUM] = new CooldownCommandMap(this.addSkillDesignCooldown,[ServerCommands.SKILL_SPECTRUM]);
         this.cooldownClassToButtonIDs[ServerCommands.SKILL_SENTINEL] = new CooldownCommandMap(this.addSkillDesignCooldown,[ServerCommands.SKILL_SENTINEL]);
         this.cooldownClassToButtonIDs[ServerCommands.SKILL_VENOM] = new CooldownCommandMap(this.addSkillDesignCooldown,[ServerCommands.SKILL_VENOM]);
         this.cooldownClassToButtonIDs[ServerCommands.SPEED_BUFF_COOL_DOWN] = new CooldownCommandMap(this.addSkillDesignCooldown,[ServerCommands.SPEED_BUFF_COOL_DOWN]);
         this.cooldownClassToButtonIDs[ServerCommands.ADVANCED_JUMP_CPU_COOLDOWN] = new CooldownCommandMap(this.addCoolDown,[SuperActionButton.SELECT_CPU_JUMP_TARGET]);
      }
      
      public function assembleCommand(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.SERVER_MSG] = this.assembleLogMessage;
         this.delegateDict[ServerCommands.LOCALIZED_SERVER_MSG] = this.assembleLocalizedLogMessage;
         this.delegateDict[ServerCommands.EXTRAS_INFO] = this.assembleCpuHeroInfo;
         this.delegateDict[ServerCommands.SET_FLASH_SETTINGS] = this.assembleFlashSettings;
         this.delegateDict[ServerCommands.SHIELD_INFO] = this.assembleShieldInfo;
         this.delegateDict[ServerCommands.HITPOINTS_INFO] = this.assembleHitPointsInfo;
         this.delegateDict[ServerCommands.HEAL] = this.assembleHealInfo;
         this.delegateDict[ServerCommands.ROCKET_COOLDOWN_COMPLETED] = this.assembleRocketCooldownCompleted;
         this.delegateDict[ServerCommands.EXPERIENCE_POINTS_UPDATE] = this.assembleExperiencePointsUpdate;
         this.delegateDict[ServerCommands.CREDITS_UPDATE] = this.assembleCreditsUpdate;
         this.delegateDict[ServerCommands.LEVEL_UPDATE] = this.assembleLevelUpdate;
         this.delegateDict[ServerCommands.VELOCITY_UPDATE] = this.assembleVelocityUpdate;
         this.delegateDict[ServerCommands.CARGO_CHANGE] = this.assembleCargoChange;
         this.delegateDict[ServerCommands.AMMUNITION_CAPACITY_CHANGE] = this.assembleAmmunitionChange;
         this.delegateDict[ServerCommands.UPDATE_CONFIGURATION_COUNT] = this.assembleConfigurationCountUpdate;
         this.delegateDict[ServerCommands.INIT_UPDATE_BOOSTERS] = this.assembleInitBoostersUpdate;
         this.delegateDict[ServerCommands.RANKED_HUNT_EVENT_UPDATE] = this.assembleInitRankedHuntEventStatsUpdate;
         this.delegateDict[ServerCommands.SHIELD_SKILL_UPDATE] = this.assembleShieldSkillUpdate;
         this.delegateDict[ServerCommands.REPAIR_SKILL_UPDATE] = this.assembleRepairSkillUpdate;
         this.delegateDict[ServerCommands.FIREWORKS] = this.assembleFireworksInfo;
         this.delegateDict[ServerCommands.SET_COOLDOWN] = this.assembleCooldown;
         this.delegateDict[ServerCommands.COOLDOWN_COMPLETED] = this.assembleCooldownCompleted;
         this.delegateDict[ServerCommands.CPU_INFO] = this.assembleCPUInfo;
         this.delegateDict[ServerCommands.SET_REPAIR_DATA] = this.assembleRepairData;
         this.delegateDict[ServerCommands.SET_SPECIAL_OFFERS_NEEDED] = this.assembleSpecialOffersData;
         this.delegateDict[ServerCommands.SET_GS_IO_LOGGING] = this.assembleIOLogging;
         this.delegateDict[ServerCommands.SET_DISPLAY_CROSSHAIR] = this.assembleDisplayCrosshair;
         this.delegateDict[ServerCommands.SERVER_VERSION] = this.assembleServerVersion;
         this.delegateDict[ServerCommands.ADVANCED_JUMP_CPU] = this.assembleAdvancedJumpCpuCommands;
         this.delegateDict[ServerCommands.JUMP_VOUCHERS_UPDATE] = this.assembleJumpVouchersUpdate;
         this.delegateDict[ServerCommands.BOOTY_KEYS_UPDATE] = this.assembleBootyKeysUpdate;
      }
      
      private function assembleAdvancedJumpCpuCommands(param1:Array) : void
      {
         var _loc2_:String = String(param1[3]);
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         switch(_loc2_)
         {
            case ServerCommands.ADVANCED_JUMP_CPU_INIT:
               this.assembleAdvancedJumpCpuInitialization(param1);
               break;
            case ServerCommands.ADVANCED_JUMP_CPU_SELECTED_MAP_FEEDBACK:
               this.assembleAdvancedJumpCpuMapFeedback(param1);
               break;
            case ServerCommands.SET_STATUS:
               _loc3_ = int(param1[4]);
               _loc4_ = int(param1[5]);
               this.main.getGuiManager().startCastingCostTick(_loc3_,_loc4_);
         }
      }
      
      private function assembleAdvancedJumpCpuMapFeedback(param1:Array) : void
      {
         var _loc2_:int = 3;
         var _loc3_:int = int(param1[++_loc2_]);
         var _loc4_:int = int(param1[++_loc2_]);
         var _loc5_:int = int(param1[++_loc2_]);
         this.main.getGuiManager().setAvailableJump(_loc3_,_loc4_,_loc5_);
      }
      
      private function assembleAdvancedJumpCpuInitialization(param1:Array) : void
      {
         var _loc2_:String = "";
         var _loc3_:String = "-1";
         var _loc4_:String = "-2";
         var _loc5_:Array = [];
         var _loc6_:Array = [];
         var _loc7_:Array = [];
         var _loc8_:Array = param1.slice(4,param1.length);
         if(param1.length < 5)
         {
            this.main.getGuiManager().setAllSpacemapMapsBlocked();
            return;
         }
         var _loc9_:int = 0;
         while(_loc9_ < _loc8_.length)
         {
            _loc2_ = String(_loc8_[_loc9_]);
            if(_loc2_.split(";").length < 2)
            {
               if(_loc2_ == _loc3_)
               {
                  _loc5_ = this.getMapIDsList(_loc8_,_loc9_);
               }
               else if(_loc2_ == _loc4_)
               {
                  _loc6_ = this.getMapIDsList(_loc8_,_loc9_);
               }
               else
               {
                  _loc7_.push([_loc2_,this.getMapIDsList(_loc8_,_loc9_)]);
               }
            }
            _loc9_++;
         }
         this.main.getGuiManager().updateAdvancedSpacemapWindow(_loc7_,_loc5_,_loc6_);
      }
      
      private function getMapIDsList(param1:Array, param2:int) : Array
      {
         var _loc3_:Array = String(param1[param2 + 1]).split(";");
         _loc3_.pop();
         return _loc3_;
      }
      
      private function assembleIOLogging(param1:Array) : void
      {
         var _loc2_:Boolean = Boolean(int(param1[3]));
         this.main.getConnectionManager().isLoggingGameServerIO = _loc2_;
      }
      
      private function assembleDisplayCrosshair(param1:Array) : void
      {
         var _loc2_:Boolean = Boolean(int(param1[3]));
         if(Main.showCross && !_loc2_)
         {
            this.main.getGuiManager().hideCrosshair();
         }
         else if(!Main.showCross && _loc2_)
         {
            this.main.getGuiManager().showCrosshair();
         }
         Main.showCross = _loc2_;
      }
      
      private function assembleServerVersion(param1:Array) : void
      {
         Main.serverVersion = param1[3];
         this.main.getGuiManager().writeToLog("Server Version: " + Main.serverVersion);
      }
      
      private function assembleSpecialOffersData(param1:Array) : void
      {
         this.main.getGuiManager().prepareSpecialOffers();
      }
      
      private function assembleRepairData(param1:Array) : void
      {
         var _loc2_:String = param1[3];
         var _loc3_:String = StringUtil.trim(param1[4]);
         Hero.repairInfo = new RepairInfo(_loc2_,_loc3_);
      }
      
      private function assembleCPUInfo(param1:Array) : void
      {
         var _loc2_:CPUItem = null;
         var _loc3_:Boolean = false;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         switch(param1[3])
         {
            case ServerCommands.TRADE_DRONE_INFO:
               _loc4_ = int(param1[4]);
               _loc2_ = Hero.cpuItems[CPUItem.TYPE_HM7];
               if(_loc2_ != null)
               {
                  _loc2_.amount = _loc4_;
               }
               if(_loc4_ == 0)
               {
                  Hero.cpuItems[CPUItem.TYPE_HM7] = null;
               }
               break;
            case ServerCommands.JUMP_CPU:
               _loc5_ = int(param1[6]);
               _loc2_ = Hero.cpuItems[CPUItem.TYPE_JUMP];
               if(_loc2_ != null)
               {
                  _loc2_.amount = _loc5_;
               }
               if(_loc5_ == 0)
               {
                  Hero.cpuItems[CPUItem.TYPE_JUMP] = null;
               }
               break;
            case ServerCommands.DRONEREPAIR_CPU_INFO:
               _loc6_ = int(param1[4]);
               _loc2_ = Hero.cpuItems[CPUItem.TYPE_DRONE_REPAIR];
               if(_loc2_ != null)
               {
                  _loc2_.amount = _loc6_;
               }
               if(_loc6_ == 0)
               {
                  Hero.cpuItems[CPUItem.TYPE_DRONE_REPAIR] = null;
               }
               break;
            case ServerCommands.AIM_CPU_INFO:
               _loc7_ = int(param1[4]);
               _loc3_ = Boolean(int(param1[5]));
               _loc2_ = Hero.cpuItems[CPUItem.TYPE_AIM];
               if(_loc2_ != null)
               {
                  _loc2_.amount = _loc7_;
                  _loc2_.state = _loc3_;
               }
               break;
            case ServerCommands.CLOAK_CPU_INFO:
               _loc8_ = int(param1[4]);
               _loc2_ = Hero.cpuItems[CPUItem.TYPE_CLOAK];
               if(_loc2_ != null)
               {
                  _loc2_.amount = _loc8_;
               }
               if(_loc8_ == 0)
               {
                  Hero.cpuItems[CPUItem.TYPE_CLOAK] = null;
               }
               break;
            case ServerCommands.AUTO_ROCKET_CPU_INFO:
               _loc3_ = Boolean(int(param1[4]));
               _loc2_ = Hero.cpuItems[CPUItem.TYPE_AROL];
               if(_loc2_ != null)
               {
                  _loc2_.state = _loc3_;
               }
               break;
            case ServerCommands.ROCKETLAUNCHER_AUTO_CPU_INFO:
               _loc3_ = Boolean(int(param1[4]));
               _loc2_ = Hero.cpuItems[CPUItem.TYPE_RLLB];
               if(_loc2_ != null)
               {
                  _loc2_.state = _loc3_;
               }
         }
         this.main.getGuiManager().getMenuManager().updateAllCPUButtons();
         this.main.getGuiManager().getMenuManager().invalidateCPUButtons();
      }
      
      private function assembleCooldownCompleted(param1:Array) : void
      {
         switch(param1[3])
         {
            case ServerCommands.TECH_BATTLE_REP_BOT:
               this.killCooldownsForTechID(5);
               break;
            case ServerCommands.TECH_ENERGY_LEECH:
               this.killCooldownsForTechID(1);
               break;
            case ServerCommands.TECH_SHIELD_BACK_UP:
               this.killCooldownsForTechID(4);
               break;
            case ServerCommands.TECH_ELECTRIC_CHAIN_IMPULSE:
               this.killCooldownsForTechID(2);
               break;
            case ServerCommands.TECH_ROCKET_PROBABILITY_MAXIMIZER:
               this.killCooldownsForTechID(3);
         }
      }
      
      private function killCooldownsForTechID(param1:int) : void
      {
         var _loc5_:ActionButton = null;
         var _loc2_:GuiManager = this.main.getGuiManager();
         var _loc3_:MenuManager = _loc2_.getMenuManager();
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_.actionButtons.length)
         {
            _loc5_ = _loc3_.actionButtons[_loc4_];
            if(_loc5_.actionID == _loc3_.techIDToButtonID[param1])
            {
               _loc5_.cooldownCompleted();
            }
            _loc4_++;
         }
      }
      
      private function assembleCooldown(param1:Array) : void
      {
         var _loc2_:int = int(param1[4]);
         var _loc3_:CooldownCommandMap = this.cooldownClassToButtonIDs[param1[3]];
         if(_loc3_ != null)
         {
            _loc3_.callMappedFunction(_loc2_);
         }
      }
      
      private function addCoolDown(param1:int, param2:int) : void
      {
         this.main.getGuiManager().addCoolDown(param1,param2);
      }
      
      private function addTechCooldown(param1:String, param2:int) : void
      {
         var _loc3_:TechAssembly = null;
         if(_loc3_ == null)
         {
            _loc3_ = TechAssembly.getInstance();
         }
         _loc3_.assembleCooldownCommand(param1,param2);
      }
      
      private function addSkillDesignCooldown(param1:String, param2:int) : void
      {
         var _loc3_:SkillsAssembly = null;
         if(_loc3_ == null)
         {
            _loc3_ = SkillsAssembly.getInstance();
         }
         _loc3_.assembleCooldownCommand(param1,param2);
      }
      
      private function assembleFireworksInfo(param1:Array) : void
      {
         switch(param1[3])
         {
            case ServerCommands.FIREWORKS_LEFT:
               Hero.fireworksAmounts[FireworksManager.FIREWORK_SMALL] = int(param1[4]);
               Hero.fireworksAmounts[FireworksManager.FIREWORK_MEDIUM] = int(param1[5]);
               Hero.fireworksAmounts[FireworksManager.FIREWORK_LARGE] = int(param1[6]);
               this.main.getGuiManager().getMenuManager().updateFireworkButtonAmounts();
               break;
            case ServerCommands.FIREWORK_INSTALLATIONS_LEFT:
               Settings.fireworksLoaded = int(param1[4]);
               this.main.getGuiManager().getMenuManager().updateFireworkButtonAmounts();
         }
      }
      
      private function assembleRepairSkillUpdate(param1:Array) : void
      {
         Hero.repairSkillId = int(param1[3]);
      }
      
      private function assembleShieldSkillUpdate(param1:Array) : void
      {
         Hero.showSkinShieldRandomly = Boolean(int(param1[3]));
         Hero.minSkinShieldTwinkle = int(param1[4]);
         Hero.maxSkinShieldTwinkle = int(param1[5]);
         if(this.main.screenManager.map != null)
         {
            this.map = this.main.screenManager.map;
            this.hero = this.map.getShipManager().getHero();
            if(this.hero != null && this.hero.getShield() > 0)
            {
               this.hero.updateShieldTwinkle();
            }
         }
      }
      
      private function assembleInitBoostersUpdate(param1:Array) : void
      {
         var _loc2_:String = param1[3];
         var _loc3_:Array = _loc2_.split("/");
         this.main.getGuiManager().initUpdateBoosters(_loc3_);
      }
      
      private function assembleInitRankedHuntEventStatsUpdate(param1:Array) : void
      {
         var _loc6_:String = null;
         var _loc7_:String = null;
         var _loc8_:int = 0;
         var _loc9_:Array = null;
         var _loc10_:String = null;
         var _loc11_:int = 0;
         var _loc12_:String = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:String = param1[4];
         var _loc4_:int = int(param1[5]);
         if(Hero.rankedHuntingEventData == null)
         {
            Hero.rankedHuntingEventData = new RankedHuntingEventData();
         }
         if(Hero.rankedHuntingEventData.eventVOs == null)
         {
            Hero.rankedHuntingEventData.eventVOs = [];
         }
         var _loc5_:RankedHuntStatsVO = Hero.rankedHuntingEventData.eventVOs[_loc2_] as RankedHuntStatsVO;
         if(_loc5_ == null)
         {
            this.main.getConnectionManager().sendCommand(ClientCommands.REQUEST,[ServerCommands.RANKED_HUNT_EVENT_UPDATE,_loc2_]);
            _loc5_ = new RankedHuntStatsVO();
            Hero.rankedHuntingEventData.eventVOs[_loc2_] = _loc5_;
         }
         switch(_loc3_)
         {
            case ServerCommands.RANKED_HUNT_EVENT_STATS_CLASS_PLAYER:
               if(_loc5_.bountyPoints != 0)
               {
                  _loc5_.bountyDelta = _loc4_ - _loc5_.bountyPoints;
               }
               _loc5_.bountyPoints = _loc4_;
               if(_loc5_.bountyDelta > 0)
               {
                  if(_loc5_.bountyDelta == 1)
                  {
                     this.main.getGuiManager().writeToLog(BPLocale.getText("log_msg_npc_hunt_point_s"));
                  }
                  else
                  {
                     this.main.getGuiManager().writeToLog(BPLocale.getText("log_msg_npc_hunt_point_p").replace(/%AMOUNT%/,BPLocale.roundInteger(_loc5_.bountyDelta)));
                  }
               }
               _loc5_.clanBountyPointsInSync = false;
               break;
            case ServerCommands.RANKED_HUNT_EVENT_STATS_CLASS_CLAN:
               _loc5_.bountyDelta = 0;
               _loc5_.clanBountyPointsInSync = false;
               _loc5_.clanBountyPoints = _loc4_;
               _loc5_.clanBountyPointsInSync = true;
               break;
            case ServerCommands.RANKED_HUNT_EVENT_INFO:
               _loc6_ = param1[5];
               _loc7_ = param1[6];
               switch(_loc6_)
               {
                  case ServerCommands.RANKED_HUNT_EVENT_TARGET_MATCH_CLASS_NPC:
                     _loc5_ = Hero.rankedHuntingEventData.eventVOs[_loc2_] as RankedHuntStatsVO;
                     if(_loc5_ != null)
                     {
                        _loc5_.targetList = [_loc7_];
                        _loc8_ = int(_loc5_.targetList.length);
                        _loc9_ = InGameCatalog.instance.npc_names;
                        _loc10_ = "";
                        _loc11_ = 0;
                        while(_loc11_ < _loc8_)
                        {
                           _loc12_ = _loc9_[_loc5_.targetList[_loc11_]];
                           if(_loc12_ != null)
                           {
                              _loc10_ += ", " + _loc12_;
                           }
                           _loc11_++;
                        }
                        _loc10_ = _loc10_.substring(2);
                        _loc5_.targetVerbose = BPLocale.getText("q2_condition_KILL_NPCS").replace(/%npcs%/,_loc10_);
                     }
                     break;
                  case ServerCommands.RANKED_HUNT_EVENT_TARGET_MATCH_CLASS_PLAYER:
               }
         }
         Hero.rankedHuntingEventData.currentID = _loc2_;
         this.main.getGuiManager().initUpdateRankedHuntStats(_loc2_);
      }
      
      private function assembleConfigurationCountUpdate(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         Settings.selectedConfiguration = _loc2_;
         this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_1,SimpleElement.TYPE_CONFIGURATION);
      }
      
      private function assembleAmmunitionChange(param1:Array) : void
      {
         Hero.maxLaserCapacity = int(param1[3]);
         this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_1,SimpleElement.TYPE_LASER);
         Hero.maxRocketCapacity = int(param1[4]);
         this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_1,SimpleElement.TYPE_ROCKETS);
      }
      
      private function assembleCargoChange(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            this.hero = this.map.getShipManager().getHero();
            if(this.hero != null)
            {
               this.hero.setMaxCargo(_loc2_);
            }
         }
         this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_0,SimpleElement.TYPE_CARGO);
      }
      
      private function assembleVelocityUpdate(param1:Array) : void
      {
         var _loc3_:int = 0;
         var _loc2_:int = int(param1[3]);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            this.hero = this.map.getShipManager().getHero();
            if(this.hero != null)
            {
               _loc3_ = this.hero.getSpeed();
               this.hero.setSpeed(_loc2_);
               if(_loc3_ != _loc2_)
               {
                  this.map.getEventManager().updateShipMovement();
               }
            }
         }
      }
      
      private function assembleLevelUpdate(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         this.main.getGuiManager().logLevelUpdate(_loc2_,_loc3_);
         var _loc4_:LevelUpEffect = new LevelUpEffect(EffectIDList.LEVEL_UP_EFFECT,new EffectPattern(EffectIDList.LEVEL_UP_EFFECT,"levelUp"));
         this.effectsManager.addEffect(_loc4_,this.map.getShipManager().getHero(),EffectsManager.TIMEOUT_EFFECT);
         if(ExternalInterface.available)
         {
            ExternalInterface.call("clientEvent","userLevelUp");
         }
      }
      
      private function assembleJumpVouchersUpdate(param1:Array) : void
      {
         Hero.jumpVouchersAmount = int(param1[3]);
         var _loc2_:GuiManager = this.main.getGuiManager();
         _loc2_.updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_2,SimpleElement.TYPE_JUMP_VOUCHERS);
         _loc2_.getMenuManager().updateAllCPUButtons();
         _loc2_.getMenuManager().invalidateCPUButtons();
         _loc2_.updateJumpPriceLabel();
         _loc2_.updateJumpVoucherLabel();
      }
      
      private function assembleBootyKeysUpdate(param1:Array) : void
      {
         Hero.bootyKeysAmount = int(param1[3]);
         var _loc2_:GuiManager = this.main.getGuiManager();
         _loc2_.updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_3,SimpleElement.TYPE_BOOTY_KEYS);
      }
      
      private function assembleCreditsUpdate(param1:Array) : void
      {
         Hero.creditsAmount = Number(param1[3]);
         this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_3,SimpleElement.TYPE_CREDITS);
         Hero.uridiumAmount = parseFloat(param1[4]);
         this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_3,SimpleElement.TYPE_URIDIUM);
      }
      
      private function assembleExperiencePointsUpdate(param1:Array) : void
      {
         Hero.experiencePoints = int(param1[3]);
         this.main.getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_USER,SimpleContainer.CONTAINER_CLASS_HERO_INFO_2,SimpleElement.TYPE_EXPERIENCE);
      }
      
      private function assembleRocketCooldownCompleted(param1:Array) : void
      {
      }
      
      private function assembleHealInfo(param1:Array) : void
      {
         var _loc8_:int = 0;
         var _loc9_:MapObject = null;
         var _loc2_:int = 2;
         var _loc3_:int = int(param1[++_loc2_]);
         var _loc4_:int = int(param1[++_loc2_]);
         var _loc5_:String = param1[++_loc2_];
         var _loc6_:int = int(param1[++_loc2_]);
         var _loc7_:int = int(param1[++_loc2_]);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc9_ = this.map.getShipManager().getShip(_loc4_);
            if(_loc9_ != null)
            {
               if(_loc5_ == ServerCommands.STATS_TYPE_SHIELD)
               {
                  _loc9_.setShield(_loc6_);
                  _loc8_ = 3;
               }
               else if(_loc5_ == ServerCommands.STATS_TYPE_HITPOINTS)
               {
                  _loc9_.setHitpoints(_loc6_);
                  _loc8_ = 2;
               }
               _loc9_.updateHitpointShieldBar(true);
               if(Settings.displayHitpointBubbles)
               {
                  this.main.getGuiManager().showHitpointDelta(_loc9_,_loc7_,_loc8_,true);
               }
            }
         }
      }
      
      private function assembleHitPointsInfo(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            this.hero = this.map.getShipManager().getHero();
            if(this.hero != null)
            {
               if(Settings.JS_EVENT_TRACKING_ENABLED)
               {
                  if(this.hero.getHitpoints() > _loc3_ / 10 && _loc2_ <= _loc3_ / 10)
                  {
                     if(ExternalInterface.available)
                     {
                        ExternalInterface.call("clientEvent","userLowHP");
                     }
                  }
               }
               this.hero.setHitpoints(_loc2_);
               this.hero.setMaxHitpoints(_loc3_);
               this.hero.updateHitpointShieldBar(true);
            }
         }
      }
      
      private function assembleShieldInfo(param1:Array) : void
      {
         var _loc4_:Ship = null;
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            _loc4_ = this.map.getShipManager().getHero();
            if(_loc4_ != null)
            {
               _loc4_.setShieldChunk(_loc2_,_loc3_,true);
            }
         }
      }
      
      private function assembleFlashSettings(param1:Array) : void
      {
         this.settingsAssembly.assembleSettingsChunk(param1.splice(3));
      }
      
      private function assembleLocalizedLogMessage(param1:Array) : void
      {
         var _loc2_:String = null;
         var _loc3_:String = null;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         _loc2_ = param1[3];
         param1.splice(0,4);
         switch(param1.length)
         {
            case 0:
               this.main.getGuiManager().writeToLog(BPLocale.getText(_loc2_));
               break;
            case 1:
               _loc3_ = BPLocale.getText(param1[0]);
               if(_loc3_.length == 0)
               {
                  _loc3_ = param1[0];
               }
               this.main.getGuiManager().writeToLog(BPLocale.getText(_loc2_).replace("%!",_loc3_));
               break;
            default:
               _loc4_ = BPLocale.getText(_loc2_);
               _loc5_ = 0;
               while(_loc5_ < param1.length)
               {
                  _loc4_ = _loc4_.replace(param1[_loc5_],param1[_loc5_ + 1]);
                  _loc5_++;
                  _loc5_++;
               }
               this.main.getGuiManager().writeToLog(_loc4_);
         }
         if(_loc2_ == "jump_cpu_failed_attack" || _loc2_ == "jump_cpu_failed_attack2" || _loc2_ == "jump_cpu_failed_ontarget" || _loc2_ == "jump_cpu_failed_map" || _loc2_ == "jump_cpu_malfunction" || _loc2_ == "jump_cpu_failed_time" || _loc2_ == "jump_cpu_failed_attack" || _loc2_ == "jumpgate_failed_pvp_map" || _loc2_ == "jumpgate_failed_no_gate")
         {
            AudioManager.playSoundEffect(29);
         }
      }
      
      private function assembleLogMessage(param1:Array) : void
      {
         var _loc2_:String = param1[3];
         this.main.getGuiManager().writeToLog(_loc2_);
      }
      
      private function assembleCpuHeroInfo(param1:Array) : void
      {
         var _loc2_:String = null;
         var _loc3_:MenuButton = null;
         for(_loc2_ in this.cpuDict)
         {
            this.processCpuHeroInfo(param1,int(_loc2_));
         }
         _loc3_ = this.main.getGuiManager().getMenuManager().getMainMenu().getMenuButton(3);
         if(_loc3_.isSelected())
         {
            _loc3_.updateButtonsInPool();
         }
         _loc3_ = this.main.getGuiManager().getMenuManager().getMainMenu().getMenuButton(2);
         if(_loc3_.isSelected())
         {
            _loc3_.updateButtonsInPool();
         }
         var _loc4_:MenuManager = this.main.getGuiManager().getMenuManager();
         _loc4_.invalidateCPUButtons();
         _loc4_.updateExplosiveButtonAmmounts();
         _loc4_.getQuickMenu().updateCPUButtonsInSlotMenu();
         _loc4_.getQuickMenu().updateQuickmenu();
      }
      
      private function processCpuHeroInfo(param1:Array, param2:int) : void
      {
         var _loc5_:CPUItem = null;
         var _loc6_:SimpleWindow = null;
         var _loc3_:int = int(param1[param2]);
         var _loc4_:int = int(this.cpuDict[param2]);
         if(_loc3_ == 0 && _loc4_ != CPUItem.TYPE_ADVANCED_JUMP)
         {
            Hero.cpuItems[_loc4_] = null;
         }
         else
         {
            _loc5_ = new CPUItem(_loc4_);
            _loc5_.level = _loc3_;
            Hero.cpuItems[_loc4_] = _loc5_;
            if(_loc4_ == CPUItem.TYPE_ADVANCED_JUMP)
            {
               _loc6_ = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_SPACEMAP);
               if(_loc6_.isMaximized())
               {
                  _loc6_.minimize();
               }
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import flash.geom.Point;
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.collectable.Box;
   import net.bigpoint.darkorbit.collectable.CollectablePattern;
   import net.bigpoint.darkorbit.gui.BarStatus;
   import net.bigpoint.darkorbit.gui.CPUItem;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.WindowSetting;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.map.MinimapManager;
   import net.bigpoint.darkorbit.menu.QuickMenu;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.resolution.ResolutionPattern;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class SettingsAssembly extends BaseAssembly
   {
      
      private static var _instance:SettingsAssembly;
      
      private var delegateDict:Dictionary;
      
      private var main:Main;
      
      public function SettingsAssembly(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("SettingsAssembly is a Singleton and can only be accessed through SettingsAssembly.getInstance()");
         }
         this.main = _main;
         this.initDelegateDict();
      }
      
      public static function getInstance() : SettingsAssembly
      {
         if(_instance == null)
         {
            _instance = new SettingsAssembly(hidden);
         }
         return _instance;
      }
      
      private static function hidden() : void
      {
      }
      
      public function assembleSetting(param1:Array) : void
      {
         var _loc2_:String = param1[0];
         var _loc3_:String = param1[1];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](_loc3_);
         }
         else if(_loc2_.length > 15 && _loc2_.substring(0,15) == "WINDOW_SETTINGS")
         {
            this.assembleSetWindowProperties(_loc2_,_loc3_);
         }
      }
      
      public function assembleSettingsChunk(param1:Array) : void
      {
         Settings.autoBoost = Boolean(int(param1[0]));
         Settings.displayPlayerNames = Boolean(int(param1[4]));
         Settings.displayResources = Boolean(int(param1[7]));
         Settings.displayBonusBoxes = Boolean(int(param1[8]));
         Settings.displayHitpointBubbles = Boolean(int(param1[14]));
         Settings.playSFX = Boolean(int(param1[11]));
         Settings.playMusic = Boolean(int(param1[12]));
         Settings.selectedLaser = int(param1[15]);
         Settings.selectedRocket = int(param1[16]);
         Settings.displayChat = Boolean(int(param1[18]));
         Settings.displayFreeCargoBoxes = Boolean(int(param1[21]));
         Settings.displayNotFreeCargoBoxes = Boolean(int(param1[22]));
         Settings.autochangeAmmo = Boolean(int(param1[23]));
         var _loc2_:Map = _main.screenManager.map;
         if(!Settings.playMusic)
         {
            AudioManager.stopMusic();
         }
         else if(_loc2_ != null)
         {
            _loc2_.loadMusic();
         }
         if(_loc2_ != null)
         {
            _loc2_.getShipManager().updateLabelVisibility();
            _loc2_.getCollectableManager().setCollectableVisibility(CollectablePattern.TYPE_ORE,-1,Settings.displayResources);
            _loc2_.getCollectableManager().setCollectableVisibility(CollectablePattern.TYPE_BOX,Box.TYPE_BONUS_BOX,Settings.displayBonusBoxes);
            _loc2_.getCollectableManager().setCollectableVisibility(CollectablePattern.TYPE_BOX,Box.TYPE_FREE_CARGO_BOX,Settings.displayFreeCargoBoxes);
            _loc2_.getCollectableManager().setCollectableVisibility(CollectablePattern.TYPE_BOX,Box.TYPE_NOT_FREE_CARGO_BOX,Settings.displayNotFreeCargoBoxes);
         }
         _main.getGuiManager().createTopMenu();
         _main.getGuiManager().createSettingsWindow();
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.MAP_READY_HANDSHAKE] = this.assembleClientInitialized;
         this.delegateDict[ServerCommands.SET_SLOTMENU_POSITION + ServerCommands.SETTING_KEY_SEPERATOR + Settings.resolutionID] = this.assembleSetSlotMenuPosition;
         this.delegateDict[ServerCommands.SET_MAINMENU_POSITION + ServerCommands.SETTING_KEY_SEPERATOR + Settings.resolutionID] = this.assembleSetMainMenuPosition;
         this.delegateDict[ServerCommands.SET_SLOTMENU_ORDER + ServerCommands.SETTING_KEY_SEPERATOR + Settings.resolutionID] = this.assembleSetSlotMenuAlign;
         this.delegateDict[ServerCommands.SET_RESIZABLE_WINDOWS + ServerCommands.SETTING_KEY_SEPERATOR + Settings.resolutionID] = this.assembleSetWindowSizes;
         this.delegateDict[ServerCommands.SET_MINIMAP_SCALE + ServerCommands.SETTING_KEY_SEPERATOR + Settings.resolutionID] = this.assembleSetMinimapScale;
         this.delegateDict[ServerCommands.SET_BAR_STATUS] = this.assembleSetBarStatus;
         this.delegateDict[ServerCommands.SET_DISPLAY_HITPOINT_BUBBLES] = this.assembleSetDisplayHitpointBubbles;
         this.delegateDict[ServerCommands.SET_DISPLAY_PLAYER_NAMES] = this.assembleSetDisplayPlayerNames;
         this.delegateDict[ServerCommands.SET_PLAY_SFX] = this.assembleSetPlaySFX;
         this.delegateDict[ServerCommands.SET_PLAY_MUSIC] = this.assembleSetPlayMusic;
         this.delegateDict[ServerCommands.SET_DOUBLECLICK_ATTACK] = this.assembleSetDoubleClickAttack;
         this.delegateDict[ServerCommands.SET_QUICKSLOT_STOP_ATTACK] = this.assembleSetQuickSlotStopAttack;
         this.delegateDict[ServerCommands.SET_QUICKBAR_SLOT] = this.assembleSetQuickSlots;
         this.delegateDict[ServerCommands.SET_SHOW_DRONES] = this.assembleSetDisplayDrones;
         this.delegateDict[ServerCommands.SET_DISPLAY_NOTIFICATIONS] = this.assembleSetDisplayNotifications;
         this.delegateDict[ServerCommands.SET_DISPLAY_CHAT] = this.assembleSetDisplayChat;
         this.delegateDict[ServerCommands.SET_AUTO_REFINEMENT] = this.assembleSetAutoRefinement;
         this.delegateDict[ServerCommands.SET_AUTO_BOOST] = this.assembleSetAutoBoost;
         this.delegateDict[ServerCommands.SET_DISPLAY_ORE] = this.assembleSetDisplayOre;
         this.delegateDict[ServerCommands.SET_DISPLAY_BONUS_BOXES] = this.assembleSetDisplayBonusBoxes;
         this.delegateDict[ServerCommands.SET_DISPLAY_FREE_CARGO_BOXES] = this.assembleSetDisplayFreeCargoBoxes;
         this.delegateDict[ServerCommands.SET_DISPLAY_NOT_FREE_CARGO_BOXES] = this.assembleSetDisplayNotFreeCargoBoxes;
         this.delegateDict[ServerCommands.SET_AUTO_AMMO_CHANGE] = this.assembleSetAutoChangeAmmo;
         this.delegateDict[ServerCommands.SET_AUTO_START] = this.assembleSetAutostart;
         this.delegateDict[ServerCommands.SET_DISPLAY_WINDOW_BACKGROUND] = this.assembleSetDisplayWindowsBackground;
         this.delegateDict[ServerCommands.SET_ALWAYS_DRAGGABLE_WINDOWS] = this.assembleSetWindowsAlwaysDraggable;
         this.delegateDict[ServerCommands.SET_PRELOAD_USER_SHIPS] = this.assembleSetPreloadUserShips;
         this.delegateDict[ServerCommands.SET_RESOLUTION] = this.assembleSetResolution;
         this.delegateDict[ServerCommands.SET_QUALITY_PRESETTING] = this.assembleSetQualityPresetting;
         this.delegateDict[ServerCommands.SET_QUALITY_CUSTOMIZED] = this.assembleSetQualityCustomized;
         this.delegateDict[ServerCommands.SET_QUALITY_BACKGROUND] = this.assembleSetQualityBackground;
         this.delegateDict[ServerCommands.SET_QUALITY_POIZONE] = this.assembleSetQualityPoizone;
         this.delegateDict[ServerCommands.SET_QUALITY_SHIP] = this.assembleSetQualityShip;
         this.delegateDict[ServerCommands.SET_QUALITY_ENGINE] = this.assembleSetQualityEngine;
         this.delegateDict[ServerCommands.SET_QUALITY_COLLECTABLE] = this.assembleSetQualityCollectable;
         this.delegateDict[ServerCommands.SET_QUALITY_ATTACK] = this.assembleSetQualityAttack;
         this.delegateDict[ServerCommands.SET_QUALITY_EFFECT] = this.assembleSetQualityEffect;
         this.delegateDict[ServerCommands.SET_QUALITY_EXPLOSION] = this.assembleSetQualityExplosion;
         this.delegateDict[ServerCommands.SET_SELECTED_BATTERY] = this.assembleSetSelectedBattery;
         this.delegateDict[ServerCommands.SET_SELECTED_ROCKET] = this.assembleSetSelectedRocket;
      }
      
      private function assembleSetResolution(param1:String) : void
      {
         Settings.resolutionID = int(param1);
      }
      
      private function assembleSetPreloadUserShips(param1:String) : void
      {
         Settings.preloadUserShips = Boolean(int(param1));
      }
      
      private function assembleSetQualityPresetting(param1:String) : void
      {
         Settings.qualityPresetting = int(param1);
      }
      
      private function assembleSetQualityCustomized(param1:String) : void
      {
         Settings.qualityCustomized = Boolean(int(param1));
      }
      
      private function assembleSetQualityBackground(param1:String) : void
      {
         var _loc2_:int = Settings.qualityBackground;
         Settings.qualityBackground = int(param1);
         var _loc3_:Map = _main.screenManager.map;
         if(_loc3_ != null)
         {
            _loc3_.getBackgroundManager().updateBackgroundQuality(_loc2_);
            _loc3_.getPlanetManager().updatePlanetQuality(_loc2_);
            _loc3_.getLensflareManager().updateLensflareQuality(_loc2_);
         }
      }
      
      private function assembleSetQualityPoizone(param1:String) : void
      {
         Settings.qualityPoizone = int(param1);
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc2_.poiManager.updatePOIZoneVisualStyle();
         }
      }
      
      private function assembleSetQualityShip(param1:String) : void
      {
         Settings.qualityShip = int(param1);
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc2_.getShipManager().updateShipVisualStyle();
         }
      }
      
      private function assembleSetQualityEngine(param1:String) : void
      {
         Settings.qualityEngine = int(param1);
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc2_.getShipManager().updateEngineSmokeTimers();
         }
      }
      
      private function assembleSetQualityCollectable(param1:String) : void
      {
         Settings.qualityCollectable = int(param1);
      }
      
      private function assembleSetQualityAttack(param1:String) : void
      {
         Settings.qualityAttack = int(param1);
      }
      
      private function assembleSetQualityEffect(param1:String) : void
      {
         Settings.qualityEffect = int(param1);
      }
      
      private function assembleSetQualityExplosion(param1:String) : void
      {
         Settings.qualityExplosion = int(param1);
      }
      
      private function assembleClientInitialized(param1:Array) : void
      {
         this.main.getGuiManager().updateSpacemapWindow();
         if(Hero.cpuItems[CPUItem.TYPE_ADVANCED_JUMP] as CPUItem != null)
         {
            this.main.getGuiManager().requestSpacemapWindowServerUpdate();
         }
      }
      
      private function assembleSetQuickSlotStopAttack(param1:String) : void
      {
         Settings.quickSlotStopAttack = Boolean(int(param1));
      }
      
      private function assembleSetDisplayDrones(param1:String) : void
      {
         Settings.displayDrones = Boolean(int(param1));
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ != null)
         {
            if(!Settings.displayDrones)
            {
               _loc2_.getDroneManager().removeAllDrones();
            }
         }
      }
      
      private function assembleSetAutostart(param1:String) : void
      {
         Settings.autoStartEnabled = Boolean(int(param1));
      }
      
      private function assembleSetDisplayWindowsBackground(param1:String) : void
      {
         var _loc3_:SimpleWindow = null;
         Settings.showWindowsBackground = Boolean(int(param1));
         var _loc2_:Array = _main.getGuiManager().getWindows();
         for each(_loc3_ in _loc2_)
         {
            if(Settings.showWindowsBackground)
            {
               _loc3_.removeListeners();
               _loc3_.fadeInWindow();
            }
            else
            {
               _loc3_.setListeners();
               _loc3_.fadeOutWindow();
            }
         }
      }
      
      private function assembleSetWindowsAlwaysDraggable(param1:String) : void
      {
         var _loc3_:SimpleWindow = null;
         Settings.dragWindowsAlways = Boolean(int(param1));
         var _loc2_:Array = _main.getGuiManager().getWindows();
         for each(_loc3_ in _loc2_)
         {
            _loc3_.updateDraggerButtonMode();
         }
      }
      
      private function assembleSetQuickSlots(param1:String) : void
      {
         if(param1.length > 0)
         {
            QuickMenu.predefinedActions = param1.split(ServerCommands.SETTING_PROPERTY_SEPERATOR);
         }
      }
      
      private function assembleSetDoubleClickAttack(param1:String) : void
      {
         Settings.doubleclickAttackEnabled = Boolean(int(param1));
      }
      
      private function assembleSetAutoRefinement(param1:String) : void
      {
         Settings.autoRefinement = Boolean(int(param1));
      }
      
      private function assembleSetMainMenuPosition(param1:String) : void
      {
         var _loc2_:Array = param1.split(ServerCommands.SETTING_PROPERTY_SEPERATOR);
         var _loc3_:ResolutionPattern = PatternManager.resolutionPatterns[Settings.resolutionID];
         _loc3_.setMainMenuPosition(new Point(int(_loc2_[0]),int(_loc2_[1])));
      }
      
      private function assembleSetSlotMenuPosition(param1:String) : void
      {
         var _loc2_:Array = param1.split(ServerCommands.SETTING_PROPERTY_SEPERATOR);
         var _loc3_:ResolutionPattern = PatternManager.resolutionPatterns[Settings.resolutionID];
         _loc3_.setSlotMenuPosition(new Point(int(_loc2_[0]),int(_loc2_[1])));
      }
      
      private function assembleSetSlotMenuAlign(param1:String) : void
      {
         QuickMenu.slotOrder = int(param1);
      }
      
      private function assembleSetBarStatus(param1:String) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc2_:Array = param1.split(ServerCommands.SETTING_PROPERTY_SEPERATOR);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_.length)
         {
            _loc4_ = int(_loc2_[_loc3_]);
            _loc5_ = int(_loc2_[_loc3_ + 1]);
            _main.getGuiManager().addBarStatus(new BarStatus(_loc4_,_loc5_));
            _loc3_ += 2;
         }
      }
      
      private function assembleSetMinimapScale(param1:String) : void
      {
         MinimapManager.scaleFactor = int(param1);
      }
      
      private function assembleSetWindowSizes(param1:String) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc2_:Array = param1.split(ServerCommands.SETTING_PROPERTY_SEPERATOR);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_.length)
         {
            _loc4_ = int(_loc2_[_loc3_]);
            _loc5_ = int(_loc2_[_loc3_ + 1]);
            _loc6_ = int(_loc2_[_loc3_ + 2]);
            GuiManager.resizableWindowSizes[_loc4_] = new Point(_loc5_,_loc6_);
            _loc3_ += 3;
         }
      }
      
      private function assembleSetAutoChangeAmmo(param1:String) : void
      {
         Settings.autochangeAmmo = Boolean(int(param1));
      }
      
      private function assembleSetDisplayNotFreeCargoBoxes(param1:String) : void
      {
         Settings.displayNotFreeCargoBoxes = Boolean(int(param1));
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc2_.getCollectableManager().setCollectableVisibility(CollectablePattern.TYPE_BOX,Box.TYPE_NOT_FREE_CARGO_BOX,Settings.displayNotFreeCargoBoxes);
         }
      }
      
      private function assembleSetDisplayFreeCargoBoxes(param1:String) : void
      {
         Settings.displayFreeCargoBoxes = Boolean(int(param1));
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc2_.getCollectableManager().setCollectableVisibility(CollectablePattern.TYPE_BOX,Box.TYPE_FREE_CARGO_BOX,Settings.displayFreeCargoBoxes);
         }
      }
      
      private function assembleSetSelectedRocket(param1:String) : void
      {
         Settings.selectedRocket = int(param1);
      }
      
      private function assembleSetDisplayNotifications(param1:String) : void
      {
         Settings.displayNotifications = Boolean(int(param1));
         if(Settings.displayNotifications)
         {
            _main.getProfiler().start();
         }
      }
      
      private function assembleSetDisplayChat(param1:String) : void
      {
         Settings.displayChat = Boolean(int(param1));
      }
      
      private function assembleSetSelectedBattery(param1:String) : void
      {
         Settings.selectedLaser = int(param1);
      }
      
      private function assembleSetPlayMusic(param1:String) : void
      {
         Settings.playMusic = Boolean(int(param1));
         var _loc2_:Map = _main.screenManager.map;
         if(!Settings.playMusic)
         {
            AudioManager.stopMusic();
         }
         else if(_loc2_ != null)
         {
            _loc2_.loadMusic();
         }
      }
      
      private function assembleSetPlaySFX(param1:String) : void
      {
         Settings.playSFX = Boolean(int(param1));
      }
      
      private function assembleSetAutoBoost(param1:String) : void
      {
         Settings.autoBoost = Boolean(int(param1));
      }
      
      private function assembleSetDisplayPlayerNames(param1:String) : void
      {
         Settings.displayPlayerNames = Boolean(int(param1));
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc2_.getShipManager().updateLabelVisibility();
         }
      }
      
      private function assembleSetDisplayOre(param1:String) : void
      {
         Settings.displayResources = Boolean(int(param1));
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc2_.getCollectableManager().setCollectableVisibility(CollectablePattern.TYPE_ORE,-1,Settings.displayResources);
         }
      }
      
      private function assembleSetDisplayBonusBoxes(param1:String) : void
      {
         Settings.displayBonusBoxes = Boolean(int(param1));
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ != null)
         {
            _loc2_.getCollectableManager().setCollectableVisibility(CollectablePattern.TYPE_BOX,Box.TYPE_BONUS_BOX,Settings.displayBonusBoxes);
         }
      }
      
      private function assembleSetWindowProperties(param1:String, param2:String) : void
      {
         var _loc5_:Array = null;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:int = 0;
         var _loc10_:Boolean = false;
         var _loc11_:WindowSetting = null;
         var _loc3_:Array = param1.split(ServerCommands.SETTING_KEY_SEPERATOR);
         var _loc4_:int = int(_loc3_[1]);
         if(Settings.resolutionID == _loc4_)
         {
            _loc5_ = param2.split(ServerCommands.SETTING_PROPERTY_SEPERATOR);
            if(_loc5_.length > 3)
            {
               _loc6_ = 0;
               while(_loc6_ < _loc5_.length)
               {
                  _loc7_ = int(_loc5_[_loc6_]);
                  _loc8_ = int(_loc5_[_loc6_ + 1]);
                  _loc9_ = int(_loc5_[_loc6_ + 2]);
                  _loc10_ = Boolean(int(_loc5_[_loc6_ + 3]));
                  _loc11_ = new WindowSetting(_loc7_,_loc8_,_loc9_,_loc10_);
                  _main.getGuiManager().addWindowSetting(_loc11_);
                  _loc6_ += 4;
               }
            }
         }
      }
      
      private function assembleSetDisplayHitpointBubbles(param1:String) : void
      {
         Settings.displayHitpointBubbles = Boolean(int(param1));
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.menu.MenuManager;
   import net.bigpoint.darkorbit.net.models.SkillDesignsModel;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignAbilities;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignItem;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignNames;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.effects.EffectBase;
   import net.bigpoint.darkorbit.ship.effects.EffectsManager;
   import net.bigpoint.darkorbit.ship.effects.SkillEffect;
   
   public class SkillsAssembly extends BaseAssembly
   {
      
      private static var instance:SkillsAssembly;
      
      private var map:Map;
      
      private var delegateDict:Dictionary;
      
      private var skillDesignsModel:SkillDesignsModel;
      
      private var guiManager:GuiManager;
      
      private var menuManager:MenuManager;
      
      private var effectsManager:EffectsManager = EffectsManager.getInstance();
      
      private var main:Main;
      
      public function SkillsAssembly(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("SkillsAssembly is a Singleton and can only be accessed through SkillsAssembly.getInstance()");
         }
         this.main = _main;
         this.skillDesignsModel = new SkillDesignsModel(this.main);
         this.guiManager = this.main.getGuiManager();
         this.menuManager = this.guiManager.getMenuManager();
         this.guiManager.skillDesignsModel = this.skillDesignsModel;
         this.initDelegateDict();
      }
      
      public static function getInstance() : SkillsAssembly
      {
         if(instance == null)
         {
            instance = new SkillsAssembly(hidden);
         }
         return instance;
      }
      
      private static function hidden() : void
      {
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.SET_STATUS] = this.assembleSetStatusCommand;
         this.delegateDict[ServerCommands.SKILLS_ACTIVATE] = this.assembleActivateCommand;
         this.delegateDict[ServerCommands.SKILLS_DEACTIVATE] = this.assembleDeactivateCommand;
         this.delegateDict[ServerCommands.REMOVE_SKILL_FX] = this.assembleRemoveCommand;
      }
      
      public function assembleSubCommand(param1:Array) : void
      {
         var _loc2_:String = param1[3];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      public function assembleCommand(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      private function assembleRemoveCommand(param1:Array) : void
      {
         var _loc2_:int = int(param1[3]);
         var _loc3_:int = int(param1[4]);
         this.main.screenManager.map.getShipManager().getShip(_loc3_).getShipDecorator().stopAnimation(SkillDesignAbilities.getSkillAbilityBySkillID(_loc2_));
      }
      
      private function assembleSetStatusCommand(param1:Array) : void
      {
         var _loc2_:SkillDesignItem = null;
         _loc2_ = this.skillDesignsModel.skillDesigns[param1[3]];
         var _loc3_:int = int(param1[3]);
         var _loc4_:int = int(param1[4]);
         var _loc5_:int = int(param1[5]);
         if(_loc2_ == null)
         {
            return;
         }
         var _loc6_:MenuManager = this.guiManager.getMenuManager();
         if(_loc3_ == 0 && _loc4_ == 0)
         {
            this.skillDesignsModel.unequipAllSkills();
            this.menuManager.updateSelectedMenu();
            this.menuManager.updateTechs();
            _loc6_.updateSelectedMenu();
            _loc6_.updateTechs();
            return;
         }
         this.skillDesignsModel.unequipAllSkills();
         _loc2_.setEquipped();
         _loc2_.status = _loc4_;
         _loc2_.secondsLeft = _loc5_;
         if(this.menuManager != null)
         {
            this.menuManager.updateSelectedMenu();
            this.menuManager.updateTechs();
         }
         if(_loc6_ != null)
         {
            _loc6_.updateSelectedMenu();
            _loc6_.updateTechs();
         }
         var _loc7_:String = SkillDesignAbilities.getSkillAbilityBySkillID(_loc2_.type);
         if(_loc7_ != null && this.main.screenManager.map != null)
         {
         }
      }
      
      private function assembleActivateCommand(param1:Array) : void
      {
         var _loc8_:EffectBase = null;
         var _loc9_:MapObject = null;
         var _loc10_:int = 0;
         var _loc2_:int = int(param1[4]);
         var _loc3_:int = int(param1[5]);
         var _loc4_:Array = param1.splice(6,param1.length);
         var _loc5_:* = param1.length > 5;
         var _loc6_:Boolean = false;
         if(_loc3_ == Hero.userID)
         {
            _loc6_ = true;
            this.skillDesignsModel.skillDesigns[_loc2_].status = SkillDesignItem.STATE_ACTIVE;
            this.skillDesignsModel.logHeroMessage(_loc2_,true);
         }
         else
         {
            this.skillDesignsModel.logNonHeroMessage(_loc2_,true);
         }
         var _loc7_:MapObject = this.main.screenManager.map.getShipManager().getShip(_loc3_);
         if(_loc7_ != null)
         {
            if(!this.effectsManager.doesEffectExistOn(_loc7_,SkillDesignNames.getEffectIDByCode(_loc2_)))
            {
               this.createEffectInEffectsManagerFor(_loc7_,_loc2_);
            }
            if(_loc2_ != SkillDesignNames.SHIP_SKILL_SPECTRUM)
            {
               _loc8_ = this.effectsManager.getEffectFromEntity(_loc7_,SkillDesignNames.getEffectIDByCode(_loc2_));
               if(_loc8_.pattern.resKey == SkillDesignAbilities.SHIP_INSTANT_HEAL_NAME)
               {
                  SkillEffect(_loc8_).startSolaceInstantAnimation();
               }
               else
               {
                  _loc8_.start();
               }
            }
         }
         if(_loc5_)
         {
            _loc10_ = 0;
            while(_loc10_ < _loc4_.length)
            {
               _loc9_ = this.main.screenManager.map.getShipManager().getShip(int(_loc4_[_loc10_]));
               if(_loc9_ != null)
               {
                  if(!this.effectsManager.doesEffectExistOn(_loc9_,SkillDesignNames.getEffectIDByCode(_loc2_)))
                  {
                     this.createEffectInEffectsManagerFor(_loc9_,_loc2_);
                  }
                  _loc8_ = this.effectsManager.getEffectFromEntity(_loc9_,SkillDesignNames.getEffectIDByCode(_loc2_));
                  if(_loc8_.pattern.resKey == SkillDesignAbilities.SHIP_INSTANT_HEAL_NAME)
                  {
                     SkillEffect(_loc8_).startSolaceInstantAnimation();
                  }
                  else
                  {
                     _loc8_.start();
                  }
               }
               _loc10_++;
            }
         }
         this.main.getGuiManager().getMenuManager().updateTechs();
      }
      
      private function createEffectInEffectsManagerFor(param1:MapObject, param2:int) : void
      {
         var _loc3_:String = SkillDesignAbilities.getSkillAbilityBySkillID(param2);
         var _loc4_:EffectPattern = new EffectPattern(param2,_loc3_);
         var _loc5_:SkillEffect = new SkillEffect(SkillDesignNames.getEffectIDByCode(param2),_loc4_,param1);
         this.effectsManager.addEffect(_loc5_,param1,EffectsManager.ROTATION_DEPENDANT_EFFECT);
      }
      
      private function assembleDeactivateCommand(param1:Array) : void
      {
         var _loc8_:EffectBase = null;
         var _loc9_:MapObject = null;
         var _loc10_:int = 0;
         var _loc2_:int = int(param1[4]);
         var _loc3_:int = int(param1[5]);
         var _loc4_:Array = param1.splice(6,param1.length);
         var _loc5_:* = param1.length > 5;
         var _loc6_:Boolean = false;
         if(_loc3_ == Hero.userID)
         {
            _loc6_ = true;
            SkillDesignItem(this.skillDesignsModel.skillDesigns[_loc2_]).status = SkillDesignItem.STATE_READY;
            this.skillDesignsModel.logHeroMessage(_loc2_,false);
         }
         else
         {
            this.skillDesignsModel.logNonHeroMessage(_loc2_,false);
         }
         var _loc7_:MapObject = this.main.screenManager.map.getShipManager().getShip(_loc3_);
         if(_loc7_ != null)
         {
            _loc7_.getShipDecorator().stopAnimation(SkillDesignAbilities.getSkillAbilityBySkillID(_loc2_));
            _loc8_ = this.effectsManager.getEffectFromEntity(_loc7_,SkillDesignNames.getEffectIDByCode(_loc2_));
            _loc8_.stop();
         }
         if(_loc5_)
         {
            _loc10_ = 0;
            while(_loc10_ < _loc4_.length)
            {
               _loc9_ = this.main.screenManager.map.getShipManager().getShip(int(_loc4_[_loc10_]));
               if(_loc9_ != null)
               {
                  _loc8_ = this.effectsManager.getEffectFromEntity(_loc9_,SkillDesignNames.getEffectIDByCode(_loc2_));
                  _loc8_.stop();
               }
               _loc10_++;
            }
         }
         if(this.menuManager != null)
         {
            this.menuManager.updateTechs();
         }
      }
      
      public function assembleCooldownCommand(param1:String, param2:int) : void
      {
         var _loc3_:int = SkillDesignNames.getTypeByCode(param1);
         if(_loc3_ > 0)
         {
            this.skillDesignsModel.setCooldown(_loc3_,param2);
         }
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.net.models.TechModel;
   import net.bigpoint.darkorbit.net.models.techs.TechItem;
   import net.bigpoint.darkorbit.net.models.techs.TechNames;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.effects.BattleRepBotTechEffect;
   import net.bigpoint.darkorbit.ship.effects.EffectIDList;
   import net.bigpoint.darkorbit.ship.effects.EffectsManager;
   import net.bigpoint.darkorbit.ship.effects.EnergyLeechTechEffect;
   import net.bigpoint.darkorbit.ship.effects.ShieldBackupTechEffect;
   
   public class TechAssembly extends BaseAssembly
   {
      
      private static var instance:TechAssembly;
      
      private static const TECH_ATTRIBUTES_COUNT:int = 3;
      
      private var map:Map;
      
      private var delegateDict:Dictionary;
      
      private var techModel:TechModel;
      
      private var main:Main;
      
      private var effectsManager:EffectsManager = EffectsManager.getInstance();
      
      public function TechAssembly(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("TechAssembly is a Singleton and can only be accessed through TechAssembly.getInstance()");
         }
         this.main = _main;
         this.techModel = new TechModel(this.main);
         this.main.getGuiManager().techModel = this.techModel;
         this.initDelegateDict();
      }
      
      public static function getInstance() : TechAssembly
      {
         if(instance == null)
         {
            instance = new TechAssembly(hidden);
         }
         return instance;
      }
      
      private static function hidden() : void
      {
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.SET_STATUS] = this.assembleSetStatusCommand;
         this.delegateDict[ServerCommands.CHAIN_BOLT] = this.assembleChainBoltCommand;
         this.delegateDict[ServerCommands.TECHS_ACTIVATE] = this.assembleActivateCommand;
         this.delegateDict[ServerCommands.TECHS_DEACTIVATE] = this.assembleDeactivateCommand;
      }
      
      public function assembleCommand(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      public function assembleCooldownCommand(param1:String, param2:int) : void
      {
         var _loc3_:int = TechNames.getTypeByCode(param1);
         if(_loc3_ > 0)
         {
            this.techModel.setCooldown(_loc3_,param2);
         }
      }
      
      public function assembleSubCommand(param1:Array) : void
      {
         var _loc2_:String = param1[3];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      private function assembleChainBoltCommand(param1:Array) : void
      {
         var _loc2_:int = int(param1[4]);
         var _loc3_:Array = [int(param1[5])];
         var _loc4_:int = 6;
         while(_loc4_ < param1.length)
         {
            if(param1[_loc4_] != undefined)
            {
               _loc3_.push(int(param1[_loc4_]));
            }
            _loc4_++;
         }
         this.map = this.main.screenManager.map;
         if(this.map != null)
         {
            this.map.getCombatManager().addChainBoltAttack(_loc2_,_loc3_);
         }
      }
      
      private function assembleDeactivateCommand(param1:Array) : void
      {
         this.map = this.main.screenManager.map;
         var _loc2_:String = param1[4];
         var _loc3_:int = int(param1[5]);
         var _loc4_:MapObject = this.map.getShipManager().getShip(_loc3_);
         if(_loc4_ == null)
         {
            return;
         }
         switch(_loc2_)
         {
            case ServerCommands.TECH_ENERGY_LEECH:
               _loc4_.energyLeechActive = false;
               _loc4_.toggleEnergyLeechEffect(0);
               this.effectsManager.removeEffectByIdFromEntity(_loc4_,EffectIDList.TECH_ENERGY_LEECH_EFFECT);
               break;
            case ServerCommands.TECH_BATTLE_REP_BOT:
               this.effectsManager.removeEffectByIdFromEntity(_loc4_,EffectIDList.TECH_BATTLE_REP_BOT_EFFECT);
         }
      }
      
      private function assembleActivateCommand(param1:Array) : void
      {
         var _loc5_:ShieldBackupTechEffect = null;
         var _loc6_:EnergyLeechTechEffect = null;
         var _loc7_:BattleRepBotTechEffect = null;
         this.map = this.main.screenManager.map;
         var _loc2_:String = param1[4];
         var _loc3_:int = int(param1[5]);
         var _loc4_:MapObject = this.map.getShipManager().getShip(_loc3_);
         if(_loc4_ == null)
         {
            return;
         }
         switch(_loc2_)
         {
            case ServerCommands.TECH_SHIELD_BACK_UP:
               _loc5_ = new ShieldBackupTechEffect(EffectIDList.TECH_SHIELD_BACKUP_EFFECT,new EffectPattern(EffectIDList.TECH_SHIELD_BACKUP_EFFECT,"shield1"));
               _loc5_.resizeMC(Math.max(_loc4_.shipClip.height,_loc4_.shipClip.width) * 0.5 / 65);
               this.effectsManager.addEffect(_loc5_,_loc4_,EffectsManager.TIMEOUT_EFFECT);
               break;
            case ServerCommands.TECH_ENERGY_LEECH:
               _loc4_.energyLeechActive = true;
               _loc6_ = new EnergyLeechTechEffect(EffectIDList.TECH_ENERGY_LEECH_EFFECT,new EffectPattern(EffectIDList.TECH_ENERGY_LEECH_EFFECT,"ela0"));
               this.effectsManager.addEffect(_loc6_,_loc4_,EffectsManager.NORMAL_EFFECT);
               break;
            case ServerCommands.TECH_BATTLE_REP_BOT:
               _loc7_ = new BattleRepBotTechEffect(EffectIDList.TECH_BATTLE_REP_BOT_EFFECT,new EffectPattern(EffectIDList.TECH_BATTLE_REP_BOT_EFFECT,"battleRepairRobot1"));
               this.effectsManager.addEffect(_loc7_,_loc4_,EffectsManager.NORMAL_EFFECT);
         }
      }
      
      private function assembleSetStatusCommand(param1:Array) : void
      {
         var _loc3_:TechItem = null;
         var _loc2_:Array = [];
         var _loc4_:int = 1;
         var _loc5_:int = 3;
         while(_loc5_ < param1.length)
         {
            _loc3_ = new TechItem();
            _loc3_.type = _loc4_;
            if(int(param1[_loc5_] == 4))
            {
               _loc3_.status = 0;
            }
            else
            {
               _loc3_.status = int(param1[_loc5_]);
            }
            _loc3_.amount = int(param1[_loc5_ + 1]);
            _loc3_.secondsLeft = int(param1[_loc5_ + 2]);
            _loc3_.updateName();
            _loc2_.push(_loc3_);
            _loc4_++;
            _loc5_ += TECH_ATTRIBUTES_COUNT;
         }
         this.techModel.setItems(_loc2_);
      }
   }
}

package net.bigpoint.darkorbit.net
{
   import com.greensock.TweenLite;
   import flash.display.Sprite;
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.elements.VideoElement;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.Ship;
   
   public class UserInterfaceAssembly extends BaseAssembly
   {
      
      private static var _instance:UserInterfaceAssembly;
      
      private var delegateDict:Dictionary;
      
      private var lockedShip:MapObject;
      
      private var main:Main;
      
      public function UserInterfaceAssembly(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("UserInterfaceAssembly is a Singleton and can only be accessed through UserInterfaceAssembly.getInstance()");
         }
         this.main = _main;
         this.initDelegateDict();
      }
      
      public static function getInstance() : UserInterfaceAssembly
      {
         if(_instance == null)
         {
            _instance = new UserInterfaceAssembly(hidden);
         }
         return _instance;
      }
      
      private static function hidden() : void
      {
      }
      
      private function initDelegateDict() : void
      {
         this.delegateDict = new Dictionary();
         this.delegateDict[ServerCommands.CAMERA] = this.assembleCameraCommand;
         this.delegateDict[ServerCommands.MINIMAP] = this.assembleMinimapCommand;
         this.delegateDict[ServerCommands.ARROW] = this.assembleArrowCommand;
         this.delegateDict[ServerCommands.WINDOW] = this.assembleWindowCommand;
         this.delegateDict[ServerCommands.BUTTON] = this.assembleButtonCommand;
         this.delegateDict[ServerCommands.VIDEO_WINDOW] = this.assembleCommanderVideoWindowCommand;
         this.delegateDict[ServerCommands.SET_MENUBUTTON_ACCESS] = this.assembleMenuButtonAccessCommand;
         this.delegateDict[ServerCommands.SET_MENU_VISIBILITY] = this.assembleMenuVisibilityCommand;
         this.delegateDict[ServerCommands.CREATE_WINDOW] = this.assembleCreateWindowCommand;
         this.delegateDict[ServerCommands.DESTROY_WINDOW] = this.assembleDestroyWindowCommand;
         this.delegateDict[ServerCommands.ASSIST_WINDOW] = this.assembleHelpmovieWindowCommand;
      }
      
      public function assembleCommand(param1:Array) : void
      {
         var _loc2_:String = param1[2];
         if(this.delegateDict[_loc2_] != null)
         {
            this.delegateDict[_loc2_](param1);
         }
      }
      
      private function assembleHelpmovieWindowCommand(param1:Array) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:String = null;
         var _loc7_:Boolean = false;
         var _loc8_:Array = null;
         var _loc9_:int = 0;
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ == null)
         {
            return;
         }
         var _loc3_:GuiManager = _main.getGuiManager();
         switch(param1[3])
         {
            case ServerCommands.CREATE_WINDOW:
               _loc4_ = int(param1[4]);
               _loc5_ = int(param1[5]);
               _loc6_ = param1[6];
               _loc7_ = Boolean(int(param1[7]));
               _loc8_ = [];
               _loc9_ = 8;
               while(_loc9_ < param1.length)
               {
                  _loc8_.push(param1[_loc9_]);
                  _loc9_++;
               }
               _loc3_.createVideoWindow(_loc8_,_loc4_,_loc5_,VideoElement.CLASS_HELPMOVIE,_loc7_,_loc6_);
               break;
            case ServerCommands.NEXT_PAGE:
               _loc4_ = int(param1[4]);
               _loc3_.showNextPageOfVideoWindow(_loc4_);
               break;
            case ServerCommands.DESTROY_WINDOW:
               _loc4_ = int(param1[4]);
               _loc3_.removeVideoWindow(_loc4_);
         }
      }
      
      private function assembleCreateWindowCommand(param1:Array) : void
      {
         var _loc5_:String = null;
         var _loc6_:String = null;
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ == null)
         {
            return;
         }
         var _loc3_:GuiManager = _main.getGuiManager();
         var _loc4_:String = param1[3];
         switch(_loc4_)
         {
            case ServerCommands.ADVERTISING_BANNER:
               _loc5_ = param1[6];
               _loc6_ = param1[7];
               _loc3_.createBannerWindow(_loc6_,_loc5_);
         }
      }
      
      private function assembleDestroyWindowCommand(param1:Array) : void
      {
         var _loc5_:String = null;
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ == null)
         {
            return;
         }
         var _loc3_:GuiManager = _main.getGuiManager();
         var _loc4_:String = param1[3];
         switch(_loc4_)
         {
            case ServerCommands.ADVERTISING_BANNER:
               _loc5_ = param1[4];
               _loc3_.removeBannerWindow(_loc5_);
         }
      }
      
      private function assembleMenuVisibilityCommand(param1:Array) : void
      {
         var _loc3_:int = 0;
         var _loc2_:Array = [];
         _loc3_ = 4;
         while(_loc3_ < param1.length)
         {
            _loc2_.push(param1[_loc3_]);
            _loc3_++;
         }
         switch(param1[3])
         {
            case ServerCommands.SHOW_MENU:
               _loc3_ = 0;
               while(_loc3_ < _loc2_.length)
               {
                  _main.getGuiManager().getMenuManager().removeMenuFromBlacklist(_loc2_[_loc3_]);
                  _loc3_++;
               }
               break;
            case ServerCommands.HIDE_MENU:
               _loc3_ = 0;
               while(_loc3_ < _loc2_.length)
               {
                  _main.getGuiManager().getMenuManager().addMenuToBlacklist(_loc2_[_loc3_]);
                  _loc3_++;
               }
         }
      }
      
      private function assembleMenuButtonAccessCommand(param1:Array) : void
      {
         var _loc2_:Array = [];
         var _loc3_:int = 4;
         while(_loc3_ < param1.length)
         {
            _loc2_.push(param1[_loc3_]);
            _loc3_++;
         }
         switch(param1[3])
         {
            case ServerCommands.MENUBUTTON_ENABLED:
               _loc3_ = 0;
               while(_loc3_ < _loc2_.length)
               {
                  _main.getGuiManager().getMenuManager().removeMenuButtonFromBlacklist(_loc2_[_loc3_]);
                  _loc3_++;
               }
               break;
            case ServerCommands.MENUBUTTON_DISABLED:
               _loc3_ = 0;
               while(_loc3_ < _loc2_.length)
               {
                  _main.getGuiManager().getMenuManager().addMenuButtonToBlacklist(_loc2_[_loc3_]);
                  _loc3_++;
               }
         }
      }
      
      private function assembleCommanderVideoWindowCommand(param1:Array) : void
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:Boolean = false;
         var _loc7_:Array = null;
         var _loc8_:int = 0;
         var _loc2_:Map = _main.screenManager.map;
         switch(param1[3])
         {
            case ServerCommands.CREATE_VIDEO_WINDOW:
               _loc3_ = int(param1[4]);
               _loc4_ = int(param1[5]);
               _loc5_ = param1[6];
               _loc6_ = Boolean(int(param1[7]));
               _loc7_ = [];
               _loc8_ = 8;
               while(_loc8_ < param1.length)
               {
                  _loc7_.push(param1[_loc8_]);
                  _loc8_++;
               }
               if(_loc2_ != null)
               {
                  _loc2_.getMain().getGuiManager().createVideoWindow(_loc7_,_loc3_,_loc4_,VideoElement.CLASS_COMMANDER,_loc6_,_loc5_);
               }
               break;
            case ServerCommands.NEXT_PAGE:
               _loc3_ = int(param1[4]);
               _loc2_.getMain().getGuiManager().showNextPageOfVideoWindow(_loc3_);
               break;
            case ServerCommands.DESTROY_VIDEO_WINDOW:
               _loc3_ = int(param1[4]);
               _loc2_.getMain().getGuiManager().removeVideoWindow(_loc3_);
         }
      }
      
      private function assembleButtonCommand(param1:Array) : void
      {
         var _loc2_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:Boolean = false;
         var _loc3_:Map = _main.screenManager.map;
         var _loc4_:int = 0;
         switch(param1[3])
         {
            case ServerCommands.SHOW_BUTTON:
               _loc4_ = 4;
               while(_loc4_ < param1.length)
               {
                  _loc2_ = int(param1[_loc4_]);
                  _main.getGuiManager().getMenuManager().removeButtonFromBlacklist(_loc2_);
                  _loc4_++;
               }
               break;
            case ServerCommands.HIDE_BUTTON:
               _loc4_ = 4;
               while(_loc4_ < param1.length)
               {
                  _loc2_ = int(param1[_loc4_]);
                  _main.getGuiManager().getMenuManager().addButtonToBlacklist(_loc2_);
                  _loc4_++;
               }
               break;
            case ServerCommands.SHOW_FLASH:
               _loc5_ = int(param1[4]);
               _loc6_ = Boolean(int(param1[5]));
               if(_loc3_ != null)
               {
                  _loc4_ = 6;
                  while(_loc4_ < param1.length)
                  {
                     _loc2_ = int(param1[_loc4_]);
                     if(_loc5_ == -1)
                     {
                        _loc3_.getMain().getGuiManager().getMenuManager().registerFlashingButton(_loc2_,_loc6_);
                     }
                     _loc3_.getMain().getGuiManager().getMenuManager().flashButtonIcon(_loc2_,_loc5_,_loc6_);
                     _loc3_.getMain().getGuiManager().getTopMenu().flashButtonIcon(_loc2_,_loc5_,_loc6_);
                     _loc4_++;
                  }
               }
               break;
            case ServerCommands.HIDE_FLASH:
               if(_loc3_ != null)
               {
                  _loc4_ = 6;
                  while(_loc4_ < param1.length)
                  {
                     _loc2_ = int(param1[_loc4_]);
                     _loc3_.getMain().getGuiManager().getMenuManager().unregisterFlashingButton(_loc2_);
                     _loc3_.getMain().getGuiManager().getMenuManager().stopFlashButtonIcon(_loc2_);
                     _loc3_.getMain().getGuiManager().getTopMenu().stopFlashButtonIcon(_loc2_);
                     _loc4_++;
                  }
               }
         }
      }
      
      private function assembleWindowCommand(param1:Array) : void
      {
         var _loc2_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:Boolean = false;
         var _loc3_:Map = _main.screenManager.map;
         var _loc4_:int = 0;
         switch(param1[3])
         {
            case ServerCommands.SHOW_WINDOW:
               _loc4_ = 4;
               while(_loc4_ < param1.length)
               {
                  _loc2_ = int(param1[_loc4_]);
                  _main.getGuiManager().removeWindowFromBlacklist(_loc2_);
                  _loc4_++;
               }
               break;
            case ServerCommands.HIDE_WINDOW:
               _loc4_ = 4;
               while(_loc4_ < param1.length)
               {
                  _loc2_ = int(param1[_loc4_]);
                  _main.getGuiManager().addWindowToBlacklist(param1[_loc4_]);
                  _loc4_++;
               }
               break;
            case ServerCommands.MINIMIZE_WINDOW:
               _loc4_ = 4;
               while(_loc4_ < param1.length)
               {
                  _loc2_ = int(param1[_loc4_]);
                  _main.getGuiManager().minimizeWindow(_loc2_);
                  _loc4_++;
               }
               break;
            case ServerCommands.MAXIMIZE_WINDOW:
               _loc4_ = 4;
               while(_loc4_ < param1.length)
               {
                  _loc2_ = int(param1[_loc4_]);
                  _main.getGuiManager().maximizeWindow(_loc2_);
                  _loc4_++;
               }
               break;
            case ServerCommands.MINIMIZE_WINDOW:
               _loc4_ = 4;
               while(_loc4_ < param1.length)
               {
                  _loc2_ = int(param1[_loc4_]);
                  _main.getGuiManager().minimizeWindow(_loc2_);
                  _loc4_++;
               }
               break;
            case ServerCommands.MAXIMIZE_WINDOW:
               _loc4_ = 4;
               while(_loc4_ < param1.length)
               {
                  _loc2_ = int(param1[_loc4_]);
                  _main.getGuiManager().maximizeWindow(_loc2_);
                  _loc4_++;
               }
               break;
            case ServerCommands.SHOW_FLASH:
               _loc5_ = int(param1[4]);
               _loc6_ = Main.parseBooleanFromInt(param1[5]);
               if(_loc3_ != null)
               {
                  _loc4_ = 6;
                  while(_loc4_ < param1.length)
                  {
                     _loc2_ = int(param1[_loc4_]);
                     _loc3_.getMain().getGuiManager().flashWindowIcon(_loc2_,_loc5_,_loc6_);
                     _loc4_++;
                  }
               }
               break;
            case ServerCommands.HIDE_FLASH:
               if(_loc3_ != null)
               {
                  _loc4_ = 4;
                  while(_loc4_ < param1.length)
                  {
                     _loc2_ = int(param1[_loc4_]);
                     _loc3_.getMain().getGuiManager().stopFlashWindowIcon(_loc2_);
                     _loc4_++;
                  }
               }
         }
      }
      
      private function assembleArrowCommand(param1:Array) : void
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc2_:Map = _main.screenManager.map;
         switch(param1[3])
         {
            case ServerCommands.SHOW_ARROW:
               _loc3_ = int(param1[4]);
               _loc4_ = int(param1[5]);
               if(_loc2_ != null)
               {
                  _loc2_.getMain().getGuiManager().showArrow(_loc3_,_loc4_);
               }
               break;
            case ServerCommands.HIDE_ARROW:
               if(_loc2_ != null)
               {
                  _loc2_.getMain().getGuiManager().hideArrow();
               }
         }
      }
      
      private function assembleMinimapCommand(param1:Array) : void
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc2_:Map = _main.screenManager.map;
         if(_loc2_ == null)
         {
            return;
         }
         switch(param1[3])
         {
            case ServerCommands.NOISE:
               _loc2_.getCombatManager().addEMPBolt();
               break;
            case ServerCommands.SHOW_MARKER:
               _loc3_ = int(param1[4]);
               _loc4_ = int(param1[5]);
               _loc5_ = int(param1[6]);
               _loc6_ = int(param1[7]);
               _loc2_.getMinimapManager().getMiniMap().addMapMarker(_loc3_,_loc4_,_loc5_,_loc6_);
               break;
            case ServerCommands.HIDE_MARKER:
               _loc3_ = int(param1[4]);
               _loc2_.getMinimapManager().getMiniMap().stopMapMarker(_loc3_);
         }
      }
      
      private function assembleCameraCommand(param1:Array) : void
      {
         var _loc2_:Map = null;
         var _loc3_:Ship = null;
         var _loc4_:int = 0;
         var _loc5_:Number = NaN;
         var _loc6_:Number = NaN;
         var _loc7_:Sprite = null;
         var _loc8_:Sprite = null;
         var _loc9_:Sprite = null;
         var _loc10_:int = 0;
         var _loc11_:int = 0;
         switch(param1[3])
         {
            case ServerCommands.CAMERA_LOCK_TO_HERO:
               if(ScreenManager.cameraLock == ScreenManager.CAMERA_TWEENING_TO_HERO || ScreenManager.cameraLock == ScreenManager.CAMERA_LOCKED_TO_HERO)
               {
                  break;
               }
               _loc2_ = _main.screenManager.map;
               if(_loc2_ != null)
               {
                  ScreenManager.cameraLock = ScreenManager.CAMERA_TWEENING_TO_HERO;
                  _loc3_ = _loc2_.getShipManager().getHero();
                  TweenLite.to(ScreenManager.camera,3,{
                     "x":_loc3_.x,
                     "y":_loc3_.y,
                     "onComplete":this.handleTweenToHero
                  });
                  _loc2_.getMain().screenManager.resetZoomFactor();
               }
               break;
            case ServerCommands.CAMERA_LOCK_TO_SHIP:
               _loc2_ = _main.screenManager.map;
               _loc4_ = int(param1[4]);
               _loc5_ = Number(param1[5]);
               _loc6_ = Number(param1[6]);
               if(_loc2_ != null)
               {
                  if(ScreenManager.cameraLock == ScreenManager.CAMERA_TWEENING_TO_SHIP || ScreenManager.cameraLock == ScreenManager.CAMERA_LOCKED_TO_SHIP)
                  {
                     if(this.lockedShip != null && this.lockedShip.getUserId() == _loc4_)
                     {
                        _loc2_.getMain().screenManager.zoomToFactor(_loc6_,_loc5_);
                        break;
                     }
                  }
                  _loc2_.getEventManager().lockControls();
                  _loc3_ = _loc2_.getShipManager().getHero();
                  _loc7_ = _loc2_.getMain().screenManager.getHeroLayer();
                  _loc8_ = _loc2_.getMain().screenManager.getShipLayer();
                  _loc9_ = _loc3_.getClipContainer();
                  if(_loc7_.contains(_loc9_))
                  {
                     _loc7_.removeChild(_loc9_);
                  }
                  _loc8_.addChild(_loc9_);
                  _loc3_.setCCPositionToRealPosition();
                  _loc2_.getMain().screenManager.zoomToFactor(_loc6_,_loc5_);
                  ScreenManager.cameraLock = ScreenManager.CAMERA_TWEENING_TO_SHIP;
                  this.lockedShip = _loc2_.getShipManager().getShip(_loc4_);
                  TweenLite.to(ScreenManager.camera,_loc6_,{
                     "dynamicProps":{
                        "x":this.getLockedShipXPos,
                        "y":this.getLockedShipYPos
                     },
                     "onComplete":this.handleTweenToShip,
                     "onCompleteParams":[this.lockedShip]
                  });
               }
               _main.getGuiManager().setArrowVisibility(false);
               break;
            case ServerCommands.CAMERA_LOCK_TO_COORDINATES:
               _loc2_ = _main.screenManager.map;
               if(_loc2_ != null)
               {
                  _loc10_ = int(param1[4]);
                  _loc11_ = int(param1[5]);
                  _loc6_ = Number(param1[6]);
                  _loc2_.getEventManager().lockControls();
                  _loc3_ = _loc2_.getShipManager().getHero();
                  _loc7_ = _loc2_.getMain().screenManager.getHeroLayer();
                  _loc8_ = _loc2_.getMain().screenManager.getShipLayer();
                  _loc9_ = _loc3_.getClipContainer();
                  if(_loc7_.contains(_loc9_))
                  {
                     _loc7_.removeChild(_loc9_);
                  }
                  _loc8_.addChild(_loc9_);
                  _loc3_.setCCPositionToRealPosition();
                  ScreenManager.cameraLock = ScreenManager.CAMERA_TWEENING_TO_COORDINATE;
                  TweenLite.to(ScreenManager.camera,_loc6_,{
                     "x":_loc10_,
                     "y":_loc11_,
                     "onComplete":this.handleTweenToCoordinate
                  });
               }
               _main.getGuiManager().setArrowVisibility(false);
         }
      }
      
      private function handleTweenToShip(param1:MapObject) : void
      {
         ScreenManager.lockedShipUserID = param1.getUserId();
         ScreenManager.cameraLock = ScreenManager.CAMERA_LOCKED_TO_SHIP;
      }
      
      private function handleTweenToCoordinate() : void
      {
         ScreenManager.lockedShipUserID = -1;
         ScreenManager.cameraLock = ScreenManager.CAMERA_LOCKED_TO_COORDINATE;
      }
      
      private function handleTweenToHero() : void
      {
         var _loc1_:Map = _main.screenManager.map;
         _loc1_.getEventManager().unlockControls();
         var _loc2_:Ship = _loc1_.getShipManager().getHero();
         var _loc3_:Sprite = _loc1_.getMain().screenManager.getHeroLayer();
         var _loc4_:Sprite = _loc1_.getMain().screenManager.getShipLayer();
         if(_loc4_.contains(_loc2_.getClipContainer()))
         {
            _loc4_.removeChild(_loc2_.getClipContainer());
            _loc3_.addChild(_loc2_.getClipContainer());
            _loc2_.setCCPositionToFakePosition();
         }
         ScreenManager.lockedShipUserID = -1;
         this.lockedShip = null;
         ScreenManager.cameraLock = ScreenManager.CAMERA_LOCKED_TO_HERO;
         _main.getGuiManager().setArrowVisibility(true);
      }
      
      private function getLockedShipXPos() : Number
      {
         return this.lockedShip.x;
      }
      
      private function getLockedShipYPos() : Number
      {
         return this.lockedShip.y;
      }
   }
}

package net.bigpoint.darkorbit.net.models
{
   import com.bigpoint.utils.BPLocale;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.gui.TechCooldown;
   import net.bigpoint.darkorbit.menu.ActionButton;
   import net.bigpoint.darkorbit.menu.MenuManager;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignItem;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignNames;
   
   public class SkillDesignsModel
   {
      
      private static const logger:ILogger = Log.getLogger("SkillDesignsModel");
      
      public static const NUMBER_OF_SKILLS:int = 6;
      
      public var skillDesigns:Array = [];
      
      public var cooldowns:Array = [];
      
      public var main:Main;
      
      private var menuManager:MenuManager;
      
      public function SkillDesignsModel(param1:Main)
      {
         super();
         this.main = param1;
         this.menuManager = param1.getGuiManager().getMenuManager();
         var _loc2_:int = 1;
         while(_loc2_ <= NUMBER_OF_SKILLS)
         {
            this.skillDesigns[_loc2_] = new SkillDesignItem(_loc2_,param1);
            this.cooldowns[_loc2_] = new TechCooldown(_loc2_,0);
            _loc2_++;
         }
      }
      
      public function unequipAllSkills() : void
      {
         var _loc1_:int = 1;
         while(_loc1_ <= NUMBER_OF_SKILLS)
         {
            SkillDesignItem(this.skillDesigns[_loc1_]).unEquip();
            _loc1_++;
         }
      }
      
      public function setCooldown(param1:int, param2:int) : void
      {
         var _loc4_:SkillDesignItem = null;
         var _loc5_:SkillDesignItem = null;
         var _loc6_:Boolean = false;
         var _loc8_:ActionButton = null;
         var _loc3_:TechCooldown = this.cooldowns[param1] as TechCooldown;
         _loc3_.seconds = param2;
         _loc3_.startingTime = param2;
         _loc3_.update();
         _loc3_.onCompleteCallback = this.handleCooldownReached;
         if(this.skillDesigns == null)
         {
            return;
         }
         var _loc7_:int = 1;
         while(_loc7_ < this.skillDesigns.length)
         {
            _loc4_ = this.skillDesigns[_loc7_] as SkillDesignItem;
            if(_loc4_.type == param1)
            {
               _loc6_ = true;
               _loc4_.status = SkillDesignItem.STATE_COOLING;
               _loc4_.cooldownSeconds = param2;
               _loc4_.hasRunningCooldown = param2 > 0;
               _loc5_ = _loc4_;
            }
            _loc7_++;
         }
         if(_loc6_)
         {
            if(this.menuManager != null)
            {
               this.menuManager.updateTechs();
               _loc7_ = 0;
               while(_loc7_ < this.menuManager.actionButtonsWithCooldowns.length)
               {
                  _loc8_ = ActionButton(this.menuManager.actionButtonsWithCooldowns[_loc7_]);
                  if(this.menuManager.skillDesignIDTobuttonID[param1] == _loc8_.actionID)
                  {
                     this.menuManager.setActionButtonCooldownGeneric(_loc5_,_loc8_,param2);
                  }
                  _loc7_++;
               }
            }
         }
      }
      
      private function handleCooldownReached(param1:int) : void
      {
         var _loc2_:SkillDesignItem = null;
         var _loc3_:Boolean = false;
         if(this.skillDesigns == null)
         {
            return;
         }
         var _loc4_:int = 1;
         while(_loc4_ < this.skillDesigns.length)
         {
            _loc2_ = this.skillDesigns[_loc4_] as SkillDesignItem;
            if(_loc2_.type == param1)
            {
               if(_loc2_.hasRunningCooldown == true)
               {
                  _loc2_.hasRunningCooldown = false;
                  _loc2_.status = SkillDesignItem.STATE_READY;
                  _loc3_ = true;
               }
            }
            _loc4_++;
         }
         if(_loc3_)
         {
            if(this.menuManager != null)
            {
               this.menuManager.updateTechs();
            }
         }
      }
      
      public function activateCurrentSkill() : void
      {
         this.main.getConnectionManager().sendCommand(ServerCommands.SKILL_DESIGNS);
      }
      
      public function logHeroMessage(param1:int, param2:Boolean) : void
      {
         switch(param1)
         {
            case SkillDesignNames.SHIP_SKILL_SOLACE:
               this.main.getGuiManager().writeToLog(BPLocale.getText("msg_instant_healed_as_activator"));
               break;
            case SkillDesignNames.SHIP_SKILL_DIMINISHER:
               if(param2)
               {
                  this.main.getGuiManager().writeToLog(BPLocale.getText("msg_targets_shields_weakened"));
                  break;
               }
               this.main.getGuiManager().writeToLog(BPLocale.getText("msg_targets_shields_recovered"));
               break;
            case SkillDesignNames.SHIP_SKILL_SPECTRUM:
               if(param2)
               {
                  this.main.getGuiManager().writeToLog(BPLocale.getText("msg_prismatic_shielding_activated"));
                  break;
               }
               this.main.getGuiManager().writeToLog(BPLocale.getText("msg_prismatic_shielding_stopped"));
               break;
            case SkillDesignNames.SHIP_SKILL_SENTINEL:
               if(param2)
               {
                  this.main.getGuiManager().writeToLog(BPLocale.getText("msg_fortress_activated"));
                  break;
               }
               this.main.getGuiManager().writeToLog(BPLocale.getText("msg_fortress_stopped"));
               break;
            case SkillDesignNames.SHIP_SKILL_VENOM:
               if(param2)
               {
                  this.main.getGuiManager().writeToLog(BPLocale.getText("msg_singularity_activated"));
                  break;
               }
               this.main.getGuiManager().writeToLog(BPLocale.getText("msg_singularity_stopped"));
               break;
            case SkillDesignNames.SHIP_SKILL_LIGHTNING:
               if(param2)
               {
                  this.main.getGuiManager().writeToLog(BPLocale.getText("msg_afterburner_activated"));
                  break;
               }
               this.main.getGuiManager().writeToLog(BPLocale.getText("msg_afterburner_stopped"));
         }
      }
      
      public function logNonHeroMessage(param1:int, param2:Boolean) : void
      {
         switch(param1)
         {
            case SkillDesignNames.SHIP_SKILL_SOLACE:
               this.main.getGuiManager().writeToLog(BPLocale.getText("msg_instant_healed_as_group_member"));
               break;
            case SkillDesignNames.SHIP_SKILL_DIMINISHER:
               if(param2)
               {
                  this.main.getGuiManager().writeToLog(BPLocale.getText("msg_shields_weakened"));
                  break;
               }
               this.main.getGuiManager().writeToLog(BPLocale.getText("msg_shields_recovered"));
         }
      }
   }
}

package net.bigpoint.darkorbit.net.models
{
   import flash.external.ExternalInterface;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.gui.TechCooldown;
   import net.bigpoint.darkorbit.gui.TechView;
   import net.bigpoint.darkorbit.menu.MenuManager;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.net.models.techs.TechItem;
   
   public class TechModel
   {
      
      private static const logger:ILogger = Log.getLogger("TechModel");
      
      private var main:Main;
      
      private var menuManager:MenuManager;
      
      private var techView:TechView;
      
      public var techs:Array;
      
      public var cooldowns:Array = [];
      
      public const NUMBER_OF_TECHS:int = 5;
      
      public const ENERGY_LEECH:int = 1;
      
      public const CHAIN_BOLT:int = 2;
      
      public const ROCKET_PRECISION:int = 3;
      
      public const SHIELD_BACKUP:int = 4;
      
      public const BATTLE_REP_BOT:int = 5;
      
      public const SPEED_LEECH:int = 6;
      
      public var techItemSlotReference:Array = [];
      
      public function TechModel(param1:Main)
      {
         super();
         this.main = param1;
         this.menuManager = param1.getGuiManager().getMenuManager();
         var _loc2_:int = 1;
         while(_loc2_ <= this.NUMBER_OF_TECHS)
         {
            this.cooldowns[_loc2_] = new TechCooldown(_loc2_,0);
            _loc2_++;
         }
      }
      
      public function setCooldown(param1:int, param2:int) : void
      {
         var _loc4_:TechItem = null;
         var _loc5_:Boolean = false;
         var _loc3_:TechCooldown = this.cooldowns[param1] as TechCooldown;
         _loc3_.seconds = param2;
         _loc3_.startingTime = param2;
         _loc3_.update();
         _loc3_.onCompleteCallback = this.handleCooldownReached;
         if(this.techs == null)
         {
            return;
         }
         var _loc6_:int = 1;
         while(_loc6_ < this.techs.length)
         {
            _loc4_ = this.techs[_loc6_] as TechItem;
            if(_loc4_.type == param1)
            {
               _loc5_ = true;
               _loc4_.cooldownSeconds = param2;
               _loc4_.hasRunningCooldown = param2 > 0;
            }
            _loc6_++;
         }
         if(_loc5_)
         {
            if(this.menuManager != null)
            {
               this.menuManager.updateTechs();
               this.menuManager.setActionButtonCooldown(param1,param2);
            }
         }
      }
      
      private function handleCooldownReached(param1:int) : void
      {
         var _loc2_:TechItem = null;
         var _loc3_:Boolean = false;
         if(this.techs == null)
         {
            return;
         }
         var _loc4_:int = 1;
         while(_loc4_ < this.techs.length)
         {
            _loc2_ = this.techs[_loc4_] as TechItem;
            if(_loc2_.type == param1)
            {
               if(_loc2_.hasRunningCooldown == true)
               {
                  _loc2_.hasRunningCooldown = false;
                  _loc3_ = true;
               }
            }
            _loc4_++;
         }
         if(_loc3_)
         {
            if(this.menuManager != null)
            {
               this.menuManager.updateTechs();
            }
         }
      }
      
      public function setItems(param1:Array) : void
      {
         var _loc2_:Boolean = false;
         var _loc3_:Boolean = false;
         var _loc4_:Boolean = false;
         var _loc5_:TechItem = null;
         var _loc6_:TechItem = null;
         this.menuManager = this.main.getGuiManager().getMenuManager();
         if(this.techs == null)
         {
            this.techs = [];
            _loc2_ = true;
         }
         var _loc7_:int = 0;
         while(_loc7_ < param1.length)
         {
            _loc5_ = param1[_loc7_] as TechItem;
            if(_loc5_.type != 0)
            {
               _loc4_ = true;
            }
            _loc6_ = this.techs[_loc5_.type] as TechItem;
            if(_loc6_ != null)
            {
               if((_loc6_.status == TechItem.STATE_READY || _loc6_.status == TechItem.STATE_ACTIVE) && _loc5_.status == TechItem.STATE_INACTIVE)
               {
                  _loc3_ = true;
               }
               _loc2_ = _loc6_.updateValues(_loc5_) || _loc2_;
            }
            else
            {
               this.techs[_loc5_.type] = _loc5_;
               _loc2_ = true;
            }
            (this.techs[_loc5_.type] as TechItem).hasRunningCooldown = (this.cooldowns[_loc5_.type] as TechCooldown).isRunning;
            (this.techs[_loc5_.type] as TechItem).cooldownSeconds = (this.cooldowns[_loc5_.type] as TechCooldown).seconds;
            _loc7_++;
         }
         if(_loc3_)
         {
            if(ExternalInterface.available)
            {
               ExternalInterface.call("onTechExpired");
            }
         }
         if(_loc2_ && _loc4_)
         {
            if(this.menuManager != null)
            {
               this.menuManager.updateTechs();
            }
         }
         this.updateTechSlotReference();
         if(this.main.getGuiManager().getMenuManager() != null)
         {
            this.main.getGuiManager().getMenuManager().updateTechs();
         }
      }
      
      public function updateTechSlotReference() : void
      {
         var _loc1_:TechItem = null;
         this.techItemSlotReference = [];
         for each(_loc1_ in this.techs)
         {
            this.techItemSlotReference[_loc1_.type] = _loc1_.slot;
         }
      }
      
      public function activateTechByID(param1:int) : void
      {
         this.main.getConnectionManager().sendCommand(ServerCommands.TECHS,[param1]);
      }
      
      public function activateTechInSlot(param1:int) : void
      {
         this.main.getConnectionManager().sendCommand(ServerCommands.TECHS,[param1]);
      }
   }
}

package net.bigpoint.darkorbit.net.models.skills
{
   public class SkillDesignAbilities
   {
      
      private static var abilitiesNameBySkillID:Array;
      
      public static const SHIP_INSTANT_HEAL_NAME:String = "solace-effect";
      
      public static const SHIP_WEAKEN_SHIELDS_NAME:String = "diminisher-effect";
      
      public static const SHIP_PRISMATIC_SHIELDING_NAME:String = "spectrum-effect";
      
      public static const SHIP_FORTRESS_NAME:String = "sentinel-effect";
      
      public static const SHIP_SINGULARITY_NAME:String = "venom-effect";
      
      public static const SHIP_AFTERBURNER_NAME:String = "speed-buff-effect";
      
      public function SkillDesignAbilities()
      {
         super();
      }
      
      public static function getSkillAbilityBySkillID(param1:int) : String
      {
         if(abilitiesNameBySkillID == null)
         {
            initAbilities();
         }
         return abilitiesNameBySkillID[param1];
      }
      
      private static function initAbilities() : void
      {
         abilitiesNameBySkillID = [];
         abilitiesNameBySkillID[SkillDesignNames.SHIP_SKILL_SOLACE] = SHIP_INSTANT_HEAL_NAME;
         abilitiesNameBySkillID[SkillDesignNames.SHIP_SKILL_DIMINISHER] = SHIP_WEAKEN_SHIELDS_NAME;
         abilitiesNameBySkillID[SkillDesignNames.SHIP_SKILL_SPECTRUM] = SHIP_PRISMATIC_SHIELDING_NAME;
         abilitiesNameBySkillID[SkillDesignNames.SHIP_SKILL_SENTINEL] = SHIP_FORTRESS_NAME;
         abilitiesNameBySkillID[SkillDesignNames.SHIP_SKILL_VENOM] = SHIP_SINGULARITY_NAME;
         abilitiesNameBySkillID[SkillDesignNames.SHIP_SKILL_LIGHTNING] = SHIP_AFTERBURNER_NAME;
      }
   }
}

package net.bigpoint.darkorbit.net.models.skills
{
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.gui.CoolDown;
   import net.bigpoint.darkorbit.menu.IAbilityItem;
   
   public class SkillDesignItem implements IAbilityItem
   {
      
      public static const STATE_READY:int = 1;
      
      public static const STATE_ACTIVE:int = 2;
      
      public static const STATE_COOLING:int = 3;
      
      public static const STATE_OFF_FOR_SHORTCUT_BUTTONS:int = 3;
      
      public var type:int;
      
      public var status:int;
      
      public var cooldown:CoolDown;
      
      public var equipped:Boolean = false;
      
      public var main:Main;
      
      public var secondsLeft:Number;
      
      public var name:String;
      
      public var cooldownSeconds:int = 15;
      
      public var hasRunningCooldown:Boolean;
      
      public function SkillDesignItem(param1:int, param2:Main)
      {
         super();
         this.main = param2;
         this.type = param1;
         this.name = SkillDesignNames.getNameByType(this.type);
      }
      
      public function setEquipped() : void
      {
         this.equipped = true;
         Hero.skills[this.type] = true;
      }
      
      public function unEquip() : void
      {
         this.equipped = false;
         Hero.skills[this.type] = false;
      }
      
      public function setReady() : void
      {
         this.equipped = true;
         this.status = STATE_READY;
      }
      
      public function getName() : String
      {
         return this.name;
      }
      
      public function getStatus() : int
      {
         return this.status;
      }
   }
}

package net.bigpoint.darkorbit.net.models.skills
{
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.ship.effects.EffectIDList;
   
   public class SkillDesignNames
   {
      
      private static var names:Array;
      
      private static var codes:Array;
      
      private static var effectIDMap:Array;
      
      public static const SHIP_SKILL_SOLACE:int = 1;
      
      public static const SHIP_SKILL_DIMINISHER:int = 2;
      
      public static const SHIP_SKILL_SPECTRUM:int = 3;
      
      public static const SHIP_SKILL_SENTINEL:int = 4;
      
      public static const SHIP_SKILL_VENOM:int = 5;
      
      public static const SHIP_SKILL_LIGHTNING:int = 6;
      
      public static const SHIP_SKILL_SOLACE_NAME:String = "SHIP_SKILL_SOLACE";
      
      public static const SHIP_SKILL_DIMINISHER_NAME:String = "SHIP_SKILL_DIMINISHER";
      
      public static const SHIP_SKILL_SPECTRUM_NAME:String = "SHIP_SKILL_SPECTRUM";
      
      public static const SHIP_SKILL_SENTINEL_NAME:String = "SHIP_SKILL_SENTINEL";
      
      public static const SHIP_SKILL_VENOM_NAME:String = "SHIP_SKILL_VENOM";
      
      public static const SHIP_SKILL_LIGHTNING_NAME:String = "SHIP_SKILL_LIGHTNING";
      
      public function SkillDesignNames()
      {
         super();
      }
      
      public static function getNameByType(param1:int) : String
      {
         if(names == null)
         {
            initNames();
         }
         return names[param1];
      }
      
      public static function getCodeByType(param1:int) : String
      {
         if(codes == null)
         {
            initCodes();
         }
         return codes[param1];
      }
      
      public static function getTypeByCode(param1:String) : int
      {
         if(codes == null)
         {
            initCodes();
         }
         return codes.indexOf(param1);
      }
      
      public static function getEffectIDByCode(param1:int) : int
      {
         if(effectIDMap == null)
         {
            initEffectIDMap();
         }
         return effectIDMap[param1];
      }
      
      private static function initNames() : void
      {
         names = [];
         names[SHIP_SKILL_SOLACE] = SHIP_SKILL_SOLACE_NAME;
         names[SHIP_SKILL_DIMINISHER] = SHIP_SKILL_DIMINISHER_NAME;
         names[SHIP_SKILL_SENTINEL] = SHIP_SKILL_SENTINEL_NAME;
         names[SHIP_SKILL_SPECTRUM] = SHIP_SKILL_SPECTRUM_NAME;
         names[SHIP_SKILL_VENOM] = SHIP_SKILL_VENOM_NAME;
         names[SHIP_SKILL_LIGHTNING] = SHIP_SKILL_LIGHTNING_NAME;
      }
      
      private static function initCodes() : void
      {
         codes = [];
         codes[SHIP_SKILL_SOLACE] = ServerCommands.SKILL_SOLACE;
         codes[SHIP_SKILL_DIMINISHER] = ServerCommands.SKILL_DIMINISHER;
         codes[SHIP_SKILL_SENTINEL] = ServerCommands.SKILL_SENTINEL;
         codes[SHIP_SKILL_SPECTRUM] = ServerCommands.SKILL_SPECTRUM;
         codes[SHIP_SKILL_VENOM] = ServerCommands.SKILL_VENOM;
         codes[SHIP_SKILL_LIGHTNING] = ServerCommands.SPEED_BUFF_COOL_DOWN;
      }
      
      private static function initEffectIDMap() : void
      {
         effectIDMap = [];
         effectIDMap[SHIP_SKILL_SOLACE] = EffectIDList.SOLACE_EFFECT;
         effectIDMap[SHIP_SKILL_DIMINISHER] = EffectIDList.DIMINISHER_EFFECT;
         effectIDMap[SHIP_SKILL_SENTINEL] = EffectIDList.SENTINEL_EFFECT;
         effectIDMap[SHIP_SKILL_SPECTRUM] = EffectIDList.SPECTRUM_EFFECT;
         effectIDMap[SHIP_SKILL_VENOM] = EffectIDList.VENOM_EFFECT;
         effectIDMap[SHIP_SKILL_LIGHTNING] = EffectIDList.SPEED_BUFF_EFFECT;
      }
   }
}

package net.bigpoint.darkorbit.net.models.skills
{
   public class SkillDesignShipNames
   {
      
      private static var shipNameByShipID:Array;
      
      public static const SHIP_SOLACE_NAME:String = "SOLACE";
      
      public static const SHIP_DIMINISHER_NAME:String = "DIMINISHER";
      
      public static const SHIP_SENTINEL_NAME:String = "SENTINEL";
      
      public static const SHIP_SPECTRUM_NAME:String = "SPECTRUM";
      
      public static const SHIP_VENOM_NAME:String = "VENOM";
      
      public static const SHIP_LIGHTNING_NAME:String = "LIGHTNING";
      
      public static const SHIP_SOLACE_ID:int = 63;
      
      public static const SHIP_DIMINISHER_ID:int = 64;
      
      public static const SHIP_SENTINEL_ID:int = 65;
      
      public static const SHIP_SPECTRUM_ID:int = 66;
      
      public static const SHIP_VENOM_ID:int = 67;
      
      public static const SHIP_LIGHTNING_ID:int = 73;
      
      public function SkillDesignShipNames()
      {
         super();
      }
      
      public static function getShipNameBySkillName(param1:String) : String
      {
         if(shipNameByShipID == null)
         {
            initShipNames();
         }
         return shipNameByShipID[param1];
      }
      
      private static function initShipNames() : void
      {
         shipNameByShipID = [];
         shipNameByShipID[SkillDesignNames.SHIP_SKILL_SOLACE_NAME] = SHIP_SOLACE_NAME;
         shipNameByShipID[SkillDesignNames.SHIP_SKILL_DIMINISHER_NAME] = SHIP_DIMINISHER_NAME;
         shipNameByShipID[SkillDesignNames.SHIP_SKILL_SPECTRUM_NAME] = SHIP_SPECTRUM_NAME;
         shipNameByShipID[SkillDesignNames.SHIP_SKILL_SENTINEL_NAME] = SHIP_SENTINEL_NAME;
         shipNameByShipID[SkillDesignNames.SHIP_SKILL_VENOM_NAME] = SHIP_VENOM_NAME;
         shipNameByShipID[SkillDesignNames.SHIP_SKILL_LIGHTNING_NAME] = SHIP_LIGHTNING_NAME;
      }
   }
}

package net.bigpoint.darkorbit.net.models.techs
{
   import net.bigpoint.darkorbit.menu.IAbilityItem;
   
   public class TechItem implements IAbilityItem
   {
      
      private static var stateNames:Array;
      
      public static const TYPE_DEFAULT:int = 0;
      
      public static const TYPE_ENERGY_LEECH_ARRAY:int = 1;
      
      public static const TYPE_ENERGY_CHAIN_IMPULSE:int = 2;
      
      public static const TYPE_ROCKET_PROBABILITY_MAXIMIZER:int = 3;
      
      public static const TYPE_SHIELD_BACKUP:int = 4;
      
      public static const TYPE_BATTLE_REPAIR_BOT:int = 5;
      
      public static const TYPE_SPEED_LEECH:int = 6;
      
      public static const TYPE_CLINGING_IMPULSE_DRONE:int = 7;
      
      public static const NUMBER_OF_TYPES:int = 7;
      
      public static const STATE_DEFAULT:int = 0;
      
      public static const STATE_READY:int = 1;
      
      public static const STATE_ACTIVE:int = 2;
      
      public static const STATE_INACTIVE:int = 3;
      
      public var type:int;
      
      public var slot:int;
      
      public var status:int;
      
      public var amount:int;
      
      public var charges:int;
      
      public var secondsLeft:int;
      
      public var cooldownSeconds:int = 15;
      
      public var hasRunningCooldown:Boolean;
      
      private var name:String;
      
      public function TechItem()
      {
         super();
      }
      
      public static function getNameByStatus(param1:int) : String
      {
         if(stateNames == null)
         {
            initStateNames();
         }
         return stateNames[param1];
      }
      
      private static function initStateNames() : void
      {
         stateNames = [];
         stateNames[STATE_DEFAULT] = "DEFAULT";
         stateNames[STATE_READY] = "READY";
         stateNames[STATE_ACTIVE] = "ACTIVE";
         stateNames[STATE_INACTIVE] = "INACTIVE";
      }
      
      public function toString() : String
      {
         return "TechItem: slot " + this.slot + " type: " + this.name + ", status " + getNameByStatus(this.status) + ", amount: " + this.amount + ", secsLeft: " + this.secondsLeft;
      }
      
      public function updateValues(param1:TechItem) : Boolean
      {
         var _loc2_:Boolean = false;
         if(this.amount != param1.amount)
         {
            this.amount = param1.amount;
            _loc2_ = true;
         }
         if(this.charges != param1.charges)
         {
            this.charges = param1.charges;
            _loc2_ = true;
         }
         if(this.status != param1.status)
         {
            this.status = param1.status;
            _loc2_ = true;
         }
         if(this.secondsLeft != param1.secondsLeft)
         {
            this.secondsLeft = param1.secondsLeft;
            _loc2_ = true;
         }
         if(this.type != param1.type)
         {
            this.type = param1.type;
            _loc2_ = true;
         }
         return _loc2_;
      }
      
      public function updateName() : void
      {
         this.name = TechNames.getNameByType(this.type);
      }
      
      public function getName() : String
      {
         return this.name;
      }
      
      public function getStatus() : int
      {
         return this.status;
      }
   }
}

package net.bigpoint.darkorbit.net.models.techs
{
   public class TechNames
   {
      
      private static var names:Array;
      
      private static var codes:Array;
      
      public static const TYPE_DEFAULT:int = 0;
      
      public static const TYPE_ENERGY_LEECH_ARRAY:int = 1;
      
      public static const TYPE_ENERGY_CHAIN_IMPULSE:int = 2;
      
      public static const TYPE_ROCKET_PROBABILITY_MAXIMIZER:int = 3;
      
      public static const TYPE_SHIELD_BACKUP:int = 4;
      
      public static const TYPE_BATTLE_REPAIR_BOT:int = 5;
      
      public static const TYPE_SPEED_LEECH:int = 6;
      
      public static const TYPE_CLINGING_IMPULSE_DRONE:int = 7;
      
      public function TechNames()
      {
         super();
      }
      
      public static function getNameByType(param1:int) : String
      {
         if(names == null)
         {
            initNames();
         }
         return names[param1];
      }
      
      public static function getCodeByType(param1:int) : String
      {
         if(codes == null)
         {
            initCodes();
         }
         return codes[param1];
      }
      
      public static function getTypeByCode(param1:String) : int
      {
         if(codes == null)
         {
            initCodes();
         }
         return codes.indexOf(param1);
      }
      
      private static function initNames() : void
      {
         names = [];
         names[TYPE_DEFAULT] = "DEFAULT";
         names[TYPE_ENERGY_LEECH_ARRAY] = "ENERGY_LEECH_ARRAY";
         names[TYPE_ENERGY_CHAIN_IMPULSE] = "ENERGY_CHAIN_IMPULSE";
         names[TYPE_ROCKET_PROBABILITY_MAXIMIZER] = "ROCKET_PROBABILITY_MAXIMIZER";
         names[TYPE_SHIELD_BACKUP] = "SHIELD_BACKUP";
         names[TYPE_SPEED_LEECH] = "SPEED_LEECH";
         names[TYPE_BATTLE_REPAIR_BOT] = "BATTLE_REPAIR_BOT";
         names[TYPE_CLINGING_IMPULSE_DRONE] = "CLINGING_IMPULSE_DRONE";
      }
      
      private static function initCodes() : void
      {
         codes = [];
         codes[TYPE_DEFAULT] = "DEFAULT";
         codes[TYPE_ENERGY_LEECH_ARRAY] = "ELA";
         codes[TYPE_ENERGY_CHAIN_IMPULSE] = "ECI";
         codes[TYPE_ROCKET_PROBABILITY_MAXIMIZER] = "RPM";
         codes[TYPE_SHIELD_BACKUP] = "SBU";
         codes[TYPE_SPEED_LEECH] = "SL";
         codes[TYPE_BATTLE_REPAIR_BOT] = "BRB";
         codes[TYPE_CLINGING_IMPULSE_DRONE] = "CID";
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class AchievementPattern extends Pattern
   {
      
      public static var MAX_ID:int;
      
      public var languageKey:String;
      
      public var priceValue:Number = -1;
      
      public var priceCurrency:String;
      
      public function AchievementPattern(param1:int, param2:String)
      {
         super(param1,CONTENT_CUSTOM);
         this.languageKey = param2;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class AudibleResourcePattern extends ResourcePattern
   {
      
      private var soundID:int = -1;
      
      public function AudibleResourcePattern(param1:int, param2:String)
      {
         super(param1,param2);
      }
      
      public function getSoundID() : int
      {
         return this.soundID;
      }
      
      public function setSoundID(param1:int) : void
      {
         this.soundID = param1;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class BackgroundPattern extends ResourcePattern
   {
      
      public var isTiled:Boolean;
      
      public var isReloadable:Boolean;
      
      public var width:int;
      
      public var height:int;
      
      public var tileWidth:int;
      
      public var tileHeight:int;
      
      public var order:String;
      
      public function BackgroundPattern(param1:int, param2:String, param3:Boolean, param4:Boolean, param5:int, param6:int, param7:String, param8:int, param9:int)
      {
         super(param1,param2);
         this.isTiled = param3;
         this.isReloadable = param4;
         this.tileWidth = param5;
         this.tileHeight = param6;
         if(param7 != "")
         {
            this.order = param7;
         }
         this.width = param8;
         this.height = param9;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   import mx.logging.ILogger;
   import mx.logging.Log;
   
   public class BannerAdPattern
   {
      
      private static const logger:ILogger = Log.getLogger("BannerAdPattern");
      
      public static const BANNERAD_SWF_PREFIX:String = "bannerad_";
      
      public static const BANNERAD_IMAGE_SUFFIX:String = "_text0";
      
      public var id:int;
      
      public var price:Number = -1;
      
      public var baseKey:String;
      
      public var paymentKey:String;
      
      public var footerKey:String;
      
      public var windowID:int;
      
      public var assetCount:int;
      
      public function BannerAdPattern(param1:int, param2:String, param3:String, param4:int)
      {
         super();
         this.id = param1;
         this.windowID = 4000 + param1;
         this.baseKey = param2;
         this.paymentKey = param3;
         this.assetCount = param4;
      }
      
      public function getSWFLibID() : String
      {
         return BANNERAD_SWF_PREFIX + this.baseKey;
      }
      
      public function getImageLibID(param1:String) : String
      {
         return param1 + "_" + BANNERAD_SWF_PREFIX + this.baseKey + BANNERAD_IMAGE_SUFFIX;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class BoosterPattern extends ResourcePattern
   {
      
      private var infoFieldID:int;
      
      private var barKey:String;
      
      public function BoosterPattern(param1:int, param2:int, param3:String, param4:String)
      {
         super(param1,param3);
         this.infoFieldID = param2;
         this.barKey = param4;
      }
      
      public function getInfoFieldID() : int
      {
         return this.infoFieldID;
      }
      
      public function getBarKey() : String
      {
         return this.barKey;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class BuffPattern
   {
      
      public static const SINGULARITY_BUFF:int = 1;
      
      public static const SPEEDLEACH_BUFF:int = 2;
      
      public static const TRADE_BUFF:int = 3;
      
      public static const WEAKENSHIELD_BUFF:int = 4;
      
      public var id:int;
      
      public var resKey:String;
      
      public var languageKey:String;
      
      public var effect:int;
      
      public function BuffPattern(param1:int, param2:String, param3:String, param4:int)
      {
         super();
         this.id = param1;
         this.resKey = param2;
         this.languageKey = param3;
         this.effect = param4;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class CustomPattern extends Pattern
   {
      
      public function CustomPattern(param1:int)
      {
         super(param1,Pattern.CONTENT_CUSTOM);
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   import flash.display.MovieClip;
   import flash.geom.Point;
   
   public class DynamicResource
   {
      
      private var typeID:int;
      
      private var _clip:MovieClip;
      
      private var _scaleSize:Point = new Point();
      
      public function DynamicResource(param1:int)
      {
         super();
         this.typeID = param1;
      }
      
      public function removeClip() : void
      {
         this.clip = null;
      }
      
      public function getTypeID() : int
      {
         return this.typeID;
      }
      
      public function get clip() : MovieClip
      {
         return this._clip;
      }
      
      public function set clip(param1:MovieClip) : void
      {
         this._clip = param1;
      }
      
      public function get scaleSize() : Point
      {
         return this._scaleSize;
      }
      
      public function set scaleSize(param1:Point) : void
      {
         this._scaleSize = param1;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class EffectPattern
   {
      
      public var id:int;
      
      public var resKey:String;
      
      public function EffectPattern(param1:int, param2:String)
      {
         super();
         this.id = param1;
         this.resKey = param2;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class FireworkPattern extends AudibleResourcePattern
   {
      
      public static const CLASS_RED:int = 0;
      
      public static const CLASS_BLUE:int = 1;
      
      public static const CLASS_GREEN:int = 2;
      
      public static const CLASS_RED_WHITE_BLUE:int = 3;
      
      public var useBitmapClip:Boolean;
      
      public var precache:Boolean;
      
      private var patternClass:int;
      
      public function FireworkPattern(param1:int, param2:int, param3:String)
      {
         super(param2,param3);
         this.patternClass = param1;
      }
      
      public function getPatternClass() : int
      {
         return this.patternClass;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class GearPattern
   {
      
      public var id:int;
      
      public var resKey:String;
      
      public var effect:int;
      
      public var standardBackgroundReskey:String;
      
      public var activeBackgroundReskey:String;
      
      public var gearName:String;
      
      public var targetListKey:String;
      
      public var suffix:String;
      
      public function GearPattern(param1:int, param2:String, param3:String, param4:int, param5:String, param6:String, param7:String, param8:String)
      {
         super();
         this.gearName = param2;
         this.id = param1;
         this.resKey = param3;
         this.effect = param4;
         this.standardBackgroundReskey = param5;
         this.activeBackgroundReskey = param6;
         this.suffix = param8;
         this.targetListKey = param7;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class OrePattern extends ResourcePattern
   {
      
      public static var ORE_PROMETIUM:int = 1;
      
      public static var ORE_ENDURIUM:int = 2;
      
      public static var ORE_TERBIUM:int = 3;
      
      public static var ORE_XENOMIT:int = 4;
      
      public static var ORE_PROMETID:int = 11;
      
      public static var ORE_DURANIUM:int = 12;
      
      public static var ORE_PROMERIUM:int = 13;
      
      public static var ORE_SEPROM:int = 14;
      
      public static var ORE_PALLADIUM:int = 15;
      
      private var _languageKey:String;
      
      private var _refiners:Array = [];
      
      private var _count:int;
      
      private var _price:int;
      
      public function OrePattern(param1:int, param2:String, param3:String)
      {
         super(param1,param2);
         this._languageKey = param3;
      }
      
      public function get languageKey() : String
      {
         return this._languageKey;
      }
      
      public function parseRefiners(param1:String) : void
      {
         var _loc4_:RefinerInfo = null;
         var _loc2_:Array = param1.split(",");
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_.length)
         {
            _loc4_ = new RefinerInfo(_loc2_[_loc3_],_loc2_[_loc3_ + 1]);
            this._refiners.push(_loc4_);
            _loc3_++;
            _loc3_++;
         }
      }
      
      public function get refiners() : Array
      {
         return this._refiners;
      }
      
      public function get count() : int
      {
         return this._count;
      }
      
      public function set count(param1:int) : void
      {
         this._count = param1;
      }
      
      public function get price() : int
      {
         return this._price;
      }
      
      public function set price(param1:int) : void
      {
         this._price = param1;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class Pattern
   {
      
      public static const CONTENT_RESOURCE:int = 0;
      
      public static const CONTENT_CUSTOM:int = 1;
      
      protected var patternID:int;
      
      private var contentType:int;
      
      public function Pattern(param1:int, param2:int)
      {
         super();
         this.patternID = param1;
         this.contentType = param2;
      }
      
      public function getPatternID() : int
      {
         return this.patternID;
      }
      
      public function getContentType() : int
      {
         return this.contentType;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   import com.bigpoint.utils.BPLocale;
   import flash.geom.Point;
   import flash.utils.Dictionary;
   import net.bigpoint.AmmoPrice;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.audio.AudioPattern;
   import net.bigpoint.darkorbit.background.CustomBackgroundPattern;
   import net.bigpoint.darkorbit.collectable.CollectablePattern;
   import net.bigpoint.darkorbit.combat.ExplosionPattern;
   import net.bigpoint.darkorbit.combat.LaserPattern;
   import net.bigpoint.darkorbit.combat.RocketPattern;
   import net.bigpoint.darkorbit.drone.DronePattern;
   import net.bigpoint.darkorbit.mine.MinePattern;
   import net.bigpoint.darkorbit.mine.MinePulsePattern;
   import net.bigpoint.darkorbit.planet.PlanetPattern;
   import net.bigpoint.darkorbit.portal.PortalAssetPattern;
   import net.bigpoint.darkorbit.portal.PortalPattern;
   import net.bigpoint.darkorbit.resolution.ResolutionPattern;
   import net.bigpoint.darkorbit.resolution.WindowPattern;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.EnginePositionPattern;
   import net.bigpoint.darkorbit.ship.EngineSmokePattern;
   import net.bigpoint.darkorbit.ship.ExpansionPattern;
   import net.bigpoint.darkorbit.ship.ShipPattern;
   import net.bigpoint.darkorbit.station.StationPattern;
   
   public class PatternManager
   {
      
      public static var preloaderPatterns:Array;
      
      public static var colorPatterns:Array;
      
      public static var videoWindowColorPatterns:Array;
      
      public static var nebulaPatterns:Array;
      
      public static var shipPatterns:Array;
      
      public static var expansionClasses:Array;
      
      public static var minePatterns:Array;
      
      public static var planetPatterns:Array;
      
      public static var dronePatterns:Array;
      
      public static var stationPatterns:Array;
      
      public static var portalPatterns:Array;
      
      public static var portalAssetPatterns:Vector.<PortalAssetPattern>;
      
      public static var laserClasses:Array;
      
      public static var muzzleFlashPatterns:Array;
      
      public static var rocketClasses:Array;
      
      public static var collectableClasses:Array;
      
      public static var meteorPatterns:Array;
      
      public static var minimapPatterns:Array;
      
      public static var backgroundPatterns:Array;
      
      public static var backgroundMaskPatterns:Array;
      
      public static var musicPatterns:Array;
      
      public static var pyroClasses:Array;
      
      public static var enginePatterns:Array;
      
      public static var engineSmokePatterns:Array;
      
      public static var rocketSmokePatterns:Array;
      
      public static var enginePositionClasses:Array;
      
      public static var robotPatterns:Array;
      
      public static var soundPatterns:Array;
      
      public static var shipGlowPatterns:Array;
      
      public static var lensflarePatterns:Array;
      
      public static var resolutionPatterns:Array;
      
      public static var boosterPatterns:Array;
      
      public static var orePatterns:Array;
      
      public static var supportedResolutionIds:Array;
      
      private static var easter:Boolean;
      
      public static var minePulsePatterns:Array;
      
      public static var hitpointColorPatterns:Array;
      
      public static var shockwavePatterns:Array;
      
      public static var fireworkPatterns:Array;
      
      public static var achievementPatterns:Array;
      
      public static var techDefaults:Array;
      
      public static var petGearPatterns:Array;
      
      public static var petBuffPatterns:Array;
      
      public static var effectPatterns:Array;
      
      public static var poizonePatterns:Vector.<PoizonePattern>;
      
      private static var preloaderTypeID:int = 0;
      
      public static var ammoPrices:Array = [];
      
      public static var bannerAdPatterns:Dictionary = new Dictionary();
      
      public function PatternManager()
      {
         super();
      }
      
      public static function parsePatterns(param1:XML) : void
      {
         easter = Main.parseBooleanFromString(param1.@easter);
         parsePreloaderPatterns(param1);
         parseDronePatterns(param1);
         parseStationPatterns(param1);
         parseShipPatterns(param1);
         parseExpansionPatterns(param1);
         parsePortalPatterns(param1);
         parsePortalAssetPatterns(param1);
         parseMinePatterns(param1);
         parseFireworkPatterns(param1);
         parseLaserPatterns(param1);
         parseLaserFlashPatterns(param1);
         parseRocketPatterns(param1);
         parsePlanetPatterns(param1);
         parseNebulaPatterns(param1);
         parseCollectablePatterns(param1);
         parseMeteorPatterns(param1);
         parseMinimapPatterns(param1);
         parseBackgroundPatterns(param1);
         parseBackgroundMaskPatterns(param1);
         parseMusicPatterns(param1);
         parseColorPatterns(param1);
         parseVideoWindowColorPatterns(param1);
         parsePyroPatterns(param1);
         parseShockwavePatterns(param1);
         parseEnginePatterns(param1);
         parseEngineSmokePatterns(param1);
         parseRocketSmokePatterns(param1);
         parseEnginePositionPatterns(param1);
         parseRobotPatterns(param1);
         parseSoundPatterns(param1);
         parseShipGlowPatterns(param1);
         parseLensflarePatterns(param1);
         parseResolutionPatterns(param1);
         parseBoosterPatterns(param1);
         parseOrePatterns(param1);
         parseMinePulsePatterns(param1);
         parseHitpointColorPatterns(param1);
         parseAchievementPatterns(param1);
         parseBannerAdPatterns(param1);
         parseTechDefaults(param1);
         parseGearPatterns(param1);
         parseBuffPatterns(param1);
         parseEffectPatterns(param1);
         parsePoizonePatterns(param1);
      }
      
      private static function parsePoizonePatterns(param1:XML) : void
      {
         var _loc2_:PoizonePattern = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:XML = null;
         poizonePatterns = new Vector.<PoizonePattern>();
         for each(_loc8_ in param1.patterns.poizones.poizone)
         {
            _loc3_ = int(_loc8_.@id);
            _loc4_ = _loc8_.@backgroundID;
            _loc5_ = _loc8_.@resKey;
            _loc6_ = int(_loc8_.@avWidth);
            _loc7_ = int(_loc8_.@avHeight);
            _loc2_ = new PoizonePattern(_loc3_,_loc4_,_loc5_,_loc6_,_loc7_);
            while(_loc3_ > poizonePatterns.length)
            {
               poizonePatterns[poizonePatterns.length] = null;
            }
            poizonePatterns[_loc3_] = _loc2_;
         }
      }
      
      private static function parseEffectPatterns(param1:XML) : void
      {
         var _loc2_:EffectPattern = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:XML = null;
         effectPatterns = [];
         for each(_loc6_ in param1.patterns.effects.effect)
         {
            _loc3_ = int(_loc6_.@id);
            _loc4_ = _loc6_.@resKey;
            _loc2_ = new EffectPattern(_loc3_,_loc4_);
            effectPatterns[_loc3_] = _loc2_;
         }
      }
      
      private static function parseBuffPatterns(param1:XML) : void
      {
         var _loc2_:BuffPattern = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:int = 0;
         var _loc7_:XML = null;
         petBuffPatterns = [];
         for each(_loc7_ in param1.patterns.petBuffs.buff)
         {
            _loc3_ = int(_loc7_.@id);
            _loc4_ = _loc7_.@resKey;
            _loc5_ = _loc7_.@languageKey;
            _loc6_ = getEffectID(String(_loc7_.@effect));
            _loc2_ = new BuffPattern(_loc3_,_loc4_,_loc5_,_loc6_);
            petBuffPatterns[_loc3_] = _loc2_;
         }
      }
      
      private static function getEffectID(param1:String) : int
      {
         var _loc2_:int = 0;
         if(param1 == "")
         {
            _loc2_ = -1;
         }
         else
         {
            _loc2_ = int(param1);
         }
         return _loc2_;
      }
      
      private static function parseGearPatterns(param1:XML) : void
      {
         var _loc2_:GearPattern = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:String = null;
         var _loc7_:String = null;
         var _loc8_:String = null;
         var _loc9_:String = null;
         var _loc12_:XML = null;
         petGearPatterns = [];
         var _loc10_:String = param1.patterns.petgears.@normalState;
         var _loc11_:String = param1.patterns.petgears.@activeState;
         for each(_loc12_ in param1.patterns.petgears.gear)
         {
            _loc3_ = int(_loc12_.@id);
            _loc7_ = _loc12_.@effectTarget;
            _loc8_ = _loc12_.@targetList;
            _loc9_ = _loc12_.@suffix;
            _loc6_ = BPLocale.getText("pet_gear_" + _loc12_.@name);
            _loc5_ = _loc12_.@resKey;
            _loc4_ = getEffectID(_loc12_.@effect);
            _loc2_ = new GearPattern(_loc3_,_loc6_,_loc5_,_loc4_,_loc10_,_loc11_,_loc8_,_loc9_);
            petGearPatterns[_loc3_] = _loc2_;
         }
      }
      
      private static function parsePreloaderPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:String = null;
         var _loc4_:Boolean = false;
         var _loc5_:PreloadPattern = null;
         preloaderPatterns = [];
         for each(_loc2_ in param1.patterns.preloadedResources.resource)
         {
            _loc3_ = _loc2_.@resKey;
            _loc4_ = false;
            if(_loc2_.@precache.length() > 0)
            {
               _loc4_ = Boolean(int(_loc2_.@precache));
            }
            _loc5_ = new PreloadPattern(preloaderTypeID,_loc3_,_loc4_);
            var _loc8_:*;
            preloaderPatterns[_loc8_ = preloaderTypeID++] = _loc5_;
         }
      }
      
      private static function parseBannerAdPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:int = 0;
         var _loc7_:BannerAdPattern = null;
         for each(_loc2_ in param1.patterns.bannerads.bannerad)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = String(_loc2_.@baseKey);
            _loc5_ = String(_loc2_.@enumName);
            _loc6_ = int(_loc2_.@assetCount);
            _loc7_ = new BannerAdPattern(_loc3_,_loc4_,_loc5_,_loc6_);
            if(_loc2_.@footer.length() > 0)
            {
               _loc7_.footerKey = "bannerad_footer_" + String(_loc2_.@footer);
            }
            bannerAdPatterns[_loc5_] = _loc7_;
         }
      }
      
      private static function parseTechDefaults(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:TechDefault = null;
         techDefaults = [];
         for each(_loc2_ in param1.patterns.techs.tech)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = String(_loc2_.@linkageID);
            _loc5_ = new TechDefault(_loc3_,_loc4_);
            if(_loc2_.@hasDuration.length() > 0)
            {
               _loc5_.hasDuration = Main.parseBooleanFromString(String(_loc2_.@hasDuration));
            }
            techDefaults[_loc3_] = _loc5_;
         }
      }
      
      public static function parseSpecialOfferPrices(param1:XMLList) : void
      {
         var _loc3_:BannerAdPattern = null;
         var _loc4_:String = null;
         var _loc5_:XML = null;
         var _loc6_:int = 0;
         var _loc7_:Number = NaN;
         var _loc2_:Array = [];
         for each(_loc3_ in bannerAdPatterns)
         {
            _loc2_[_loc3_.id] = _loc3_;
         }
         for each(_loc5_ in param1)
         {
            _loc6_ = int(_loc5_.@id);
            _loc7_ = Number(_loc5_.@price);
            _loc4_ = String(_loc5_.@currency);
            if(_loc2_[_loc6_] != undefined)
            {
               (_loc2_[_loc6_] as BannerAdPattern).price = _loc7_;
            }
         }
         Settings.currency = _loc4_;
      }
      
      private static function parseResolutionPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:ResolutionPattern = null;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:XML = null;
         var _loc10_:XML = null;
         var _loc11_:int = 0;
         var _loc12_:int = 0;
         var _loc13_:int = 0;
         var _loc14_:String = null;
         var _loc15_:String = null;
         var _loc16_:WindowPattern = null;
         resolutionPatterns = [];
         for each(_loc2_ in param1.patterns.resolutions.resolution)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = int(_loc2_.@width);
            _loc5_ = int(_loc2_.@height);
            _loc6_ = new ResolutionPattern(_loc3_,_loc4_,_loc5_);
            _loc7_ = int(_loc2_.minimizedIconSlots.@x);
            _loc8_ = int(_loc2_.minimizedIconSlots.@y);
            if(_loc2_.@userSetting.length() > 0)
            {
               _loc6_.setUserSetting(Boolean(int(_loc2_.@userSetting)));
            }
            for each(_loc9_ in _loc2_.minimizedIconSlots.minimizedIconSlot)
            {
               _loc11_ = int(_loc9_.@iconXPos) + _loc7_;
               _loc12_ = int(_loc9_.@iconYPos) + _loc8_;
               _loc6_.addMinimizedIconsPosition(new Point(_loc11_,_loc12_));
            }
            for each(_loc10_ in _loc2_.windows.window)
            {
               _loc13_ = int(_loc10_.@id);
               _loc14_ = _loc10_.@xPos;
               _loc15_ = _loc10_.@yPos;
               _loc16_ = new WindowPattern(_loc13_);
               if(_loc14_ == "center")
               {
                  _loc16_.setCenterHorizontal();
               }
               else
               {
                  _loc16_.setXPos(int(_loc14_));
               }
               if(_loc15_ == "center")
               {
                  _loc16_.setCenterVertical();
               }
               else
               {
                  _loc16_.setYPos(int(_loc15_));
               }
               _loc6_.addWindowPattern(_loc16_);
            }
            _loc6_.setMainMenuPosition(new Point(int(_loc2_.@mainMenuXPos),int(_loc2_.@mainMenuYPos)));
            _loc6_.setSlotMenuPosition(new Point(int(_loc2_.@slotMenuXPos),int(_loc2_.@slotMenuYPos)));
            resolutionPatterns[_loc3_] = _loc6_;
         }
      }
      
      private static function parseBoosterPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:String = null;
         boosterPatterns = [];
         for each(_loc2_ in param1.patterns.boosters.booster)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = int(_loc2_.@infoFieldID);
            _loc5_ = _loc2_.@resKey;
            _loc6_ = _loc2_.@barKey;
            boosterPatterns[int(_loc3_)] = new BoosterPattern(_loc3_,_loc4_,_loc5_,_loc6_);
         }
      }
      
      private static function parseHitpointColorPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         hitpointColorPatterns = [];
         for each(_loc2_ in param1.hitpointColors.hitpointColor)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = int("0x" + _loc2_.@code);
            hitpointColorPatterns[int(_loc3_)] = _loc4_;
         }
      }
      
      private static function parseOrePatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:OrePattern = null;
         orePatterns = [];
         for each(_loc2_ in param1.patterns.ores.ore)
         {
            _loc3_ = int(_loc2_.@type);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = _loc2_.@languageKey;
            _loc6_ = new OrePattern(_loc3_,_loc4_,_loc5_);
            if(_loc2_.@refiner.length() > 0)
            {
               _loc6_.parseRefiners(_loc2_.@refiner);
            }
            orePatterns[int(_loc3_)] = _loc6_;
         }
      }
      
      private static function parseAchievementPatterns(param1:XML) : void
      {
         var _loc3_:XML = null;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:AchievementPattern = null;
         achievementPatterns = [];
         var _loc2_:int = 0;
         for each(_loc3_ in param1.patterns.achievements.achievement)
         {
            _loc4_ = int(_loc3_.@id);
            _loc2_++;
            _loc5_ = _loc3_.@languageKey;
            _loc6_ = new AchievementPattern(_loc4_,_loc5_);
            achievementPatterns[int(_loc4_)] = _loc6_;
         }
         AchievementPattern.MAX_ID = _loc2_;
      }
      
      private static function parseStationPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         stationPatterns = [];
         for each(_loc2_ in param1.patterns.stations.station)
         {
            _loc3_ = int(_loc2_.@factionID);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = int(_loc2_.@width);
            _loc6_ = int(_loc2_.@height);
            stationPatterns[_loc3_] = new StationPattern(_loc3_,_loc4_,_loc5_,_loc6_);
         }
      }
      
      private static function parseShipPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:ShipPattern = null;
         var _loc6_:int = 0;
         var _loc7_:PreloadPattern = null;
         shipPatterns = [];
         for each(_loc2_ in param1.patterns.ships.ship)
         {
            _loc3_ = int(_loc2_.@type);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = new ShipPattern(_loc3_,_loc4_);
            if(_loc2_.@loopPlay.length() > 0)
            {
               _loc5_.setPlayLoop(Main.parseBooleanFromString(_loc2_.@loopPlay));
            }
            if(_loc2_.@laserClassID.length() > 0)
            {
               _loc5_.setLaserClassID(int(_loc2_.@laserClassID));
            }
            if(_loc2_.@rocketClassID.length() > 0)
            {
               _loc5_.setRocketClassID(int(_loc2_.@rocketClassID));
            }
            if(_loc2_.@expansionClassID.length() > 0)
            {
               _loc5_.setExpansionClassID(int(_loc2_.@expansionClassID));
            }
            if(_loc2_.@labelVisible.length() > 0)
            {
               _loc5_.setLabelVisibility(Main.parseBooleanFromString(_loc2_.@labelVisible));
            }
            if(_loc2_.@labelYOffset.length() > 0)
            {
               _loc5_.setLabelYOffset(int(_loc2_.@labelYOffset));
            }
            if(_loc2_.@energyVisible.length() > 0)
            {
               _loc5_.setEnergyVisibility(Main.parseBooleanFromString(_loc2_.@energyVisible));
            }
            if(_loc2_.@energyYOffset.length() > 0)
            {
               _loc5_.setEnergyYOffset(int(_loc2_.@energyYOffset));
            }
            if(_loc2_.@selectionYOffset.length() > 0)
            {
               _loc5_.setSelectionYOffset(int(_loc2_.@selectionYOffset));
            }
            if(_loc2_.@explodeTypeID.length() > 0)
            {
               _loc5_.setExplodeTypeID(int(_loc2_.@explodeTypeID));
            }
            if(_loc2_.@laserDamageTypeID.length() > 0)
            {
               _loc5_.setLaserDamageType(int(_loc2_.@laserDamageTypeID));
            }
            if(_loc2_.@rocketDamageTypeID.length() > 0)
            {
               _loc5_.setRocketDamageTypeID(int(_loc2_.@rocketDamageTypeID));
            }
            if(_loc2_.@engineTypeID.length() > 0)
            {
               _loc5_.setEngineTypeID(int(_loc2_.@engineTypeID));
            }
            if(_loc2_.@shockwaveID.length() > 0)
            {
               _loc5_.shockwaveID = int(_loc2_.@shockwaveID);
            }
            if(_loc2_.@spaceball.length() > 0)
            {
               _loc5_.setSpaceball(Main.parseBooleanFromString(_loc2_.@spaceball));
            }
            if(_loc2_.@engineSmokeID.length() > 0)
            {
               _loc5_.setEngineSmokeID(int(_loc2_.@engineSmokeID));
            }
            if(_loc2_.@enginePositionClassID.length() > 0)
            {
               _loc5_.setEnginePositionClassID(int(_loc2_.@enginePositionClassID));
            }
            if(_loc2_.@glowID.length() > 0)
            {
               _loc5_.setGlowID(int(_loc2_.@glowID));
            }
            if(_loc2_.@moveRadius.length() > 0)
            {
               _loc6_ = int(_loc2_.@moveRadius);
               _loc5_.moveRadiusSquared = _loc6_ * _loc6_;
            }
            if(_loc2_.@preload.length() > 0)
            {
               _loc5_.setPreload(Main.parseBooleanFromString(_loc2_.@preload));
            }
            if(_loc2_.@precache.length() > 0)
            {
               _loc5_.setPrecache(Main.parseBooleanFromString(_loc2_.@precache));
            }
            if(_loc2_.@unload.length() > 0)
            {
               _loc5_.setUnload(Main.parseBooleanFromString(_loc2_.@unload));
            }
            if(_loc2_.@clickRadius.length() > 0)
            {
               _loc5_.setClickRadius(int(_loc2_.@clickRadius));
            }
            if(_loc2_.@clickOffsetX.length() > 0)
            {
               _loc5_.setClickOffsetX(int(_loc2_.@clickOffsetX));
            }
            if(_loc2_.@clickOffsetY.length() > 0)
            {
               _loc5_.setClickOffsetY(int(_loc2_.@clickOffsetY));
            }
            if(_loc2_.@seekInterval.length() > 0)
            {
               _loc5_.setSeekInterval(int(_loc2_.@seekInterval));
            }
            if(_loc2_.@megaExplosion.length() > 0)
            {
               _loc5_.megaExplosion = Main.parseBooleanFromString(_loc2_.@megaExplosion);
            }
            if(_loc2_.@showCrap.length() > 0)
            {
               _loc5_.showCrap = Main.parseBooleanFromString(_loc2_.@showCrap);
            }
            if(_loc2_.@showPilot.length() > 0)
            {
               _loc5_.showPilot = int(_loc2_.@showPilot);
            }
            if(_loc2_.@pilotDistance.length() > 0)
            {
               _loc5_.pilotDistance = int(_loc2_.@pilotDistance);
            }
            if(_loc2_.@rotatable.length() > 0)
            {
               _loc5_.rotatable = Main.parseBooleanFromString(_loc2_.@rotatable);
            }
            if(_loc2_.@iconClassID.length() > 0)
            {
               _loc5_.iconClassID = int(_loc2_.@iconClassID);
            }
            else
            {
               _loc5_.iconClassID = _loc3_;
            }
            shipPatterns[_loc3_] = _loc5_;
            if(Settings.qualityShip == Settings.QUALITY_HIGH && Settings.preloadUserShips && _loc5_.isPreload())
            {
               _loc7_ = new PreloadPattern(preloaderTypeID,_loc4_,_loc5_.isPrecache());
               var _loc10_:*;
               preloaderPatterns[_loc10_ = preloaderTypeID++] = _loc7_;
            }
         }
      }
      
      private static function parseShipGlowPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:ResourcePattern = null;
         var _loc6_:PreloadPattern = null;
         shipGlowPatterns = [];
         for each(_loc2_ in param1.patterns.shipGlows.shipGlow)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = new ResourcePattern(_loc3_,_loc4_);
            shipGlowPatterns[_loc3_] = _loc5_;
            if(_loc5_.isPreload())
            {
               _loc6_ = new PreloadPattern(preloaderTypeID,_loc4_,_loc5_.isPrecache());
               var _loc9_:*;
               preloaderPatterns[_loc9_ = preloaderTypeID++] = _loc6_;
            }
         }
      }
      
      private static function parsePortalPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:PortalPattern = null;
         portalPatterns = [];
         for each(_loc2_ in param1.patterns.portals.portal)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = int(_loc2_.@width);
            _loc6_ = int(_loc2_.@height);
            _loc7_ = new PortalPattern(_loc3_,_loc4_,_loc5_,_loc6_);
            if(_loc2_.@soundID.length() > 0)
            {
               _loc7_.setSoundID(int(_loc2_.@soundID));
            }
            if(_loc2_.@tdm.length() > 0)
            {
               _loc7_.setTDM(Main.parseBooleanFromString(_loc2_.@tdm));
            }
            portalPatterns[_loc3_] = _loc7_;
         }
      }
      
      private static function parsePortalAssetPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:PortalAssetPattern = null;
         portalAssetPatterns = new Vector.<PortalAssetPattern>();
         for each(_loc2_ in param1.patterns.portalAssets.portalAsset)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = new PortalAssetPattern(_loc3_,_loc4_);
            while(_loc3_ > portalAssetPatterns.length)
            {
               portalAssetPatterns[portalAssetPatterns.length] = null;
            }
            portalAssetPatterns[_loc3_] = _loc5_;
         }
      }
      
      private static function parseMinePatterns(param1:XML) : void
      {
         var _loc2_:MinePattern = null;
         var _loc3_:int = 0;
         var _loc4_:XML = null;
         minePatterns = [];
         for each(_loc4_ in param1.patterns.mines.mine)
         {
            _loc3_ = int(_loc4_.@id);
            _loc2_ = new MinePattern(_loc3_,_loc4_.@resKey);
            if(_loc4_.@explodeType.length() > 0)
            {
               _loc2_.explodeType = int(_loc4_.@explodeType);
            }
            if(_loc4_.@useBitmapClip.length() > 0)
            {
               _loc2_.useBitmapClip = Main.parseBooleanFromString(_loc4_.@useBitmapClip);
            }
            if(_loc4_.@hasStaticEffect.length() > 0)
            {
               _loc2_.hasStaticEffect = Main.parseBooleanFromString(_loc4_.@hasStaticEffect);
            }
            if(_loc4_.@shake.length() > 0)
            {
               _loc2_.shake = Main.parseBooleanFromString(_loc4_.@shake);
            }
            minePatterns[_loc3_] = _loc2_;
         }
      }
      
      private static function parseFireworkPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:FireworkPattern = null;
         fireworkPatterns = [];
         for each(_loc2_ in param1.patterns.fireworks.firework)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = int(_loc2_["class"]);
            _loc5_ = _loc2_.@resKey;
            _loc6_ = new FireworkPattern(_loc4_,_loc3_,_loc5_);
            if(_loc2_.@useBitmapClip.length() > 0)
            {
               _loc6_.useBitmapClip = Main.parseBooleanFromString(_loc2_.@useBitmapClip);
            }
            if(_loc2_.@soundID.length() > 0)
            {
               _loc6_.setSoundID(int(_loc2_.@soundID));
            }
            fireworkPatterns[_loc3_] = _loc6_;
         }
      }
      
      private static function parseMinePulsePatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:uint = 0;
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         minePulsePatterns = [];
         for each(_loc2_ in param1.patterns.minePulseColors.minePulseColor)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = uint("0x" + _loc2_.@color);
            _loc6_ = Number(_loc2_.@alpha);
            _loc7_ = Number(_loc2_.@scale);
            minePulsePatterns[_loc3_] = new MinePulsePattern(_loc3_,_loc4_,_loc5_,_loc6_,_loc7_);
         }
      }
      
      private static function parseLaserPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:int = 0;
         var _loc7_:LaserPattern = null;
         laserClasses = [];
         for each(_loc2_ in param1.patterns.lasers.laser)
         {
            _loc3_ = int(_loc2_["class"]);
            if(!laserClasses[_loc3_])
            {
               laserClasses[_loc3_] = [];
            }
            _loc4_ = int(_loc2_.@type);
            _loc5_ = _loc2_.@resKey;
            _loc6_ = int(_loc2_.@fireRate);
            _loc7_ = new LaserPattern(_loc3_,_loc4_,_loc5_,_loc6_);
            if(_loc2_.@soundID.length() > 0)
            {
               _loc7_.setSoundID(int(_loc2_.@soundID));
            }
            if(_loc2_.@laserFlashID.length() > 0)
            {
               _loc7_.setLaserFlashID(int(_loc2_.@laserFlashID));
            }
            if(_loc2_.@laserLength.length() > 0)
            {
               _loc7_.laserLength = int(_loc2_.@laserLength);
            }
            if(_loc2_.@absorber.length() > 0)
            {
               _loc7_.setAbsorber(Main.parseBooleanFromString(_loc2_.@absorber));
            }
            if(_loc2_.@speed.length() > 0)
            {
               _loc7_.setSpeed(_loc2_.@speed);
            }
            if(_loc2_.@playLoop.length() > 0)
            {
               _loc7_.setPlayLoop(Main.parseBooleanFromString(_loc2_.@playLoop));
            }
            if(_loc2_.@playLoopRotated.length() > 0)
            {
               _loc7_.setPlayLoopRotated(Main.parseBooleanFromString(_loc2_.@playLoopRotated));
            }
            if(_loc2_.@attackLength.length() > 0)
            {
               _loc7_.setAttackLength(int(_loc2_.@attackLength));
            }
            if(_loc2_.@skillResKey.length() > 0)
            {
               _loc7_.skillResKey = _loc2_.@skillResKey;
            }
            laserClasses[_loc3_][_loc4_] = _loc7_;
         }
      }
      
      private static function parsePyroPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:ExplosionPattern = null;
         pyroClasses = [];
         for each(_loc2_ in param1.patterns.pyroEffects.pyroEffect)
         {
            _loc3_ = int(_loc2_["class"]);
            if(!pyroClasses[_loc3_])
            {
               pyroClasses[_loc3_] = [];
            }
            _loc4_ = int(_loc2_.@id);
            _loc5_ = _loc2_.@resKey;
            _loc6_ = new ExplosionPattern(_loc3_,_loc4_,_loc5_);
            if(_loc2_.@soundID.length() > 0)
            {
               _loc6_.setSoundID(int(_loc2_.@soundID));
            }
            if(_loc2_.@useBitmapClip.length() > 0)
            {
               _loc6_.useBitmapClip = Main.parseBooleanFromString(_loc2_.@useBitmapClip);
            }
            if(_loc2_.@precache.length() > 0)
            {
               _loc6_.precache = Main.parseBooleanFromString(_loc2_.@precache);
            }
            if(_loc2_.@displayShockwave.length() > 0)
            {
               _loc6_.displayShockwave = Main.parseBooleanFromString(_loc2_.@displayShockwave);
            }
            pyroClasses[_loc3_][_loc4_] = _loc6_;
         }
      }
      
      private static function parseShockwavePatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         var _loc6_:ShockwavePattern = null;
         shockwavePatterns = [];
         for each(_loc2_ in param1.patterns.shockwaves.shockwave)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = int(_loc2_.@soundID);
            _loc6_ = new ShockwavePattern(_loc3_,_loc4_);
            _loc6_.setSoundID(_loc5_);
            if(_loc2_.@radius.length() > 0)
            {
               _loc6_.radius = _loc2_.@radius;
            }
            if(_loc2_.@duration.length() > 0)
            {
               _loc6_.duration = _loc2_.@duration;
            }
            if(_loc2_.@beginScale.length() > 0)
            {
               _loc6_.beginScale = _loc2_.@beginScale;
            }
            if(_loc2_.@endScale.length() > 0)
            {
               _loc6_.endScale = _loc2_.@endScale;
            }
            if(_loc2_.@maxShockwaves.length() > 0)
            {
               _loc6_.maxShockwaves = _loc2_.@maxShockwaves;
            }
            if(_loc2_.@shakeScreen.length() > 0)
            {
               _loc6_.shakeScreen = Main.parseBooleanFromString(_loc2_.@shakeScreen);
            }
            shockwavePatterns[_loc3_] = _loc6_;
         }
      }
      
      private static function parseDronePatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:int = 0;
         dronePatterns = [];
         for each(_loc2_ in param1.patterns.drones.drone)
         {
            _loc3_ = int(_loc2_.@id);
            if(!dronePatterns[_loc3_])
            {
               dronePatterns[_loc3_] = [];
            }
            _loc4_ = int(_loc2_.@level);
            _loc5_ = _loc2_.@resKey;
            _loc6_ = int(_loc2_.@droneRadius);
            dronePatterns[_loc3_][_loc4_] = new DronePattern(_loc3_,_loc5_,_loc4_,_loc6_);
         }
      }
      
      private static function parseExpansionPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:Dictionary = null;
         var _loc5_:XML = null;
         var _loc6_:ExpansionPattern = null;
         var _loc7_:XML = null;
         var _loc8_:int = 0;
         var _loc9_:Array = null;
         var _loc10_:XML = null;
         var _loc11_:Array = null;
         var _loc12_:Array = null;
         var _loc13_:int = 0;
         var _loc14_:PreloadPattern = null;
         expansionClasses = [];
         for each(_loc2_ in param1.patterns.expansions.expansion)
         {
            _loc3_ = int(_loc2_["class"]);
            if(!expansionClasses[_loc3_])
            {
               expansionClasses[_loc3_] = [];
            }
            _loc4_ = new Dictionary();
            for each(_loc5_ in _loc2_.positionsList)
            {
               _loc4_[String(_loc5_.@name)] = parseCommaCoordinatesList(String(_loc5_.@data));
            }
            for each(_loc7_ in _loc2_.stage)
            {
               _loc8_ = int(_loc7_.@id);
               _loc9_ = [];
               for each(_loc10_ in _loc7_.salvo)
               {
                  _loc11_ = [];
                  _loc12_ = String(_loc10_.@laser).split(",");
                  _loc13_ = 0;
                  while(_loc13_ < _loc12_.length)
                  {
                     _loc11_[_loc13_] = _loc4_[_loc12_[_loc13_]];
                     _loc13_++;
                  }
                  _loc9_.push(_loc11_);
               }
               _loc6_ = new ExpansionPattern(_loc3_,_loc8_,String(_loc7_.@resKey),_loc9_);
               if(Settings.qualityShip == Settings.QUALITY_HIGH && Settings.preloadUserShips && _loc6_.resKey.length > 0)
               {
                  _loc6_.setPreload(true);
                  _loc14_ = new PreloadPattern(preloaderTypeID,_loc6_.resKey,false);
                  var _loc19_:*;
                  preloaderPatterns[_loc19_ = preloaderTypeID++] = _loc14_;
               }
               expansionClasses[_loc3_][_loc8_] = _loc6_;
            }
            expansionClasses[_loc3_][0] = expansionClasses[_loc3_][1];
         }
      }
      
      private static function parseCollectablePatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:CollectablePattern = null;
         collectableClasses = [];
         for each(_loc2_ in param1.patterns.collectables.collectable)
         {
            _loc3_ = int(_loc2_["class"]);
            if(!collectableClasses[_loc3_])
            {
               collectableClasses[_loc3_] = [];
            }
            _loc4_ = int(_loc2_.@id);
            _loc5_ = null;
            if(easter && _loc2_.@easterResKey.length() > 0)
            {
               _loc5_ = _loc2_.@easterResKey;
            }
            else
            {
               _loc5_ = _loc2_.@resKey;
            }
            _loc6_ = new CollectablePattern(_loc3_,_loc4_,_loc5_);
            if(_loc2_.@soundID.length() > 0)
            {
               _loc6_.setSoundID(int(_loc2_.@soundID));
            }
            if(_loc2_.@duration.length() > 0)
            {
               _loc6_.setDuration(int(_loc2_.@duration));
            }
            if(_loc2_.@objectPool.length() > 0)
            {
               _loc6_.hasObjectPool = Main.parseBooleanFromString(_loc2_.@objectPool);
            }
            if(_loc2_.@useBitmapClip.length() > 0)
            {
               _loc6_.useBitmapClip = Main.parseBooleanFromString(_loc2_.@useBitmapClip);
            }
            if(_loc2_.@precache.length() > 0)
            {
               _loc6_.precache = Main.parseBooleanFromString(_loc2_.@precache);
            }
            if(_loc2_.@hasSimpleRapresentation.length() > 0)
            {
               _loc6_.hasSimpleRapresentation = Main.parseBooleanFromString(_loc2_.@hasSimpleRapresentation);
            }
            if(_loc2_.@isHarvestable.length() > 0)
            {
               _loc6_.isHarvestable = Main.parseBooleanFromString(_loc2_.@isHarvestable);
            }
            collectableClasses[_loc3_][_loc4_] = _loc6_;
         }
      }
      
      private static function parseRocketPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:RocketPattern = null;
         rocketClasses = [];
         for each(_loc2_ in param1.patterns.rockets.rocket)
         {
            _loc3_ = int(_loc2_["class"]);
            if(!rocketClasses[_loc3_])
            {
               rocketClasses[_loc3_] = [];
            }
            _loc4_ = int(_loc2_.@id);
            _loc5_ = _loc2_.@resKey;
            _loc6_ = new RocketPattern(_loc3_,_loc4_,_loc5_);
            if(_loc2_.@soundID.length() > 0)
            {
               _loc6_.setSoundID(int(_loc2_.@soundID));
            }
            rocketClasses[_loc3_][_loc4_] = _loc6_;
         }
      }
      
      private static function parseLaserFlashPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:ResourcePattern = null;
         muzzleFlashPatterns = [];
         for each(_loc2_ in param1.patterns.laserFlashes.laserFlash)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = new ResourcePattern(_loc3_,_loc4_);
            muzzleFlashPatterns[_loc3_] = _loc5_;
         }
      }
      
      private static function parsePlanetPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         var _loc6_:PlanetPattern = null;
         planetPatterns = [];
         for each(_loc2_ in param1.patterns.planets.planet)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = int(_loc2_.@radius);
            _loc6_ = new PlanetPattern(_loc3_,_loc4_,_loc5_);
            if(_loc2_.@quarterPlanet.length() > 0)
            {
               _loc6_.setQuarterPlanet(Main.parseBooleanFromString(_loc2_.@quarterPlanet));
            }
            planetPatterns[_loc3_] = _loc6_;
         }
      }
      
      private static function parseNebulaPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         nebulaPatterns = [];
         for each(_loc2_ in param1.patterns.nebulas.nebula)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            nebulaPatterns[_loc3_] = new ResourcePattern(_loc3_,_loc4_);
         }
      }
      
      private static function parseLensflarePatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         lensflarePatterns = [];
         for each(_loc2_ in param1.patterns.lensflares.lensflare)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            lensflarePatterns[_loc3_] = new ResourcePattern(_loc3_,_loc4_);
         }
      }
      
      private static function parseMusicPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:AudioPattern = null;
         musicPatterns = [];
         for each(_loc2_ in param1.patterns.music.track)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = new AudioPattern(_loc3_,_loc4_);
            if(_loc2_.@volume.length() > 0)
            {
               _loc5_.setVolume(_loc2_.@volume);
            }
            musicPatterns[_loc3_] = _loc5_;
         }
      }
      
      private static function parseMeteorPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         meteorPatterns = [];
         for each(_loc2_ in param1.patterns.meteors.meteor)
         {
            _loc3_ = int(_loc2_.@type);
            _loc4_ = _loc2_.@resKey;
            meteorPatterns[_loc3_] = new ResourcePattern(_loc3_,_loc4_);
         }
      }
      
      private static function parseMinimapPatterns(param1:XML) : void
      {
         var _loc2_:int = 0;
         var _loc3_:String = null;
         var _loc4_:XML = null;
         minimapPatterns = [];
         for each(_loc4_ in param1.patterns.minimaps.minimap)
         {
            _loc2_ = int(_loc4_.@type);
            _loc3_ = _loc4_.@resKey;
            minimapPatterns[_loc2_] = new ResourcePattern(_loc2_,_loc3_);
         }
      }
      
      private static function parseBackgroundPatterns(param1:XML) : void
      {
         var _loc2_:String = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:Boolean = false;
         var _loc6_:Boolean = false;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:int = 0;
         var _loc10_:int = 0;
         var _loc11_:String = null;
         var _loc12_:XML = null;
         var _loc13_:uint = 0;
         backgroundPatterns = [];
         for each(_loc12_ in param1.patterns.backgrounds.background)
         {
            _loc2_ = _loc12_.@content;
            _loc3_ = int(_loc12_.@type);
            if(_loc2_ == "resource")
            {
               _loc4_ = _loc12_.@resKey;
               _loc5_ = Main.parseBooleanFromString(_loc12_.@isTiled);
               _loc6_ = Main.parseBooleanFromString(_loc12_.@isReloadable);
               _loc7_ = int(_loc12_.@tileWidth);
               _loc8_ = int(_loc12_.@tileHeight);
               _loc11_ = _loc12_.@order;
               _loc9_ = int(_loc12_.@width);
               _loc10_ = int(_loc12_.@height);
               backgroundPatterns[_loc3_] = new BackgroundPattern(_loc3_,_loc4_,_loc5_,_loc6_,_loc7_,_loc8_,_loc11_,_loc9_,_loc10_);
            }
            else if(_loc2_ == "custom")
            {
               _loc9_ = int(_loc12_.@width);
               _loc10_ = int(_loc12_.@height);
               _loc13_ = uint("0x" + _loc12_.@color);
               backgroundPatterns[_loc3_] = new CustomBackgroundPattern(_loc3_,_loc9_,_loc10_,_loc13_);
            }
         }
      }
      
      private static function parseBackgroundMaskPatterns(param1:XML) : void
      {
         var _loc2_:int = 0;
         var _loc3_:String = null;
         var _loc4_:XML = null;
         backgroundMaskPatterns = [];
         for each(_loc4_ in param1.patterns.backgroundMasks.backgroundMask)
         {
            _loc2_ = int(_loc4_.@type);
            _loc3_ = _loc4_.@resKey;
            backgroundMaskPatterns[_loc2_] = new ResourcePattern(_loc2_,_loc3_);
         }
      }
      
      private static function parseColorPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:String = null;
         var _loc4_:String = null;
         colorPatterns = [];
         for each(_loc2_ in param1.colors.color)
         {
            _loc3_ = _loc2_.@key;
            _loc4_ = _loc2_.@color;
            colorPatterns[_loc3_] = _loc4_;
         }
      }
      
      private static function parseVideoWindowColorPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:String = null;
         var _loc4_:String = null;
         videoWindowColorPatterns = [];
         for each(_loc2_ in param1.colors.videoWindow.color)
         {
            _loc3_ = _loc2_.@key;
            _loc4_ = _loc2_.@color;
            videoWindowColorPatterns[_loc3_] = _loc4_;
         }
      }
      
      private static function parseEnginePatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:AudibleResourcePattern = null;
         enginePatterns = [];
         for each(_loc2_ in param1.patterns.engines.engine)
         {
            _loc3_ = int(_loc2_.@type);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = new AudibleResourcePattern(_loc3_,_loc4_);
            if(_loc2_.@soundID.length() > 0)
            {
               _loc5_.setSoundID(int(_loc2_.@soundID));
            }
            enginePatterns[_loc3_] = _loc5_;
         }
      }
      
      private static function parseEngineSmokePatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:EngineSmokePattern = null;
         engineSmokePatterns = [];
         for each(_loc2_ in param1.patterns.engineSmokes.engineSmoke)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = new EngineSmokePattern(_loc3_,_loc4_);
            if(_loc2_.@rotation.length() > 0)
            {
               _loc5_.setRotation(Main.parseBooleanFromString(_loc2_.@rotation));
            }
            engineSmokePatterns[_loc3_] = _loc5_;
         }
      }
      
      private static function parseRocketSmokePatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:int = 0;
         var _loc6_:Number = NaN;
         var _loc7_:RocketSmokePattern = null;
         rocketSmokePatterns = [];
         for each(_loc2_ in param1.patterns.rocketSmokes.rocketSmoke)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = int(_loc2_.@particleInterval);
            _loc6_ = Number(_loc2_.@particleDuration);
            _loc7_ = new RocketSmokePattern(_loc3_,_loc4_,_loc5_,_loc6_);
            rocketSmokePatterns[_loc3_] = _loc7_;
         }
      }
      
      private static function parseRobotPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         robotPatterns = [];
         for each(_loc2_ in param1.patterns.repairRobots.repairRobot)
         {
            _loc3_ = int(_loc2_.@type);
            _loc4_ = _loc2_.@resKey;
            robotPatterns[_loc3_] = new ResourcePattern(_loc3_,_loc4_);
         }
      }
      
      private static function parseSoundPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:String = null;
         var _loc5_:String = null;
         var _loc6_:AudioPattern = null;
         soundPatterns = [];
         for each(_loc2_ in param1.patterns.sounds.sound)
         {
            _loc3_ = int(_loc2_.@id);
            _loc4_ = _loc2_.@resKey;
            _loc5_ = _loc2_.@soundbank;
            _loc6_ = new AudioPattern(_loc3_,_loc4_,_loc5_);
            if(_loc2_.@volume.length() > 0)
            {
               _loc6_.setVolume(_loc2_.@volume);
            }
            if(_loc2_.@loop.length() > 0)
            {
               _loc6_.setLoop(Main.parseBooleanFromString(_loc2_.@loop));
            }
            soundPatterns[_loc3_] = _loc6_;
         }
      }
      
      private static function parseEnginePositionPatterns(param1:XML) : void
      {
         var _loc2_:XML = null;
         var _loc3_:int = 0;
         var _loc4_:Dictionary = null;
         var _loc5_:XML = null;
         var _loc6_:EnginePositionPattern = null;
         var _loc7_:Array = null;
         var _loc8_:Array = null;
         enginePositionClasses = [];
         for each(_loc2_ in param1.patterns.enginePositions.enginePosition)
         {
            _loc3_ = int(_loc2_["class"]);
            if(!enginePositionClasses[_loc3_])
            {
               enginePositionClasses[_loc3_] = [];
            }
            _loc4_ = new Dictionary();
            for each(_loc5_ in _loc2_.positionsList)
            {
               _loc4_[String(_loc5_.@name)] = parseCommaCoordinatesList(String(_loc5_.@data));
            }
            _loc7_ = [];
            for each(_loc8_ in _loc4_)
            {
               _loc7_.push(_loc8_);
            }
            _loc6_ = new EnginePositionPattern(_loc3_,_loc7_);
            enginePositionClasses[_loc3_] = _loc6_;
         }
      }
      
      public static function getLaserPattern(param1:int, param2:int) : LaserPattern
      {
         var _loc4_:LaserPattern = null;
         var _loc3_:Array = laserClasses[param1];
         if(_loc3_[int(param2)] == undefined)
         {
            _loc3_ = laserClasses[0];
            _loc4_ = _loc3_[int(param2)];
         }
         else
         {
            _loc4_ = _loc3_[int(param2)];
         }
         return _loc4_;
      }
      
      public static function getCollectablePattern(param1:int, param2:int) : CollectablePattern
      {
         var _loc3_:Array = collectableClasses[int(param1)];
         return _loc3_[int(param2)];
      }
      
      public static function getAmmoPrice(param1:int, param2:int) : AmmoPrice
      {
         var _loc3_:AmmoPrice = null;
         for each(_loc3_ in ammoPrices)
         {
            if(_loc3_.category == param1 && _loc3_.ammoID == param2)
            {
               return _loc3_;
            }
         }
         return null;
      }
      
      public static function getExpansionPattern(param1:int, param2:int) : ExpansionPattern
      {
         var _loc3_:Array = expansionClasses[int(param1)];
         var _loc4_:ExpansionPattern = _loc3_[int(param2)];
         if(_loc4_ == null)
         {
            _loc4_ = _loc3_[0];
         }
         return _loc4_;
      }
      
      public static function getEnginePositionPattern(param1:int) : EnginePositionPattern
      {
         return enginePositionClasses[int(param1)];
      }
      
      public static function getPyroPattern(param1:int, param2:int) : ExplosionPattern
      {
         var _loc3_:Array = pyroClasses[int(param1)];
         return _loc3_[int(param2)];
      }
      
      public static function getMuzzleFlashPattern(param1:int) : ResourcePattern
      {
         return muzzleFlashPatterns[int(param1)];
      }
      
      public static function getRocketPattern(param1:int, param2:int) : RocketPattern
      {
         var _loc3_:Array = rocketClasses[int(param1)];
         return _loc3_[int(param2)];
      }
      
      public static function getDronePattern(param1:int, param2:int) : DronePattern
      {
         return dronePatterns[int(param1)][int(param2)];
      }
      
      private static function parseCommaCoordinatesList(param1:String) : Array
      {
         var _loc2_:Array = param1.split(",");
         var _loc3_:Array = [];
         var _loc4_:int = 0;
         while(_loc4_ < _loc2_.length)
         {
            _loc3_.push(new Point(_loc2_[_loc4_],_loc2_[_loc4_ + 1]));
            _loc4_ += 2;
         }
         return _loc3_;
      }
      
      public function getExpansionClasses() : Array
      {
         return expansionClasses;
      }
      
      public function getEnginePositionClasses() : Array
      {
         return enginePositionClasses;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class PoizonePattern
   {
      
      public var id:int;
      
      public var backgroundIDs:Vector.<int>;
      
      public var resKey:String;
      
      public var avWidth:int;
      
      public var avHeight:int;
      
      public function PoizonePattern(param1:int, param2:String, param3:String, param4:int, param5:int)
      {
         var _loc7_:int = 0;
         super();
         this.id = param1;
         this.backgroundIDs = new Vector.<int>();
         var _loc6_:Array = param2.split(",");
         for each(_loc7_ in _loc6_)
         {
            this.backgroundIDs.push(_loc7_);
         }
         this.resKey = param3;
         this.avWidth = param4;
         this.avHeight = param5;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class PreloadPattern extends ResourcePattern
   {
      
      private var precache:Boolean;
      
      public function PreloadPattern(param1:int, param2:String, param3:Boolean)
      {
         super(param1,param2);
         this.precache = param3;
      }
      
      public function isPrecached() : Boolean
      {
         return this.precache;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class RefinerInfo
   {
      
      private var _oreID:int;
      
      private var _count:int;
      
      public function RefinerInfo(param1:int, param2:int)
      {
         super();
         this._oreID = param1;
         this._count = param2;
      }
      
      public function get oreID() : int
      {
         return this._oreID;
      }
      
      public function get count() : int
      {
         return this._count;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   import com.bigpoint.utils.BPLocale;
   
   public class RepairInfo
   {
      
      private static const BILLING_TYPE_FREE:String = "FREE";
      
      private static const BILLING_TYPE_VOUCHER:String = "VOUCHER";
      
      private static const BILLING_TYPE_URIDIUM:String = "URI";
      
      private static const BILLING_TYPE_IMPOSSIBLE:String = "IMPOSSIBLE";
      
      private static const BILLING_CAUSE_PREMIUM:String = "PREMIUM";
      
      private static const BILLING_CAUSE_SHIP:String = "SHIP";
      
      private static const BILLING_CAUSE_MAP:String = "MAP";
      
      private static const BILLING_CAUSE_EVENT:String = "EVENT";
      
      private static const BILLING_CAUSE_GENERAL:String = "GENERAL";
      
      public var billingType:String;
      
      public var detail:String;
      
      public function RepairInfo(param1:String, param2:String)
      {
         super();
         this.detail = param2;
         this.billingType = param1;
      }
      
      public function isRepairPossible() : Boolean
      {
         return this.billingType != BILLING_TYPE_IMPOSSIBLE;
      }
      
      public function getRepairButtonLabel() : String
      {
         var _loc1_:String = null;
         switch(this.billingType)
         {
            case BILLING_TYPE_FREE:
               _loc1_ = BPLocale.getText("btn_repair_for_free");
               break;
            case BILLING_TYPE_VOUCHER:
               _loc1_ = BPLocale.getText("btn_repair_voucher");
               break;
            case BILLING_TYPE_URIDIUM:
               _loc1_ = BPLocale.getText("btn_repair_for_uri").replace(/%count%/,this.detail);
               break;
            case BILLING_TYPE_IMPOSSIBLE:
               _loc1_ = BPLocale.getText("btn_repair_impossible");
         }
         return _loc1_;
      }
      
      public function getMessage() : String
      {
         var _loc1_:* = null;
         switch(this.billingType)
         {
            case BILLING_TYPE_FREE:
               _loc1_ = BPLocale.getText("msg_repair_now") + " ";
               switch(this.detail)
               {
                  case BILLING_CAUSE_EVENT:
                     _loc1_ += BPLocale.getText("msg_free_repair_cause_event");
                     break;
                  case BILLING_CAUSE_SHIP:
                     _loc1_ += BPLocale.getText("msg_free_repair_cause_ship");
                     break;
                  case BILLING_CAUSE_PREMIUM:
                     _loc1_ += BPLocale.getText("msg_free_repair_cause_premium");
                     break;
                  case BILLING_CAUSE_MAP:
                     _loc1_ += BPLocale.getText("msg_free_repair_cause_map");
                     break;
                  case BILLING_CAUSE_GENERAL:
                     _loc1_ += BPLocale.getText("msg_free_repair_cause_general");
               }
               break;
            case BILLING_TYPE_VOUCHER:
               _loc1_ = BPLocale.getText("msg_repair_now") + " ";
               _loc1_ += BPLocale.getText("msg_repair_voucher") + " ";
               if(this.detail == "1")
               {
                  _loc1_ += BPLocale.getText("msg_repair_addon_one_voucher_left");
                  break;
               }
               _loc1_ += BPLocale.getText("msg_repair_addon_vouchers_left").replace(/%count%/,this.detail);
               break;
            case BILLING_TYPE_URIDIUM:
               _loc1_ = BPLocale.getText("msg_repair_now") + " ";
               _loc1_ += BPLocale.getText("msg_repair_for_uri").replace(/%count%/,this.detail);
               break;
            case BILLING_TYPE_IMPOSSIBLE:
               _loc1_ = BPLocale.getText("msg_repair_impossible");
         }
         return _loc1_;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class ResourcePattern extends Pattern
   {
      
      public var resKey:String;
      
      private var preload:Boolean;
      
      private var precache:Boolean;
      
      private var unload:Boolean = true;
      
      public function ResourcePattern(param1:int, param2:String)
      {
         super(param1,Pattern.CONTENT_RESOURCE);
         this.resKey = param2;
      }
      
      public function getResKey() : String
      {
         return this.resKey;
      }
      
      public function isPreload() : Boolean
      {
         return this.preload;
      }
      
      public function setPreload(param1:Boolean) : void
      {
         this.preload = param1;
      }
      
      public function isPrecache() : Boolean
      {
         return this.precache;
      }
      
      public function setPrecache(param1:Boolean) : void
      {
         this.precache = param1;
      }
      
      public function isUnload() : Boolean
      {
         return this.unload;
      }
      
      public function setUnload(param1:Boolean) : void
      {
         this.unload = param1;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class RocketSmokePattern extends ResourcePattern
   {
      
      public var particleInterval:int;
      
      public var particleDuration:Number;
      
      public function RocketSmokePattern(param1:int, param2:String, param3:int, param4:Number)
      {
         super(param1,param2);
         this.particleInterval = param3;
         this.particleDuration = param4;
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class ShockwavePattern extends AudibleResourcePattern
   {
      
      public var radius:int = 300;
      
      public var duration:Number = 2;
      
      public var beginScale:Number = 1;
      
      public var endScale:Number = 0.25;
      
      public var maxShockwaves:int = 40;
      
      public var shakeScreen:Boolean;
      
      public function ShockwavePattern(param1:int, param2:String)
      {
         super(param1,param2);
      }
   }
}

package net.bigpoint.darkorbit.pattern
{
   public class TechDefault
   {
      
      public var id:int;
      
      public var linkageID:String;
      
      public var hasDuration:Boolean;
      
      public var hasCharges:Boolean;
      
      public function TechDefault(param1:int, param2:String)
      {
         super();
         this.linkageID = param2;
         this.id = param1;
      }
   }
}

package net.bigpoint.darkorbit.planet
{
   import flash.display.BitmapData;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.geom.Matrix;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.pattern.DynamicResource;
   
   public class Planet extends DynamicResource
   {
      
      private static const logger:ILogger = Log.getLogger("DarkOrbitRF.Planet");
      
      public var pFactor:Number;
      
      public var layerIndex:Number;
      
      public var x:int;
      
      public var y:int;
      
      public var rotation:int;
      
      private var iconBitmapData:BitmapData;
      
      private var _pattern:PlanetPattern;
      
      public var lightsourceID:int;
      
      private var eclipse:MovieClip;
      
      private var _originalPos:Point = new Point();
      
      public var _originPoint:Rectangle;
      
      public function Planet(param1:PlanetPattern, param2:int, param3:int, param4:int, param5:int, param6:Number, param7:int, param8:int = -1)
      {
         super(param2);
         this.rotation = param5;
         this._pattern = param1;
         this.x = param3 * 10 / param6;
         this.y = param4 * 10 / param6;
         this.pFactor = param6;
         this.layerIndex = param7;
         this.lightsourceID = param8;
         this._originalPos.x = param3;
         this._originalPos.y = param4;
      }
      
      public function getLayerIndex() : Number
      {
         return this.layerIndex;
      }
      
      public function setIcon(param1:int) : void
      {
         param1 += 4;
         var _loc2_:MovieClip = clip;
         var _loc3_:Sprite = new Sprite();
         _loc2_.addChild(_loc3_);
         this._originPoint = _loc2_.getBounds(_loc3_);
         _loc2_.removeChild(_loc3_);
         var _loc4_:Matrix = new Matrix();
         _loc4_.translate(this._originPoint.x * -1,this._originPoint.y * -1);
         _loc4_.scale(scaleSize.x * this.pFactor,scaleSize.y * this.pFactor);
         var _loc5_:int = scaleSize.x * this.pFactor * _loc2_.width;
         var _loc6_:int = scaleSize.y * this.pFactor * _loc2_.height;
         if(_loc5_ > PlanetManager.MIN_ICON_SIZE && _loc6_ > PlanetManager.MIN_ICON_SIZE)
         {
            this.iconBitmapData = new BitmapData(_loc5_,_loc6_,true,10);
            this.iconBitmapData.draw(_loc2_,_loc4_);
         }
      }
      
      public function getIcon() : BitmapData
      {
         return this.iconBitmapData;
      }
      
      public function deleteIcon() : void
      {
         this.iconBitmapData = null;
      }
      
      public function attachEclipse() : void
      {
         this.eclipse = ResourceManager.getMovieClip("eclipse","eclipse");
         var _loc1_:Number = 100 / 515 * (this._pattern.getRadius() * 2) / 100;
         this.eclipse.scaleX = _loc1_;
         this.eclipse.scaleY = _loc1_;
         this.eclipse.blendMode = "overlay";
         clip.addChild(this.eclipse);
      }
      
      public function updateEclipse(param1:int) : void
      {
         if(this.eclipse != null)
         {
            this.eclipse.rotation = param1;
         }
      }
      
      public function toString() : String
      {
         return "Planet layerIndex" + this.layerIndex;
      }
      
      public function get originalPos() : Point
      {
         return this._originalPos;
      }
      
      public function get originPoint() : Rectangle
      {
         return this._originPoint;
      }
      
      public function get pattern() : PlanetPattern
      {
         return this._pattern;
      }
   }
}

package net.bigpoint.darkorbit.planet
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class PlanetManager
   {
      
      public static const logger:ILogger = Log.getLogger("PlanetManager");
      
      public static const CLIP_LOADED:String = "clipLoaded";
      
      public static const MIN_ICON_SIZE:int = 4;
      
      private var map:Map;
      
      private var halfScreenWidth:int;
      
      private var halfScreenHeight:int;
      
      private var timer:Timer;
      
      private var planetCnt:int = 0;
      
      public var clipLoadedEvent:EventDispatcher = new EventDispatcher();
      
      public function PlanetManager(param1:Map)
      {
         super();
         this.map = param1;
         this.halfScreenWidth = ScreenManager.getHalfScreenWidth();
         this.halfScreenHeight = ScreenManager.getHalfScreenHeight();
         param1.getMain().screenManager.planets = [];
      }
      
      public function startTimer() : void
      {
         this.timer = new Timer(25,0);
         this.timer.addEventListener(TimerEvent.TIMER,this.handleTimer);
         this.timer.start();
      }
      
      public function cleanup() : void
      {
         var _loc2_:Sprite = null;
         var _loc3_:Planet = null;
         var _loc1_:Array = this.map.getMain().screenManager.planets;
         var _loc4_:int = 0;
         while(_loc4_ < _loc1_.length)
         {
            _loc3_ = _loc1_[_loc4_];
            _loc2_ = this.map.getMain().screenManager.getBackgroundLayer(_loc3_.getLayerIndex());
            if(_loc3_.clip != null && _loc2_.contains(_loc3_.clip))
            {
               _loc2_.removeChild(_loc3_.clip);
            }
            _loc3_.removeClip();
            _loc4_++;
         }
         this.map.getMain().screenManager.planets = null;
         this.map.getMain().screenManager.planets = [];
         this.map = null;
      }
      
      private function attachClip(param1:Planet, param2:String) : void
      {
         var _loc3_:Sprite = this.map.getMain().screenManager.getBackgroundLayer(param1.getLayerIndex());
         if(param1.clip != null && _loc3_.contains(param1.clip))
         {
            return;
         }
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(param2));
         var _loc5_:MovieClip = MovieClip(_loc4_.getEmbededMovieClip("planet"));
         _loc5_.mouseEnabled = Main.mouseEventsEnabled;
         _loc5_.mouseChildren = Main.mouseEventsEnabled;
         _loc5_.x = param1.x;
         _loc5_.y = param1.y;
         _loc5_.rotation = param1.rotation;
         param1.clip = _loc5_;
         param1.clip.alpha = 0;
         _loc3_.addChild(param1.clip);
      }
      
      private function removeClip(param1:Planet) : void
      {
         var _loc2_:Sprite = this.map.getMain().screenManager.getBackgroundLayer(param1.getLayerIndex());
         if(param1.clip != null && _loc2_.contains(param1.clip))
         {
            _loc2_.removeChild(param1.clip);
            param1.clip = null;
         }
      }
      
      private function handleTimer(param1:TimerEvent) : void
      {
         if(Settings.qualityBackground >= Settings.QUALITY_GOOD)
         {
            if(this.map != null && this.map.getShipManager() != null && this.map.getShipManager().getHero() != null)
            {
               this.fadeInPlanets();
            }
         }
      }
      
      public function fadeInPlanets() : void
      {
         var _loc2_:Planet = null;
         var _loc1_:Array = this.map.getMain().screenManager.planets;
         if(this.planetCnt == _loc1_.length)
         {
            this.timer.stop();
            this.timer.removeEventListener(TimerEvent.TIMER,this.handleTimer);
         }
         if(_loc1_ != null)
         {
            for each(_loc2_ in _loc1_)
            {
               if(_loc2_ != null && _loc2_.clip != null && _loc2_.clip.alpha == 0)
               {
                  TweenLite.to(_loc2_.clip,0.5,{"alpha":1});
                  ++this.planetCnt;
               }
            }
         }
         this.clipLoadedEvent.dispatchEvent(new Event(CLIP_LOADED));
      }
      
      private function onClipLoaded(param1:SWFFinisher) : void
      {
         var _loc4_:Planet = null;
         var _loc5_:PlanetPattern = null;
         var _loc2_:Array = this.map.getMain().screenManager.planets;
         if(Settings.unloadResources)
         {
            this.map.addFinisherToList(param1);
         }
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_.length)
         {
            _loc4_ = _loc2_[_loc3_];
            _loc5_ = PatternManager.planetPatterns[_loc4_.getTypeID()];
            if(_loc5_.getResKey() == param1.fileVO.id)
            {
               this.attachClip(_loc4_,_loc5_.getResKey());
            }
            _loc3_++;
         }
      }
      
      public function preparePlanet(param1:int, param2:int, param3:int, param4:int, param5:Number, param6:int, param7:int = -1) : void
      {
         var _loc8_:Array = this.map.getMain().screenManager.planets;
         var _loc9_:PlanetPattern = PatternManager.planetPatterns[int(param1)];
         var _loc10_:Planet = new Planet(_loc9_,param1,param2,param3,param4,param5,param6,param7);
         if(Settings.qualityBackground >= Settings.QUALITY_GOOD)
         {
            ResourceManager.fileCollection.load(_loc9_.getResKey(),this.onClipLoaded);
         }
         _loc8_.push(_loc10_);
         _loc8_.sortOn("layerIndex",Array.NUMERIC);
      }
      
      public function updatePlanetQuality(param1:int) : void
      {
         var _loc2_:Array = null;
         var _loc3_:Planet = null;
         var _loc4_:PlanetPattern = null;
         if(Settings.qualityBackground != param1)
         {
            _loc2_ = this.map.getMain().screenManager.planets;
            for each(_loc3_ in _loc2_)
            {
               if(_loc3_ != null)
               {
                  switch(Settings.qualityBackground)
                  {
                     case Settings.QUALITY_LOW:
                     case Settings.QUALITY_MEDIUM:
                        this.removeClip(_loc3_);
                        break;
                     case Settings.QUALITY_GOOD:
                     case Settings.QUALITY_HIGH:
                        _loc4_ = _loc3_.pattern;
                  }
                  if(ResourceManager.fileCollection.isLoaded(_loc4_.getResKey()))
                  {
                     this.attachClip(_loc3_,_loc4_.getResKey());
                     this.fadeInPlanets();
                  }
                  else
                  {
                     ResourceManager.fileCollection.load(_loc4_.getResKey(),this.onClipLoaded);
                  }
               }
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.planet
{
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   
   public class PlanetPattern extends ResourcePattern
   {
      
      private var radius:int;
      
      private var quarterPlanet:Boolean;
      
      public var radiusAndPaddingSquared:Number;
      
      public function PlanetPattern(param1:int, param2:String, param3:int)
      {
         super(param1,param2);
         this.radius = param3;
         this.radiusAndPaddingSquared = (param3 + 5) * (param3 + 5);
      }
      
      public function getRadius() : int
      {
         return this.radius;
      }
      
      public function isQuarterPlanet() : Boolean
      {
         return this.quarterPlanet;
      }
      
      public function setQuarterPlanet(param1:Boolean) : void
      {
         this.quarterPlanet = param1;
      }
   }
}

package net.bigpoint.darkorbit.portal
{
   import flash.display.MovieClip;
   import net.bigpoint.darkorbit.pattern.DynamicResource;
   
   public class Portal extends DynamicResource
   {
      
      private var id:int;
      
      public var factionID:int;
      
      private var posX:int;
      
      private var posY:int;
      
      private var activeClip:MovieClip;
      
      public var visibleOnMiniMap:Boolean;
      
      public var assetIDs:Vector.<int>;
      
      public function Portal(param1:int, param2:int, param3:int, param4:int, param5:int, param6:Boolean, param7:Vector.<int>)
      {
         super(param3);
         this.posX = param4;
         this.posY = param5;
         this.id = param1;
         this.factionID = param2;
         this.visibleOnMiniMap = param6;
         this.assetIDs = param7;
      }
      
      public function setActiveClip(param1:MovieClip) : void
      {
         this.activeClip = param1;
      }
      
      public function getID() : int
      {
         return this.id;
      }
      
      public function getPosX() : int
      {
         return this.posX;
      }
      
      public function getPosY() : int
      {
         return this.posY;
      }
      
      public function getActiveClip() : MovieClip
      {
         return this.activeClip;
      }
      
      public function cleanup() : void
      {
         removeClip();
         this.activeClip = null;
      }
   }
}

package net.bigpoint.darkorbit.portal
{
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   
   public class PortalAssetPattern extends ResourcePattern
   {
      
      public function PortalAssetPattern(param1:int, param2:String)
      {
         super(param1,param2);
      }
   }
}

package net.bigpoint.darkorbit.portal
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.map.MiniMap;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class PortalManager
   {
      
      public static const logger:ILogger = Log.getLogger("PortalManager");
      
      private var portals:Vector.<Portal> = new Vector.<Portal>();
      
      private var portalAssets:Vector.<BitmapClip> = new Vector.<BitmapClip>();
      
      private var _map:Map;
      
      private var halfScreenWidth:int;
      
      private var halfScreenHeight:int;
      
      public function PortalManager(param1:Map)
      {
         super();
         this._map = param1;
         this.halfScreenWidth = ScreenManager.getHalfScreenWidth();
         this.halfScreenHeight = ScreenManager.getHalfScreenHeight();
      }
      
      public function deletePortal(param1:int) : void
      {
         var _loc4_:Portal = null;
         var _loc5_:MovieClip = null;
         var _loc6_:MovieClip = null;
         var _loc2_:Sprite = this._map.getMain().screenManager.getPortalLayer();
         var _loc3_:int = 0;
         while(_loc3_ < this.portals.length)
         {
            _loc4_ = this.portals[_loc3_];
            if(_loc4_.getID() == param1)
            {
               _loc5_ = _loc4_.clip;
               if(_loc5_ != null && _loc2_.contains(_loc5_))
               {
                  _loc2_.removeChild(_loc5_);
               }
               _loc6_ = _loc4_.getActiveClip();
               if(_loc6_ != null && _loc2_.contains(_loc6_))
               {
                  _loc2_.removeChild(_loc6_);
               }
               _loc4_.cleanup();
               this.portals.splice(_loc3_,1);
               break;
            }
            _loc3_++;
         }
      }
      
      public function deleteAllPortals() : void
      {
         this.cleanup();
      }
      
      public function cleanup() : void
      {
         var _loc3_:BitmapClip = null;
         var _loc4_:Portal = null;
         var _loc5_:MovieClip = null;
         var _loc6_:MovieClip = null;
         var _loc1_:Sprite = this._map.getMain().screenManager.getPortalLayer();
         var _loc2_:int = 0;
         while(_loc2_ < this.portals.length)
         {
            _loc4_ = this.portals[_loc2_];
            _loc5_ = _loc4_.clip;
            if(_loc5_ != null && _loc1_.contains(_loc5_))
            {
               _loc1_.removeChild(_loc5_);
            }
            _loc6_ = _loc4_.getActiveClip();
            if(_loc6_ != null && _loc1_.contains(_loc6_))
            {
               _loc1_.removeChild(_loc6_);
            }
            _loc4_.cleanup();
            _loc2_++;
         }
         for each(_loc3_ in this.portalAssets)
         {
            if(_loc3_ != null && _loc1_.contains(_loc3_))
            {
               _loc1_.removeChild(_loc3_);
            }
         }
         this.portals = new Vector.<Portal>();
         this.portalAssets = new Vector.<BitmapClip>();
      }
      
      private function attachClip(param1:Portal, param2:String) : void
      {
         var _loc6_:int = 0;
         var _loc7_:PortalAssetPattern = null;
         var _loc8_:SWFFinisher = null;
         var _loc3_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(param2));
         var _loc4_:MovieClip = MovieClip(_loc3_.getEmbededMovieClip("pulseAnimation"));
         _loc4_.mouseEnabled = Main.mouseEventsEnabled;
         _loc4_.mouseChildren = Main.mouseEventsEnabled;
         _loc4_.x = param1.getPosX();
         _loc4_.y = param1.getPosY();
         _loc4_.play();
         param1.clip = _loc4_;
         var _loc5_:MovieClip = MovieClip(_loc3_.getEmbededMovieClip("activeAnimation"));
         _loc5_.x = param1.getPosX();
         _loc5_.y = param1.getPosY();
         _loc5_.mouseEnabled = Main.mouseEventsEnabled;
         _loc5_.mouseChildren = Main.mouseEventsEnabled;
         _loc5_.play();
         param1.setActiveClip(_loc5_);
         this._map.getMain().screenManager.getPortalLayer().addChild(_loc4_);
         for each(_loc6_ in param1.assetIDs)
         {
            _loc7_ = PatternManager.portalAssetPatterns[_loc6_];
            if(ResourceManager.fileCollection.isLoaded(_loc7_.getResKey()))
            {
               _loc8_ = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc7_.getResKey()));
               this.onAssetLoaded(_loc8_);
            }
            else
            {
               ResourceManager.fileCollection.load(_loc7_.getResKey(),this.onAssetLoaded);
            }
         }
      }
      
      private function attachAsset(param1:Portal, param2:String) : void
      {
         var _loc3_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(param2));
         var _loc4_:PortalPattern = PatternManager.portalPatterns[int(param1.getTypeID())];
         if(_loc4_ == null)
         {
            logger.fatal("portal pattern for typeID:" + param1.getTypeID() + " not found!");
         }
         var _loc5_:BitmapClip = new BitmapClip(_loc3_.getEmbededMovieClip("mc",true),param2);
         _loc5_.x = param1.getPosX() + _loc4_.getWidth() / 2 + 50;
         _loc5_.y = param1.getPosY() + _loc4_.getHeight() / 2;
         this.portalAssets.push(_loc5_);
         this._map.getMain().screenManager.getPortalLayer().addChild(_loc5_);
      }
      
      private function onAssetLoaded(param1:SWFFinisher) : void
      {
         var _loc3_:Portal = null;
         var _loc4_:PortalAssetPattern = null;
         var _loc5_:int = 0;
         if(Settings.unloadResources)
         {
            this._map.addFinisherToList(param1);
         }
         var _loc2_:int = 0;
         while(_loc2_ < this.portals.length)
         {
            _loc3_ = this.portals[_loc2_];
            for each(_loc5_ in _loc3_.assetIDs)
            {
               _loc4_ = PatternManager.portalAssetPatterns[_loc5_];
               if(_loc4_ == null)
               {
                  logger.fatal("portalAsset pattern for typeID:" + _loc5_ + " not found!");
               }
               else if(_loc4_.getResKey() == param1.fileVO.id)
               {
                  this.attachAsset(_loc3_,_loc4_.getResKey());
               }
            }
            _loc2_++;
         }
      }
      
      private function onClipLoaded(param1:SWFFinisher) : void
      {
         var _loc3_:Portal = null;
         var _loc4_:PortalPattern = null;
         if(Settings.unloadResources)
         {
            this._map.addFinisherToList(param1);
         }
         var _loc2_:int = 0;
         while(_loc2_ < this.portals.length)
         {
            _loc3_ = this.portals[_loc2_];
            _loc4_ = PatternManager.portalPatterns[int(_loc3_.getTypeID())];
            if(_loc4_ == null)
            {
               logger.fatal("portal pattern for typeID:" + _loc3_.getTypeID() + " not found!");
            }
            else if(_loc4_.getResKey() == param1.fileVO.id)
            {
               this.attachClip(_loc3_,_loc4_.getResKey());
            }
            _loc2_++;
         }
      }
      
      public function playPortalAnimation(param1:int, param2:Boolean = false) : void
      {
         var _loc4_:Portal = null;
         var _loc5_:MovieClip = null;
         var _loc6_:MovieClip = null;
         var _loc7_:PortalPattern = null;
         var _loc8_:SWFFinisher = null;
         var _loc9_:MovieClip = null;
         var _loc10_:int = 0;
         var _loc3_:int = 0;
         while(_loc3_ < this.portals.length)
         {
            _loc4_ = this.portals[_loc3_];
            if(_loc4_ != null && _loc4_.getID() == param1)
            {
               _loc5_ = _loc4_.clip;
               _loc6_ = _loc4_.getActiveClip();
               if(_loc5_ != null)
               {
                  _loc5_.alpha = 1;
                  TweenLite.to(_loc5_,0.5,{"alpha":0});
               }
               if(_loc6_ != null)
               {
                  if(!this._map.getMain().screenManager.getPortalLayer().contains(_loc6_))
                  {
                     this._map.getMain().screenManager.getPortalLayer().addChild(_loc6_);
                  }
                  _loc6_.x = _loc4_.getPosX();
                  _loc6_.y = _loc4_.getPosY();
                  _loc6_.alpha = 0;
                  TweenLite.to(_loc6_,0.5,{"alpha":1});
               }
               _loc7_ = PatternManager.portalPatterns[int(_loc4_.getTypeID())];
               _loc8_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("portalAnimation0"));
               _loc9_ = MovieClip(_loc8_.getEmbededMovieClip("mc"));
               _loc9_.x = _loc4_.getPosX();
               _loc9_.y = _loc4_.getPosY();
               this._map.getMain().screenManager.getPortalLayer().addChild(_loc9_);
               ScreenManager.playAnimation(_loc9_,30);
               if(param2)
               {
                  TweenMax.delayedCall(6,this.restoreIdleGate,[param1]);
               }
               if(_loc7_ != null)
               {
                  _loc10_ = _loc7_.getSoundID();
                  if(_loc10_ != -1)
                  {
                     AudioManager.playSoundEffect(_loc10_,false,false,_loc9_.x,_loc9_.y);
                  }
               }
               break;
            }
            _loc3_++;
         }
      }
      
      private function restoreIdleGate(param1:int) : void
      {
         var _loc3_:Portal = null;
         var _loc4_:MovieClip = null;
         var _loc5_:MovieClip = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.portals.length)
         {
            _loc3_ = this.portals[_loc2_];
            if(_loc3_.getID() == param1)
            {
               _loc4_ = _loc3_.clip;
               _loc5_ = _loc3_.getActiveClip();
               if(_loc4_ != null)
               {
                  _loc4_.alpha = 1;
                  TweenLite.to(_loc4_,0.5,{"alpha":1});
               }
               if(_loc5_ != null)
               {
                  if(this._map.getMain().screenManager.getPortalLayer().contains(_loc5_))
                  {
                     _loc5_.alpha = 1;
                     TweenLite.to(_loc5_,0.5,{"alpha":0});
                  }
               }
            }
            _loc2_++;
         }
      }
      
      public function createPortal(param1:int, param2:int, param3:int, param4:int, param5:int, param6:Boolean, param7:Vector.<int>) : void
      {
         var _loc10_:MiniMap = null;
         if(this.portalExist(param1))
         {
            return;
         }
         var _loc8_:Portal = new Portal(param1,param2,param3,param4,param5,param6,param7);
         this.portals.push(_loc8_);
         var _loc9_:PortalPattern = PatternManager.portalPatterns[int(_loc8_.getTypeID())];
         ResourceManager.fileCollection.load(_loc9_.getResKey(),this.onClipLoaded);
         _loc10_ = this._map.getMinimapManager().getMiniMap();
         if(_loc10_ != null)
         {
            _loc10_.redrawEntities();
         }
      }
      
      public function getPortals() : Vector.<Portal>
      {
         return this.portals;
      }
      
      private function portalExist(param1:int) : Boolean
      {
         var _loc3_:Portal = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.portals.length)
         {
            _loc3_ = this.portals[_loc2_];
            if(_loc3_.getID() == param1)
            {
               return true;
            }
            _loc2_++;
         }
         return false;
      }
   }
}

package net.bigpoint.darkorbit.portal
{
   import net.bigpoint.darkorbit.pattern.AudibleResourcePattern;
   
   public class PortalPattern extends AudibleResourcePattern
   {
      
      private var width:int;
      
      private var height:int;
      
      private var tdm:Boolean;
      
      public function PortalPattern(param1:int, param2:String, param3:int, param4:int)
      {
         super(param1,param2);
         this.width = param3;
         this.height = param4;
      }
      
      public function getWidth() : int
      {
         return this.width;
      }
      
      public function getHeight() : int
      {
         return this.height;
      }
      
      public function isTDM() : Boolean
      {
         return this.tdm;
      }
      
      public function setTDM(param1:Boolean) : void
      {
         this.tdm = param1;
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   import mx.logging.ILogger;
   import mx.logging.Log;
   
   public class Case implements ICase
   {
      
      private static const logger:ILogger = Log.getLogger("Case");
      
      public var id:uint;
      
      private var _conditions:Array = [];
      
      private var _cases:Array;
      
      private var _active:Boolean;
      
      private var _mandatory:Boolean;
      
      private var _ordered:Boolean;
      
      private var _mandatory_count:uint = 0;
      
      private var _treeText:String;
      
      private var _children:Array = [];
      
      private var _mandatory_child_count:int;
      
      private var _visibility:int;
      
      private var _showLong:Boolean = true;
      
      public function Case()
      {
         super();
      }
      
      public function updateCondtition(param1:int, param2:int, param3:int, param4:Boolean) : Boolean
      {
         var _loc6_:* = undefined;
         var _loc5_:int = 0;
         while(_loc5_ < this.children.length)
         {
            _loc6_ = this.children[_loc5_];
            if(_loc6_ != null)
            {
               if(_loc6_ is Case)
               {
                  if(Case(_loc6_).updateCondtition(param1,param2,param3,param4))
                  {
                     return true;
                  }
               }
               else if(ICondition(_loc6_).updateCondtition(param1,param2,param3,param4))
               {
                  return true;
               }
            }
            _loc5_++;
         }
         return false;
      }
      
      public function toTextTree() : String
      {
         this._treeText = "Case " + this.id + "\n";
         var _loc1_:int = 0;
         while(_loc1_ < this._children.length)
         {
            if(this._children[_loc1_] != null)
            {
               this._treeText += this._children[_loc1_].toTextTree();
            }
            _loc1_++;
         }
         return this._treeText;
      }
      
      public function get conditions() : Array
      {
         return this._conditions;
      }
      
      public function get cases() : Array
      {
         return this._cases;
      }
      
      public function get active() : Boolean
      {
         return this._active;
      }
      
      public function set active(param1:Boolean) : void
      {
         this._active = param1;
      }
      
      public function get mandatory() : Boolean
      {
         return this._mandatory;
      }
      
      public function set mandatory(param1:Boolean) : void
      {
         this._mandatory = param1;
      }
      
      public function get ordered() : Boolean
      {
         return this._ordered;
      }
      
      public function set ordered(param1:Boolean) : void
      {
         this._ordered = param1;
      }
      
      public function get mandatory_count() : uint
      {
         return this._mandatory_count;
      }
      
      public function set mandatory_count(param1:uint) : void
      {
         this._mandatory_count = param1;
      }
      
      public function addCaseAt(param1:Case, param2:uint) : void
      {
         if(this._cases == null)
         {
            this._cases = [];
         }
         this._cases[param2] = param1;
         ++this._mandatory_child_count;
         this.addQuestChildElement(param1);
      }
      
      public function addCase(param1:Case) : void
      {
         if(this._cases == null)
         {
            this._cases = [];
         }
         this.addCaseAt(param1,this._cases.length);
      }
      
      public function addConditionAt(param1:ICondition, param2:uint) : void
      {
         if(this._conditions == null)
         {
            this._conditions = [];
         }
         if(param1.definition.VALIDATABLE)
         {
            ++this._mandatory_child_count;
         }
         this._conditions[param2] = param1;
         this.addQuestChildElement(param1);
      }
      
      private function addQuestChildElement(param1:*) : void
      {
         this._children.push(param1);
      }
      
      public function addCondition(param1:ICondition) : void
      {
         if(this._conditions == null)
         {
            this._conditions = [];
         }
         this.addConditionAt(param1,this._conditions.length);
      }
      
      public function get children() : Array
      {
         return this._children;
      }
      
      public function get mandatory_child_count() : int
      {
         return this._mandatory_child_count;
      }
      
      public function get visibility() : int
      {
         return this._visibility;
      }
      
      public function set visibility(param1:int) : void
      {
         this._visibility = param1;
      }
      
      public function set showLong(param1:Boolean) : void
      {
         this._showLong = param1;
      }
      
      public function get showLong() : Boolean
      {
         return this._showLong;
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.questfm.conditions.*;
   
   public class ConditionFactory
   {
      
      private static const logger:ILogger = Log.getLogger("ConditionFactory");
      
      private var conditionDefinitions:Array;
      
      public function ConditionFactory()
      {
         super();
         this.initConditionDefinitions();
      }
      
      private function initConditionDefinitions() : void
      {
         this.conditionDefinitions = [];
         this.conditionDefinitions[ConditionType.TIMER] = new ConditionTypeDefinition(ConditionType.TIMER,"TIMER",TimerCondition,false);
         this.conditionDefinitions[ConditionType.HASTE] = new ConditionTypeDefinition(ConditionType.HASTE,"HASTE",HasteCondition,false);
         this.conditionDefinitions[ConditionType.ENDURANCE] = new ConditionTypeDefinition(ConditionType.ENDURANCE,"ENDURANCE",EnduranceCondition,true);
         this.conditionDefinitions[ConditionType.COUNTDOWN] = new ConditionTypeDefinition(ConditionType.COUNTDOWN,"COUNTDOWN",CountDownCondition,true);
         this.conditionDefinitions[ConditionType.COLLECT] = new ConditionTypeDefinition(ConditionType.COLLECT,"COLLECT",CollectCondition,true);
         this.conditionDefinitions[ConditionType.KILL_NPC] = new ConditionTypeDefinition(ConditionType.KILL_NPC,"KILL_NPC",KillNPCCondition,true);
         this.conditionDefinitions[ConditionType.DAMAGE] = new ConditionTypeDefinition(ConditionType.DAMAGE,"DAMAGE",DamageCondition,false);
         this.conditionDefinitions[ConditionType.AVOID_DAMAGE] = new ConditionTypeDefinition(ConditionType.AVOID_DAMAGE,"AVOID_DAMAGE",AvoidDamageCondition,false);
         this.conditionDefinitions[ConditionType.TAKE_DAMAGE] = new ConditionTypeDefinition(ConditionType.TAKE_DAMAGE,"TAKE_DAMAGE",TakeDamageCondition,true);
         this.conditionDefinitions[ConditionType.AVOID_DEATH] = new ConditionTypeDefinition(ConditionType.AVOID_DEATH,"AVOID_DEATH",AvoidDeathCondition,false);
         this.conditionDefinitions[ConditionType.COORDINATES] = new ConditionTypeDefinition(ConditionType.COORDINATES,"COORDINATES",CoordinatesCondition,true);
         this.conditionDefinitions[ConditionType.DISTANCE] = new ConditionTypeDefinition(ConditionType.DISTANCE,"DISTANCE",DistanceCondition,false);
         this.conditionDefinitions[ConditionType.TRAVEL] = new ConditionTypeDefinition(ConditionType.TRAVEL,"TRAVEL",TravelCondition,true);
         this.conditionDefinitions[ConditionType.FUEL_SHORTAGE] = new ConditionTypeDefinition(ConditionType.FUEL_SHORTAGE,"FUEL_SHORTAGE",FuelShortageCondition,false);
         this.conditionDefinitions[ConditionType.PROXIMITY] = new ConditionTypeDefinition(ConditionType.PROXIMITY,"PROXIMITY",ProximityCondition,true);
         this.conditionDefinitions[ConditionType.MAP] = new ConditionTypeDefinition(ConditionType.MAP,"MAP",MapCondition,true);
         this.conditionDefinitions[ConditionType.MAP_DIVERSE] = new ConditionTypeDefinition(ConditionType.MAP_DIVERSE,"MAP_DIVERSE",MapDiverseCondition,true);
         this.conditionDefinitions[ConditionType.EMPTY] = new ConditionTypeDefinition(ConditionType.EMPTY,"EMPTY",EmptyCondition,true);
         this.conditionDefinitions[ConditionType.MISCELLANEOUS] = new ConditionTypeDefinition(ConditionType.MISCELLANEOUS,"MISCELLANEOUS",MiscellaneousCondition,true);
         this.conditionDefinitions[ConditionType.AMMUNITION] = new ConditionTypeDefinition(ConditionType.AMMUNITION,"AMMUNITION",AmmunitionCondition,false);
         this.conditionDefinitions[ConditionType.SAVE_AMMUNITION] = new ConditionTypeDefinition(ConditionType.SAVE_AMMUNITION,"SAVE_AMMUNITION",SaveAmmunitionCondition,false);
         this.conditionDefinitions[ConditionType.SPEND_AMMUNITION] = new ConditionTypeDefinition(ConditionType.SPEND_AMMUNITION,"SPEND_AMMUNITION",SpendAmmunitionCondition,true);
         this.conditionDefinitions[ConditionType.SALVAGE] = new ConditionTypeDefinition(ConditionType.SALVAGE,"SALVAGE",SalvageCondition,true);
         this.conditionDefinitions[ConditionType.STEAL] = new ConditionTypeDefinition(ConditionType.STEAL,"STEAL",StealCondition,true);
         this.conditionDefinitions[ConditionType.KILL_NPCS] = new ConditionTypeDefinition(ConditionType.KILL_NPCS,"KILL_NPCS",KillNPCsCondition,true);
         this.conditionDefinitions[ConditionType.KILL_PLAYERS] = new ConditionTypeDefinition(ConditionType.KILL_PLAYERS,"KILL_PLAYERS",KillPlayersCondition,true);
         this.conditionDefinitions[ConditionType.DAMAGE_NPCS] = new ConditionTypeDefinition(ConditionType.DAMAGE_NPCS,"DAMAGE_NPCS",DamageNPCsCondition,true);
         this.conditionDefinitions[ConditionType.DAMAGE_PLAYERS] = new ConditionTypeDefinition(ConditionType.DAMAGE_PLAYERS,"DAMAGE_PLAYERS",DamagePlayersCondition,true);
         this.conditionDefinitions[ConditionType.VISIT_MAP] = new ConditionTypeDefinition(ConditionType.VISIT_MAP,"VISIT_MAP",VisitMapCondition,true);
         this.conditionDefinitions[ConditionType.DIE] = new ConditionTypeDefinition(ConditionType.DIE,"DIE",DieCondition,false);
         this.conditionDefinitions[ConditionType.AVOID_KILL_NPC] = new ConditionTypeDefinition(ConditionType.AVOID_KILL_NPC,"AVOID_KILL_NPC",AvoidKillNPCCondition,false);
         this.conditionDefinitions[ConditionType.AVOID_KILL_NPCS] = new ConditionTypeDefinition(ConditionType.AVOID_KILL_NPCS,"AVOID_KILL_NPCS",AvoidKillNPCsCondition,false);
         this.conditionDefinitions[ConditionType.AVOID_KILL_PLAYERS] = new ConditionTypeDefinition(ConditionType.AVOID_KILL_PLAYERS,"AVOID_KILL_PLAYERS",AvoidKillPlayersCondition,false);
         this.conditionDefinitions[ConditionType.AVOID_DAMAGE_NPCS] = new ConditionTypeDefinition(ConditionType.AVOID_DAMAGE_NPCS,"AVOID_DAMAGE_NPCS",AvoidDamageNPCsCondition,false);
         this.conditionDefinitions[ConditionType.AVOID_DAMAGE_PLAYERS] = new ConditionTypeDefinition(ConditionType.AVOID_DAMAGE_PLAYERS,"AVOID_DAMAGE_PLAYERS",AvoidDamagePlayersCondition,false);
         this.conditionDefinitions[ConditionType.PREVENT] = new ConditionTypeDefinition(ConditionType.PREVENT,"PREVENT",PreventCondition,false);
         this.conditionDefinitions[ConditionType.JUMP] = new ConditionTypeDefinition(ConditionType.JUMP,"JUMP",JumpCondition,true);
         this.conditionDefinitions[ConditionType.AVOID_JUMP] = new ConditionTypeDefinition(ConditionType.AVOID_JUMP,"AVOID_JUMP",AvoidJumpCondition,false);
         this.conditionDefinitions[ConditionType.STEADINESS] = new ConditionTypeDefinition(ConditionType.STEADINESS,"STEADINESS",SteadinessCondition,true);
         this.conditionDefinitions[ConditionType.MULTIPLIER] = new ConditionTypeDefinition(ConditionType.MULTIPLIER,"MULTIPLIER",MultiplierCondition,false);
         this.conditionDefinitions[ConditionType.STAY_AWAY] = new ConditionTypeDefinition(ConditionType.STAY_AWAY,"STAY_AWAY",StayAwayCondition,true);
         this.conditionDefinitions[ConditionType.IN_GROUP] = new ConditionTypeDefinition(ConditionType.IN_GROUP,"IN_GROUP",InGroupCondition,true);
         this.conditionDefinitions[ConditionType.KILL_ANY] = new ConditionTypeDefinition(ConditionType.KILL_ANY,"KILL_ANY",KillAnyCondition,true);
         this.conditionDefinitions[ConditionType.WEB] = new ConditionTypeDefinition(ConditionType.WEB,"WEB",WebCondition,true);
         this.conditionDefinitions[ConditionType.CLIENT] = new ConditionTypeDefinition(ConditionType.CLIENT,"CLIENT",ClientCondition,true);
         this.conditionDefinitions[ConditionType.CARGO] = new ConditionTypeDefinition(ConditionType.CARGO,"CARGO",CargoCondition,true);
         this.conditionDefinitions[ConditionType.SELL_ORE] = new ConditionTypeDefinition(ConditionType.SELL_ORE,"SELL_ORE",SellOreCondition,true);
         this.conditionDefinitions[ConditionType.LEVEL] = new ConditionTypeDefinition(ConditionType.LEVEL,"LEVEL",LevelCondition,true);
         this.conditionDefinitions[ConditionType.RESTRICT_AMMUNITION_KILL_NPC] = new ConditionTypeDefinition(ConditionType.RESTRICT_AMMUNITION_KILL_NPC,"RESTRICT_AMMUNITION_KILL_NPC",RestrictAmmunitionKillNPCCondition,true);
         this.conditionDefinitions[ConditionType.RESTRICT_AMMUNITION_KILL_PLAYER] = new ConditionTypeDefinition(ConditionType.RESTRICT_AMMUNITION_KILL_PLAYER,"RESTRICT_AMMUNITION_KILL_PLAYER",RestrictAmmunitionKillPlayerCondition,true);
         this.conditionDefinitions[ConditionType.HONOR_REDEMPTION] = new ConditionTypeDefinition(ConditionType.HONOR_REDEMPTION,"HONOR_REDEMPTION",HonorRedemptionCondition,true);
      }
      
      public function createCondition(param1:int, param2:int, param3:int, param4:int, param5:Boolean, param6:Boolean, param7:int, param8:String = null) : ICondition
      {
         var _loc9_:ICondition = new this.conditionDefinitions[param1].CLASS();
         _loc9_.definition = this.conditionDefinitions[param1];
         _loc9_.init(param2,param3,param4,param5,param6,param7,param8);
         return _loc9_;
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   public class ConditionType
   {
      
      public static const TIMER:int = 1;
      
      public static const HASTE:int = 2;
      
      public static const ENDURANCE:int = 3;
      
      public static const COUNTDOWN:int = 4;
      
      public static const COLLECT:int = 5;
      
      public static const KILL_NPC:int = 6;
      
      public static const DAMAGE:int = 7;
      
      public static const AVOID_DAMAGE:int = 8;
      
      public static const TAKE_DAMAGE:int = 9;
      
      public static const AVOID_DEATH:int = 10;
      
      public static const COORDINATES:int = 11;
      
      public static const DISTANCE:int = 12;
      
      public static const TRAVEL:int = 13;
      
      public static const FUEL_SHORTAGE:int = 14;
      
      public static const PROXIMITY:int = 15;
      
      public static const MAP:int = 16;
      
      public static const MAP_DIVERSE:int = 17;
      
      public static const EMPTY:int = 18;
      
      public static const MISCELLANEOUS:int = 19;
      
      public static const AMMUNITION:int = 20;
      
      public static const SAVE_AMMUNITION:int = 21;
      
      public static const SPEND_AMMUNITION:int = 22;
      
      public static const SALVAGE:int = 23;
      
      public static const STEAL:int = 24;
      
      public static const KILL_NPCS:int = 27;
      
      public static const KILL_PLAYERS:int = 28;
      
      public static const DAMAGE_NPCS:int = 29;
      
      public static const DAMAGE_PLAYERS:int = 30;
      
      public static const VISIT_MAP:int = 31;
      
      public static const DIE:int = 32;
      
      public static const AVOID_KILL_NPC:int = 33;
      
      public static const AVOID_KILL_NPCS:int = 34;
      
      public static const AVOID_KILL_PLAYERS:int = 35;
      
      public static const AVOID_DAMAGE_NPCS:int = 36;
      
      public static const AVOID_DAMAGE_PLAYERS:int = 37;
      
      public static const PREVENT:int = 38;
      
      public static const JUMP:int = 39;
      
      public static const AVOID_JUMP:int = 40;
      
      public static const STEADINESS:int = 41;
      
      public static const MULTIPLIER:int = 42;
      
      public static const STAY_AWAY:int = 43;
      
      public static const IN_GROUP:int = 44;
      
      public static const KILL_ANY:int = 45;
      
      public static const WEB:int = 46;
      
      public static const CLIENT:int = 47;
      
      public static const CARGO:int = 48;
      
      public static const SELL_ORE:int = 49;
      
      public static const LEVEL:int = 50;
      
      public static const RESTRICT_AMMUNITION_KILL_NPC:int = 57;
      
      public static const RESTRICT_AMMUNITION_KILL_PLAYER:int = 58;
      
      public static const HONOR_REDEMPTION:int = 10000;
      
      public function ConditionType()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   public interface ICase extends IQuestBaseObject
   {
      
      function get visibility() : int;
      
      function set visibility(param1:int) : void;
      
      function get mandatory() : Boolean;
      
      function get mandatory_child_count() : int;
      
      function toTextTree() : String;
      
      function get children() : Array;
   }
}

package net.bigpoint.darkorbit.questfm
{
   import net.bigpoint.darkorbit.questfm.conditions.ConditionTypeDefinition;
   
   public interface ICondition extends IQuestBaseObject
   {
      
      function toTextTree() : String;
      
      function get current() : int;
      
      function set current(param1:int) : void;
      
      function set definition(param1:ConditionTypeDefinition) : void;
      
      function get definition() : ConditionTypeDefinition;
      
      function init(param1:int, param2:int, param3:int, param4:Boolean, param5:Boolean, param6:int, param7:String) : void;
      
      function get description() : String;
      
      function get targetVerbose() : String;
      
      function get currentVerbose() : String;
      
      function get children() : Array;
      
      function get visibility() : int;
      
      function set visibility(param1:int) : void;
      
      function get id() : uint;
      
      function set id(param1:uint) : void;
      
      function get mandatory() : Boolean;
      
      function get runstate() : Boolean;
      
      function set runstate(param1:Boolean) : void;
      
      function get helpIconsClipIds() : Array;
      
      function set helpIconsClipIds(param1:Array) : void;
      
      function isSubcondition() : Boolean;
      
      function markAsSubCondition() : void;
      
      function updateCondtition(param1:int, param2:int, param3:int, param4:Boolean) : Boolean;
   }
}

package net.bigpoint.darkorbit.questfm
{
   public interface IQuestBaseObject
   {
      
      function addConditionAt(param1:ICondition, param2:uint) : void;
      
      function addCondition(param1:ICondition) : void;
      
      function set showLong(param1:Boolean) : void;
      
      function get showLong() : Boolean;
   }
}

package net.bigpoint.darkorbit.questfm
{
   import flash.display.BitmapData;
   
   public interface IQuestTreeUIClip
   {
      
      function init(param1:BitmapData, param2:BitmapData, param3:BitmapData) : void;
      
      function set state(param1:int) : void;
      
      function set visible(param1:Boolean) : void;
      
      function get visible() : Boolean;
      
      function get id() : int;
      
      function set id(param1:int) : void;
      
      function get type() : int;
      
      function set type(param1:int) : void;
   }
}

package net.bigpoint.darkorbit.questfm
{
   public class Quest
   {
      
      private var _id:uint;
      
      private var _case:Case;
      
      private var _flatConditions:Array = [];
      
      private var _category:String = "std";
      
      private var _title:String = "";
      
      public function Quest(param1:uint, param2:Case)
      {
         super();
         this._id = param1;
         this._case = param2;
      }
      
      public function get id() : uint
      {
         return this._id;
      }
      
      public function updateCondition(param1:int, param2:int, param3:int, param4:Boolean) : void
      {
         this._case.updateCondtition(param1,param2,param3,param4);
      }
      
      public function toTextTree() : String
      {
         return this._case.toTextTree();
      }
      
      public function getCase() : Case
      {
         return this._case;
      }
      
      public function get category() : String
      {
         return this._category;
      }
      
      public function set category(param1:String) : void
      {
         this._category = param1;
      }
      
      public function get flatConditions() : Array
      {
         return this._flatConditions;
      }
      
      public function set flatConditions(param1:Array) : void
      {
         this._flatConditions = param1;
      }
      
      public function get title() : String
      {
         return this._title;
      }
      
      public function set title(param1:String) : void
      {
         this._title = param1;
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   public class QuestCategory
   {
      
      public static const STANDARD:String = "std";
      
      public static const SUMMER_GAMES_3:String = "sg3";
      
      public static const WINTER_GAMES_2009:String = "wg09";
      
      public function QuestCategory()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.MovieClip;
   import flash.events.MouseEvent;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.net.ServerCommands;
   
   public class QuestDotList extends SimpleContainer
   {
      
      private var _dots:Array = [];
      
      private var _quests_in_order:Array = [];
      
      private var _main:Main;
      
      public function QuestDotList(param1:Main)
      {
         super(param1.getGuiManager(),SimpleContainer.CLASS_QUEST_PAGE_DOTS);
         this._main = param1;
      }
      
      public function update() : void
      {
         var _loc2_:int = 0;
         var _loc1_:int = 0;
         var _loc3_:int = 0;
         if(this._main.getQuestManager().privilegedQuest != null)
         {
            _loc3_ = int(this._main.getQuestManager().privilegedQuest.id);
         }
         var _loc4_:int = 0;
         while(_loc4_ < this._quests_in_order.length)
         {
            if(this._quests_in_order[_loc4_] != null)
            {
               _loc2_ = int(this._quests_in_order[_loc4_]);
               if(_loc3_ == _loc2_)
               {
                  this._dots[_loc2_].gotoAndStop("active");
               }
               else
               {
                  this._dots[_loc2_].gotoAndStop("inactive");
               }
               this._dots[_loc2_].x = _loc1_;
               _loc1_ += this._dots[_loc2_].width + 4;
            }
            _loc4_++;
         }
      }
      
      private function addPrivilegeFunction(param1:MovieClip, param2:int) : void
      {
         param1.addEventListener(MouseEvent.CLICK,this.onClickPrivilege);
         param1.buttonMode = true;
      }
      
      private function onClickPrivilege(param1:MouseEvent) : void
      {
         var _loc2_:int = int(this._dots.indexOf(MovieClip(param1.target)));
         if(_loc2_ != this._main.getQuestManager().privilegedQuest.id)
         {
            this._main.getConnectionManager().sendCommand(ServerCommands.QUESTFM_INFO,[ServerCommands.QUESTFM_PRIVILEGE_QUEST,_loc2_]);
         }
      }
      
      public function addQuest(param1:int) : void
      {
         var _loc2_:MovieClip = null;
         if(this._dots[param1] == null)
         {
            _loc2_ = this.getQuestUiElement("pagedot");
            this._dots[param1] = _loc2_;
            this._quests_in_order.push(param1);
            this.addPrivilegeFunction(_loc2_,param1);
            addChild(_loc2_);
         }
         this.update();
      }
      
      public function removeQuest(param1:int) : void
      {
         var _loc2_:MovieClip = null;
         var _loc3_:int = 0;
         if(this._dots[param1] != null)
         {
            _loc2_ = MovieClip(this._dots[param1]);
            if(contains(_loc2_))
            {
               removeChild(_loc2_);
            }
            delete this._dots[param1];
            _loc3_ = 0;
            while(_loc3_ < this._quests_in_order.length)
            {
               if(this._quests_in_order[_loc3_] == param1)
               {
                  delete this._quests_in_order[_loc3_];
               }
               _loc3_++;
            }
         }
         this.update();
      }
      
      private function getQuestUiElement(param1:String) : MovieClip
      {
         var _loc2_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("questSystem"));
         return _loc2_.getEmbededMovieClip(param1);
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   public class QuestParser
   {
      
      private var element_count:int;
      
      private var condition_count:int;
      
      private var case_count:int;
      
      private var conditionFactory:ConditionFactory;
      
      private var flat_conditions:Array;
      
      public function QuestParser()
      {
         super();
         this.conditionFactory = new ConditionFactory();
      }
      
      public function parse(param1:XML) : Quest
      {
         var _loc4_:ICondition = null;
         this.initCounts();
         var _loc2_:Case = this.parseCase(param1);
         if(_loc2_.id == 10000)
         {
            _loc4_ = this.parseCondition(<cond id="10000" k="10000" cur="0" t="0" on="1" do="1" viz="1"/>);
            _loc2_.addCondition(_loc4_);
         }
         var _loc3_:Quest = new Quest(_loc2_.id,_loc2_);
         _loc3_.flatConditions = this.flat_conditions;
         return _loc3_;
      }
      
      private function initCounts() : void
      {
         this.element_count = 0;
         this.case_count = 0;
         this.condition_count = 0;
         this.flat_conditions = [];
      }
      
      private function parseCondition(param1:XML) : ICondition
      {
         var _loc13_:ICondition = null;
         ++this.condition_count;
         ++this.element_count;
         var _loc2_:int = int(param1.@id);
         var _loc3_:int = int(param1.@k);
         var _loc4_:String = param1.@m;
         var _loc5_:int = int(param1.@cur);
         var _loc6_:int = int(param1.@t);
         var _loc7_:Boolean = Boolean(int(param1.@on));
         var _loc8_:Boolean = Boolean(param1["do"]);
         var _loc9_:int = int(param1.@viz);
         var _loc10_:ICondition = this.conditionFactory.createCondition(_loc3_,_loc2_,_loc5_,_loc6_,_loc7_,_loc8_,_loc9_,_loc4_);
         this.flat_conditions[_loc2_] = _loc10_;
         var _loc11_:XMLList = param1.children();
         var _loc12_:int = 0;
         while(_loc12_ < _loc11_.length())
         {
            _loc13_ = this.parseCondition(XML(_loc11_[_loc12_]));
            _loc13_.runstate = _loc7_;
            _loc13_.visibility = _loc9_;
            _loc10_.addCondition(_loc13_);
            _loc13_.markAsSubCondition();
            _loc12_++;
         }
         return _loc10_;
      }
      
      private function parseCase(param1:XML) : Case
      {
         var _loc5_:XML = null;
         var _loc6_:String = null;
         var _loc7_:Case = null;
         var _loc8_:ICondition = null;
         var _loc2_:Case = new Case();
         ++this.case_count;
         ++this.element_count;
         _loc2_.id = int(param1.@id);
         _loc2_.active = Boolean(param1.@on);
         _loc2_.mandatory = Boolean(int(param1["do"]));
         _loc2_.ordered = Boolean(int(param1.@ord));
         _loc2_.mandatory_count = uint(param1.@td);
         var _loc3_:XMLList = param1.children();
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_.length())
         {
            _loc5_ = XML(_loc3_[_loc4_]);
            _loc6_ = _loc5_.name();
            switch(_loc6_)
            {
               case "case":
                  _loc7_ = Case(this.parseCase(_loc5_));
                  _loc2_.addCase(_loc7_);
                  break;
               case "cond":
                  _loc8_ = this.parseCondition(_loc5_);
                  _loc2_.addCondition(_loc8_);
            }
            _loc4_++;
         }
         return _loc2_;
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   public class QuestStock
   {
      
      private var _quests:Array;
      
      private var _questIDs:Array;
      
      private var _stock:int;
      
      public function QuestStock()
      {
         super();
         this._quests = [];
         this._questIDs = [];
         this._stock = 0;
      }
      
      public function getQuestByID(param1:int) : Quest
      {
         if(this._quests[param1] != undefined)
         {
            return this._quests[param1];
         }
         return null;
      }
      
      public function addQuest(param1:Quest, param2:int) : void
      {
         if(this._quests[param2] == undefined)
         {
            this._quests[param2] = param1;
            this._questIDs.push(param2);
            ++this._stock;
         }
      }
      
      public function deleteQuestByID(param1:int) : void
      {
         var _loc2_:int = 0;
         if(this._quests[param1] is Quest)
         {
            delete this._quests[param1];
            _loc2_ = int(this._questIDs.indexOf(param1));
            this._questIDs.splice(_loc2_,1);
            --this._stock;
         }
      }
      
      public function getNextQuestID() : int
      {
         var _loc1_:int = 0;
         for each(_loc1_ in this._questIDs)
         {
            if(this._quests[_loc1_] != undefined)
            {
               return _loc1_;
            }
         }
         return -1;
      }
      
      public function get stock() : int
      {
         return this._stock;
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.MouseEvent;
   import flash.external.ExternalInterface;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class QuestTree extends SimpleContainer
   {
      
      private static const logger:ILogger = Log.getLogger("QuestTree");
      
      public var quest:Quest;
      
      private var headlineLabel:TextField;
      
      private var contentRoot:MovieClip;
      
      private var runningBranchFormat:TextFormat;
      
      private var accomplishedBranchFormat:TextFormat;
      
      private var upcomingBranchFormat:TextFormat;
      
      private var branchOffset:int;
      
      private var elementDepthOffset:int;
      
      private var conditionBranches:Array = [];
      
      private var caseBranches:Array = [];
      
      private var allBranches:Array = [];
      
      private var branchesValues:Array = [];
      
      private var branchOffsetStart:Number;
      
      private var defaultInfoClip:MovieClip;
      
      private var defaultInfoClickArea:Sprite;
      
      private var questAssetsLib:SWFFinisher;
      
      private var iconsLib:SWFFinisher;
      
      public function QuestTree(param1:Main)
      {
         super(param1.getGuiManager(),SimpleContainer.CLASS_QUEST_TREE);
         guiManager = param1.getGuiManager();
         this.initFormat();
         this.initDefault();
         this.questAssetsLib = SWFFinisher(ResourceManager.fileCollection.getFinisher("questSystem"));
         this.iconsLib = SWFFinisher(ResourceManager.fileCollection.getFinisher("icons"));
      }
      
      private function initDefault() : void
      {
         this.defaultInfoClip = new MovieClip();
         var _loc1_:TextFormat = new TextFormat(Styles.strongStdFmt.font,Styles.strongStdFmt.size,15327936);
         var _loc2_:TextField = new TextField();
         _loc2_.defaultTextFormat = _loc1_;
         _loc2_.embedFonts = Styles.strongStdEmbed;
         _loc2_.antiAliasType = AntiAliasType.ADVANCED;
         _loc2_.mouseEnabled = true;
         _loc2_.selectable = false;
         _loc2_.multiline = true;
         _loc2_.wordWrap = true;
         _loc2_.autoSize = TextFieldAutoSize.LEFT;
         _loc2_.width = 164;
         _loc2_.x = 8;
         _loc2_.y = 8;
         _loc2_.text = BPLocale.getText("msg_no_quest_running");
         this.defaultInfoClip.addChild(_loc2_);
         var _loc3_:TextField = new TextField();
         _loc3_.defaultTextFormat = _loc1_;
         _loc3_.embedFonts = Styles.strongStdEmbed;
         _loc3_.antiAliasType = AntiAliasType.ADVANCED;
         _loc3_.mouseEnabled = false;
         _loc3_.selectable = false;
         _loc3_.multiline = true;
         _loc3_.wordWrap = true;
         _loc3_.autoSize = TextFieldAutoSize.LEFT;
         _loc3_.width = _loc2_.width;
         _loc3_.x = _loc2_.x;
         _loc3_.y = _loc2_.y + _loc2_.height + 8;
         _loc3_.text = BPLocale.getText("msg_accept_jobs_here");
         this.defaultInfoClip.addChild(_loc3_);
         this.defaultInfoClickArea = new Sprite();
         this.defaultInfoClickArea.addChild(new Bitmap(new BitmapData(100,100,true,16711935)));
         this.defaultInfoClickArea.x = _loc3_.x;
         this.defaultInfoClickArea.y = _loc3_.y;
         this.defaultInfoClickArea.width = _loc3_.width;
         this.defaultInfoClickArea.height = _loc3_.height;
         this.defaultInfoClickArea.buttonMode = true;
         this.defaultInfoClip.addChild(this.defaultInfoClickArea);
         this.defaultInfoClickArea.addEventListener(MouseEvent.CLICK,this.handleMouseClickOnInfoTextField);
      }
      
      public function set isDefaultVisible(param1:Boolean) : void
      {
         if(param1 && !contains(this.defaultInfoClip))
         {
            addChild(this.defaultInfoClip);
            guiManager.getWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM).setDimension(width,height + 24);
         }
         else if(!param1 && contains(this.defaultInfoClip))
         {
            removeChild(this.defaultInfoClip);
         }
      }
      
      public function get isDefaultVisible() : Boolean
      {
         return contains(this.defaultInfoClip);
      }
      
      private function handleMouseClickOnInfoTextField(param1:MouseEvent) : void
      {
         var questLink:String = null;
         var event:MouseEvent = param1;
         questLink = Main.gameXML.tradeWindow.weblinks2.link.(@type == "2").@url;
         if(ExternalInterface.available)
         {
            ExternalInterface.call("referToURL",Settings.dynamicHost + questLink);
         }
      }
      
      public function showDefaultText(param1:String) : void
      {
         this.initHeadLine();
         this.headlineLabel.text = param1;
      }
      
      public function updateQuestTitle() : void
      {
         var _loc1_:Boolean = false;
         if(this.contentRoot.contains(this.headlineLabel))
         {
            _loc1_ = BPLocale.distillAndWrite(this.quest.title,this.headlineLabel);
            if(_loc1_)
            {
               TooltipControl.getInstance().addToolTip(this.headlineLabel,this.quest.title);
            }
         }
      }
      
      public function clearContent() : void
      {
         if(this.contentRoot != null)
         {
            if(contains(this.contentRoot))
            {
               removeChild(this.contentRoot);
            }
         }
         this.conditionBranches = [];
         this.caseBranches = [];
         this.allBranches = [];
         this.branchOffsetStart = 4;
         this.elementDepthOffset = 4;
         this.contentRoot = new MovieClip();
         addChild(this.contentRoot);
      }
      
      public function updateCondition(param1:int) : void
      {
         var _loc4_:int = 0;
         var _loc5_:ICondition = null;
         var _loc2_:QuestTreeBranch = QuestTreeBranch(this.conditionBranches[param1]);
         var _loc3_:ICondition = ICondition(_loc2_.questBaseObject);
         _loc2_.valuesLabel.text = _loc3_.currentVerbose + _loc3_.targetVerbose;
         if(_loc3_.runstate != _loc2_.runstate || _loc3_.visibility != _loc2_.visibility)
         {
            if(_loc3_.runstate)
            {
               _loc2_.uiClip.state = QuestTreeUIClip.RUNNING;
               _loc2_.descriptionLabel.defaultTextFormat = this.runningBranchFormat;
            }
            else if(_loc3_.visibility == 2)
            {
               _loc2_.uiClip.state = QuestTreeUIClip.COMPLETED;
               _loc2_.descriptionLabel.defaultTextFormat = this.accomplishedBranchFormat;
            }
            else
            {
               _loc2_.uiClip.state = QuestTreeUIClip.UPCOMING;
               _loc2_.descriptionLabel.defaultTextFormat = this.upcomingBranchFormat;
            }
            _loc2_.valuesLabel.defaultTextFormat = _loc2_.descriptionLabel.defaultTextFormat;
            _loc2_.valuesLabel.text = _loc3_.currentVerbose + _loc3_.targetVerbose;
            _loc2_.descriptionLabel.text = _loc3_.description;
            if(_loc3_.children.length > 0)
            {
               _loc4_ = 0;
               while(_loc4_ < _loc3_.children.length)
               {
                  _loc5_ = ICondition(_loc3_.children[_loc4_]);
                  this.updateCondition(_loc5_.id);
                  _loc4_++;
               }
            }
         }
      }
      
      public function setSize(param1:int, param2:int) : void
      {
      }
      
      private function initFormat() : void
      {
         this.runningBranchFormat = new TextFormat(Styles.plainStdFmt.font,Styles.plainStdFmt.size,15327936);
         this.accomplishedBranchFormat = new TextFormat(Styles.plainStdFmt.font,Styles.plainStdFmt.size,8969608);
         this.upcomingBranchFormat = new TextFormat(Styles.plainStdFmt.font,Styles.plainStdFmt.size,12169872);
      }
      
      public function update() : void
      {
         this.clearContent();
         this.initHeadLine();
         this.branchOffsetStart += this.headlineLabel.height + 3;
         this.branchOffset = this.branchOffsetStart;
         this.createQuestBranchFromCase(this.quest.getCase(),0,true);
         this.isDefaultVisible = false;
      }
      
      private function initHeadLine() : void
      {
         var _loc1_:TextFormat = new TextFormat(Styles.strongStdFmt.font,Styles.strongStdFmt.size,15327936);
         this.headlineLabel = new TextField();
         this.headlineLabel.defaultTextFormat = _loc1_;
         this.headlineLabel.embedFonts = Styles.strongStdEmbed;
         this.headlineLabel.antiAliasType = AntiAliasType.ADVANCED;
         this.headlineLabel.mouseEnabled = true;
         this.headlineLabel.selectable = false;
         this.headlineLabel.width = 200;
         this.contentRoot.addChild(this.headlineLabel);
         if(this.quest.title == "")
         {
            this.headlineLabel.text = "";
         }
         else
         {
            this.updateQuestTitle();
         }
         this.headlineLabel.height = 18;
         this.headlineLabel.y = this.branchOffsetStart;
      }
      
      private function createQuestBranchFromCase(param1:Case, param2:int, param3:Boolean = false) : QuestTreeBranch
      {
         var _loc7_:MovieClip = null;
         var _loc8_:QuestTreeUIToggleButton = null;
         var _loc9_:TextField = null;
         var _loc10_:int = 0;
         var _loc11_:QuestTreeBranch = null;
         var _loc4_:QuestTreeBranch = new QuestTreeBranch(QuestTreeBranchType.CASE);
         _loc4_.visibility = param1.visibility;
         _loc4_.runstate = param1.active;
         var _loc5_:int = 0;
         var _loc6_:String = "";
         if(param1.ordered)
         {
            _loc5_ = 4;
            _loc7_ = this.getQuestUiElement("caseBox");
            _loc8_ = this.getQuestTreeToggleButton(QuestTreeBranchType.CASE);
            _loc8_.id = param1.id;
            _loc4_.setUi(_loc7_,_loc8_);
            _loc4_.questBaseObject = param1;
            _loc4_.expanded = param1.showLong;
            this.contentRoot.addChild(_loc7_);
            this.contentRoot.addChild(_loc8_);
            _loc7_.x = param2;
            _loc7_.y = this.branchOffset;
            _loc8_.x = _loc7_.x;
            _loc8_.y = _loc7_.y + 4;
            _loc8_.selected = !param1.showLong;
            _loc9_ = TextField(_loc7_["txtLabel"]);
            _loc9_.autoSize = TextFieldAutoSize.LEFT;
            _loc9_.multiline = true;
            _loc9_.width = 128;
            _loc9_.antiAliasType = AntiAliasType.ADVANCED;
            _loc9_.mouseEnabled = false;
            _loc9_.selectable = false;
            if(param1.active)
            {
               _loc8_.state = QuestTreeUIClip.RUNNING;
               _loc9_.defaultTextFormat = this.runningBranchFormat;
            }
            else
            {
               _loc8_.state = QuestTreeUIClip.UPCOMING;
               if(param1.visibility == 2)
               {
                  _loc8_.state = QuestTreeUIClip.COMPLETED;
                  _loc9_.defaultTextFormat = this.accomplishedBranchFormat;
               }
               else
               {
                  _loc8_.state = QuestTreeUIClip.UPCOMING;
                  _loc9_.defaultTextFormat = this.upcomingBranchFormat;
               }
            }
            _loc9_.text = BPLocale.getText("q2_condition_CASE_sequence");
            _loc9_.embedFonts = true;
            if(param1.children.length < 2)
            {
               _loc9_.visible = false;
            }
            this.branchOffset += _loc7_.height;
            this.caseBranches[param1.id] = _loc4_;
            this.allBranches.push(_loc4_);
         }
         else if(param1.mandatory_child_count != param1.mandatory_count)
         {
            _loc5_ = 4;
            _loc7_ = this.getQuestUiElement("caseBox");
            _loc8_ = this.getQuestTreeToggleButton(QuestTreeBranchType.CASE);
            _loc8_.id = param1.id;
            _loc4_.setUi(_loc7_,_loc8_);
            _loc4_.questBaseObject = param1;
            _loc4_.expanded = param1.showLong;
            this.caseBranches[param1.id] = _loc4_;
            this.allBranches.push(_loc4_);
            this.contentRoot.addChild(_loc7_);
            this.contentRoot.addChild(_loc8_);
            _loc7_.x = param2;
            _loc7_.y = this.branchOffset;
            _loc8_.x = _loc7_.x;
            _loc8_.y = _loc7_.y + 4;
            _loc8_.selected = !param1.showLong;
            _loc9_ = TextField(_loc7_["txtLabel"]);
            _loc9_.autoSize = TextFieldAutoSize.LEFT;
            _loc9_.multiline = true;
            _loc9_.width = 128;
            _loc9_.embedFonts = true;
            _loc9_.antiAliasType = AntiAliasType.ADVANCED;
            _loc9_.mouseEnabled = false;
            _loc9_.selectable = false;
            if(param1.active)
            {
               _loc8_.state = QuestTreeUIClip.RUNNING;
               _loc9_.defaultTextFormat = this.runningBranchFormat;
            }
            else
            {
               _loc8_.state = QuestTreeUIClip.UPCOMING;
               if(param1.visibility == 2)
               {
                  _loc8_.state = QuestTreeUIClip.COMPLETED;
                  _loc9_.defaultTextFormat = this.accomplishedBranchFormat;
               }
               else
               {
                  _loc8_.state = QuestTreeUIClip.UPCOMING;
                  _loc9_.defaultTextFormat = this.upcomingBranchFormat;
               }
            }
            _loc6_ = BPLocale.getText("q2_condition_CASE_mandatory");
            _loc6_ = _loc6_.replace(/%count%/,param1.mandatory_count);
            _loc9_.text = _loc6_;
            this.branchOffset += _loc7_.height;
         }
         _loc4_.visible = param3;
         if(param3 && !param1.showLong)
         {
            param3 = false;
         }
         if(param1.children.length > 0)
         {
            _loc10_ = 0;
            while(_loc10_ < param1.children.length)
            {
               if(param1.children[_loc10_] is ICase)
               {
                  _loc11_ = this.createQuestBranchFromCase(param1.children[_loc10_],param2 + _loc5_,param3);
               }
               else
               {
                  _loc11_ = this.createQuestBranchFromCondition(param1.children[_loc10_],param2 + _loc5_);
                  this.displayCondition(_loc11_,param3);
               }
               if(!param1.showLong || !param3)
               {
                  this.branchOffset -= _loc11_.descriptionClip.height;
               }
               _loc10_++;
            }
            if(_loc8_ != null)
            {
               _loc8_.addEventListener(MouseEvent.CLICK,this.toggleCaseBranch);
            }
         }
         return _loc4_;
      }
      
      private function createQuestBranchFromCondition(param1:ICondition, param2:int) : QuestTreeBranch
      {
         var _loc4_:IQuestTreeUIClip = null;
         var _loc7_:MovieClip = null;
         var _loc11_:int = 0;
         var _loc12_:QuestTreeBranch = null;
         var _loc3_:MovieClip = this.getQuestUiElement("condBox");
         if(param1.children.length > 0)
         {
            _loc4_ = this.getQuestTreeToggleButton(QuestTreeBranchType.CONDITION);
            _loc4_.id = param1.id;
            QuestTreeUIToggleButton(_loc4_).selected = !param1.showLong;
         }
         else
         {
            _loc4_ = this.getConditionIcon(param1);
         }
         var _loc5_:Class = Class(Object(_loc4_).constructor);
         var _loc6_:MovieClip = this.getQuestUiElement("condValuesBox");
         if(param1.helpIconsClipIds != null)
         {
            _loc7_ = this.getIconClip(param1.helpIconsClipIds[0]);
         }
         var _loc8_:QuestTreeBranch = new QuestTreeBranch(QuestTreeBranchType.CONDITION);
         _loc8_.setUi(_loc3_,_loc4_,_loc6_,_loc7_);
         _loc8_.questBaseObject = param1;
         _loc8_.expanded = param1.showLong;
         _loc8_.visibility = param1.visibility;
         _loc8_.runstate = param1.runstate;
         this.conditionBranches[param1.id] = _loc8_;
         this.allBranches.push(_loc8_);
         this.contentRoot.addChild(_loc3_);
         this.contentRoot.addChild(_loc5_(_loc4_));
         this.branchesValues[param1.id] = _loc6_;
         this.contentRoot.addChild(_loc6_);
         _loc3_.x = param2;
         _loc3_.y = this.branchOffset;
         _loc5_(_loc4_).x = _loc3_.x;
         _loc5_(_loc4_).y = _loc3_.y + 4;
         _loc6_.x = 250;
         _loc6_.y = _loc3_.y;
         var _loc9_:TextField = TextField(_loc3_["txtLabel"]);
         _loc9_.autoSize = TextFieldAutoSize.LEFT;
         _loc9_.multiline = true;
         if(param1.helpIconsClipIds != null)
         {
            _loc9_.width = 114;
            this.contentRoot.addChild(_loc7_);
            _loc7_.x = _loc9_.x + _loc9_.width + 8;
            _loc7_.y = _loc3_.y;
         }
         else
         {
            _loc9_.width = 136;
         }
         _loc9_.embedFonts = true;
         _loc9_.antiAliasType = AntiAliasType.ADVANCED;
         _loc9_.mouseEnabled = false;
         _loc9_.selectable = false;
         var _loc10_:TextField = TextField(_loc6_["txtLabel"]);
         _loc10_.autoSize = TextFieldAutoSize.RIGHT;
         _loc10_.embedFonts = true;
         _loc10_.antiAliasType = AntiAliasType.ADVANCED;
         _loc10_.mouseEnabled = false;
         _loc10_.selectable = false;
         if(param1.runstate)
         {
            _loc4_.state = QuestTreeUIClip.RUNNING;
            _loc9_.defaultTextFormat = this.runningBranchFormat;
         }
         else if(param1.visibility == 2)
         {
            _loc4_.state = QuestTreeUIClip.COMPLETED;
            _loc9_.defaultTextFormat = this.accomplishedBranchFormat;
         }
         else
         {
            _loc4_.state = QuestTreeUIClip.UPCOMING;
            _loc9_.defaultTextFormat = this.upcomingBranchFormat;
         }
         _loc10_.defaultTextFormat = _loc9_.defaultTextFormat;
         _loc10_.text = param1.currentVerbose + param1.targetVerbose;
         _loc9_.text = param1.description;
         this.branchOffset += _loc3_.height;
         if(param1.children.length > 0)
         {
            _loc11_ = 0;
            while(_loc11_ < param1.children.length)
            {
               if(param1.children[_loc11_] != null)
               {
                  _loc12_ = this.createQuestBranchFromCondition(param1.children[_loc11_],param2 + 4);
                  this.displayCondition(_loc12_,param1.showLong);
                  if(!param1.showLong)
                  {
                     this.branchOffset -= _loc12_.descriptionClip.height;
                  }
               }
               _loc11_++;
            }
            _loc5_(_loc4_).addEventListener(MouseEvent.CLICK,this.toggleConditionBranch);
         }
         return _loc8_;
      }
      
      private function getIconClip(param1:String) : MovieClip
      {
         var _loc2_:MovieClip = new MovieClip();
         _loc2_.addChild(new Bitmap(this.iconsLib.getEmbededBitmapData(param1)));
         return _loc2_;
      }
      
      private function toggleConditionBranch(param1:MouseEvent) : void
      {
         var _loc2_:IQuestTreeUIClip = IQuestTreeUIClip(param1.target);
         var _loc3_:QuestTreeBranch = QuestTreeBranch(this.conditionBranches[_loc2_.id]);
         QuestTreeUIToggleButton(_loc3_.uiClip).selected = _loc3_.expanded;
         _loc3_.expanded = !_loc3_.expanded;
         _loc3_.questBaseObject.showLong = _loc3_.expanded;
         var _loc4_:ICondition = ICondition(_loc3_.questBaseObject);
         this.displayChildren(_loc4_.children,_loc3_.expanded && Boolean(_loc4_.showLong));
         this.updateBranches();
      }
      
      private function displayCondition(param1:QuestTreeBranch, param2:Boolean) : void
      {
         param1.visible = param2;
      }
      
      private function displayChildren(param1:Array, param2:Boolean) : void
      {
         var _loc3_:ICondition = null;
         var _loc4_:Case = null;
         var _loc5_:QuestTreeBranch = null;
         var _loc6_:String = null;
         for(_loc6_ in param1)
         {
            if(param1[_loc6_] is ICondition)
            {
               _loc3_ = param1[_loc6_];
               _loc4_ = null;
            }
            else if(param1[_loc6_] is ICase)
            {
               _loc3_ = null;
               _loc4_ = param1[_loc6_];
            }
            if(_loc3_ != null && this.conditionBranches[_loc3_.id] != null)
            {
               _loc5_ = this.conditionBranches[_loc3_.id];
               this.displayCondition(_loc5_,param2);
            }
            if(_loc4_ != null && this.caseBranches[_loc4_.id] != null)
            {
               _loc5_ = QuestTreeBranch(this.caseBranches[_loc4_.id]);
               _loc5_.visible = param2;
               this.displayChildren(_loc4_.children,param2 && _loc5_.expanded);
            }
         }
      }
      
      private function toggleCaseBranch(param1:MouseEvent) : void
      {
         var _loc6_:String = null;
         var _loc7_:Case = null;
         var _loc8_:ICondition = null;
         var _loc2_:IQuestTreeUIClip = IQuestTreeUIClip(param1.target);
         var _loc3_:QuestTreeBranch = QuestTreeBranch(this.caseBranches[_loc2_.id]);
         var _loc4_:Case = Case(_loc3_.questBaseObject);
         QuestTreeUIToggleButton(_loc3_.uiClip).selected = _loc3_.expanded;
         _loc3_.expanded = !_loc3_.expanded;
         _loc3_.questBaseObject.showLong = _loc3_.expanded;
         var _loc5_:Array = _loc4_.children;
         for(_loc6_ in _loc5_)
         {
            if(_loc5_[_loc6_] is ICase)
            {
               _loc7_ = Case(_loc5_[_loc6_]);
               QuestTreeBranch(this.caseBranches[_loc7_.id]).visible = _loc3_.expanded;
               this.displayChildren(_loc7_.children,_loc3_.expanded && _loc7_.showLong);
            }
            else
            {
               _loc8_ = ICondition(_loc5_[_loc6_]);
               QuestTreeBranch(this.conditionBranches[_loc8_.id]).visible = _loc3_.expanded;
               this.displayChildren(_loc8_.children,_loc3_.expanded && Boolean(_loc8_.showLong));
            }
         }
         this.updateBranches();
      }
      
      public function updateBranches() : void
      {
         var _loc2_:QuestTreeBranch = null;
         this.branchOffset = this.branchOffsetStart;
         var _loc1_:int = 0;
         while(_loc1_ < this.allBranches.length)
         {
            _loc2_ = this.allBranches[_loc1_] as QuestTreeBranch;
            if(_loc2_.visible)
            {
               _loc2_.descriptionClip.y = this.branchOffset;
               MovieClip(_loc2_.uiClip).y = this.branchOffset + 4;
               if(_loc2_.valuesClip != null)
               {
                  _loc2_.valuesClip.y = this.branchOffset;
               }
               if(_loc2_.iconsClip != null)
               {
                  _loc2_.iconsClip.y = this.branchOffset;
               }
               this.branchOffset += _loc2_.descriptionClip.height;
            }
            _loc1_++;
         }
         guiManager.getWindow(SimpleWindow.WINDOW_CLASS_QUEST_SYSTEM).dispatchEvent(new Event(SimpleWindow.ON_RESIZE));
      }
      
      private function getConditionIcon(param1:ICondition) : QuestTreeUIClip
      {
         var _loc2_:String = null;
         if(!param1.definition.VALIDATABLE)
         {
            _loc2_ = "failable_subcon";
         }
         else if(param1.children.length > 0)
         {
            _loc2_ = "casecon_open";
         }
         else if(param1.isSubcondition())
         {
            _loc2_ = "subcondition";
         }
         else
         {
            _loc2_ = "condition";
         }
         return this.getQuestTreeElement(_loc2_);
      }
      
      private function getQuestUiElement(param1:String) : MovieClip
      {
         return this.questAssetsLib.getEmbededMovieClip(param1);
      }
      
      private function getQuestTreeToggleButton(param1:int = 1) : QuestTreeUIToggleButton
      {
         var _loc5_:BitmapData = null;
         var _loc6_:BitmapData = null;
         var _loc7_:BitmapData = null;
         var _loc2_:String = "casecon_open";
         var _loc3_:String = "casecon_closed";
         var _loc4_:String = _loc2_;
         _loc5_ = this.questAssetsLib.getEmbededBitmapData(_loc4_ + "_running.gif");
         _loc6_ = this.questAssetsLib.getEmbededBitmapData(_loc4_ + "_upcoming.gif");
         _loc7_ = this.questAssetsLib.getEmbededBitmapData(_loc4_ + "_completed.gif");
         var _loc8_:QuestTreeUIToggleButton = new QuestTreeUIToggleButton();
         _loc8_.init(_loc5_,_loc6_,_loc7_);
         _loc4_ = _loc3_;
         _loc5_ = this.questAssetsLib.getEmbededBitmapData(_loc4_ + "_running.gif");
         _loc6_ = this.questAssetsLib.getEmbededBitmapData(_loc4_ + "_upcoming.gif");
         _loc7_ = this.questAssetsLib.getEmbededBitmapData(_loc4_ + "_completed.gif");
         _loc8_.setToggleClips(_loc5_,_loc6_,_loc7_);
         return _loc8_;
      }
      
      private function getQuestTreeElement(param1:String) : QuestTreeUIClip
      {
         var _loc2_:BitmapData = this.questAssetsLib.getEmbededBitmapData(param1 + "_running.gif");
         var _loc3_:BitmapData = this.questAssetsLib.getEmbededBitmapData(param1 + "_upcoming.gif");
         var _loc4_:BitmapData = this.questAssetsLib.getEmbededBitmapData(param1 + "_completed.gif");
         var _loc5_:QuestTreeUIClip = new QuestTreeUIClip();
         _loc5_.init(_loc2_,_loc3_,_loc4_);
         _loc5_.state = QuestTreeUIClip.RUNNING;
         return _loc5_;
      }
      
      public function get visibleHeight() : int
      {
         return this.branchOffset;
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   import flash.display.MovieClip;
   import flash.text.TextField;
   
   public class QuestTreeBranch
   {
      
      private var _questBaseObject:IQuestBaseObject;
      
      private var _uiClip:IQuestTreeUIClip;
      
      private var _descriptionClip:MovieClip;
      
      private var _descriptionLabel:TextField;
      
      private var _iconsClip:MovieClip;
      
      private var _valuesClip:MovieClip;
      
      private var _valuesLabel:TextField;
      
      private var _branches:Array = [];
      
      private var _type:int;
      
      private var _visible:Boolean;
      
      private var _expanded:Boolean;
      
      private var _runstate:Boolean;
      
      private var _visibility:int;
      
      public function QuestTreeBranch(param1:int)
      {
         super();
         if(param1 == QuestTreeBranchType.CASE)
         {
            this._type = QuestTreeBranchType.CASE;
         }
         else
         {
            this._type = QuestTreeBranchType.CONDITION;
         }
      }
      
      public function addBranch(param1:QuestTreeBranch) : void
      {
         this._branches.push(param1);
      }
      
      public function setUi(param1:MovieClip, param2:IQuestTreeUIClip, param3:MovieClip = null, param4:MovieClip = null) : void
      {
         this._descriptionClip = param1;
         this._descriptionLabel = TextField(this._descriptionClip["txtLabel"]);
         this._uiClip = param2;
         this._valuesClip = param3;
         this._iconsClip = param4;
         if(this._valuesClip != null)
         {
            this._valuesLabel = TextField(this._valuesClip["txtLabel"]);
            this._valuesLabel.x += 8;
         }
         if(this._iconsClip != null)
         {
            this._descriptionLabel.width = 48;
            this._iconsClip.x = 56;
         }
         this._visible = true;
         this._expanded = true;
      }
      
      public function set questBaseObject(param1:IQuestBaseObject) : void
      {
         this._questBaseObject = param1;
      }
      
      public function get uiClip() : IQuestTreeUIClip
      {
         return this._uiClip;
      }
      
      public function get descriptionClip() : MovieClip
      {
         return this._descriptionClip;
      }
      
      public function get valuesClip() : MovieClip
      {
         return this._valuesClip;
      }
      
      public function get type() : int
      {
         return this._type;
      }
      
      public function get questBaseObject() : IQuestBaseObject
      {
         return this._questBaseObject;
      }
      
      public function get descriptionLabel() : TextField
      {
         return this._descriptionLabel;
      }
      
      public function get valuesLabel() : TextField
      {
         return this._valuesLabel;
      }
      
      public function get visible() : Boolean
      {
         return this._visible;
      }
      
      public function set visible(param1:Boolean) : void
      {
         this._visible = param1;
         if(this._descriptionClip != null)
         {
            this._descriptionClip.visible = this._visible;
         }
         if(this._uiClip != null)
         {
            this._uiClip.visible = this._visible;
         }
         if(this._valuesClip != null)
         {
            this._valuesClip.visible = this._visible;
         }
         if(this._iconsClip != null)
         {
            this._iconsClip.visible = this._visible;
         }
      }
      
      public function get expanded() : Boolean
      {
         return this._expanded;
      }
      
      public function get runstate() : Boolean
      {
         return this._runstate;
      }
      
      public function set runstate(param1:Boolean) : void
      {
         if(this._runstate != param1)
         {
            this._runstate = param1;
         }
      }
      
      public function set expanded(param1:Boolean) : void
      {
         this._expanded = param1;
      }
      
      public function get visibility() : int
      {
         return this._visibility;
      }
      
      public function set visibility(param1:int) : void
      {
         if(this._visibility != param1)
         {
            this._visibility = param1;
         }
      }
      
      public function get iconsClip() : MovieClip
      {
         return this._iconsClip;
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   public class QuestTreeBranchType
   {
      
      public static const CASE:int = 1;
      
      public static const CONDITION:int = 2;
      
      public function QuestTreeBranchType()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   
   public class QuestTreeUIClip extends MovieClip implements IQuestTreeUIClip
   {
      
      public static const RUNNING:int = 1;
      
      public static const UPCOMING:int = 2;
      
      public static const COMPLETED:int = 3;
      
      protected var _runningIcon:DisplayObject;
      
      protected var _upcomingIcon:DisplayObject;
      
      protected var _completedIcon:DisplayObject;
      
      protected var _currentState:int = 0;
      
      protected var _currentUIElement:DisplayObject = new Bitmap();
      
      private var _id:int;
      
      private var _type:int;
      
      public function QuestTreeUIClip()
      {
         super();
      }
      
      public function init(param1:BitmapData, param2:BitmapData, param3:BitmapData) : void
      {
         this._runningIcon = new Bitmap(param1);
         this._upcomingIcon = new Bitmap(param2);
         this._completedIcon = new Bitmap(param3);
         addChild(this._runningIcon);
         addChild(this._upcomingIcon);
         addChild(this._completedIcon);
         this._runningIcon.visible = false;
         this._upcomingIcon.visible = false;
         this._completedIcon.visible = false;
      }
      
      public function set state(param1:int) : void
      {
         if(this._currentState == param1)
         {
            return;
         }
         this._currentState = param1;
         this._currentUIElement.visible = false;
         switch(param1)
         {
            case RUNNING:
               this._currentUIElement = this._runningIcon;
               break;
            case UPCOMING:
               this._currentUIElement = this._upcomingIcon;
               break;
            case COMPLETED:
               this._currentUIElement = this._completedIcon;
         }
         this._currentUIElement.visible = true;
      }
      
      public function get state() : int
      {
         return this._currentState;
      }
      
      public function get id() : int
      {
         return this._id;
      }
      
      public function get type() : int
      {
         return this._type;
      }
      
      public function set id(param1:int) : void
      {
         this._id = param1;
      }
      
      public function set type(param1:int) : void
      {
         this._type = param1;
      }
   }
}

package net.bigpoint.darkorbit.questfm
{
   import flash.display.BitmapData;
   import flash.display.MovieClip;
   
   public class QuestTreeUIToggleButton extends MovieClip implements IQuestTreeUIClip
   {
      
      private var _standardClip:QuestTreeUIClip;
      
      private var _toggleClip:QuestTreeUIClip;
      
      private var _currentClip:QuestTreeUIClip;
      
      private var _selected:Boolean;
      
      private var _state:int = 0;
      
      private var _type:int;
      
      private var _id:int;
      
      public function QuestTreeUIToggleButton()
      {
         super();
      }
      
      public function init(param1:BitmapData, param2:BitmapData, param3:BitmapData) : void
      {
         this._standardClip = new QuestTreeUIClip();
         this._standardClip.init(param1,param2,param3);
         this._toggleClip = new QuestTreeUIClip();
         this._toggleClip.init(param1,param2,param3);
         this._currentClip = this._standardClip;
         addChild(this._currentClip);
      }
      
      public function setToggleClips(param1:BitmapData, param2:BitmapData, param3:BitmapData) : void
      {
         if(contains(this._toggleClip))
         {
            removeChild(this._toggleClip);
         }
         this._toggleClip = new QuestTreeUIClip();
         this._toggleClip.init(param1,param2,param3);
         this._toggleClip.state = this._state;
         if(this._selected)
         {
            this._currentClip = this._toggleClip;
            addChild(this._toggleClip);
         }
      }
      
      public function set selected(param1:Boolean) : void
      {
         if(param1 != this._selected)
         {
            removeChild(this._currentClip);
            this._selected = param1;
            if(this._selected)
            {
               this._currentClip = this._toggleClip;
            }
            else
            {
               this._currentClip = this._standardClip;
            }
            addChild(this._currentClip);
         }
      }
      
      public function get selected() : Boolean
      {
         return this._selected;
      }
      
      public function set state(param1:int) : void
      {
         this._state = param1;
         this._standardClip.state = param1;
         this._toggleClip.state = param1;
      }
      
      public function get id() : int
      {
         return this._id;
      }
      
      public function get type() : int
      {
         return this._type;
      }
      
      public function set id(param1:int) : void
      {
         this._id = param1;
         this._standardClip.id = param1;
         this._toggleClip.id = param1;
      }
      
      public function set type(param1:int) : void
      {
         this._type = param1;
         this._standardClip.type = param1;
         this._toggleClip.type = param1;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class AmmunitionCondition extends Condition
   {
      
      private var _ammo_type:int;
      
      private var _ammo_grade:int;
      
      public function AmmunitionCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc4_:String = null;
         var _loc2_:Array = param1.split(",");
         this._ammo_type = parseInt(_loc2_.shift());
         this._ammo_grade = parseInt(_loc2_.shift());
         var _loc3_:* = _definition.TRANS_BASE_KEY + "_" + InGameCatalog.instance.damage_types[this._ammo_type];
         _loc4_ = "";
         if(this._ammo_grade > 0)
         {
            _loc3_ += "_spec";
            if(this._ammo_type == 1)
            {
               _loc4_ = InGameCatalog.instance.battery_types[this._ammo_grade];
            }
            else if(this._ammo_type == 2)
            {
               _loc4_ = InGameCatalog.instance.rocketNames[this._ammo_grade];
            }
         }
         _description = BPLocale.getText("q2_condition_" + _loc3_);
         _description = description.replace(/%type%/,_loc4_);
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class AvoidDamageCondition extends Condition
   {
      
      private var _damage_type_id:int;
      
      public function AvoidDamageCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         this._damage_type_id = parseInt(param1);
         if(_mandatory)
         {
            _target_plain = "/" + _target;
         }
         _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY + "_" + InGameCatalog.instance.damage_types[this._damage_type_id]);
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class AvoidDamageNPCsCondition extends Condition
   {
      
      public function AvoidDamageNPCsCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _description = _definition.TRANS_BASE_KEY;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class AvoidDamagePlayersCondition extends Condition
   {
      
      public function AvoidDamagePlayersCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _description = _definition.TRANS_BASE_KEY;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   
   public class AvoidDeathCondition extends Condition
   {
      
      public function AvoidDeathCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         if(_target > 0)
         {
            _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY + "_n").replace(/%count%/,_target);
         }
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class AvoidJumpCondition extends Condition
   {
      
      public function AvoidJumpCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _description = _definition.TRANS_BASE_KEY;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class AvoidKillNPCCondition extends Condition
   {
      
      private var _npc_id:int;
      
      public function AvoidKillNPCCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         this._npc_id = parseInt(param1);
         var _loc2_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         if(_target == 0)
         {
            _loc2_ += "_none";
         }
         else
         {
            _target_plain = "/" + _target;
         }
         if(mandatory)
         {
            _loc2_ += "_challenge";
         }
         _description = BPLocale.getText(_loc2_);
         _description = description.replace(/%npc%/,InGameCatalog.instance.npc_names[this._npc_id]);
         _description = description.replace(/%count%/,_target);
         _helpIconsClipIds = [InGameCatalog.instance.npc_icons[this._npc_id] + "_icon.png"];
      }
      
      override public function get currentVerbose() : String
      {
         if(_target == 0)
         {
            return "";
         }
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class AvoidKillNPCsCondition extends Condition
   {
      
      private var _npc_id_count:int;
      
      private var _npc_ids:Array = [];
      
      private var _npc_names_list:String = "";
      
      public function AvoidKillNPCsCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc2_:Array = param1.split(",");
         this._npc_id_count = parseInt(_loc2_.shift());
         var _loc3_:Array = InGameCatalog.instance.npc_names;
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_.length)
         {
            this._npc_ids[_loc4_] = parseInt(_loc2_[_loc4_]);
            if(_loc3_[this._npc_ids[_loc4_]] != null)
            {
               this._npc_names_list += ", " + _loc3_[this._npc_ids[_loc4_]];
            }
            _loc4_++;
         }
         this._npc_names_list = this._npc_names_list.substring(2);
         var _loc5_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         if(_target == 0)
         {
            _loc5_ += "_none";
         }
         else
         {
            _target_plain = "/" + _target;
         }
         if(mandatory)
         {
            _loc5_ += "_challenge";
         }
         _description = BPLocale.getText(_loc5_);
         _description = description.replace(/%npcs%/,this._npc_names_list);
         _description = description.replace(/%count%/,_target);
         if(this._npc_id_count > 0)
         {
            _helpIconsClipIds = [InGameCatalog.instance.npc_icons[this._npc_ids[0]] + "_icon.png"];
         }
      }
      
      override public function get currentVerbose() : String
      {
         if(_target == 0)
         {
            return "";
         }
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class AvoidKillPlayersCondition extends Condition
   {
      
      private var _faction_ids:Array = [];
      
      private var _faction_names_list:String = "";
      
      private var _ship_types:Array = [];
      
      private var _ship_names_list:String = "";
      
      private var _avatar_ids:Array = [];
      
      public function AvoidKillPlayersCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc2_:Array = param1.split(",");
         var _loc3_:int = parseInt(_loc2_.shift());
         var _loc4_:Array = _loc2_.splice(0,_loc3_);
         var _loc5_:int = parseInt(_loc2_.shift());
         var _loc6_:Array = _loc2_.splice(0,_loc5_);
         var _loc7_:Array = InGameCatalog.instance.ship_names;
         var _loc8_:int = 0;
         while(_loc8_ < _loc4_.length)
         {
            this._ship_types[_loc8_] = parseInt(_loc4_[_loc8_]);
            if(_loc7_[this._ship_types[_loc8_]] != null)
            {
               this._ship_names_list += ", " + _loc7_[this._ship_types[_loc8_]];
            }
            _loc8_++;
         }
         this._ship_names_list = this._ship_names_list.substring(2);
         var _loc9_:Array = InGameCatalog.instance.factions_names;
         var _loc10_:int = 0;
         while(_loc10_ < _loc6_.length)
         {
            this._faction_ids[_loc10_] = parseInt(_loc6_[_loc10_]);
            this._faction_names_list += ", " + _loc9_[this._faction_ids[_loc10_]];
            _loc10_++;
         }
         this._faction_names_list = this._faction_names_list.substring(2);
         var _loc11_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         if(this._ship_types.length == 0 && this._faction_ids.length == 0 && this._avatar_ids.length == 0)
         {
            _loc11_ += "_any";
         }
         else
         {
            if(this._ship_types.length > 0)
            {
               _loc11_ += "_ship";
            }
            if(this._faction_ids.length > 0)
            {
               _loc11_ += "_faction";
            }
            if(this._avatar_ids.length > 0)
            {
               _loc11_ += "_avatar";
            }
         }
         if(_target == 0)
         {
            _loc11_ += "_none";
         }
         else
         {
            _target_plain = "/" + _target;
         }
         _description = BPLocale.getText(_loc11_);
         _description = description.replace(/%types%/,this._ship_names_list);
         _description = description.replace(/%faction%/,this._faction_names_list);
         _description = description.replace(/%count%/,_target);
         if(this._ship_types.length > 0)
         {
            _helpIconsClipIds = [InGameCatalog.instance.ship_icons[this._ship_types[0]] + "_icon.png"];
         }
      }
      
      override public function get currentVerbose() : String
      {
         if(_target == 0)
         {
            return "";
         }
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   
   public class CargoCondition extends Condition
   {
      
      public function CargoCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         if(_target == 0)
         {
            _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY + "_challenge");
         }
         else
         {
            _target_plain = "/" + _target;
            _description = description.replace(/%count%/,_target);
         }
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   
   public class ClientCondition extends Condition
   {
      
      public function ClientCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY + "_clickFaqButton");
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class CollectCondition extends Condition
   {
      
      private var oreID:int;
      
      public function CollectCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         if(_mandatory)
         {
            _target_plain = "/" + _target;
         }
         this.oreID = int(param1);
         _description = _description.replace(/%ore%/,InGameCatalog.instance.ore_names[this.oreID]);
         _helpIconsClipIds = ["ore_" + this.oreID + ".png"];
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.questfm.ICondition;
   
   public class Condition implements ICondition
   {
      
      private static const logger:ILogger = Log.getLogger("Condition");
      
      protected var _id:uint;
      
      protected var _conditions:Array;
      
      protected var _runstate:Boolean;
      
      protected var _mandatory:Boolean;
      
      protected var _current:int;
      
      protected var _target:int;
      
      protected var _target_plain:String = "";
      
      protected var _mandatory_count:uint;
      
      protected var _definition:ConditionTypeDefinition;
      
      protected var _visibility:int;
      
      protected var _description:String;
      
      protected var _children:Array = [];
      
      protected var _isSubCondition:Boolean;
      
      protected var _showLong:Boolean = true;
      
      protected var _helpIconsClipIds:Array;
      
      public function Condition()
      {
         super();
      }
      
      public function init(param1:int, param2:int, param3:int, param4:Boolean, param5:Boolean, param6:int, param7:String) : void
      {
         this._id = param1;
         this._current = param2;
         this._target = param3;
         this._runstate = param4;
         this._mandatory = param5;
         this._visibility = param6;
         this.parseMatches(param7);
      }
      
      public function markAsSubCondition() : void
      {
         this._isSubCondition = true;
      }
      
      protected function parseMatches(param1:String) : void
      {
         this._description = BPLocale.getText("q2_condition_" + this._definition.TRANS_BASE_KEY);
      }
      
      public function toString() : String
      {
         return this._definition.TRANS_BASE_KEY;
      }
      
      public function get id() : uint
      {
         return this._id;
      }
      
      public function set id(param1:uint) : void
      {
         this._id = param1;
      }
      
      public function get conditions() : Array
      {
         return this._conditions;
      }
      
      public function get runstate() : Boolean
      {
         return this._runstate;
      }
      
      public function set runstate(param1:Boolean) : void
      {
         if(this._runstate != param1)
         {
            this._runstate = param1;
         }
      }
      
      public function get mandatory() : Boolean
      {
         return this._mandatory;
      }
      
      public function set mandatory(param1:Boolean) : void
      {
         this._mandatory = param1;
      }
      
      public function set mandatory_count(param1:uint) : void
      {
         this._mandatory_count = param1;
      }
      
      public function addConditionAt(param1:ICondition, param2:uint) : void
      {
         if(this._conditions == null)
         {
            this._conditions = [];
         }
         this._conditions[param2] = param1;
         this.addQuestChildElement(param1);
      }
      
      public function addCondition(param1:ICondition) : void
      {
         if(this._conditions == null)
         {
            this._conditions = [];
         }
         this.addConditionAt(param1,this._conditions.length);
      }
      
      public function set definition(param1:ConditionTypeDefinition) : void
      {
         this._definition = param1;
      }
      
      public function get definition() : ConditionTypeDefinition
      {
         return this._definition;
      }
      
      public function get description() : String
      {
         return this._description;
      }
      
      public function get targetVerbose() : String
      {
         return this._target_plain;
      }
      
      public function get currentVerbose() : String
      {
         return "";
      }
      
      public function updateCondtition(param1:int, param2:int, param3:int, param4:Boolean) : Boolean
      {
         var _loc5_:* = undefined;
         if(param1 == this._id)
         {
            this._current = param2;
            return true;
         }
         if(this._children.length > 0)
         {
            for(_loc5_ in this._children)
            {
               if(ICondition(_loc5_).updateCondtition(param1,param2,param3,param4))
               {
                  return true;
               }
            }
         }
         return false;
      }
      
      public function toTextTree() : String
      {
         var _loc1_:* = this._description + "\n";
         var _loc2_:int = 0;
         while(_loc2_ < this._children.length)
         {
            if(this._children[_loc2_] != null)
            {
               _loc1_ += ICondition(this._children[_loc2_]).toTextTree();
            }
            _loc2_++;
         }
         return _loc1_;
      }
      
      protected function addQuestChildElement(param1:ICondition) : void
      {
         this._children.push(param1);
      }
      
      public function get children() : Array
      {
         return this._children;
      }
      
      public function isSubcondition() : Boolean
      {
         return this._isSubCondition;
      }
      
      public function get visibility() : int
      {
         return this._visibility;
      }
      
      public function set visibility(param1:int) : void
      {
         if(this._visibility != param1)
         {
            this._visibility = param1;
         }
      }
      
      public function get current() : int
      {
         return this._current;
      }
      
      public function set current(param1:int) : void
      {
         this._current = param1;
      }
      
      public function set showLong(param1:Boolean) : void
      {
         this._showLong = param1;
      }
      
      public function get showLong() : Boolean
      {
         return this._showLong;
      }
      
      public function get helpIconsClipIds() : Array
      {
         return this._helpIconsClipIds;
      }
      
      public function set helpIconsClipIds(param1:Array) : void
      {
         this._helpIconsClipIds = param1;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class ConditionTypeDefinition
   {
      
      private var _ID:int;
      
      private var _TRANS_BASE_KEY:String;
      
      private var _CLASS:Class;
      
      private var _VALIDATABLE:Boolean;
      
      public function ConditionTypeDefinition(param1:int, param2:String, param3:Class, param4:Boolean)
      {
         super();
         this._ID = param1;
         this._TRANS_BASE_KEY = param2;
         this._CLASS = param3;
         this._VALIDATABLE = param4;
      }
      
      public function get ID() : int
      {
         return this._ID;
      }
      
      public function get TRANS_BASE_KEY() : String
      {
         return this._TRANS_BASE_KEY;
      }
      
      public function get CLASS() : Class
      {
         return this._CLASS;
      }
      
      public function get VALIDATABLE() : Boolean
      {
         return this._VALIDATABLE;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class CoordinatesCondition extends Condition
   {
      
      private var _x_pos:int;
      
      private var _y_pos:int;
      
      private var _z_pos:int;
      
      private var _radius:int;
      
      public function CoordinatesCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         var _loc2_:Array = param1.split(",");
         this._x_pos = parseInt(_loc2_.shift());
         this._y_pos = parseInt(_loc2_.shift());
         this._z_pos = parseInt(_loc2_.shift());
         this._radius = parseInt(_loc2_.shift());
         _description = description.replace(/%x%/,this._x_pos / 100);
         _description = description.replace(/%y%/,this._y_pos / 100);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class CountDownCondition extends Condition
   {
      
      public function CountDownCondition()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class DamageCondition extends Condition
   {
      
      private var _damage_type_id:int;
      
      public function DamageCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         this._damage_type_id = parseInt(param1);
         _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY + "_" + InGameCatalog.instance.damage_types[this._damage_type_id]);
      }
      
      override public function get currentVerbose() : String
      {
         return BPLocale.roundInteger(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class DamageNPCsCondition extends Condition
   {
      
      private var npcIDcount:int;
      
      private var npcIDs:Array = [];
      
      private var npcListing:String = "";
      
      private var damageTypeCount:int;
      
      private var damageTypeID:int;
      
      public function DamageNPCsCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc2_:Array = param1.split(",");
         this.npcIDcount = int(_loc2_.shift());
         var _loc3_:Array = _loc2_.splice(0,this.npcIDcount);
         this.damageTypeCount = int(_loc2_.shift());
         this.damageTypeID = int(_loc2_.shift());
         var _loc4_:Array = InGameCatalog.instance.npc_names;
         var _loc5_:int = 0;
         while(_loc5_ < _loc3_.length)
         {
            this.npcIDs[_loc5_] = int(_loc3_[_loc5_]);
            if(_loc4_[this.npcIDs[_loc5_]] != null)
            {
               this.npcListing += ", " + _loc4_[this.npcIDs[_loc5_]];
            }
            _loc5_++;
         }
         this.npcListing = this.npcListing.substring(2);
         var _loc6_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         if(this.npcIDcount > 0)
         {
            _loc6_ += "_spec";
         }
         _loc6_ += "_" + InGameCatalog.instance.damage_types[this.damageTypeID];
         if(_target > 0)
         {
            _target_plain = "/" + _target;
         }
         _description = BPLocale.getText(_loc6_);
         _description = description.replace(/%npcs%/,this.npcListing);
         if(this.npcIDcount > 0)
         {
            _helpIconsClipIds = [InGameCatalog.instance.npc_icons[this.npcIDs[0]] + "_icon.png"];
         }
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class DamagePlayersCondition extends Condition
   {
      
      private var factionIDs:Array = [];
      
      private var factionNamesList:String = "";
      
      private var shipTypes:Array = [];
      
      private var shipNamesList:String = "";
      
      private var avatarIDs:Array = [];
      
      private var damageTypeID:int;
      
      public function DamagePlayersCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc2_:Array = param1.split(",");
         var _loc3_:int = int(_loc2_.shift());
         var _loc4_:Array = _loc2_.splice(0,_loc3_);
         var _loc5_:int = int(_loc2_.shift());
         var _loc6_:Array = _loc2_.splice(0,_loc5_);
         this.damageTypeID = int(_loc2_.shift());
         this.damageTypeID = int(_loc2_.shift());
         var _loc7_:Array = InGameCatalog.instance.ship_names;
         var _loc8_:int = 0;
         while(_loc8_ < _loc4_.length)
         {
            this.shipTypes[_loc8_] = int(_loc4_[_loc8_]);
            if(_loc7_[this.shipTypes[_loc8_]] != null)
            {
               this.shipNamesList += ", " + _loc7_[this.shipTypes[_loc8_]];
            }
            _loc8_++;
         }
         this.shipNamesList = this.shipNamesList.substring(2);
         var _loc9_:Array = InGameCatalog.instance.factions_names;
         var _loc10_:int = 0;
         while(_loc10_ < _loc6_.length)
         {
            this.factionIDs[_loc10_] = int(_loc6_[_loc10_]);
            this.factionNamesList += ", " + _loc9_[this.factionIDs[_loc10_]];
            _loc10_++;
         }
         this.factionNamesList = this.factionNamesList.substring(2);
         var _loc11_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         if(this.shipTypes.length == 0 && this.factionIDs.length == 0 && this.avatarIDs.length == 0)
         {
            _loc11_ += "_any";
         }
         else
         {
            if(this.shipTypes.length > 0)
            {
               _loc11_ += "_ships";
            }
            if(this.factionIDs.length > 0)
            {
               _loc11_ += "_faction";
            }
            if(this.avatarIDs.length > 0)
            {
               _loc11_ += "_avatar";
            }
         }
         if(_target > 0)
         {
            _target_plain = "/" + _target;
         }
         _loc11_ += "_" + InGameCatalog.instance.damage_types[this.damageTypeID];
         _description = BPLocale.getText(_loc11_);
         _description = description.replace(/%types%/,this.shipNamesList);
         _description = description.replace(/%faction%/,this.factionNamesList);
         if(this.shipTypes.length > 0)
         {
            _helpIconsClipIds = [InGameCatalog.instance.ship_icons[this.shipTypes[0]] + "_icon.png"];
         }
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class DieCondition extends Condition
   {
      
      public function DieCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _description = _definition.TRANS_BASE_KEY;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   
   public class DistanceCondition extends Condition
   {
      
      public function DistanceCondition()
      {
         super();
      }
      
      override public function get currentVerbose() : String
      {
         return BPLocale.roundInteger(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class EmptyCondition extends Condition
   {
      
      public function EmptyCondition()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.TimeFormatter;
   
   public class EnduranceCondition extends Condition
   {
      
      private var _timeVerbose:String;
      
      public function EnduranceCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         _target /= 1000;
         _current /= 1000;
         this._timeVerbose = TimeFormatter.formatTime(_target);
         _description = _description.replace(/%TIME%/,this._timeVerbose);
      }
      
      override public function get currentVerbose() : String
      {
         return TimeFormatter.formatTime(_current);
      }
      
      override public function set current(param1:int) : void
      {
         _current = param1 / 1000;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class FuelShortageCondition extends Condition
   {
      
      public function FuelShortageCondition()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.TimeFormatter;
   
   public class HasteCondition extends Condition
   {
      
      private var _timeVerbose:String;
      
      public function HasteCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         _target /= 1000;
         _current /= 1000;
         this._timeVerbose = TimeFormatter.formatTime(_target);
         _description = _description.replace(/%TIME%/,this._timeVerbose);
      }
      
      override public function get currentVerbose() : String
      {
         return TimeFormatter.formatTime(Math.round(_current / 1000));
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class HonorRedemptionCondition extends Condition
   {
      
      public function HonorRedemptionCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   
   public class InGroupCondition extends Condition
   {
      
      private var _groupSize:int;
      
      public function InGroupCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         this._groupSize = int(param1);
         if(this._groupSize > 2)
         {
            _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY + "_size").replace(/%count%/,this._groupSize);
         }
         else
         {
            _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY);
         }
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class JumpCondition extends Condition
   {
      
      public function JumpCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _description = _definition.TRANS_BASE_KEY;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class KillAnyCondition extends Condition
   {
      
      public function KillAnyCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _description = _definition.TRANS_BASE_KEY;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class KillNPCCondition extends Condition
   {
      
      private var _npc_id:int;
      
      public function KillNPCCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         this._npc_id = parseInt(param1);
         if(mandatory && _target > 0)
         {
            _target_plain = "/" + _target;
         }
         else
         {
            _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY + "_challenge");
         }
         _description = _description.replace(/%npc%/,InGameCatalog.instance.npc_names[this._npc_id]);
         _helpIconsClipIds = [InGameCatalog.instance.npc_icons[this._npc_id] + "_icon.png"];
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class KillNPCsCondition extends Condition
   {
      
      private var _npc_id_count:int;
      
      private var _npc_ids:Array = [];
      
      private var _npc_names_list:String = "";
      
      public function KillNPCsCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc2_:Array = param1.split(",");
         this._npc_id_count = parseInt(_loc2_.shift());
         var _loc3_:Array = InGameCatalog.instance.npc_names;
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_.length)
         {
            this._npc_ids[_loc4_] = parseInt(_loc2_[_loc4_]);
            if(_loc3_[this._npc_ids[_loc4_]] != null)
            {
               this._npc_names_list += ", " + _loc3_[this._npc_ids[_loc4_]];
            }
            _loc4_++;
         }
         this._npc_names_list = this._npc_names_list.substring(2);
         var _loc5_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         if(_target > 0)
         {
            _target_plain = "/" + _target;
         }
         else
         {
            _loc5_ += "_challenge";
         }
         _description = BPLocale.getText(_loc5_);
         _description = description.replace(/%npcs%/,this._npc_names_list);
         if(this._npc_id_count > 0)
         {
            _helpIconsClipIds = [InGameCatalog.instance.npc_icons[this._npc_ids[0]] + "_icon.png"];
         }
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class KillPlayersCondition extends Condition
   {
      
      private var _faction_ids:Array = [];
      
      private var _faction_names_list:String = "";
      
      private var _ship_types:Array = [];
      
      private var _ship_names_list:String = "";
      
      private var _avatar_ids:Array = [];
      
      public function KillPlayersCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc2_:Array = param1.split(",");
         var _loc3_:int = parseInt(_loc2_.shift());
         var _loc4_:Array = _loc2_.splice(0,_loc3_);
         var _loc5_:int = parseInt(_loc2_.shift());
         var _loc6_:Array = _loc2_.splice(0,_loc5_);
         var _loc7_:Array = InGameCatalog.instance.ship_names;
         var _loc8_:int = 0;
         while(_loc8_ < _loc4_.length)
         {
            this._ship_types[_loc8_] = parseInt(_loc4_[_loc8_]);
            if(_loc7_[this._ship_types[_loc8_]] != null)
            {
               this._ship_names_list += ", " + _loc7_[this._ship_types[_loc8_]];
            }
            _loc8_++;
         }
         this._ship_names_list = this._ship_names_list.substring(2);
         var _loc9_:Array = InGameCatalog.instance.factions_names;
         var _loc10_:int = 0;
         while(_loc10_ < _loc6_.length)
         {
            this._faction_ids[_loc10_] = parseInt(_loc6_[_loc10_]);
            this._faction_names_list += ", " + _loc9_[this._faction_ids[_loc10_]];
            _loc10_++;
         }
         this._faction_names_list = this._faction_names_list.substring(2);
         var _loc11_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         if(this._ship_types.length > 0)
         {
            _loc11_ += "_ship";
         }
         if(this._faction_ids.length > 0)
         {
            _loc11_ += "_faction";
         }
         if(this._avatar_ids.length > 0)
         {
            _loc11_ += "_avatar";
         }
         if(_target == 0)
         {
            _loc11_ += "_challenge";
         }
         else
         {
            _target_plain = "/" + _target;
         }
         _description = BPLocale.getText(_loc11_);
         _description = description.replace(/%types%/,this._ship_names_list);
         _description = description.replace(/%faction%/,this._faction_names_list);
         if(this._ship_types.length > 0)
         {
            _helpIconsClipIds = [InGameCatalog.instance.ship_icons[this._ship_types[0]] + "_icon.png"];
         }
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class LevelCondition extends Condition
   {
      
      public function LevelCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         _description = description.replace(/%count%/,_target);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class MapCondition extends Condition
   {
      
      private var _map_id:int;
      
      public function MapCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         this._map_id = parseInt(param1);
         _description = _description.replace(/%map%/,InGameCatalog.instance.mapNames[this._map_id]);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class MapDiverseCondition extends Condition
   {
      
      private var _map_name_list:String;
      
      private var _map_ids:Array;
      
      public function MapDiverseCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         this._map_ids = [];
         this._map_name_list = "";
         var _loc2_:Array = InGameCatalog.instance.mapNames;
         var _loc3_:Array = param1.split(",");
         var _loc4_:int = parseInt(_loc3_.shift());
         var _loc5_:int = 0;
         while(_loc5_ < _loc4_)
         {
            this._map_ids[_loc5_] = parseInt(_loc3_[_loc5_]);
            if(_loc2_[this._map_ids[_loc5_]] != null)
            {
               this._map_name_list += ", " + _loc2_[this._map_ids[_loc5_]];
            }
            _loc5_++;
         }
         this._map_name_list = this._map_name_list.substring(2);
         _description = _description.replace(/%maps%/,this._map_name_list);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   
   public class MiscellaneousCondition extends Condition
   {
      
      public function MiscellaneousCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc2_:int = int(param1);
         var _loc3_:String = _definition.TRANS_BASE_KEY + "_" + MiscellaneousConditionTypes.instance.getTranslationSuffix(_loc2_);
         _description = BPLocale.getText("q2_condition_" + _loc3_);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class MiscellaneousConditionTypes
   {
      
      private static var _instance:MiscellaneousConditionTypes;
      
      private static var _types:Array = [];
      
      public function MiscellaneousConditionTypes(param1:Function)
      {
         super();
         _types[0] = "NOTHING";
         _types[1] = "ON_ENEMY_MAP";
         _types[2] = "ON_PVP_MAP";
         _types[3] = "VISIBLE";
         _types[4] = "INVISIBLE";
         _types[5] = "IN_RADIATION_AREA";
         _types[6] = "INSTANT_SHIELD_ACTIVE";
         _types[7] = "LOW_ON_LIFE";
         _types[8] = "ATTACKING";
         _types[9] = "ATTACKED";
         _types[10] = "MARTYR";
         _types[11] = "REPAIRING";
         _types[12] = "OUTLAW";
         _types[13] = "ON_HOME_MAP";
         _types[14] = "ON_HOSTILE_HOME_MAP";
         _types[15] = "ON_MARS_MAP";
         _types[16] = "ON_EARTH_MAP";
         _types[17] = "ON_VENUS_MAP";
         _types[18] = "ON_OWN_FACTION_MAP";
         _types[19] = "ON_X_1";
         _types[20] = "ON_X_2";
         _types[21] = "ON_X_3";
         if(param1 !== hidden)
         {
            throw new Error("MiscellaneousConditionTypes is a Singleton and can only be accessed through MiscellaneousConditionTypes.getInstance()");
         }
      }
      
      private static function hidden() : void
      {
      }
      
      public static function get instance() : MiscellaneousConditionTypes
      {
         if(_instance == null)
         {
            _instance = new MiscellaneousConditionTypes(hidden);
         }
         return _instance;
      }
      
      public function getTranslationSuffix(param1:int) : String
      {
         return String(_types[param1]);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   
   public class MultiplierCondition extends Condition
   {
      
      public function MultiplierCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY + "_shiptype");
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class PreventCondition extends Condition
   {
      
      public function PreventCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _description = _definition.TRANS_BASE_KEY;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class ProximityCondition extends Condition
   {
      
      private var _avatar_id:int;
      
      private var _npc_id:int;
      
      private var _radius:int;
      
      public function ProximityCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         var _loc2_:Array = param1.split(",");
         this._avatar_id = parseInt(_loc2_.shift());
         this._npc_id = parseInt(_loc2_.shift());
         this._radius = parseInt(_loc2_.shift());
         _description = _description.replace(/%opponent%/,InGameCatalog.instance.npc_names[this._npc_id]);
         _helpIconsClipIds = [InGameCatalog.instance.npc_icons[this._npc_id] + "_icon.png"];
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class RestrictAmmunitionKillNPCCondition extends Condition
   {
      
      public function RestrictAmmunitionKillNPCCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc3_:InGameCatalog = null;
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:String = null;
         var _loc11_:String = null;
         var _loc14_:Array = null;
         var _loc15_:Array = null;
         var _loc16_:int = 0;
         var _loc17_:int = 0;
         var _loc2_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         _loc3_ = InGameCatalog.getInstance();
         _loc4_ = param1.split(",");
         _loc5_ = int(_loc4_.shift());
         var _loc6_:int = int(_loc4_.shift());
         switch(_loc6_)
         {
            case 1:
               _loc7_ = int(_loc4_.shift());
               _loc14_ = _loc4_.splice(0,_loc7_);
               break;
            case 2:
               _loc8_ = int(_loc4_.shift());
               _loc15_ = _loc4_.splice(0,_loc8_);
         }
         _loc9_ = "";
         if(_loc5_ > 0)
         {
            _loc9_ = _loc3_.npc_names[_loc5_];
            _loc2_ += "_npc";
         }
         else
         {
            _loc2_ += "_anynpc";
         }
         var _loc10_:Array = [];
         _loc11_ = "";
         if(_loc7_ > 0)
         {
            _loc2_ += "_laser";
            for each(_loc16_ in _loc14_)
            {
               _loc10_.push(_loc3_.batteryNames[_loc16_]);
            }
            _loc11_ = _loc10_.join(", ");
         }
         var _loc12_:Array = [];
         var _loc13_:String = "";
         if(_loc8_ > 0)
         {
            _loc2_ += "_rocket";
            for each(_loc17_ in _loc15_)
            {
               _loc12_.push(_loc3_.rocketNames[_loc17_]);
            }
            _loc13_ = _loc12_.join(", ");
         }
         _target_plain = "/" + BPLocale.round(_target);
         _description = BPLocale.getText(_loc2_);
         _description = _description.replace(/%npc%/,_loc9_);
         _description = _description.replace(/%laser%/,_loc11_);
         _description = _description.replace(/%rocket%/,_loc13_);
         if(_loc5_ > 0)
         {
            _helpIconsClipIds = [_loc3_.npc_icons[_loc5_] + "_icon.png"];
         }
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class RestrictAmmunitionKillPlayerCondition extends Condition
   {
      
      public function RestrictAmmunitionKillPlayerCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc3_:InGameCatalog = null;
         var _loc4_:Array = null;
         var _loc5_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:int = 0;
         var _loc10_:String = null;
         var _loc11_:String = null;
         var _loc15_:String = null;
         var _loc16_:Array = null;
         var _loc17_:Array = null;
         var _loc18_:int = 0;
         var _loc19_:int = 0;
         var _loc2_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         _loc3_ = InGameCatalog.getInstance();
         _loc4_ = param1.split(",");
         _loc5_ = int(_loc4_.shift());
         var _loc6_:int = int(_loc4_.shift());
         var _loc7_:int = int(_loc4_.shift());
         switch(_loc7_)
         {
            case 1:
               _loc8_ = int(_loc4_.shift());
               _loc16_ = _loc4_.splice(0,_loc8_);
               break;
            case 2:
               _loc9_ = int(_loc4_.shift());
               _loc17_ = _loc4_.splice(0,_loc9_);
         }
         _loc10_ = "";
         if(_loc5_ > 0)
         {
            _loc10_ = _loc3_.ship_names[_loc5_];
            _loc2_ += "_ship";
         }
         else
         {
            _loc2_ += "_anyship";
         }
         _loc11_ = "";
         if(_loc6_ > 0)
         {
            _loc11_ = _loc3_.factions_names[_loc6_];
            _loc2_ += "_faction";
         }
         else
         {
            _loc2_ += "_anyfaction";
         }
         var _loc12_:Array = [];
         var _loc13_:String = "";
         if(_loc8_ > 0)
         {
            _loc2_ += "_laser";
            for each(_loc18_ in _loc16_)
            {
               _loc12_.push(_loc3_.batteryNames[_loc18_]);
            }
            _loc13_ = _loc12_.join(", ");
         }
         var _loc14_:Array = [];
         _loc15_ = "";
         if(_loc9_ > 0)
         {
            _loc2_ += "_rocket";
            for each(_loc19_ in _loc17_)
            {
               _loc14_.push(_loc3_.rocketNames[_loc19_]);
            }
            _loc15_ = _loc14_.join(", ");
         }
         _target_plain = "/" + BPLocale.round(_target);
         _description = BPLocale.getText(_loc2_);
         _description = _description.replace(/%ship%/,_loc10_);
         _description = _description.replace(/%faction%/,_loc11_);
         _description = _description.replace(/%laser%/,_loc13_);
         _description = _description.replace(/%rocket%/,_loc15_);
         if(_loc5_ > 0)
         {
            _helpIconsClipIds = [_loc3_.ship_icons[_loc5_] + "_icon.png"];
         }
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class SalvageCondition extends Condition
   {
      
      private var _faction_id:int;
      
      private var _ship_type:int;
      
      private var _npc_type:int;
      
      private var _loot_type:int;
      
      private var _ore_id:int;
      
      public function SalvageCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc2_:Array = param1.split(",");
         this._faction_id = parseInt(_loc2_.shift());
         this._ship_type = parseInt(_loc2_.shift());
         this._npc_type = parseInt(_loc2_.shift());
         this._loot_type = parseInt(_loc2_.shift());
         this._ore_id = parseInt(_loc2_.shift());
         var _loc3_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         if(this._ore_id == 0)
         {
            _loc3_ += "_any";
         }
         else
         {
            _loc3_ += "_spec";
         }
         if(this._npc_type == 0 && this._ship_type == 0 && this._faction_id == 0)
         {
            _loc3_ += "_any";
         }
         else
         {
            if(this._npc_type > 0)
            {
               _loc3_ += "_npc";
            }
            if(this._ship_type > 0)
            {
               _loc3_ += "_ship";
            }
            if(this._faction_id > 0)
            {
               _loc3_ += "_faction";
            }
         }
         if(_target == 0)
         {
            _loc3_ += "_challenge";
         }
         else
         {
            _target_plain = "/" + _target;
         }
         _description = BPLocale.getText(_loc3_);
         _description = description.replace(/%ore%/,InGameCatalog.instance.ore_names[this._ore_id]);
         _description = description.replace(/%npc%/,InGameCatalog.instance.npc_names[this._npc_type]);
         _description = description.replace(/%ship%/,InGameCatalog.instance.ship_names[this._ship_type]);
         _description = description.replace(/%faction%/,InGameCatalog.instance.factions_names[this._faction_id]);
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class SaveAmmunitionCondition extends Condition
   {
      
      private var _ammo_type:int;
      
      private var _ammo_grade:int;
      
      public function SaveAmmunitionCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc4_:String = null;
         var _loc2_:Array = param1.split(",");
         this._ammo_type = parseInt(_loc2_.shift());
         this._ammo_grade = parseInt(_loc2_.shift());
         var _loc3_:* = _definition.TRANS_BASE_KEY + "_" + InGameCatalog.instance.damage_types[this._ammo_type];
         _loc4_ = "";
         if(this._ammo_grade > 0)
         {
            _loc3_ += "_spec";
            if(this._ammo_type == 1)
            {
               _loc4_ = InGameCatalog.instance.battery_types[this._ammo_grade];
            }
            else if(this._ammo_type == 2)
            {
               _loc4_ = InGameCatalog.instance.rocketNames[this._ammo_grade];
            }
         }
         if(_target == 0 && this._ammo_type > 0)
         {
            _loc3_ += "_none";
         }
         if(mandatory && _target > 0)
         {
            _target_plain = "/" + _target;
         }
         _description = BPLocale.getText("q2_condition_" + _loc3_);
         _description = description.replace(/%type%/,_loc4_);
         _description = description.replace(/%count%/,_target);
      }
      
      override public function get currentVerbose() : String
      {
         if(_target == 0)
         {
            return "";
         }
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class SellOreCondition extends Condition
   {
      
      private var _ore_id:int;
      
      public function SellOreCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         this._ore_id = parseInt(param1);
         var _loc2_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         if(this._ore_id > 0)
         {
            _loc2_ += "_ore";
         }
         if(_target == 0)
         {
            _loc2_ += "_challenge";
         }
         else
         {
            _target_plain = "/" + _target;
         }
         _description = BPLocale.getText(_loc2_);
         _description = _description.replace(/%ore%/,InGameCatalog.instance.ore_names[this._ore_id]);
         _description = description.replace(/%count%/,_target);
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class SpendAmmunitionCondition extends Condition
   {
      
      private var _ammo_type:int;
      
      private var _ammo_grade:int;
      
      public function SpendAmmunitionCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc4_:String = null;
         var _loc2_:Array = param1.split(",");
         this._ammo_type = parseInt(_loc2_.shift());
         this._ammo_grade = parseInt(_loc2_.shift());
         var _loc3_:* = _definition.TRANS_BASE_KEY + "_" + InGameCatalog.instance.damage_types[this._ammo_type];
         _loc4_ = "";
         if(this._ammo_grade > 0)
         {
            _loc3_ += "_spec";
            if(this._ammo_type == 1)
            {
               _loc4_ = InGameCatalog.instance.battery_types[this._ammo_grade];
            }
            else if(this._ammo_type == 2)
            {
               _loc4_ = InGameCatalog.instance.rocketNames[this._ammo_grade];
            }
         }
         if(_target == 0)
         {
            _loc3_ += "_challenge";
         }
         else
         {
            _target_plain = "/" + _target;
         }
         _description = BPLocale.getText("q2_condition_" + _loc3_);
         _description = description.replace(/%type%/,_loc4_);
         _description = description.replace(/%count%/,_target);
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class StayAwayCondition extends Condition
   {
      
      public function StayAwayCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _description = _definition.TRANS_BASE_KEY;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class SteadinessCondition extends Condition
   {
      
      public function SteadinessCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _description = _definition.TRANS_BASE_KEY;
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class StealCondition extends Condition
   {
      
      private var _faction_id:int;
      
      private var _ship_types:Array = [];
      
      private var _ship_names_list:String = "";
      
      public function StealCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc2_:Array = param1.split(",");
         this._faction_id = parseInt(_loc2_.shift());
         var _loc3_:Array = InGameCatalog.instance.ship_names;
         var _loc4_:int = 0;
         while(_loc4_ < _loc2_.length)
         {
            this._ship_types[_loc4_] = parseInt(_loc2_[_loc4_]);
            if(_loc3_[this._ship_types[_loc4_]] != null)
            {
               this._ship_names_list += ", " + _loc3_[this._ship_types[_loc4_]];
            }
            _loc4_++;
         }
         this._ship_names_list = this._ship_names_list.substring(2);
         var _loc5_:* = "q2_condition_" + _definition.TRANS_BASE_KEY;
         if(this._ship_names_list.length > 0)
         {
            _loc5_ += "_ship";
         }
         else
         {
            _loc5_ += "_any";
         }
         if(this._faction_id > 0)
         {
            _loc5_ += "_faction";
         }
         if(_target == 0)
         {
            _loc5_ += "_challenge";
         }
         else
         {
            _target_plain = "/" + _target;
         }
         _description = BPLocale.getText(_loc5_);
         _description = description.replace(/%ship%/,this._ship_names_list);
         _description = description.replace(/%faction%/,InGameCatalog.instance.factions_names[this._faction_id]);
         if(this._ship_types.length > 0)
         {
            _helpIconsClipIds = [InGameCatalog.instance.ship_icons[this._ship_types[0]] + "_icon.png"];
         }
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class TakeDamageCondition extends Condition
   {
      
      private var _damage_type_id:int;
      
      public function TakeDamageCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         this._damage_type_id = parseInt(param1);
         if(_mandatory)
         {
            _target_plain = "/" + _target;
         }
         _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY + "_" + InGameCatalog.instance.damage_types[this._damage_type_id]);
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.TimeFormatter;
   
   public class TimerCondition extends Condition
   {
      
      public function TimerCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         _target /= 1000;
         if(_target == 0)
         {
            _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY + "_challenge");
         }
      }
      
      override public function get currentVerbose() : String
      {
         return TimeFormatter.formatTime(int(_current / 1000));
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   public class TravelCondition extends Condition
   {
      
      public function TravelCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         if(_mandatory)
         {
            _target_plain = "/" + _target;
         }
      }
      
      override public function get currentVerbose() : String
      {
         return String(_current);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import net.bigpoint.darkorbit.InGameCatalog;
   
   public class VisitMapCondition extends Condition
   {
      
      private var _map_id:int;
      
      public function VisitMapCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         super.parseMatches(param1);
         this._map_id = parseInt(param1);
         _description = _description.replace(/%map%/,InGameCatalog.instance.mapNames[this._map_id]);
      }
   }
}

package net.bigpoint.darkorbit.questfm.conditions
{
   import com.bigpoint.utils.BPLocale;
   
   public class WebCondition extends Condition
   {
      
      public static const BUY_LASER:int = 0;
      
      public static const BUY_SHIP:int = 1;
      
      public static const BUY_SPEED_GENERATOR:int = 2;
      
      public static const EQUIP_SPEED_GENERATOR:int = 3;
      
      public static const BUY_LASER_AMMUNITION_URI:int = 4;
      
      public static const CREATE_PROMERIUM:int = 5;
      
      public static const USE_PROMERIUM:int = 6;
      
      public static const USE_GG_MATERIALIZER:int = 7;
      
      public static const VERIFY_EMAIL_ADRESS:int = 8;
      
      public static const APPLY_FOR_CLAN_MEMBERSHIP:int = 9;
      
      private var _precise_web_condition_id:int;
      
      public function WebCondition()
      {
         super();
      }
      
      override protected function parseMatches(param1:String) : void
      {
         var _loc2_:Array = [];
         _loc2_[BUY_LASER] = "buyLaser_single";
         _loc2_[BUY_SHIP] = "buyShip_bigger";
         _loc2_[BUY_SPEED_GENERATOR] = "buyGenSpeed_single";
         _loc2_[EQUIP_SPEED_GENERATOR] = "equipGenSpeed_single";
         _loc2_[BUY_LASER_AMMUNITION_URI] = "buyAmmoLeastUridium";
         _loc2_[CREATE_PROMERIUM] = "refinePromerium";
         _loc2_[USE_PROMERIUM] = "upgrade_any_promerium";
         _loc2_[USE_GG_MATERIALIZER] = "useGalaxyGatesEnergy";
         _loc2_[VERIFY_EMAIL_ADRESS] = "verifyMail";
         _loc2_[APPLY_FOR_CLAN_MEMBERSHIP] = "applyToClan";
         this._precise_web_condition_id = parseInt(param1);
         _description = BPLocale.getText("q2_condition_" + _definition.TRANS_BASE_KEY + "_" + _loc2_[this._precise_web_condition_id]);
         if(this._precise_web_condition_id == BUY_SHIP)
         {
            _description = _description.replace(/%ship%/,"Phoenix");
         }
         if(this._precise_web_condition_id == BUY_LASER_AMMUNITION_URI)
         {
            _description = _description.replace(/%count%/,_target);
            _target_plain = "/" + _target;
         }
      }
      
      override public function get currentVerbose() : String
      {
         if(this._precise_web_condition_id == BUY_LASER_AMMUNITION_URI)
         {
            return String(_current);
         }
         return "";
      }
   }
}

package net.bigpoint.darkorbit.refinement
{
   import fl.controls.ComboBox;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   
   public class ComboBoxElement extends SimpleElement
   {
      
      private var guiManager:GuiManager;
      
      private var _comboBox:ComboBox;
      
      private var amounts:Array = [1,5,10,50,100,500,1000];
      
      public function ComboBoxElement(param1:GuiManager)
      {
         super(TYPE_COMBO_BOX_ELEMENT);
         this.guiManager = param1;
         this.init();
      }
      
      private function init() : void
      {
         this._comboBox = new ComboBox();
         addChild(this._comboBox);
      }
      
      public function setAvailableAmmount(param1:int) : void
      {
         var _loc3_:int = 0;
         var _loc2_:int = 0;
         while(_loc2_ < this.amounts.length)
         {
            _loc3_ = int(this.amounts[_loc2_]);
            if(_loc3_ < param1)
            {
               this._comboBox.addItem({"label":this.amounts[_loc2_]});
            }
            _loc2_++;
         }
         this._comboBox.addItem({"label":param1});
      }
      
      public function get comboBox() : ComboBox
      {
         return this._comboBox;
      }
   }
}

package net.bigpoint.darkorbit.refinement
{
   import flash.display.MovieClip;
   
   public class OreIcon extends MovieClip
   {
      
      private var _id:int;
      
      public function OreIcon(param1:int)
      {
         super();
         this._id = param1;
      }
      
      public function get id() : int
      {
         return this._id;
      }
   }
}

package net.bigpoint.darkorbit.refinement
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   
   public class RefinementLabel extends Sprite
   {
      
      private var refinementModule:RefinementModule;
      
      private var textField:TextField;
      
      public function RefinementLabel(param1:RefinementModule)
      {
         super();
         this.refinementModule = param1;
         this.init();
      }
      
      private function init() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("refinement"));
         var _loc2_:Bitmap = _loc1_.getEmbededBitmap("labelSlot");
         this.addChild(_loc2_);
         this.textField = new TextField();
         this.textField.defaultTextFormat = Styles.logFmt;
         this.textField.embedFonts = Styles.logEmbed;
         this.textField.width = _loc2_.width;
         this.textField.multiline = false;
         this.textField.wordWrap = false;
         this.textField.autoSize = TextFieldAutoSize.CENTER;
         this.textField.textColor = 16777215;
         this.textField.antiAliasType = "advanced";
         this.textField.selectable = false;
         this.addChild(this.textField);
      }
      
      public function setText(param1:String) : void
      {
         this.textField.text = param1;
      }
   }
}

package net.bigpoint.darkorbit.refinement
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.events.MouseEvent;
   import flash.events.TimerEvent;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import flash.utils.Timer;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.GuiManager;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.ButtonElement;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.elements.TextFieldElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.pattern.OrePattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.RefinerInfo;
   
   public class RefinementManager
   {
      
      public static const logger:ILogger = Log.getLogger("RefinementManager");
      
      private var _guiManager:GuiManager;
      
      private var refinementButton:ButtonElement;
      
      private var updateButton:ButtonElement;
      
      private var oreIDToProduce:int;
      
      private var itemRefreshTimer:Timer;
      
      public function RefinementManager(param1:GuiManager)
      {
         super();
         this._guiManager = param1;
         this.createRefinementWindow();
         this.refreshItemList();
      }
      
      public function updateOreCounts() : void
      {
         var _loc1_:Array = null;
         var _loc2_:SimpleContainer = null;
         var _loc3_:Array = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:OrePattern = null;
         var _loc7_:StaticRefinementModule = null;
         var _loc8_:SourceRefinementModule = null;
         var _loc9_:StaticRefinementModule = null;
         var _loc10_:StaticRefinementModule = null;
         _loc1_ = Hero.getOres([OrePattern.ORE_PROMETIUM,OrePattern.ORE_ENDURIUM,OrePattern.ORE_TERBIUM,OrePattern.ORE_XENOMIT,OrePattern.ORE_PALLADIUM]);
         _loc2_ = this._guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT).getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_STATIC);
         _loc3_ = _loc2_.getAllElements();
         _loc4_ = 0;
         _loc5_ = 0;
         while(_loc5_ < _loc3_.length)
         {
            if(_loc3_[_loc5_] is StaticRefinementModule)
            {
               _loc7_ = _loc3_[_loc5_];
               _loc6_ = _loc1_[_loc4_++];
               _loc7_.setOreCount(_loc6_.count);
               _loc7_.updateAmmount();
            }
            _loc5_++;
         }
         _loc1_ = Hero.getOres([OrePattern.ORE_PROMETID,OrePattern.ORE_DURANIUM,OrePattern.ORE_PROMERIUM,OrePattern.ORE_SEPROM]);
         _loc2_ = this._guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT).getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_SOURCE);
         _loc3_ = _loc2_.getAllElements();
         _loc4_ = 0;
         _loc5_ = 0;
         while(_loc5_ < _loc3_.length)
         {
            if(_loc3_[_loc5_] is SourceRefinementModule)
            {
               _loc8_ = _loc3_[_loc5_];
               _loc6_ = _loc1_[_loc4_++];
               _loc8_.setOreCount(_loc6_.count);
               _loc8_.updateAmmount();
            }
            _loc5_++;
         }
         _loc2_ = this._guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT).getContainer(SimpleContainer.CLASS_REFINEMENT_REFINEMENT_STATIC);
         _loc3_ = _loc2_.getAllElements();
         _loc1_ = Hero.getOres([OrePattern.ORE_PROMETIUM,OrePattern.ORE_ENDURIUM,OrePattern.ORE_TERBIUM]);
         _loc4_ = 0;
         _loc5_ = 0;
         while(_loc5_ < _loc3_.length)
         {
            if(_loc3_[_loc5_] is StaticRefinementModule)
            {
               _loc9_ = _loc3_[_loc5_];
               _loc6_ = _loc1_[_loc4_++];
               _loc9_.setOreCount(_loc6_.count);
               _loc9_.updateAmmount();
            }
            _loc5_++;
         }
         _loc2_ = this._guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT).getContainer(SimpleContainer.CLASS_REFINEMENT_REFINEMENT_SOURCE);
         _loc3_ = _loc2_.getAllElements();
         _loc1_ = Hero.getOres([OrePattern.ORE_PROMETID,OrePattern.ORE_DURANIUM,OrePattern.ORE_PROMERIUM,OrePattern.ORE_XENOMIT]);
         _loc4_ = 0;
         _loc5_ = 0;
         while(_loc5_ < _loc3_.length)
         {
            if(_loc3_[_loc5_] is StaticRefinementModule)
            {
               _loc10_ = _loc3_[_loc5_];
               _loc6_ = _loc1_[_loc4_++];
               _loc10_.setOreCount(_loc6_.count);
               _loc10_.updateAmmount();
            }
            _loc5_++;
         }
      }
      
      public function updateItem(param1:String, param2:int, param3:int) : void
      {
         var _loc6_:OreIcon = null;
         var _loc4_:TargetRefinementModule = this.getTargetRefinementModule(param1);
         if(_loc4_ != null)
         {
            _loc4_.setAmmount(param3);
         }
         var _loc5_:SourceRefinementModule = this.getSourceRefinementModule(param2);
         if(_loc5_ != null)
         {
            _loc4_.removeOreIcon();
            if(param3 > 0)
            {
               _loc6_ = _loc5_.createOreIcon();
               _loc4_.setOreIcon(_loc6_);
            }
         }
      }
      
      private function getTargetRefinementModule(param1:String) : TargetRefinementModule
      {
         var _loc5_:TargetRefinementModule = null;
         var _loc2_:SimpleContainer = this._guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT).getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_TARGET);
         var _loc3_:Array = _loc2_.getAllElements();
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_.length)
         {
            if(_loc3_[_loc4_] is TargetRefinementModule)
            {
               _loc5_ = _loc3_[_loc4_];
               if(_loc5_.identifier == param1)
               {
                  return _loc5_;
               }
            }
            _loc4_++;
         }
         return null;
      }
      
      private function getSourceRefinementModule(param1:int) : SourceRefinementModule
      {
         var _loc5_:SourceRefinementModule = null;
         var _loc2_:SimpleContainer = this._guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT).getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_SOURCE);
         var _loc3_:Array = _loc2_.getAllElements();
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_.length)
         {
            if(_loc3_[_loc4_] is SourceRefinementModule)
            {
               _loc5_ = _loc3_[_loc4_];
               if(_loc5_.type == param1)
               {
                  return _loc5_;
               }
            }
            _loc4_++;
         }
         return null;
      }
      
      private function onRefinementTab(param1:MouseEvent) : void
      {
         this.setVisibility(true);
      }
      
      private function onUpdateTab(param1:MouseEvent) : void
      {
         this.setVisibility(false);
      }
      
      private function setVisibility(param1:Boolean) : void
      {
         var _loc2_:SimpleWindow = this._guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT);
         var _loc3_:SimpleContainer = _loc2_.getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_STATIC);
         var _loc4_:SimpleContainer = _loc2_.getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_SOURCE);
         var _loc5_:SimpleContainer = _loc2_.getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_TARGET);
         var _loc6_:SimpleContainer = _loc2_.getContainer(SimpleContainer.CLASS_REFINEMENT_REFINEMENT_STATIC);
         var _loc7_:SimpleContainer = _loc2_.getContainer(SimpleContainer.CLASS_REFINEMENT_REFINEMENT_SOURCE);
         var _loc8_:SimpleContainer = _loc2_.getContainer(SimpleContainer.CLASS_REFINEMENT_REFINEMENT_BUTTONS);
         var _loc9_:SimpleContainer = _loc2_.getContainer(SimpleContainer.CLASS_REFINEMENT_REFINEMENT_TREE);
         _loc6_.visible = param1;
         _loc7_.visible = param1;
         _loc8_.visible = param1;
         _loc9_.visible = param1;
         this.refinementButton.selected = param1;
         _loc3_.visible = !param1;
         _loc4_.visible = !param1;
         _loc5_.visible = !param1;
         this.updateButton.selected = !param1;
      }
      
      public function createRefinementWindow() : void
      {
         var _loc2_:SWFFinisher = null;
         var _loc3_:SimpleContainer = null;
         var _loc4_:SimpleElement = null;
         var _loc5_:Sprite = null;
         var _loc1_:SimpleWindow = this._guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT);
         if(_loc1_ == null)
         {
            _loc1_ = this._guiManager.createWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT);
            _loc1_.addEventListener(SimpleWindow.ON_MAXIMIZE_CLICKED,this.onRefinementWindowMaximized);
            _loc1_.addEventListener(SimpleWindow.ON_MINIMIZE_CLICKED,this.onRefinementWindowMinimized);
            _loc2_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
            _loc3_ = _loc1_.getContainer(SimpleContainer.CLASS_REFINEMENT_BUTTONS);
            this.refinementButton = new ButtonElement(ButtonElement.TYPE_REFINEMENT_REFINEMENT,BPLocale.getText("lab_btn_refinement"),_loc2_.getEmbededMovieClip("button1"));
            this.refinementButton.selected = true;
            this.refinementButton.addEventListener(MouseEvent.CLICK,this.onRefinementTab);
            _loc3_.addElement(this.refinementButton);
            this.updateButton = new ButtonElement(ButtonElement.TYPE_REFINEMENT_UPDATE,BPLocale.getText("lab_btn_update"),_loc2_.getEmbededMovieClip("button1"));
            this.updateButton.addEventListener(MouseEvent.CLICK,this.onUpdateTab);
            _loc3_.addElement(this.updateButton,SimpleContainer.ALIGN_HORIZONTAL);
            _loc4_ = new SimpleElement(SimpleElement.TYPE_DEFAULT_ELEMENT);
            _loc5_ = new Sprite();
            _loc5_.graphics.lineStyle(1,8289918);
            _loc5_.graphics.moveTo(0,0);
            _loc5_.graphics.lineTo(434,0);
            _loc4_.addChild(_loc5_);
            _loc4_.y = 20;
            _loc3_.addElement(_loc4_,SimpleContainer.NO_ALIGN,0);
            _loc1_.addContainer(_loc3_);
            this.createRefinementContainers();
            this.createUpdateContainers();
            if(_loc1_.isMaximized())
            {
               this.startRefreshTimer();
            }
         }
      }
      
      private function onRefinementWindowMaximized(param1:Event) : void
      {
         this.killRefreshTimer();
         this.startRefreshTimer();
         this.refreshItemList();
      }
      
      private function onRefinementWindowMinimized(param1:Event) : void
      {
         this.killRefreshTimer();
      }
      
      private function startRefreshTimer() : void
      {
         this.itemRefreshTimer = new Timer(1000,600);
         this.itemRefreshTimer.addEventListener(TimerEvent.TIMER,this.onRefreshItems);
         this.itemRefreshTimer.addEventListener(TimerEvent.TIMER_COMPLETE,this.handleTimerComplete);
         this.itemRefreshTimer.start();
      }
      
      private function handleTimerComplete(param1:Event) : void
      {
         var _loc2_:SimpleWindow = this._guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT);
         _loc2_.minimize(true);
      }
      
      private function killRefreshTimer() : void
      {
         if(this.itemRefreshTimer != null)
         {
            this.itemRefreshTimer.stop();
            this.itemRefreshTimer.removeEventListener(TimerEvent.TIMER,this.onRefreshItems);
            this.itemRefreshTimer.removeEventListener(TimerEvent.TIMER_COMPLETE,this.handleTimerComplete);
            this.itemRefreshTimer = null;
         }
      }
      
      private function onRefreshItems(param1:TimerEvent) : void
      {
         this.refreshItemList();
      }
      
      private function refreshItemList() : void
      {
         this.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.LAB,[ServerCommands.UPDATE,ServerCommands.GET]);
      }
      
      private function createRefinementContainers() : void
      {
         var _loc8_:int = 0;
         var _loc9_:OrePattern = null;
         var _loc10_:String = null;
         var _loc11_:XML = null;
         var _loc12_:SimpleContainer = null;
         var _loc13_:SimpleContainer = null;
         var _loc14_:StaticRefinementModule = null;
         var _loc15_:StaticRefinementModule = null;
         var _loc16_:int = 0;
         var _loc17_:StaticRefinementModule = null;
         var _loc18_:String = null;
         var _loc19_:Array = null;
         var _loc20_:RefinerInfo = null;
         var _loc21_:OrePattern = null;
         var _loc22_:Boolean = false;
         var _loc23_:StaticRefinementModule = null;
         var _loc24_:Array = null;
         var _loc25_:int = 0;
         var _loc26_:ButtonElement = null;
         var _loc1_:SimpleWindow = this._guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT);
         var _loc2_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc3_:SimpleContainer = _loc1_.getContainer(SimpleContainer.CLASS_REFINEMENT_REFINEMENT_TREE);
         var _loc4_:SimpleElement = new SimpleElement(SimpleElement.TYPE_DEFAULT_ELEMENT);
         _loc4_.addChild(_loc2_.getEmbededBitmap("ore_tree"));
         _loc3_.addElement(_loc4_);
         _loc1_.addContainer(_loc3_);
         var _loc5_:SimpleContainer = _loc1_.getContainer(SimpleContainer.CLASS_REFINEMENT_REFINEMENT_STATIC);
         var _loc6_:int = 0;
         var _loc7_:int = 8;
         for each(_loc11_ in Main.gameXML.refinementWindow.refinement.staticOres.ore)
         {
            _loc8_ = parseInt(_loc11_.attribute("type"));
            _loc9_ = PatternManager.orePatterns[_loc8_];
            _loc10_ = null;
            if(_loc11_.attribute("tooltipKey").length() > 0)
            {
               _loc10_ = BPLocale.getText(_loc11_.attribute("tooltipKey"));
            }
            _loc17_ = new StaticRefinementModule(this,_loc8_,_loc9_.languageKey,_loc9_.getResKey(),_loc10_);
            _loc17_.x = _loc6_;
            _loc17_.y = 40;
            _loc6_ = _loc6_ + _loc17_.background.width + _loc7_;
            _loc5_.addElement(_loc17_,SimpleContainer.NO_ALIGN,1);
         }
         _loc1_.addContainer(_loc5_);
         _loc12_ = _loc1_.getContainer(SimpleContainer.CLASS_REFINEMENT_REFINEMENT_SOURCE);
         _loc13_ = _loc1_.getContainer(SimpleContainer.CLASS_REFINEMENT_REFINEMENT_BUTTONS);
         _loc6_ = 0;
         _loc7_ = 8;
         for each(_loc11_ in Main.gameXML.refinementWindow.refinement.ores.ore)
         {
            _loc8_ = parseInt(_loc11_.attribute("type"));
            _loc9_ = PatternManager.orePatterns[_loc8_];
            _loc10_ = null;
            _loc18_ = _loc11_.attribute("tooltipKey");
            if(_loc18_.length > 0)
            {
               _loc24_ = _loc18_.split(",");
               if(_loc24_.length > 1)
               {
                  _loc10_ = "";
                  _loc25_ = 0;
                  while(_loc25_ < _loc24_.length)
                  {
                     _loc10_ += BPLocale.getText(_loc24_[_loc25_]) + "\n";
                     _loc25_++;
                  }
               }
               else
               {
                  _loc10_ = BPLocale.getText(_loc11_.attribute("tooltipKey"));
               }
            }
            _loc19_ = _loc9_.refiners;
            if(_loc19_[0])
            {
               _loc20_ = _loc19_[0];
               _loc21_ = PatternManager.orePatterns[_loc20_.oreID];
               _loc10_ = _loc10_.replace("%COUNT_1%",_loc20_.count);
               _loc10_ = _loc10_.replace("%ORE_1%",BPLocale.getText(_loc21_.languageKey));
            }
            if(_loc19_[1])
            {
               _loc20_ = _loc19_[1];
               _loc21_ = PatternManager.orePatterns[_loc20_.oreID];
               _loc10_ = _loc10_.replace("%COUNT_2%",_loc20_.count);
               _loc10_ = _loc10_.replace("%ORE_2%",BPLocale.getText(_loc21_.languageKey));
            }
            if(_loc19_[2])
            {
               _loc20_ = _loc19_[2];
               _loc21_ = PatternManager.orePatterns[_loc20_.oreID];
               _loc10_ = _loc10_.replace("%COUNT%",_loc20_.count);
               _loc10_ = _loc10_.replace("%ORE%",BPLocale.getText(_loc21_.languageKey));
            }
            _loc22_ = false;
            if(_loc11_.attribute("button").length() > 0)
            {
               _loc22_ = Main.parseBooleanFromString(_loc11_.attribute("button"));
            }
            _loc23_ = new StaticRefinementModule(this,_loc8_,_loc9_.languageKey,_loc9_.getResKey(),_loc10_);
            _loc23_.x = _loc6_;
            _loc23_.y = 55;
            if(_loc22_)
            {
               _loc26_ = new ButtonElement(ButtonElement.TYPE_REFINEMENT_REFINEMENT,BPLocale.getText("lab_btn_refine"),_loc2_.getEmbededMovieClip("button1"));
               _loc26_.addEventListener(MouseEvent.CLICK,this.onRefine);
               _loc26_.width = _loc23_.width;
               _loc26_.y = 100;
               _loc23_.addChild(_loc26_);
            }
            _loc6_ = _loc6_ + _loc23_.background.width + _loc7_;
            _loc12_.addElement(_loc23_,SimpleContainer.NO_ALIGN,1);
         }
         _loc14_ = StaticRefinementModule(_loc12_.getElementAt(2));
         _loc14_.y = 215;
         _loc14_.x = 42;
         _loc15_ = StaticRefinementModule(_loc12_.getElementAt(3));
         _loc15_.x = 220;
         _loc16_ = _loc12_.width > _loc5_.width ? int(_loc12_.width) : int(_loc5_.width);
         _loc12_.x = _loc3_.x = 260 - _loc16_ / 2;
         _loc5_.x = _loc12_.x - 47;
         _loc1_.addContainer(_loc12_);
         _loc1_.addContainer(_loc13_);
      }
      
      private function onRefine(param1:MouseEvent) : void
      {
         var _loc2_:ButtonElement = param1.currentTarget as ButtonElement;
         var _loc3_:StaticRefinementModule = _loc2_.parent as StaticRefinementModule;
         this.oreIDToProduce = _loc3_.type;
         var _loc4_:SimpleWindow = this.guiManager.createWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT_REFINE);
         var _loc5_:SimpleContainer = new SimpleContainer(this.guiManager,SimpleContainer.CLASS_DEFAULT);
         _loc5_.x = 20;
         _loc5_.y = 35;
         var _loc6_:TextFieldElement = new TextFieldElement(200,20,new TextFormat(Styles.logFmt.font,Styles.logFmt.size,16777215),BPLocale.getText(_loc3_.languageKey),TextFormatAlign.LEFT);
         _loc5_.addElement(_loc6_);
         var _loc7_:TextFieldElement = new TextFieldElement(200,20,new TextFormat(Styles.plainStdFmt.font,Styles.plainStdFmt.size,16777215),BPLocale.getText("lab_refine_question"),TextFormatAlign.LEFT);
         _loc5_.addElement(_loc7_,SimpleContainer.ALIGN_VERTICAL);
         var _loc8_:ComboBoxElement = new ComboBoxElement(this.guiManager);
         _loc5_.addElement(_loc8_,SimpleContainer.ALIGN_VERTICAL);
         this.fillComboBox(_loc3_.type,_loc8_);
         var _loc9_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc10_:ButtonElement = new ButtonElement(ButtonElement.TYPE_OK,BPLocale.getText("lab_btn_refine"),_loc9_.getEmbededMovieClip("button1"));
         _loc10_.addEventListener(MouseEvent.CLICK,this.onOkBtn);
         _loc5_.addElement(_loc10_);
         _loc10_.y = 90;
         var _loc11_:ButtonElement = new ButtonElement(ButtonElement.TYPE_CANCEL,BPLocale.getText("lab_cancel"),_loc9_.getEmbededMovieClip("button1"));
         _loc11_.addEventListener(MouseEvent.CLICK,this.onCancelBtn);
         _loc5_.addElement(_loc11_,SimpleContainer.ALIGN_HORIZONTAL);
         _loc4_.addContainer(_loc5_);
         _loc4_.modal = true;
      }
      
      private function onOkBtn(param1:MouseEvent) : void
      {
         var _loc2_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT_REFINE);
         var _loc3_:SimpleContainer = _loc2_.getContainer(SimpleContainer.CLASS_DEFAULT);
         var _loc4_:ComboBoxElement = ComboBoxElement(_loc3_.getElement(SimpleElement.TYPE_COMBO_BOX_ELEMENT));
         var _loc5_:int = parseInt(_loc4_.comboBox.selectedLabel);
         var _loc6_:Array = [ServerCommands.REFINEMENT,ServerCommands.PRODUCE,this.oreIDToProduce.toString(),_loc5_.toString()];
         this.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.LAB,_loc6_);
         this.closeRefinePopup();
      }
      
      private function onCancelBtn(param1:MouseEvent) : void
      {
         this.closeRefinePopup();
      }
      
      private function closeRefinePopup() : void
      {
         var _loc5_:ButtonElement = null;
         var _loc1_:SimpleWindow = this.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT_REFINE);
         var _loc2_:SimpleContainer = _loc1_.getContainer(SimpleContainer.CLASS_DEFAULT);
         var _loc3_:Array = _loc2_.getElements(SimpleElement.TYPE_SIMPLE_BUTTON);
         var _loc4_:int = 0;
         while(_loc4_ < _loc3_.length)
         {
            _loc5_ = _loc3_[_loc4_];
            if(_loc5_.getType() == ButtonElement.TYPE_OK)
            {
               _loc5_.removeEventListener(MouseEvent.CLICK,this.onOkBtn);
            }
            if(_loc5_.getType() == ButtonElement.TYPE_CANCEL)
            {
               _loc5_.removeEventListener(MouseEvent.CLICK,this.onCancelBtn);
            }
            _loc4_++;
         }
         this.guiManager.closeWindow(_loc1_);
      }
      
      private function fillComboBox(param1:int, param2:ComboBoxElement) : void
      {
         var _loc11_:OrePattern = null;
         var _loc3_:OrePattern = PatternManager.orePatterns[param1];
         var _loc4_:Array = _loc3_.refiners;
         var _loc5_:RefinerInfo = _loc4_[0];
         var _loc6_:RefinerInfo = _loc4_[1];
         var _loc7_:RefinerInfo = _loc4_[2];
         var _loc8_:OrePattern = PatternManager.orePatterns[_loc5_.oreID];
         var _loc9_:OrePattern = PatternManager.orePatterns[_loc6_.oreID];
         var _loc10_:int = Math.min(_loc8_.count / _loc5_.count,_loc9_.count / _loc6_.count);
         if(_loc7_)
         {
            _loc11_ = PatternManager.orePatterns[_loc7_.oreID];
            _loc10_ = Math.min(_loc10_,_loc11_.count / _loc7_.count);
         }
         param2.setAvailableAmmount(_loc10_);
      }
      
      private function createUpdateContainers() : void
      {
         var _loc4_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:OrePattern = null;
         var _loc8_:XML = null;
         var _loc9_:SimpleContainer = null;
         var _loc10_:TextFieldElement = null;
         var _loc11_:SimpleContainer = null;
         var _loc12_:XML = null;
         var _loc13_:int = 0;
         var _loc14_:String = null;
         var _loc15_:StaticRefinementModule = null;
         var _loc16_:String = null;
         var _loc17_:String = null;
         var _loc18_:SourceRefinementModule = null;
         var _loc19_:int = 0;
         var _loc20_:String = null;
         var _loc21_:String = null;
         var _loc22_:String = null;
         var _loc23_:String = null;
         var _loc24_:TargetRefinementModule = null;
         var _loc1_:SimpleWindow = this._guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT);
         var _loc2_:SimpleContainer = _loc1_.getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_STATIC);
         _loc2_.visible = false;
         var _loc3_:TextFieldElement = new TextFieldElement(340,20,new TextFormat(Styles.logFmt.font,Styles.logFmt.size,16777215),BPLocale.getText("lab_title"),TextFormatAlign.LEFT);
         _loc2_.addElement(_loc3_);
         _loc4_ = 0;
         var _loc5_:int = 8;
         for each(_loc8_ in Main.gameXML.refinementWindow.update.staticOres.ore)
         {
            _loc6_ = parseInt(_loc8_.attribute("type"));
            _loc7_ = PatternManager.orePatterns[_loc6_];
            _loc14_ = null;
            if(_loc8_.attribute("tooltipKey").length() > 0)
            {
               _loc14_ = BPLocale.getText(_loc8_.attribute("tooltipKey"));
            }
            _loc15_ = new StaticRefinementModule(this,_loc6_,_loc7_.languageKey,_loc7_.getResKey(),_loc14_);
            _loc15_.x = _loc4_;
            _loc15_.y = 40;
            _loc4_ = _loc4_ + _loc15_.background.width + _loc5_;
            _loc2_.addElement(_loc15_,SimpleContainer.NO_ALIGN,1);
         }
         _loc1_.addContainer(_loc2_);
         _loc9_ = _loc1_.getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_SOURCE);
         _loc9_.visible = false;
         _loc10_ = new TextFieldElement(340,40,new TextFormat(Styles.plainStdFmt.font,Styles.plainStdFmt.size,16777215),BPLocale.getText("labor_intro"),TextFormatAlign.LEFT);
         _loc9_.addElement(_loc10_);
         _loc4_ = 0;
         _loc5_ = 8;
         for each(_loc8_ in Main.gameXML.refinementWindow.update.ores.ore)
         {
            _loc6_ = parseInt(_loc8_.attribute("type"));
            _loc7_ = PatternManager.orePatterns[_loc6_];
            _loc16_ = _loc8_.attribute("iconResKey");
            _loc17_ = _loc8_.attribute("tooltipKey");
            _loc18_ = new SourceRefinementModule(this,_loc6_,_loc7_.languageKey,_loc7_.getResKey(),_loc16_,_loc17_);
            _loc18_.x = _loc4_;
            _loc18_.y = 55;
            _loc4_ = _loc4_ + _loc18_.background.width + _loc5_;
            _loc9_.addElement(_loc18_,SimpleContainer.NO_ALIGN,1);
         }
         _loc1_.addContainer(_loc9_);
         _loc11_ = _loc1_.getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_TARGET);
         _loc11_.visible = false;
         _loc4_ = 0;
         for each(_loc12_ in Main.gameXML.refinementWindow.update.items.item)
         {
            _loc19_ = parseInt(_loc12_.attribute("type"));
            _loc20_ = _loc12_.attribute("languageKey");
            _loc21_ = _loc12_.attribute("resKey");
            _loc22_ = _loc12_.attribute("identifier");
            _loc23_ = _loc12_.attribute("ammountKey");
            _loc24_ = new TargetRefinementModule(this,_loc19_,_loc20_,_loc21_,_loc22_,_loc23_);
            _loc24_.x = _loc4_;
            _loc4_ = _loc4_ + _loc24_.background.width + _loc5_;
            _loc11_.addElement(_loc24_,SimpleContainer.NO_ALIGN,1);
         }
         _loc1_.addContainer(_loc11_);
         _loc13_ = _loc11_.width > _loc9_.width ? int(_loc11_.width) : int(_loc9_.width);
         _loc9_.x = _loc11_.x = 230 - _loc13_ / 2;
      }
      
      public function get guiManager() : GuiManager
      {
         return this._guiManager;
      }
   }
}

package net.bigpoint.darkorbit.refinement
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import flash.display.Bitmap;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   
   public class RefinementModule extends SimpleElement
   {
      
      public static const logger:ILogger = Log.getLogger("RefinementModule");
      
      public static const TYPE_SOURCE:int = 0;
      
      public static const TYPE_TARGET:int = 1;
      
      private var _languageKey:String;
      
      private var _type:int;
      
      protected var _labelName:RefinementLabel;
      
      protected var _labelAmmount:RefinementLabel;
      
      protected var _background:Bitmap;
      
      protected var finisher:SWFFinisher;
      
      protected var resKey:String;
      
      protected var _refinementManager:RefinementManager;
      
      protected var gap:int = 4;
      
      public function RefinementModule(param1:RefinementManager, param2:int, param3:String, param4:String)
      {
         super(SimpleElement.TYPE_REFINEMENT_MODULE);
         this._refinementManager = param1;
         this._type = param2;
         this._languageKey = param3;
         this.resKey = param4;
         this.finisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("refinement"));
      }
      
      protected function setLabels() : void
      {
         this._labelName = new RefinementLabel(this);
         this._labelName.y = this.background.y - this._labelName.height - this.gap;
         this._labelName.setText(BPLocale.getText(this._languageKey));
         this.addChild(this._labelName);
         this._labelAmmount = new RefinementLabel(this);
         this._labelAmmount.y = this.background.height + this.gap;
         this.addChild(this._labelAmmount);
      }
      
      public function get refinementManager() : RefinementManager
      {
         return this._refinementManager;
      }
      
      public function get labelName() : RefinementLabel
      {
         return this._labelName;
      }
      
      public function get labelAmmount() : RefinementLabel
      {
         return this._labelAmmount;
      }
      
      public function get background() : Bitmap
      {
         return this._background;
      }
      
      public function get type() : int
      {
         return this._type;
      }
      
      public function get languageKey() : String
      {
         return this._languageKey;
      }
   }
}

package net.bigpoint.darkorbit.refinement
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import com.greensock.TweenLite;
   import com.greensock.easing.Linear;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import flash.events.MouseEvent;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.ButtonElement;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.elements.TextFieldElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.ServerCommands;
   
   public class SourceRefinementModule extends RefinementModule
   {
      
      private var _iconResKey:String;
      
      private var _oreCount:int = 0;
      
      private var currentIdentifier:String;
      
      private var tooltipKey:String;
      
      public function SourceRefinementModule(param1:RefinementManager, param2:int, param3:String, param4:String, param5:String, param6:String = null)
      {
         super(param1,param2,param3,param4);
         this._iconResKey = param5;
         this.tooltipKey = param6;
         this.init();
         this.buttonMode = true;
      }
      
      public function createOreIcon() : OreIcon
      {
         var _loc1_:Bitmap = finisher.getEmbededBitmap(this._iconResKey);
         var _loc2_:OreIcon = new OreIcon(this.type);
         _loc2_.addChild(_loc1_);
         return _loc2_;
      }
      
      public function updateAmmount() : void
      {
         labelAmmount.setText(this._oreCount.toString());
      }
      
      public function setOreCount(param1:int) : void
      {
         this._oreCount = param1;
      }
      
      private function init() : void
      {
         _background = finisher.getEmbededBitmap("sourceSlot");
         this.addChild(_background);
         var _loc1_:Bitmap = finisher.getEmbededBitmap(resKey);
         _loc1_.x = _background.width / 2 - _loc1_.width / 2;
         _loc1_.y = _background.height / 2 - _loc1_.height / 2;
         this.addChild(_loc1_);
         this.addEventListener(MouseEvent.MOUSE_DOWN,this.onMouseDown);
         setLabels();
         this.setAmmount(0);
         if(this.tooltipKey != null)
         {
            TooltipControl.getInstance().addToolTip(this,BPLocale.getText(this.tooltipKey));
         }
      }
      
      private function onMouseDown(param1:MouseEvent) : void
      {
         if(this._oreCount == 0)
         {
            return;
         }
         var _loc2_:MovieClip = this.createIcon();
         _loc2_.startDrag();
      }
      
      private function onMouseUp(param1:MouseEvent) : void
      {
         var _loc8_:TargetRefinementModule = null;
         var _loc2_:MovieClip = param1.target as MovieClip;
         var _loc3_:TargetRefinementModule = null;
         var _loc4_:SimpleContainer = _refinementManager.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT).getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_TARGET);
         var _loc5_:Array = _loc4_.getAllElements();
         var _loc6_:int = 0;
         while(_loc6_ < _loc5_.length)
         {
            if(_loc5_[_loc6_] is TargetRefinementModule)
            {
               _loc8_ = _loc5_[_loc6_];
               if(_loc4_.mouseX > _loc8_.x && _loc4_.mouseX < _loc8_.x + _loc8_.width && _loc4_.mouseY > _loc8_.y && _loc4_.mouseY < _loc8_.y + _loc8_.height)
               {
                  _loc3_ = _loc8_;
               }
            }
            _loc6_++;
         }
         if(_loc3_ == null || this.type == 11 && _loc3_.identifier == "SHIELD" || this.type == 11 && _loc3_.identifier == "DRIVING" || this.type == 12 && _loc3_.identifier == "LASER" || this.type == 12 && _loc3_.identifier == "ROCKET" || this.type == 14 && _loc3_.identifier == "DRIVING")
         {
            this.moveToSource(_loc2_);
            return;
         }
         _loc2_.removeEventListener(MouseEvent.MOUSE_UP,this.onMouseUp);
         var _loc7_:SimpleWindow = _refinementManager.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT);
         _loc7_.removeChild(_loc2_);
         this.currentIdentifier = _loc3_.identifier;
         if(_loc3_.oreIcon == null)
         {
            this.createCountWindow();
         }
         else if(_loc3_.oreIcon.id == type)
         {
            this.createCountWindow();
         }
         else
         {
            this.createUpdateWindow();
         }
      }
      
      private function createCountWindow() : void
      {
         var _loc1_:SimpleWindow = refinementManager.guiManager.createWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT_COUNT);
         var _loc2_:SimpleContainer = new SimpleContainer(refinementManager.guiManager,SimpleContainer.CLASS_DEFAULT);
         _loc2_.x = 20;
         _loc2_.y = 35;
         var _loc3_:TextFieldElement = new TextFieldElement(340,20,new TextFormat(Styles.logFmt.font,Styles.logFmt.size,16777215),BPLocale.getText("lab_count"),TextFormatAlign.LEFT);
         _loc2_.addElement(_loc3_);
         var _loc4_:ComboBoxElement = new ComboBoxElement(refinementManager.guiManager);
         _loc4_.setAvailableAmmount(this._oreCount);
         _loc2_.addElement(_loc4_,SimpleContainer.ALIGN_VERTICAL);
         _loc2_.y = 30;
         var _loc5_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc6_:ButtonElement = new ButtonElement(ButtonElement.TYPE_OK,BPLocale.getText("lab_update"),_loc5_.getEmbededMovieClip("button1"));
         _loc6_.addEventListener(MouseEvent.CLICK,this.onOkCountWindow);
         _loc2_.addElement(_loc6_);
         _loc6_.y = 60;
         var _loc7_:ButtonElement = new ButtonElement(ButtonElement.TYPE_CANCEL,BPLocale.getText("lab_cancel"),_loc5_.getEmbededMovieClip("button1"));
         _loc2_.addElement(_loc7_,SimpleContainer.ALIGN_HORIZONTAL);
         _loc7_.y = 60;
         _loc7_.addEventListener(MouseEvent.CLICK,this.onCloseCountWindow);
         _loc1_.addContainer(_loc2_);
         _loc1_.modal = true;
      }
      
      private function onOkCountWindow(param1:MouseEvent) : void
      {
         var _loc2_:SimpleWindow = refinementManager.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT_COUNT);
         var _loc3_:ComboBoxElement = ComboBoxElement(_loc2_.getContainer(SimpleContainer.CLASS_DEFAULT).getElement(SimpleElement.TYPE_COMBO_BOX_ELEMENT));
         var _loc4_:int = parseInt(_loc3_.comboBox.selectedLabel);
         var _loc5_:Array = [ServerCommands.UPDATE,ServerCommands.SET,this.currentIdentifier,type.toString(),_loc4_.toString()];
         _refinementManager.guiManager.getMain().getConnectionManager().sendCommand(ServerCommands.LAB,_loc5_);
         this.closeCountWindow();
      }
      
      private function onCloseCountWindow(param1:MouseEvent) : void
      {
         this.closeCountWindow();
      }
      
      private function closeCountWindow() : void
      {
         var _loc4_:ButtonElement = null;
         var _loc1_:SimpleWindow = refinementManager.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT_COUNT);
         var _loc2_:Array = _loc1_.getContainer(SimpleContainer.CLASS_DEFAULT).getElements(SimpleElement.TYPE_SIMPLE_BUTTON);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_.length)
         {
            _loc4_ = _loc2_[_loc3_];
            if(_loc4_.getType() == ButtonElement.TYPE_CANCEL)
            {
               _loc4_.removeEventListener(MouseEvent.CLICK,this.onCloseCountWindow);
            }
            if(_loc4_.getType() == ButtonElement.TYPE_OK)
            {
               _loc4_.removeEventListener(MouseEvent.CLICK,this.onOkCountWindow);
            }
            _loc3_++;
         }
         refinementManager.guiManager.closeWindow(_loc1_);
      }
      
      private function createUpdateWindow() : void
      {
         var _loc1_:SimpleWindow = refinementManager.guiManager.createWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT_UPDATE);
         var _loc2_:SimpleContainer = new SimpleContainer(refinementManager.guiManager,SimpleContainer.CLASS_DEFAULT);
         _loc2_.x = 20;
         _loc2_.y = 35;
         var _loc3_:TextFieldElement = new TextFieldElement(340,50,new TextFormat(Styles.logFmt.font,Styles.logFmt.size,16777215),BPLocale.getText("lab_alert"),TextFormatAlign.LEFT);
         _loc2_.addElement(_loc3_);
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         var _loc5_:ButtonElement = new ButtonElement(ButtonElement.TYPE_UPDATE,BPLocale.getText("lab_update"),_loc4_.getEmbededMovieClip("button1"));
         _loc5_.addEventListener(MouseEvent.CLICK,this.onOkUpdate);
         _loc2_.addElement(_loc5_);
         var _loc6_:ButtonElement = new ButtonElement(ButtonElement.TYPE_CANCEL,BPLocale.getText("lab_cancel"),_loc4_.getEmbededMovieClip("button1"));
         _loc2_.addElement(_loc6_,SimpleContainer.ALIGN_HORIZONTAL);
         _loc6_.addEventListener(MouseEvent.CLICK,this.onCancelUpdate);
         _loc1_.addContainer(_loc2_);
         _loc1_.modal = true;
      }
      
      private function onOkUpdate(param1:MouseEvent) : void
      {
         this.closeUpdateWindow();
         this.createCountWindow();
      }
      
      private function onCancelUpdate(param1:MouseEvent) : void
      {
         this.closeUpdateWindow();
      }
      
      private function closeUpdateWindow() : void
      {
         var _loc4_:ButtonElement = null;
         var _loc1_:SimpleWindow = refinementManager.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT_UPDATE);
         var _loc2_:Array = _loc1_.getContainer(SimpleContainer.CLASS_DEFAULT).getElements(SimpleElement.TYPE_SIMPLE_BUTTON);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_.length)
         {
            _loc4_ = _loc2_[_loc3_];
            if(_loc4_.getType() == ButtonElement.TYPE_UPDATE)
            {
            }
            if(_loc4_.getType() == ButtonElement.TYPE_CANCEL)
            {
               _loc4_.removeEventListener(MouseEvent.CLICK,this.onCancelUpdate);
            }
            _loc3_++;
         }
         refinementManager.guiManager.closeWindow(_loc1_);
      }
      
      private function moveToSource(param1:MovieClip) : void
      {
         var _loc2_:SimpleContainer = _refinementManager.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT).getContainer(SimpleContainer.CLASS_REFINEMENT_UPDATE_SOURCE);
         var _loc3_:int = _loc2_.x + this.x + this.width / 2;
         var _loc4_:int = _loc2_.y + this.y + this.height / 2;
         TweenLite.to(param1,0.25,{
            "alpha":0,
            "x":_loc3_,
            "y":_loc4_,
            "onComplete":this.onResetIcon,
            "onCompleteParams":[param1]
         });
      }
      
      public function createIcon(param1:Boolean = true) : MovieClip
      {
         var _loc2_:SimpleWindow = _refinementManager.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT);
         var _loc3_:Bitmap = finisher.getEmbededBitmap(this._iconResKey);
         var _loc4_:MovieClip = new MovieClip();
         _loc4_.addChild(_loc3_);
         _loc4_.addEventListener(MouseEvent.MOUSE_UP,this.onMouseUp);
         _loc4_.x = _loc2_.mouseX - _loc4_.width / 2;
         _loc4_.y = _loc2_.mouseY - _loc4_.height / 2;
         _loc2_.addChild(_loc4_);
         if(param1)
         {
            _loc4_.alpha = 0;
            TweenLite.to(_loc4_,0.25,{
               "ease":Linear.easeNone,
               "alpha":1
            });
         }
         return _loc4_;
      }
      
      private function onResetIcon(param1:MovieClip) : void
      {
         var _loc2_:SimpleWindow = _refinementManager.guiManager.getWindow(SimpleWindow.WINDOW_CLASS_REFINEMENT);
         param1.removeEventListener(MouseEvent.MOUSE_UP,this.onMouseUp);
         _loc2_.removeChild(param1);
      }
      
      public function setAmmount(param1:int) : void
      {
         labelAmmount.setText(param1.toString());
      }
   }
}

package net.bigpoint.darkorbit.refinement
{
   import com.bigpoint.utils.ui.tooltip.TooltipControl;
   import flash.display.Bitmap;
   
   public class StaticRefinementModule extends RefinementModule
   {
      
      private var _oreCount:int = 0;
      
      private var translatedToolTip:String;
      
      public function StaticRefinementModule(param1:RefinementManager, param2:int, param3:String, param4:String, param5:String = null)
      {
         super(param1,param2,param3,param4);
         this.translatedToolTip = param5;
         this.init();
      }
      
      public function updateAmmount() : void
      {
         labelAmmount.setText(this._oreCount.toString());
      }
      
      public function setOreCount(param1:int) : void
      {
         this._oreCount = param1;
      }
      
      private function init() : void
      {
         _background = finisher.getEmbededBitmap("sourceSlot");
         this.addChild(_background);
         var _loc1_:Bitmap = finisher.getEmbededBitmap(resKey);
         _loc1_.x = _background.width / 2 - _loc1_.width / 2;
         _loc1_.y = _background.height / 2 - _loc1_.height / 2;
         this.addChild(_loc1_);
         setLabels();
         this.setAmmount(0);
         if(this.translatedToolTip != null)
         {
            TooltipControl.getInstance().addToolTip(this,this.translatedToolTip);
         }
      }
      
      public function setAmmount(param1:int) : void
      {
         labelAmmount.setText(param1.toString());
      }
   }
}

package net.bigpoint.darkorbit.refinement
{
   import com.bigpoint.utils.BPLocale;
   import flash.display.Bitmap;
   
   public class TargetRefinementModule extends RefinementModule
   {
      
      private var _targetIcon:Bitmap;
      
      private var _identifier:String;
      
      private var _ammountKey:String;
      
      private var _oreIcon:OreIcon;
      
      public function TargetRefinementModule(param1:RefinementManager, param2:int, param3:String, param4:String, param5:String, param6:String)
      {
         super(param1,param2,param3,param4);
         this._identifier = param5;
         this._ammountKey = param6;
         this.init();
      }
      
      public function removeOreIcon() : void
      {
         if(this._oreIcon != null && this.contains(this._oreIcon))
         {
            this.removeChild(this._oreIcon);
         }
         this._oreIcon = null;
      }
      
      public function setOreIcon(param1:OreIcon) : void
      {
         this._oreIcon = param1;
         this._oreIcon.x = this.targetIcon.x + 1;
         this._oreIcon.y = this.targetIcon.y + 1;
         this.addChild(this._oreIcon);
      }
      
      private function init() : void
      {
         var _loc1_:int = 4;
         _background = finisher.getEmbededBitmap("targetSlot");
         this.addChild(_background);
         var _loc2_:Bitmap = finisher.getEmbededBitmap(resKey);
         _loc2_.x = _background.width / 2 - _loc2_.width / 2;
         _loc2_.y = _background.height / 2 - _loc2_.height / 2;
         this.addChild(_loc2_);
         this._targetIcon = finisher.getEmbededBitmap("targetIcon");
         this._targetIcon.x = _loc1_;
         this._targetIcon.y = _background.height - this._targetIcon.height - _loc1_;
         this.addChild(this._targetIcon);
         setLabels();
         this.setAmmount(0);
      }
      
      public function get targetIcon() : Bitmap
      {
         return this._targetIcon;
      }
      
      public function get identifier() : String
      {
         return this._identifier;
      }
      
      public function setAmmount(param1:int) : void
      {
         labelAmmount.setText(BPLocale.getText(this._ammountKey).replace("%COUNT%",param1.toString()));
      }
      
      public function get oreIcon() : OreIcon
      {
         return this._oreIcon;
      }
   }
}

package net.bigpoint.darkorbit.resolution
{
   import flash.geom.Point;
   import net.bigpoint.darkorbit.pattern.CustomPattern;
   
   public class ResolutionPattern extends CustomPattern
   {
      
      private var _width:int;
      
      private var _height:int;
      
      private var _isSupported:Boolean;
      
      private var windowPatterns:Array;
      
      private var minimizedIconsPositions:Array;
      
      private var mainMenuPosition:Point;
      
      private var slotMenuPosition:Point;
      
      private var userSetting:Boolean = true;
      
      public function ResolutionPattern(param1:int, param2:int, param3:int)
      {
         super(param1);
         this._width = param2;
         this._height = param3;
         this.windowPatterns = [];
         this.minimizedIconsPositions = [];
      }
      
      public function addWindowPattern(param1:WindowPattern) : void
      {
         this.windowPatterns[int(param1.getPatternID())] = param1;
      }
      
      public function getWindowPattern(param1:int) : WindowPattern
      {
         return this.windowPatterns[int(param1)];
      }
      
      public function addMinimizedIconsPosition(param1:Point) : void
      {
         this.minimizedIconsPositions.push(param1);
      }
      
      public function getMinimizedIconsPosition(param1:int) : Point
      {
         return this.minimizedIconsPositions[param1];
      }
      
      public function get width() : int
      {
         return this._width;
      }
      
      public function get height() : int
      {
         return this._height;
      }
      
      public function getMainMenuPosition() : Point
      {
         return this.mainMenuPosition;
      }
      
      public function setMainMenuPosition(param1:Point) : void
      {
         this.mainMenuPosition = param1;
      }
      
      public function isUserSetting() : Boolean
      {
         return this.userSetting;
      }
      
      public function setUserSetting(param1:Boolean) : void
      {
         this.userSetting = param1;
      }
      
      public function getSlotMenuPosition() : Point
      {
         return this.slotMenuPosition;
      }
      
      public function setSlotMenuPosition(param1:Point) : void
      {
         this.slotMenuPosition = param1;
      }
      
      public function get isSupported() : Boolean
      {
         return this._isSupported;
      }
      
      public function set isSupported(param1:Boolean) : void
      {
         this._isSupported = param1;
      }
   }
}

package net.bigpoint.darkorbit.resolution
{
   import net.bigpoint.darkorbit.pattern.CustomPattern;
   
   public class WindowPattern extends CustomPattern
   {
      
      private var xPos:int;
      
      private var yPos:int;
      
      private var centerHorizontal:Boolean;
      
      private var centerVertical:Boolean;
      
      public function WindowPattern(param1:int)
      {
         super(param1);
      }
      
      public function getXPos() : int
      {
         return this.xPos;
      }
      
      public function setXPos(param1:int) : void
      {
         this.xPos = param1;
      }
      
      public function getYPos() : int
      {
         return this.yPos;
      }
      
      public function setYPos(param1:int) : void
      {
         this.yPos = param1;
      }
      
      public function setCenterHorizontal() : void
      {
         this.centerHorizontal = true;
      }
      
      public function setCenterVertical() : void
      {
         this.centerVertical = true;
      }
      
      public function isCenterHorizontal() : Boolean
      {
         return this.centerHorizontal;
      }
      
      public function isCenterVertical() : Boolean
      {
         return this.centerVertical;
      }
   }
}

package net.bigpoint.darkorbit.settings
{
   import net.bigpoint.darkorbit.gui.elements.SettingsField;
   
   public class Presetting
   {
      
      public var setQualityHigh:Array;
      
      public var setQualityGood:Array;
      
      public var setQualityMedium:Array;
      
      public var setQualityLow:Array;
      
      public function Presetting()
      {
         super();
         this.setQualityHigh = [];
         this.setQualityHigh.push(new PresettingItem(SettingsField.TYPE_QUALITY_BACKGROUND,Settings.QUALITY_HIGH));
         this.setQualityHigh.push(new PresettingItem(SettingsField.TYPE_QUALITY_POIZONE,Settings.QUALITY_HIGH));
         this.setQualityHigh.push(new PresettingItem(SettingsField.TYPE_QUALITY_SHIP,Settings.QUALITY_HIGH));
         this.setQualityHigh.push(new PresettingItem(SettingsField.TYPE_QUALITY_ENGINE,Settings.QUALITY_HIGH));
         this.setQualityHigh.push(new PresettingItem(SettingsField.TYPE_QUALITY_COLLECTABLE,Settings.QUALITY_HIGH));
         this.setQualityHigh.push(new PresettingItem(SettingsField.TYPE_QUALITY_EXPLOSION,Settings.QUALITY_HIGH));
         this.setQualityGood = [];
         this.setQualityGood.push(new PresettingItem(SettingsField.TYPE_QUALITY_BACKGROUND,Settings.QUALITY_GOOD));
         this.setQualityGood.push(new PresettingItem(SettingsField.TYPE_QUALITY_POIZONE,Settings.QUALITY_HIGH));
         this.setQualityGood.push(new PresettingItem(SettingsField.TYPE_QUALITY_SHIP,Settings.QUALITY_HIGH));
         this.setQualityGood.push(new PresettingItem(SettingsField.TYPE_QUALITY_ENGINE,Settings.QUALITY_HIGH));
         this.setQualityGood.push(new PresettingItem(SettingsField.TYPE_QUALITY_COLLECTABLE,Settings.QUALITY_HIGH));
         this.setQualityGood.push(new PresettingItem(SettingsField.TYPE_QUALITY_EXPLOSION,Settings.QUALITY_MEDIUM));
         this.setQualityMedium = [];
         this.setQualityMedium.push(new PresettingItem(SettingsField.TYPE_QUALITY_BACKGROUND,Settings.QUALITY_MEDIUM));
         this.setQualityMedium.push(new PresettingItem(SettingsField.TYPE_QUALITY_POIZONE,Settings.QUALITY_LOW));
         this.setQualityMedium.push(new PresettingItem(SettingsField.TYPE_QUALITY_SHIP,Settings.QUALITY_LOW));
         this.setQualityMedium.push(new PresettingItem(SettingsField.TYPE_QUALITY_ENGINE,Settings.QUALITY_LOW));
         this.setQualityMedium.push(new PresettingItem(SettingsField.TYPE_QUALITY_COLLECTABLE,Settings.QUALITY_LOW));
         this.setQualityMedium.push(new PresettingItem(SettingsField.TYPE_QUALITY_EXPLOSION,Settings.QUALITY_MEDIUM));
         this.setQualityLow = [];
         this.setQualityLow.push(new PresettingItem(SettingsField.TYPE_QUALITY_BACKGROUND,Settings.QUALITY_LOW));
         this.setQualityLow.push(new PresettingItem(SettingsField.TYPE_QUALITY_POIZONE,Settings.QUALITY_LOW));
         this.setQualityLow.push(new PresettingItem(SettingsField.TYPE_QUALITY_SHIP,Settings.QUALITY_LOW));
         this.setQualityLow.push(new PresettingItem(SettingsField.TYPE_QUALITY_ENGINE,Settings.QUALITY_LOW));
         this.setQualityLow.push(new PresettingItem(SettingsField.TYPE_QUALITY_COLLECTABLE,Settings.QUALITY_LOW));
         this.setQualityLow.push(new PresettingItem(SettingsField.TYPE_QUALITY_EXPLOSION,Settings.QUALITY_LOW));
      }
      
      public function getQualitySet(param1:int) : Array
      {
         var _loc2_:Array = null;
         switch(param1)
         {
            case Settings.QUALITY_LOW:
               _loc2_ = this.setQualityLow;
               break;
            case Settings.QUALITY_MEDIUM:
               _loc2_ = this.setQualityMedium;
               break;
            case Settings.QUALITY_GOOD:
               _loc2_ = this.setQualityGood;
               break;
            case Settings.QUALITY_HIGH:
            default:
               _loc2_ = this.setQualityHigh;
         }
         return _loc2_;
      }
   }
}

package net.bigpoint.darkorbit.settings
{
   public class PresettingItem
   {
      
      public var typeID:int;
      
      public var value:int;
      
      public function PresettingItem(param1:int, param2:int)
      {
         super();
         this.typeID = param1;
         this.value = param2;
      }
   }
}

package net.bigpoint.darkorbit.settings
{
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.gui.elements.VideoElement;
   import net.bigpoint.darkorbit.gui.windows.VideoWindow;
   
   public class Profiler
   {
      
      public static var QUALITY_LOW_LIMIT:int = 10;
      
      public static var INTERVAL_LENGTH:int = 20000;
      
      public static var NOTIFICATION_STEPS:Array = [3,4,6];
      
      private var main:Main;
      
      public var FPSCollection:Array = [];
      
      private var t:Timer;
      
      private var notificationOutputs:int = 0;
      
      private var lowFPSInTurn:int = 0;
      
      public var isNotificationInQueue:Boolean = false;
      
      public function Profiler(param1:Main)
      {
         super();
         this.main = param1;
         this.t = new Timer(INTERVAL_LENGTH);
      }
      
      public function start() : void
      {
         if(!this.t.running)
         {
            this.t.addEventListener(TimerEvent.TIMER,this.profileFPS);
            this.t.start();
         }
      }
      
      public function stop() : void
      {
         this.t.stop();
         this.t.removeEventListener(TimerEvent.TIMER,this.profileFPS);
      }
      
      public function addFPS(param1:int) : void
      {
         if(this.t.running && this.FPSCollection.length <= 100)
         {
            this.FPSCollection.push(param1);
         }
      }
      
      private function profileFPS(param1:TimerEvent) : void
      {
         var _loc4_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc2_:int = int(NOTIFICATION_STEPS.length);
         if(this.notificationOutputs >= _loc2_ || !Settings.displayNotifications)
         {
            this.stop();
            return;
         }
         if(this.FPSCollection.length == 0)
         {
            return;
         }
         var _loc3_:Boolean = this.main.screenManager.map.getCombatManager().isTruce();
         if(this.isNotificationInQueue && _loc3_)
         {
            this.showNotification();
            return;
         }
         var _loc5_:int = 0;
         for each(_loc6_ in this.FPSCollection)
         {
            _loc5_ += _loc6_;
         }
         _loc4_ = Math.round(_loc5_ / this.FPSCollection.length);
         this.FPSCollection = [];
         _loc7_ = Settings.getQualitySettingLevel();
         if(_loc4_ < QUALITY_LOW_LIMIT)
         {
            ++this.lowFPSInTurn;
            _loc8_ = int(NOTIFICATION_STEPS[this.notificationOutputs]);
            if(this.lowFPSInTurn >= _loc8_ && _loc7_ > Settings.QUALITY_LOW)
            {
               if(_loc3_)
               {
                  this.showNotification();
               }
               else
               {
                  this.lowFPSInTurn = 0;
                  this.isNotificationInQueue = true;
               }
            }
         }
         else
         {
            this.lowFPSInTurn = 0;
         }
         if(this.notificationOutputs >= _loc2_)
         {
            this.stop();
         }
      }
      
      public function showNotification() : void
      {
         this.main.getGuiManager().createVideoWindow(["notification_low_performance"],VideoWindow.NOTIFICATION_FPS,2,VideoElement.CLASS_HELPMOVIE,true,"nw");
         this.lowFPSInTurn = 0;
         ++this.notificationOutputs;
         this.isNotificationInQueue = false;
      }
   }
}

package net.bigpoint.darkorbit.settings
{
   import flash.geom.Point;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.gui.InstantLogViewConfig;
   
   public class Settings
   {
      
      public static var selectedLaser:int;
      
      public static var selectedRocket:int;
      
      public static var displayChat:Boolean;
      
      public static var playSFX:Boolean;
      
      public static var playMusic:Boolean;
      
      public static var displayHitpointBubbles:Boolean;
      
      public static var displayPlayerNames:Boolean;
      
      public static var displayResources:Boolean;
      
      public static var displayBonusBoxes:Boolean;
      
      public static var displayFreeCargoBoxes:Boolean;
      
      public static var displayNotFreeCargoBoxes:Boolean;
      
      public static var autoBoost:Boolean;
      
      public static var autochangeAmmo:Boolean;
      
      public static var showAmmunitionNumeric:Boolean;
      
      public static var autoRefinement:Boolean;
      
      public static var enemyCount:int;
      
      public static var resolutionID:int;
      
      public static var initialResolutionID:int;
      
      public static var fastRepair:int;
      
      public static var instantLogViewConfig:InstantLogViewConfig;
      
      public static var pixelPerfectCollisionWithLayers:Boolean;
      
      public static var fireworksModeIndependenceDay:Boolean;
      
      public static var chatServerIP:String;
      
      public static var projectID:int;
      
      public static var chatHost:String;
      
      public static var nextMapID:int;
      
      public static var boardLink:String;
      
      public static var basePath:String;
      
      public static var language:String;
      
      public static var staticHost:String;
      
      public static var defaultGameServer:String;
      
      public static var fireworksLoaded:int;
      
      public static var lastAutoStartEnabled:Boolean;
      
      public static var specialOffersPrepared:Boolean;
      
      public static const logger:ILogger = Log.getLogger("Settings");
      
      public static const QUALITY_LOW:int = 0;
      
      public static const QUALITY_MEDIUM:int = 1;
      
      public static const QUALITY_GOOD:int = 2;
      
      public static const QUALITY_HIGH:int = 3;
      
      public static var lastSelectedLaser:int = -1;
      
      public static var selectedExplosive:int = 1;
      
      public static var selectedLauncherRocket:int = 6;
      
      public static var selectedConfiguration:int = 1;
      
      public static var selectedQuickBuyIcon:int = 1;
      
      public static var displayNotifications:Boolean = true;
      
      public static var displayDrones:Boolean = true;
      
      public static var quickSlotStopAttack:Boolean = true;
      
      public static var lastDisplayDronesSetting:Boolean = true;
      
      public static var lastResolutionID:int = -1;
      
      public static var SHOW_HP_NUMBERS_ON_MAP:Boolean = false;
      
      public static var JS_EVENT_TRACKING_ENABLED:Boolean = false;
      
      public static var doubleclickAttackEnabled:Boolean = false;
      
      public static var autoStartEnabled:Boolean = false;
      
      public static var showInstantLog:Boolean = false;
      
      public static const createLensflares:Boolean = true;
      
      public static const createCollectables:Boolean = true;
      
      public static const createOpponents:Boolean = true;
      
      public static const createMeteors:Boolean = false;
      
      public static var createChat:Boolean = true;
      
      public static const createMinimap:Boolean = true;
      
      public static const createHero:Boolean = true;
      
      public static const createStarfield:Boolean = true;
      
      public static const createMusic:Boolean = true;
      
      public static const createPortals:Boolean = true;
      
      public static var unloadResources:Boolean = true;
      
      public static var droneShoots:Boolean = false;
      
      public static var mapID:int = -1;
      
      public static var lastMapID:int = -1;
      
      public static var currency:String = "EUR";
      
      public static var dynamicHost:String = "/";
      
      public static var rocketSmoke:Boolean = true;
      
      public static var showPilots:Boolean = false;
      
      public static var rocketLauncherType:int = 0;
      
      public static var rocketLauncherRocketsLoaded:int = 0;
      
      public static var showWindowsBackground:Boolean = true;
      
      public static var maxWindowsTransparency:Number = 1;
      
      public static var gridSize:int = 10;
      
      public static var dragWindowsAlways:Boolean = true;
      
      public static var preloadUserShips:Boolean = false;
      
      public static var qualityPresetting:int = 3;
      
      public static var qualityCustomized:Boolean = false;
      
      public static var qualityBackground:int = QUALITY_HIGH;
      
      public static var qualityPoizone:int = QUALITY_HIGH;
      
      public static var qualityShip:int = QUALITY_HIGH;
      
      public static var qualityEngine:int = QUALITY_HIGH;
      
      public static var qualityExplosion:int = QUALITY_HIGH;
      
      public static var qualityCollectable:int = QUALITY_HIGH;
      
      public static var qualityAttack:int = QUALITY_HIGH;
      
      public static var qualityEffect:int = QUALITY_HIGH;
      
      private var chatPosition:Point;
      
      private var chatSize:Point;
      
      public function Settings()
      {
         super();
      }
      
      public static function getQualitySettingLevel() : int
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc1_:Array = [qualityBackground,qualityPoizone,qualityShip,qualityEngine,qualityExplosion,qualityCollectable];
         var _loc2_:int = 0;
         for each(_loc3_ in _loc1_)
         {
            _loc2_ += _loc3_;
         }
         return int(Math.round(_loc2_ / _loc1_.length));
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   public class BufferedShip
   {
      
      public var typeID:int;
      
      public var userID:int;
      
      public var xPos:int;
      
      public var yPos:int;
      
      public var speed:int;
      
      public var username:String;
      
      public var clanTag:String;
      
      public var fractionID:int;
      
      public var clanID:int;
      
      public var clanDiplomacy:int;
      
      public var dailyRank:int;
      
      public var expansionstage:int;
      
      public var warnIconOnMap:Boolean;
      
      public var galaxyGatesFinished:int;
      
      public var cloaked:Boolean;
      
      public var isNPC:Boolean;
      
      public function BufferedShip(param1:int, param2:int, param3:int, param4:int, param5:int, param6:String, param7:String, param8:int, param9:int, param10:int, param11:int, param12:int, param13:Boolean, param14:int, param15:Boolean, param16:Boolean)
      {
         super();
         this.typeID = param1;
         this.userID = param2;
         this.xPos = param3;
         this.yPos = param4;
         this.speed = param5;
         this.username = param6;
         this.clanTag = param7;
         this.fractionID = param8;
         this.clanID = param9;
         this.clanDiplomacy = param10;
         this.dailyRank = param11;
         this.expansionstage = param12;
         this.warnIconOnMap = param13;
         this.galaxyGatesFinished = param14;
         this.isNPC = param15;
         this.cloaked = param16;
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   import net.bigpoint.darkorbit.pattern.Pattern;
   
   public class EnginePositionPattern extends Pattern
   {
      
      public var enginePositions:Array;
      
      public function EnginePositionPattern(param1:int, param2:Array)
      {
         super(param1,Pattern.CONTENT_CUSTOM);
         this.enginePositions = param2;
      }
      
      public function getEnginePositions() : Array
      {
         return this.enginePositions;
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   
   public class EngineSmokePattern extends ResourcePattern
   {
      
      private var rotation:Boolean;
      
      public function EngineSmokePattern(param1:int, param2:String)
      {
         super(param1,param2);
      }
      
      public function hasRotation() : Boolean
      {
         return this.rotation;
      }
      
      public function setRotation(param1:Boolean) : void
      {
         this.rotation = param1;
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   
   public class ExpansionPattern extends ResourcePattern
   {
      
      private var expansionClass:int;
      
      public var salvosData:Array;
      
      public function ExpansionPattern(param1:int, param2:int, param3:String, param4:Array)
      {
         super(param2,param3);
         this.salvosData = param4;
         this.expansionClass = param1;
      }
      
      public function getExpansionClass() : int
      {
         return this.expansionClass;
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   import com.bigpoint.filecollection.FileCollection;
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import com.greensock.plugins.ColorTransformPlugin;
   import com.greensock.plugins.TweenPlugin;
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.DisplayObject;
   import flash.display.DisplayObjectContainer;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.TimerEvent;
   import flash.filters.GlowFilter;
   import flash.geom.Matrix;
   import flash.geom.Point;
   import flash.media.SoundChannel;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import flash.text.TextFormatAlign;
   import flash.utils.Timer;
   import mx.utils.StringUtil;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ObjectPoolManager;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.collectable.Beacon;
   import net.bigpoint.darkorbit.combat.ExplosionPattern;
   import net.bigpoint.darkorbit.drone.DroneConnector;
   import net.bigpoint.darkorbit.drone.DroneDisplay;
   import net.bigpoint.darkorbit.gui.CPUItem;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.menu.SuperActionButton;
   import net.bigpoint.darkorbit.pattern.AudibleResourcePattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.pet.Pet;
   
   public class MapObject
   {
      
      public static const ROTATION_SHIP:String = "rotation_ship";
      
      public static const ROTATION_MOVEMENT:String = "rotation_movement";
      
      public static var filter:GlowFilter = new GlowFilter(0,1,2,2,50,3);
      
      public static var mediumGlowFilter:GlowFilter = new GlowFilter(0,1,4,4,6,1);
      
      private static const GALAXY_GATES_FINISHED_MAXIMUM:int = 4;
      
      public static var LASERSHOOT_FRONT:int = 0;
      
      public static var LASERSHOOT_REAR:int = 1;
      
      public static var BORDER_SELECTED:int = 0;
      
      public static var BORDER_ATTACKED_BY_OPPONENT:int = 1;
      
      public static const CROSSHAIR_RED:int = 1;
      
      public static const CROSSHAIR_GRAY:int = 2;
      
      public var userID:Number;
      
      private var username:String;
      
      public var engines:Array;
      
      private var simpleShipEnginePositions:Array = [];
      
      public var radius:int;
      
      private var glowClip:MovieClip;
      
      private var clanTag:String;
      
      private var clanID:int = -1;
      
      private var miniMapColor:uint;
      
      private var miniMapColorAlpha:uint;
      
      private var shipAttackableInNonPVP:Boolean;
      
      private var miniMapIcon:String;
      
      private var isIcon:Boolean = false;
      
      private var userTitle:String = "";
      
      private var clanDiplomacy:int;
      
      private var fractionID:int;
      
      public var oldSeekRotation:int;
      
      private var dailyRank:int;
      
      private var speed:int = 0;
      
      public var expansionTypeID:int;
      
      public var lastShipFrame:int = 1;
      
      private var rankIcon:BitmapData;
      
      private var _shipRotation:int;
      
      public var explodeTypeID:int;
      
      public var movementDirection:int;
      
      public var clipContainer:Sprite;
      
      public var shipClip:MovieClip;
      
      private var droneDisplayClipContainer:Sprite;
      
      public var shipContainer:Sprite;
      
      private var glowContainer:Sprite;
      
      private var shipDecorator:ShipSkillDecorator;
      
      public var expansionContainer:Sprite;
      
      private var explosionContainer:Sprite;
      
      private var engineContainer:Sprite;
      
      private var ggClip:Sprite;
      
      public var heroProxy:Point;
      
      private var engineSmokePool:Array;
      
      private var borderClip:MovieClip;
      
      private var hitpointBackgroundClip:Sprite = new Sprite();
      
      private var shieldBackgroundClip:Sprite = new Sprite();
      
      private var extraHitpointClip:Sprite = new Sprite();
      
      private var hitpointClip:Sprite = new Sprite();
      
      private var shieldClip:Sprite = new Sprite();
      
      private var labelClip:MovieClip;
      
      private var titleClip:MovieClip;
      
      private var permanentTitleClip:MovieClip;
      
      public var droneConnector:DroneConnector;
      
      public var shieldDamageCount:int;
      
      private var laserLayer:Sprite;
      
      private var malusClip:MovieClip;
      
      private var engineTimer:Timer;
      
      private var engineChannel:SoundChannel;
      
      private var warnIconOnMap:Boolean;
      
      private var _isGroupMember:Boolean = false;
      
      private var repairSound:SoundChannel;
      
      private var hitpoints:Number = 0;
      
      private var extraHitpoints:Number = 0;
      
      private var maxHitpoints:Number = 0;
      
      private var shield:Number = 0;
      
      private var maxShield:Number = 0;
      
      private var cargo:Number = 0;
      
      private var maxCargo:Number = 0;
      
      private var simpleDroneDisplay:MovieClip;
      
      private var engineFrame:int = 16;
      
      private var whipCounter:Number = 0;
      
      private var beacon:Beacon;
      
      private var lastShoot:int = LASERSHOOT_REAR;
      
      private var enginePositionPatterns:Array;
      
      private var shipManager:ShipManager;
      
      private var repairRobotClip:MovieClip;
      
      private var battleRepairRobotClip:MovieClip;
      
      private var cloakAlpha:Number = 0.3;
      
      public var shipPattern:ShipPattern;
      
      private var expansionPattern:ExpansionPattern;
      
      private var engineSmokePattern:EngineSmokePattern;
      
      private var enginePattern:AudibleResourcePattern;
      
      private var glowPattern:ResourcePattern;
      
      private var map:Map;
      
      private var attackerID:int = -1;
      
      public var isDebuffed:Boolean = false;
      
      private var _isNPC:Boolean;
      
      private var hitpointLabel:TextField;
      
      private var hitpointShadowLabel:TextField;
      
      private var labelClipOldYPosition:int;
      
      private var tmp:int;
      
      public var energyLeechActive:Boolean = false;
      
      public var isMoving:Boolean;
      
      public var movingCnt:int = -2;
      
      private var maxMovingCnt:int = 3;
      
      private var energyLeechCloud:MovieClip;
      
      private var flashingEnergyLeech:Boolean = false;
      
      public var numberChainsInvolvedIn:int = 0;
      
      public var isDestroyed:Boolean;
      
      public var displaysExplosion:Boolean;
      
      public var isPoliceShip:Boolean = false;
      
      private var lightSetting:int = 0;
      
      private const glowStrength:Number = 9;
      
      private const glowBlurX:Number = 10;
      
      private const glowBlurY:Number = 10;
      
      private const glowAlpha:Number = 0.4;
      
      private const tintAmount:Number = 0.7;
      
      private const redColour:uint = 16711680;
      
      private const blueColour:uint = 255;
      
      private const lightFlashTime:Number = 0.4;
      
      private const lightFlashTimeDelay:Number = 0.6;
      
      public var isCubicon:Boolean = false;
      
      public var galaxyGatesFinished:int;
      
      public var shipLightDecorator:ShipLightDecorator;
      
      public var updateStandardVisualShipRotation:Function;
      
      public var tweenRage:TweenMax;
      
      private var _debuffMove:MovieClip;
      
      private var _debuffStop:MovieClip;
      
      public var skull:MovieClip;
      
      public var invincibility:MovieClip;
      
      public var idleState:Boolean = false;
      
      public var hasPet:Boolean = false;
      
      public var petID:int = -1;
      
      public var currentlyMoving:Boolean;
      
      public var currentEnginePosition:Point = new Point();
      
      private var expansionContainerFullyAdded:Boolean;
      
      public function MapObject(param1:ShipManager, param2:int, param3:String, param4:Sprite)
      {
         this.updateStandardVisualShipRotation = this.updateVisualShipRotation;
         super();
         this.shipManager = param1;
         this.userID = param2;
         this.username = param3;
         this.laserLayer = param4;
         this.engineSmokePool = ObjectPoolManager.engineSmokePool;
         this.map = param1.getMap();
         this.enginePositionPatterns = PatternManager.enginePositionClasses;
         if(param2 == Hero.userID)
         {
            this.heroProxy = new Point();
         }
         TweenPlugin.activate([ColorTransformPlugin]);
      }
      
      public function addMalus() : void
      {
         if(this.malusClip == null)
         {
            this.malusClip = ResourceManager.getMovieClip("malusCloud0","mc");
         }
         this.attachMalusClowdClip();
      }
      
      public function removeMalus() : void
      {
         this.removeMalusCloudClip();
      }
      
      public function setNPC(param1:Boolean) : void
      {
         this._isNPC = param1;
      }
      
      public function isNPC() : Boolean
      {
         return this._isNPC;
      }
      
      public function setAttackerID(param1:int) : void
      {
         this.attackerID = param1;
      }
      
      public function setClipPosition(param1:int, param2:int) : void
      {
         this.x = param1;
         this.y = param2;
         if(this.isHeroShip())
         {
            this.clipContainer.x = ScreenManager.centerX;
            this.clipContainer.y = ScreenManager.centerY;
         }
         if(this.shipPattern.enginePositionClassID != -1)
         {
            this.whipCounter = Main.getRandomCount(0,10000);
         }
      }
      
      public function setDamageBarVisibility(param1:Boolean) : void
      {
         if(this.shipPattern.isEnergyVisible() && this.isSelected())
         {
            this.shieldBackgroundClip.visible = param1;
            this.hitpointBackgroundClip.visible = param1;
            this.extraHitpointClip.visible = param1;
            this.hitpointClip.visible = param1;
            this.shieldClip.visible = param1;
         }
      }
      
      public function setCloak(param1:Boolean) : void
      {
         var _loc2_:CPUItem = null;
         if(param1)
         {
            if(this.isHeroShip())
            {
               this.clipContainer.visible = true;
               this.clipContainer.alpha = this.cloakAlpha;
               this.map.getMain().getGuiManager().getMenuManager().setButtonAccess(SuperActionButton.ACTIVATION_CPU_CLOAK,false);
               this.map.getMain().getGuiManager().getMenuManager().setButtonSelected(SuperActionButton.ACTIVATION_CPU_CLOAK,true);
            }
            else
            {
               this.clipContainer.visible = false;
            }
         }
         else
         {
            this.clipContainer.alpha = 1;
            this.clipContainer.visible = true;
            if(this.isHeroShip())
            {
               _loc2_ = Hero.cpuItems[CPUItem.TYPE_CLOAK];
               if(_loc2_ != null && _loc2_.amount > 0)
               {
                  this.map.getMain().getGuiManager().getMenuManager().setButtonAccess(SuperActionButton.ACTIVATION_CPU_CLOAK,true);
               }
               this.map.getMain().getGuiManager().getMenuManager().setButtonSelected(SuperActionButton.ACTIVATION_CPU_CLOAK,false);
            }
         }
      }
      
      public function isInvisible() : Boolean
      {
         if(this.clipContainer.alpha != 1)
         {
            return true;
         }
         return false;
      }
      
      public function toggleEnergyLeechEffect(param1:int) : void
      {
         if(param1 == 1)
         {
            this.energyLeechCloud = ResourceManager.getMovieClip("ela0","mc");
            this.clipContainer.addChild(this.energyLeechCloud);
            this.flashEnergyLeechEffect();
            this.flashingEnergyLeech = true;
         }
         else if(this.energyLeechCloud != null)
         {
            if(this.clipContainer.contains(this.energyLeechCloud))
            {
               this.clipContainer.removeChild(this.energyLeechCloud);
            }
         }
      }
      
      private function flashEnergyLeechEffect() : void
      {
         var _loc1_:Sprite = new Sprite();
         TweenLite.to(_loc1_,2,{
            "alpha":0,
            "onComplete":this.handleEnergyLeechPause
         });
      }
      
      private function handleEnergyLeechPause() : void
      {
         var _loc1_:Sprite = new Sprite();
         TweenLite.to(this.energyLeechCloud,1,{"alpha":0});
         TweenLite.to(_loc1_,7,{
            "alpha":0,
            "onComplete":this.handleEnergyLeechUnPause
         });
      }
      
      private function handleEnergyLeechUnPause() : void
      {
         TweenLite.to(this.energyLeechCloud,1,{"alpha":1});
         this.flashEnergyLeechEffect();
      }
      
      public function updateShipClip() : void
      {
         var _loc1_:FileCollection = null;
         var _loc2_:SWFFinisher = null;
         var _loc3_:MovieClip = null;
         if(Settings.qualityShip == Settings.QUALITY_LOW)
         {
            this.createSimpleShip();
            if(this.expansionContainer != null)
            {
               this.expansionContainer.visible = false;
               this.expansionContainerFullyAdded = false;
            }
         }
         else
         {
            this.updateExpansionClip();
            _loc1_ = ResourceManager.fileCollection;
            if(_loc1_.isLoaded(this.shipPattern.getResKey()))
            {
               _loc2_ = SWFFinisher(_loc1_.getFinisher(this.shipPattern.getResKey()));
               _loc3_ = MovieClip(_loc2_.getEmbededMovieClip("mc"));
               this.setShipClip(_loc3_);
               this.setLabelHitpointPositions(_loc3_);
            }
            else
            {
               this.createSimpleShip();
               this.shipManager.loadShipResource(this.shipPattern.getResKey());
            }
         }
         this.updateSimpleShipVisibility();
      }
      
      public function updateExpansionClip() : void
      {
         var _loc3_:FileCollection = null;
         var _loc4_:MovieClip = null;
         var _loc5_:SWFFinisher = null;
         var _loc1_:int = this.shipPattern.getExpansionClassID();
         if(_loc1_ == -1)
         {
            return;
         }
         var _loc2_:ExpansionPattern = PatternManager.getExpansionPattern(this.shipPattern.getExpansionClassID(),this.expansionTypeID);
         if(_loc2_ == null)
         {
            return;
         }
         this.expansionPattern = _loc2_;
         if(Settings.qualityShip == Settings.QUALITY_HIGH)
         {
            _loc3_ = ResourceManager.fileCollection;
            if(_loc2_.getResKey().length > 0)
            {
               if(_loc3_.isLoaded(_loc2_.getResKey()))
               {
                  _loc5_ = SWFFinisher(_loc3_.getFinisher(_loc2_.getResKey()));
                  _loc4_ = MovieClip(_loc5_.getEmbededMovieClip("mc"));
                  this.setExpansionClip(_loc4_);
               }
               else
               {
                  this.shipManager.lazyLoadExpansionResource(_loc2_.getResKey());
               }
            }
         }
      }
      
      public function setGlowClip(param1:MovieClip) : void
      {
         this.glowClip = param1;
         this.removeAllChildren(this.glowContainer);
         this.glowClip.mouseEnabled = false;
         this.glowClip.mouseChildren = false;
         this.glowClip.cacheAsBitmap = true;
         this.glowContainer.addChild(param1);
         param1.gotoAndStop(this.lastShipFrame);
      }
      
      public function setShipClip(param1:MovieClip) : void
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         var _loc4_:MovieClip = null;
         var _loc5_:Array = null;
         var _loc6_:Point = null;
         var _loc7_:Array = null;
         var _loc8_:int = 0;
         var _loc9_:int = 0;
         this.shipClip = param1;
         this.shipClip.cacheAsBitmap = true;
         if(this.shipClip.framesLoaded == 1)
         {
            _loc5_ = [];
            _loc8_ = 0;
            while(_loc8_ < this.shipClip.numChildren)
            {
               if(this.shipClip.getChildAt(_loc8_) is MovieClip)
               {
                  _loc4_ = MovieClip(this.shipClip.getChildAt(_loc8_));
                  if(_loc4_ != null && _loc4_.name.search("engine") != -1)
                  {
                     _loc5_.push(_loc4_);
                     _loc2_ = Math.sqrt(_loc4_.x * _loc4_.x + _loc4_.y * _loc4_.y);
                     _loc3_ = Math.round(Math.atan(_loc4_.y / _loc4_.x) * 180 / Math.PI);
                     _loc7_ = [];
                     _loc9_ = 0;
                     while(_loc9_ < 360)
                     {
                        _loc6_ = new Point();
                        _loc6_.x = int(_loc2_ * Math.cos((_loc9_ + _loc3_) * Math.PI / 180));
                        _loc6_.y = int(_loc2_ * Math.sin((_loc9_ + _loc3_) * Math.PI / 180));
                        _loc7_[_loc9_] = _loc6_;
                        _loc9_++;
                     }
                     this.simpleShipEnginePositions[this.simpleShipEnginePositions.length] = _loc7_;
                  }
               }
               _loc8_++;
            }
            for each(_loc4_ in _loc5_)
            {
               this.shipClip.removeChild(_loc4_);
            }
         }
         else if(this.shipPattern.getSelectionYOffset() != 0)
         {
            this.borderClip.y = this.shipPattern.getSelectionYOffset();
         }
         else
         {
            this.borderClip.y = 8;
         }
         this.setRadius(param1);
         this.shipClip.mouseEnabled = false;
         this.shipClip.mouseChildren = false;
         this.shipClip.stop();
         this.removeAllChildren(this.shipContainer);
         this.shipContainer.addChild(this.shipClip);
         if(this.isDebuffed)
         {
            if(this._debuffMove != null)
            {
               this.shipContainer.addChild(this._debuffMove);
            }
            if(this._debuffStop != null)
            {
               this.shipContainer.addChild(this._debuffStop);
            }
         }
         this.updateVisualShipRotation();
         if(this.shipPattern.playLoop)
         {
            this.shipClip.play();
         }
         if(Settings.qualityShip == Settings.QUALITY_HIGH && this.shipPattern.getGlowID() != -1)
         {
            this.loadGlowClip();
         }
         if(this.isPoliceShip)
         {
            this.shipClip.light1.stop();
            this.shipClip.light2.stop();
         }
         this.updateStandardVisualShipRotation();
      }
      
      public function setExpansionClip(param1:MovieClip) : void
      {
         param1.mouseEnabled = Main.mouseEventsEnabled;
         param1.mouseChildren = Main.mouseEventsEnabled;
         param1.gotoAndStop(1);
         this.removeAllChildren(this.expansionContainer);
         if(this.expansionContainer != null)
         {
            param1.cacheAsBitmap = true;
            this.expansionContainer.addChild(param1);
            this.expansionContainer.cacheAsBitmap = true;
         }
         param1.gotoAndStop(this.lastShipFrame);
         this.updateSimpleShipVisibility();
         this.updateExpansionClipVisibility();
         this.updateVisualExpansionRotation();
      }
      
      private function createSimpleShip() : void
      {
         var _loc1_:String = "ship_" + this.shipPattern.getPatternID();
         var _loc2_:MovieClip = ResourceManager.getMovieClip("replacementShips",_loc1_);
         if(_loc2_ == null)
         {
            _loc2_ = ResourceManager.getMovieClip("replacementShips","ship_default");
         }
         this.setShipClip(_loc2_);
         this.setLabelHitpointPositions(_loc2_);
      }
      
      private function setLabelHitpointPositions(param1:DisplayObject) : void
      {
         this.setLabelYOffset(this.shipPattern.getLabelYOffset());
         if(this.shipPattern.getEnergyYOffset() != 0)
         {
            this.setHitpointsYOffset(-param1.height / 2 - this.shipPattern.getEnergyYOffset());
         }
         else
         {
            this.setHitpointsYOffset(-param1.height / 2);
         }
      }
      
      public function startEngineTimer() : void
      {
         if(this.shipPattern.enginePositionClassID != -1 && Settings.qualityEngine == Settings.QUALITY_HIGH)
         {
            if(this.engineTimer == null)
            {
               this.engineTimer = new Timer(50,0);
               this.engineTimer.addEventListener(TimerEvent.TIMER,this.addEngineSmoke);
            }
         }
      }
      
      public function stopEngineTimer() : void
      {
         if(this.engineTimer != null)
         {
            this.engineTimer.stop();
            this.engineTimer.removeEventListener(TimerEvent.TIMER,this.addEngineSmoke);
            this.engineTimer = null;
         }
      }
      
      public function setCrossHairColor(param1:int) : void
      {
         this.borderClip.gotoAndStop(param1);
      }
      
      public function cleanup() : void
      {
         if(this.shipPattern.enginePositionClassID != -1)
         {
            this.stopEngineTimer();
         }
         if(this.engineChannel != null)
         {
            AudioManager.removeLoop(this.engineChannel,false);
         }
         if(this.engineChannel != null)
         {
            this.engineChannel.stop();
            this.engineChannel = null;
         }
         var _loc1_:int = 0;
         while(_loc1_ < this.clipContainer.numChildren)
         {
            this.clipContainer.removeChildAt(_loc1_);
            _loc1_++;
         }
         if(this.repairSound != null)
         {
            AudioManager.removeLoop(this.repairSound,false);
            this.repairSound = null;
         }
      }
      
      private function addEngineSmoke(param1:TimerEvent) : void
      {
         var _loc4_:BitmapClip = null;
         var _loc5_:MovieClip = null;
         if(!this.engineContainer.visible)
         {
            return;
         }
         if(!this.clipContainer.visible)
         {
            return;
         }
         var _loc2_:int = 0;
         if(this.shipClip != null)
         {
            _loc2_ = this.shipClip.currentFrame;
         }
         var _loc3_:Array = this.engineSmokePool["engineSmoke0"];
         if(_loc3_ == null)
         {
            return;
         }
         for each(_loc5_ in this.engines)
         {
            _loc4_ = _loc3_.pop();
            if(_loc4_ == null)
            {
               return;
            }
            if(this.isHeroShip())
            {
               _loc4_.x = this.heroProxy.x + _loc5_.x;
               _loc4_.y = this.heroProxy.y + _loc5_.y;
            }
            else
            {
               _loc4_.x = this.clipContainer.x + _loc5_.x;
               _loc4_.y = this.clipContainer.y + _loc5_.y;
            }
            if(this.clipContainer.alpha != 1)
            {
               if(!this.isHeroShip())
               {
                  return;
               }
               _loc4_.alpha = this.cloakAlpha;
            }
            this.laserLayer.addChild(_loc4_);
            if(this.isDebuffed)
            {
               _loc4_.frame = Math.round(2 * (_loc4_.framesLoaded / 3));
            }
            else
            {
               _loc4_.frame = 1;
            }
            TweenLite.to(_loc4_,0.75,{
               "frame":_loc4_.framesLoaded,
               "onComplete":this.handleSmokeFinished,
               "onCompleteParams":[_loc4_]
            });
         }
      }
      
      private function handleSmokeFinished(param1:BitmapClip) : void
      {
         var _loc2_:Array = null;
         if(param1 != null)
         {
            param1.stop();
            this.laserLayer.removeChild(param1);
            _loc2_ = this.engineSmokePool[param1.cacheID];
            _loc2_.push(param1);
         }
      }
      
      public function createContainers() : void
      {
         var _loc3_:EnginePositionPattern = null;
         var _loc4_:int = 0;
         var _loc5_:TextFormat = null;
         var _loc6_:TextFormat = null;
         this.clipContainer = new Sprite();
         this.clipContainer.mouseEnabled = Main.mouseEventsEnabled;
         this.clipContainer.mouseChildren = Main.mouseEventsEnabled;
         this.shipContainer = new Sprite();
         this.shipContainer.mouseEnabled = Main.mouseEventsEnabled;
         this.shipContainer.mouseChildren = Main.mouseEventsEnabled;
         this.clipContainer.addChild(this.shipContainer);
         if(this.shipPattern.getGlowID() != -1)
         {
            this.glowContainer = new Sprite();
            this.glowContainer.mouseEnabled = Main.mouseEventsEnabled;
            this.glowContainer.mouseChildren = Main.mouseEventsEnabled;
            this.clipContainer.addChild(this.glowContainer);
         }
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.borderClip = MovieClip(_loc1_.getEmbededMovieClip("ship_border"));
         this.borderClip.gotoAndStop(CROSSHAIR_RED);
         this.borderClip.visible = false;
         this.borderClip.mouseEnabled = Main.mouseEventsEnabled;
         this.borderClip.mouseChildren = Main.mouseEventsEnabled;
         this.clipContainer.addChild(this.borderClip);
         var _loc2_:int = this.shipPattern.getEnginePositionClassID();
         this.engines = [];
         if(_loc2_ != -1)
         {
            _loc3_ = PatternManager.getEnginePositionPattern(_loc2_);
            this.engineContainer = new Sprite();
            this.engineContainer.mouseEnabled = Main.mouseEventsEnabled;
            this.engineContainer.mouseChildren = Main.mouseEventsEnabled;
            this.clipContainer.addChild(this.engineContainer);
            _loc1_ = SWFFinisher(ResourceManager.fileCollection.getFinisher(this.enginePattern.getResKey()));
            _loc4_ = 0;
            while(_loc4_ < _loc3_.enginePositions.length)
            {
               this.engines[_loc4_] = MovieClip(_loc1_.getEmbededMovieClip("mc"));
               this.engines[_loc4_].mouseEnabled = Main.mouseEventsEnabled;
               this.engines[_loc4_].mouseChildren = Main.mouseEventsEnabled;
               this.engineContainer.addChild(this.engines[_loc4_]);
               _loc4_++;
            }
         }
         if(this.shipPattern.hasExpansion())
         {
            this.expansionContainer = new Sprite();
            this.expansionContainer.mouseEnabled = Main.mouseEventsEnabled;
            this.expansionContainer.mouseChildren = Main.mouseEventsEnabled;
            this.clipContainer.addChild(this.expansionContainer);
         }
         this.explosionContainer = new Sprite();
         this.explosionContainer.mouseEnabled = Main.mouseEventsEnabled;
         this.explosionContainer.mouseChildren = Main.mouseEventsEnabled;
         this.clipContainer.addChild(this.explosionContainer);
         this.droneDisplayClipContainer = new Sprite();
         this.droneDisplayClipContainer.mouseEnabled = Main.mouseEventsEnabled;
         this.droneDisplayClipContainer.mouseChildren = Main.mouseEventsEnabled;
         this.clipContainer.addChild(this.droneDisplayClipContainer);
         if(this.shipPattern.isEnergyVisible())
         {
            _loc1_ = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
            if(Settings.SHOW_HP_NUMBERS_ON_MAP)
            {
               this.hitpointShadowLabel = new TextField();
               this.hitpointShadowLabel.multiline = false;
               _loc5_ = new TextFormat("Tahoma",10,0);
               _loc5_.align = TextFormatAlign.CENTER;
               _loc5_.bold = true;
               this.hitpointShadowLabel.defaultTextFormat = _loc5_;
               this.hitpointShadowLabel.embedFonts = false;
               this.hitpointShadowLabel.x = -49;
               this.hitpointShadowLabel.width = 100;
               this.hitpointShadowLabel.selectable = false;
               this.hitpointShadowLabel.text = "";
               this.hitpointShadowLabel.mouseEnabled = false;
               this.clipContainer.addChild(this.hitpointShadowLabel);
               this.hitpointLabel = new TextField();
               this.hitpointLabel.multiline = false;
               _loc6_ = new TextFormat("Tahoma",10,16777215);
               _loc6_.align = TextFormatAlign.CENTER;
               _loc6_.bold = true;
               this.hitpointLabel.defaultTextFormat = _loc6_;
               this.hitpointLabel.embedFonts = false;
               this.hitpointLabel.x = -50;
               this.hitpointLabel.width = 100;
               this.hitpointLabel.selectable = false;
               this.hitpointLabel.text = "";
               this.hitpointLabel.mouseEnabled = false;
               this.clipContainer.addChild(this.hitpointLabel);
            }
            this.shipDecorator = new ShipSkillDecorator(this);
            this.clipContainer.addChild(this.shipDecorator);
            this.hitpointBackgroundClip.graphics.lineStyle(1,0);
            this.hitpointBackgroundClip.mouseEnabled = Main.mouseEventsEnabled;
            this.hitpointBackgroundClip.mouseChildren = Main.mouseEventsEnabled;
            this.hitpointBackgroundClip.graphics.beginFill(7171437);
            this.hitpointBackgroundClip.graphics.drawRect(0,0,50,3);
            this.hitpointBackgroundClip.graphics.endFill();
            this.hitpointBackgroundClip.x = -25;
            this.clipContainer.addChild(this.hitpointBackgroundClip);
            this.shieldBackgroundClip.graphics.lineStyle(1,0);
            this.shieldBackgroundClip.mouseEnabled = Main.mouseEventsEnabled;
            this.shieldBackgroundClip.mouseChildren = Main.mouseEventsEnabled;
            this.shieldBackgroundClip.graphics.beginFill(7171437);
            this.shieldBackgroundClip.graphics.drawRect(0,0,50,3);
            this.shieldBackgroundClip.graphics.endFill();
            this.shieldBackgroundClip.x = -25;
            this.clipContainer.addChild(this.shieldBackgroundClip);
            this.hitpointClip.graphics.lineStyle(1,0);
            this.hitpointClip.mouseEnabled = Main.mouseEventsEnabled;
            this.hitpointClip.mouseChildren = Main.mouseEventsEnabled;
            this.hitpointClip.graphics.beginFill(4832832);
            this.hitpointClip.graphics.drawRect(0,0,50,3);
            this.hitpointClip.graphics.endFill();
            this.hitpointClip.x = -25;
            this.clipContainer.addChild(this.hitpointClip);
            this.extraHitpointClip.graphics.lineStyle(1,0);
            this.extraHitpointClip.mouseEnabled = Main.mouseEventsEnabled;
            this.extraHitpointClip.mouseChildren = Main.mouseEventsEnabled;
            this.extraHitpointClip.graphics.beginFill(16645438);
            this.extraHitpointClip.graphics.drawRect(0,0,50,3);
            this.extraHitpointClip.graphics.endFill();
            this.extraHitpointClip.x = -25;
            this.clipContainer.addChild(this.extraHitpointClip);
            this.shieldClip.graphics.lineStyle(1,0);
            this.shieldClip.mouseEnabled = Main.mouseEventsEnabled;
            this.shieldClip.mouseChildren = Main.mouseEventsEnabled;
            this.shieldClip.graphics.beginFill(3379148);
            this.shieldClip.graphics.drawRect(0,0,50,3);
            this.shieldClip.graphics.endFill();
            this.shieldClip.x = -25;
            this.clipContainer.addChild(this.shieldClip);
            if(!this.isHeroShip())
            {
               this.shieldBackgroundClip.visible = false;
               this.hitpointBackgroundClip.visible = false;
               this.hitpointClip.visible = false;
               this.shieldClip.visible = false;
               this.extraHitpointClip.visible = false;
            }
         }
         if(this.shipPattern.isLabelVisible())
         {
            this.labelClip = new MovieClip();
            this.labelClip.mouseEnabled = Main.mouseEventsEnabled;
            this.labelClip.mouseChildren = Main.mouseEventsEnabled;
            this.clipContainer.addChild(this.labelClip);
         }
      }
      
      public function getShipDecorator() : ShipSkillDecorator
      {
         return this.shipDecorator;
      }
      
      private function createBarGraphic() : Sprite
      {
         var _loc1_:Sprite = new Sprite();
         _loc1_.graphics.lineStyle(1,0);
         _loc1_.mouseEnabled = Main.mouseEventsEnabled;
         _loc1_.mouseChildren = Main.mouseEventsEnabled;
         _loc1_.graphics.beginFill(16645438);
         _loc1_.graphics.drawRect(0,0,50,3);
         _loc1_.graphics.endFill();
         _loc1_.x = -25;
         return _loc1_;
      }
      
      public function updateLabelVisibility() : void
      {
         if(this.shipPattern.isLabelVisible())
         {
            this.labelClip.visible = Settings.displayPlayerNames;
         }
      }
      
      private function setEnginePosition() : void
      {
         var _loc1_:int = 0;
         var _loc2_:EnginePositionPattern = null;
         var _loc3_:int = 0;
         var _loc4_:Point = null;
         var _loc5_:int = 0;
         if(this.shipClip != null)
         {
            if(this.engineContainer.numChildren != 0)
            {
               _loc1_ = this.shipPattern.getEnginePositionClassID();
               _loc2_ = PatternManager.getEnginePositionPattern(_loc1_);
               _loc3_ = 0;
               while(_loc3_ < this.engines.length)
               {
                  if(this.shipClip.framesLoaded > 1)
                  {
                     _loc4_ = _loc2_.enginePositions[_loc3_][this.shipClip.currentFrame - 1];
                     this.engines[_loc3_].x = _loc4_.x;
                     this.engines[_loc3_].y = _loc4_.y;
                     this.currentEnginePosition.x = _loc4_.x;
                     this.currentEnginePosition.y = _loc4_.y;
                  }
                  else
                  {
                     _loc5_ = this._shipRotation % 360;
                     while(_loc5_ < 0)
                     {
                        _loc5_ = 360 + _loc5_;
                     }
                     if(this.simpleShipEnginePositions[_loc3_] != undefined)
                     {
                        _loc4_ = this.simpleShipEnginePositions[_loc3_][_loc5_];
                        this.engines[_loc3_].x = _loc4_.x;
                        this.engines[_loc3_].y = _loc4_.y;
                        this.currentEnginePosition.x = _loc4_.x;
                        this.currentEnginePosition.y = _loc4_.y;
                        this.engines[_loc3_].visible = true;
                     }
                     else
                     {
                        this.engines[_loc3_].visible = false;
                     }
                  }
                  this.engines[_loc3_].rotation = int(this._shipRotation);
                  _loc3_++;
               }
            }
         }
      }
      
      private function removeAllChildren(param1:DisplayObjectContainer) : void
      {
         if(param1 == null)
         {
            return;
         }
         var _loc2_:int = param1.numChildren;
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            param1.removeChildAt(0);
            _loc3_++;
         }
      }
      
      public function loadGlowClip() : void
      {
         var _loc2_:SWFFinisher = null;
         var _loc3_:MovieClip = null;
         if(this.userID != Hero.userID)
         {
            return;
         }
         var _loc1_:FileCollection = ResourceManager.fileCollection;
         if(_loc1_.isLoaded(this.glowPattern.getResKey()))
         {
            _loc2_ = SWFFinisher(_loc1_.getFinisher(this.glowPattern.getResKey()));
            _loc3_ = MovieClip(_loc2_.getEmbededMovieClip("mc"));
            this.setGlowClip(_loc3_);
         }
         else
         {
            this.shipManager.loadGlowResource(this.glowPattern.getResKey());
         }
      }
      
      public function updateSimpleShipVisibility() : void
      {
         if(this.glowContainer != null)
         {
            if(this.shipClip != null && this.shipClip.framesLoaded == 1)
            {
               this.glowContainer.visible = false;
            }
            else
            {
               this.glowContainer.visible = true;
            }
         }
      }
      
      public function updateExpansionClipVisibility() : void
      {
         if(this.expansionContainer != null && !this.expansionContainerFullyAdded)
         {
            this.expansionContainerFullyAdded = true;
            this.expansionContainer.visible = true;
         }
      }
      
      private function setRadius(param1:MovieClip) : void
      {
         this.radius = param1.width / 2;
         if(param1.height > param1.width)
         {
            this.radius = param1.height / 2;
         }
      }
      
      public function isHeroShip() : Boolean
      {
         if(this.userID == Hero.userID)
         {
            return true;
         }
         return false;
      }
      
      public function isHeroPet() : Boolean
      {
         var _loc1_:Pet = this.shipManager.getHero().pet;
         var _loc2_:Boolean = false;
         if(_loc1_ != null)
         {
            if(this.userID == _loc1_.userID)
            {
               _loc2_ = true;
            }
         }
         return _loc2_;
      }
      
      public function getExpansionClip() : MovieClip
      {
         if(this.expansionContainer != null && this.expansionContainer.numChildren > 0)
         {
            return MovieClip(this.expansionContainer.getChildAt(0));
         }
         return null;
      }
      
      public function getClipContainer() : Sprite
      {
         return this.clipContainer;
      }
      
      public function getUserId() : Number
      {
         return this.userID;
      }
      
      public function getSpeed() : int
      {
         return this.speed;
      }
      
      public function setSpeed(param1:int) : void
      {
         this.speed = param1;
      }
      
      public function removeTitle() : void
      {
         if(this.titleClip != null && this.clipContainer.contains(this.titleClip))
         {
            this.labelClip.y = this.labelClipOldYPosition;
            this.clipContainer.removeChild(this.titleClip);
            this.updateLabelPositions();
         }
      }
      
      public function removePermanentTitle() : void
      {
         if(this.permanentTitleClip != null && this.clipContainer.contains(this.permanentTitleClip))
         {
            this.clipContainer.removeChild(this.permanentTitleClip);
            this.updateLabelPositions();
         }
      }
      
      public function updateTitle(param1:String) : void
      {
         var _loc3_:BitmapData = null;
         if(this.titleClip != null && this.clipContainer.contains(this.titleClip))
         {
            this.labelClip.y = this.labelClipOldYPosition;
            this.clipContainer.removeChild(this.titleClip);
         }
         this.userTitle = param1;
         var _loc2_:TextField = new TextField();
         _loc2_.defaultTextFormat = Styles.systemTitleFmt;
         _loc2_.embedFonts = Styles.systemTitleEmbed;
         _loc2_.text = param1;
         this.titleClip = new MovieClip();
         this.titleClip.mouseEnabled = Main.mouseEventsEnabled;
         this.titleClip.mouseChildren = Main.mouseEventsEnabled;
         _loc2_.filters = [mediumGlowFilter];
         _loc2_.autoSize = TextFieldAutoSize.LEFT;
         var _loc4_:int = _loc2_.width;
         _loc3_ = new BitmapData(_loc4_,_loc2_.height + 3,true,0);
         var _loc5_:Matrix = new Matrix();
         _loc3_.draw(_loc2_,_loc5_);
         this.titleClip.addChild(new Bitmap(_loc3_));
         this.titleClip.x = this.labelClip.x + 32 + this.tmp / 2 - this.titleClip.width / 2;
         this.titleClip.y = this.labelClip.y - 14;
         this.labelClipOldYPosition = this.labelClip.y;
         this.labelClip.y = this.titleClip.y + this.titleClip.height;
         this.clipContainer.addChild(this.titleClip);
         this.updateLabelPositions();
         this.titleClip.visible = Settings.displayPlayerNames;
      }
      
      private function updateLabelPositions() : void
      {
         if(this.permanentTitleClip != null && this.clipContainer.contains(this.permanentTitleClip))
         {
            if(this.simpleDroneDisplay != null && this.droneDisplayClipContainer.contains(this.simpleDroneDisplay))
            {
               this.permanentTitleClip.y = this.labelClip.height + this.labelClip.y + 12;
            }
            else
            {
               this.permanentTitleClip.y = this.labelClip.height + this.labelClip.y + 2;
            }
         }
         if(this.simpleDroneDisplay != null && this.droneDisplayClipContainer.contains(this.simpleDroneDisplay))
         {
            this.simpleDroneDisplay.y = this.labelClip.y + 24;
         }
      }
      
      public function updatePermanentTitle(param1:String) : void
      {
         var _loc3_:BitmapData = null;
         if(this.permanentTitleClip != null && this.clipContainer.contains(this.permanentTitleClip))
         {
            this.clipContainer.removeChild(this.permanentTitleClip);
         }
         var _loc2_:TextField = new TextField();
         _loc2_.defaultTextFormat = Styles.systemPermanentTitleFmt;
         _loc2_.embedFonts = Styles.systemPermanentTitleEmbed;
         _loc2_.text = param1;
         this.permanentTitleClip = new MovieClip();
         this.permanentTitleClip.mouseEnabled = Main.mouseEventsEnabled;
         this.permanentTitleClip.mouseChildren = Main.mouseEventsEnabled;
         _loc2_.filters = [mediumGlowFilter];
         _loc2_.autoSize = TextFieldAutoSize.LEFT;
         var _loc4_:int = _loc2_.width;
         _loc3_ = new BitmapData(_loc4_,_loc2_.height + 3,true,0);
         var _loc5_:Matrix = new Matrix();
         _loc3_.draw(_loc2_,_loc5_);
         this.permanentTitleClip.addChild(new Bitmap(_loc3_));
         this.permanentTitleClip.x = this.labelClip.x + 16 + this.tmp / 2 - this.permanentTitleClip.width / 2;
         this.clipContainer.addChild(this.permanentTitleClip);
         this.updateLabelPositions();
         this.permanentTitleClip.visible = Settings.displayPlayerNames;
      }
      
      public function updateLabel(param1:String = "") : void
      {
         var _loc2_:Ship = null;
         var _loc3_:String = null;
         var _loc4_:String = null;
         var _loc6_:uint = 0;
         var _loc10_:BitmapData = null;
         var _loc11_:BitmapData = null;
         var _loc15_:TextField = null;
         var _loc16_:TextFormat = null;
         var _loc17_:String = null;
         var _loc18_:Bitmap = null;
         if(!this.shipPattern.isLabelVisible())
         {
            return;
         }
         if(this.isHeroShip())
         {
            _loc2_ = this as Ship;
         }
         else
         {
            _loc2_ = this.shipManager.getHero();
         }
         if(_loc2_ == null)
         {
            return;
         }
         if(this.isHeroShip())
         {
            _loc3_ = PatternManager.colorPatterns["neutral"];
         }
         else if(this._isGroupMember)
         {
            _loc3_ = PatternManager.colorPatterns["sameGroup"];
         }
         else if(this.clanID != 0 && this.clanID == _loc2_.getClanID())
         {
            _loc3_ = PatternManager.colorPatterns["sameClan"];
         }
         else if(this.fractionID == _loc2_.getFactionID())
         {
            _loc3_ = PatternManager.colorPatterns["sameFraction"];
         }
         else
         {
            _loc3_ = PatternManager.colorPatterns["enemy"];
         }
         if(param1 != "")
         {
            _loc3_ = PatternManager.colorPatterns[param1];
         }
         if(this.clanDiplomacy == -1)
         {
            _loc4_ = PatternManager.colorPatterns["neutral"];
         }
         else if(this.clanDiplomacy == 0)
         {
            _loc4_ = PatternManager.colorPatterns["neutral"];
         }
         else if(this.clanDiplomacy == 1)
         {
            _loc4_ = PatternManager.colorPatterns["allied"];
         }
         else if(this.clanDiplomacy == 2)
         {
            _loc4_ = PatternManager.colorPatterns["noAttackPact"];
         }
         else if(this.clanDiplomacy == 3)
         {
            _loc4_ = PatternManager.colorPatterns["atWar"];
         }
         if(!this.isHeroShip())
         {
            this.setMiniMapColorInRelationToHero(_loc2_);
         }
         else
         {
            this.setShipProtectedStatus();
         }
         this.miniMapColorAlpha = this.makeMiniMapColorTransparent(this.miniMapColor);
         var _loc5_:uint = parseInt("0x" + _loc3_);
         if(this.clanTag != null && this.clanTag.length > 0 && _loc4_ != null)
         {
            _loc6_ = parseInt("0x" + _loc4_);
         }
         var _loc7_:TextField = new TextField();
         var _loc8_:TextFormat = new TextFormat(Styles.nickFmt.font,Styles.nickFontHeight,_loc5_,Styles.nickFmt.bold);
         _loc7_.defaultTextFormat = _loc8_;
         _loc7_.embedFonts = Styles.nickEmbed;
         var _loc9_:int = 0;
         if(this.clanTag != null && this.clanTag.length > 0)
         {
            _loc15_ = new TextField();
            _loc16_ = new TextFormat(Styles.nickFmt.font,Styles.nickFontHeight,_loc6_,Styles.nickFmt.bold);
            _loc15_.defaultTextFormat = _loc16_;
            _loc15_.embedFonts = Styles.nickEmbed;
            _loc15_.text = "[" + StringUtil.trim(this.clanTag) + "]";
            _loc15_.filters = [filter];
            _loc15_.autoSize = TextFieldAutoSize.LEFT;
            _loc9_ += _loc15_.width;
         }
         _loc7_.text = StringUtil.trim(this.username);
         _loc7_.filters = [filter];
         _loc7_.autoSize = TextFieldAutoSize.LEFT;
         this.invalidateProtectedStatus();
         _loc9_ += _loc7_.width;
         this.tmp = _loc9_;
         var _loc12_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("icons"));
         if(this.dailyRank != 0)
         {
            this.rankIcon = BitmapData(_loc12_.getEmbededBitmapData("rank" + this.dailyRank));
            _loc9_ += this.rankIcon.width;
         }
         else
         {
            this.rankIcon = null;
         }
         if(this.fractionID != 0)
         {
            _loc11_ = BitmapData(_loc12_.getEmbededBitmapData("fraction" + this.fractionID));
            _loc9_ += _loc11_.width + 2;
         }
         _loc10_ = new BitmapData(_loc9_,_loc7_.height + 3,true,0);
         var _loc13_:Matrix = new Matrix();
         var _loc14_:Matrix = new Matrix();
         if(this.rankIcon != null)
         {
            _loc10_.copyPixels(this.rankIcon,this.rankIcon.rect,new Point(0,3));
            _loc13_.translate(this.rankIcon.width,0);
            _loc14_.translate(this.rankIcon.width,0);
         }
         if(_loc11_ != null)
         {
            _loc10_.copyPixels(_loc11_,_loc11_.rect,new Point(_loc9_ - _loc11_.width,0));
         }
         this.labelClip.graphics.clear();
         if(this.ggClip != null && this.labelClip.contains(this.ggClip))
         {
            this.labelClip.removeChild(this.ggClip);
         }
         if(this.galaxyGatesFinished > 0)
         {
            if(this.galaxyGatesFinished > GALAXY_GATES_FINISHED_MAXIMUM)
            {
               this.galaxyGatesFinished = GALAXY_GATES_FINISHED_MAXIMUM;
            }
            _loc17_ = "achievement_" + this.galaxyGatesFinished;
            _loc18_ = _loc12_.getEmbededBitmap(_loc17_);
            this.ggClip = new Sprite();
            this.ggClip.mouseEnabled = Main.mouseEventsEnabled;
            this.ggClip.mouseChildren = Main.mouseEventsEnabled;
            this.ggClip.addChild(_loc18_);
            this.ggClip.x = -2;
            this.ggClip.y = -14;
            this.labelClip.addChild(this.ggClip);
         }
         if(_loc15_ != null)
         {
            _loc10_.draw(_loc15_,_loc14_);
            _loc13_.translate(_loc15_.width,0);
         }
         _loc10_.draw(_loc7_,_loc13_);
         this.labelClip.addChild(new Bitmap(_loc10_));
         this.labelClip.x = -int(_loc9_ / 2);
         this.labelClip.visible = Settings.displayPlayerNames;
      }
      
      public function setMiniMapColorInRelationToHero(param1:Ship) : void
      {
         var _loc2_:Boolean = false;
         if(Hero.cpuItems[CPUItem.TYPE_RADAR] != null || Hero.premium)
         {
            _loc2_ = true;
         }
         if(param1.getClanID() > 0 && this.getClanID() == param1.getClanID())
         {
            this.miniMapColor = 4281597747;
         }
         else if(this.getClanDiplomacy() == 1 && _loc2_)
         {
            this.miniMapColor = 4281597747;
         }
         else if(this.getClanDiplomacy() == 2 && _loc2_)
         {
            this.miniMapColor = 4294953984;
         }
         else if(this.getClanDiplomacy() == 2 && _loc2_)
         {
            this.miniMapColor = 4291559424;
         }
         else if(this.getFactionID() == param1.getFactionID())
         {
            if(this.getClanDiplomacy() == 3 && _loc2_)
            {
               this.miniMapColor = 4294901760;
            }
            else
            {
               this.miniMapColor = 4278229503;
            }
         }
         else if(this.shipPattern.getPatternID() == 442)
         {
            this.miniMapIcon = "mapIcon_spaceball";
            this.isIcon = true;
         }
         else if(this.hasWarnIconOnMap())
         {
            this.miniMapIcon = "mapIcon_alert";
            this.isIcon = true;
         }
         else
         {
            this.miniMapColor = 4294901760;
         }
         this.setShipProtectedStatus();
      }
      
      public function setMinimapIcon(param1:String) : void
      {
         this.miniMapIcon = param1;
         this.isIcon = true;
      }
      
      private function setShipProtectedStatus() : void
      {
         if(!this.map.getPvpAllowed())
         {
            if(this.map.getHomeMapFaction() == this.fractionID)
            {
               this.shipAttackableInNonPVP = false;
            }
            else
            {
               this.shipAttackableInNonPVP = true;
            }
         }
         else
         {
            this.shipAttackableInNonPVP = true;
         }
      }
      
      public function makeMiniMapColorTransparent(param1:uint) : uint
      {
         return uint(param1 - 2147483648);
      }
      
      public function changeAttackableStateInNonPvPMap(param1:Boolean) : void
      {
         this.shipAttackableInNonPVP = param1;
         this.invalidateProtectedStatus();
      }
      
      private function invalidateProtectedStatus() : void
      {
         if(!this.shipAttackableInNonPVP)
         {
            this.labelClip.alpha = 0.4;
         }
         else
         {
            this.labelClip.alpha = 1;
         }
      }
      
      public function updateDroneDisplay(param1:int, param2:int) : void
      {
         var _loc3_:DroneDisplay = null;
         if(param1 > 0 || param2 > 0)
         {
            _loc3_ = new DroneDisplay(param1,param2);
            this.simpleDroneDisplay = new MovieClip();
            this.simpleDroneDisplay.mouseEnabled = Main.mouseEventsEnabled;
            this.simpleDroneDisplay.mouseChildren = Main.mouseEventsEnabled;
            this.simpleDroneDisplay.addChild(new Bitmap(_loc3_));
            this.simpleDroneDisplay.x = this.labelClip.x;
            this.simpleDroneDisplay.y = this.labelClip.y + 24;
            this.simpleDroneDisplay.x += 2;
            if(this.rankIcon != null)
            {
               this.simpleDroneDisplay.x += this.rankIcon.width;
            }
            this.droneDisplayClipContainer.addChild(this.simpleDroneDisplay);
            this.updateLabelPositions();
         }
      }
      
      public function setLabelYOffset(param1:int) : void
      {
         this.labelClip.y = param1;
      }
      
      public function setHitpointsYOffset(param1:int) : void
      {
         if(this.shipPattern.isEnergyVisible())
         {
            if(this.hitpointLabel != null)
            {
               this.hitpointLabel.y = param1 - 18;
               this.hitpointShadowLabel.y = param1 - 17;
            }
            this.hitpointBackgroundClip.y = param1;
            this.extraHitpointClip.y = param1;
            this.hitpointClip.y = param1;
            this.shieldClip.y = param1 + 6;
            this.shieldBackgroundClip.y = param1 + 6;
         }
      }
      
      public function setSelected(param1:Boolean) : void
      {
         var _loc2_:* = false;
         if(!this.idleState)
         {
            this.borderClip.visible = param1;
            if(param1)
            {
               this.borderClip.alpha = 0;
               TweenLite.to(this.borderClip,0.25,{"alpha":1});
               if(this.shipPattern.isEnergyVisible())
               {
                  this.shieldBackgroundClip.alpha = 0;
                  this.shieldBackgroundClip.visible = true;
                  this.hitpointBackgroundClip.alpha = 0;
                  this.hitpointBackgroundClip.visible = true;
                  this.extraHitpointClip.alpha = 0;
                  this.extraHitpointClip.visible = true;
                  this.hitpointClip.alpha = 0;
                  this.hitpointClip.visible = true;
                  this.shieldClip.alpha = 0;
                  this.shieldClip.visible = true;
                  TweenLite.to(this.shieldBackgroundClip,0.25,{"alpha":1});
                  TweenLite.to(this.hitpointBackgroundClip,0.25,{"alpha":1});
                  TweenLite.to(this.extraHitpointClip,0.25,{"alpha":1});
                  TweenLite.to(this.hitpointClip,0.25,{"alpha":1});
                  TweenLite.to(this.shieldClip,0.25,{"alpha":1});
               }
            }
            else
            {
               _loc2_ = false;
               if(this.shipManager.getHero().pet != null)
               {
                  _loc2_ = this.userID == this.shipManager.getHero().pet.userID;
               }
               if(this.shipPattern.isEnergyVisible() && !_loc2_)
               {
                  this.shieldBackgroundClip.visible = false;
                  this.hitpointBackgroundClip.visible = false;
                  this.extraHitpointClip.visible = false;
                  this.hitpointClip.visible = false;
                  this.shieldClip.visible = false;
               }
            }
            if(this.hitpointLabel != null)
            {
               this.hitpointLabel.visible = param1;
               this.hitpointShadowLabel.visible = param1;
            }
         }
      }
      
      public function isSelected() : Boolean
      {
         return this.borderClip.visible;
      }
      
      public function setMaxHitpoints(param1:Number) : void
      {
         this.maxHitpoints = param1;
         if(this.isHeroShip())
         {
            this.map.getMain().getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_0,SimpleElement.TYPE_HITPOINTS);
         }
      }
      
      public function setCargo(param1:Number) : void
      {
         this.cargo = param1;
         if(this.isHeroShip())
         {
            this.map.getMain().getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_0,SimpleElement.TYPE_CARGO);
         }
      }
      
      public function setMaxCargo(param1:Number) : void
      {
         this.maxCargo = param1;
         if(this.isHeroShip())
         {
            this.map.getMain().getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_0,SimpleElement.TYPE_CARGO);
         }
      }
      
      public function removeDrones() : void
      {
         if(this.droneConnector != null)
         {
            this.droneConnector.cleanup(this);
         }
         this.droneConnector = null;
      }
      
      public function removeSimpleDroneDisplay() : void
      {
         if(this.simpleDroneDisplay != null && this.droneDisplayClipContainer.contains(this.simpleDroneDisplay))
         {
            this.droneDisplayClipContainer.removeChild(this.simpleDroneDisplay);
         }
         this.simpleDroneDisplay = null;
         this.updateLabelPositions();
      }
      
      public function initDroneConnector() : void
      {
         this.droneConnector = new DroneConnector();
      }
      
      public function getFactionID() : int
      {
         return this.fractionID;
      }
      
      public function getClanID() : int
      {
         return this.clanID;
      }
      
      public function getMiniMapColor() : uint
      {
         if(this.shipAttackableInNonPVP)
         {
            return this.miniMapColor;
         }
         return this.miniMapColorAlpha;
      }
      
      public function getMiniMapColorAlpha() : uint
      {
         return this.miniMapColorAlpha;
      }
      
      public function getMiniMapIcon() : String
      {
         return this.miniMapIcon;
      }
      
      public function isIconOnMiniMap() : Boolean
      {
         return this.isIcon;
      }
      
      public function getClanDiplomacy() : int
      {
         return this.clanDiplomacy;
      }
      
      public function getUsername() : String
      {
         return this.username;
      }
      
      public function getClanTag() : String
      {
         return this.clanTag;
      }
      
      public function get shipRotation() : int
      {
         return this._shipRotation;
      }
      
      public function set shipRotation(param1:int) : void
      {
         if(this._shipRotation != param1)
         {
            this._shipRotation = param1;
            this.updateStandardVisualShipRotation();
            this.updateVisualExpansionRotation();
            this.updateVisualGlowRotation();
            if(this.isDebuffed)
            {
               if(this.map.getCombatManager().isShipAttacking(this.userID) == null || this.movingCnt == 0)
               {
                  this.updateDebuffRotation(ROTATION_SHIP);
               }
               else
               {
                  this.updateDebuffRotation(ROTATION_MOVEMENT,true);
               }
            }
            if(this.shipPattern.enginePositionClassID != -1)
            {
               this.setEnginePosition();
            }
         }
      }
      
      public function updateDebuffRotation(param1:String, param2:Boolean = false) : void
      {
         var _loc3_:int = 0;
         switch(param1)
         {
            case ROTATION_MOVEMENT:
               _loc3_ = this.movementDirection;
               break;
            case ROTATION_SHIP:
            default:
               _loc3_ = this._shipRotation;
         }
         if(this._debuffMove != null)
         {
            if((!param2 || this._debuffMove.alpha == 0) && this.isMoving)
            {
               this._debuffMove.rotation = _loc3_;
            }
            else if(this.isMoving)
            {
               TweenLite.to(this._debuffMove,0.25,{"shortRotation":{"rotation":_loc3_}});
            }
         }
         if(this._debuffStop != null)
         {
            if((!param2 || this._debuffStop.alpha == 0) && !this.isMoving)
            {
               this._debuffStop.rotation = _loc3_;
            }
            else if(param1 != ROTATION_MOVEMENT)
            {
               TweenLite.to(this._debuffStop,0.25,{"shortRotation":{"rotation":_loc3_}});
            }
         }
      }
      
      public function updateDebuff() : void
      {
         if(this._debuffMove != null && this._debuffStop != null)
         {
            if(this.isMoving)
            {
               this.updateDebuffRotation(ROTATION_MOVEMENT);
               TweenLite.to(this._debuffMove,1,{
                  "ease":Linear.easeNone,
                  "alpha":1
               });
               TweenLite.to(this._debuffStop,0.7,{
                  "ease":Linear.easeNone,
                  "alpha":0
               });
            }
            else
            {
               this.updateDebuffRotation(ROTATION_SHIP);
               TweenLite.to(this._debuffStop,0.7,{
                  "ease":Linear.easeNone,
                  "alpha":1
               });
               TweenLite.to(this._debuffMove,1,{
                  "ease":Linear.easeNone,
                  "alpha":0
               });
            }
         }
      }
      
      public function updateVisualShipRotation() : void
      {
         var _loc1_:int = this._shipRotation % 360;
         while(_loc1_ < 0)
         {
            _loc1_ = 360 + _loc1_;
         }
         this.lastShipFrame = 32 / 360 * _loc1_ + 1;
         if(this.lastShipFrame == this.shipClip.currentFrame)
         {
            return;
         }
         if(this.shipClip.framesLoaded > 1)
         {
            this.shipClip.gotoAndStop(this.lastShipFrame);
            if(this.isPoliceShip)
            {
               this.shipClip.light1.gotoAndStop(this.lastShipFrame);
               this.shipClip.light2.gotoAndStop(this.lastShipFrame);
            }
         }
         else if(!this.shipPattern.playLoop && this.shipPattern.rotatable)
         {
            this.shipClip.rotation = this._shipRotation;
         }
      }
      
      public function flashLights() : void
      {
         if(this.shipClip != null)
         {
            if(this.lightSetting == 0)
            {
               TweenLite.to(this.shipClip.light1,this.lightFlashTime,{"colorTransform":{
                  "tint":this.redColour,
                  "tintAmount":this.tintAmount
               }});
               TweenLite.to(this.shipClip.light1,this.lightFlashTime,{"glowFilter":{
                  "color":this.redColour,
                  "blurX":this.glowBlurX,
                  "blurY":this.glowBlurY,
                  "strength":this.glowStrength,
                  "alpha":this.glowAlpha
               }});
               TweenLite.to(this.shipClip.light2,this.lightFlashTime,{"colorTransform":{
                  "tint":this.blueColour,
                  "tintAmount":this.tintAmount
               }});
               TweenLite.to(this.shipClip.light2,this.lightFlashTime,{"glowFilter":{
                  "color":this.blueColour,
                  "blurX":this.glowBlurX,
                  "blurY":this.glowBlurY,
                  "strength":this.glowStrength,
                  "alpha":this.glowAlpha
               }});
               this.lightSetting = 1;
            }
            else if(this.lightSetting == 1)
            {
               TweenLite.to(this.shipClip.light2,this.lightFlashTime,{"colorTransform":{
                  "tint":this.redColour,
                  "tintAmount":this.tintAmount
               }});
               TweenLite.to(this.shipClip.light2,this.lightFlashTime,{"glowFilter":{
                  "color":this.redColour,
                  "blurX":this.glowBlurX,
                  "blurY":this.glowBlurY,
                  "strength":this.glowStrength,
                  "alpha":this.glowAlpha
               }});
               TweenLite.to(this.shipClip.light1,this.lightFlashTime,{"colorTransform":{
                  "tint":this.blueColour,
                  "tintAmount":this.tintAmount
               }});
               TweenLite.to(this.shipClip.light1,this.lightFlashTime,{"glowFilter":{
                  "color":this.blueColour,
                  "blurX":this.glowBlurX,
                  "blurY":this.glowBlurY,
                  "strength":this.glowStrength,
                  "alpha":this.glowAlpha
               }});
               this.lightSetting = 0;
            }
         }
         TweenMax.delayedCall(this.lightFlashTimeDelay,this.flashLights);
      }
      
      private function updateVisualExpansionRotation() : void
      {
         if(this.expansionContainer != null && this.expansionTypeID != 0 && this.expansionContainer.numChildren != 0)
         {
            MovieClip(this.expansionContainer.getChildAt(0)).gotoAndStop(this.lastShipFrame);
         }
      }
      
      private function updateVisualGlowRotation() : void
      {
         if(this.glowClip != null)
         {
            this.glowClip.gotoAndStop(this.lastShipFrame);
         }
      }
      
      public function getCurrentFrameOfShip() : int
      {
         if(this.shipClip != null)
         {
            return this.shipClip.currentFrame;
         }
         return 1;
      }
      
      public function getExpansionTypeID() : int
      {
         return this.expansionTypeID;
      }
      
      public function setExpansionTypeID(param1:int) : void
      {
         if(param1 > 3)
         {
            param1 = 3;
         }
         this.expansionTypeID = param1;
      }
      
      public function getExplosionContainer() : Sprite
      {
         return this.explosionContainer;
      }
      
      public function addShipDamage(param1:String) : void
      {
         var _loc2_:ExplosionPattern = null;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:MovieClip = null;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         var _loc8_:int = 0;
         var _loc9_:ShipDamage = null;
         var _loc10_:Number = NaN;
         var _loc11_:MovieClip = null;
         switch(param1)
         {
            case "L":
            case "ECI":
            case "SIN":
               _loc3_ = Main.getRandomCount(0,2);
               _loc2_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_LASER_DAMAGE,_loc3_);
               break;
            case "R":
               _loc2_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_ROCKET_DAMAGE,this.shipPattern.getRocketDamageTypeID());
               break;
            case "I":
               _loc3_ = Main.getRandomCount(0,2);
               _loc2_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_LASER_DAMAGE,_loc3_);
               break;
            case "M":
               _loc2_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_ROCKET_DAMAGE,this.shipPattern.getRocketDamageTypeID());
               break;
            case "P":
               _loc2_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_ROCKET_DAMAGE,2);
               break;
            case "H":
         }
         if(_loc2_ != null)
         {
            _loc4_ = _loc2_.getSoundID();
            if(_loc4_ != -1)
            {
               AudioManager.playSoundEffect(_loc4_,false,false,this.clipContainer.x,this.clipContainer.y);
            }
            _loc5_ = ResourceManager.getMovieClip(_loc2_.getResKey(),"mc");
            if(this.shipContainer.numChildren != 0)
            {
               _loc11_ = MovieClip(this.shipContainer.getChildAt(0));
               _loc6_ = _loc11_.width / 2 - 5;
            }
            _loc7_ = Main.getRandomCount(0,360);
            _loc8_ = Main.getRandomCount(0,_loc6_);
            _loc10_ = 1.7;
            switch(param1)
            {
               case "L":
               case "ECI":
               case "SIN":
                  _loc9_ = new ShipDamage(this,_loc5_,_loc7_,_loc8_,true);
                  break;
               case "R":
                  _loc9_ = new ShipDamage(this,_loc5_,_loc7_,_loc8_);
                  break;
               case "I":
                  _loc9_ = new ShipDamage(this,_loc5_,_loc7_,_loc8_,true);
                  this.map.getMain().screenManager.shakeScreen();
                  AudioManager.playSoundEffect(7);
                  break;
               case "M":
                  _loc9_ = new ShipDamage(this,_loc5_,_loc7_,_loc8_);
                  _loc10_ = 0.8;
                  break;
               case "P":
                  _loc9_ = new ShipDamage(this,_loc5_,0,0);
                  break;
               case "H":
                  break;
               default:
                  return;
            }
            _loc9_.positionClip();
            _loc9_.playClip();
         }
      }
      
      public function getLastShoot() : int
      {
         return this.lastShoot;
      }
      
      public function setLastShoot(param1:int) : void
      {
         this.lastShoot = param1;
      }
      
      public function showRepairRobot(param1:int) : void
      {
         var _loc2_:ResourcePattern = null;
         var _loc3_:SWFFinisher = null;
         if(this.repairRobotClip == null)
         {
            _loc2_ = PatternManager.robotPatterns[int(param1)];
            _loc3_ = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc2_.getResKey()));
            this.repairRobotClip = MovieClip(_loc3_.getEmbededMovieClip("mc"));
            this.clipContainer.addChild(this.repairRobotClip);
         }
         if(!this.clipContainer.contains(this.repairRobotClip))
         {
            this.repairRobotClip.alpha = 0;
            this.repairRobotClip.robot.gotoAndStop(1);
            this.repairRobotClip.robot.play();
            this.clipContainer.addChild(this.repairRobotClip);
            TweenLite.to(this.repairRobotClip,0.25,{"alpha":1});
         }
         if(this.repairSound == null)
         {
            this.repairSound = AudioManager.playSoundEffect(35,true);
         }
      }
      
      public function hideRepairRobot() : void
      {
         if(this.repairRobotClip != null && this.clipContainer.contains(this.repairRobotClip))
         {
            TweenLite.to(this.repairRobotClip,0.25,{
               "alpha":0,
               "onComplete":this.handleRobotRemove
            });
         }
         if(this.repairSound != null)
         {
            AudioManager.removeLoop(this.repairSound,false);
            this.repairSound = null;
         }
      }
      
      public function showBattleRepairBot(param1:int) : void
      {
         var _loc2_:ResourcePattern = null;
         var _loc3_:SWFFinisher = null;
         if(this.battleRepairRobotClip == null)
         {
            _loc2_ = PatternManager.robotPatterns[int(param1)];
            _loc3_ = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc2_.getResKey()));
            this.battleRepairRobotClip = MovieClip(_loc3_.getEmbededMovieClip("mc"));
            this.clipContainer.addChild(this.battleRepairRobotClip);
         }
         if(!this.clipContainer.contains(this.battleRepairRobotClip))
         {
            this.battleRepairRobotClip.alpha = 0;
            this.battleRepairRobotClip.robot.gotoAndStop(1);
            this.battleRepairRobotClip.robot.play();
            this.clipContainer.addChild(this.battleRepairRobotClip);
            TweenLite.to(this.battleRepairRobotClip,0.25,{"alpha":1});
         }
         if(this.repairSound == null)
         {
            this.repairSound = AudioManager.playSoundEffect(35,true);
         }
      }
      
      public function hideBattleRepairBot() : void
      {
         if(this.battleRepairRobotClip != null && this.clipContainer.contains(this.battleRepairRobotClip))
         {
            TweenLite.to(this.battleRepairRobotClip,0.25,{
               "alpha":0,
               "onComplete":this.handleBattleRepRobotRemove
            });
         }
         if(this.repairSound != null)
         {
            AudioManager.removeLoop(this.repairSound,false);
            this.repairSound = null;
         }
      }
      
      private function handleBattleRepRobotRemove() : void
      {
         this.clipContainer.removeChild(this.battleRepairRobotClip);
         this.battleRepairRobotClip = null;
      }
      
      private function handleRobotRemove() : void
      {
         this.clipContainer.removeChild(this.repairRobotClip);
         this.repairRobotClip = null;
      }
      
      public function hasWarnIconOnMap() : Boolean
      {
         return this.warnIconOnMap;
      }
      
      public function get isGroupMember() : Boolean
      {
         return this._isGroupMember;
      }
      
      public function getMaxHitpoints() : Number
      {
         return this.maxHitpoints;
      }
      
      public function updateHitpointShieldBar(param1:Boolean = false) : void
      {
         var _loc2_:Number = NaN;
         var _loc3_:Number = NaN;
         var _loc4_:Number = NaN;
         if(this.hitpoints > this.maxHitpoints * 2)
         {
            this.hitpoints = this.maxHitpoints * 2;
         }
         if(this.hitpointLabel != null)
         {
            this.hitpointLabel.text = BPLocale.roundInteger(this.hitpoints);
            this.hitpointShadowLabel.text = this.hitpointLabel.text;
         }
         if(this.hitpoints > this.maxHitpoints)
         {
            this.extraHitpoints = this.hitpoints - this.maxHitpoints;
         }
         else
         {
            this.extraHitpoints = 0;
         }
         if(this.shipPattern.isEnergyVisible())
         {
            if(this.maxShield != 0)
            {
               if(this.shield == 0)
               {
                  this.shieldClip.width = 0;
                  this.shieldClip.visible = false;
                  this.shieldBackgroundClip.visible = false;
               }
               else
               {
                  this.shieldClip.visible = true;
                  this.shieldBackgroundClip.visible = true;
                  if(this.shield > this.maxShield)
                  {
                     this.maxShield = this.shield;
                  }
                  _loc2_ = 50 / this.maxShield * this.shield;
                  if(param1)
                  {
                     TweenLite.to(this.shieldClip,0.25,{"width":_loc2_});
                  }
                  else
                  {
                     this.shieldClip.width = _loc2_;
                  }
               }
            }
            if(this.extraHitpoints != 0)
            {
               if(this.clipContainer.contains(this.extraHitpointClip))
               {
                  this.clipContainer.setChildIndex(this.extraHitpointClip,this.clipContainer.numChildren - 1);
               }
               this.extraHitpointClip.visible = true;
               _loc3_ = this.extraHitpoints / this.maxHitpoints * 50;
               if(param1)
               {
                  TweenLite.to(this.extraHitpointClip,0.25,{"width":_loc3_});
               }
               else
               {
                  this.extraHitpointClip.width = _loc3_;
               }
               this.hitpointClip.width = 50;
               return;
            }
            if(this.clipContainer.contains(this.extraHitpointClip))
            {
               this.clipContainer.setChildIndex(this.extraHitpointClip,0);
            }
            this.extraHitpointClip.visible = false;
            this.extraHitpointClip.width = 0;
            if(this.hitpoints == 0)
            {
               this.hitpointClip.width = 0;
               this.hitpointClip.visible = false;
            }
            else
            {
               this.hitpointClip.visible = true;
               _loc4_ = 50 / this.maxHitpoints * this.hitpoints;
               if(param1)
               {
                  TweenLite.to(this.hitpointClip,0.25,{"width":_loc4_});
               }
               else
               {
                  this.hitpointClip.width = _loc4_;
               }
            }
         }
      }
      
      public function getHitpoints() : Number
      {
         return this.hitpoints;
      }
      
      public function setHitpoints(param1:Number) : void
      {
         this.hitpoints = param1;
         if(this.isHeroShip())
         {
            this.map.getMain().getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_0,SimpleElement.TYPE_HITPOINTS);
         }
      }
      
      public function getShield() : int
      {
         return this.shield;
      }
      
      public function setShieldChunk(param1:Number, param2:Number, param3:Boolean = false) : void
      {
         this.shield = param1;
         if(param1 > param2)
         {
            param2 = param1;
         }
         this.maxShield = param2;
         if(param3)
         {
            this.map.getMain().getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_0,SimpleElement.TYPE_SHIELD);
         }
         this.updateHitpointShieldBar(false);
      }
      
      public function setShield(param1:Number) : void
      {
         this.shield = param1;
         if(this.isHeroShip())
         {
            this.map.getMain().getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_0,SimpleElement.TYPE_SHIELD);
         }
      }
      
      public function setMaxShield(param1:Number) : void
      {
         if(this.shield > param1)
         {
            param1 = this.shield;
         }
         this.maxShield = param1;
         if(this.isHeroShip())
         {
            this.map.getMain().getGuiManager().updateInfoField(SimpleWindow.WINDOW_CLASS_SHIP,SimpleContainer.CONTAINER_CLASS_HERO_INFO_0,SimpleElement.TYPE_SHIELD);
         }
      }
      
      public function getMaxShield() : Number
      {
         return this.maxShield;
      }
      
      public function getCargo() : Number
      {
         return this.cargo;
      }
      
      public function getMaxCargo() : Number
      {
         return this.maxCargo;
      }
      
      public function getShipContainer() : Sprite
      {
         return this.shipContainer;
      }
      
      public function getExpansionContainer() : Sprite
      {
         return this.expansionContainer;
      }
      
      public function setEngineSmokePattern(param1:EngineSmokePattern) : void
      {
         this.engineSmokePattern = param1;
      }
      
      public function setShipPattern(param1:ShipPattern) : void
      {
         this.shipPattern = param1;
      }
      
      public function setClanTag(param1:String) : void
      {
         this.clanTag = param1;
      }
      
      public function setClanID(param1:int) : void
      {
         this.clanID = param1;
      }
      
      public function setClanDiplomacy(param1:int) : void
      {
         this.clanDiplomacy = param1;
      }
      
      public function setFactionID(param1:int) : void
      {
         this.fractionID = param1;
      }
      
      public function setDailyRank(param1:int) : void
      {
         this.dailyRank = param1;
      }
      
      public function setWarnIconOnMap(param1:Boolean) : void
      {
         this.warnIconOnMap = param1;
      }
      
      public function set isGroupMember(param1:Boolean) : void
      {
         this._isGroupMember = param1;
      }
      
      public function setEnginePattern(param1:AudibleResourcePattern) : void
      {
         this.enginePattern = param1;
      }
      
      public function setShipGlowPattern(param1:ResourcePattern) : void
      {
         this.glowPattern = param1;
      }
      
      public function getGlowPattern() : ResourcePattern
      {
         return this.glowPattern;
      }
      
      public function getShipManager() : ShipManager
      {
         return this.shipManager;
      }
      
      public function attachBeaconClip(param1:Beacon) : void
      {
         this.beacon = param1;
         var _loc2_:DisplayObject = param1.clip;
         _loc2_.alpha = 0;
         this.clipContainer.addChild(param1.clip);
         ScreenManager.fadeInClip(0.25,_loc2_);
      }
      
      public function removeBeaconClip() : void
      {
         var _loc1_:DisplayObject = null;
         if(this.beacon != null)
         {
            _loc1_ = this.beacon.clip;
            ScreenManager.fadeOutClip(0.25,_loc1_);
         }
      }
      
      public function attachMalusClowdClip() : void
      {
         if(this.malusClip != null && !this.clipContainer.contains(this.malusClip))
         {
            this.clipContainer.addChild(this.malusClip);
            this.malusClip.alpha = 0;
            this.malusClip.doubleClickEnabled = true;
            this.malusClip.y = this.shipPattern.getLabelYOffset() * -1.5;
            ScreenManager.fadeInClip(0.25,this.malusClip);
         }
      }
      
      public function removeMalusCloudClip() : void
      {
         if(this.malusClip != null && this.clipContainer.contains(this.malusClip))
         {
            ScreenManager.fadeOutClip(0.25,this.malusClip);
         }
      }
      
      public function updateEngine() : void
      {
         var _loc1_:int = 0;
         var _loc2_:MovieClip = null;
         var _loc3_:int = 0;
         if(this.engines.length > 0)
         {
            if(this.movingCnt > 0)
            {
               this.shipContainer.y = 0;
               if(this.expansionContainer != null)
               {
                  this.expansionContainer.y = 0;
               }
               if(this.glowContainer != null)
               {
                  this.glowContainer.y = 0;
               }
               if(this.engineFrame > -1)
               {
                  --this.engineFrame;
                  if(this.userID == Hero.userID && this.engineChannel == null)
                  {
                     _loc1_ = this.enginePattern.getSoundID();
                     if(_loc1_ != -1)
                     {
                        this.engineChannel = AudioManager.playSoundEffect(_loc1_,true,true);
                     }
                  }
                  if(this.engineFrame < 16)
                  {
                     if(this.engineTimer != null && !this.engineTimer.running)
                     {
                        this.engineTimer.start();
                     }
                  }
               }
            }
            else
            {
               if(Settings.qualityShip == Settings.QUALITY_HIGH)
               {
                  this.whip();
               }
               if(this.engineFrame < 17)
               {
                  ++this.engineFrame;
                  if(this.userID == Hero.userID && this.engineChannel != null)
                  {
                     _loc1_ = this.enginePattern.getSoundID();
                     if(_loc1_ != -1)
                     {
                        AudioManager.removeLoop(this.engineChannel,true);
                        this.engineChannel = null;
                     }
                  }
                  if(this.engineFrame > 14)
                  {
                     if(this.engineTimer != null && this.engineTimer.running)
                     {
                        this.engineTimer.stop();
                     }
                  }
               }
            }
            for each(_loc2_ in this.engines)
            {
               if(this.isDebuffed)
               {
                  _loc3_ = Math.round(2 * (_loc2_.framesLoaded / 3));
                  if(this.engineFrame <= _loc3_)
                  {
                     this.engineFrame = _loc3_;
                  }
               }
               _loc2_.gotoAndStop(this.engineFrame);
            }
         }
         if(this.movingCnt > 0)
         {
            --this.movingCnt;
            if(this.movingCnt == 0)
            {
               this.handleIsStopping();
            }
         }
      }
      
      public function getBeacon() : Beacon
      {
         return this.beacon;
      }
      
      public function whip() : void
      {
         var _loc1_:int = 0;
         this.shipContainer.y += 0.15 * Math.cos(this.whipCounter * 0.1);
         if(this.expansionContainer != null)
         {
            this.expansionContainer.y = this.shipContainer.y;
         }
         if(this.glowContainer != null)
         {
            this.glowContainer.y = this.shipContainer.y;
         }
         this.whipCounter += 0.5;
         if(this.whipCounter > 10000)
         {
            this.whipCounter = 0;
            this.shipContainer.y = 0;
            if(this.expansionContainer != null)
            {
               this.expansionContainer.y = 0;
            }
            if(this.glowContainer != null)
            {
               this.glowContainer.y = 0;
            }
         }
         if(!this.shipPattern.playLoop && this.userID != Hero.userID)
         {
            if(int(this.whipCounter) % this.shipPattern.getSeekInterval() == 0)
            {
               if(!this.map.getCombatManager().isShipAttacking(this.userID))
               {
                  _loc1_ = Main.getRandomCount(0,360);
                  if(this.oldSeekRotation - _loc1_ > 20)
                  {
                     TweenMax.to(this,0.25,{"shortRotation":{"shipRotation":_loc1_}});
                  }
                  this.oldSeekRotation = _loc1_;
               }
            }
         }
      }
      
      public function getAttackerID() : int
      {
         return this.attackerID;
      }
      
      public function getDroneDisplayClipContainer() : Sprite
      {
         return this.droneDisplayClipContainer;
      }
      
      public function getExpansionPattern() : ExpansionPattern
      {
         return this.expansionPattern;
      }
      
      public function setCCPositionToRealPosition() : void
      {
         this.clipContainer.x = this.heroProxy.x;
         this.clipContainer.y = this.heroProxy.y;
      }
      
      public function setCCPositionToFakePosition() : void
      {
         this.heroProxy.x = this.clipContainer.x;
         this.heroProxy.y = this.clipContainer.y;
         this.clipContainer.x = ScreenManager.getHalfScreenWidth();
         this.clipContainer.y = ScreenManager.getHalfScreenHeight();
      }
      
      public function set x(param1:Number) : void
      {
         if(param1 == this.x)
         {
            return;
         }
         if(this.movingCnt < this.maxMovingCnt)
         {
            ++this.movingCnt;
         }
         if(this.heroProxy != null && ScreenManager.cameraLock == ScreenManager.CAMERA_LOCKED_TO_HERO)
         {
            this.heroProxy.x = param1;
         }
         else
         {
            this.clipContainer.x = param1;
         }
      }
      
      public function set y(param1:Number) : void
      {
         if(param1 == this.y)
         {
            return;
         }
         if(this.movingCnt == 0)
         {
            this.handleIsStarting();
         }
         if(this.movingCnt < this.maxMovingCnt)
         {
            ++this.movingCnt;
         }
         if(this.heroProxy != null && ScreenManager.cameraLock == ScreenManager.CAMERA_LOCKED_TO_HERO)
         {
            this.heroProxy.y = param1;
         }
         else
         {
            this.clipContainer.y = param1;
         }
      }
      
      public function get x() : Number
      {
         if(this.heroProxy != null && ScreenManager.cameraLock == ScreenManager.CAMERA_LOCKED_TO_HERO)
         {
            return this.heroProxy.x;
         }
         return this.clipContainer.x;
      }
      
      public function get y() : Number
      {
         if(this.heroProxy != null && ScreenManager.cameraLock == ScreenManager.CAMERA_LOCKED_TO_HERO)
         {
            return this.heroProxy.y;
         }
         return this.clipContainer.y;
      }
      
      public function showShield(param1:int) : void
      {
         AudioManager.playSoundEffect(37);
         var _loc2_:MovieClip = ResourceManager.getMovieClip("shield" + param1,"mc");
         var _loc3_:BitmapClip = new BitmapClip(_loc2_,"shield" + param1);
         this.updateShieldSize(_loc3_);
         _loc3_.x = -_loc3_.width * 0.5;
         _loc3_.y = -_loc3_.height * 0.5;
         _loc3_.alpha = 0;
         this.clipContainer.addChild(_loc3_);
         ScreenManager.playAnimation(_loc3_,15,true);
         TweenLite.to(_loc3_,0.25,{
            "alpha":1,
            "onComplete":this.handleShield,
            "onCompleteParams":[this.clipContainer,_loc3_]
         });
      }
      
      private function updateShieldSize(param1:BitmapClip) : void
      {
         var _loc2_:MovieClip = null;
         var _loc3_:int = 0;
         var _loc4_:Number = NaN;
         if(param1 != null && this.shipContainer.numChildren > 0)
         {
            _loc2_ = MovieClip(this.shipContainer.getChildAt(0));
            _loc3_ = _loc2_.width / 2;
            if(_loc2_.height > _loc2_.width)
            {
               _loc3_ = _loc2_.height / 2;
            }
            _loc4_ = _loc3_ / 65;
            param1.scaleX = _loc4_;
            param1.scaleY = _loc4_;
         }
      }
      
      private function handleShield(param1:Sprite, param2:DisplayObject) : void
      {
         TweenMax.delayedCall(1,this.handleFadeOutShield,[param1,param2]);
      }
      
      private function handleFadeOutShield(param1:Sprite, param2:DisplayObject) : void
      {
         TweenLite.to(param2,0.25,{
            "alpha":0,
            "onComplete":this.handleRemoveShieldClip,
            "onCompleteParams":[param1,param2]
         });
      }
      
      private function handleRemoveShieldClip(param1:Sprite, param2:DisplayObject) : void
      {
         if(param1.contains(param2))
         {
            param1.removeChild(param2);
            TweenLite.killTweensOf(param2,true);
         }
         if(this.shield == 0)
         {
            Hero.showSkinShieldRandomly = false;
         }
         TweenMax.killDelayedCallsTo(this.showShield);
         if(this.isHeroShip() && Hero.showSkinShieldRandomly)
         {
            TweenMax.delayedCall(Main.getRandomCount(Hero.minSkinShieldTwinkle,Hero.maxSkinShieldTwinkle),this.showShield,[0]);
         }
      }
      
      private function handleIsStarting() : void
      {
         this.isMoving = true;
         if(this.isDebuffed)
         {
            this.updateDebuff();
         }
      }
      
      private function handleIsStopping() : void
      {
         this.isMoving = false;
         if(this.isDebuffed)
         {
            this.updateDebuff();
         }
      }
      
      public function updateShieldTwinkle() : void
      {
         TweenMax.killDelayedCallsTo(this.showShield);
         if(Hero.showSkinShieldRandomly)
         {
            this.showShield(0);
         }
      }
      
      public function stopSirenAnimations() : void
      {
         if(this.shipClip != null)
         {
            this.shipClip.light1.stop();
            this.shipClip.light2.stop();
         }
      }
      
      public function get debuffMove() : MovieClip
      {
         return this._debuffMove;
      }
      
      public function set debuffMove(param1:MovieClip) : void
      {
         this._debuffMove = param1;
         if(this._debuffMove != null)
         {
            this._debuffMove.rotation = this._shipRotation - 90;
         }
      }
      
      public function setIdle(param1:Boolean) : void
      {
         this.idleState = param1;
      }
      
      public function get debuffStop() : MovieClip
      {
         return this._debuffStop;
      }
      
      public function set debuffStop(param1:MovieClip) : void
      {
         this._debuffStop = param1;
         if(this._debuffStop != null)
         {
            this._debuffStop.rotation = this._shipRotation - 90;
         }
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   import flash.display.Sprite;
   import net.bigpoint.darkorbit.ship.pet.Pet;
   
   public class Ship extends MapObject
   {
      
      public var pet:Pet;
      
      public function Ship(param1:ShipManager, param2:int, param3:String, param4:Sprite)
      {
         super(param1,param2,param3,param4);
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   import com.greensock.TweenLite;
   import flash.display.MovieClip;
   
   public class ShipDamage
   {
      
      private var ship:MapObject;
      
      private var clip:MovieClip;
      
      private var rotation:int;
      
      private var distance:int;
      
      private var autoRotate:Boolean;
      
      public function ShipDamage(param1:MapObject, param2:MovieClip, param3:int, param4:int, param5:Boolean = false)
      {
         super();
         this.ship = param1;
         this.clip = param2;
         this.clip.cacheAsBitmap = true;
         this.rotation = param3;
         this.distance = param4;
         this.autoRotate = param5;
      }
      
      public function positionClip() : void
      {
         this.clip.x = int(this.distance * Math.cos((this.ship.shipRotation + this.rotation) * Math.PI / 180));
         this.clip.y = int(this.distance * Math.sin((this.ship.shipRotation + this.rotation) * Math.PI / 180));
      }
      
      public function playClip() : void
      {
         if(this.ship.getExplosionContainer().numChildren > 0)
         {
            this.ship.getExplosionContainer().removeChildAt(0);
         }
         this.ship.getExplosionContainer().addChild(this.clip);
         TweenLite.to(this.clip,0.5,{
            "frame":this.clip.framesLoaded,
            "onComplete":this.onAnimationFinish,
            "onCompleteParams":[this.clip]
         });
      }
      
      private function onAnimationFinish(param1:MovieClip) : void
      {
         if(this.ship != null && this.ship.getExplosionContainer().contains(param1))
         {
            this.ship.getExplosionContainer().removeChild(param1);
         }
      }
      
      public function isAutoRotate() : Boolean
      {
         return this.autoRotate;
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.plugins.ColorTransformPlugin;
   import com.greensock.plugins.TweenPlugin;
   import flash.display.MovieClip;
   import mx.logging.ILogger;
   import mx.logging.Log;
   
   public class ShipLightDecorator
   {
      
      public static const logger:ILogger = Log.getLogger("ShipLightDecorator");
      
      public var ship:MapObject;
      
      private var shipClip:MovieClip;
      
      private var lightSetting:int = 0;
      
      private var lightFlashTime:Number = 0.4;
      
      private const greenColour:uint = 65280;
      
      private const whiteColour:uint = 0;
      
      private const glowStrength:Number = 9;
      
      private const glowBlurX:Number = 10;
      
      private const glowBlurY:Number = 10;
      
      private const glowAlpha:Number = 0.4;
      
      private const tintAmount:Number = 0.7;
      
      private const lightFlashTimeDelay:Number = 0.6;
      
      public var numberOfFlashes:int = -1;
      
      public function ShipLightDecorator(param1:MapObject)
      {
         super();
         this.ship = param1;
         TweenPlugin.activate([ColorTransformPlugin]);
      }
      
      public function startFlashes(param1:int) : void
      {
         this.numberOfFlashes = param1;
         this.shipClip = this.ship.shipClip.light;
         this.flashLights();
      }
      
      public function flashLights() : void
      {
         --this.numberOfFlashes;
         if(this.ship.shipClip != null)
         {
            if(this.lightSetting == 0)
            {
               TweenLite.to(this.shipClip,this.lightFlashTime,{"colorTransform":{
                  "tint":this.greenColour,
                  "tintAmount":this.tintAmount
               }});
               TweenLite.to(this.shipClip,this.lightFlashTime,{"glowFilter":{
                  "color":this.greenColour,
                  "blurX":this.glowBlurX,
                  "blurY":this.glowBlurY,
                  "strength":this.glowStrength,
                  "alpha":this.glowAlpha
               }});
               this.lightSetting = 1;
            }
            else if(this.lightSetting == 1)
            {
               TweenLite.to(this.shipClip,this.lightFlashTime,{"colorTransform":{
                  "tint":this.whiteColour,
                  "tintAmount":0
               }});
               TweenLite.to(this.shipClip,this.lightFlashTime,{"glowFilter":{
                  "color":this.whiteColour,
                  "blurX":0,
                  "blurY":0,
                  "strength":0,
                  "alpha":0
               }});
               this.lightSetting = 0;
            }
         }
         if(this.numberOfFlashes > -1)
         {
            TweenMax.delayedCall(this.lightFlashTimeDelay,this.flashLights);
         }
      }
      
      public function updateGraphicRotation() : void
      {
         this.ship.updateVisualShipRotation();
         this.ship.shipClip.light.gotoAndStop(this.ship.lastShipFrame);
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import flash.display.MovieClip;
   import flash.events.TimerEvent;
   import flash.media.SoundChannel;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.EventManager;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.collectable.Beacon;
   import net.bigpoint.darkorbit.collectable.CollectablePattern;
   import net.bigpoint.darkorbit.combat.ExplosionPattern;
   import net.bigpoint.darkorbit.fireworks.Shockwave;
   import net.bigpoint.darkorbit.lazyload.AssetLazyLoader;
   import net.bigpoint.darkorbit.lazyload.LazyLoadEvent;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.net.ServerCommands;
   import net.bigpoint.darkorbit.pattern.AudibleResourcePattern;
   import net.bigpoint.darkorbit.pattern.OrePattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.pet.Pet;
   
   public class ShipManager
   {
      
      private var ships:Array;
      
      private var shipResourceQueue:Array = [];
      
      private var glowResourceQueue:Array = [];
      
      private var expansionResourceQueue:Array = [];
      
      private var map:Map;
      
      public var smID:int;
      
      private var motionTimer:Timer;
      
      private var shipFinishers:Array = [];
      
      private var expansionFinishers:Array = [];
      
      private var rageSound:SoundChannel;
      
      private var _userID:int;
      
      private var loader:AssetLazyLoader;
      
      private var invincibility:MovieClip;
      
      private var invFinisher:SWFFinisher;
      
      private var shieldLoaded:Boolean = false;
      
      public function ShipManager(param1:Map)
      {
         super();
         this.smID = param1.getMapID();
         this.map = param1;
         this.ships = [];
         this.shipResourceQueue = [];
         this.glowResourceQueue = [];
         this.expansionResourceQueue = [];
         this.motionTimer = new Timer(25,0);
         this.motionTimer.addEventListener(TimerEvent.TIMER,this.onMotionTimer);
         this.motionTimer.start();
      }
      
      public function getPet(param1:int) : Pet
      {
         var _loc2_:MapObject = this.ships[int(param1)];
         if(!(_loc2_ is Pet) || _loc2_ == null)
         {
            _loc2_ = null;
         }
         return Pet(_loc2_);
      }
      
      public function getPetByOwnerID(param1:int) : Pet
      {
         var _loc2_:Pet = null;
         var _loc3_:Pet = null;
         var _loc4_:int = 0;
         while(_loc4_ < this.ships.length)
         {
            if(this.ships[_loc4_] is Pet)
            {
               _loc2_ = this.ships[_loc4_] as Pet;
               if(_loc2_ != null && _loc2_.owner == param1)
               {
                  return _loc2_;
               }
            }
            _loc4_++;
         }
         return _loc3_;
      }
      
      public function createPet(param1:int, param2:int, param3:int, param4:int, param5:int, param6:int, param7:String, param8:int, param9:int, param10:int, param11:String, param12:int, param13:String = "") : Pet
      {
         if(!this.map.valid)
         {
            return null;
         }
         var _loc14_:Pet = this.getPet(param2);
         if(_loc14_ != null)
         {
            if(_loc14_.shipPattern.getPatternID() == param1)
            {
               return _loc14_ as Pet;
            }
            this.removeOpponentShip(param2,false);
         }
         var _loc15_:ShipPattern = PatternManager.shipPatterns[param1];
         if(_loc15_ == null)
         {
            _loc15_ = PatternManager.shipPatterns[4];
            param7 = "! PET TYPE " + param1 + " NOT DEFINED !";
         }
         var _loc16_:AudibleResourcePattern = PatternManager.enginePatterns[_loc15_.getEngineTypeID()];
         var _loc17_:EngineSmokePattern = PatternManager.engineSmokePatterns[_loc15_.getEngineSmokeID()];
         var _loc18_:ResourcePattern = PatternManager.shipGlowPatterns[_loc15_.getGlowID()];
         var _loc19_:Pet = new Pet(this,param2,param7,param3,param8,this.getMap().getMain().screenManager.getLaserLayer());
         _loc19_.shipPattern = _loc15_;
         _loc19_.owner = param3;
         _loc19_.setEnginePattern(_loc16_);
         _loc19_.setEngineSmokePattern(_loc17_);
         _loc19_.setShipGlowPattern(_loc18_);
         _loc19_.setClanTag(param11);
         _loc19_.setClanID(param10);
         _loc19_.setClanDiplomacy(param12);
         _loc19_.setFactionID(param9);
         _loc19_.setSpeed(param6);
         _loc19_.createContainers();
         this.ships[int(param2)] = _loc19_;
         _loc19_.updateLabel(param13);
         _loc19_.updateShipClip();
         _loc19_.updateExpansionClip();
         _loc19_.setClipPosition(param4,param5);
         if(Settings.qualityEngine == Settings.QUALITY_HIGH)
         {
            _loc19_.startEngineTimer();
         }
         this.map.getMain().screenManager.getPetLayer().addChild(_loc19_.getClipContainer());
         return _loc19_;
      }
      
      public function destroyPet(param1:int) : void
      {
         this.removeOpponentShip(param1);
         var _loc2_:Pet = this.getHero().pet;
         if(_loc2_ != null && param1 == _loc2_.userID)
         {
            this.getHero().pet = null;
         }
      }
      
      private function onMotionTimer(param1:TimerEvent = null) : void
      {
         var _loc2_:MapObject = null;
         for each(_loc2_ in this.ships)
         {
            if(_loc2_.shipPattern.enginePositionClassID != -1)
            {
               _loc2_.updateEngine();
            }
         }
      }
      
      public function attachBeaconToShip(param1:int, param2:int) : void
      {
         var _loc3_:MapObject = this.getShip(param1);
         var _loc4_:CollectablePattern = PatternManager.getCollectablePattern(CollectablePattern.TYPE_BEACON,param2);
         var _loc5_:Beacon = new Beacon(param2,_loc4_,"-",0,0);
         var _loc6_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc4_.getResKey()));
         var _loc7_:MovieClip = MovieClip(_loc6_.getEmbededMovieClip("mc"));
         _loc7_.y = -30;
         ScreenManager.playAnimation(_loc7_,30,true);
         _loc5_.clip = _loc7_;
         _loc3_.attachBeaconClip(_loc5_);
      }
      
      public function removeBeaconFromShip(param1:int) : void
      {
         var _loc2_:MapObject = this.getShip(param1);
         if(_loc2_ != null)
         {
            _loc2_.removeBeaconClip();
         }
      }
      
      public function setDisplayDamageBar(param1:Boolean) : void
      {
         var _loc2_:MapObject = null;
         for each(_loc2_ in this.ships)
         {
            _loc2_.setDamageBarVisibility(param1);
         }
      }
      
      public function getHero() : Ship
      {
         return this.ships[Hero.userID] as Ship;
      }
      
      public function removeTweens(param1:int) : void
      {
         var _loc2_:MapObject = this.getShip(param1);
         if(_loc2_ != null)
         {
            TweenMax.killTweensOf(_loc2_.getClipContainer());
         }
      }
      
      public function getShips() : Array
      {
         return this.ships;
      }
      
      public function updateLabels() : void
      {
         var _loc1_:MapObject = null;
         for each(_loc1_ in this.ships)
         {
            _loc1_.updateLabel();
         }
      }
      
      public function updateLabelVisibility() : void
      {
         var _loc1_:MapObject = null;
         for each(_loc1_ in this.ships)
         {
            _loc1_.updateLabelVisibility();
         }
      }
      
      public function removeHeroShip() : void
      {
         this.removeTweens(Hero.userID);
         this.map.getMain().setScheduledDisconnect(true);
         this.map.getMain().getGuiManager().stopWarningTimer();
         var _loc1_:MapObject = this.getShip(Hero.userID);
         _loc1_.cleanup();
         this.map.getCombatManager().removeLaserAttack(Hero.userID);
         this.map.getCombatManager().removeLaserAttackTo(Hero.userID);
         this.map.getCombatManager().removeRocketAttackTo(Hero.userID);
         if(ScreenManager.cameraLock == ScreenManager.CAMERA_LOCKED_TO_HERO)
         {
            this.map.getMain().screenManager.getHeroLayer().removeChild(_loc1_.getClipContainer());
         }
         else
         {
            this.map.getMain().screenManager.getShipLayer().removeChild(_loc1_.getClipContainer());
         }
         this.map.getMain().getGuiManager().showRadiationWarning(false);
         this.map.getMain().screenManager.hero = null;
      }
      
      public function destroyHero() : void
      {
         this.map.getMain().getGuiManager().createEndSequence();
      }
      
      public function removeOpponentShip(param1:int, param2:Boolean = false) : void
      {
         var _loc3_:ShipPattern = null;
         var _loc4_:ExplosionPattern = null;
         var _loc5_:MapObject = null;
         var _loc7_:EventManager = null;
         var _loc8_:Shockwave = null;
         this.removeTweens(param1);
         var _loc6_:MapObject = this.ships[param1];
         if(_loc6_ != null)
         {
            if(_loc6_.numberChainsInvolvedIn > 0)
            {
               _loc6_.isDestroyed = true;
               _loc6_.displaysExplosion = _loc6_.displaysExplosion || param2;
               return;
            }
            _loc7_ = this.map.getEventManager();
            if(_loc7_.heroLockToTarget == _loc6_)
            {
               _loc7_.heroLockToTarget = null;
            }
            _loc3_ = _loc6_.shipPattern;
            this.map.getMain().getGuiManager().getMenuManager().checkLaserToggleButton(_loc6_);
            _loc6_.setSelected(false);
            _loc6_.cleanup();
            this.map.getCombatManager().removeLaserAttack(_loc6_.getUserId());
            this.map.getCombatManager().removeLaserAttackTo(_loc6_.getUserId());
            this.map.getCombatManager().removeRocketAttackTo(_loc6_.getUserId());
            if(_loc6_ is Pet)
            {
               this.map.getMain().screenManager.getPetLayer().removeChild(_loc6_.getClipContainer());
            }
            else
            {
               this.map.getMain().screenManager.getShipLayer().removeChild(_loc6_.getClipContainer());
            }
            delete this.ships[param1];
            if(param2 && Settings.qualityExplosion >= Settings.QUALITY_MEDIUM)
            {
               _loc4_ = PatternManager.getPyroPattern(ExplosionPattern.TYPE_SHIP_EXPLOSION,_loc6_.explodeTypeID);
               this.map.getCombatManager().showPyroEffect(_loc6_.x,_loc6_.y,_loc4_,37,true);
               if(_loc4_.displayShockwave)
               {
                  this.map.getMain().screenManager.flashScreen(16777215,0.75,0.25,2);
                  _loc8_ = new Shockwave(this.map,_loc6_.shipPattern.shockwaveID);
                  AudioManager.playSoundEffect(18,false,false,_loc6_.x,_loc6_.y);
                  _loc8_.impact(_loc6_.x,_loc6_.y);
                  if(_loc8_.shakeScreen)
                  {
                     this.map.getMain().screenManager.shakeScreen();
                  }
               }
            }
         }
      }
      
      public function cleanup() : void
      {
         var _loc1_:MapObject = null;
         for each(_loc1_ in this.ships)
         {
            _loc1_.cleanup();
            if(_loc1_.getUserId() == Hero.userID && ScreenManager.cameraLock == ScreenManager.CAMERA_LOCKED_TO_HERO)
            {
               this.map.getMain().screenManager.getHeroLayer().removeChild(_loc1_.getClipContainer());
            }
            else if(this.map.getMain().screenManager.getShipLayer().contains(_loc1_.getClipContainer()))
            {
               this.map.getMain().screenManager.getShipLayer().removeChild(_loc1_.getClipContainer());
            }
            else if(this.map.getMain().screenManager.getPetLayer().contains(_loc1_.getClipContainer()))
            {
               this.map.getMain().screenManager.getPetLayer().removeChild(_loc1_.getClipContainer());
            }
         }
         this.motionTimer.stop();
         this.motionTimer.removeEventListener(TimerEvent.TIMER,this.onMotionTimer);
         this.ships = [];
         this.shipResourceQueue = [];
         this.glowResourceQueue = [];
         this.expansionResourceQueue = [];
         this.map = null;
      }
      
      public function hitTest(param1:int, param2:int) : MapObject
      {
         var _loc3_:MapObject = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:Number = NaN;
         for each(_loc3_ in this.ships)
         {
            if(_loc3_.getUserId() != Hero.userID)
            {
               _loc4_ = _loc3_.shipPattern.getClickRadius();
               _loc4_ *= _loc4_;
               _loc5_ = _loc3_.shipPattern.getClickOffsetX();
               _loc6_ = _loc3_.shipPattern.getClickOffsetY();
               _loc7_ = Math.pow(_loc3_.y + _loc6_ - param2,2) + Math.pow(_loc3_.x + _loc5_ - param1,2);
               if(_loc7_ < _loc4_)
               {
                  return _loc3_;
               }
            }
         }
         return null;
      }
      
      public function mouseOverTest(param1:int, param2:int) : Boolean
      {
         var _loc4_:MapObject = null;
         var _loc3_:int = 50;
         for each(_loc4_ in this.ships)
         {
            if(_loc4_.getUserId() != Hero.userID)
            {
               if(_loc4_.x - _loc3_ < param1 && param1 < _loc4_.x + _loc3_ && _loc4_.y - _loc3_ < param2 && param2 < _loc4_.y + _loc3_)
               {
                  return true;
               }
            }
         }
         return false;
      }
      
      public function createShip(param1:int, param2:int, param3:int, param4:int, param5:int, param6:String, param7:String, param8:int, param9:int, param10:int, param11:int, param12:int, param13:Boolean, param14:int, param15:Boolean) : Ship
      {
         var _loc23_:ShipLightDecorator = null;
         if(!this.map.valid)
         {
            return null;
         }
         var _loc16_:MapObject = this.getShip(param2);
         if(_loc16_ != null)
         {
            if(_loc16_.shipPattern.getPatternID() == param1)
            {
               return _loc16_ as Ship;
            }
            if(_loc16_.isHeroShip())
            {
               this.removeHeroShip();
            }
            else
            {
               this.removeOpponentShip(param2,false);
            }
         }
         var _loc17_:ShipPattern = PatternManager.shipPatterns[param1];
         if(_loc17_ == null)
         {
            _loc17_ = PatternManager.shipPatterns[4];
            param6 = "! SHIP TYPE " + param1 + " NOT DEFINED !";
         }
         var _loc18_:AudibleResourcePattern = PatternManager.enginePatterns[_loc17_.getEngineTypeID()];
         var _loc19_:EngineSmokePattern = PatternManager.engineSmokePatterns[_loc17_.getEngineSmokeID()];
         var _loc20_:ResourcePattern = PatternManager.shipGlowPatterns[_loc17_.getGlowID()];
         var _loc21_:Ship = new Ship(this,param2,param6,this.getMap().getMain().screenManager.getLaserLayer());
         _loc21_.explodeTypeID = _loc17_.getExplodeTypeID();
         _loc21_.setShipPattern(_loc17_);
         _loc21_.setEnginePattern(_loc18_);
         _loc21_.setEngineSmokePattern(_loc19_);
         _loc21_.setShipGlowPattern(_loc20_);
         _loc21_.setSpeed(param5);
         _loc21_.setClanTag(param7);
         _loc21_.setClanID(param9);
         _loc21_.setClanDiplomacy(param10);
         _loc21_.setFactionID(param8);
         _loc21_.setDailyRank(param11);
         _loc21_.setWarnIconOnMap(param13);
         _loc21_.createContainers();
         _loc21_.galaxyGatesFinished = param14;
         _loc21_.setNPC(param15);
         if(!param15)
         {
            _loc21_.isGroupMember = this.map.getMain().getGroupManager().isGroupMember(param2);
         }
         this.ships[int(param2)] = _loc21_;
         _loc21_.updateLabel();
         _loc21_.updateShipClip();
         _loc21_.setExpansionTypeID(param12);
         _loc21_.updateExpansionClip();
         _loc21_.setClipPosition(param3,param4);
         if(Settings.qualityEngine == Settings.QUALITY_HIGH)
         {
            _loc21_.startEngineTimer();
         }
         var _loc22_:* = param2 == Hero.userID;
         if(_loc22_)
         {
            this.map.getMain().screenManager.hero = _loc21_;
            if(ScreenManager.cameraLock == ScreenManager.CAMERA_LOCKED_TO_HERO)
            {
               this.map.getMain().screenManager.getHeroLayer().addChild(_loc21_.getClipContainer());
            }
            else
            {
               this.map.getMain().screenManager.getShipLayer().addChild(_loc21_.getClipContainer());
            }
         }
         else
         {
            this.map.getMain().screenManager.getShipLayer().addChild(_loc21_.getClipContainer());
         }
         if(param1 == 98)
         {
            _loc21_.isPoliceShip = true;
            _loc21_.stopSirenAnimations();
            _loc21_.flashLights();
         }
         else if(param1 == 63)
         {
            _loc23_ = new ShipLightDecorator(_loc21_);
            _loc21_.shipLightDecorator = _loc23_;
            _loc21_.updateStandardVisualShipRotation = _loc23_.updateGraphicRotation;
            _loc21_.updateStandardVisualShipRotation();
         }
         return _loc21_;
      }
      
      public function loadExpansionResource(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this.expansionResourceQueue.length)
         {
            if(this.expansionResourceQueue[_loc2_] == param1)
            {
               return;
            }
            _loc2_++;
         }
         this.expansionResourceQueue.push(param1);
         ResourceManager.fileCollection.load(param1,this.handleExpansionResourceLoaded);
      }
      
      public function lazyLoadExpansionResource(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this.expansionResourceQueue.length)
         {
            if(this.expansionResourceQueue[_loc2_] == param1)
            {
               return;
            }
            _loc2_++;
         }
         this.expansionResourceQueue.push(param1);
         var _loc3_:AssetLazyLoader = new AssetLazyLoader();
         if(!ResourceManager.fileCollection.isLoaded(param1))
         {
            _loc3_.addEventListener(AssetLazyLoader.ASSET_LOADED,this.handleExpansionResourceLoaded);
            _loc3_.loadAsset(param1);
         }
         else
         {
            this.handleExpansionResourceLoaded(null);
         }
      }
      
      private function handleExpansionResourceLoaded(param1:LazyLoadEvent) : void
      {
         var _loc3_:SWFFinisher = null;
         var _loc4_:MapObject = null;
         var _loc5_:ShipPattern = null;
         var _loc6_:ExpansionPattern = null;
         var _loc7_:MovieClip = null;
         var _loc2_:String = param1.resKey;
         for each(_loc4_ in this.ships)
         {
            if(_loc4_.expansionTypeID > 0)
            {
               _loc5_ = _loc4_.shipPattern;
               if(_loc5_.hasExpansion())
               {
                  _loc6_ = PatternManager.getExpansionPattern(_loc5_.getExpansionClassID(),_loc4_.getExpansionTypeID());
                  if(_loc6_.getResKey() == _loc2_)
                  {
                     _loc3_ = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc2_));
                     if(_loc3_ != null)
                     {
                        this.expansionFinishers.push(_loc3_);
                        if(Settings.unloadResources && _loc6_.isUnload())
                        {
                           this.map.addFinisherToList(_loc3_);
                        }
                        _loc7_ = MovieClip(_loc3_.getEmbededMovieClip("mc"));
                        _loc4_.setExpansionClip(_loc7_);
                     }
                  }
               }
            }
         }
      }
      
      public function loadShipResource(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this.shipResourceQueue.length)
         {
            if(this.shipResourceQueue[_loc2_] == param1)
            {
               return;
            }
            _loc2_++;
         }
         this.shipResourceQueue.push(param1);
         ResourceManager.fileCollection.load(param1,this.handleShipResourceLoaded);
      }
      
      public function loadGlowResource(param1:String) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this.glowResourceQueue.length)
         {
            if(this.glowResourceQueue[_loc2_] == param1)
            {
               return;
            }
            _loc2_++;
         }
         this.glowResourceQueue.push(param1);
         ResourceManager.fileCollection.load(param1,this.handleGlowResourceLoaded);
      }
      
      private function handleShipResourceLoaded(param1:SWFFinisher) : void
      {
         var _loc3_:MapObject = null;
         var _loc4_:ShipPattern = null;
         var _loc5_:MovieClip = null;
         var _loc2_:String = param1.fileVO.id;
         for each(_loc3_ in this.ships)
         {
            _loc4_ = _loc3_.shipPattern;
            if(_loc4_.getResKey() == _loc2_)
            {
               this.shipFinishers.push(param1);
               if(Settings.unloadResources && _loc4_.isUnload())
               {
                  this.map.addFinisherToList(param1);
               }
               _loc5_ = MovieClip(param1.getEmbededMovieClip("mc"));
               _loc5_.mouseEnabled = false;
               _loc5_.mouseChildren = false;
               _loc5_.gotoAndStop(1);
               _loc3_.setShipClip(_loc5_);
               this.setLabelHitpointPositions(_loc3_,_loc5_);
            }
         }
      }
      
      private function handleGlowResourceLoaded(param1:SWFFinisher) : void
      {
         var _loc3_:MapObject = null;
         var _loc4_:ResourcePattern = null;
         var _loc5_:MovieClip = null;
         var _loc2_:String = param1.fileVO.id;
         for each(_loc3_ in this.ships)
         {
            if(_loc3_ != null && _loc3_.shipPattern.getGlowID() != -1)
            {
               _loc4_ = _loc3_.getGlowPattern();
               if(_loc4_.getResKey() == _loc2_)
               {
                  param1 = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc2_));
                  if(Settings.unloadResources)
                  {
                     this.map.addFinisherToList(param1);
                  }
                  _loc5_ = MovieClip(param1.getEmbededMovieClip("mc"));
                  _loc3_.setGlowClip(_loc5_);
               }
            }
         }
      }
      
      private function setLabelHitpointPositions(param1:MapObject, param2:MovieClip) : void
      {
         var _loc3_:ShipPattern = param1.shipPattern;
         param1.setLabelYOffset(_loc3_.getLabelYOffset());
         if(_loc3_.getEnergyYOffset() != 0)
         {
            param1.setHitpointsYOffset(-param2.height / 2 - _loc3_.getEnergyYOffset());
         }
         else
         {
            param1.setHitpointsYOffset(-param2.height / 2);
         }
      }
      
      public function focusHeroToCoordinates(param1:int, param2:int) : void
      {
         var _loc4_:Number = NaN;
         var _loc5_:int = 0;
         var _loc3_:MapObject = this.getShip(Hero.userID);
         if(_loc3_ != null && !_loc3_.shipPattern.playLoop)
         {
            if(this.map.getCombatManager().isShipAttacking(_loc3_.getUserId()) != null)
            {
               return;
            }
            _loc4_ = Math.atan2(param2 - _loc3_.y,param1 - _loc3_.x) * 180 / Math.PI;
            _loc5_ = Math.round(_loc4_ + 180);
            TweenMax.to(_loc3_,0.25,{"shortRotation":{"shipRotation":_loc5_}});
         }
      }
      
      public function moveShip(param1:int, param2:int, param3:int, param4:int) : void
      {
         var _loc10_:int = 0;
         var _loc11_:int = 0;
         var _loc12_:int = 0;
         var _loc5_:MapObject = this.getShip(param1);
         var _loc6_:Boolean = false;
         if(this.map.getShipManager().getPet(param1) != null)
         {
            _loc6_ = this.map.getShipManager().getPet(param1).hasEvasionProtocol();
         }
         if(_loc5_ == null)
         {
            this.map.getMain().getConnectionManager().sendCommand(ServerCommands.REQUEST_SHIP,[param1]);
            return;
         }
         _loc5_.currentlyMoving = true;
         var _loc7_:ShipPattern = _loc5_.shipPattern;
         if(!_loc6_)
         {
            TweenLite.to(_loc5_,param4 / 1000,{
               "ease":Linear.easeNone,
               "x":param2,
               "y":param3,
               "onComplete":this.handleMapObjectStoppedMoving,
               "onCompleteParams":[_loc5_]
            });
         }
         else
         {
            _loc10_ = 150;
            _loc11_ = (Math.random() - 0.5) * _loc10_ + param2;
            _loc12_ = (Math.random() - 0.5) * _loc10_ + param3;
            TweenLite.to(_loc5_,param4 / 2000,{
               "ease":Linear.easeNone,
               "x":_loc11_,
               "y":_loc12_,
               "onComplete":this.moveShip,
               "onCompleteParams":[param1,param2,param3,param4]
            });
         }
         var _loc8_:Number = Math.atan2(param3 - _loc5_.y,param2 - _loc5_.x) * 180 / Math.PI;
         var _loc9_:int = Math.round(_loc8_ + 180);
         _loc5_.movementDirection = _loc9_;
         if(!_loc7_.playLoop && this.map.getCombatManager().isShipAttacking(_loc5_.getUserId()) == null)
         {
            if(param3 != _loc5_.y && param2 != _loc5_.x)
            {
               TweenLite.to(_loc5_,0.25,{"shortRotation":{"shipRotation":_loc9_}});
            }
         }
      }
      
      private function handleMapObjectStoppedMoving(param1:MapObject) : void
      {
         if(param1 != null)
         {
            param1.currentlyMoving = false;
         }
      }
      
      public function selectSpaceball(param1:int) : MapObject
      {
         var _loc2_:MapObject = this.getShip(param1);
         if(_loc2_ == null)
         {
            return null;
         }
         var _loc3_:MapObject = this.getSelectedShip();
         if(_loc3_ != null)
         {
            _loc3_.setSelected(false);
            if(this.map.getCombatManager().isShipAttackedByHero(_loc3_.getUserId()))
            {
               this.map.getEventManager().abortLaserAttack(_loc3_.getUserId());
            }
         }
         _loc2_.setSelected(true);
         return _loc2_;
      }
      
      public function selectShip(param1:int, param2:int, param3:int, param4:int, param5:int, param6:Boolean) : MapObject
      {
         var _loc7_:MapObject = this.getSelectedShip();
         if(_loc7_ != null)
         {
            if(_loc7_.getUserId() != param1)
            {
               _loc7_.setSelected(false);
               if(this.map.getCombatManager().isShipAttackedByHero(_loc7_.getUserId()))
               {
                  this.map.getEventManager().abortLaserAttack(_loc7_.getUserId());
                  this.map.getMain().getGuiManager().writeToLog(BPLocale.getText("attstop").replace(/%!/,_loc7_.getUsername()));
               }
            }
         }
         var _loc8_:MapObject = this.getShip(param1);
         _loc8_.setSelected(true);
         _loc8_.setHitpoints(param2);
         _loc8_.setMaxHitpoints(param3);
         _loc8_.setShieldChunk(param4,param5);
         return _loc8_;
      }
      
      public function deselectSelectedShip() : void
      {
         var _loc1_:MapObject = this.getSelectedShip();
         if(_loc1_ != null)
         {
            _loc1_.setSelected(false);
            if(this.map.getCombatManager().isShipAttackedByHero(_loc1_.getUserId()))
            {
               this.map.getEventManager().abortLaserAttack(_loc1_.getUserId());
               this.map.getMain().getGuiManager().writeToLog(BPLocale.getText("attstop").replace(/%!/,_loc1_.getUsername()));
            }
         }
      }
      
      public function getShip(param1:int) : MapObject
      {
         return this.ships[int(param1)];
      }
      
      public function getSelectedShip() : MapObject
      {
         var _loc1_:MapObject = null;
         for each(_loc1_ in this.ships)
         {
            if(_loc1_.isSelected())
            {
               return _loc1_;
            }
         }
         return null;
      }
      
      public function setAttackedShip() : MapObject
      {
         var _loc1_:MapObject = null;
         for each(_loc1_ in this.ships)
         {
            if(_loc1_ != null && _loc1_.isSelected())
            {
               return _loc1_;
            }
         }
         return null;
      }
      
      public function getMap() : Map
      {
         return this.map;
      }
      
      public function updateHeroCargo() : void
      {
         var _loc2_:int = 0;
         var _loc3_:Array = null;
         var _loc4_:int = 0;
         var _loc5_:OrePattern = null;
         var _loc1_:MapObject = this.map.getShipManager().getHero();
         if(_loc1_ != null)
         {
            _loc2_ = 0;
            _loc3_ = Hero.getOres([OrePattern.ORE_PROMETIUM,OrePattern.ORE_ENDURIUM,OrePattern.ORE_TERBIUM,OrePattern.ORE_PROMETID,OrePattern.ORE_DURANIUM,OrePattern.ORE_PROMERIUM,OrePattern.ORE_SEPROM,OrePattern.ORE_PALLADIUM]);
            _loc4_ = 0;
            while(_loc4_ < _loc3_.length)
            {
               _loc5_ = _loc3_[_loc4_];
               _loc2_ += _loc5_.count;
               _loc4_++;
            }
            _loc1_.setCargo(_loc2_);
         }
      }
      
      public function updateShipVisualStyle() : void
      {
         var _loc1_:MapObject = null;
         var _loc2_:SWFFinisher = null;
         var _loc3_:SWFFinisher = null;
         if(Settings.qualityShip == Settings.QUALITY_LOW)
         {
            for each(_loc2_ in this.shipFinishers)
            {
               this.shipResourceQueue = [];
               _loc2_.clear();
            }
            for each(_loc3_ in this.expansionFinishers)
            {
               this.expansionResourceQueue = [];
               _loc3_.clear();
            }
         }
         for each(_loc1_ in this.ships)
         {
            _loc1_.updateShipClip();
         }
      }
      
      public function updateEngineSmokeTimers() : void
      {
         var _loc1_:MapObject = null;
         for each(_loc1_ in this.ships)
         {
            if(Settings.qualityEngine == Settings.QUALITY_HIGH)
            {
               _loc1_.startEngineTimer();
            }
            else
            {
               _loc1_.stopEngineTimer();
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   
   public class ShipPattern extends ResourcePattern
   {
      
      public var playLoop:Boolean;
      
      private var laserClassID:int;
      
      private var rocketClassID:int;
      
      private var expansionClassID:int = -1;
      
      private var labelVisible:Boolean = true;
      
      private var labelYOffset:int;
      
      private var energyVisible:Boolean = true;
      
      private var energyYOffset:int;
      
      private var selectionYOffset:int;
      
      private var explodeTypeID:int;
      
      private var laserDamageTypeID:int;
      
      private var rocketDamageTypeID:int;
      
      private var engineTypeID:int;
      
      private var engineSmokeID:int;
      
      public var enginePositionClassID:int = -1;
      
      private var glowID:int = -1;
      
      public var moveRadiusSquared:int = 100;
      
      private var seekInterval:int = 200;
      
      private var clickRadius:int = 45;
      
      private var clickOffsetX:int;
      
      private var clickOffsetY:int;
      
      private var spaceball:Boolean;
      
      public var megaExplosion:Boolean;
      
      public var showCrap:Boolean;
      
      public var showPilot:int;
      
      public var pilotDistance:int;
      
      public var rotatable:Boolean = true;
      
      public var iconClassID:int;
      
      public var shockwaveID:int = 0;
      
      public function ShipPattern(param1:int, param2:String)
      {
         super(param1,param2);
      }
      
      public function getSeekInterval() : int
      {
         return this.seekInterval;
      }
      
      public function setPlayLoop(param1:Boolean) : void
      {
         this.playLoop = param1;
      }
      
      public function setLaserClassID(param1:int) : void
      {
         this.laserClassID = param1;
      }
      
      public function getLaserClassID() : int
      {
         return this.laserClassID;
      }
      
      public function setRocketClassID(param1:int) : void
      {
         this.rocketClassID = param1;
      }
      
      public function getRocketClass() : int
      {
         return this.rocketClassID;
      }
      
      public function setExpansionClassID(param1:int) : void
      {
         this.expansionClassID = param1;
      }
      
      public function getExpansionClassID() : int
      {
         return this.expansionClassID;
      }
      
      public function hasExpansion() : Boolean
      {
         if(this.expansionClassID == -1)
         {
            return false;
         }
         return true;
      }
      
      public function setLabelVisibility(param1:Boolean) : void
      {
         this.labelVisible = param1;
      }
      
      public function isLabelVisible() : Boolean
      {
         return this.labelVisible;
      }
      
      public function setLabelYOffset(param1:int) : void
      {
         this.labelYOffset = param1;
      }
      
      public function getLabelYOffset() : int
      {
         return this.labelYOffset;
      }
      
      public function setEnergyVisibility(param1:Boolean) : void
      {
         this.energyVisible = param1;
      }
      
      public function isEnergyVisible() : Boolean
      {
         return this.energyVisible;
      }
      
      public function setEnergyYOffset(param1:int) : void
      {
         this.energyYOffset = param1;
      }
      
      public function getEnergyYOffset() : int
      {
         return this.energyYOffset;
      }
      
      public function setSelectionYOffset(param1:int) : void
      {
         this.selectionYOffset = param1;
      }
      
      public function getSelectionYOffset() : int
      {
         return this.selectionYOffset;
      }
      
      public function setExplodeTypeID(param1:int) : void
      {
         this.explodeTypeID = param1;
      }
      
      public function getExplodeTypeID() : int
      {
         return this.explodeTypeID;
      }
      
      public function setLaserDamageType(param1:int) : void
      {
         this.laserDamageTypeID = param1;
      }
      
      public function getLaserDamageTypeID() : int
      {
         return this.laserDamageTypeID;
      }
      
      public function setRocketDamageTypeID(param1:int) : void
      {
         this.rocketDamageTypeID = param1;
      }
      
      public function getRocketDamageTypeID() : int
      {
         return this.rocketDamageTypeID;
      }
      
      public function setEngineTypeID(param1:int) : void
      {
         this.engineTypeID = param1;
      }
      
      public function getEngineTypeID() : int
      {
         return this.engineTypeID;
      }
      
      public function setEnginePositionClassID(param1:int) : void
      {
         this.enginePositionClassID = param1;
      }
      
      public function getEnginePositionClassID() : int
      {
         return this.enginePositionClassID;
      }
      
      public function getEngineSmokeID() : int
      {
         return this.engineSmokeID;
      }
      
      public function setEngineSmokeID(param1:int) : void
      {
         this.engineSmokeID = param1;
      }
      
      public function getGlowID() : int
      {
         return this.glowID;
      }
      
      public function setGlowID(param1:int) : void
      {
         this.glowID = param1;
      }
      
      public function setMoveRadius(param1:int) : void
      {
         this.moveRadiusSquared = param1 * param1;
      }
      
      public function getClickRadius() : int
      {
         return this.clickRadius;
      }
      
      public function setClickRadius(param1:int) : void
      {
         this.clickRadius = param1;
      }
      
      public function getClickOffsetX() : int
      {
         return this.clickOffsetX;
      }
      
      public function setClickOffsetX(param1:int) : void
      {
         this.clickOffsetX = param1;
      }
      
      public function getClickOffsetY() : int
      {
         return this.clickOffsetY;
      }
      
      public function setClickOffsetY(param1:int) : void
      {
         this.clickOffsetY = param1;
      }
      
      public function isSpaceball() : Boolean
      {
         return this.spaceball;
      }
      
      public function setSpaceball(param1:Boolean) : void
      {
         this.spaceball = param1;
      }
      
      public function setSeekInterval(param1:int) : void
      {
         this.seekInterval = param1;
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.utils.Dictionary;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.lazyload.AssetLazyLoader;
   import net.bigpoint.darkorbit.net.models.skills.SkillDesignAbilities;
   
   public class ShipSkillDecorator extends Sprite
   {
      
      private static const logger:ILogger = Log.getLogger("ShipSkillDecorator");
      
      private var skillClips:Dictionary = new Dictionary();
      
      private var playAfterLoading:Boolean = false;
      
      private var ship:MapObject;
      
      private const NUMBER_OF_LIGHT_FLASHES_SOLACE:int = 11;
      
      public function ShipSkillDecorator(param1:MapObject)
      {
         super();
         this.ship = param1;
      }
      
      private function addSkillMc(param1:String) : void
      {
         var _loc2_:SkillClip = null;
         if(!this.isSkillLoaded(param1))
         {
            _loc2_ = new SkillClip();
            this.skillClips[param1] = _loc2_;
            _loc2_.setClip(ResourceManager.getMovieClip(param1,"mc"));
            this.resizeMC(_loc2_);
            this.addChild(_loc2_);
         }
      }
      
      private function resizeMC(param1:SkillClip) : void
      {
         var _loc2_:MovieClip = MovieClip(this.ship.shipContainer.getChildAt(0));
         var _loc3_:Number = Math.max(_loc2_.height,_loc2_.width) * 0.5 / 65;
         param1.setScale(_loc3_);
      }
      
      public function setClip(param1:String) : void
      {
         var _loc2_:AssetLazyLoader = new AssetLazyLoader();
         _loc2_.addEventListener(AssetLazyLoader.ASSET_LOADED,this.handleAssetLoaded);
         _loc2_.loadAsset(param1);
      }
      
      private function handleAssetLoaded(param1:Event) : void
      {
         var _loc2_:AssetLazyLoader = AssetLazyLoader(param1.target);
         _loc2_.removeEventListener(AssetLazyLoader.ASSET_LOADED,this.handleAssetLoaded);
         var _loc3_:String = AssetLazyLoader(param1.target).resKeyForThisLoader;
         this.addSkillMc(_loc3_);
         if(this.playAfterLoading)
         {
            this.playAfterLoading = false;
            this.playAnimation(AssetLazyLoader(param1.target).resKeyForThisLoader);
         }
      }
      
      public function isSkillLoaded(param1:String) : Boolean
      {
         return this.skillClips[param1] != null;
      }
      
      public function playAnimation(param1:String) : void
      {
         if(this.isSkillLoaded(param1))
         {
            if(param1 != SkillDesignAbilities.SHIP_INSTANT_HEAL_NAME)
            {
               SkillClip(this.skillClips[param1]).playAnimation(true);
            }
            else
            {
               SkillClip(this.skillClips[param1]).playInstantAnimation();
               if(this.ship.shipLightDecorator.numberOfFlashes < 0)
               {
                  this.ship.shipLightDecorator.startFlashes(this.NUMBER_OF_LIGHT_FLASHES_SOLACE);
               }
            }
         }
         else
         {
            this.playAfterLoading = true;
            this.setClip(param1);
         }
      }
      
      public function stopAnimation(param1:String) : void
      {
         if(this.isSkillLoaded(param1))
         {
            SkillClip(this.skillClips[param1]).stopAnimation();
         }
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   public class SkillClip extends TweenClip
   {
      
      public function SkillClip()
      {
         super();
      }
      
      public function playSkillAnimation() : void
      {
         this.playAnimation();
      }
      
      public function setPosition(param1:int, param2:int) : void
      {
         this.clip.x = param1;
         this.clip.y = param2;
      }
      
      public function setScale(param1:Number) : void
      {
         this.clip.scaleX = param1;
         this.clip.scaleY = param1;
      }
   }
}

package net.bigpoint.darkorbit.ship
{
   import com.greensock.TweenLite;
   import com.greensock.easing.Linear;
   import flash.display.DisplayObject;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   
   public class TweenClip extends Sprite
   {
      
      public static const logger:ILogger = Log.getLogger("TweenClip");
      
      public var clip:DisplayObject;
      
      public var fps:int;
      
      private var currentStartFrame:int;
      
      public function TweenClip(param1:DisplayObject = null, param2:int = 30)
      {
         super();
         this.clip = param1;
         this.fps = param2;
      }
      
      public function setClip(param1:DisplayObject, param2:Boolean = true) : void
      {
         this.clip = param1;
         this.clip.visible = false;
         if(param2)
         {
            this.addChild(param1);
         }
         this.resetMovieClip();
      }
      
      private function resetMovieClip() : void
      {
         if(this.clip is MovieClip)
         {
            MovieClip(this.clip).gotoAndStop(this.currentStartFrame);
         }
         else if(this.clip is BitmapClip)
         {
            BitmapClip(this.clip).gotoAndStop(this.currentStartFrame);
         }
      }
      
      public function playAnimation(param1:Boolean = true, param2:int = 1, param3:Boolean = true, param4:Boolean = false) : void
      {
         var _loc5_:int = 0;
         this.stopAnimation();
         this.currentStartFrame = param2;
         if(this.clip is MovieClip)
         {
            _loc5_ = MovieClip(this.clip).framesLoaded;
            MovieClip(this.clip).gotoAndStop(param2);
         }
         else if(this.clip is BitmapClip)
         {
            _loc5_ = BitmapClip(this.clip).framesLoaded;
            BitmapClip(this.clip).gotoAndStop(param2);
         }
         var _loc6_:Number = _loc5_ / this.fps;
         var _loc7_:Number = 0;
         this.clip.visible = true;
         if(param3)
         {
            _loc7_ = 0.5;
            this.clip.alpha = 0;
            TweenLite.to(this.clip,_loc7_,{
               "ease":Linear.easeNone,
               "alpha":1
            });
         }
         if(param1)
         {
            this.loopAnimation(_loc6_,_loc5_);
         }
         else if(param4)
         {
            this.animateAndRemoveObject(_loc6_,_loc5_);
         }
         else
         {
            this.animateAndFadeOut(_loc6_,_loc5_);
         }
      }
      
      public function playInstantAnimation(param1:int = 1, param2:Boolean = true, param3:Boolean = false, param4:int = 3) : void
      {
         var _loc5_:int = 0;
         var _loc7_:Number = NaN;
         this.stopAnimation();
         if(this.clip is MovieClip)
         {
            _loc5_ = MovieClip(this.clip).framesLoaded;
            MovieClip(this.clip).gotoAndStop(param1);
         }
         else if(this.clip is BitmapClip)
         {
            _loc5_ = BitmapClip(this.clip).framesLoaded;
            BitmapClip(this.clip).gotoAndStop(param1);
         }
         var _loc6_:Number = _loc5_ / this.fps;
         _loc7_ = 0;
         this.clip.visible = true;
         if(param2)
         {
            _loc7_ = 0.5;
            this.clip.alpha = 0;
            TweenLite.to(this.clip,_loc7_,{
               "ease":Linear.easeNone,
               "alpha":1
            });
         }
         this.instantAnimation(_loc6_,_loc5_,param4);
      }
      
      private function instantAnimation(param1:Number, param2:int, param3:int) : void
      {
         this.resetMovieClip();
         if(param3 > 0)
         {
            TweenLite.to(this.clip,param1,{
               "ease":Linear.easeNone,
               "frame":param2,
               "onComplete":this.instantAnimation,
               "onCompleteParams":[param1,param2,--param3]
            });
         }
         else
         {
            this.fadeInClip(0.5);
         }
      }
      
      private function loopAnimation(param1:Number, param2:int) : void
      {
         this.resetMovieClip();
         TweenLite.to(this.clip,param1,{
            "ease":Linear.easeNone,
            "frame":param2,
            "onComplete":this.loopAnimation,
            "onCompleteParams":[param1,param2]
         });
      }
      
      private function animateAndRemoveObject(param1:Number, param2:int) : void
      {
         TweenLite.to(this.clip,param1,{
            "ease":Linear.easeNone,
            "frame":param2,
            "onComplete":this.onRemoveDisplayObject,
            "onCompleteParams":[this.clip]
         });
      }
      
      private function animateAndFadeOut(param1:Number, param2:int) : void
      {
         TweenLite.to(this.clip,param1,{
            "ease":Linear.easeNone,
            "frame":param2,
            "onComplete":this.fadeOutClip,
            "onCompleteParams":[0.5]
         });
      }
      
      public function stopAnimation() : void
      {
         TweenLite.killTweensOf(this.clip);
         this.fadeOutClip(0.5);
      }
      
      public function fadeInClip(param1:Number) : void
      {
         TweenLite.to(this.clip,param1,{
            "ease":Linear.easeNone,
            "alpha":1
         });
      }
      
      public function fadeOutClip(param1:Number) : void
      {
         TweenLite.to(this.clip,param1,{
            "ease":Linear.easeNone,
            "alpha":0
         });
      }
      
      public function onRemoveDisplayObject(param1:DisplayObject) : void
      {
         param1.parent.removeChild(param1);
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import flash.display.MovieClip;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   
   public class BattleRepBotTechEffect extends EffectBase
   {
      
      public function BattleRepBotTechEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         MovieClip(this.clip).robot.gotoAndPlay(2);
         MovieClip(this.clip).gotoAndPlay(2);
         this.clip.visible = true;
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenMax;
   import fl.transitions.easing.None;
   import flash.display.Bitmap;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.text.AntiAliasType;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFieldType;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.lazyload.AssetLazyLoader;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   
   public class CollectorBeamEffect extends EffectBase
   {
      
      private var spinningLoadAnimation:Bitmap;
      
      private var tween:TweenMax;
      
      private var countdownDuration:int;
      
      private var spinningHolster:Sprite;
      
      private var countdownText:TextField;
      
      private var useCountdownVisual:Boolean = false;
      
      public function CollectorBeamEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         var _loc1_:AssetLazyLoader = null;
         this.start();
         this.clip.y += 65;
         associatedMapObject = args[1];
         this.countdownDuration = args[0];
         this.useCountdownVisual = args[2];
         if(this.useCountdownVisual)
         {
            _loc1_ = new AssetLazyLoader();
            _loc1_.addEventListener(AssetLazyLoader.ASSET_LOADED,this.handleExtraAssetLoaded);
            _loc1_.loadAsset("ui");
         }
         this.addMapObjectMoveCheckTick();
      }
      
      private function handleExtraAssetLoaded(param1:Event) : void
      {
         var _loc2_:AssetLazyLoader = AssetLazyLoader(param1.target);
         _loc2_.removeEventListener(AssetLazyLoader.ASSET_LOADED,resourceLoadedHandler);
         var _loc3_:String = AssetLazyLoader(param1.target).resKeyForThisLoader;
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc3_));
         this.spinningLoadAnimation = _loc4_.getEmbededBitmap("loot_countdown_with_bg");
         this.spinningHolster = new Sprite();
         this.spinningHolster.addChild(this.spinningLoadAnimation);
         this.spinningLoadAnimation.x = -this.spinningLoadAnimation.width * 0.5;
         this.spinningLoadAnimation.y = -this.spinningLoadAnimation.height * 0.5;
         this.spinningHolster.y = this.clip.y + 55;
         this.countdownText = new TextField();
         this.countdownText.defaultTextFormat = Styles.h2Fmt;
         this.countdownText.setTextFormat(Styles.h2Fmt);
         this.countdownText.type = TextFieldType.DYNAMIC;
         this.countdownText.textColor = 15327936;
         this.countdownText.embedFonts = true;
         this.countdownText.autoSize = TextFieldAutoSize.CENTER;
         this.countdownText.antiAliasType = AntiAliasType.ADVANCED;
         this.countdownText.selectable = false;
         this.countdownText.width = 40;
         this.countdownText.x = this.spinningHolster.x - 2;
         this.countdownText.y = this.spinningHolster.y - 9;
         this.countdownText.text = "-";
         associatedMapObject.getClipContainer().addChild(this.spinningHolster);
         associatedMapObject.getClipContainer().addChild(this.countdownText);
         this.tween = TweenMax.to(this.spinningHolster,this.countdownDuration,{
            "ease":None.easeNone,
            "rotation":180 * this.countdownDuration,
            "onUpdate":this.setCountdownText,
            "onUpdateParams":[this.countdownText],
            "onComplete":this.handleLootCompleted
         });
      }
      
      private function setCountdownText(param1:TextField) : void
      {
         param1.text = (this.tween.duration - Math.round(this.tween.currentTime)).toString();
      }
      
      public function addMapObjectMoveCheckTick() : void
      {
         addEventListener(Event.ENTER_FRAME,this.mapObjectMoveCheck);
      }
      
      public function mapObjectMoveCheck(param1:Event) : void
      {
         if(associatedMapObject != null)
         {
            if(associatedMapObject.currentlyMoving)
            {
               this.actionOnMapObjectMove();
            }
         }
      }
      
      private function handleLootCompleted() : void
      {
         dispatchEvent(new EntityEffectEvent(EntityEffectEvent.EFFECT_TIMEOUT,id));
      }
      
      private function actionOnMapObjectMove() : void
      {
      }
      
      override public function cleanup() : void
      {
         removeEventListener(Event.ENTER_FRAME,this.mapObjectMoveCheck);
         if(this.spinningHolster != null && associatedMapObject.getClipContainer().contains(this.spinningHolster))
         {
            associatedMapObject.getClipContainer().removeChild(this.spinningHolster);
         }
         if(this.countdownText != null && associatedMapObject.getClipContainer().contains(this.countdownText))
         {
            associatedMapObject.getClipContainer().removeChild(this.countdownText);
         }
         if(this.tween)
         {
            this.tween.kill();
            this.tween = null;
         }
         associatedMapObject = null;
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import net.bigpoint.as3toolbox.bitmapclip.BitmapClip;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.lazyload.AssetLazyLoader;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.TweenClip;
   
   public class EffectBase extends TweenClip implements IEffect
   {
      
      public var id:int;
      
      public var pattern:EffectPattern;
      
      public var effectResource:Sprite;
      
      public var args:Array;
      
      private var loop:Boolean;
      
      public var containingMapObjectScale:Number;
      
      protected var effectMc:MovieClip;
      
      public var useBitmapClip:Boolean;
      
      public var associatedMapObject:MapObject;
      
      public var priority:int;
      
      public var performanceRating:Number;
      
      public function EffectBase(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         var _loc6_:AssetLazyLoader = null;
         super();
         this.loop = param5;
         this.args = param4;
         this.id = param1;
         this.pattern = param2;
         this.useBitmapClip = param3;
         this.effectResource = new Sprite();
         if(param2.resKey != "")
         {
            _loc6_ = new AssetLazyLoader();
            _loc6_.addEventListener(AssetLazyLoader.ASSET_LOADED,this.resourceLoadedHandler);
            _loc6_.loadAsset(param2.resKey);
         }
         else
         {
            this.initEffectVisuals();
         }
      }
      
      public function resourceLoadedHandler(param1:Event) : void
      {
         var _loc5_:BitmapClip = null;
         var _loc2_:AssetLazyLoader = AssetLazyLoader(param1.target);
         _loc2_.removeEventListener(AssetLazyLoader.ASSET_LOADED,this.resourceLoadedHandler);
         var _loc3_:String = AssetLazyLoader(param1.target).resKeyForThisLoader;
         var _loc4_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(_loc3_));
         this.effectMc = _loc4_.getEmbededMovieClip("mc");
         if(this.useBitmapClip)
         {
            _loc5_ = new BitmapClip(this.effectMc,_loc3_);
            this.effectResource.addChild(_loc5_);
         }
         else
         {
            this.effectResource.addChild(this.effectMc);
         }
         this.setClip(this.effectResource.getChildAt(0),false);
         this.initEffectVisuals();
      }
      
      public function initEffectVisuals() : void
      {
      }
      
      public function getEffect() : Sprite
      {
         return this.effectResource;
      }
      
      public function start() : void
      {
         var _loc1_:AssetLazyLoader = null;
         if(this.clip != null)
         {
            this.playAnimation();
         }
         else
         {
            _loc1_ = new AssetLazyLoader();
            _loc1_.addEventListener(AssetLazyLoader.ASSET_LOADED,this.handlePlayOnLoaded);
            _loc1_.loadAsset(this.pattern.resKey);
         }
      }
      
      private function handlePlayOnLoaded(param1:Event) : void
      {
         this.playAnimation();
      }
      
      public function stop() : void
      {
         this.stopAnimation();
      }
      
      public function resizeMC(param1:Number) : void
      {
         this.clip.scaleX = param1;
         this.clip.scaleY = param1;
      }
      
      public function cleanup() : void
      {
      }
      
      public function update(param1:Main, param2:Array) : void
      {
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   
   public class EffectFactory
   {
      
      private static var instance:EffectFactory;
      
      public static const logger:ILogger = Log.getLogger("EffectFactory");
      
      public function EffectFactory(param1:Function)
      {
         super();
         if(param1 !== hidden)
         {
            throw new Error("PetAssembly is a Singleton and can only be accessed through EffectFactory.getInstance()");
         }
      }
      
      public static function getInstance() : EffectFactory
      {
         if(instance == null)
         {
            instance = new EffectFactory(hidden);
         }
         return instance;
      }
      
      private static function hidden() : void
      {
      }
      
      public function createEffect(param1:int, param2:Array) : EffectBase
      {
         var _loc3_:EffectBase = null;
         var _loc4_:EffectPattern = PatternManager.effectPatterns[param1];
         if(_loc4_ != null)
         {
            if(param1 == EffectIDList.LOCATOR)
            {
               _loc3_ = new LocatorGearEffect(param1,_loc4_,false,param2);
            }
            else
            {
               _loc3_ = new PetEffect(param1,_loc4_,false,param2);
            }
         }
         return _loc3_;
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   public class EffectIDList
   {
      
      public static const LOCATOR:int = 1;
      
      public static const PET_SPAWN:int = 2;
      
      public static const SOLACE_EFFECT:int = 3;
      
      public static const DIMINISHER_EFFECT:int = 4;
      
      public static const SPECTRUM_EFFECT:int = 5;
      
      public static const SENTINEL_EFFECT:int = 6;
      
      public static const VENOM_EFFECT:int = 7;
      
      public static const SABOTEUR_SLOW_DOWN_EFFECT:int = 9;
      
      public static const TECH_SHIELD_BACKUP_EFFECT:int = 10;
      
      public static const TECH_ENERGY_LEECH_EFFECT:int = 11;
      
      public static const TECH_BATTLE_REP_BOT_EFFECT:int = 12;
      
      public static const LEVEL_UP_EFFECT:int = 13;
      
      public static const SPEED_BUFF_EFFECT:int = 14;
      
      public static const HEALBEAM_EFFECT:int = 15;
      
      public static const INVINCIBILITY:int = 16;
      
      public static const RAGE:int = 17;
      
      public static const SKULL:int = 18;
      
      public static const SPAWN:int = 19;
      
      public static const COLLECTOR_BEAM:int = 20;
      
      public static const TIMER_COUNTDOWN:int = 21;
      
      public function EffectIDList()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.ship.MapObject;
   
   public class EffectsManager
   {
      
      private static var _instance:EffectsManager;
      
      public static const NORMAL_EFFECT:String = "normal_effect";
      
      public static const ROTATION_DEPENDANT_EFFECT:String = "rotation_dependant_effect";
      
      public static const TIMEOUT_EFFECT:String = "timeout_effect";
      
      public static const BEHIND_MAP_OBJECT_EFFECT:String = "behind_ship_effect";
      
      public static var performanceSetting:int = 2;
      
      public var effectControllers:Dictionary = new Dictionary();
      
      public function EffectsManager(param1:Function)
      {
         super();
         if(param1 != hidden)
         {
            throw new Error("EffectsManager is a Singleton and can only be accessed through EffectsManager.getInstance()");
         }
      }
      
      public static function getInstance() : EffectsManager
      {
         if(_instance == null)
         {
            _instance = new EffectsManager(hidden);
         }
         return _instance;
      }
      
      private static function hidden() : void
      {
      }
      
      public function addEffectControllerToObject(param1:MapObject) : void
      {
         var _loc2_:EntityEffectController = new EntityEffectController(param1);
         if(this.effectControllers[param1] == null)
         {
            this.effectControllers[param1] = _loc2_;
         }
      }
      
      public function addEffect(param1:EffectBase, param2:MapObject, param3:String = "normal_effect") : void
      {
         if(this.effectControllers[param2] == null)
         {
            this.effectControllers[param2] = new EntityEffectController(param2);
         }
         var _loc4_:EntityEffectController = this.effectControllers[param2];
         switch(param3)
         {
            case NORMAL_EFFECT:
               _loc4_.addEffect(param1);
               break;
            case ROTATION_DEPENDANT_EFFECT:
               _loc4_.addRotationDependantEffect(param1);
               break;
            case TIMEOUT_EFFECT:
               _loc4_.addEffectWithTimeoutCallback(param1);
               break;
            case BEHIND_MAP_OBJECT_EFFECT:
               _loc4_.addEffectBehindMapObject(param1);
         }
      }
      
      public function removeAllEffects(param1:MapObject) : void
      {
         var _loc2_:EntityEffectController = this.effectControllers[param1];
         if(_loc2_ != null)
         {
            _loc2_.removeAllEffects();
         }
      }
      
      public function getEffectFromEntity(param1:MapObject, param2:int) : EffectBase
      {
         var _loc3_:EntityEffectController = this.effectControllers[param1];
         if(_loc3_ != null)
         {
            return _loc3_.getEffect(param2);
         }
         return null;
      }
      
      public function doesEffectExistOn(param1:MapObject, param2:int, param3:Number = -1) : Boolean
      {
         var _loc4_:EntityEffectController = null;
         if(this.effectControllers[param1] != null)
         {
            _loc4_ = this.effectControllers[param1];
            if(param2 == EffectIDList.HEALBEAM_EFFECT)
            {
               if(_loc4_.getEffect(param3) != null)
               {
                  return true;
               }
               return false;
            }
            if(_loc4_.getEffect(param2) != null)
            {
               return true;
            }
         }
         return false;
      }
      
      public function removeEffectByIdFromEntity(param1:MapObject, param2:int) : void
      {
         var _loc4_:EffectBase = null;
         var _loc3_:EntityEffectController = this.effectControllers[param1];
         if(_loc3_ != null)
         {
            _loc4_ = _loc3_.getEffect(param2);
         }
         if(_loc4_ != null)
         {
            _loc4_.stop();
            _loc3_.removeEffectByID(param2);
         }
      }
      
      public function killAllEffects() : void
      {
         var _loc1_:String = null;
         var _loc2_:EntityEffectController = null;
         for(_loc1_ in this.effectControllers)
         {
            _loc2_ = this.effectControllers[_loc1_];
            _loc2_.removeAllEffects();
         }
      }
      
      public function killAllEffectsBelowThreshold(param1:int) : void
      {
         var _loc2_:String = null;
         var _loc3_:EntityEffectController = null;
         for(_loc2_ in this.effectControllers)
         {
            _loc3_ = this.effectControllers[_loc2_];
            _loc3_.removeAllEffectsBelowThreshold(param1);
         }
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import com.greensock.TweenMax;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   
   public class EnergyLeechTechEffect extends EffectBase
   {
      
      public function EnergyLeechTechEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         this.playAnimation();
         TweenMax.delayedCall(2,this.handleEnergyLeechPause);
      }
      
      private function handleEnergyLeechPause() : void
      {
         TweenMax.to(effectMc,1,{"alpha":0});
         TweenMax.delayedCall(7,this.handleEnergyLeechContinueAnimating);
      }
      
      private function handleEnergyLeechContinueAnimating() : void
      {
         TweenMax.to(effectMc,1,{"alpha":1});
         TweenMax.delayedCall(2,this.handleEnergyLeechPause);
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import flash.utils.Dictionary;
   import net.bigpoint.darkorbit.ship.MapObject;
   
   public class EntityEffectController
   {
      
      public var effectList:Dictionary = new Dictionary();
      
      public var effects:Array = [];
      
      public var mapObject:MapObject;
      
      public function EntityEffectController(param1:MapObject)
      {
         super();
         this.mapObject = param1;
      }
      
      public function addEffect(param1:EffectBase) : void
      {
         this.effects.push(param1);
         this.mapObject.getClipContainer().addChild(param1.getEffect());
      }
      
      public function addEffectBehindMapObject(param1:EffectBase) : void
      {
         this.effects.push(param1);
         EffectBase(param1).associatedMapObject = this.mapObject;
         param1.addEventListener(EntityEffectEvent.EFFECT_TIMEOUT,this.handleEffectTimeout);
         this.mapObject.getClipContainer().addChild(param1.getEffect());
         this.mapObject.getClipContainer().setChildIndex(param1.getEffect(),0);
      }
      
      public function addRotationDependantEffect(param1:EffectBase) : void
      {
         this.effects.push(param1);
         EffectBase(param1).associatedMapObject = this.mapObject;
         this.mapObject.getClipContainer().addChild(param1.getEffect());
      }
      
      public function addEffectWithTimeoutCallback(param1:EffectBase) : void
      {
         this.effects.push(param1);
         this.mapObject.getClipContainer().addChild(param1.getEffect());
         param1.addEventListener(EntityEffectEvent.EFFECT_TIMEOUT,this.handleEffectTimeout);
      }
      
      private function handleEffectTimeout(param1:EntityEffectEvent) : void
      {
         this.removeEffectByID(param1.effectID);
      }
      
      private function handleFullRemove(param1:EffectBase) : void
      {
         this.removeEffectByID(param1.id);
      }
      
      public function removeEffectByID(param1:int) : void
      {
         var _loc3_:EffectBase = null;
         var _loc2_:Array = [];
         var _loc4_:int = 0;
         while(_loc4_ < this.effects.length)
         {
            _loc3_ = this.effects[_loc4_] as EffectBase;
            if(_loc3_.id == param1)
            {
               _loc3_.cleanup();
               if(this.mapObject.getClipContainer().contains(_loc3_.getEffect()))
               {
                  this.mapObject.getClipContainer().removeChild(_loc3_.getEffect());
               }
               _loc2_.push(_loc4_);
               _loc3_ = null;
            }
            _loc4_++;
         }
         this.removeAllEffectsFromList(_loc2_);
      }
      
      private function removeAllEffectsFromList(param1:Array) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < param1.length)
         {
            this.effects.splice(param1[_loc2_],1);
            _loc2_++;
         }
      }
      
      private function removeEffect(param1:EffectBase) : void
      {
         param1.cleanup();
         this.mapObject.getClipContainer().removeChild(param1.getEffect());
      }
      
      public function removeAllEffects() : void
      {
         var _loc1_:EffectBase = null;
         var _loc2_:int = 0;
         while(_loc2_ < this.effects.length)
         {
            _loc1_ = this.effects[_loc2_];
            if(_loc1_ != null)
            {
               this.removeEffect(_loc1_);
            }
            delete this.effects[_loc2_];
            _loc2_++;
         }
         this.effects = [];
      }
      
      public function removeAllEffectsBelowThreshold(param1:int) : void
      {
         var _loc2_:EffectBase = null;
         var _loc3_:int = 0;
         while(_loc3_ < this.effects.length)
         {
            _loc2_ = this.effects[_loc3_];
            if(_loc2_ != null && _loc2_.performanceRating > param1)
            {
               this.removeEffect(_loc2_);
            }
            delete this.effects[_loc3_];
            _loc3_++;
         }
         this.effects = [];
      }
      
      public function getLastStackedEffect() : EffectBase
      {
         return this.effects[this.effects.length - 1] as EffectBase;
      }
      
      public function getEffect(param1:int) : EffectBase
      {
         var _loc2_:EffectBase = null;
         var _loc3_:int = 0;
         while(_loc3_ < this.effects.length)
         {
            _loc2_ = this.effects[_loc3_] as EffectBase;
            if(_loc2_.id == param1)
            {
               return _loc2_;
            }
            _loc3_++;
         }
         return null;
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import flash.events.Event;
   
   public class EntityEffectEvent extends Event
   {
      
      public static const EFFECT_TIMEOUT:String = "EFFECT_TIMEOUT";
      
      public static const EFFECT_FINISHED:String = "EFFECT_FINISHED";
      
      public static const EFFECT_CANCELLED:String = "EFFECT_CANCELLED";
      
      public var effectID:int;
      
      public function EntityEffectEvent(param1:String, param2:int, param3:Boolean = false, param4:Boolean = false)
      {
         super(param1,param3,param4);
         this.effectID = param2;
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import flash.events.TimerEvent;
   import flash.filters.BlurFilter;
   import flash.filters.ColorMatrixFilter;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.settings.Settings;
   import net.bigpoint.darkorbit.ship.MapObject;
   import org.flintparticles.common.counters.Pulse;
   import org.flintparticles.common.initializers.ColorInit;
   import org.flintparticles.twoD.actions.DeathZone;
   import org.flintparticles.twoD.actions.Move;
   import org.flintparticles.twoD.emitters.Emitter2D;
   import org.flintparticles.twoD.initializers.Position;
   import org.flintparticles.twoD.initializers.Velocity;
   import org.flintparticles.twoD.renderers.PixelRenderer;
   import org.flintparticles.twoD.zones.DiscZone;
   import org.flintparticles.twoD.zones.LineZone;
   import org.flintparticles.twoD.zones.PointZone;
   
   public class HealBeamEffect extends EffectBase
   {
      
      private var emitter:Emitter2D;
      
      private var renderer:PixelRenderer;
      
      private var velocity:Velocity;
      
      private var move:Move = new Move();
      
      private var timer:Timer = new Timer(1000 * 2,1);
      
      private var updateTimer:Timer = new Timer(10,250);
      
      private const DIS_X:Number = 550;
      
      private const DIS_Y:Number = 40;
      
      private var angle:Number;
      
      private var rayHeight:Number;
      
      private var distance:Number;
      
      private var oldDistance:Number;
      
      private var oldHeight:Number;
      
      private var particleCount:Number;
      
      private var pulse:Pulse;
      
      private var attackerShip:MapObject;
      
      private var targetShip:MapObject;
      
      private var dZone:DiscZone = new DiscZone(new Point(0,0),200);
      
      private var effectID:int;
      
      private var maxDistance:Number;
      
      private const RADIANS:Number = 57.29577951308232;
      
      public function HealBeamEffect(param1:int, param2:EffectPattern, param3:Array = null, param4:Boolean = true)
      {
         super(param1,param2,false,param3,param4);
         this.effectID = param3[0];
         this.timer.addEventListener(TimerEvent.TIMER_COMPLETE,this.stopEmitter);
      }
      
      override public function initEffectVisuals() : void
      {
         this.emitter = new Emitter2D();
         this.emitter.addInitializer(new ColorInit(4278255360,4278255360));
         var _loc1_:PointZone = new PointZone(new Point(0,0));
         var _loc2_:Position = new Position(_loc1_);
         this.emitter.addInitializer(_loc2_);
      }
      
      private function deleteParticles(param1:Point, param2:Number) : void
      {
         this.dZone.center = param1;
         this.dZone.outerRadius = param2 + 200;
      }
      
      public function startEmitter(param1:MapObject, param2:MapObject) : void
      {
         switch(Settings.resolutionID)
         {
            case 0:
               this.maxDistance = 820;
               break;
            case 1:
            case 2:
               this.maxDistance = 1024;
               break;
            case 3:
            case 4:
               this.maxDistance = 1280;
         }
         this.attackerShip = param1;
         this.targetShip = param2;
         this.updateTimer.addEventListener(TimerEvent.TIMER,this.updateRay);
         this.updateTimer.addEventListener(TimerEvent.TIMER_COMPLETE,this.resetTimer);
         this.oldDistance = Math.sqrt(Math.pow(this.targetShip.y - this.attackerShip.y,2) + Math.pow(this.targetShip.x - this.attackerShip.x,2));
         this.oldDistance = this.oldDistance > this.maxDistance ? 20 : this.oldDistance;
         this.oldHeight = this.oldDistance * this.DIS_Y / this.DIS_X << 1;
         var _loc3_:BlurFilter = new BlurFilter(4,4,1);
         var _loc4_:ColorMatrixFilter = new ColorMatrixFilter([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0.99,0]);
         this.renderer = new PixelRenderer(new Rectangle(0,this.oldHeight * -0.5,this.oldDistance,this.oldHeight));
         this.renderer.name = "renderer";
         this.renderer.addFilter(_loc3_);
         this.renderer.addFilter(_loc4_);
         this.pulse = new Pulse(0.2,10);
         this.updateRay();
         var _loc5_:Point = new Point(this.DIS_X,this.DIS_Y);
         var _loc6_:Point = new Point(this.DIS_X,~this.DIS_Y + 1);
         var _loc7_:LineZone = new LineZone(_loc5_,_loc6_);
         this.velocity = new Velocity(_loc7_);
         this.emitter.addInitializer(this.velocity);
         var _loc8_:DeathZone = new DeathZone(this.dZone,true);
         this.emitter.addAction(_loc8_);
         this.emitter.counter = this.pulse;
         this.emitter.addAction(this.move);
         this.renderer.addEmitter(this.emitter);
         if(!getEffect().getChildByName("renderer"))
         {
            getEffect().addChild(this.renderer);
         }
         this.emitter.start();
         this.timer.start();
         this.updateTimer.start();
      }
      
      public function stopEmitter(param1:TimerEvent = null) : void
      {
         this.pulse.stop();
         this.timer.stop();
         this.timer.reset();
         this.emitter.killAllParticles();
         this.emitter.removeInitializer(this.velocity);
         this.emitter.removeAction(this.move);
         this.timer.removeEventListener(TimerEvent.TIMER_COMPLETE,this.stopEmitter);
      }
      
      public function updateRay(param1:TimerEvent = null) : void
      {
         if(Boolean(this.targetShip.getShipManager().getShip(this.targetShip.userID)) && Boolean(this.attackerShip.getShipManager().getShip(this.attackerShip.userID)))
         {
            this.angle = Math.atan2(this.targetShip.y - this.attackerShip.y,this.targetShip.x - this.attackerShip.x) * this.RADIANS;
            this.distance = Math.sqrt(Math.pow(this.targetShip.y - this.attackerShip.y,2) + Math.pow(this.targetShip.x - this.attackerShip.x,2));
            this.distance = this.distance > this.maxDistance ? 20 : this.distance;
            this.rayHeight = this.distance * this.DIS_Y / this.DIS_X << 1;
            this.rayHeight = this.rayHeight > 30 ? 30 : this.rayHeight;
            this.renderer.scaleX = this.distance / this.oldDistance;
            this.renderer.scaleY = this.rayHeight / this.oldHeight;
            this.particleCount = this.distance >> 2;
            this.pulse.quantity = this.particleCount;
            this.renderer.rotation = this.angle;
            this.deleteParticles(new Point(0,this.rayHeight * -0.5),this.distance);
         }
         else
         {
            this.stopEmitter();
         }
      }
      
      public function resetTimer(param1:TimerEvent) : void
      {
         this.updateTimer.stop();
         this.updateTimer.reset();
         this.updateTimer.removeEventListener(TimerEvent.TIMER,this.updateRay);
         this.updateTimer.removeEventListener(TimerEvent.TIMER_COMPLETE,this.resetTimer);
         dispatchEvent(new EntityEffectEvent(EntityEffectEvent.EFFECT_TIMEOUT,id));
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import flash.display.Sprite;
   import net.bigpoint.darkorbit.Main;
   
   public interface IEffect
   {
      
      function getEffect() : Sprite;
      
      function start() : void;
      
      function stop() : void;
      
      function update(param1:Main, param2:Array) : void;
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   
   public class InvincibilityEffect extends EffectBase
   {
      
      public function InvincibilityEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         start();
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import flash.display.MovieClip;
   import flash.media.Sound;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class LevelUpEffect extends EffectBase
   {
      
      private static const ANIMATION_SOUND_LINKAGE_ID:String = "soundfx";
      
      private static const STD_FRAME_DURATION:Number = 0.04;
      
      public function LevelUpEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         var _loc2_:Sound = null;
         if(Settings.playSFX)
         {
            _loc2_ = ResourceManager.getSound(pattern.resKey,ANIMATION_SOUND_LINKAGE_ID);
            if(_loc2_ != null)
            {
               _loc2_.play();
            }
         }
         this.clip.visible = true;
         this.clip.y -= 150;
         var _loc1_:Number = MovieClip(this.clip).framesLoaded * STD_FRAME_DURATION;
         TweenMax.to(this.clip,_loc1_,{
            "ease":Linear.easeNone,
            "frame":MovieClip(this.clip).framesLoaded,
            "onComplete":this.handleEffectFinished
         });
      }
      
      private function handleEffectFinished() : void
      {
         dispatchEvent(new EntityEffectEvent(EntityEffectEvent.EFFECT_TIMEOUT,id));
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import com.greensock.easing.Strong;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   
   public class LocatorGearEffect extends EffectBase
   {
      
      public function LocatorGearEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         this.playInstantAnimation(1,true,false,1);
         var _loc1_:Bitmap = args[1] as Bitmap;
         var _loc2_:Sprite = new Sprite();
         var _loc3_:MovieClip = SWFFinisher(ResourceManager.fileCollection.getFinisher("locator")).getEmbededMovieClip("iconframe");
         _loc1_.x = -_loc1_.width * 0.5;
         _loc1_.y = -_loc1_.height * 0.5;
         _loc2_.y = -110;
         _loc2_.addChild(_loc3_);
         _loc2_.addChild(_loc1_);
         getEffect().addChild(_loc2_);
      }
      
      override public function update(param1:Main, param2:Array) : void
      {
         var _loc8_:int = 0;
         var _loc3_:int = int(param2[0]);
         var _loc4_:int = int(param2[1]);
         var _loc5_:int = param1.screenManager.map.getShipManager().getHero().x;
         var _loc6_:int = param1.screenManager.map.getShipManager().getHero().y;
         var _loc7_:Sprite = getEffect();
         var _loc9_:Number = 0.2;
         if(_loc3_ == -1 && _loc4_ == -1)
         {
            if(_loc7_.filters.length == 0)
            {
               _loc7_.alpha = _loc9_;
            }
         }
         else
         {
            _loc7_.alpha = 1;
            _loc8_ = Math.round(Math.atan2(_loc4_ - _loc6_,_loc3_ - _loc5_) * 180 / Math.PI) + 90;
            if(_loc8_ != Math.round(_loc7_.rotation) && _loc8_ != 360 + Math.round(_loc7_.rotation))
            {
               TweenLite.to(_loc7_,1,{
                  "rotation":_loc8_,
                  "ease":Strong.easeOut
               });
               if(_loc7_.numChildren > 0)
               {
                  TweenLite.to(_loc7_.getChildAt(1),1,{
                     "rotation":-_loc8_,
                     "ease":Strong.easeOut
                  });
               }
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import flash.events.Event;
   import net.bigpoint.darkorbit.lazyload.AssetLazyLoader;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   
   public class PetEffect extends EffectBase
   {
      
      public function PetEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         this.petSpawnOnePlay();
      }
      
      public function petSpawnOnePlay() : void
      {
         var _loc1_:AssetLazyLoader = null;
         if(this.clip != null)
         {
            this.playInstantAnimation(1,true,false,1);
         }
         else
         {
            _loc1_ = new AssetLazyLoader();
            _loc1_.addEventListener(AssetLazyLoader.ASSET_LOADED,this.handlePlayOnLoaded);
            _loc1_.loadAsset(pattern.resKey);
         }
      }
      
      private function handlePlayOnLoaded(param1:Event) : void
      {
         this.playInstantAnimation(1,true,false,1);
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import com.greensock.TweenMax;
   import flash.display.Sprite;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.ship.MapObject;
   
   public class RageEffect extends EffectBase
   {
      
      private var ship:MapObject;
      
      private var tween:TweenMax;
      
      public function RageEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         this.ship = args[0] as MapObject;
         var _loc1_:Sprite = this.ship.getShipContainer();
         if(_loc1_ != null)
         {
            this.tween = TweenMax.to(_loc1_,0.5,{
               "yoyo":true,
               "repeat":-1,
               "glowFilter":{
                  "color":16711680,
                  "alpha":1,
                  "blurX":60,
                  "blurY":60
               }
            });
         }
      }
      
      override public function stop() : void
      {
         var _loc1_:Sprite = null;
         if(this.ship != null)
         {
            if(this.tween != null)
            {
               this.tween.kill();
               this.tween = null;
            }
            _loc1_ = this.ship.getShipContainer();
            if(_loc1_ != null)
            {
               _loc1_.filters = null;
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import flash.events.Event;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   
   public class RotationEffect extends EffectBase
   {
      
      public function RotationEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         this.addRotationTick();
      }
      
      public function addRotationTick() : void
      {
         addEventListener(Event.ENTER_FRAME,this.mapObjectRotationCallback);
      }
      
      public function mapObjectRotationCallback(param1:Event) : void
      {
         if(associatedMapObject != null)
         {
            if(associatedMapObject.currentlyMoving)
            {
               this.actionOnMovingRotation();
            }
            else
            {
               this.actionOnStationaryRotation();
            }
         }
      }
      
      public function actionOnMovingRotation() : void
      {
      }
      
      public function actionOnStationaryRotation() : void
      {
      }
      
      override public function cleanup() : void
      {
         removeEventListener(Event.ENTER_FRAME,this.mapObjectRotationCallback);
         associatedMapObject = null;
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import com.greensock.TweenLite;
   import com.greensock.easing.Linear;
   import flash.display.MovieClip;
   import flash.events.Event;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.lazyload.AssetLazyLoader;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   
   public class SaboteurEffect extends RotationEffect
   {
      
      private var clipStationary:MovieClip;
      
      private var clipMoving:MovieClip;
      
      public function SaboteurEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         this.clipStationary = MovieClip(this.clip).stationary;
         this.clipMoving = MovieClip(this.clip).moving;
         addRotationTick();
         this.start();
         this.clipStationary.alpha = 0;
         this.clipMoving.alpha = 0;
      }
      
      override public function start() : void
      {
         var _loc1_:AssetLazyLoader = null;
         if(this.clip != null)
         {
            this.clip.visible = true;
            ScreenManager.playAnimation(this.clipMoving,15,true);
            ScreenManager.playAnimation(this.clipStationary,15,true);
         }
         else
         {
            _loc1_ = new AssetLazyLoader();
            _loc1_.addEventListener(AssetLazyLoader.ASSET_LOADED,this.handlePlayOnLoaded);
            _loc1_.loadAsset(pattern.resKey);
         }
      }
      
      private function handlePlayOnLoaded(param1:Event) : void
      {
         this.clip.visible = true;
         ScreenManager.playAnimation(this.clipMoving,15,true);
         ScreenManager.playAnimation(this.clipStationary,15,true);
      }
      
      override public function stop() : void
      {
         this.stopAnimation();
      }
      
      override public function actionOnMovingRotation() : void
      {
         TweenLite.to(this.clipMoving,1,{
            "ease":Linear.easeNone,
            "alpha":1
         });
         TweenLite.to(this.clipStationary,0.7,{
            "ease":Linear.easeNone,
            "alpha":0
         });
         TweenLite.to(this.clip,0.25,{"shortRotation":{"rotation":associatedMapObject.movementDirection}});
      }
      
      override public function actionOnStationaryRotation() : void
      {
         TweenLite.to(this.clipMoving,0.7,{
            "ease":Linear.easeNone,
            "alpha":0
         });
         TweenLite.to(this.clipStationary,1,{
            "ease":Linear.easeNone,
            "alpha":1
         });
         TweenLite.to(this.clip,0.25,{"shortRotation":{"rotation":associatedMapObject.shipRotation}});
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   
   public class ShieldBackupTechEffect extends EffectBase
   {
      
      public function ShieldBackupTechEffect(param1:int, param2:EffectPattern, param3:Boolean = true, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
         this.fps = 15;
      }
      
      override public function initEffectVisuals() : void
      {
         this.playAnimation();
         AudioManager.playSoundEffect(37);
         effectMc.alpha = 0;
         TweenLite.to(effectMc,0.25,{
            "alpha":1,
            "onComplete":this.handleShield
         });
      }
      
      private function handleShield() : void
      {
         TweenMax.delayedCall(1,this.handleFadeOutShield);
      }
      
      private function handleFadeOutShield() : void
      {
         TweenLite.to(effectMc,0.25,{
            "alpha":0,
            "onComplete":this.handleTimeoutEventDispatch
         });
      }
      
      private function handleTimeoutEventDispatch() : void
      {
         dispatchEvent(new EntityEffectEvent(EntityEffectEvent.EFFECT_TIMEOUT,id));
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import flash.events.Event;
   import net.bigpoint.darkorbit.lazyload.AssetLazyLoader;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   import net.bigpoint.darkorbit.ship.MapObject;
   
   public class SkillEffect extends EffectBase
   {
      
      private const NUMBER_OF_LIGHT_FLASHES_SOLACE:int = 11;
      
      public function SkillEffect(param1:int, param2:EffectPattern, param3:MapObject, param4:Boolean = false, param5:Array = null, param6:Boolean = true)
      {
         this.associatedMapObject = param3;
         super(param1,param2,param4,param5,param6);
      }
      
      override public function initEffectVisuals() : void
      {
         resizeMC(Math.max(associatedMapObject.shipClip.height,associatedMapObject.shipClip.width) * 0.5 / 65);
      }
      
      public function startSolaceInstantAnimation() : void
      {
         var _loc1_:AssetLazyLoader = null;
         if(this.clip != null)
         {
            playInstantAnimation();
         }
         else
         {
            _loc1_ = new AssetLazyLoader();
            _loc1_.addEventListener(AssetLazyLoader.ASSET_LOADED,this.handlePlayOnLoaded);
            _loc1_.loadAsset(pattern.resKey);
         }
         if(associatedMapObject.shipLightDecorator.numberOfFlashes < 0)
         {
            associatedMapObject.shipLightDecorator.startFlashes(this.NUMBER_OF_LIGHT_FLASHES_SOLACE);
         }
      }
      
      private function handlePlayOnLoaded(param1:Event) : void
      {
         playInstantAnimation();
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   
   public class SkullEffect extends EffectBase
   {
      
      public function SkullEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         this.start();
      }
   }
}

package net.bigpoint.darkorbit.ship.effects
{
   import com.greensock.TweenMax;
   import com.greensock.easing.Linear;
   import com.pixelwelders.fx.EarthquakeManager;
   import flash.events.Event;
   import flash.media.SoundChannel;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.pattern.EffectPattern;
   
   public class SpeedBuffEffect extends RotationEffect
   {
      
      private var speedBuffStartupSound:SoundChannel;
      
      private var speedBuffSound:SoundChannel;
      
      private var startupSoundPlayed:Boolean = false;
      
      public function SpeedBuffEffect(param1:int, param2:EffectPattern, param3:Boolean = false, param4:Array = null, param5:Boolean = true)
      {
         super(param1,param2,param3,param4,param5);
      }
      
      override public function initEffectVisuals() : void
      {
         addRotationTick();
         start();
      }
      
      override public function actionOnMovingRotation() : void
      {
         this.clip.visible = true;
         if(this.clip != null)
         {
            if(!this.startupSoundPlayed)
            {
               this.speedBuffStartupSound = AudioManager.playSoundEffect(81,false,false,associatedMapObject.x,associatedMapObject.y);
               this.startupSoundPlayed = true;
            }
            EarthquakeManager.getInstance().addQuake(associatedMapObject.shipClip,8);
            this.clip.x = associatedMapObject.currentEnginePosition.x;
            this.clip.y = associatedMapObject.currentEnginePosition.y;
            TweenMax.to(this.clip,0.1,{
               "ease":Linear.easeNone,
               "alpha":1
            });
            TweenMax.to(this.clip,0.25,{"shortRotation":{"rotation":associatedMapObject.movementDirection}});
            if(!this.speedBuffSound)
            {
               this.speedBuffSound = AudioManager.playSoundEffect(82,true,true,associatedMapObject.x,associatedMapObject.y);
            }
         }
      }
      
      override public function actionOnStationaryRotation() : void
      {
         if(this.clip != null)
         {
            EarthquakeManager.getInstance().killQuake(associatedMapObject.shipClip);
            this.clip.alpha = 0;
            this.clip.x = associatedMapObject.currentEnginePosition.x;
            this.clip.y = associatedMapObject.currentEnginePosition.y;
            TweenMax.to(this.clip,0.25,{"shortRotation":{"rotation":associatedMapObject.movementDirection}});
            if(this.speedBuffSound != null)
            {
               AudioManager.removeLoop(this.speedBuffSound,true);
               this.speedBuffSound = null;
            }
         }
      }
      
      override public function cleanup() : void
      {
         removeEventListener(Event.ENTER_FRAME,mapObjectRotationCallback);
         EarthquakeManager.getInstance().killQuake(associatedMapObject.shipClip);
         associatedMapObject = null;
         if(this.speedBuffSound != null)
         {
            AudioManager.removeLoop(this.speedBuffSound,true);
            this.speedBuffSound = null;
         }
      }
   }
}

package net.bigpoint.darkorbit.ship.pet
{
   import net.bigpoint.darkorbit.pattern.GearPattern;
   
   public class Gear
   {
      
      public var type:int;
      
      public var level:int;
      
      public var quantity:int;
      
      public var pattern:GearPattern;
      
      public function Gear(param1:int, param2:int, param3:int, param4:GearPattern)
      {
         super();
         this.type = param1;
         this.level = param2;
         this.quantity = param3;
         this.pattern = param4;
      }
   }
}

package net.bigpoint.darkorbit.ship.pet
{
   import net.bigpoint.darkorbit.pattern.GearPattern;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   
   public class GearFactory
   {
      
      public function GearFactory()
      {
         super();
      }
      
      public static function getGear(param1:int, param2:int, param3:int) : Gear
      {
         var _loc4_:GearPattern = PatternManager.petGearPatterns[param1];
         return new Gear(param1,param2,param3,_loc4_);
      }
   }
}

package net.bigpoint.darkorbit.ship.pet
{
   import flash.display.Sprite;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ship.MapObject;
   import net.bigpoint.darkorbit.ship.ShipManager;
   
   public class Pet extends MapObject
   {
      
      private static const logger:ILogger = Log.getLogger("Pet");
      
      public var owner:int;
      
      public var level:int = 0;
      
      public var currentFuel:int;
      
      public var maxFuel:int;
      
      public var gears:Array = [];
      
      public var evasionProtocolEquiped:Boolean = false;
      
      public function Pet(param1:ShipManager, param2:int, param3:String, param4:int, param5:int, param6:Sprite)
      {
         super(param1,param2,param3,param6);
         this.owner = param4;
         this.level = param5;
      }
      
      public function setFuel(param1:int, param2:int) : void
      {
         this.maxFuel = param2;
         this.currentFuel = param1;
      }
      
      public function hasEvasionProtocol() : Boolean
      {
         return this.evasionProtocolEquiped;
      }
   }
}

package net.bigpoint.darkorbit.starfield
{
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   
   public class StarElement extends Bitmap
   {
      
      public var speed:Number;
      
      public function StarElement(param1:uint)
      {
         super(new BitmapData(1,1,false,param1));
      }
   }
}

package net.bigpoint.darkorbit.starfield
{
   import flash.display.Sprite;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   
   public class Starfield extends Sprite
   {
      
      private var elements:Array;
      
      private var fieldWidth:int;
      
      private var fieldHeight:int;
      
      private var timer:Timer;
      
      private var xSpeed:Number;
      
      private var ySpeed:Number;
      
      private var fps:int = 40;
      
      public var color:int;
      
      public function Starfield(param1:int, param2:int, param3:uint, param4:int = 100)
      {
         var _loc6_:StarElement = null;
         super();
         this.fieldWidth = param1;
         this.fieldHeight = param2;
         this.elements = [];
         this.graphics.beginFill(0,0);
         this.graphics.drawRect(0,0,param1,param2);
         this.graphics.endFill();
         var _loc5_:int = 0;
         while(_loc5_ < param4)
         {
            _loc6_ = new StarElement(param3);
            this.elements.push(_loc6_);
            _loc6_.x = Math.random() * param1;
            _loc6_.y = Math.random() * param2;
            _loc6_.speed = Math.random() * 3 + 0.5;
            this.addChild(_loc6_);
            _loc5_++;
         }
         this.mouseEnabled = false;
         this.mouseChildren = false;
         this.timer = new Timer(1000 / this.fps,0);
         this.timer.addEventListener(TimerEvent.TIMER,this.onTimerTick);
         this.timer.start();
      }
      
      public function moveField(param1:Number, param2:Number) : void
      {
         this.xSpeed = param1;
         this.ySpeed = param2;
      }
      
      public function onTimerTick(param1:TimerEvent) : void
      {
         var _loc2_:Number = NaN;
         var _loc3_:Number = NaN;
         var _loc4_:Number = NaN;
         var _loc5_:StarElement = null;
         for each(_loc5_ in this.elements)
         {
            _loc2_ = _loc5_.speed;
            _loc3_ = _loc5_.x = _loc5_.x + _loc2_ * this.xSpeed;
            _loc4_ = _loc5_.y = _loc5_.y + _loc2_ * this.ySpeed;
            if(_loc3_ < 0)
            {
               _loc5_.x += this.fieldWidth;
            }
            else if(_loc3_ > this.fieldWidth)
            {
               _loc5_.x -= this.fieldWidth;
            }
            if(_loc4_ < 0)
            {
               _loc5_.y += this.fieldHeight;
            }
            else if(_loc4_ > this.fieldHeight)
            {
               _loc5_.y -= this.fieldHeight;
            }
         }
      }
      
      public function cleanup() : void
      {
         var _loc1_:StarElement = null;
         for each(_loc1_ in this.elements)
         {
            this.removeChild(_loc1_);
         }
         this.elements = null;
         if(this.timer != null)
         {
            this.timer.stop();
            this.timer.removeEventListener(TimerEvent.TIMER,this.onTimerTick);
         }
      }
   }
}

package net.bigpoint.darkorbit.station
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import flash.events.Event;
   import flash.filters.GlowFilter;
   import flash.text.TextField;
   import flash.text.TextFieldAutoSize;
   import flash.text.TextFormat;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.Styles;
   import net.bigpoint.darkorbit.lazyload.AssetLazyLoader;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   
   public class RelayStation extends MovieClip
   {
      
      private static var logger:ILogger = Log.getLogger("RelayStation");
      
      public static var filter:GlowFilter = new GlowFilter(0,1,2,2,50,3);
      
      private var finisher:SWFFinisher;
      
      private var station:MovieClip;
      
      public var relayID:int;
      
      public var relayName:String;
      
      public var posX:Number;
      
      public var posY:Number;
      
      public var hitpoints:Number = 0;
      
      private var maxHitpoints:Number;
      
      private var map:Map;
      
      private var hitpointClip:Sprite = new Sprite();
      
      private var hitpointBackgroundClip:Sprite = new Sprite();
      
      public var clickRadius:int = 45;
      
      public var clickOffSetX:int = 0;
      
      public var clickOffSetY:int = 0;
      
      public var isSelected:Boolean = false;
      
      public var borderClip:MovieClip;
      
      public var healthStation:Station;
      
      private var loader:AssetLazyLoader;
      
      private var pattern:StationPattern;
      
      public function RelayStation(param1:int, param2:int, param3:String, param4:Number, param5:Number, param6:Map)
      {
         super();
         this.loader = new AssetLazyLoader();
         this.relayID = param1;
         this.relayName = param3;
         this.posX = param4;
         this.posY = param5;
         this.map = param6;
         this.pattern = PatternManager.stationPatterns[param2];
         this.finisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.borderClip = MovieClip(this.finisher.getEmbededMovieClip("ship_border"));
         if(!ResourceManager.fileCollection.isLoaded(this.pattern.resKey))
         {
            this.loader.addEventListener(AssetLazyLoader.ASSET_LOADED,this.createRelay);
            this.loader.loadAsset(this.pattern.resKey);
         }
         else
         {
            this.createRelay(null);
         }
      }
      
      private function createRelay(param1:Event) : void
      {
         this.finisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(this.pattern.resKey));
         this.station = this.finisher.getEmbededMovieClip("mc");
         this.station.glow.alpha = 0;
         this.borderClip.visible = false;
         this.borderClip.gotoAndStop(1);
         addChild(this.station);
         this.createHitpointBarContainers();
         this.map.getStationManager().assets.push(this);
         addChild(this.borderClip);
         this.createNickLabel();
      }
      
      private function createNickLabel() : void
      {
         var _loc1_:int = 16711680;
         var _loc2_:TextField = new TextField();
         var _loc3_:TextFormat = new TextFormat(Styles.nickFmt.font,Styles.nickFontHeight,_loc1_,Styles.nickFmt.bold);
         _loc2_.defaultTextFormat = _loc3_;
         _loc2_.embedFonts = Styles.nickEmbed;
         _loc2_.text = this.relayName.toString();
         _loc2_.defaultTextFormat = _loc3_;
         _loc2_.embedFonts = Styles.nickEmbed;
         addChild(_loc2_);
         _loc2_.x = -35;
         _loc2_.y = 45;
         _loc2_.filters = [filter];
         _loc2_.autoSize = TextFieldAutoSize.LEFT;
      }
      
      private function createHitpointBarContainers() : void
      {
         this.hitpointBackgroundClip.graphics.lineStyle(1,0);
         this.hitpointBackgroundClip.graphics.beginFill(7171437);
         this.hitpointBackgroundClip.graphics.drawRect(0,0,50,3);
         this.hitpointBackgroundClip.graphics.endFill();
         this.hitpointBackgroundClip.x = -25;
         this.hitpointBackgroundClip.y = -30;
         this.addChild(this.hitpointClip);
         this.hitpointClip.graphics.lineStyle(1,0);
         this.hitpointClip.graphics.beginFill(4832832);
         this.hitpointClip.graphics.drawRect(0,0,50,3);
         this.hitpointClip.graphics.endFill();
         this.hitpointClip.x = -25;
         this.hitpointClip.y = 30;
         this.addChild(this.hitpointClip);
         this.setDamageBarVisibility(false);
      }
      
      public function setDamageBarVisibility(param1:Boolean) : void
      {
         this.hitpointBackgroundClip.visible = param1;
         this.hitpointClip.visible = param1;
      }
      
      public function toggleBorderClip(param1:Boolean) : void
      {
         this.borderClip.visible = param1;
      }
      
      public function setUpHitpoints(param1:int) : void
      {
         this.maxHitpoints = param1;
         this.setDamageBarVisibility(true);
      }
      
      public function updateHitpointBar(param1:int, param2:int, param3:Boolean = false) : void
      {
         var _loc4_:Number = NaN;
         var _loc5_:Number = NaN;
         this.hitpoints = param1;
         if(param2 != 0)
         {
            this.maxHitpoints = param2;
         }
         if(this.hitpoints == 0)
         {
            this.hitpointClip.width = 0;
            this.hitpointClip.visible = false;
         }
         else
         {
            this.hitpointClip.visible = true;
            _loc4_ = 50 / this.maxHitpoints * this.hitpoints;
            _loc5_ = 100 / this.maxHitpoints * this.hitpoints;
            if(param3)
            {
               TweenLite.to(this.hitpointClip,0.25,{"width":_loc4_});
               TweenLite.to(this.station.glow,0.25,{"alpha":_loc5_ / 100});
            }
            else
            {
               this.hitpointClip.width = _loc4_;
               this.station.glow.alpha = _loc5_ / 100;
            }
         }
      }
   }
}

package net.bigpoint.darkorbit.station
{
   import flash.display.BitmapData;
   import flash.display.MovieClip;
   import flash.geom.Matrix;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.pattern.DynamicResource;
   
   public class Station extends DynamicResource
   {
      
      public static const logger:ILogger = Log.getLogger("Station");
      
      private var stationName:String;
      
      private var posX:int;
      
      private var posY:int;
      
      private var pattern:StationPattern;
      
      private var iconBitmapData:BitmapData;
      
      public var stationGraphic:MovieClip;
      
      private var id:int;
      
      public function Station(param1:int, param2:int, param3:String, param4:int, param5:int, param6:StationPattern)
      {
         super(param2);
         this.id = param1;
         this.posX = param4;
         this.posY = param5;
         this.stationName = param3;
         this.pattern = param6;
      }
      
      public function getPosX() : int
      {
         return this.posX;
      }
      
      public function getPosY() : int
      {
         return this.posY;
      }
      
      public function getPattern() : StationPattern
      {
         return this.pattern;
      }
      
      public function setIcon(param1:int) : void
      {
         param1 += 20;
         var _loc2_:MovieClip = clip;
         var _loc3_:Matrix = new Matrix();
         _loc3_.translate(_loc2_.width / 2,_loc2_.height / 2);
         _loc3_.scale(scaleSize.x,scaleSize.y);
         var _loc4_:int = _loc2_.width / param1;
         var _loc5_:int = _loc2_.height / param1;
         this.iconBitmapData = new BitmapData(_loc4_,_loc5_,true,10);
         this.iconBitmapData.draw(_loc2_,_loc3_);
      }
      
      public function getIcon() : BitmapData
      {
         return this.iconBitmapData;
      }
      
      public function deleteIcon() : void
      {
         this.iconBitmapData = null;
      }
      
      public function setHealthStationStatus(param1:Boolean) : void
      {
         if(param1)
         {
            this.stationGraphic.cross.alpha = 1;
            this.stationGraphic.yellowCross.alpha = 0;
         }
         else
         {
            this.stationGraphic.cross.alpha = 0;
            this.stationGraphic.yellowCross.alpha = 1;
         }
      }
   }
}

package net.bigpoint.darkorbit.station
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import com.greensock.TweenMax;
   import com.greensock.easing.Bounce;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import mx.logging.ILogger;
   import mx.logging.Log;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.map.Map;
   import net.bigpoint.darkorbit.pattern.PatternManager;
   import net.bigpoint.darkorbit.settings.Settings;
   
   public class StationManager
   {
      
      private static const logger:ILogger = Log.getLogger("StationManager");
      
      private var stations:Array;
      
      public var assets:Array = [];
      
      private var map:Map;
      
      private var halfScreenWidth:int;
      
      private var halfScreenHeight:int;
      
      public function StationManager(param1:Map)
      {
         super();
         this.map = param1;
         this.halfScreenWidth = ScreenManager.getHalfScreenWidth();
         this.halfScreenHeight = ScreenManager.getHalfScreenHeight();
         this.stations = [];
      }
      
      private function attachClip(param1:Station, param2:String) : void
      {
         var _loc6_:MovieClip = null;
         var _loc3_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher(param2));
         var _loc4_:MovieClip = MovieClip(_loc3_.getEmbededMovieClip("mc"));
         if(param1.getTypeID() == 4)
         {
            this.prepareHealthStation(_loc4_);
            param1.stationGraphic = _loc4_;
         }
         _loc4_.mouseEnabled = Main.mouseEventsEnabled;
         _loc4_.mouseChildren = Main.mouseEventsEnabled;
         _loc4_.x = param1.getPosX();
         _loc4_.y = param1.getPosY();
         param1.clip = _loc4_;
         this.map.getMain().screenManager.getPortalLayer().addChild(_loc4_);
         var _loc5_:int = 0;
         while(_loc5_ < 11)
         {
            _loc6_ = _loc4_["glow_" + _loc5_];
            if(_loc6_ != null)
            {
               _loc6_.alpha = 0;
               _loc6_.mouseEnabled = Main.mouseEventsEnabled;
               _loc6_.mouseChildren = Main.mouseEventsEnabled;
               _loc6_.blendMode = "screen";
               this.startGlow(_loc6_);
            }
            _loc5_++;
         }
         if(this.map.getMinimapManager().getMiniMap())
         {
            this.map.getMinimapManager().getMiniMap().redrawEntities();
         }
      }
      
      private function prepareHealthStation(param1:MovieClip) : void
      {
         param1.topLight.alpha = 0;
         param1.botLight.alpha = 0;
         param1.rightLight.alpha = 0;
         param1.leftLight.alpha = 0;
         param1.cross.alpha = 0;
      }
      
      public function hitTest(param1:int, param2:int) : RelayStation
      {
         var _loc3_:RelayStation = null;
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc7_:Number = NaN;
         for each(_loc3_ in this.assets)
         {
            _loc4_ = _loc3_.clickRadius;
            _loc4_ *= _loc4_;
            _loc5_ = _loc3_.clickOffSetX;
            _loc6_ = _loc3_.clickOffSetY;
            _loc7_ = Math.pow(_loc3_.y + _loc6_ - param2,2) + Math.pow(_loc3_.x + _loc5_ - param1,2);
            if(_loc7_ < _loc4_)
            {
               return _loc3_;
            }
         }
         return null;
      }
      
      public function getSelectedAsset() : RelayStation
      {
         var _loc1_:RelayStation = null;
         for each(_loc1_ in this.assets)
         {
            if(_loc1_.isSelected == true)
            {
               return _loc1_;
            }
         }
         return null;
      }
      
      public function getAssetForID(param1:int) : RelayStation
      {
         var _loc2_:RelayStation = null;
         for each(_loc2_ in this.assets)
         {
            if(_loc2_.relayID == param1)
            {
               return _loc2_;
            }
         }
         return null;
      }
      
      private function startGlow(param1:MovieClip) : void
      {
         TweenLite.to(param1,1,{
            "alpha":1,
            "onComplete":this.handleGlow,
            "onCompleteParams":[param1]
         });
      }
      
      private function handleGlow(param1:MovieClip) : void
      {
         TweenLite.to(param1,1,{
            "ease":Bounce.easeOut,
            "delay":1,
            "alpha":0,
            "onComplete":this.startGlow,
            "onCompleteParams":[param1]
         });
      }
      
      public function cleanup() : void
      {
         var _loc3_:Station = null;
         var _loc4_:MovieClip = null;
         var _loc5_:Sprite = null;
         var _loc6_:int = 0;
         var _loc7_:MovieClip = null;
         var _loc8_:RelayStation = null;
         var _loc1_:int = 0;
         while(_loc1_ < this.stations.length)
         {
            _loc3_ = this.stations[_loc1_];
            _loc4_ = _loc3_.clip;
            if(_loc4_ != null)
            {
               _loc5_ = this.map.getMain().screenManager.getPortalLayer();
               if(_loc5_.contains(_loc4_))
               {
                  this.map.getMain().screenManager.getPortalLayer().removeChild(_loc4_);
               }
               _loc6_ = 0;
               while(_loc6_ < 11)
               {
                  _loc7_ = _loc4_["glow_" + _loc6_];
                  if(_loc7_ != null)
                  {
                     TweenMax.killTweensOf(_loc7_);
                  }
                  _loc6_++;
               }
            }
            _loc3_.removeClip();
            _loc1_++;
         }
         var _loc2_:Sprite = this.map.getMain().screenManager.getShipLayer();
         _loc1_ = 0;
         while(_loc1_ < this.assets.length)
         {
            _loc8_ = this.assets[_loc1_];
            if(_loc2_.contains(_loc8_))
            {
               _loc2_.removeChild(_loc8_);
            }
            _loc1_++;
         }
         this.stations = [];
      }
      
      private function onClipLoaded(param1:SWFFinisher) : void
      {
         var _loc3_:Station = null;
         var _loc4_:StationPattern = null;
         if(Settings.unloadResources)
         {
            this.map.addFinisherToList(param1);
         }
         var _loc2_:int = 0;
         while(_loc2_ < this.stations.length)
         {
            _loc3_ = this.stations[_loc2_];
            _loc4_ = PatternManager.stationPatterns[_loc3_.getTypeID()];
            if(_loc4_.getResKey() == param1.fileVO.id)
            {
               this.attachClip(_loc3_,_loc4_.getResKey());
            }
            _loc2_++;
         }
      }
      
      public function addSpaceStation(param1:int, param2:int, param3:String, param4:int, param5:int) : void
      {
         if(this.stations[param1] != undefined)
         {
            return;
         }
         var _loc6_:StationPattern = PatternManager.stationPatterns[param2];
         if(_loc6_ == null)
         {
            return;
         }
         var _loc7_:Station = new Station(param1,param2,param3,param4,param5,_loc6_);
         this.stations[param1] = _loc7_;
         if(ResourceManager.fileCollection.isLoaded(_loc6_.getResKey()))
         {
            this.attachClip(_loc7_,_loc6_.getResKey());
         }
         else
         {
            ResourceManager.fileCollection.load(_loc6_.getResKey(),this.onClipLoaded);
         }
      }
      
      public function getStations() : Array
      {
         return this.stations;
      }
   }
}

package net.bigpoint.darkorbit.station
{
   import net.bigpoint.darkorbit.pattern.ResourcePattern;
   
   public class StationPattern extends ResourcePattern
   {
      
      private var width:int;
      
      private var height:int;
      
      public function StationPattern(param1:int, param2:String, param3:int, param4:int)
      {
         super(param1,param2);
         this.width = param3;
         this.height = param4;
      }
      
      public function getWidth() : int
      {
         return this.width;
      }
      
      public function getHeight() : int
      {
         return this.height;
      }
   }
}

package net.bigpoint.darkorbit.tdm
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.greensock.TweenLite;
   import com.greensock.easing.Linear;
   import flash.display.Bitmap;
   import flash.display.MovieClip;
   import flash.display.Sprite;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   
   public class TDMCounter extends MovieClip
   {
      
      private var tdmManager:TDMManager;
      
      private var centerBitmap:Bitmap;
      
      private var displayOnList:Array = [];
      
      private var _lightsOff:int = 10;
      
      public function TDMCounter(param1:TDMManager)
      {
         super();
         this.tdmManager = param1;
         this.init();
      }
      
      private function init() : void
      {
         var _loc5_:Bitmap = null;
         var _loc6_:Bitmap = null;
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.alpha = 0;
         this.centerBitmap = _loc1_.getEmbededBitmap("tdm_counter");
         this.addChild(this.centerBitmap);
         this.x = ScreenManager.getHalfScreenWidth() - this.centerBitmap.width / 2;
         this.y = ScreenManager.getHalfScreenHeight() - this.centerBitmap.height;
         var _loc2_:Sprite = new Sprite();
         var _loc3_:int = 21;
         var _loc4_:int = 0;
         while(_loc4_ < 10)
         {
            _loc5_ = _loc1_.getEmbededBitmap("center_display_off");
            _loc2_.addChild(_loc5_);
            _loc5_.y = _loc4_ * _loc3_;
            _loc6_ = _loc1_.getEmbededBitmap("center_display_on");
            _loc6_.visible = false;
            _loc2_.addChild(_loc6_);
            _loc6_.y = _loc4_ * _loc3_;
            this.displayOnList.push(_loc6_);
            _loc4_++;
         }
         _loc2_.x = 12;
         _loc2_.y = 2;
         this.addChild(_loc2_);
      }
      
      public function startCounter(param1:int) : void
      {
         if(this.lightsOff == 10)
         {
            TweenLite.to(this,param1,{
               "ease":Linear.easeNone,
               "lightsOff":0,
               "onUpdate":this.onUpdate
            });
         }
      }
      
      private function onUpdate() : void
      {
         var _loc1_:Bitmap = this.displayOnList[this.lightsOff];
         if(!_loc1_.visible)
         {
            if(this.lightsOff == 0)
            {
               AudioManager.playSoundEffect(28);
               this.tdmManager.removeIntro();
            }
            else
            {
               AudioManager.playSoundEffect(27);
            }
         }
         _loc1_.visible = true;
      }
      
      public function get lightsOff() : int
      {
         return this._lightsOff;
      }
      
      public function set lightsOff(param1:int) : void
      {
         this._lightsOff = param1;
      }
   }
}

package net.bigpoint.darkorbit.tdm
{
   import com.bigpoint.filecollection.finish.SWFFinisher;
   import com.bigpoint.utils.BPLocale;
   import com.bigpoint.utils.TimeFormatter;
   import com.greensock.TweenLite;
   import com.greensock.easing.Bounce;
   import com.greensock.easing.Expo;
   import flash.display.Bitmap;
   import flash.display.DisplayObject;
   import flash.display.Sprite;
   import flash.events.TimerEvent;
   import flash.utils.Timer;
   import net.bigpoint.darkorbit.Hero;
   import net.bigpoint.darkorbit.Main;
   import net.bigpoint.darkorbit.ResourceManager;
   import net.bigpoint.darkorbit.ScreenManager;
   import net.bigpoint.darkorbit.audio.AudioManager;
   import net.bigpoint.darkorbit.gui.container.SimpleContainer;
   import net.bigpoint.darkorbit.gui.elements.InfoField;
   import net.bigpoint.darkorbit.gui.elements.ScoreElement;
   import net.bigpoint.darkorbit.gui.elements.SimpleElement;
   import net.bigpoint.darkorbit.gui.windows.SimpleWindow;
   import net.bigpoint.darkorbit.net.ServerCommands;
   
   public class TDMManager
   {
      
      private var main:Main;
      
      private var tdmTimer:Timer;
      
      private var localSecsElapsed:int;
      
      private var tdmTimeInSecs:int;
      
      private var leftFactionBitmap:Bitmap;
      
      private var rightFactionBitmap:Bitmap;
      
      private var tdmCounter:TDMCounter;
      
      private var leftScoreElement:ScoreElement;
      
      private var rightScoreElement:ScoreElement;
      
      private var homeFactionId:int;
      
      private var guestFactionId:int;
      
      private var playersLeftHome:int;
      
      private var playersLeftGuest:int;
      
      private var tdmIntroInit:Boolean = false;
      
      public function TDMManager(param1:Main)
      {
         super();
         this.main = param1;
      }
      
      public function parseCommands(param1:Array) : void
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         var _loc5_:String = null;
         var _loc6_:String = null;
         var _loc7_:String = null;
         var _loc8_:String = null;
         var _loc9_:int = 0;
         var _loc10_:int = 0;
         var _loc11_:int = 0;
         var _loc12_:int = 0;
         var _loc13_:int = 0;
         var _loc14_:int = 0;
         var _loc15_:int = 0;
         switch(param1[3])
         {
            case ServerCommands.DRAFT:
               _loc2_ = parseInt(param1[4]);
               _loc3_ = parseInt(param1[5]);
               this.updateTDMWindow(_loc2_,_loc3_);
               if(_loc2_ == 0 && _loc3_ == -1)
               {
                  this.main.getGuiManager().writeToLog(BPLocale.getText("tdm_pull_phase_finished"));
                  break;
               }
               if(_loc2_ == 1)
               {
                  this.main.getGuiManager().writeToLog(BPLocale.getText("tdm_pull_phase"));
               }
               break;
            case ServerCommands.GAMES_COUNT:
               _loc4_ = parseInt(param1[4]);
               this.setTDMGamesCount(_loc4_);
               break;
            case ServerCommands.MESSAGE:
               _loc5_ = param1[4];
               _loc6_ = param1[5];
               _loc7_ = param1[6];
               this.main.getGuiManager().writeToLog(BPLocale.getText(_loc5_).replace(_loc6_,_loc7_));
               break;
            case ServerCommands.GATE_MAPS_MESSAGE:
               _loc8_ = param1[4];
               _loc9_ = int(param1[5]);
               this.setTDMQueue(_loc8_,_loc9_);
               break;
            case ServerCommands.TDM_EVENT:
               switch(param1[4])
               {
                  case ServerCommands.TDM_STATS_INIT:
                     _loc10_ = int(param1[5]);
                     _loc11_ = int(param1[6]);
                     this.initStats(_loc10_,_loc11_);
                     break;
                  case ServerCommands.TDM_INTRO_PHASE:
                     _loc12_ = int(param1[5]);
                     this.updateIntro(_loc12_);
                     break;
                  case ServerCommands.TDM_KICK_OFF:
                     break;
                  case ServerCommands.TDM_MATCH_RESULT:
                     _loc13_ = int(param1[5]);
                     _loc14_ = int(param1[6]);
                     _loc15_ = int(param1[7]);
                     this.updateMatchResult(-1,_loc13_,_loc14_);
                     this.showResult(_loc15_);
                     break;
                  default:
                     _loc12_ = int(param1[4]);
                     _loc13_ = int(param1[5]);
                     _loc14_ = int(param1[6]);
                     this.updateMatchResult(_loc12_,_loc13_,_loc14_);
               }
         }
      }
      
      private function createTDMWindow() : SimpleWindow
      {
         var _loc6_:SimpleElement = null;
         var _loc1_:int = 0;
         var _loc2_:SimpleWindow = this.main.getGuiManager().createWindow(SimpleWindow.WINDOW_CLASS_TDM);
         var _loc3_:SimpleContainer = _loc2_.getContainer(SimpleContainer.CLASS_TDM);
         var _loc4_:Array = _loc3_.getAllElements();
         var _loc5_:int = 0;
         while(_loc5_ < _loc4_.length)
         {
            _loc6_ = _loc4_[_loc5_];
            _loc6_.x = _loc1_;
            _loc1_ += 60;
            _loc5_++;
         }
         return _loc2_;
      }
      
      private function setTimeInSec(param1:int) : void
      {
         this.tdmTimeInSecs = param1;
         if(this.tdmTimer != null)
         {
            this.stopTDMTimer();
         }
         this.tdmTimer = new Timer(1000,0);
         this.tdmTimer.addEventListener(TimerEvent.TIMER,this.handleTDMTimerTick);
         this.tdmTimer.start();
         this.localSecsElapsed = 1;
      }
      
      public function updateTDMWindow(param1:int, param2:int) : void
      {
         var _loc3_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_TDM);
         if(_loc3_ == null)
         {
            _loc3_ = this.createTDMWindow();
         }
         var _loc4_:SimpleContainer = _loc3_.getContainer(SimpleContainer.CLASS_TDM);
         var _loc5_:SimpleElement = _loc4_.getElement(SimpleElement.TYPE_TDM_TIMER);
         var _loc6_:SimpleElement = _loc4_.getElement(SimpleElement.TYPE_TDM_GAMES);
         var _loc7_:SimpleElement = _loc4_.getElement(SimpleElement.TYPE_TDM_QUEUE);
         switch(param1)
         {
            case 0:
               InfoField(_loc5_).updateTooltip(BPLocale.getText("ttip_tdmTimer_1"));
               if(param2 == -1)
               {
                  this.stopTDMTimer();
                  this.setTDMTimer(0);
               }
               else
               {
                  this.setTimeInSec(param2);
                  this.setTDMTimer(param2);
               }
               if(this.leftScoreElement != null && this.rightScoreElement != null)
               {
                  if(this.leftScoreElement.visible && this.rightScoreElement.visible)
                  {
                     this.leftScoreElement.visible = false;
                     this.rightScoreElement.visible = false;
                  }
               }
               if(!_loc6_.visible && !_loc7_.visible)
               {
                  _loc6_.visible = true;
                  _loc7_.visible = true;
               }
               break;
            case 1:
               InfoField(_loc5_).updateTooltip(BPLocale.getText("ttip_tdmTimer_2"));
               this.setTDMGamesCount(0);
               this.setTDMQueue("---",0);
               if(this.leftScoreElement != null && this.rightScoreElement != null)
               {
                  if(!this.leftScoreElement.visible && !this.rightScoreElement.visible)
                  {
                     this.leftScoreElement.visible = true;
                     this.rightScoreElement.visible = true;
                  }
               }
               if(_loc6_.visible && _loc7_.visible)
               {
                  _loc6_.visible = false;
                  _loc7_.visible = false;
               }
         }
      }
      
      private function handleTDMTimerTick(param1:TimerEvent) : void
      {
         var _loc2_:int = this.tdmTimeInSecs - this.localSecsElapsed++;
         if(_loc2_ < 0)
         {
            _loc2_ = 0;
         }
         if(_loc2_ == 0 && this.tdmTimer != null)
         {
            this.stopTDMTimer();
         }
         this.setTDMTimer(_loc2_);
      }
      
      private function stopTDMTimer() : void
      {
         this.tdmTimer.stop();
         this.tdmTimer.removeEventListener(TimerEvent.TIMER,this.handleTDMTimerTick);
      }
      
      private function removeTextFieldPulse() : void
      {
         var _loc1_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_TDM);
         var _loc2_:SimpleContainer = _loc1_.getContainer(SimpleContainer.CLASS_TDM);
         var _loc3_:SimpleElement = _loc2_.getElement(SimpleElement.TYPE_TDM_TIMER);
         InfoField(_loc3_).removeTextfieldPulse();
      }
      
      private function setTDMTimer(param1:int) : void
      {
         var _loc3_:SimpleContainer = null;
         var _loc4_:SimpleElement = null;
         var _loc2_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_TDM);
         if(_loc2_ != null)
         {
            _loc3_ = _loc2_.getContainer(SimpleContainer.CLASS_TDM);
            _loc4_ = _loc3_.getElement(SimpleElement.TYPE_TDM_TIMER);
            if(_loc4_ != null)
            {
               InfoField(_loc4_).setLabel(TimeFormatter.formatTime(param1));
               if(param1 == 30)
               {
                  InfoField(_loc4_).setTextfieldPulse(0.5);
               }
               else if(param1 == 0)
               {
                  this.removeTextFieldPulse();
               }
            }
         }
      }
      
      public function setTDMGamesCount(param1:int) : void
      {
         var _loc3_:SimpleContainer = null;
         var _loc4_:SimpleElement = null;
         var _loc2_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_TDM);
         if(_loc2_ != null)
         {
            _loc3_ = _loc2_.getContainer(SimpleContainer.CLASS_TDM);
            _loc4_ = _loc3_.getElement(SimpleElement.TYPE_TDM_GAMES);
            if(_loc4_ != null)
            {
               InfoField(_loc4_).setLabel(param1.toString());
            }
         }
      }
      
      public function setTDMQueue(param1:String, param2:int) : void
      {
         var _loc4_:SimpleContainer = null;
         var _loc5_:SimpleElement = null;
         var _loc6_:String = null;
         var _loc3_:SimpleWindow = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_TDM);
         if(_loc3_ != null)
         {
            _loc4_ = _loc3_.getContainer(SimpleContainer.CLASS_TDM);
            _loc5_ = _loc4_.getElement(SimpleElement.TYPE_TDM_QUEUE);
            _loc6_ = "cbInfoIcon_queue";
            switch(param2)
            {
               case 1:
                  _loc6_ = "cbInfoIcon_bad_queue";
                  break;
               case 2:
                  _loc6_ = "cbInfoIcon_normal_queue";
                  break;
               case 3:
                  _loc6_ = "cbInfoIcon_good_queue";
            }
            InfoField(_loc5_).updateIcon(ResourceManager.getBitmap("ui",_loc6_));
            InfoField(_loc5_).setLabel(param1.toString());
         }
      }
      
      public function initStats(param1:int, param2:int) : void
      {
         this.homeFactionId = param1;
         this.guestFactionId = param2;
      }
      
      public function showIntro() : void
      {
         var _loc1_:SWFFinisher = SWFFinisher(ResourceManager.fileCollection.getFinisher("ui"));
         this.leftFactionBitmap = _loc1_.getEmbededBitmap("left_" + this.homeFactionId);
         this.rightFactionBitmap = _loc1_.getEmbededBitmap("right_" + this.guestFactionId);
         var _loc2_:Sprite = this.main.screenManager.getGUILayer0();
         this.tdmCounter = new TDMCounter(this);
         this.leftFactionBitmap.alpha = 0;
         this.leftFactionBitmap.x = -this.leftFactionBitmap.width;
         var _loc3_:int = ScreenManager.getHalfScreenWidth() - this.leftFactionBitmap.width - this.tdmCounter.width * 0.5 + 5;
         this.leftFactionBitmap.y = ScreenManager.getHalfScreenHeight() - 235;
         this.rightFactionBitmap.alpha = 0;
         this.rightFactionBitmap.x = ScreenManager.getScreenWidth() + this.leftFactionBitmap.width - 5;
         var _loc4_:int = ScreenManager.getHalfScreenWidth() + this.tdmCounter.width * 0.5;
         this.rightFactionBitmap.y = ScreenManager.getHalfScreenHeight() - 235;
         _loc2_.addChild(this.tdmCounter);
         _loc2_.addChild(this.leftFactionBitmap);
         _loc2_.addChild(this.rightFactionBitmap);
         TweenLite.to(this.tdmCounter,1,{"alpha":1});
         TweenLite.to(this.leftFactionBitmap,1,{
            "alpha":1,
            "x":_loc3_,
            "ease":Bounce.easeOut
         });
         TweenLite.to(this.rightFactionBitmap,1,{
            "alpha":1,
            "x":_loc4_,
            "ease":Bounce.easeOut
         });
         var _loc5_:Timer = new Timer(270,1);
         _loc5_.addEventListener(TimerEvent.TIMER_COMPLETE,this.handleIntroCollisionFinish);
         _loc5_.start();
      }
      
      public function removeIntro() : void
      {
         var _loc1_:Sprite = this.main.screenManager.getGUILayer0();
         if(_loc1_.contains(this.leftFactionBitmap))
         {
            TweenLite.to(this.leftFactionBitmap,1,{
               "ease":Expo.easeOut,
               "alpha":0,
               "x":-this.leftFactionBitmap.width,
               "onComplete":this.handleIntroElementFadeOut,
               "onCompleteParams":[this.leftFactionBitmap]
            });
         }
         if(_loc1_.contains(this.rightFactionBitmap))
         {
            TweenLite.to(this.rightFactionBitmap,1,{
               "ease":Expo.easeOut,
               "alpha":0,
               "x":ScreenManager.getScreenWidth() + this.leftFactionBitmap.width - 5,
               "onComplete":this.handleIntroElementFadeOut,
               "onCompleteParams":[this.rightFactionBitmap]
            });
         }
         if(_loc1_.contains(this.tdmCounter))
         {
            TweenLite.to(this.tdmCounter,1,{
               "alpha":0,
               "onComplete":this.handleIntroElementFadeOut,
               "onCompleteParams":[this.tdmCounter]
            });
         }
      }
      
      private function handleIntroElementFadeOut(param1:DisplayObject) : void
      {
         var _loc2_:Sprite = this.main.screenManager.getGUILayer0();
         _loc2_.removeChild(param1);
         this.tdmIntroInit = false;
      }
      
      private function handleIntroCollisionFinish(param1:TimerEvent) : void
      {
         AudioManager.playSoundEffect(26);
         this.main.screenManager.shakeScreen();
      }
      
      public function updateIntro(param1:int) : void
      {
         if(this.tdmIntroInit)
         {
            return;
         }
         this.showIntro();
         this.tdmIntroInit = true;
         if(this.tdmCounter != null)
         {
            this.tdmCounter.startCounter(param1);
         }
      }
      
      public function updateMatchResult(param1:int, param2:int, param3:int) : void
      {
         var _loc4_:SimpleWindow = null;
         var _loc5_:SimpleContainer = null;
         this.playersLeftHome = param2;
         this.playersLeftGuest = param3;
         if(this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_TDM) == null)
         {
            this.createTDMWindow();
         }
         if(this.leftScoreElement == null && this.rightScoreElement == null)
         {
            _loc4_ = this.main.getGuiManager().getWindow(SimpleWindow.WINDOW_CLASS_TDM);
            _loc5_ = _loc4_.getContainer(SimpleContainer.CLASS_TDM);
            _loc5_.getElement(SimpleElement.TYPE_TDM_GAMES).visible = false;
            _loc5_.getElement(SimpleElement.TYPE_TDM_QUEUE).visible = false;
            this.leftScoreElement = new ScoreElement(SimpleElement.TYPE_TDM_LEFT_SCORE,this.main.getGuiManager(),this.homeFactionId);
            this.leftScoreElement.x = 70;
            this.leftScoreElement.y = -5;
            this.leftScoreElement.mouseEnabled = false;
            this.rightScoreElement = new ScoreElement(SimpleElement.TYPE_TDM_RIGHT_SCORE,this.main.getGuiManager(),this.guestFactionId);
            this.rightScoreElement.x = this.leftScoreElement.x + this.leftScoreElement.getBackground().width;
            this.rightScoreElement.y = -5;
            this.rightScoreElement.mouseEnabled = false;
            _loc5_.addElement(this.leftScoreElement,SimpleContainer.NO_ALIGN);
            _loc5_.addElement(this.rightScoreElement,SimpleContainer.NO_ALIGN);
         }
         else
         {
            this.leftScoreElement.visible = true;
            this.rightScoreElement.visible = true;
         }
         this.leftScoreElement.updateScore(param2);
         this.rightScoreElement.updateScore(param3);
         this.setTDMTimer(param1);
      }
      
      public function showResult(param1:int) : void
      {
         if(param1 != -1)
         {
            switch(param1)
            {
               case 0:
                  this.main.screenManager.showBigMessage(BPLocale.getText("tdm_both_teams_lose"));
                  break;
               case 1:
                  if(Hero.factionID == this.homeFactionId)
                  {
                     this.main.screenManager.showBigMessage(BPLocale.getText("tdm_your_team_wins").replace("%COUNT%",this.playersLeftHome));
                     break;
                  }
                  this.main.screenManager.showBigMessage(BPLocale.getText("tdm_your_team_loses").replace("%COUNT%",this.playersLeftGuest));
                  break;
               case 2:
                  if(Hero.factionID == this.guestFactionId)
                  {
                     this.main.screenManager.showBigMessage(BPLocale.getText("tdm_your_team_wins").replace("%COUNT%",this.playersLeftGuest));
                     break;
                  }
                  this.main.screenManager.showBigMessage(BPLocale.getText("tdm_your_team_loses").replace("%COUNT%",this.playersLeftHome));
            }
         }
      }
      
      public function getMain() : Main
      {
         return this.main;
      }
      
      public function cleanUp() : void
      {
         if(this.tdmTimer != null)
         {
            this.stopTDMTimer();
         }
      }
   }
}

package net.bigpoint.darkorbit.version
{
   public class Version
   {
      
      public static const VALUE:String = "4.1";
      
      public function Version()
      {
         super();
      }
   }
}

package net.bigpoint.darkorbit.vo
{
   public class ItemSysMine
   {
      
      public var itemSytemID:String;
      
      public var name:String;
      
      public function ItemSysMine(param1:String, param2:String)
      {
         super();
         this.name = param2;
         this.itemSytemID = param1;
      }
   }
}

package org.flintparticles.common.actions
{
   import org.flintparticles.common.behaviours.Behaviour;
   import org.flintparticles.common.emitters.Emitter;
   import org.flintparticles.common.particles.Particle;
   
   public interface Action extends Behaviour
   {
      
      function update(param1:Emitter, param2:Particle, param3:Number) : void;
   }
}

package org.flintparticles.common.actions
{
   import org.flintparticles.common.emitters.Emitter;
   import org.flintparticles.common.particles.Particle;
   
   public class ActionBase implements Action
   {
      
      protected var _priority:int = 0;
      
      public function ActionBase()
      {
         super();
      }
      
      public function get priority() : int
      {
         return this._priority;
      }
      
      public function set priority(param1:int) : void
      {
         this._priority = param1;
      }
      
      public function addedToEmitter(param1:Emitter) : void
      {
      }
      
      public function removedFromEmitter(param1:Emitter) : void
      {
      }
      
      public function update(param1:Emitter, param2:Particle, param3:Number) : void
      {
      }
   }
}

package org.flintparticles.common.activities
{
   import org.flintparticles.common.behaviours.Behaviour;
   import org.flintparticles.common.emitters.Emitter;
   
   public interface Activity extends Behaviour
   {
      
      function initialize(param1:Emitter) : void;
      
      function update(param1:Emitter, param2:Number) : void;
   }
}

package org.flintparticles.common.behaviours
{
   import org.flintparticles.common.emitters.Emitter;
   
   public interface Behaviour
   {
      
      function get priority() : int;
      
      function set priority(param1:int) : void;
      
      function addedToEmitter(param1:Emitter) : void;
      
      function removedFromEmitter(param1:Emitter) : void;
   }
}

package org.flintparticles.common.counters
{
   import org.flintparticles.common.emitters.Emitter;
   
   public interface Counter
   {
      
      function startEmitter(param1:Emitter) : uint;
      
      function updateEmitter(param1:Emitter, param2:Number) : uint;
      
      function stop() : void;
      
      function resume() : void;
      
      function get complete() : Boolean;
      
      function get running() : Boolean;
   }
}

package org.flintparticles.common.counters
{
   import org.flintparticles.common.emitters.Emitter;
   
   public class Pulse implements Counter
   {
      
      private var _timeToNext:Number;
      
      private var _period:Number;
      
      private var _quantity:Number;
      
      private var _running:Boolean;
      
      public function Pulse(param1:Number = 1, param2:uint = 0)
      {
         super();
         this._running = false;
         this._quantity = param2;
         this._period = param1;
      }
      
      public function stop() : void
      {
         this._running = false;
      }
      
      public function resume() : void
      {
         this._running = true;
      }
      
      public function get period() : Number
      {
         return this._period;
      }
      
      public function set period(param1:Number) : void
      {
         this._period = param1;
      }
      
      public function get quantity() : uint
      {
         return this._quantity;
      }
      
      public function set quantity(param1:uint) : void
      {
         this._quantity = param1;
      }
      
      public function startEmitter(param1:Emitter) : uint
      {
         this._running = true;
         this._timeToNext = this._period;
         return this._quantity;
      }
      
      public function updateEmitter(param1:Emitter, param2:Number) : uint
      {
         if(!this._running)
         {
            return 0;
         }
         var _loc3_:uint = 0;
         this._timeToNext -= param2;
         while(this._timeToNext <= 0)
         {
            _loc3_ += this._quantity;
            this._timeToNext += this._period;
         }
         return _loc3_;
      }
      
      public function get complete() : Boolean
      {
         return false;
      }
      
      public function get running() : Boolean
      {
         return this._running;
      }
   }
}

package org.flintparticles.common.counters
{
   import org.flintparticles.common.emitters.Emitter;
   
   public class ZeroCounter implements Counter
   {
      
      public function ZeroCounter()
      {
         super();
      }
      
      public function startEmitter(param1:Emitter) : uint
      {
         return 0;
      }
      
      public function updateEmitter(param1:Emitter, param2:Number) : uint
      {
         return 0;
      }
      
      public function stop() : void
      {
      }
      
      public function resume() : void
      {
      }
      
      public function get complete() : Boolean
      {
         return true;
      }
      
      public function get running() : Boolean
      {
         return false;
      }
   }
}

package org.flintparticles.common.debug
{
   public class ParticleFactoryStats
   {
      
      public static var numParticles:uint = 0;
      
      public function ParticleFactoryStats()
      {
         super();
      }
   }
}

package org.flintparticles.common.emitters
{
   import flash.events.EventDispatcher;
   import org.flintparticles.common.actions.Action;
   import org.flintparticles.common.activities.Activity;
   import org.flintparticles.common.behaviours.Behaviour;
   import org.flintparticles.common.counters.Counter;
   import org.flintparticles.common.counters.ZeroCounter;
   import org.flintparticles.common.events.EmitterEvent;
   import org.flintparticles.common.events.ParticleEvent;
   import org.flintparticles.common.events.UpdateEvent;
   import org.flintparticles.common.initializers.Initializer;
   import org.flintparticles.common.particles.Particle;
   import org.flintparticles.common.particles.ParticleFactory;
   import org.flintparticles.common.utils.FrameUpdater;
   
   public class Emitter extends EventDispatcher
   {
      
      protected var _particleFactory:ParticleFactory;
      
      protected var _initializers:Vector.<Initializer>;
      
      protected var _actions:Vector.<Action>;
      
      protected var _activities:Vector.<Activity>;
      
      protected var _particles:Array;
      
      protected var _counter:Counter;
      
      protected var _useInternalTick:Boolean = true;
      
      protected var _fixedFrameTime:Number = 0;
      
      protected var _running:Boolean = false;
      
      protected var _started:Boolean = false;
      
      protected var _maximumFrameTime:Number = 0.1;
      
      protected var _dispatchCounterComplete:Boolean = false;
      
      public function Emitter()
      {
         super();
         this._particles = [];
         this._actions = new Vector.<Action>();
         this._initializers = new Vector.<Initializer>();
         this._activities = new Vector.<Activity>();
         this._counter = new ZeroCounter();
      }
      
      public function get maximumFrameTime() : Number
      {
         return this._maximumFrameTime;
      }
      
      public function set maximumFrameTime(param1:Number) : void
      {
         this._maximumFrameTime = param1;
      }
      
      public function get initializers() : Vector.<Initializer>
      {
         return this._initializers;
      }
      
      public function set initializers(param1:Vector.<Initializer>) : void
      {
         var _loc2_:Initializer = null;
         for each(_loc2_ in this._initializers)
         {
            _loc2_.removedFromEmitter(this);
         }
         this._initializers = param1.slice();
         this._initializers.sort(this.prioritySort);
         for each(_loc2_ in param1)
         {
            _loc2_.addedToEmitter(this);
         }
      }
      
      public function addInitializer(param1:Initializer) : void
      {
         var _loc2_:uint = this._initializers.length;
         var _loc3_:uint = 0;
         while(_loc3_ < _loc2_)
         {
            if(this._initializers[_loc3_].priority < param1.priority)
            {
               break;
            }
            _loc3_++;
         }
         this._initializers.splice(_loc3_,0,param1);
         param1.addedToEmitter(this);
      }
      
      public function removeInitializer(param1:Initializer) : void
      {
         var _loc2_:int = int(this._initializers.indexOf(param1));
         if(_loc2_ != -1)
         {
            this._initializers.splice(_loc2_,1);
            param1.removedFromEmitter(this);
         }
      }
      
      public function hasInitializer(param1:Initializer) : Boolean
      {
         return this._initializers.indexOf(param1) != -1;
      }
      
      public function hasInitializerOfType(param1:Class) : Boolean
      {
         var _loc2_:uint = this._initializers.length;
         var _loc3_:uint = 0;
         while(_loc3_ < _loc2_)
         {
            if(this._initializers[_loc3_] is param1)
            {
               return true;
            }
            _loc3_++;
         }
         return false;
      }
      
      public function get actions() : Vector.<Action>
      {
         return this._actions;
      }
      
      public function set actions(param1:Vector.<Action>) : void
      {
         var _loc2_:Action = null;
         for each(_loc2_ in this._actions)
         {
            _loc2_.removedFromEmitter(this);
         }
         this._actions = param1.slice();
         this._actions.sort(this.prioritySort);
         for each(_loc2_ in param1)
         {
            _loc2_.addedToEmitter(this);
         }
      }
      
      public function addAction(param1:Action) : void
      {
         var _loc2_:uint = this._actions.length;
         var _loc3_:uint = 0;
         while(_loc3_ < _loc2_)
         {
            if(this._actions[_loc3_].priority < param1.priority)
            {
               break;
            }
            _loc3_++;
         }
         this._actions.splice(_loc3_,0,param1);
         param1.addedToEmitter(this);
      }
      
      public function removeAction(param1:Action) : void
      {
         var _loc2_:int = int(this._actions.indexOf(param1));
         if(_loc2_ != -1)
         {
            this._actions.splice(_loc2_,1);
            param1.removedFromEmitter(this);
         }
      }
      
      public function hasAction(param1:Action) : Boolean
      {
         return this._actions.indexOf(param1) != -1;
      }
      
      public function hasActionOfType(param1:Class) : Boolean
      {
         var _loc2_:uint = this._actions.length;
         var _loc3_:uint = 0;
         while(_loc3_ < _loc2_)
         {
            if(this._actions[_loc3_] is param1)
            {
               return true;
            }
            _loc3_++;
         }
         return false;
      }
      
      public function get activities() : Vector.<Activity>
      {
         return this._activities;
      }
      
      public function set activities(param1:Vector.<Activity>) : void
      {
         var _loc2_:Activity = null;
         for each(_loc2_ in this._activities)
         {
            _loc2_.removedFromEmitter(this);
         }
         this._activities = param1.slice();
         this._activities.sort(this.prioritySort);
         for each(_loc2_ in this._activities)
         {
            _loc2_.addedToEmitter(this);
         }
      }
      
      public function addActivity(param1:Activity) : void
      {
         var _loc2_:uint = this._activities.length;
         var _loc3_:uint = 0;
         while(_loc3_ < _loc2_)
         {
            if(this._activities[_loc3_].priority < param1.priority)
            {
               break;
            }
            _loc3_++;
         }
         this._activities.splice(_loc3_,0,param1);
         param1.addedToEmitter(this);
      }
      
      public function removeActivity(param1:Activity) : void
      {
         var _loc2_:int = int(this._activities.indexOf(param1));
         if(_loc2_ != -1)
         {
            this._activities.splice(_loc2_,1);
            param1.removedFromEmitter(this);
         }
      }
      
      public function hasActivity(param1:Activity) : Boolean
      {
         return this._activities.indexOf(param1) != -1;
      }
      
      public function hasActivityOfType(param1:Class) : Boolean
      {
         var _loc2_:uint = this._activities.length;
         var _loc3_:uint = 0;
         while(_loc3_ < _loc2_)
         {
            if(this._activities[_loc3_] is param1)
            {
               return true;
            }
            _loc3_++;
         }
         return false;
      }
      
      public function get counter() : Counter
      {
         return this._counter;
      }
      
      public function set counter(param1:Counter) : void
      {
         this._counter = param1;
         if(this.running)
         {
            this._counter.startEmitter(this);
         }
      }
      
      public function dispatchCounterComplete() : void
      {
         this._dispatchCounterComplete = true;
      }
      
      public function get useInternalTick() : Boolean
      {
         return this._useInternalTick;
      }
      
      public function set useInternalTick(param1:Boolean) : void
      {
         if(this._useInternalTick != param1)
         {
            this._useInternalTick = param1;
            if(this._started)
            {
               if(this._useInternalTick)
               {
                  FrameUpdater.instance.addEventListener(UpdateEvent.UPDATE,this.updateEventListener,false,0,true);
               }
               else
               {
                  FrameUpdater.instance.removeEventListener(UpdateEvent.UPDATE,this.updateEventListener);
               }
            }
         }
      }
      
      public function get fixedFrameTime() : Number
      {
         return this._fixedFrameTime;
      }
      
      public function set fixedFrameTime(param1:Number) : void
      {
         this._fixedFrameTime = param1;
      }
      
      public function get running() : Boolean
      {
         return this._running;
      }
      
      public function get particleFactory() : ParticleFactory
      {
         return this._particleFactory;
      }
      
      public function set particleFactory(param1:ParticleFactory) : void
      {
         this._particleFactory = param1;
      }
      
      public function get particles() : Vector.<Particle>
      {
         return Vector.<Particle>(this._particles);
      }
      
      public function set particles(param1:Vector.<Particle>) : void
      {
         this.killAllParticles();
         this.addParticles(param1,false);
      }
      
      public function get particlesArray() : Array
      {
         return this._particles;
      }
      
      protected function createParticle() : Particle
      {
         var _loc1_:Particle = this._particleFactory.createParticle();
         var _loc2_:int = int(this._initializers.length);
         this.initParticle(_loc1_);
         var _loc3_:int = 0;
         while(_loc3_ < _loc2_)
         {
            Initializer(this._initializers[_loc3_]).initialize(this,_loc1_);
            _loc3_++;
         }
         this._particles.push(_loc1_);
         if(hasEventListener(ParticleEvent.PARTICLE_CREATED))
         {
            dispatchEvent(new ParticleEvent(ParticleEvent.PARTICLE_CREATED,_loc1_));
         }
         return _loc1_;
      }
      
      protected function initParticle(param1:Particle) : void
      {
      }
      
      public function addParticle(param1:Particle, param2:Boolean = false) : void
      {
         var _loc3_:int = 0;
         var _loc4_:int = 0;
         if(param2)
         {
            _loc3_ = int(this._initializers.length);
            _loc4_ = 0;
            while(_loc4_ < _loc3_)
            {
               this._initializers[_loc4_].initialize(this,param1);
               _loc4_++;
            }
         }
         this._particles.push(param1);
         if(hasEventListener(ParticleEvent.PARTICLE_ADDED))
         {
            dispatchEvent(new ParticleEvent(ParticleEvent.PARTICLE_ADDED,param1));
         }
      }
      
      public function addParticles(param1:Vector.<Particle>, param2:Boolean = false) : void
      {
         var _loc4_:int = 0;
         var _loc5_:int = 0;
         var _loc6_:int = 0;
         var _loc3_:int = int(param1.length);
         if(param2)
         {
            _loc5_ = int(this._initializers.length);
            _loc6_ = 0;
            while(_loc6_ < _loc5_)
            {
               _loc4_ = 0;
               while(_loc4_ < _loc3_)
               {
                  this._initializers[_loc6_].initialize(this,param1[_loc4_]);
                  _loc4_++;
               }
               _loc6_++;
            }
         }
         if(hasEventListener(ParticleEvent.PARTICLE_ADDED))
         {
            _loc4_ = 0;
            while(_loc4_ < _loc3_)
            {
               this._particles.push(param1[_loc4_]);
               dispatchEvent(new ParticleEvent(ParticleEvent.PARTICLE_ADDED,param1[_loc4_]));
               _loc4_++;
            }
         }
         else
         {
            _loc4_ = 0;
            while(_loc4_ < _loc3_)
            {
               this._particles.push(param1[_loc4_]);
               _loc4_++;
            }
         }
      }
      
      public function removeParticle(param1:Particle) : Boolean
      {
         var _loc2_:int = int(this._particles.indexOf(param1));
         if(_loc2_ != -1)
         {
            this._particles.splice(_loc2_,1);
            return true;
         }
         return false;
      }
      
      public function removeParticles(param1:Vector.<Particle>) : void
      {
         var _loc4_:int = 0;
         var _loc2_:int = 0;
         var _loc3_:int = int(param1.length);
         while(_loc2_ < _loc3_)
         {
            _loc4_ = int(this._particles.indexOf(param1[_loc2_]));
            if(_loc4_ != -1)
            {
               this._particles.splice(_loc4_,1);
            }
            _loc2_++;
         }
      }
      
      public function killAllParticles() : void
      {
         var _loc2_:int = 0;
         var _loc1_:int = int(this._particles.length);
         if(hasEventListener(ParticleEvent.PARTICLE_DEAD))
         {
            _loc2_ = 0;
            while(_loc2_ < _loc1_)
            {
               dispatchEvent(new ParticleEvent(ParticleEvent.PARTICLE_DEAD,this._particles[_loc2_]));
               this._particleFactory.disposeParticle(this._particles[_loc2_]);
               _loc2_++;
            }
         }
         else
         {
            _loc2_ = 0;
            while(_loc2_ < _loc1_)
            {
               this._particleFactory.disposeParticle(this._particles[_loc2_]);
               _loc2_++;
            }
         }
         this._particles.length = 0;
      }
      
      public function start() : void
      {
         if(this._useInternalTick)
         {
            FrameUpdater.instance.addEventListener(UpdateEvent.UPDATE,this.updateEventListener,false,0,true);
         }
         this._started = true;
         this._running = true;
         var _loc1_:int = int(this._activities.length);
         var _loc2_:int = 0;
         while(_loc2_ < _loc1_)
         {
            Activity(this._activities[_loc2_]).initialize(this);
            _loc2_++;
         }
         _loc1_ = int(this._counter.startEmitter(this));
         _loc2_ = 0;
         while(_loc2_ < _loc1_)
         {
            this.createParticle();
            _loc2_++;
         }
      }
      
      private function updateEventListener(param1:UpdateEvent) : void
      {
         if(this._fixedFrameTime)
         {
            this.update(this._fixedFrameTime);
         }
         else
         {
            this.update(param1.time);
         }
      }
      
      public function update(param1:Number) : void
      {
         var _loc2_:int = 0;
         var _loc3_:Particle = null;
         var _loc5_:Action = null;
         var _loc6_:int = 0;
         var _loc7_:int = 0;
         if(!this._running)
         {
            return;
         }
         if(param1 > this._maximumFrameTime)
         {
            param1 = this._maximumFrameTime;
         }
         var _loc4_:int = int(this._counter.updateEmitter(this,param1));
         _loc2_ = 0;
         while(_loc2_ < _loc4_)
         {
            this.createParticle();
            _loc2_++;
         }
         this.sortParticles();
         _loc4_ = int(this._activities.length);
         _loc2_ = 0;
         while(_loc2_ < _loc4_)
         {
            Activity(this._activities[_loc2_]).update(this,param1);
            _loc2_++;
         }
         if(this._particles.length > 0)
         {
            _loc4_ = int(this._actions.length);
            _loc6_ = int(this._particles.length);
            _loc7_ = 0;
            while(_loc7_ < _loc4_)
            {
               _loc5_ = this._actions[_loc7_];
               _loc2_ = 0;
               while(_loc2_ < _loc6_)
               {
                  _loc3_ = this._particles[_loc2_];
                  _loc5_.update(this,_loc3_,param1);
                  _loc2_++;
               }
               _loc7_++;
            }
            if(hasEventListener(ParticleEvent.PARTICLE_DEAD))
            {
               _loc2_ = _loc6_;
               while(_loc2_--)
               {
                  _loc3_ = this._particles[_loc2_];
                  if(_loc3_.isDead)
                  {
                     this._particles.splice(_loc2_,1);
                     dispatchEvent(new ParticleEvent(ParticleEvent.PARTICLE_DEAD,_loc3_));
                     if(_loc3_.isDead)
                     {
                        this._particleFactory.disposeParticle(_loc3_);
                     }
                  }
               }
            }
            else
            {
               _loc2_ = _loc6_;
               while(_loc2_--)
               {
                  _loc3_ = this._particles[_loc2_];
                  if(_loc3_.isDead)
                  {
                     this._particles.splice(_loc2_,1);
                     if(_loc3_.isDead)
                     {
                        this._particleFactory.disposeParticle(_loc3_);
                     }
                  }
               }
            }
         }
         else if(hasEventListener(EmitterEvent.EMITTER_EMPTY))
         {
            dispatchEvent(new EmitterEvent(EmitterEvent.EMITTER_EMPTY));
         }
         if(hasEventListener(EmitterEvent.EMITTER_UPDATED))
         {
            dispatchEvent(new EmitterEvent(EmitterEvent.EMITTER_UPDATED));
         }
         if(this._dispatchCounterComplete)
         {
            this._dispatchCounterComplete = false;
            if(hasEventListener(EmitterEvent.COUNTER_COMPLETE))
            {
               dispatchEvent(new EmitterEvent(EmitterEvent.COUNTER_COMPLETE));
            }
         }
      }
      
      protected function sortParticles() : void
      {
      }
      
      public function pause() : void
      {
         this._running = false;
      }
      
      public function resume() : void
      {
         this._running = true;
      }
      
      public function stop() : void
      {
         if(this._useInternalTick)
         {
            FrameUpdater.instance.removeEventListener(UpdateEvent.UPDATE,this.updateEventListener);
         }
         this._started = false;
         this._running = false;
         this.killAllParticles();
      }
      
      public function runAhead(param1:Number, param2:Number = 10) : void
      {
         var _loc3_:Number = this._maximumFrameTime;
         var _loc4_:Number = 1 / param2;
         this._maximumFrameTime = _loc4_;
         while(param1 > 0)
         {
            param1 -= _loc4_;
            this.update(_loc4_);
         }
         this._maximumFrameTime = _loc3_;
      }
      
      private function prioritySort(param1:Behaviour, param2:Behaviour) : Number
      {
         return param1.priority - param2.priority;
      }
   }
}

package org.flintparticles.common.events
{
   import flash.events.Event;
   
   public class EmitterEvent extends Event
   {
      
      public static var EMITTER_EMPTY:String = "emitterEmpty";
      
      public static var EMITTER_UPDATED:String = "emitterUpdated";
      
      public static var COUNTER_COMPLETE:String = "counterComplete";
      
      public function EmitterEvent(param1:String, param2:Boolean = false, param3:Boolean = false)
      {
         super(param1,param2,param3);
      }
   }
}

package org.flintparticles.common.events
{
   import flash.events.Event;
   import org.flintparticles.common.particles.Particle;
   
   public class ParticleEvent extends Event
   {
      
      public static var PARTICLE_CREATED:String = "particleCreated";
      
      public static var PARTICLE_DEAD:String = "particleDead";
      
      public static var PARTICLE_ADDED:String = "particleAdded";
      
      public static var PARTICLES_COLLISION:String = "particlesCollision";
      
      public static var ZONE_COLLISION:String = "zoneCollision";
      
      public static var BOUNDING_BOX_COLLISION:String = "boundingBoxCollision";
      
      public var particle:Particle;
      
      public var otherObject:*;
      
      public function ParticleEvent(param1:String, param2:Particle = null, param3:Boolean = false, param4:Boolean = false)
      {
         super(param1,param3,param4);
         this.particle = param2;
      }
      
      override public function clone() : Event
      {
         var _loc1_:ParticleEvent = new ParticleEvent(type,this.particle,bubbles,cancelable);
         _loc1_.otherObject = this.otherObject;
         return _loc1_;
      }
   }
}

package org.flintparticles.common.events
{
   import flash.events.Event;
   
   public class UpdateEvent extends Event
   {
      
      public static var UPDATE:String = "update";
      
      public var time:Number;
      
      public function UpdateEvent(param1:String, param2:Number = NaN, param3:Boolean = false, param4:Boolean = false)
      {
         super(param1,param3,param4);
         this.time = param2;
      }
      
      override public function clone() : Event
      {
         return new UpdateEvent(type,this.time,bubbles,cancelable);
      }
   }
}

package org.flintparticles.common.initializers
{
   import org.flintparticles.common.emitters.Emitter;
   import org.flintparticles.common.particles.Particle;
   import org.flintparticles.common.utils.interpolateColors;
   
   public class ColorInit extends InitializerBase
   {
      
      private var _min:uint;
      
      private var _max:uint;
      
      public function ColorInit(param1:uint = 16777215, param2:uint = 16777215)
      {
         super();
         this._min = param1;
         this._max = param2;
      }
      
      public function get minColor() : uint
      {
         return this._min;
      }
      
      public function set minColor(param1:uint) : void
      {
         this._min = param1;
      }
      
      public function get maxColor() : uint
      {
         return this._max;
      }
      
      public function set maxColor(param1:uint) : void
      {
         this._max = param1;
      }
      
      public function get color() : uint
      {
         return this._min == this._max ? this._min : interpolateColors(this._max,this._min,0.5);
      }
      
      public function set color(param1:uint) : void
      {
         this._max = this._min = param1;
      }
      
      override public function initialize(param1:Emitter, param2:Particle) : void
      {
         if(this._max == this._min)
         {
            param2.color = this._min;
         }
         else
         {
            param2.color = interpolateColors(this._min,this._max,Math.random());
         }
      }
   }
}

package org.flintparticles.common.initializers
{
   import org.flintparticles.common.behaviours.Behaviour;
   import org.flintparticles.common.emitters.Emitter;
   import org.flintparticles.common.particles.Particle;
   
   public interface Initializer extends Behaviour
   {
      
      function initialize(param1:Emitter, param2:Particle) : void;
   }
}

package org.flintparticles.common.initializers
{
   import org.flintparticles.common.emitters.Emitter;
   import org.flintparticles.common.particles.Particle;
   
   public class InitializerBase implements Initializer
   {
      
      protected var _priority:int = 0;
      
      public function InitializerBase()
      {
         super();
      }
      
      public function get priority() : int
      {
         return this._priority;
      }
      
      public function set priority(param1:int) : void
      {
         this._priority = param1;
      }
      
      public function addedToEmitter(param1:Emitter) : void
      {
      }
      
      public function removedFromEmitter(param1:Emitter) : void
      {
      }
      
      public function initialize(param1:Emitter, param2:Particle) : void
      {
      }
   }
}

package org.flintparticles.common.particles
{
   import flash.geom.ColorTransform;
   import flash.utils.Dictionary;
   
   public class Particle
   {
      
      public var color:uint = 4294967295;
      
      private var _colorTransform:ColorTransform = null;
      
      private var _previousColor:uint;
      
      public var scale:Number = 1;
      
      public var mass:Number = 1;
      
      public var collisionRadius:Number = 1;
      
      public var image:* = null;
      
      public var lifetime:Number = 0;
      
      public var age:Number = 0;
      
      public var energy:Number = 1;
      
      public var isDead:Boolean = false;
      
      private var _dictionary:Dictionary = null;
      
      public function Particle()
      {
         super();
      }
      
      public function get dictionary() : Dictionary
      {
         if(this._dictionary == null)
         {
            this._dictionary = new Dictionary(true);
         }
         return this._dictionary;
      }
      
      public function initialize() : void
      {
         this.color = 4294967295;
         this.scale = 1;
         this.mass = 1;
         this.collisionRadius = 1;
         this.lifetime = 0;
         this.age = 0;
         this.energy = 1;
         this.isDead = false;
         this.image = null;
         this._dictionary = null;
         this._colorTransform = null;
      }
      
      public function get colorTransform() : ColorTransform
      {
         if(!this._colorTransform || this._previousColor != this.color)
         {
            this._colorTransform = new ColorTransform((this.color >>> 16 & 0xFF) / 255,(this.color >>> 8 & 0xFF) / 255,(this.color & 0xFF) / 255,(this.color >>> 24 & 0xFF) / 255,0,0,0,0);
            this._previousColor = this.color;
         }
         return this._colorTransform;
      }
      
      public function get alpha() : Number
      {
         return ((this.color & 0xFF000000) >>> 24) / 255;
      }
      
      protected function cloneInto(param1:Particle) : Particle
      {
         var _loc2_:Object = null;
         param1.color = this.color;
         param1.scale = this.scale;
         param1.mass = this.mass;
         param1.collisionRadius = this.collisionRadius;
         param1.lifetime = this.lifetime;
         param1.age = this.age;
         param1.energy = this.energy;
         param1.isDead = this.isDead;
         param1.image = this.image;
         if(this._dictionary)
         {
            param1._dictionary = new Dictionary(true);
            for(_loc2_ in this._dictionary)
            {
               param1._dictionary[_loc2_] = this._dictionary[_loc2_];
            }
         }
         return param1;
      }
      
      public function clone(param1:ParticleFactory = null) : Particle
      {
         var _loc2_:Particle = null;
         if(param1)
         {
            _loc2_ = param1.createParticle();
         }
         else
         {
            _loc2_ = new Particle();
         }
         return this.cloneInto(_loc2_);
      }
      
      public function revive() : void
      {
         this.lifetime = 0;
         this.age = 0;
         this.energy = 1;
         this.isDead = false;
      }
   }
}

package org.flintparticles.common.particles
{
   public interface ParticleFactory
   {
      
      function createParticle() : Particle;
      
      function disposeParticle(param1:Particle) : void;
      
      function clearAllParticles() : void;
   }
}

package org.flintparticles.common.renderers
{
   import org.flintparticles.common.emitters.Emitter;
   
   public interface Renderer
   {
      
      function addEmitter(param1:Emitter) : void;
      
      function removeEmitter(param1:Emitter) : void;
   }
}

package org.flintparticles.common.renderers
{
   import flash.display.Sprite;
   import flash.events.Event;
   import org.flintparticles.common.emitters.Emitter;
   import org.flintparticles.common.events.EmitterEvent;
   import org.flintparticles.common.events.ParticleEvent;
   import org.flintparticles.common.particles.Particle;
   
   public class SpriteRendererBase extends Sprite implements Renderer
   {
      
      protected var _emitters:Vector.<Emitter>;
      
      protected var _particles:Array;
      
      public function SpriteRendererBase()
      {
         super();
         this._emitters = new Vector.<Emitter>();
         this._particles = [];
         mouseEnabled = false;
         mouseChildren = false;
         addEventListener(Event.ADDED_TO_STAGE,this.addedToStage,false,0,true);
      }
      
      public function addEmitter(param1:Emitter) : void
      {
         var _loc2_:Particle = null;
         this._emitters.push(param1);
         if(stage)
         {
            stage.invalidate();
         }
         param1.addEventListener(EmitterEvent.EMITTER_UPDATED,this.emitterUpdated,false,0,true);
         param1.addEventListener(ParticleEvent.PARTICLE_CREATED,this.particleAdded,false,0,true);
         param1.addEventListener(ParticleEvent.PARTICLE_ADDED,this.particleAdded,false,0,true);
         param1.addEventListener(ParticleEvent.PARTICLE_DEAD,this.particleRemoved,false,0,true);
         for each(_loc2_ in param1.particlesArray)
         {
            this.addParticle(_loc2_);
         }
         if(this._emitters.length == 1)
         {
            addEventListener(Event.RENDER,this.updateParticles,false,0,true);
         }
      }
      
      public function removeEmitter(param1:Emitter) : void
      {
         var _loc3_:Particle = null;
         var _loc2_:int = 0;
         while(_loc2_ < this._emitters.length)
         {
            if(this._emitters[_loc2_] == param1)
            {
               this._emitters.splice(_loc2_,1);
               param1.removeEventListener(EmitterEvent.EMITTER_UPDATED,this.emitterUpdated);
               param1.removeEventListener(ParticleEvent.PARTICLE_CREATED,this.particleAdded);
               param1.removeEventListener(ParticleEvent.PARTICLE_ADDED,this.particleAdded);
               param1.removeEventListener(ParticleEvent.PARTICLE_DEAD,this.particleRemoved);
               for each(_loc3_ in param1.particlesArray)
               {
                  this.removeParticle(_loc3_);
               }
               if(this._emitters.length == 0)
               {
                  removeEventListener(Event.RENDER,this.updateParticles);
                  this.renderParticles([]);
               }
               else if(stage)
               {
                  stage.invalidate();
               }
               return;
            }
            _loc2_++;
         }
      }
      
      private function addedToStage(param1:Event) : void
      {
         if(stage)
         {
            stage.invalidate();
         }
      }
      
      private function particleAdded(param1:ParticleEvent) : void
      {
         this.addParticle(param1.particle);
         if(stage)
         {
            stage.invalidate();
         }
      }
      
      private function particleRemoved(param1:ParticleEvent) : void
      {
         this.removeParticle(param1.particle);
         if(stage)
         {
            stage.invalidate();
         }
      }
      
      protected function emitterUpdated(param1:EmitterEvent) : void
      {
         if(stage)
         {
            stage.invalidate();
         }
      }
      
      protected function updateParticles(param1:Event) : void
      {
         this.renderParticles(this._particles);
      }
      
      protected function addParticle(param1:Particle) : void
      {
         this._particles.push(param1);
      }
      
      protected function removeParticle(param1:Particle) : void
      {
         var _loc2_:int = int(this._particles.indexOf(param1));
         if(_loc2_ != -1)
         {
            this._particles.splice(_loc2_,1);
         }
      }
      
      protected function renderParticles(param1:Array) : void
      {
      }
      
      public function get emitters() : Vector.<Emitter>
      {
         return this._emitters;
      }
      
      public function set emitters(param1:Vector.<Emitter>) : void
      {
         var _loc2_:Emitter = null;
         for each(_loc2_ in this._emitters)
         {
            this.removeEmitter(_loc2_);
         }
         for each(_loc2_ in param1)
         {
            this.addEmitter(_loc2_);
         }
      }
   }
}

package org.flintparticles.common.utils
{
   import flash.display.Shape;
   import flash.events.Event;
   import flash.events.EventDispatcher;
   import flash.utils.getTimer;
   import org.flintparticles.common.events.UpdateEvent;
   
   public class FrameUpdater extends EventDispatcher
   {
      
      private static var _instance:FrameUpdater;
      
      private var _shape:Shape;
      
      private var _time:Number;
      
      private var _running:Boolean = false;
      
      public function FrameUpdater()
      {
         super();
         this._shape = new Shape();
      }
      
      public static function get instance() : FrameUpdater
      {
         if(_instance == null)
         {
            _instance = new FrameUpdater();
         }
         return _instance;
      }
      
      private function startTimer() : void
      {
         this._shape.addEventListener(Event.ENTER_FRAME,this.frameUpdate,false,0,true);
         this._time = getTimer();
         this._running = true;
      }
      
      private function stopTimer() : void
      {
         this._shape.removeEventListener(Event.ENTER_FRAME,this.frameUpdate);
         this._running = false;
      }
      
      private function frameUpdate(param1:Event) : void
      {
         var _loc2_:int = this._time;
         this._time = getTimer();
         var _loc3_:Number = (this._time - _loc2_) * 0.001;
         dispatchEvent(new UpdateEvent(UpdateEvent.UPDATE,_loc3_));
      }
      
      override public function addEventListener(param1:String, param2:Function, param3:Boolean = false, param4:int = 0, param5:Boolean = false) : void
      {
         super.addEventListener(param1,param2,param3,param4,param5);
         if(!this._running && hasEventListener(UpdateEvent.UPDATE))
         {
            this.startTimer();
         }
      }
      
      override public function removeEventListener(param1:String, param2:Function, param3:Boolean = false) : void
      {
         super.removeEventListener(param1,param2,param3);
         if(this._running && !hasEventListener(UpdateEvent.UPDATE))
         {
            this.stopTimer();
         }
      }
   }
}

package org.flintparticles.common.utils
{
   public function interpolateColors(param1:uint, param2:uint, param3:Number) : uint
   {
      var _loc4_:Number = 1 - param3;
      var _loc5_:uint = Math.round((param1 >>> 16 & 0xFF) * param3 + (param2 >>> 16 & 0xFF) * _loc4_);
      var _loc6_:uint = Math.round((param1 >>> 8 & 0xFF) * param3 + (param2 >>> 8 & 0xFF) * _loc4_);
      var _loc7_:uint = Math.round((param1 & 0xFF) * param3 + (param2 & 0xFF) * _loc4_);
      var _loc8_:uint = Math.round((param1 >>> 24 & 0xFF) * param3 + (param2 >>> 24 & 0xFF) * _loc4_);
      return _loc8_ << 24 | _loc5_ << 16 | _loc6_ << 8 | _loc7_;
   }
}

package org.flintparticles.common.utils
{
   public class Maths
   {
      
      private static const RADTODEG:Number = 180 / Math.PI;
      
      private static const DEGTORAD:Number = Math.PI / 180;
      
      public function Maths()
      {
         super();
      }
      
      public static function asDegrees(param1:Number) : Number
      {
         return param1 * RADTODEG;
      }
      
      public static function asRadians(param1:Number) : Number
      {
         return param1 * DEGTORAD;
      }
   }
}

package org.flintparticles.twoD.actions
{
   import org.flintparticles.common.actions.ActionBase;
   import org.flintparticles.common.emitters.Emitter;
   import org.flintparticles.common.particles.Particle;
   import org.flintparticles.twoD.particles.Particle2D;
   import org.flintparticles.twoD.zones.Zone2D;
   
   public class DeathZone extends ActionBase
   {
      
      private var _zone:Zone2D;
      
      private var _invertZone:Boolean;
      
      private var p:Particle2D;
      
      private var inside:Boolean;
      
      public function DeathZone(param1:Zone2D = null, param2:Boolean = false)
      {
         super();
         priority = -20;
         this.zone = param1;
         this.zoneIsSafe = param2;
      }
      
      public function get zone() : Zone2D
      {
         return this._zone;
      }
      
      public function set zone(param1:Zone2D) : void
      {
         this._zone = param1;
      }
      
      public function get zoneIsSafe() : Boolean
      {
         return this._invertZone;
      }
      
      public function set zoneIsSafe(param1:Boolean) : void
      {
         this._invertZone = param1;
      }
      
      override public function update(param1:Emitter, param2:Particle, param3:Number) : void
      {
         this.p = Particle2D(param2);
         this.inside = this._zone.contains(this.p.x,this.p.y);
         if(this._invertZone)
         {
            if(!this.inside)
            {
               this.p.isDead = true;
            }
         }
         else if(this.inside)
         {
            this.p.isDead = true;
         }
      }
   }
}

package org.flintparticles.twoD.actions
{
   import org.flintparticles.common.actions.ActionBase;
   import org.flintparticles.common.emitters.Emitter;
   import org.flintparticles.common.particles.Particle;
   import org.flintparticles.twoD.particles.Particle2D;
   
   public class Move extends ActionBase
   {
      
      public function Move()
      {
         super();
         priority = -10;
      }
      
      override public function update(param1:Emitter, param2:Particle, param3:Number) : void
      {
         var _loc4_:Particle2D = Particle2D(param2);
         _loc4_.previousX = _loc4_.x;
         _loc4_.previousY = _loc4_.y;
         _loc4_.x += _loc4_.velX * param3;
         _loc4_.y += _loc4_.velY * param3;
      }
   }
}

package org.flintparticles.twoD.emitters
{
   import org.flintparticles.common.emitters.Emitter;
   import org.flintparticles.common.particles.Particle;
   import org.flintparticles.common.particles.ParticleFactory;
   import org.flintparticles.common.utils.Maths;
   import org.flintparticles.twoD.particles.Particle2D;
   import org.flintparticles.twoD.particles.ParticleCreator2D;
   
   public class Emitter2D extends Emitter
   {
      
      protected static var _creator:ParticleCreator2D = new ParticleCreator2D();
      
      protected var _x:Number = 0;
      
      protected var _y:Number = 0;
      
      protected var _rotation:Number = 0;
      
      public var spaceSort:Boolean = false;
      
      public function Emitter2D()
      {
         super();
         _particleFactory = _creator;
      }
      
      public static function get defaultParticleFactory() : ParticleFactory
      {
         return _creator;
      }
      
      public function get x() : Number
      {
         return this._x;
      }
      
      public function set x(param1:Number) : void
      {
         this._x = param1;
      }
      
      public function get y() : Number
      {
         return this._y;
      }
      
      public function set y(param1:Number) : void
      {
         this._y = param1;
      }
      
      public function get rotation() : Number
      {
         return Maths.asDegrees(this._rotation);
      }
      
      public function set rotation(param1:Number) : void
      {
         this._rotation = Maths.asRadians(param1);
      }
      
      public function get rotRadians() : Number
      {
         return this._rotation;
      }
      
      public function set rotRadians(param1:Number) : void
      {
         this._rotation = param1;
      }
      
      override protected function initParticle(param1:Particle) : void
      {
         var _loc2_:Particle2D = Particle2D(param1);
         _loc2_.x = this._x;
         _loc2_.y = this._y;
         _loc2_.previousX = this._x;
         _loc2_.previousY = this._y;
         _loc2_.rotation = this._rotation;
      }
      
      override protected function sortParticles() : void
      {
         var _loc1_:int = 0;
         var _loc2_:int = 0;
         if(this.spaceSort)
         {
            _particles.sortOn("x",Array.NUMERIC);
            _loc1_ = int(_particles.length);
            _loc2_ = 0;
            while(_loc2_ < _loc1_)
            {
               Particle2D(_particles[_loc2_]).sortID = _loc2_;
               _loc2_++;
            }
         }
      }
   }
}

package org.flintparticles.twoD.initializers
{
   import flash.geom.Point;
   import org.flintparticles.common.emitters.Emitter;
   import org.flintparticles.common.initializers.InitializerBase;
   import org.flintparticles.common.particles.Particle;
   import org.flintparticles.twoD.particles.Particle2D;
   import org.flintparticles.twoD.zones.Zone2D;
   
   public class Position extends InitializerBase
   {
      
      private var _zone:Zone2D;
      
      public function Position(param1:Zone2D = null)
      {
         super();
         this.zone = param1;
      }
      
      public function get zone() : Zone2D
      {
         return this._zone;
      }
      
      public function set zone(param1:Zone2D) : void
      {
         this._zone = param1;
      }
      
      override public function initialize(param1:Emitter, param2:Particle) : void
      {
         var _loc3_:Particle2D = null;
         var _loc5_:Number = NaN;
         var _loc6_:Number = NaN;
         _loc3_ = Particle2D(param2);
         var _loc4_:Point = this._zone.getLocation();
         if(_loc3_.rotation == 0)
         {
            _loc3_.x += _loc4_.x;
            _loc3_.y += _loc4_.y;
         }
         else
         {
            _loc5_ = Math.sin(_loc3_.rotation);
            _loc6_ = Math.cos(_loc3_.rotation);
            _loc3_.x += _loc6_ * _loc4_.x - _loc5_ * _loc4_.y;
            _loc3_.y += _loc6_ * _loc4_.y + _loc5_ * _loc4_.x;
         }
         _loc3_.previousX = _loc3_.x;
         _loc3_.previousY = _loc3_.y;
      }
   }
}

package org.flintparticles.twoD.initializers
{
   import flash.geom.Point;
   import org.flintparticles.common.emitters.Emitter;
   import org.flintparticles.common.initializers.InitializerBase;
   import org.flintparticles.common.particles.Particle;
   import org.flintparticles.twoD.particles.Particle2D;
   import org.flintparticles.twoD.zones.Zone2D;
   
   public class Velocity extends InitializerBase
   {
      
      private var _zone:Zone2D;
      
      public function Velocity(param1:Zone2D = null)
      {
         super();
         this.zone = param1;
      }
      
      public function get zone() : Zone2D
      {
         return this._zone;
      }
      
      public function set zone(param1:Zone2D) : void
      {
         this._zone = param1;
      }
      
      override public function initialize(param1:Emitter, param2:Particle) : void
      {
         var _loc5_:Number = NaN;
         var _loc6_:Number = NaN;
         var _loc3_:Particle2D = Particle2D(param2);
         var _loc4_:Point = this._zone.getLocation();
         if(_loc3_.rotation == 0)
         {
            _loc3_.velX = _loc4_.x;
            _loc3_.velY = _loc4_.y;
         }
         else
         {
            _loc5_ = Math.sin(_loc3_.rotation);
            _loc6_ = Math.cos(_loc3_.rotation);
            _loc3_.velX = _loc6_ * _loc4_.x - _loc5_ * _loc4_.y;
            _loc3_.velY = _loc6_ * _loc4_.y + _loc5_ * _loc4_.x;
         }
      }
   }
}

package org.flintparticles.twoD.particles
{
   import flash.geom.Matrix;
   import org.flintparticles.common.particles.Particle;
   import org.flintparticles.common.particles.ParticleFactory;
   
   public class Particle2D extends Particle
   {
      
      public var x:Number = 0;
      
      public var y:Number = 0;
      
      public var previousX:Number = 0;
      
      public var previousY:Number = 0;
      
      public var velX:Number = 0;
      
      public var velY:Number = 0;
      
      public var rotation:Number = 0;
      
      public var angVelocity:Number = 0;
      
      private var _previousMass:Number;
      
      private var _previousRadius:Number;
      
      private var _inertia:Number;
      
      public var sortID:int = -1;
      
      public function Particle2D()
      {
         super();
      }
      
      public function get inertia() : Number
      {
         if(mass != this._previousMass || collisionRadius != this._previousRadius)
         {
            this._inertia = mass * collisionRadius * collisionRadius * 0.5;
            this._previousMass = mass;
            this._previousRadius = collisionRadius;
         }
         return this._inertia;
      }
      
      override public function initialize() : void
      {
         super.initialize();
         this.x = 0;
         this.y = 0;
         this.previousX = 0;
         this.previousY = 0;
         this.velX = 0;
         this.velY = 0;
         this.rotation = 0;
         this.angVelocity = 0;
         this.sortID = -1;
      }
      
      public function get matrixTransform() : Matrix
      {
         var _loc1_:Number = scale * Math.cos(this.rotation);
         var _loc2_:Number = scale * Math.sin(this.rotation);
         return new Matrix(_loc1_,_loc2_,-_loc2_,_loc1_,this.x,this.y);
      }
      
      override public function clone(param1:ParticleFactory = null) : Particle
      {
         var _loc2_:Particle2D = null;
         if(param1)
         {
            _loc2_ = param1.createParticle() as Particle2D;
         }
         else
         {
            _loc2_ = new Particle2D();
         }
         cloneInto(_loc2_);
         _loc2_.x = this.x;
         _loc2_.y = this.y;
         _loc2_.velX = this.velX;
         _loc2_.velY = this.velY;
         _loc2_.rotation = this.rotation;
         _loc2_.angVelocity = this.angVelocity;
         return _loc2_;
      }
   }
}

package org.flintparticles.twoD.particles
{
   import org.flintparticles.common.debug.ParticleFactoryStats;
   import org.flintparticles.common.particles.Particle;
   import org.flintparticles.common.particles.ParticleFactory;
   
   public class ParticleCreator2D implements ParticleFactory
   {
      
      private var _particles:Vector.<Particle>;
      
      public function ParticleCreator2D()
      {
         super();
         this._particles = new Vector.<Particle>();
      }
      
      public function createParticle() : Particle
      {
         ++ParticleFactoryStats.numParticles;
         if(this._particles.length)
         {
            return this._particles.pop();
         }
         return new Particle2D();
      }
      
      public function disposeParticle(param1:Particle) : void
      {
         --ParticleFactoryStats.numParticles;
         if(param1 is Particle2D)
         {
            param1.initialize();
            this._particles.push(param1);
         }
      }
      
      public function clearAllParticles() : void
      {
         this._particles = new Vector.<Particle>();
      }
   }
}

package org.flintparticles.twoD.renderers
{
   import flash.display.Bitmap;
   import flash.display.BitmapData;
   import flash.display.DisplayObject;
   import flash.filters.BitmapFilter;
   import flash.geom.Matrix;
   import flash.geom.Point;
   import flash.geom.Rectangle;
   import org.flintparticles.common.renderers.SpriteRendererBase;
   import org.flintparticles.twoD.particles.Particle2D;
   
   public class BitmapRenderer extends SpriteRendererBase
   {
      
      protected static var ZERO_POINT:Point = new Point(0,0);
      
      protected var _bitmap:Bitmap;
      
      protected var _bitmapData:BitmapData;
      
      protected var _preFilters:Array;
      
      protected var _postFilters:Array;
      
      protected var _colorMap:Array;
      
      protected var _smoothing:Boolean;
      
      protected var _canvas:Rectangle;
      
      protected var _clearBetweenFrames:Boolean;
      
      public function BitmapRenderer(param1:Rectangle, param2:Boolean = false)
      {
         super();
         mouseEnabled = false;
         mouseChildren = false;
         this._smoothing = param2;
         this._preFilters = new Array();
         this._postFilters = new Array();
         this._canvas = param1;
         this.createBitmap();
         this._clearBetweenFrames = true;
      }
      
      public function addFilter(param1:BitmapFilter, param2:Boolean = false) : void
      {
         if(param2)
         {
            this._postFilters.push(param1);
         }
         else
         {
            this._preFilters.push(param1);
         }
      }
      
      public function removeFilter(param1:BitmapFilter) : void
      {
         var _loc2_:int = 0;
         while(_loc2_ < this._preFilters.length)
         {
            if(this._preFilters[_loc2_] == param1)
            {
               this._preFilters.splice(_loc2_,1);
               return;
            }
            _loc2_++;
         }
         _loc2_ = 0;
         while(_loc2_ < this._postFilters.length)
         {
            if(this._postFilters[_loc2_] == param1)
            {
               this._postFilters.splice(_loc2_,1);
               return;
            }
            _loc2_++;
         }
      }
      
      public function get preFilters() : Array
      {
         return this._preFilters.slice();
      }
      
      public function set preFilters(param1:Array) : void
      {
         var _loc2_:BitmapFilter = null;
         for each(_loc2_ in this._preFilters)
         {
            this.removeFilter(_loc2_);
         }
         for each(_loc2_ in param1)
         {
            this.addFilter(_loc2_,false);
         }
      }
      
      public function get postFilters() : Array
      {
         return this._postFilters.slice();
      }
      
      public function set postFilters(param1:Array) : void
      {
         var _loc2_:BitmapFilter = null;
         for each(_loc2_ in this._postFilters)
         {
            this.removeFilter(_loc2_);
         }
         for each(_loc2_ in param1)
         {
            this.addFilter(_loc2_,true);
         }
      }
      
      public function setPaletteMap(param1:Array = null, param2:Array = null, param3:Array = null, param4:Array = null) : void
      {
         this._colorMap = new Array(4);
         this._colorMap[0] = param4;
         this._colorMap[1] = param1;
         this._colorMap[2] = param2;
         this._colorMap[3] = param3;
      }
      
      public function clearPaletteMap() : void
      {
         this._colorMap = null;
      }
      
      protected function createBitmap() : void
      {
         if(!this._canvas)
         {
            return;
         }
         if(Boolean(this._bitmap) && Boolean(this._bitmapData))
         {
            this._bitmapData.dispose();
            this._bitmapData = null;
         }
         if(this._bitmap)
         {
            removeChild(this._bitmap);
            this._bitmap = null;
         }
         this._bitmap = new Bitmap(null,"auto",this._smoothing);
         this._bitmapData = new BitmapData(Math.ceil(this._canvas.width),Math.ceil(this._canvas.height),true,0);
         this._bitmap.bitmapData = this._bitmapData;
         addChild(this._bitmap);
         this._bitmap.x = this._canvas.x;
         this._bitmap.y = this._canvas.y;
      }
      
      public function get canvas() : Rectangle
      {
         return this._canvas;
      }
      
      public function set canvas(param1:Rectangle) : void
      {
         this._canvas = param1;
         this.createBitmap();
      }
      
      public function get clearBetweenFrames() : Boolean
      {
         return this._clearBetweenFrames;
      }
      
      public function set clearBetweenFrames(param1:Boolean) : void
      {
         this._clearBetweenFrames = param1;
      }
      
      public function get smoothing() : Boolean
      {
         return this._smoothing;
      }
      
      public function set smoothing(param1:Boolean) : void
      {
         this._smoothing = param1;
         if(this._bitmap)
         {
            this._bitmap.smoothing = param1;
         }
      }
      
      override protected function renderParticles(param1:Array) : void
      {
         var _loc2_:int = 0;
         var _loc3_:int = 0;
         if(!this._bitmap)
         {
            return;
         }
         this._bitmapData.lock();
         _loc3_ = int(this._preFilters.length);
         _loc2_ = 0;
         while(_loc2_ < _loc3_)
         {
            this._bitmapData.applyFilter(this._bitmapData,this._bitmapData.rect,BitmapRenderer.ZERO_POINT,this._preFilters[_loc2_]);
            _loc2_++;
         }
         if(this._clearBetweenFrames && _loc3_ == 0)
         {
            this._bitmapData.fillRect(this._bitmap.bitmapData.rect,0);
         }
         _loc3_ = int(param1.length);
         if(_loc3_)
         {
            _loc2_ = _loc3_;
            while(_loc2_--)
            {
               this.drawParticle(Particle2D(param1[_loc2_]));
            }
         }
         _loc3_ = int(this._postFilters.length);
         _loc2_ = 0;
         while(_loc2_ < _loc3_)
         {
            this._bitmapData.applyFilter(this._bitmapData,this._bitmapData.rect,BitmapRenderer.ZERO_POINT,this._postFilters[_loc2_]);
            _loc2_++;
         }
         if(this._colorMap)
         {
            this._bitmapData.paletteMap(this._bitmapData,this._bitmapData.rect,ZERO_POINT,this._colorMap[1],this._colorMap[2],this._colorMap[3],this._colorMap[0]);
         }
         this._bitmapData.unlock();
      }
      
      protected function drawParticle(param1:Particle2D) : void
      {
         var _loc2_:Matrix = null;
         _loc2_ = param1.matrixTransform;
         _loc2_.translate(-this._canvas.x,-this._canvas.y);
         this._bitmapData.draw(param1.image,_loc2_,param1.colorTransform,DisplayObject(param1.image).blendMode,null,this._smoothing);
      }
      
      public function get bitmapData() : BitmapData
      {
         return this._bitmapData;
      }
   }
}

package org.flintparticles.twoD.renderers
{
   import flash.geom.Rectangle;
   import org.flintparticles.twoD.particles.Particle2D;
   
   public class PixelRenderer extends BitmapRenderer
   {
      
      public function PixelRenderer(param1:Rectangle)
      {
         super(param1);
      }
      
      override protected function drawParticle(param1:Particle2D) : void
      {
         _bitmapData.setPixel32(Math.round(param1.x - _canvas.x),Math.round(param1.y - _canvas.y),param1.color);
      }
   }
}

package org.flintparticles.twoD.zones
{
   import flash.geom.Point;
   import org.flintparticles.twoD.particles.Particle2D;
   
   public class DiscZone implements Zone2D
   {
      
      private static const TWOPI:Number = Math.PI * 2;
      
      private var _center:Point;
      
      private var _innerRadius:Number;
      
      private var _outerRadius:Number;
      
      private var _innerSq:Number;
      
      private var _outerSq:Number;
      
      public function DiscZone(param1:Point = null, param2:Number = 0, param3:Number = 0)
      {
         super();
         if(param2 < param3)
         {
            throw new Error("The outerRadius (" + param2 + ") can\'t be smaller than the innerRadius (" + param3 + ") in your DiscZone. N.B. the outerRadius is the second argument in the constructor and the innerRadius is the third argument.");
         }
         if(param1 == null)
         {
            this._center = new Point(0,0);
         }
         else
         {
            this._center = param1;
         }
         this._innerRadius = param3;
         this._outerRadius = param2;
         this._innerSq = this._innerRadius * this._innerRadius;
         this._outerSq = this._outerRadius * this._outerRadius;
      }
      
      public function get center() : Point
      {
         return this._center;
      }
      
      public function set center(param1:Point) : void
      {
         this._center = param1;
      }
      
      public function get centerX() : Number
      {
         return this._center.x;
      }
      
      public function set centerX(param1:Number) : void
      {
         this._center.x = param1;
      }
      
      public function get centerY() : Number
      {
         return this._center.y;
      }
      
      public function set centerY(param1:Number) : void
      {
         this._center.y = param1;
      }
      
      public function get innerRadius() : Number
      {
         return this._innerRadius;
      }
      
      public function set innerRadius(param1:Number) : void
      {
         this._innerRadius = param1;
         this._innerSq = this._innerRadius * this._innerRadius;
      }
      
      public function get outerRadius() : Number
      {
         return this._outerRadius;
      }
      
      public function set outerRadius(param1:Number) : void
      {
         this._outerRadius = param1;
         this._outerSq = this._outerRadius * this._outerRadius;
      }
      
      public function contains(param1:Number, param2:Number) : Boolean
      {
         param1 -= this._center.x;
         param2 -= this._center.y;
         var _loc3_:Number = param1 * param1 + param2 * param2;
         return _loc3_ <= this._outerSq && _loc3_ >= this._innerSq;
      }
      
      public function getLocation() : Point
      {
         var _loc1_:Number = Math.random();
         var _loc2_:Point = Point.polar(this._innerRadius + (1 - _loc1_ * _loc1_) * (this._outerRadius - this._innerRadius),Math.random() * TWOPI);
         _loc2_.x += this._center.x;
         _loc2_.y += this._center.y;
         return _loc2_;
      }
      
      public function getArea() : Number
      {
         return Math.PI * (this._outerSq - this._innerSq);
      }
      
      public function collideParticle(param1:Particle2D, param2:Number = 1) : Boolean
      {
         var _loc3_:Number = NaN;
         var _loc4_:Number = NaN;
         var _loc5_:Number = NaN;
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         var _loc8_:Number = NaN;
         var _loc9_:Number = NaN;
         var _loc10_:Number = NaN;
         var _loc11_:Number = NaN;
         var _loc12_:Number = NaN;
         var _loc13_:Number = NaN;
         var _loc14_:Number = 0.001;
         var _loc15_:Number = param1.x - this._center.x;
         var _loc16_:Number = param1.y - this._center.y;
         var _loc17_:Number = param1.velX * _loc15_ + param1.velY * _loc16_;
         if(_loc17_ < 0)
         {
            _loc3_ = this._outerRadius + param1.collisionRadius;
            if(Math.abs(_loc15_) > _loc3_)
            {
               return false;
            }
            if(Math.abs(_loc16_) > _loc3_)
            {
               return false;
            }
            _loc7_ = _loc15_ * _loc15_ + _loc16_ * _loc16_;
            _loc5_ = _loc3_ * _loc3_;
            if(_loc7_ > _loc5_)
            {
               return false;
            }
            _loc9_ = param1.previousX - this._center.x;
            _loc10_ = param1.previousY - this._center.y;
            _loc11_ = _loc9_ * _loc9_ + _loc10_ * _loc10_;
            if(_loc11_ > _loc5_)
            {
               _loc12_ = (1 + param2) * _loc17_ / _loc7_;
               param1.velX -= _loc12_ * _loc15_;
               param1.velY -= _loc12_ * _loc16_;
               _loc8_ = Math.sqrt(_loc7_);
               _loc13_ = (2 * _loc3_ - _loc8_) / _loc8_ + _loc14_;
               param1.x = this._center.x + _loc15_ * _loc13_;
               param1.y = this._center.y + _loc16_ * _loc13_;
               return true;
            }
            if(this._innerRadius != 0 && this.innerRadius != this._outerRadius)
            {
               _loc4_ = this._innerRadius + param1.collisionRadius;
               if(Math.abs(_loc15_) > _loc4_)
               {
                  return false;
               }
               if(Math.abs(_loc16_) > _loc4_)
               {
                  return false;
               }
               _loc6_ = _loc4_ * _loc4_;
               if(_loc7_ > _loc6_)
               {
                  return false;
               }
               if(_loc11_ > _loc6_)
               {
                  _loc12_ = (1 + param2) * _loc17_ / _loc7_;
                  param1.velX -= _loc12_ * _loc15_;
                  param1.velY -= _loc12_ * _loc16_;
                  _loc8_ = Math.sqrt(_loc7_);
                  _loc13_ = (2 * _loc4_ - _loc8_) / _loc8_ + _loc14_;
                  param1.x = this._center.x + _loc15_ * _loc13_;
                  param1.y = this._center.y + _loc16_ * _loc13_;
                  return true;
               }
            }
            return false;
         }
         _loc3_ = this._outerRadius - param1.collisionRadius;
         _loc9_ = param1.previousX - this._center.x;
         _loc10_ = param1.previousY - this._center.y;
         if(Math.abs(_loc9_) > _loc3_)
         {
            return false;
         }
         if(Math.abs(_loc10_) > _loc3_)
         {
            return false;
         }
         _loc11_ = _loc9_ * _loc9_ + _loc10_ * _loc10_;
         _loc5_ = _loc3_ * _loc3_;
         if(_loc11_ > _loc5_)
         {
            return false;
         }
         _loc7_ = _loc15_ * _loc15_ + _loc16_ * _loc16_;
         if(this._innerRadius != 0 && this.innerRadius != this._outerRadius)
         {
            _loc4_ = this._innerRadius - param1.collisionRadius;
            _loc6_ = _loc4_ * _loc4_;
            if(_loc11_ < _loc6_ && _loc7_ >= _loc6_)
            {
               _loc12_ = (1 + param2) * _loc17_ / _loc7_;
               param1.velX -= _loc12_ * _loc15_;
               param1.velY -= _loc12_ * _loc16_;
               _loc8_ = Math.sqrt(_loc7_);
               _loc13_ = (2 * _loc4_ - _loc8_) / _loc8_ - _loc14_;
               param1.x = this._center.x + _loc15_ * _loc13_;
               param1.y = this._center.y + _loc16_ * _loc13_;
               return true;
            }
         }
         if(_loc7_ >= _loc5_)
         {
            _loc12_ = (1 + param2) * _loc17_ / _loc7_;
            param1.velX -= _loc12_ * _loc15_;
            param1.velY -= _loc12_ * _loc16_;
            _loc8_ = Math.sqrt(_loc7_);
            _loc13_ = (2 * _loc3_ - _loc8_) / _loc8_ - _loc14_;
            param1.x = this._center.x + _loc15_ * _loc13_;
            param1.y = this._center.y + _loc16_ * _loc13_;
            return true;
         }
         return false;
      }
   }
}

package org.flintparticles.twoD.zones
{
   import flash.geom.Point;
   import org.flintparticles.twoD.particles.Particle2D;
   
   public class LineZone implements Zone2D
   {
      
      private var _start:Point;
      
      private var _end:Point;
      
      private var _length:Point;
      
      private var _normal:Point;
      
      private var _parallel:Point;
      
      public function LineZone(param1:Point = null, param2:Point = null)
      {
         super();
         if(param1 == null)
         {
            this._start = new Point(0,0);
         }
         else
         {
            this._start = param1;
         }
         if(param2 == null)
         {
            this._end = new Point(0,0);
         }
         else
         {
            this._end = param2;
         }
         this.setLengthAndNormal();
      }
      
      private function setLengthAndNormal() : void
      {
         this._length = this._end.subtract(this._start);
         this._parallel = this._length.clone();
         this._parallel.normalize(1);
         this._normal = new Point(this._parallel.y,-this._parallel.x);
      }
      
      public function get start() : Point
      {
         return this._start;
      }
      
      public function set start(param1:Point) : void
      {
         this._start = param1;
         this.setLengthAndNormal();
      }
      
      public function get end() : Point
      {
         return this._end;
      }
      
      public function set end(param1:Point) : void
      {
         this._end = param1;
         this.setLengthAndNormal();
      }
      
      public function get startX() : Number
      {
         return this._start.x;
      }
      
      public function set startX(param1:Number) : void
      {
         this._start.x = param1;
         this._length = this._end.subtract(this._start);
      }
      
      public function get startY() : Number
      {
         return this._start.y;
      }
      
      public function set startY(param1:Number) : void
      {
         this._start.y = param1;
         this._length = this._end.subtract(this._start);
      }
      
      public function get endX() : Number
      {
         return this._end.x;
      }
      
      public function set endX(param1:Number) : void
      {
         this._end.x = param1;
         this._length = this._end.subtract(this._start);
      }
      
      public function get endY() : Number
      {
         return this._end.y;
      }
      
      public function set endY(param1:Number) : void
      {
         this._end.y = param1;
         this._length = this._end.subtract(this._start);
      }
      
      public function contains(param1:Number, param2:Number) : Boolean
      {
         if((param1 - this._start.x) * this._length.y - (param2 - this._start.y) * this._length.x != 0)
         {
            return false;
         }
         return (param1 - this._start.x) * (param1 - this._end.x) + (param2 - this._start.y) * (param2 - this._end.y) <= 0;
      }
      
      public function getLocation() : Point
      {
         var _loc1_:Point = this._start.clone();
         var _loc2_:Number = Math.random();
         _loc1_.x += this._length.x * _loc2_;
         _loc1_.y += this._length.y * _loc2_;
         return _loc1_;
      }
      
      public function getArea() : Number
      {
         return this._length.length;
      }
      
      public function collideParticle(param1:Particle2D, param2:Number = 1) : Boolean
      {
         var _loc6_:Number = NaN;
         var _loc7_:Number = NaN;
         var _loc3_:Number = (param1.previousX - this._start.x) * this._normal.x + (param1.previousY - this._start.y) * this._normal.y;
         var _loc4_:Number = param1.velX * this._normal.x + param1.velY * this._normal.y;
         if(_loc3_ * _loc4_ >= 0)
         {
            return false;
         }
         var _loc5_:Number = (param1.x - this._start.x) * this._normal.x + (param1.y - this._start.y) * this._normal.y;
         if(_loc5_ * _loc3_ > 0 && (_loc5_ > param1.collisionRadius || _loc5_ < -param1.collisionRadius))
         {
            return false;
         }
         if(_loc3_ < 0)
         {
            _loc6_ = this._normal.x * param1.collisionRadius;
            _loc7_ = this._normal.y * param1.collisionRadius;
         }
         else
         {
            _loc6_ = -this._normal.x * param1.collisionRadius;
            _loc7_ = -this._normal.y * param1.collisionRadius;
         }
         var _loc8_:Number = param1.previousX + _loc6_;
         var _loc9_:Number = param1.previousY + _loc7_;
         var _loc10_:Number = param1.x + _loc6_;
         var _loc11_:Number = param1.y + _loc7_;
         var _loc12_:Number = this._start.x - this._parallel.x * param1.collisionRadius;
         var _loc13_:Number = this._start.y - this._parallel.y * param1.collisionRadius;
         var _loc14_:Number = this._end.x + this._parallel.x * param1.collisionRadius;
         var _loc15_:Number = this._end.y + this._parallel.y * param1.collisionRadius;
         var _loc16_:Number = 1 / ((_loc11_ - _loc9_) * (_loc14_ - _loc12_) - (_loc10_ - _loc8_) * (_loc15_ - _loc13_));
         var _loc17_:Number = _loc16_ * ((_loc10_ - _loc8_) * (_loc13_ - _loc9_) - (_loc11_ - _loc9_) * (_loc12_ - _loc8_));
         if(_loc17_ < 0 || _loc17_ > 1)
         {
            return false;
         }
         var _loc18_:Number = -_loc16_ * ((_loc14_ - _loc12_) * (_loc9_ - _loc13_) - (_loc15_ - _loc13_) * (_loc8_ - _loc12_));
         if(_loc18_ < 0 || _loc18_ > 1)
         {
            return false;
         }
         param1.x = param1.previousX + _loc18_ * (param1.x - param1.previousX);
         param1.y = param1.previousY + _loc18_ * (param1.y - param1.previousY);
         var _loc19_:Number = this._normal.x * param1.velX + this._normal.y * param1.velY;
         var _loc20_:Number = (1 + param2) * _loc19_;
         param1.velX -= _loc20_ * this._normal.x;
         param1.velY -= _loc20_ * this._normal.y;
         return true;
      }
   }
}

package org.flintparticles.twoD.zones
{
   import flash.geom.Point;
   import org.flintparticles.twoD.particles.Particle2D;
   
   public class PointZone implements Zone2D
   {
      
      private var _point:Point;
      
      public function PointZone(param1:Point = null)
      {
         super();
         if(param1 == null)
         {
            this._point = new Point(0,0);
         }
         else
         {
            this._point = param1;
         }
      }
      
      public function get point() : Point
      {
         return this._point;
      }
      
      public function set point(param1:Point) : void
      {
         this._point = param1;
      }
      
      public function get x() : Number
      {
         return this._point.x;
      }
      
      public function set x(param1:Number) : void
      {
         this._point.x = param1;
      }
      
      public function get y() : Number
      {
         return this._point.y;
      }
      
      public function set y(param1:Number) : void
      {
         this._point.y = param1;
      }
      
      public function contains(param1:Number, param2:Number) : Boolean
      {
         return this._point.x == param1 && this._point.y == param2;
      }
      
      public function getLocation() : Point
      {
         return this._point.clone();
      }
      
      public function getArea() : Number
      {
         return 1;
      }
      
      public function collideParticle(param1:Particle2D, param2:Number = 1) : Boolean
      {
         var _loc19_:Number = NaN;
         var _loc3_:Number = param1.previousX - this._point.x;
         var _loc4_:Number = param1.previousY - this._point.y;
         var _loc5_:Number = _loc3_ * param1.velX + _loc4_ * param1.velY;
         if(_loc5_ >= 0)
         {
            return false;
         }
         var _loc6_:Number = param1.x - this._point.x;
         var _loc7_:Number = param1.y - this._point.y;
         var _loc8_:Number = param1.collisionRadius;
         _loc5_ = _loc6_ * param1.velX + _loc7_ * param1.velY;
         if(_loc5_ <= 0)
         {
            if(_loc6_ > _loc8_ || _loc6_ < -_loc8_)
            {
               return false;
            }
            if(_loc7_ > _loc8_ || _loc7_ < -_loc8_)
            {
               return false;
            }
            if(_loc6_ * _loc6_ + _loc7_ * _loc7_ > _loc8_ * _loc8_)
            {
               return false;
            }
         }
         var _loc9_:Number = _loc6_ - _loc3_;
         var _loc10_:Number = _loc7_ - _loc4_;
         var _loc11_:Number = _loc9_ * _loc9_ + _loc10_ * _loc10_;
         var _loc12_:Number = 2 * (_loc3_ * _loc9_ + _loc4_ * _loc10_);
         var _loc13_:Number = _loc3_ * _loc3_ + _loc4_ * _loc4_ - _loc8_ * _loc8_;
         var _loc14_:Number = _loc12_ * _loc12_ - 4 * _loc11_ * _loc13_;
         if(_loc14_ < 0)
         {
            return false;
         }
         var _loc15_:Number = Math.sqrt(_loc14_);
         var _loc16_:Number = (-_loc12_ + _loc15_) / (2 * _loc11_);
         var _loc17_:Number = (-_loc12_ - _loc15_) / (2 * _loc11_);
         var _loc18_:Array = new Array();
         if(_loc16_ > 0 && _loc16_ <= 1)
         {
            _loc18_.push(_loc16_);
         }
         if(_loc17_ > 0 && _loc17_ <= 1)
         {
            _loc18_.push(_loc17_);
         }
         if(_loc18_.length == 0)
         {
            return false;
         }
         if(_loc18_.length == 1)
         {
            _loc19_ = Number(_loc18_[0]);
         }
         else
         {
            _loc19_ = Math.min(_loc16_,_loc17_);
         }
         var _loc20_:Number = _loc3_ + _loc19_ * _loc9_ + this._point.x;
         var _loc21_:Number = _loc4_ + _loc19_ * _loc10_ + this._point.y;
         var _loc22_:Number = _loc20_ - this._point.x;
         var _loc23_:Number = _loc21_ - this._point.y;
         var _loc24_:Number = Math.sqrt(_loc22_ * _loc22_ + _loc23_ * _loc23_);
         _loc22_ /= _loc24_;
         _loc23_ /= _loc24_;
         var _loc25_:Number = _loc9_ * _loc22_ + _loc10_ * _loc23_;
         _loc9_ -= 2 * _loc22_ * _loc25_;
         _loc10_ -= 2 * _loc23_ * _loc25_;
         param1.x = _loc20_ + (1 - _loc19_) * _loc9_;
         param1.y = _loc21_ + (1 - _loc19_) * _loc10_;
         var _loc26_:Number = param1.velX * _loc22_ + param1.velY * _loc23_;
         param1.velX -= (1 + param2) * _loc22_ * _loc26_;
         param1.velY -= (1 + param2) * _loc23_ * _loc26_;
         return true;
      }
   }
}

package org.flintparticles.twoD.zones
{
   import flash.geom.Point;
   import org.flintparticles.twoD.particles.Particle2D;
   
   public interface Zone2D
   {
      
      function contains(param1:Number, param2:Number) : Boolean;
      
      function getLocation() : Point;
      
      function getArea() : Number;
      
      function collideParticle(param1:Particle2D, param2:Number = 1) : Boolean;
   }
}

